/*!
 * angular-chart.js - An angular.js wrapper for Chart.js
 * http://jtblin.github.io/angular-chart.js/
 * Version: 1.1.1
 *
 * Copyright 2016 Jerome Touffe-Blin
 * Released under the BSD-2-Clause license
 * https://github.com/jtblin/angular-chart.js/blob/master/LICENSE
 */
(function(a){if(typeof exports==="object"){module.exports=a(typeof angular!=="undefined"?angular:require("angular"),typeof Chart!=="undefined"?Chart:require("chart.js"))}else{if(typeof define==="function"&&define.amd){define(["angular","chart"],a)}else{if(typeof angular==="undefined"){throw new Error("AngularJS framework needs to be included, see https://angularjs.org/")}else{if(typeof Chart==="undefined"){throw new Error("Chart.js library needs to be included, see http://jtblin.github.io/angular-chart.js/")}}a(angular,Chart)}}}(function(c,a){a.defaults.global.multiTooltipTemplate="<%if (datasetLabel){%><%=datasetLabel%>: <%}%><%= value %>";a.defaults.global.tooltips.mode="label";a.defaults.global.elements.line.borderWidth=2;a.defaults.global.elements.rectangle.borderWidth=2;a.defaults.global.legend.display=false;a.defaults.global.colors=["#97BBCD","#DCDCDC","#F7464A","#46BFBD","#FDB45C","#949FB1","#4D5360"];var d=typeof window.G_vmlCanvasManager==="object"&&window.G_vmlCanvasManager!==null&&typeof window.G_vmlCanvasManager.initElement==="function";if(d){a.defaults.global.animation=false}return c.module("chart.js",[]).provider("ChartJs",b).factory("ChartJsFactory",["ChartJs","$timeout",e]).directive("chartBase",["ChartJsFactory",function(f){return new f()}]).directive("chartLine",["ChartJsFactory",function(f){return new f("line")}]).directive("chartBar",["ChartJsFactory",function(f){return new f("bar")}]).directive("chartHorizontalBar",["ChartJsFactory",function(f){return new f("horizontalBar")}]).directive("chartRadar",["ChartJsFactory",function(f){return new f("radar")}]).directive("chartDoughnut",["ChartJsFactory",function(f){return new f("doughnut")}]).directive("chartPie",["ChartJsFactory",function(f){return new f("pie")}]).directive("chartPolarArea",["ChartJsFactory",function(f){return new f("polarArea")}]).directive("chartBubble",["ChartJsFactory",function(f){return new f("bubble")}]).name;function b(){var f={responsive:true};var g={Chart:a,getOptions:function(h){var i=h&&f[h]||{};return c.extend({},f,i)}};this.setOptions=function(i,h){if(!h){h=i;f=c.merge(f,h)}else{f[i]=c.merge(f[i]||{},h)}c.merge(g.Chart.defaults,f)};this.$get=function(){return g}}function e(g,A){return function u(F){return{restrict:"CA",scope:{chartGetColor:"=?",chartType:"=",chartData:"=?",chartLabels:"=?",chartOptions:"=?",chartSeries:"=?",chartColors:"=?",chartClick:"=?",chartHover:"=?",chartDatasetOverride:"=?"},link:function(J,K){if(d){window.G_vmlCanvasManager.initElement(K[0])}J.$watch("chartData",H,true);J.$watch("chartSeries",I,true);J.$watch("chartLabels",I,true);J.$watch("chartOptions",I,true);J.$watch("chartColors",I,true);J.$watch("chartDatasetOverride",I,true);J.$watch("chartType",G,false);J.$on("$destroy",function(){E(J)});J.$on("$resize",function(){if(J.chart){J.chart.resize()}});function H(M,L){if(!M||!M.length||(Array.isArray(M[0])&&!M[0].length)){E(J);return}var N=F||J.chartType;if(!N){return}if(J.chart&&o(M,L)){return q(M,J)}D(N,J,K)}function I(M,L){if(t(M)){return}if(c.equals(M,L)){return}var N=F||J.chartType;if(!N){return}D(N,J,K)}function G(M,L){if(t(M)){return}if(c.equals(M,L)){return}D(M,J,K)}}}};function D(I,H,J){var G=v(I,H);if(!y(H)||!n(I,H,J,G)){return}var L=J[0];var F=L.getContext("2d");H.chartGetColor=C(H);var K=l(I,H);E(H);H.chart=new g.Chart(F,{type:I,data:K,options:G});H.$emit("chart-create",H.chart);f(L,H)}function o(G,F){if(G&&F&&G.length&&F.length){return Array.isArray(G[0])?G.length===F.length&&G.every(function(I,H){return I.length===F[H].length}):F.reduce(h,0)>0?G.length===F.length:false}return false}function h(F,G){return F+G}function x(H,I,G){var F={point:void 0,points:void 0};return function(K){var N=H.chart.getElementAtEvent||H.chart.getPointAtEvent;var M=H.chart.getElementsAtEvent||H.chart.getPointsAtEvent;if(M){var L=M.call(H.chart,K);var J=N?N.call(H.chart,K)[0]:void 0;if(G===false||(!c.equals(F.points,L)&&!c.equals(F.point,J))){F.point=J;F.points=L;H[I](L,K,J)}}}}function m(I,H){var F=c.copy(H.chartColors||g.getOptions(I).chartColors||a.defaults.global.colors);var G=F.length<H.chartData.length;while(F.length<H.chartData.length){F.push(H.chartGetColor())}if(G){H.chartColors=F}return F.map(p)}function p(F){if(typeof F==="string"&&F[0]==="r"){return i(B(F))}if(typeof F==="string"&&F[0]==="#"){return i(z(F.substr(1)))}if(typeof F==="object"&&F!==null){return F}return w()}function w(){var F=[j(0,255),j(0,255),j(0,255)];return i(F)}function i(F){var G=F[3]||1;F=F.slice(0,3);return{backgroundColor:k(F,0.2),pointBackgroundColor:k(F,G),pointHoverBackgroundColor:k(F,0.8),borderColor:k(F,G),pointBorderColor:"#fff",pointHoverBorderColor:k(F,G)}}function j(G,F){return Math.floor(Math.random()*(F-G+1))+G}function k(F,G){return d?"rgb("+F.join(",")+")":"rgba("+F.concat(G).join(",")+")"}function z(I){var J=parseInt(I,16),H=(J>>16)&255,G=(J>>8)&255,F=J&255;return[H,G,F]}function B(F){var G=F.match(/^rgba?\(([\d,.]+)\)$/);if(!G){throw new Error("Cannot parse rgb value")}F=G[1].split(",");return F.map(Number)}function y(F){return F.chartData&&F.chartData.length}function C(F){return typeof F.chartGetColor==="function"?F.chartGetColor:w}function l(H,G){var F=m(H,G);return Array.isArray(G.chartData[0])?s(G.chartLabels,G.chartData,G.chartSeries||[],F,G.chartDatasetOverride):r(G.chartLabels,G.chartData,F,G.chartDatasetOverride)}function s(J,H,G,F,I){return{labels:J,datasets:H.map(function(L,K){var M=c.extend({},F[K],{label:G[K],data:L});if(I&&I.length>=K){c.merge(M,I[K])}return M})}}function r(J,G,F,I){var H={labels:J,datasets:[{data:G,backgroundColor:F.map(function(K){return K.pointBackgroundColor}),hoverBackgroundColor:F.map(function(K){return K.backgroundColor})}]};if(I){c.merge(H.datasets[0],I)}return H}function v(G,F){return c.extend({},g.getOptions(G),F.chartOptions)}function f(G,F){G.onclick=F.chartClick?x(F,"chartClick",false):c.noop;G.onmousemove=F.chartHover?x(F,"chartHover",true):c.noop}function q(F,G){if(Array.isArray(G.chartData[0])){G.chart.data.datasets.forEach(function(I,H){I.data=F[H]})}else{G.chart.data.datasets[0].data=F}G.chart.update();G.$emit("chart-update",G.chart)}function t(F){return !F||(Array.isArray(F)&&!F.length)||(typeof F==="object"&&!Object.keys(F).length)}function n(H,G,I,F){if(F.responsive&&I[0].clientHeight===0){A(function(){D(H,G,I)},50,false);return false}return true}function E(F){if(!F.chart){return}F.chart.destroy();F.$emit("chart-destroy",F.chart)}}}));