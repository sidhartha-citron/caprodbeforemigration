(globalThis.webpackChunkmaps_desktop=globalThis.webpackChunkmaps_desktop||[]).push([[7718],{7097:(t,s,e)=>{t.exports=e.p+"images/53b9b138946fee58b1ad8d319015d444.svg"},8659:t=>{t.exports='<svg xmlns=http://www.w3.org/2000/svg x=0px y=0px width=52px height=52px viewBox="0 0 52 52" enable-background="new 0 0 52 52" xml:space=preserve> <path fill=#FFFFFF d="M8,20c3.3,0,6,2.7,6,6s-2.7,6-6,6s-6-2.7-6-6S4.7,20,8,20z M26,20c3.3,0,6,2.7,6,6s-2.7,6-6,6s-6-2.7-6-6\r\n\tS22.7,20,26,20z M44,20c3.3,0,6,2.7,6,6s-2.7,6-6,6s-6-2.7-6-6S40.7,20,44,20z"/> </svg> '},6258:(t,s,e)=>{"use strict";e.r(s),e.d(s,{default:()=>u});var i=e(5908),o=e(8050),n=e(2589),r=e(9884),l=e(4141),a=e(675);const{MAToastMessages:d}=window,c={components:{MAActionMenu:n.Z,MAActionMenuItem:r.Z,MAModal:l.Z,MASpinner:a.Z},data:()=>({isLoading:!1}),computed:{...(0,i.mapState)({store__toggle:"toggle",store__settingsGroup:"settingsGroup",store__config:"config"}),filteredGroups(){let t=this.store__config.groups;return this.store__config.filterTerm&&(t=this.store__config.groups.filter((t=>t.Name.toLowerCase().includes(this.store__config.filterTerm.toLowerCase())))),t}},async created(){await this.getAllSettingsGroups();const t=(0,o.Qb)();t.recordId&&this.$parent.populatePermissionGroup(t.recordId,"edit")},methods:{...(0,i.mapMutations)({store__setSettingsGroup:"setSettingsGroup"}),async getAllSettingsGroups(){this.isLoading=!0;try{const{groups:t,success:s,error:e}=await this.$remote("maps.UserAJAXResources.GetAllSettingsGroups",[]);s?this.store__config.groups=t.map((t=>({...t,LastModifiedDate:this.$moment(t.LastModifiedDate).format("MMMM Do, YYYY"),Id:t.Id?t.Id:"defaultSettings"}))):(d.showError({message:"Error. Could not get Permission Groups",timeOut:6e3}),console.error(e))}catch(t){d.showError({message:`Error. ${t.event.message}.`,timeOut:6e3}),console.error(t)}finally{this.isLoading=!1}},openDeletePermissionModal(t){this.store__config.groupIdToDelete=t,this.store__config.showDeleteWarning=!0},closeDeletePermissionModal(){this.store__config.showDeleteWarning=!1,this.store__config.groupIdToDelete=null},async deletePermissionGroup(t){this.isLoading=!0;try{const{success:s,error:e}=await this.$remote("maps.UserAJAXResources.DeleteSettingsGroup",[t]);s?(d.showSuccess({message:"Permission Group Deleted",timeOut:6e3}),await this.getAllSettingsGroups()):(d.showError({message:"Error Deleting Permission Group.",timeOut:6e3}),console.error(e))}catch(t){d.showError({message:`Error. ${t.event.message}.`,timeOut:6e3}),console.error(t)}finally{this.store__toggle.showPermissionGroupView=!1,this.isLoading=!1,this.store__config.showDeleteWarning=!1,this.store__config.groupIdToDelete=null}}}},u=(0,e(1900).Z)(c,(function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",[t.store__config.showDeleteWarning?i("MAModal",{attrs:{title:"Delete Permission Group",doDetach:!0,hideCloseButton:!0,closeLabel:""},on:{close:t.closeDeletePermissionModal}},[i("div",{staticClass:"slds-text-body_regular slds-var-p-around_small",attrs:{slot:"content"},slot:"content"},[i("p",[t._v("Are you sure you want to delete this Permission Group?")]),t._v(" "),i("br"),t._v(" "),i("p",[t._v("When deleting a Permission Group all Assignments made will be deleted as well. The Users in the deleted Permission Group will then return to the Default Group.")]),t._v(" "),i("br"),t._v(" "),i("p",[t._v("A user can only be assigned to 1 User-based Permission Group and/or 1 Profile-based Permission Group at a given time.")])]),t._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("button",{staticClass:"slds-button slds-button_neutral",on:{click:t.closeDeletePermissionModal}},[t._v("\n                Cancel\n            ")]),t._v(" "),i("button",{staticClass:"slds-button slds-button_destructive",on:{click:function(s){return t.deletePermissionGroup(t.store__config.groupIdToDelete)}}},[t._v("\n                Delete\n            ")])])]):t._e(),t._v(" "),i("div",{staticClass:"slds-card slds-grid slds-grid_vertical"},[i("MASpinner",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}]}),t._v(" "),i("div",{staticClass:"slds-grid"},[i("table",{staticClass:"slds-table slds-table_bordered slds-table_fixed-layout slds-table_resizable-cols",attrs:{role:"grid"}},[i("thead",[i("tr",{staticClass:"slds-line-height_reset"},[i("th",{staticClass:"slds-text-align_right",staticStyle:{width:"3.25rem"},attrs:{scope:"col"}}),t._v(" "),i("th",{attrs:{"aria-label":"Permission Groups","aria-sort":"none",scope:"col"}},[i("a",{staticClass:"slds-th__action slds-text-link_reset",attrs:{href:"javascript:void(0);",role:"button",tabindex:"-1"}},[i("span",{staticClass:"slds-assistive-text"},[t._v("Sort By: ")]),t._v(" "),i("div",{staticClass:"slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate"},[i("span",{staticClass:"slds-truncate",attrs:{title:"Permission Group"}},[t._v("Permission Group")]),t._v(" "),i("MAIcon",{staticClass:"slds-icon_container slds-icon-utility-arrowdown",attrs:{src:e(7097),iconClass:["slds-icon","slds-icon-text-default","slds-is-sortable__icon"]}})],1)])]),t._v(" "),i("th",{attrs:{"aria-label":"Description","aria-sort":"none",scope:"col"}},[i("a",{staticClass:"slds-th__action slds-text-link_reset",attrs:{href:"javascript:void(0);",role:"button",tabindex:"-1"}},[i("span",{staticClass:"slds-assistive-text"},[t._v("Sort By: ")]),t._v(" "),i("div",{staticClass:"slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate"},[i("span",{staticClass:"slds-truncate",attrs:{title:"Description"}},[t._v("Description")]),t._v(" "),i("MAIcon",{staticClass:"slds-icon_container slds-icon-utility-arrowdown",attrs:{src:e(7097),iconClass:["slds-icon","slds-icon-text-default","slds-is-sortable__icon"]}})],1)])]),t._v(" "),i("th",{attrs:{"aria-label":"Created By","aria-sort":"none",scope:"col"}},[i("a",{staticClass:"slds-th__action slds-text-link_reset",attrs:{href:"javascript:void(0);",role:"button",tabindex:"-1"}},[i("span",{staticClass:"slds-assistive-text"},[t._v("Sort By: ")]),t._v(" "),i("div",{staticClass:"slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate"},[i("span",{staticClass:"slds-truncate",attrs:{title:"Created By"}},[t._v("Created By")]),t._v(" "),i("MAIcon",{staticClass:"slds-icon_container slds-icon-utility-arrowdown",attrs:{src:e(7097),iconClass:["slds-icon","slds-icon-text-default","slds-is-sortable__icon"]}})],1)])]),t._v(" "),i("th",{attrs:{"aria-label":"Last Modified","aria-sort":"none",scope:"col"}},[i("a",{staticClass:"slds-th__action slds-text-link_reset",attrs:{href:"javascript:void(0);",role:"button",tabindex:"-1"}},[i("span",{staticClass:"slds-assistive-text"},[t._v("Sort by: ")]),t._v(" "),i("div",{staticClass:"slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate"},[i("span",{staticClass:"slds-truncate",attrs:{title:"Last Modified"}},[t._v("Last Modified")]),t._v(" "),i("MAIcon",{staticClass:"slds-icon_container slds-icon-utility-arrowdown",attrs:{src:e(7097),iconClass:["slds-icon","slds-icon-text-default","slds-is-sortable__icon"]}})],1)])]),t._v(" "),i("th",{staticStyle:{width:"3.25rem"},attrs:{scope:"col"}},[i("div",{staticClass:"slds-truncate slds-assistive-text",attrs:{title:"Actions"}},[t._v("\n                                Actions\n                            ")])])])]),t._v(" "),i("tbody",t._l(t.filteredGroups,(function(s,e){return i("tr",{key:e,staticClass:"slds-hint-parent"},[i("td",{staticClass:"slds-text-align_right",attrs:{role:"gridcell"}}),t._v(" "),i("th",{attrs:{scope:"row",tabindex:"0"}},[i("div",{staticClass:"slds-truncate"},[i("a",{attrs:{href:"javascript:void(0);",tabindex:"-1"},on:{click:function(e){return t.$parent.populatePermissionGroup(s.Id,"edit")}}},[t._v(t._s(s.Name))])])]),t._v(" "),i("td",{attrs:{role:"gridcell"}},[i("div",{staticClass:"slds-truncate"},[t._v("\n                                "+t._s(s.maps__Description__c)+"\n                            ")])]),t._v(" "),i("td",{attrs:{role:"gridcell"}},[i("div",{staticClass:"slds-truncate"},[t._v("\n                                "+t._s(s.CreatedBy?s.CreatedBy.Name:"System")+"\n                            ")])]),t._v(" "),i("td",{attrs:{role:"gridcell"}},[i("div",{staticClass:"slds-truncate"},[t._v("\n                                "+t._s(s.LastModifiedBy?s.LastModifiedBy.Name:"")+" - "+t._s(s.LastModifiedBy?s.LastModifiedDate:"")+"\n                            ")])]),t._v(" "),i("td",{attrs:{role:"gridcell"}},[i("MAActionMenu",[i("button",{staticClass:"slds-button slds-button_icon slds-button_icon-border-filled slds-button_icon-x-small",attrs:{slot:"button"},slot:"button"},[i("span",{staticClass:"slds-button__icon ma-icon ma-icon-down"})]),t._v(" "),"Default"!==s.Name||"defaultSettings"!==s.Id?i("MAActionMenuItem",{attrs:{label:"Edit"},on:{click:function(e){t.store__toggle.readOnlyMode=!1,t.$parent.populatePermissionGroup(s.Id,"edit")}}}):t._e(),t._v(" "),i("MAActionMenuItem",{attrs:{label:"Clone"},on:{click:function(e){return t.$parent.populatePermissionGroup(s.Id,"clone")}}}),t._v(" "),"Default"!==s.Name||"defaultSettings"!==s.Id?i("MAActionMenuItem",{attrs:{label:"Delete"},on:{click:function(e){return t.openDeletePermissionModal(s.Id)}}}):t._e()],1)],1)])})),0)])])],1)],1)}),[],!1,null,null,null).exports},2589:(t,s,e)=>{"use strict";e.d(s,{Z:()=>n});var i=e(5264);const o={name:"MAActionMenu",components:{MAIconInline:e(8969).Z},directives:{"click-outside":i.Z},props:{forceRight:{type:Boolean,default:!1},forceLeft:{type:Boolean,default:!1},doShowSync:{type:Boolean,default:!1},hideOnMouseout:{type:Boolean,default:!1},isToggleValid:{type:Function,default:null},bindTo:{type:HTMLElement,default:null},bindToMousePosition:{type:Boolean,default:!1,validate:t=>t&&null!=(void 0).bindTo||!t},bindToCoords:{type:Object,default:null,validate:t=>t.x&&t.y},isDisabled:{type:Boolean,default:!1},showMoreLabel:{type:String,default:"Show More"}},data(){return{doShow:this.doShowSync,isDirty:!1,dropdownLeft:!0,dropdownRight:!1,container:null}},computed:{doShowAnchor(){return!(this.bindTo||this.bindToMousePosition||this.bindToCoords)},clickOutsideOptions(){return{active:this.doShow,handler:this.doHide}}},watch:{doShow(t){this.$emit("update:doShowSync",t)},doShowSync(t){t!==this.doShow&&this.toggleMenu()}},created(){this.bindTo&&this.bindTo.addEventListener("click",this.toggleMenu)},beforeDestroy(){this.bindTo&&this.bindTo.removeEventListener("click",this.toggleMenu),this.destroy()},methods:{toggleMenu(t){this.isDisabled||t&&this.isToggleValid&&!this.isToggleValid(t,this.doShow)||t&&this.$refs.menu&&(this.$refs.menu===t.target||this.$refs.menu.contains(t.target))||(this.doShow=!this.doShow,this.doShow?(window.addEventListener("scroll",this.doHide,!0),window.addEventListener("resize",this.doHide),this.$nextTick(this.showMenu.bind(this,t)),this.$emit("bindToClick",t)):this.destroy())},showMenu(t){this.forceLeft||this.forceRight||(this.dropdownLeft=!0,this.dropdownRight=!1,this.$nextTick((()=>{this.detach(t),this.$nextTick(this.adjustForClipping)})))},detach(t){if(!this.$refs.menu)return;let s,e;if(t&&this.bindToMousePosition)s=t.clientY,e=t.clientX;else if(this.bindToCoords)s=this.bindToCoords.y,e=this.bindToCoords.x;else{const t=this.$refs.anchor.getBoundingClientRect();s=t.top+this.$refs.anchor.clientHeight,({left:e}=t)}this.$refs.menu.style.top=`${s}px`,this.$refs.menu.style.left=`${e}px`,this.$refs.menu.style.position="fixed",this.container=document.createElement("div"),this.container.className=`slds-scope ${this.$el.className}`,this.container.appendChild(this.$refs.menu),document.body.appendChild(this.container),this.$emit("detached",this.container),window.addEventListener("scroll",this.doHide,!0)},adjustForClipping(){const{menu:t}=this.$refs;if(null==t)return;const s=t.clientWidth,e=t.clientHeight,i=t.getBoundingClientRect().x,o=t.getBoundingClientRect().y,{clientWidth:n}=document.documentElement,{clientHeight:r}=document.documentElement,l=i+s>n,a=o+e>r;l&&(this.$refs.menu.style.left="auto"),a&&(this.$refs.menu.style.top="auto",this.$refs.menu.style.bottom="0"),this.dropdownRight=l,this.dropdownLeft=!l},destroy(){this.doShow=!1,window.removeEventListener("scroll",this.doHide,!0),window.removeEventListener("resize",this.doHide),this.container&&(this.container.remove(),this.container=null),this.$emit("hide")},doHide(t){!this.doShow||this.$refs.menu&&(this.$refs.menu===t.target||this.bindTo&&this.bindTo.contains(t.target))||this.destroy()},mouseover(t){this.$emit("mouseover",t)},mouseout(t){!this.hideOnMouseout||"mouseout"!==t.type||this.$refs.menu.contains(t.toElement||t.relatedTarget)?this.$emit("mouseout",t):this.destroy()}}},n=(0,e(1900).Z)(o,(function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{directives:[{name:"click-outside",rawName:"v-click-outside:[clickOutsideOptions]",arg:t.clickOutsideOptions}],staticClass:"slds-dropdown-trigger slds-dropdown-trigger_click slds-is-open",on:{click:t.toggleMenu}},[t.doShowAnchor?i("div",{ref:"anchor"},[t._t("button",(function(){return[i("button",{staticClass:"slds-button slds-button_icon slds-button_icon-border-filled slds-button_icon-x-small",attrs:{title:t.showMoreLabel}},[i("MAIconInline",{attrs:{svg:e(8659),assistiveText:t.showMoreLabel,iconClass:"slds-button__icon"}})],1)]}))],2):t._e(),t._v(" "),t.doShow?i("div",{ref:"menu",staticClass:"slds-dropdown slds-dropdown_actions",class:{"slds-dropdown_right":t.dropdownRight||t.forceRight,"slds-dropdown_left":t.dropdownLeft||t.forceLeft},on:{mouseover:t.mouseover,mouseout:t.mouseout}},[i("ul",{staticClass:"slds-dropdown__list",attrs:{role:"menu"}},[t._t("default",(function(){return[t._v("--- menu items go here ---")]}))],2)]):t._e()])}),[],!1,null,"c84bab8c",null).exports},9884:(t,s,e)=>{"use strict";e.d(s,{Z:()=>o});const i={name:"MAActionMenuitem",mixins:[e(3826).Z],props:{label:{type:String,required:!0}}},o=(0,e(1900).Z)(i,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("li",t._g({staticClass:"slds-dropdown__item",attrs:{role:"presentation"}},t.$listeners),[e("a",{attrs:{role:"menuitem",tabindex:"0"}},[e("span",{staticClass:"slds-truncate",attrs:{title:t.label}},[t._t("default",(function(){return[t._v(t._s(t.decodeHtml(t.label)))]}))],2)])])}),[],!1,null,null,null).exports}}]);