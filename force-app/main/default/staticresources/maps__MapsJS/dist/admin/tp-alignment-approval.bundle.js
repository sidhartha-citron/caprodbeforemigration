(globalThis.webpackChunkmaps_desktop=globalThis.webpackChunkmaps_desktop||[]).push([[6293],{8969:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var l=s(3856);const a={render:e=>e("span"),props:{svg:{required:!0,validator(e){const t="string"==typeof e,s="object"==typeof e&&!0===e.__esModule;return t||s}},inheritFillFromParent:{type:Boolean,default:!0},assistiveText:{type:String},iconClass:{type:[Array,String]}},mounted(){const e="object"==typeof this.svg&&!0===this.svg.__esModule?this.svg.default:this.svg,t=document.createRange().createContextualFragment(e),s=Array.from(t.childNodes).find((e=>"svg"===e.nodeName));s?l.Z.call(this,s):console.error("Could not build SVG.")}}},5264:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});const l=new Map;function a(e,t,s){const a=function(l){s.context._isDestroyed?document.removeEventListener("click",a):e.contains(l.target)||e===l.target||t(l)};l.set(e,a),setTimeout((()=>document.addEventListener("click",a)),0)}function o(e){const t=l.get(e);document.removeEventListener("click",t),l.delete(e)}const n={bind(e,{arg:{active:t,handler:s}},l){if("function"!=typeof s)throw new Error("v-click-outside: missing required handler argument.");!0===t&&a(e,s,l)},update(e,{arg:{active:t,handler:s}},n){t&&!l.has(e)?a(e,s,n):!t&&l.has(e)&&o(e)},unbind(e){o(e)}}},8221:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});const l=new Map,a=(e,{anchorRef:t,anchorTopOnVerticalOverflow:s})=>{const l=e.getBoundingClientRect(),a=document.documentElement.clientHeight,o=document.documentElement.clientWidth;let n;if(n=a-window.innerHeight<=0?a:window.innerHeight-(()=>{const e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.overflow="scroll",e.style.position="absolute",e.style.top="-9999px",document.body.appendChild(e);const t=e.offsetWidth-e.clientWidth;return e.remove(),t})(),l.x<0)e.style.left=`${e.offsetLeft+Math.abs(l.x)}px`;else if(l.left+l.width>o){const t=l.left+l.width-o-window.pageXOffset;e.style.left=l.left-t+"px"}const i=e.scrollHeight;let r;if(t&&s){const e=t.getBoundingClientRect();let s=e.bottom;s+i>n&&(s=e.top-i),r=s}else l.top+i>n&&(r=l.top-(l.top+i-n));r&&(e.style.top=`${r}px`)},o=e=>{let t=l.get(e);t&&(t.remove(),t=null,l.delete(e))};let n;const i=(e,t,s)=>{s&&"scroll"===s.type&&e&&e.contains(s.target)||("function"==typeof t?t(e,s):(o(e),window.removeEventListener("scroll",n,!0),n=null))},r={bind(e,t,s){t.value.disabled||s.context.$nextTick((()=>{const o=t.value,r=((e,t)=>{const s=document.createElement("div");return s.className=`slds-scope ${t.$el.className}`,s.appendChild(e),document.body.appendChild(s),t.$emit("detached",s),s})(e,s.context);s.container=r,l.set(e,r),"function"==typeof o.customDisplayMethod&&o.customDisplayMethod(),o.anchorRef&&o.anchorRef instanceof HTMLElement&&((e,t,{anchorRef:s,resizeToAnchor:l})=>{e.style.position="fixed";const a=s.getBoundingClientRect();e.style.top=`${a.top+s.offsetHeight}px`,e.style.left=`${a.left}px`,l&&(e.style.width=`${s.offsetWidth}px`)})(e,0,o),o.viewPortOverflow&&s.context.$nextTick((()=>{"function"==typeof o.onRender?(o.onRender(),s.context.$nextTick(a.bind(this,e,o))):a(e,o)})),n=i.bind(null,e,o.scrollHandler),window.addEventListener("scroll",n,!0)}))},update(e,{value:t},s){t.viewPortOverflow&&s.context.$nextTick((()=>{"function"==typeof t.onRender&&t.onRender(),a(e,t)}))},unbind(e){o(e),window.removeEventListener("scroll",n,!0),n=null}}},3826:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});const l={methods:{decodeHtml(e){const t=document.createElement("textarea");return t.innerHTML=e,t.value}}}},539:(e,t,s)=>{e.exports=s.p+"images/fe923447706e7b1dec4427d9d5631360.svg"},785:e=>{e.exports='<svg xmlns=http://www.w3.org/2000/svg x=0px y=0px width=52px height=52px viewBox="0 0 52 52" enable-background="new 0 0 52 52" xml:space=preserve> <path fill=#FFFFFF d="M26,2C12.7,2,2,12.7,2,26s10.7,24,24,24s24-10.7,24-24S39.3,2,26,2z M30.9,26.8l7.8,7.8c0.4,0.4,0.4,1,0,1.4\r\n\tl-2.8,2.8c-0.4,0.4-1,0.4-1.4,0L26.7,31c-0.4-0.4-1-0.4-1.4,0l-7.8,7.8c-0.4,0.4-1,0.4-1.4,0L13.3,36c-0.4-0.4-0.4-1,0-1.4l7.8-7.8\r\n\tc0.4-0.4,0.4-1,0-1.4l-7.9-7.9c-0.4-0.4-0.4-1,0-1.4l2.8-2.8c0.4-0.4,1-0.4,1.4,0l7.9,7.9c0.4,0.4,1,0.4,1.4,0l7.8-7.8\r\n\tc0.4-0.4,1-0.4,1.4,0l2.8,2.8c0.4,0.4,0.4,1,0,1.4l-7.8,7.8C30.6,25.8,30.6,26.4,30.9,26.8z"/> </svg> '},294:e=>{e.exports='<svg xmlns=http://www.w3.org/2000/svg width=52 height=52 viewBox="0 0 52 52"><path d=M49.62,45.27,36.22,32a18.9,18.9,0,1,0-34.1-9.2A18.91,18.91,0,0,0,32,36.27l13.3,13.3a1.45,1.45,0,0,0,2.1,0l2.1-2.1A1.68,1.68,0,0,0,49.62,45.27Zm-28.7-11.5a12.9,12.9,0,1,1,12.9-12.9A12.87,12.87,0,0,1,20.92,33.77Z fill=#fff fill-rule=evenodd /></svg>'},1356:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var l=s(1853),a=s(5994),o=s(2423),n=s(8050);const{MAToastMessages:i}=window,r={components:{MACheckbox:l.Z,MASearch:a.Z},data(){return{approvalSettings:{enabled:!1,publishPDF:!1,pdfAOnly:!1,publishCSV:!1,pubcsvAOnly:!1,exportCSV:!1,csvAOnly:!1,publishETM:!1,etmAOnly:!1,publishMaps:!1,mapAOnly:!1,publishObj:!1,oAOnly:!1,publishFSL:!1,fslAOnly:!1},searchTerm:{label:"",value:null},searches:[{id:(0,n.x$)(),onSearch:(e,t)=>this.searchUserProfile(e,t),label:"Name"}],alignmentApprovers:[]}},async created(){await this.getApprovalSettings(),await this.getApprovers()},methods:{searchUserProfile(e,t){return new Promise((s=>{const l={ajaxResource:"TooltipAJAXResources",action:"get_lookup_optionsv2",baseObject:"User",fieldApiName:"Id",fieldName:"Id",grandparentField:"--none--",term:e,keepSearch:!1};(new o.Z).setAction(this.$Remoting.processAJAXRequest).setErrorHandler((()=>{s({results:[],searchIndex:t})})).invoke([l],(e=>{if(e.success){const{lookupOptions:l=[]}=e;s({results:l,searchIndex:t})}else s({results:[],searchIndex:t})}),{escape:!1,buffer:!1})}))},async selectItem(e){this.searchTerm=e,await this.updateApprover(e.value,e.label,!0),this.clearResults()},clearResults(){this.searchTerm={label:"",value:null}},async getApprovalSettings(){try{const{data:e,message:t,success:s}=await this.$remote("maps.TPRemoteActions.GetAlignmentApprovalSettings");if(s){const t={enabled:!1,publishFSL:!1,publishMaps:!1,publishETM:!1,publishObj:!1,publishPDF:!1,publishCSV:!1,exportCSV:!1,...e.maps__Value__c?JSON.parse(e.maps__Value__c):{}},s={fslAOnly:!1,mapAOnly:!1,pdfAOnly:!1,csvAOnly:!1,pubcsvAOnly:!1,oAOnly:!1,etmAOnly:!1,...e.maps__Value2__c?JSON.parse(e.maps__Value2__c):{}};this.approvalSettings={...t,...s};const l=Object.keys(e.maps__Value__c?JSON.parse(e.maps__Value__c):{});l.includes("publishCSV")&&!l.includes("exportCSV")&&(this.approvalSettings.exportCSV=this.approvalSettings.publishCSV,this.approvalSettings.publishCSV=!1)}else console.error(t)}catch(e){console.error(e)}},async saveApprovalSettings(){try{this.approvalSettings.enabled||this.alignmentApprovers.forEach((e=>{this.removeApprover(e.Id,e.Name)}));const e={enabled:this.approvalSettings.enabled,publishPDF:this.approvalSettings.publishPDF,publishMaps:this.approvalSettings.publishMaps,publishETM:this.approvalSettings.publishETM,publishFSL:this.approvalSettings.publishFSL,publishObj:this.approvalSettings.publishObj,publishCSV:this.approvalSettings.publishCSV,exportCSV:this.approvalSettings.exportCSV},t={pdfAOnly:!!this.approvalSettings.enabled&&this.approvalSettings.pdfAOnly,csvAOnly:!!this.approvalSettings.enabled&&this.approvalSettings.csvAOnly,pubcsvAOnly:!!this.approvalSettings.enabled&&this.approvalSettings.pubcsvAOnly,etmAOnly:!!this.approvalSettings.enabled&&this.approvalSettings.etmAOnly,oAOnly:!!this.approvalSettings.enabled&&this.approvalSettings.oAOnly,mapAOnly:!!this.approvalSettings.enabled&&this.approvalSettings.mapAOnly,fslAOnly:!!this.approvalSettings.enabled&&this.approvalSettings.fslAOnly},{data:s,message:l,success:a}=await this.$remote("maps.TPRemoteActions.SaveAlignmentApprovalSettings",[JSON.stringify(e),JSON.stringify(t)]),o=this.approvalSettings.enabled?"Alignment Approval Enabled":"Alignment Approval Disabled";if(a){const e=JSON.parse(s.maps__Value__c),t=JSON.parse(s.maps__Value2__c);this.approvalSettings={...e,...t},i.showSuccess({position:"toast-top-right",message:o,timeOut:8e3})}else console.error(l)}catch(e){console.error(e)}},async updateApprover(e,t,s){try{const{message:l,success:a}=await this.$remote("maps.TPRemoteActions.UpdateObjectBatch",[[{Id:e,maps__TPApprover__c:s}],!0]);a?(s?this.alignmentApprovers.push({Id:e,Name:t,maps__TPApprover__c:!0}):this.alignmentApprovers.splice(this.alignmentApprovers.findIndex((t=>t.Id===e)),1),i.showSuccess({position:"toast-top-right",message:s?`${t} is now an Approver.`:`${t} has been removed as an Approver.`,timeOut:8e3})):console.error(l)}catch(e){console.error(e)}},async removeApprover(e,t){await this.updateApprover(e,t,!1)},async getApprovers(){try{const{data:e,message:t,success:s}=await this.$remote("maps.TPRemoteActions.GetApprovers");s?this.alignmentApprovers=e.approvers:console.error(t)}catch(e){console.error(e)}}}},c=(0,s(1900).Z)(r,(function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("div",{staticClass:"slds-p-top_large"},[l("MACheckbox",{attrs:{title:"Alignment Approval",toggleBuffer:500,showStateLabels:""},on:{input:function(t){return e.saveApprovalSettings()}},model:{value:e.approvalSettings.enabled,callback:function(t){e.$set(e.approvalSettings,"enabled",t)},expression:"approvalSettings.enabled"}})],1),e._v(" "),e.approvalSettings.enabled?l("fieldset",{staticClass:"slds-form-element slds-p-top_medium"},[l("div",{staticClass:"slds-grid slds-grid_vertical"},[l("div",[e._v("Alignment Approvers")]),e._v(" "),l("MASearch",{staticClass:"slds-size_2-of-7",class:{"slds-has-error":0===e.alignmentApprovers.length},attrs:{searches:e.searches,placeholder:"Search for users...",loadingLabel:e.$Labels.MA_Loading,noSearchResultsLabel:e.$Labels.MA_NO_RESULTS_FOUND},on:{clear:e.clearResults,selected:e.selectItem},scopedSlots:e._u([{key:"result",fn:function(t){return l("span",{staticClass:"slds-listbox__option-text_entity slds-listbox__option slds-listbox__option_plain"},[l("div",[l("div",{staticClass:"slds-text-body_small"},[e._v(e._s(e._f("decode")(t.result.label)))]),e._v(" "),l("div",{staticClass:"slds-grid slds-grid_vertical-align-center"},[t.result.folder?l("span",{staticClass:"ma-icon ma-icon-folder ma-icon-small slds-m-right_x-small"}):e._e(),e._v(" "),l("span",{staticClass:"slds-text-color_weak slds-text-body_small"},[e._v(e._s(e._f("decode")(t.result.folder)))])])])])}}],null,!1,287910314),model:{value:e.searchTerm.label,callback:function(t){e.$set(e.searchTerm,"label",t)},expression:"searchTerm.label"}})],1),e._v(" "),0===e.alignmentApprovers.length?l("div",{staticClass:"slds-text-color_error slds-m-top_xx-small"},[e._v("\n            You must designate at least one approver.\n        ")]):e._e(),e._v(" "),l("div",{staticClass:"slds-m-top_small"},[l("ul",{staticClass:"slds-grid slds-grid_vertical",attrs:{"aria-label":"Selected Options:"}},e._l(e.alignmentApprovers,(function(t){return l("li",{key:t.Id,staticClass:"slds-size_2-of-7",attrs:{role:"presentation"}},[l("span",{staticClass:"slds-pill slds-p-around_x-small slds-m-bottom_xx-small",staticStyle:{width:"100%"},attrs:{role:"option","aria-selected":"true"}},[l("span",{staticClass:"slds-pill__label",attrs:{title:"Reports"}},[e._v(e._s(t.Name))]),e._v(" "),l("span",{staticStyle:{cursor:"pointer"},on:{click:function(s){return e.removeApprover(t.Id,t.Name)}}},[l("MAIcon",{staticClass:"slds-icon_container slds-pill__remove",attrs:{src:s(539),assistiveText:"Remove",iconClass:["slds-icon","slds-icon_x-small","slds-icon-text-default"]}})],1)])])})),0)])]):e._e()])}),[],!1,null,null,null).exports},1853:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var l=s(3826),a=s(8050);const o={name:"MACheckbox",components:{MATooltip:s(9756).Z},mixins:[l.Z],props:{value:{type:Boolean,required:!0},title:{type:String,required:!1,default:""},isDisabled:{type:Boolean,default:!1},showStateLabels:{type:Boolean,default:!1},stateLabelOn:{type:String,default:"Enabled"},stateLabelOff:{type:String,default:"Disabled"},toggleBuffer:{type:Number,default:0},noSlide:{type:Boolean,default:!1},isFormElement:{type:Boolean,default:!1},tooltipHelpText:{type:String,default:""}},data:()=>({lastToggleHandlerTimestamp:Date.now(),checkboxId:(0,a.x$)()}),computed:{checkboxClass(){return this.noSlide?"slds-form-element__control":"slds-checkbox_toggle slds-grid"}},watch:{value(){this.$refs.checkbox.checked=this.value}},mounted(){this.$refs.checkbox.checked=this.value},methods:{toggle(e){(e.clientX||e.clientY)&&(e.currentTarget.checked&&this.toggleBuffer&&(this.$refs.checkbox.disabled=!0,setTimeout((()=>{this.$refs.checkbox.disabled=!1}),this.toggleBuffer)),this.$emit("input",!this.value))}}},n=(0,s(1900).Z)(o,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"slds-form-element"},[e.noSlide?e.isFormElement?[s("label",{staticClass:"slds-form-element__label",class:{"slds-p-right_none":e.tooltipHelpText},attrs:{for:e.checkboxId}},[e._v(e._s(e.decodeHtml(e.title)))]),e._v(" "),e.tooltipHelpText?s("MATooltip",{attrs:{showIcon:"",inForm:""}},[s("span",{attrs:{slot:"content"},slot:"content"},[e._v("\n                "+e._s(e.tooltipHelpText)+"\n            ")])]):e._e(),e._v(" "),s("div",{staticClass:"slds-form-element__control"},[s("span",{staticClass:"slds-checkbox slds-checkbox_standalone"},[s("input",{ref:"checkbox",attrs:{id:e.checkboxId,disabled:e.isDisabled,type:"checkbox"},domProps:{checked:e.value||!1},on:{click:e.toggle}}),e._v(" "),s("span",{staticClass:"slds-checkbox_faux"})])])]:s("div",{staticClass:"slds-form-element__control"},[s("div",{staticClass:"slds-checkbox"},[s("input",{ref:"checkbox",attrs:{id:e.checkboxId,disabled:e.isDisabled,type:"checkbox"},domProps:{checked:e.value||!1},on:{click:e.toggle}}),e._v(" "),s("label",{staticClass:"slds-checkbox__label",attrs:{for:e.checkboxId}},[s("span",{staticClass:"slds-checkbox_faux"}),e._v(" "),s("span",{staticClass:"slds-form-element__label",class:{"slds-p-right_none":e.tooltipHelpText}},[e._v("\n                    "+e._s(e.decodeHtml(e.title))+"\n                ")])]),e._v(" "),e.tooltipHelpText?s("MATooltip",{attrs:{showIcon:"",inForm:""}},[s("span",{attrs:{slot:"content"},slot:"content"},[e._v("\n                    "+e._s(e.tooltipHelpText)+"\n                ")])]):e._e()],1)]):s("label",{class:e.checkboxClass},[s("input",{ref:"checkbox",attrs:{disabled:e.isDisabled,type:"checkbox"},domProps:{checked:e.value||!1},on:{click:e.toggle}}),e._v(" "),s("span",{staticClass:"slds-checkbox_faux_container"},[s("span",{staticClass:"slds-checkbox_faux"}),e._v(" "),e.showStateLabels?s("span",{staticClass:"slds-checkbox_on"},[e._v(e._s(e.decodeHtml(e.stateLabelOn)))]):e._e(),e._v(" "),e.showStateLabels?s("span",{staticClass:"slds-checkbox_off"},[e._v(e._s(e.decodeHtml(e.stateLabelOff)))]):e._e()]),e._v(" "),s("span",{staticClass:"slds-form-element__label slds-m-bottom_none slds-p-left_x-small slds-p-top_xx-small"},[s("span",[e._v(e._s(e.decodeHtml(e.title)))])]),e._v(" "),e._t("tooltip")],2)],2)}),[],!1,null,"7880ee54",null).exports}}]);