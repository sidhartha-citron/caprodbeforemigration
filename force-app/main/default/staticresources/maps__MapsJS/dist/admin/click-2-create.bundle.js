(globalThis.webpackChunkmaps_desktop=globalThis.webpackChunkmaps_desktop||[]).push([[2496],{8969:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var l=s(3856);const i={render:e=>e("span"),props:{svg:{required:!0,validator(e){const t="string"==typeof e,s="object"==typeof e&&!0===e.__esModule;return t||s}},inheritFillFromParent:{type:Boolean,default:!0},assistiveText:{type:String},iconClass:{type:[Array,String]}},mounted(){const e="object"==typeof this.svg&&!0===this.svg.__esModule?this.svg.default:this.svg,t=document.createRange().createContextualFragment(e),s=Array.from(t.childNodes).find((e=>"svg"===e.nodeName));s?l.Z.call(this,s):console.error("Could not build SVG.")}}},8719:(e,t,s)=>{"use strict";s.d(t,{x:()=>n,K:()=>c});var l=s(5735),i=s.n(l),o=s(2423),a=s(5658);const c=async({sobject:e="",permissionsToCheck:t={isAccessible:!0},updateProgress:s=(()=>{}),includeDedicatedLookupOptions:l=!1})=>(async({sobject:e="",permissionsToCheck:t={isAccessible:!0},fieldIndex:s,progressCallback:l=(()=>{}),includeDedicatedLookupOptions:c=!1})=>{const{success:n=!1,data:r={},message:d}=await(0,a.wX)("RemoteFunctions.GetGlobalDescribeFields",[e,t,s,c],{escape:!1,buffer:!1});if(n){const{hasMore:s=!1,index:a,availableFields:c=[],totalSize:n=0}=r;if(s){let s=c;return await(async(e="",t={isAccessible:!0},s,l=(()=>{}))=>new Promise((a=>{let c=[];const n={status:"Running Batch",total:0,complete:0,success:0,failure:0},r=i()(((e,t)=>{const{object:s,limits:i,index:a}=e;((e="",t={isAccessible:!0},s)=>new Promise(((l,i)=>{(new o.Z).setAction("maps.RemoteFunctions.GetGlobalDescribeFields").setErrorHandler((e=>{i(new Error(e))})).invoke([e,t,s],(e=>{const{success:t=!1,data:s=[]}=e;t?l(s):(console.warn("Unable to get data from Salesforce."),i(new Error("Unable to get data from Salesforce (SFDC fields).")))}),{escape:!1,buffer:!1,timeout:45e3})})))(s,i,a).then((e=>{const{hasMore:t=!1,availableFields:l=[]}=e,o=e.index;t&&r.push({object:s,limits:i,index:o}),c=[...c,...l],n.success+=l.length})).catch((e=>{console.warn("schema error",e),n.failure++})).finally((()=>{n.complete++,l(n),t()}))}),1);r.push({object:e,limits:t,index:s}),r.drain=()=>{const e=c.sort(((e,t)=>e.label>t.label?1:-1));a(e)}})))(e,t,a,(e=>{e.total=n,l(e)})).then((e=>{s=[...s,...e]})),s}return c}throw console.warn("Unable to get data from Salesforce."),new Error(d)})({sobject:e,permissionsToCheck:t,fieldIndex:0,updateProgress:e=>{s(e)},includeDedicatedLookupOptions:l}),n=async(e={},t=!1,s=(()=>{}))=>{const l=e.hideExtraObjects||!1;let a;return await(async(e=!1,t=!0,s={},l=0,a=(()=>{}))=>new Promise(((c,n)=>{const r=l;(new o.Z).setAction("maps.RemoteFunctions.GetGlobalDescribeObjects").setErrorHandler((e=>{n(new Error(e))})).invoke([e,s,t,r],(async l=>{const{success:r=!1,data:d={}}=l;if(r){const{hasMore:l=!1,index:n,availableObjects:r=[],totalSize:u=0}=d;if(l){let l=r;await((e=!1,t=!0,s={},l=0,a=(()=>{}))=>new Promise((c=>{const n={status:"Running Batch",total:0,complete:0,success:0,failure:0};let r=[];const d=i()(((e,t)=>{const{removeExtra:s,limitedSet:l,limits:i,index:c}=e;((e=!1,t=!0,s={},l=0)=>new Promise(((i,a)=>{(new o.Z).setAction("maps.RemoteFunctions.GetGlobalDescribeObjects").setErrorHandler((e=>{a(new Error(e))})).invoke([e,s,t,l],(e=>{const{success:t=!1,data:s={}}=e;t?i(s):(console.warn("Unable to get data from Salesforce."),a(new Error("Unable to get data from Salesforce (SFDC objects).")))}),{escape:!1,buffer:!1})})))(s,l,i,c).then((e=>{const{hasMore:t=!1,availableObjects:o=[]}=e,a=e.index;t&&d.push({removeExtra:s,limitedSet:l,limits:i,index:a}),r=[...r,...o],n.success+=o.length})).catch((e=>{n.failure++,console.warn("schema error",e)})).finally((()=>{n.complete++,a(n),t()}))}),1);d.push({removeExtra:e,limitedSet:t,limits:s,index:l}),d.drain=()=>{const e=r.sort(((e,t)=>e.name>t.name?1:-1));c(e)}})))(e,t,s,n,(e=>{e.total=u,a(e)})).then((e=>{l=[...l,...e]})),c(l)}else c(r)}else console.warn("Unable to get data from Salesforce."),n(new Error("Unable to get data from Salesforce (SFDC objects)."))}),{escape:!1,buffer:!1})})))(l,t,e,0,(e=>{s(e)})).then((e=>{a=e})),a}},8137:e=>{e.exports='<svg xmlns=http://www.w3.org/2000/svg x=0px y=0px width=52px height=52px viewBox="0 0 52 52" enable-background="new 0 0 52 52" xml:space=preserve> <path fill=#FFFFFF d="M31,25.4L44,12.3c0.6-0.6,0.6-1.5,0-2.1L42,8.1c-0.6-0.6-1.5-0.6-2.1,0L26.8,21.2c-0.4,0.4-1,0.4-1.4,0\r\n\tL12.3,8c-0.6-0.6-1.5-0.6-2.1,0l-2.1,2.1c-0.6,0.6-0.6,1.5,0,2.1l13.1,13.1c0.4,0.4,0.4,1,0,1.4L8,39.9c-0.6,0.6-0.6,1.5,0,2.1\r\n\tl2.1,2.1c0.6,0.6,1.5,0.6,2.1,0L25.3,31c0.4-0.4,1-0.4,1.4,0l13.1,13.1c0.6,0.6,1.5,0.6,2.1,0l2.1-2.1c0.6-0.6,0.6-1.5,0-2.1\r\n\tL31,26.8C30.6,26.4,30.6,25.8,31,25.4z"/> </svg> '},5868:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});const l={props:{title:{type:String,required:!0}}},i=(0,s(1900).Z)(l,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"slds-section__title slds-theme--shade"},[s("span",{staticClass:"section-header-title slds-p-horizontal--small slds-truncate"},[e._v(e._s(e.title))])])}),[],!1,null,null,null).exports},7810:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>O});var l=s(5908),i=s.n(l),o=s(675),a=s(3589),c=s(7391),n=s(8719),r=s(5868);const{MAToastMessages:d}=window,u={components:{MAPicklist:c.Z,MAHeader:r.default},data:()=>({showAllObjects:!1}),computed:{...(0,l.mapState)({store__isLoading:"isLoading",store__objectOptions:"objectOptions",store__selectedObject:"selectedObject",store__MAClick2CreateObj:"MAClick2CreateObj"}),selectedObject:{get(){return this.store__selectedObject},set(e){this.store__setSelectedObject(e)}}},watch:{showAllObjects(){this.getObjectOptions()}},created(){this.getObjectOptions()},methods:{...(0,l.mapMutations)({store__loadingToggle:"loadingToggle",store__updateObjectOptions:"updateObjectOptions",store__setSelectedObject:"setSelectedObject",store__populateMAClick2CreateObj:"populateMAClick2CreateObj"}),async getObjectOptions(){this.store__loadingToggle(!0);try{const e={isAccessible:!0,isQueryable:!0,hideExtraObjects:!0},t=!this.showAllObjects,s=await(0,n.x)(e,t);this.store__updateObjectOptions(s),this.$nextTick((()=>{this.store__setSelectedObject("Lead")})),this.store__loadingToggle(!1)}catch(e){console.warn(e),d.showError({message:"Error retrieving Salesforce Base Objects."}),this.store__loadingToggle(!1)}}}};var _=s(1900);const p=(0,_.Z)(u,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"slds-section slds-m-bottom_large slds-is-open"},[s("MAHeader",{attrs:{title:e.$Labels.MA_OBJECT}})],1),e._v(" "),s("MAPicklist",{staticClass:"objSelect",attrs:{doDetach:!0,options:e.store__objectOptions,label:e.$Labels.MA_OBJECT,keyString:"label",valueString:"name"},model:{value:e.selectedObject,callback:function(t){e.selectedObject=t},expression:"selectedObject"}}),e._v(" "),s("div",{staticClass:"slds-form-element__control"},[s("span",{staticClass:"slds-checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.showAllObjects,expression:"showAllObjects"}],attrs:{id:"viewAll-2",type:"checkbox",name:"options"},domProps:{checked:Array.isArray(e.showAllObjects)?e._i(e.showAllObjects,null)>-1:e.showAllObjects},on:{change:function(t){var s=e.showAllObjects,l=t.target,i=!!l.checked;if(Array.isArray(s)){var o=e._i(s,null);l.checked?o<0&&(e.showAllObjects=s.concat([null])):o>-1&&(e.showAllObjects=s.slice(0,o).concat(s.slice(o+1)))}else e.showAllObjects=i}}}),e._v(" "),e._m(0)])])],1)}),[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("label",{staticClass:"slds-checkbox__label",attrs:{for:"viewAll-2"}},[s("span",{staticClass:"slds-checkbox_faux"}),e._v(" "),s("span",{staticClass:"slds-form-element__label"},[e._v("View All Salesforce Objects")])])}],!1,null,null,null).exports,b={state:{callouts:0,isLoading:!1,objectOptions:[],selectedObject:null,fieldMappings:{allFields:[],websiteFields:[],phoneFields:[],textFields:[],numberFields:[]},picklistFieldOptions:[],MAClick2CreateObj:{POIEnabled__c:!1,MyPositionEnabled__c:!1,MapClickEnabled__c:!1,POIStreet__c:null,MyPositionStreet__c:null,MapClickStreet__c:null,POICity__c:null,MyPositionCity__c:null,MapClickCity__c:null,POIState__c:null,MyPositionState__c:null,MapClickState__c:null,POIStateShort__c:null,POIPostalCode__c:null,MyPositionPostalCode__c:null,MapClickPostalCode__c:null,POICountry__c:null,MyPositionCountry__c:null,MapClickCountry__c:null,POICountryShort__c:null,POILatitude__c:null,MyPositionLatitude__c:null,MapClickLatitude__c:null,POILongitude__c:null,MyPositionLongitude__c:null,MapClickLongitude__c:null,POIName__c:null,MyPositionName__c:null,MapClickName__c:null,POIPhone__c:null,POIWebsite__c:null,DefaultField__c:null,POIDefaultValue__c:null,MyPositionDefaultValue__c:null,MapClickDefaultValue__c:null,ObjectAPIName__c:null,FieldSetOptions__c:null,Id:null},fieldSetRecords:[]},mutations:{loadingToggle(e,t){"boolean"==typeof t?t?(e.callouts+=1,e.isLoading=!0):(e.callouts-=1,e.callouts<=0&&(e.isLoading=!1,e.callouts=0)):(e.callouts-=1,e.isLoading=!1)},updateObjectOptions(e,t){e.objectOptions=t},setSelectedObject(e,t){e.selectedObject=t},updateFieldMappings(e,t){e.fieldMappings=t},updateMAClick2CreateObj(e,t){e.MAClick2CreateObj[t.field]=t.value},setPicklistFieldOptions(e,t){e.picklistFieldOptions=t},populateMAClick2CreateObj(e,t){Object.keys(e.MAClick2CreateObj).forEach((t=>{t.includes("Enabled")?e.MAClick2CreateObj[t]=!1:e.MAClick2CreateObj[t]=null})),Array.isArray(t)&&t.forEach((t=>{Object.keys(t).forEach((s=>{const l=s.replace("maps__","");"maps__FieldSetOptions__c"===s?JSON.parse(t[s]).forEach((t=>{e.fieldSetRecords.length>0&&e.fieldSetRecords.forEach((e=>{t.id===e.id&&(e.POIFieldSetAPIName=t.POIFieldSetAPIName,e.MyPositionFieldSetAPIName=t.MyPositionFieldSetAPIName,e.MapClickFieldSetAPIName=t.MapClickFieldSetAPIName)}))})):e.MAClick2CreateObj[l]=t[s]}))}))},updateFieldSetRecords(e,t){e.fieldSetRecords=t},updateFieldSetRecordValue(e,t){e.fieldSetRecords.forEach((e=>{e.RecordTypeId===t.id&&(e[t.updatedField]=t.updatedValue)}))}},getters:{isObjectSelected:e=>e.selectedObject,hasFieldSets:e=>e.fieldMappings.allFields.length>0},actions:{suggestFields({state:e,commit:t}){const s=e.MAClick2CreateObj,l=Object.keys(s),{fieldMappings:i={}}=e,{numberFields:o=[],textFields:a=[],phoneFields:c=[],websiteFields:n=[]}=i,r=["latitude__c","longitude__c"],d=["phone__c"],u=["website__c"],_=s.POIEnabled__c,p=s.MyPositionEnabled__c,b=s.MapClickEnabled__c;for(let e=0;e<l.length;e++){const i=l[e]||"";if("id"===i.toLowerCase())continue;const h=0===i.indexOf("POI"),O=0===i.indexOf("MyPosition"),m=0===i.indexOf("MapClick");if(!_&&h)continue;if(!p&&O)continue;if(!b&&m)continue;let g=i.replace("POI","").replace("MyPosition","").replace("MapClick","");if(g=String(g).toLowerCase(),!s[i]){let e=[];e=r.includes(g)?o:d.includes(g)?c:u.includes(g)?n:a,g=g.replace("__c","");const s=[];for(let t=0;t<e.length;t++){const l=e[t];String(l.label).toLowerCase().indexOf(g)>-1&&s.push(l)}if(1===s.length)t("updateMAClick2CreateObj",{field:i,value:s[0].value});else if(s.length>1){let[e]=s;for(let t=0;t<s.length;t++){const l=s[t];if(String(l.label).toLowerCase().indexOf("billing")>-1){e=l;break}}t("updateMAClick2CreateObj",{field:i,value:e.value})}}}}}},h={components:{MASpinner:o.Z,BaseObjectSelection:p,FieldMappings:()=>({...(0,a.Z)(),component:s.e(9413).then(s.bind(s,6120))})},computed:{...(0,l.mapState)({store__isLoading:"isLoading"}),...(0,l.mapGetters)({store__isObjectSelected:"isObjectSelected"})},beforeCreate(){this.$store=new(i().Store)(b)},methods:{...(0,l.mapMutations)({store__loadingToggle:"loadingToggle"})}},O=(0,_.Z)(h,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"slds-p-around_medium",staticStyle:{position:"relative"},attrs:{id:"dataLayerWrapper"}},[s("MASpinner",{directives:[{name:"show",rawName:"v-show",value:e.store__isLoading,expression:"store__isLoading"}]}),e._v(" "),s("BaseObjectSelection"),e._v(" "),s("FieldMappings",{directives:[{name:"show",rawName:"v-show",value:e.store__isObjectSelected&&0==e.store__isLoading,expression:"store__isObjectSelected && store__isLoading == false"}]})],1)}),[],!1,null,null,null).exports}}]);