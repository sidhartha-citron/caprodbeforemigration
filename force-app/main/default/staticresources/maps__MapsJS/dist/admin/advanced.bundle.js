"use strict";(globalThis.webpackChunkmaps_desktop=globalThis.webpackChunkmaps_desktop||[]).push([[8275],{2281:(e,t,s)=>{s.r(t),s.d(t,{default:()=>z});var a=s(8607),i=s(1595),l=s(5747),o=s(5908),r=s.n(o),n=s(8050),c=s(1853),d=s(6679);const{MAToastMessages:u}=window,m={components:{MACheckbox:c.Z,MASelect:d.Z},data(){return{multiselect:{HandleAction:{options:[{value:"showPopup",label:"Maps Popup"},{value:"showSalesforce",label:"Salesforce Classic (Works in Classic Mode Only)"}],label:'How should we handle certain events like "Log a call", "New Task", and "New Event"'},LogACallTemplate:{options:[],label:'Which Task fieldset should we use for "Log a call"'}},isUserAdmin:this.$User.IsCorporateAdmin}},computed:{LogACallOptions:{get(){return this.$store.state.LogACallOptions}},AutoAssignmentBatchSize:{get(){return this.$store.state.settings.AutoAssignmentBatchSize},set(e){this.$store.commit("setState",{AutoAssignmentBatchSize:e})}},LightningNewWindow:{get(){return this.$store.state.settings.LightningNewWindow},set(e){this.$store.commit("setState",{LightningNewWindow:e})}},LaborLawsNotify:{get(){return this.$store.state.settings.LaborLawsNotify},set(e){this.$store.commit("setState",{LaborLawsNotify:e})}},RemoveAggregatesTooltipTab:{get(){return this.$store.state.settings.RemoveAggregatesTooltipTab},set(e){this.$store.commit("setState",{RemoveAggregatesTooltipTab:e})}},StoreRouteGeometry:{get(){return this.$store.state.settings.StoreRouteGeometry},set(e){this.$store.commit("setState",{StoreRouteGeometry:e})}},ShowOnlySubordinates:{get(){return this.$store.state.settings.ShowOnlySubordinates},set(e){this.$store.commit("setState",{ShowOnlySubordinates:e})}},HandleAction:{get(){return this.$store.state.settings.HandleAction},set(e){this.$store.commit("setState",{HandleAction:e})}},LogACallTemplate:{get(){return this.$store.state.settings.LogACallTemplate},set(e){const t=e||"";this.$store.commit("setState",{LogACallTemplate:t})}},PendoEnabled:{get(){return this.$store.state.settings.PendoEnabled},set(e){this.$store.commit("setState",{PendoEnabled:e})}},RunWayPointTriggers:{get(){return this.$store.state.settings.RunWayPointTriggers},set(e){this.$store.commit("setState",{RunWayPointTriggers:e})}}},methods:{async applyMAPermissions(){try{await(0,n.wX)("maps.AdminAJAXResources.applyPermissionSetToLicensedMAUsers",[])?u.showSuccess({message:"Permissions applied successfully!"}):u.showError({message:this.$Labels.MA_Error,subMessage:"Could not apply permission sets.",timeOut:0,extendedTimeOut:0,closeButton:!0})}catch(e){u.showError({message:this.$Labels.MA_Error,subMessage:e.event.message,timeOut:0,extendedTimeOut:0,closeButton:!0})}}}};var h=s(1900);const v=(0,h.Z)(m,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"ma-tab"},[s("div",{staticClass:"slds-section slds-is-open"},[e._m(0),e._v(" "),s("div",{staticClass:"slds-section__content"},[s("div",{staticClass:"slds-form slds-form_stacked"},[s("div",{staticClass:"slds-form-element__row"},[s("div",{staticClass:"slds-col slds-size_1-of-1 slds-large-size_1-of-2 slds-form-element__control"},[s("MACheckbox",{staticClass:"flex-row slds-form-element",attrs:{noSlide:!0,title:"Open links in a new tab when using Salesforce Lightning"},model:{value:e.LightningNewWindow,callback:function(t){e.LightningNewWindow=t},expression:"LightningNewWindow"}}),e._v(" "),s("MACheckbox",{staticClass:"flex-row slds-form-element",attrs:{noSlide:!0,title:"Show Labor Laws Notification"},model:{value:e.LaborLawsNotify,callback:function(t){e.LaborLawsNotify=t},expression:"LaborLawsNotify"}}),e._v(" "),s("MACheckbox",{staticClass:"flex-row slds-form-element",attrs:{noSlide:!0,title:"Remove Aggregates Tab from Shape and Cluster Tooltips"},model:{value:e.RemoveAggregatesTooltipTab,callback:function(t){e.RemoveAggregatesTooltipTab=t},expression:"RemoveAggregatesTooltipTab"}}),e._v(" "),s("MACheckbox",{staticClass:"flex-row slds-form-element",attrs:{noSlide:!0,title:"Save routing geometry on Maps routes object"},model:{value:e.StoreRouteGeometry,callback:function(t){e.StoreRouteGeometry=t},expression:"StoreRouteGeometry"}}),e._v(" "),s("MACheckbox",{staticClass:"flex-row slds-form-element",attrs:{noSlide:!0,title:"Show only subordinates by default"},model:{value:e.ShowOnlySubordinates,callback:function(t){e.ShowOnlySubordinates=t},expression:"ShowOnlySubordinates"}}),e._v(" "),s("MACheckbox",{staticClass:"flex-row slds-form-element",attrs:{noSlide:!0,title:"Disable Waypoint Trigger"},model:{value:e.RunWayPointTriggers,callback:function(t){e.RunWayPointTriggers=t},expression:"RunWayPointTriggers"}}),e._v(" "),s("MASelect",{attrs:{options:e.multiselect.HandleAction.options,label:e.multiselect.HandleAction.label,hasNoneOption:!1,keyString:"value",valueString:"label"},model:{value:e.HandleAction,callback:function(t){e.HandleAction=t},expression:"HandleAction"}}),e._v(" "),s("MASelect",{attrs:{options:e.LogACallOptions,label:e.multiselect.LogACallTemplate.label,hasNoneOption:!0,keyString:"value",valueString:"label"},model:{value:e.LogACallTemplate,callback:function(t){e.LogACallTemplate=t},expression:"LogACallTemplate"}})],1)])])])]),e._v(" "),s("div",{staticClass:"slds-section slds-is-open"},[e._m(1),e._v(" "),s("div",{staticClass:"slds-section__content"},[s("div",[s("button",{staticClass:"slds-button slds-button_outline-brand",attrs:{id:"applyPermissions"},on:{click:e.applyMAPermissions}},[e._v("\n                    Apply Salesforce Maps Permission Set to All Salesforce Maps Licensed Users\n                ")])])])]),e._v(" "),s("div",{staticClass:"slds-section slds-is-open"},[e._m(2),e._v(" "),s("div",{staticClass:"slds-section__content"},[s("div",{staticClass:"slds-form slds-form_stacked"},[s("div",{staticClass:"slds-form-element"},[s("MACheckbox",{staticClass:"flex-row slds-form-element",attrs:{noSlide:!0,title:"User Tracking Enabled"},model:{value:e.PendoEnabled,callback:function(t){e.PendoEnabled=t},expression:"PendoEnabled"}})],1)])])])])}),[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"slds-section__title slds-theme--shade"},[s("span",{staticClass:"section-header-title slds-p-horizontal--small slds-truncate"},[e._v("General")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"slds-section__title slds-theme--shade"},[s("span",{staticClass:"section-header-title slds-p-horizontal--small slds-truncate"},[e._v("User Permissions")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"slds-section__title slds-theme--shade"},[s("span",{staticClass:"section-header-title slds-p-horizontal--small slds-truncate"},[e._v("Privacy")])])}],!1,null,"98354294",null).exports;var _=s(3294),p=s(4141);const g={components:{MAInput:_.Z,MACheckbox:c.Z,MAModal:p.Z,MASelect:d.Z},data(){return{confirm:{isVisible:!1,count:0,ok:()=>{this.confirm.isVisible=!1},cancel:()=>{this.$store.commit("setState",{OverwriteSFDCMarkerLimit:!1}),this.confirm.isVisible=!1}},clusterZoomOptions:[{key:22,value:"22"},{key:21,value:"21"},{key:20,value:"20"},{key:19,value:"19"},{key:18,value:"18"},{key:17,value:"17 (Street)"},{key:16,value:"16"},{key:15,value:"15"},{key:14,value:"14"},{key:13,value:"13 (City)"},{key:12,value:"12"},{key:11,value:"11"},{key:10,value:"10"},{key:9,value:"9"},{key:8,value:"8"},{key:7,value:"7 (State)"},{key:6,value:"6"},{key:5,value:"5"},{key:4,value:"4 (Country)"},{key:3,value:"3 (Continent)"}]}},computed:{AutomaticClusterThreshold:{set(e){this.$store.commit("setState",{AutomaticClusterThreshold:e})},get(){return this.$store.state.settings.AutomaticClusterThreshold}},OverwriteSFDCMarkerLimit:{get(){return this.$store.state.settings.OverwriteSFDCMarkerLimit},set(e){this.$store.commit("setState",{OverwriteSFDCMarkerLimit:e})}},HideChatterTab:{set(e){this.$store.commit("setState",{HideChatterTab:e})},get(){return this.$store.state.settings.HideChatterTab}},DisableClick2CreateMarkers:{set(e){this.$store.commit("setState",{DisableClick2CreateMarkers:e})},get(){return this.$store.state.settings.DisableClick2CreateMarkers}},ClusterZoomLevel:{get(){return this.$store.state.settings.ClusterZoomLevel},set(e){this.$store.commit("setState",{ClusterZoomLevel:e})}}},watch:{OverwriteSFDCMarkerLimit(e){this.confirm.count++,e&&this.confirm.count>0&&(this.confirm.isVisible=!0)}}},b=(0,h.Z)(g,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"ma-tab"},[s("div",{staticClass:"slds-section slds-is-open"},[e._m(0),e._v(" "),s("div",{staticClass:"slds-section"},[s("div",{staticClass:"slds-form slds-form_stacked"},[s("div",{staticClass:"slds-form-element__row"},[s("div",{staticClass:"slds-col slds-size_1-of-1 slds-medium-size_1-of-3"},[s("MAInput",{attrs:{type:"number",label:"Marker Cluster Threshold"},model:{value:e.AutomaticClusterThreshold,callback:function(t){e.AutomaticClusterThreshold=t},expression:"AutomaticClusterThreshold"}}),e._v(" "),s("MASelect",{attrs:{options:e.clusterZoomOptions,label:"Cluster Zoom Level (Mobile): Markers will be rendered instead of clusters at the selected display level",hasNoneOption:!1,keyString:"key",valueString:"value"},model:{value:e.ClusterZoomLevel,callback:function(t){e.ClusterZoomLevel=t},expression:"ClusterZoomLevel"}}),e._v(" "),s("MACheckbox",{staticClass:"flex-row slds-form-element",attrs:{noSlide:!0,title:"Allow more than 50,000 markers when plotting Marker Layers"},model:{value:e.OverwriteSFDCMarkerLimit,callback:function(t){e.OverwriteSFDCMarkerLimit=t},expression:"OverwriteSFDCMarkerLimit"}}),e._v(" "),s("MACheckbox",{staticClass:"flex-row slds-form-element",attrs:{noSlide:!0,title:"Hide Chatter Tab"},model:{value:e.HideChatterTab,callback:function(t){e.HideChatterTab=t},expression:"HideChatterTab"}}),e._v(" "),s("MACheckbox",{staticClass:"flex-row slds-form-element",attrs:{noSlide:!0,title:"Disable Click2Create Markers"},model:{value:e.DisableClick2CreateMarkers,callback:function(t){e.DisableClick2CreateMarkers=t},expression:"DisableClick2CreateMarkers"}})],1)])])])]),e._v(" "),e.confirm.isVisible?s("MAModal",{attrs:{title:"Mapsâ„¢"},on:{close:e.confirm.cancel}},[s("div",{attrs:{slot:"content"},slot:"content"},[s("p",{staticClass:"slds-p-bottom_medium"},[e._v("\n                This option will increase the SFDC marker limit from 50,000 to 200,000 records in a single layer.\n            ")]),e._v(" "),s("p",{staticStyle:{"font-weight":"bold"}},[e._v("\n                Things to consider:\n            ")]),e._v(" "),s("ol",{staticClass:"slds-list_ordered"},[s("li",[e._v("This option is primarily for visualizing your data")]),e._v(" "),s("li",[e._v("It is recommended to use marker clustering")]),e._v(" "),s("li",[e._v("Attempting to perform actions may lead to SFDC governor limits")]),e._v(" "),s("li",[e._v("A decrease in performance and browser stability may occur")])])]),e._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("button",{staticClass:"slds-button slds-button_neutral",on:{click:e.confirm.cancel}},[e._v("\n                Cancel\n            ")]),e._v(" "),s("button",{staticClass:"slds-button slds-button_brand",on:{click:e.confirm.ok}},[e._v("\n                Ok\n            ")])])]):e._e()],1)}),[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"slds-section__title slds-theme--shade"},[s("span",{staticClass:"section-header-title slds-p-horizontal--small slds-truncate"},[e._v("Markers")])])}],!1,null,"47a1fb38",null).exports,C={components:{MASelect:d.Z},data:()=>({multiselect:{MassFieldUpdateScopeSize:{options:()=>{const e=[];for(let t=10;t<210;t+=10)e.push({value:t,label:t});return e},label:"Mass Field Update Scope Size"},MarkerLayerBatchsize:{options:[{value:500,label:500},{value:1e3,label:1e3}],label:"Marker Layer Batch Size"},MarkerLayerExternalObjectBatchSize:{options:[{value:50,label:50},{value:100,label:100},{value:150,label:150},{value:200,label:200}],label:"Marker Layer Batch Size for External Objects"},AutoAssignmentBatchSize:{options:[{value:50,label:50},{value:100,label:100},{value:200,label:200},{value:500,label:500},{value:1e3,label:1e3},{value:1500,label:1500},{value:2e3,label:2e3}],label:"Auto-Assignment Batch Size"}}}),computed:{MassFieldUpdateScopeSize:{set(e){this.$store.commit("setState",{MassFieldUpdateScopeSize:e})},get(){return this.$store.state.settings.MassFieldUpdateScopeSize}},MarkerLayerBatchsize:{set(e){this.$store.commit("setState",{MarkerLayerBatchsize:e})},get(){return this.$store.state.settings.MarkerLayerBatchsize}},MarkerLayerExternalObjectBatchSize:{set(e){this.$store.commit("setState",{MarkerLayerExternalObjectBatchSize:e})},get(){return this.$store.state.settings.MarkerLayerExternalObjectBatchSize}},AutoAssignmentBatchSize:{set(e){this.$store.commit("setState",{AutoAssignmentBatchSize:e})},get(){return this.$store.state.settings.AutoAssignmentBatchSize}}}},S=(0,h.Z)(C,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"ma-tab"},[s("div",{staticClass:"slds-section slds-is-open"},[e._m(0),e._v(" "),s("div",{staticClass:"slds-section"},[s("div",{staticClass:"slds-form slds-form_stacked"},[s("div",{staticClass:"slds-form-element__row"},[s("div",{staticClass:"slds-col slds-size_1-of-1 slds-medium-size_1-of-3 slds-large-size_1-of-4"},[s("MASelect",{attrs:{options:e.multiselect.MassFieldUpdateScopeSize.options(),label:e.multiselect.MassFieldUpdateScopeSize.label,hasNoneOption:!1,keyString:"value",valueString:"label"},model:{value:e.MassFieldUpdateScopeSize,callback:function(t){e.MassFieldUpdateScopeSize=t},expression:"MassFieldUpdateScopeSize"}}),e._v(" "),s("MASelect",{attrs:{options:e.multiselect.MarkerLayerBatchsize.options,label:e.multiselect.MarkerLayerBatchsize.label,hasNoneOption:!1,keyString:"value",valueString:"label"},model:{value:e.MarkerLayerBatchsize,callback:function(t){e.MarkerLayerBatchsize=t},expression:"MarkerLayerBatchsize"}}),e._v(" "),s("MASelect",{attrs:{options:e.multiselect.MarkerLayerExternalObjectBatchSize.options,label:e.multiselect.MarkerLayerExternalObjectBatchSize.label,hasNoneOption:!1,keyString:"value",valueString:"label"},model:{value:e.MarkerLayerExternalObjectBatchSize,callback:function(t){e.MarkerLayerExternalObjectBatchSize=t},expression:"MarkerLayerExternalObjectBatchSize"}}),e._v(" "),s("MASelect",{attrs:{options:e.multiselect.AutoAssignmentBatchSize.options,label:e.multiselect.AutoAssignmentBatchSize.label,hasNoneOption:!1,keyString:"value",valueString:"label"},model:{value:e.AutoAssignmentBatchSize,callback:function(t){e.AutoAssignmentBatchSize=t},expression:"AutoAssignmentBatchSize"}})],1)])])])])])}),[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"slds-section__title slds-theme--shade"},[s("span",{staticClass:"section-header-title slds-p-horizontal--small slds-truncate"},[e._v("Batch Process Settings")])])}],!1,null,"0bf4a06d",null).exports;var f=s(379);const k={components:{MAInput:_.Z,MAToast:a.Z,MAModal:p.Z},validations(){const e={EditTileLayer:{Name:{required:f.C1,maxLength:(0,f.BS)(80)},maps__Options__c:{required:f.C1,url:f.HQ}},customTile:{urlName:{required:f.C1,maxLength:(0,f.BS)(80)},urlAddress:{required:f.C1,url:f.HQ}}};return this.picklistVisible&&(e.selectedCustomMarker={required:f.C1}),e},data(){return{showEditModal:!1,customTile:{urlName:null,urlAddress:null},toast:{message:null,state:"success"},EditTileLayer:{Id:"",Name:"",maps__Options__c:null},confirm:{isVisible:!1,title:"Delete Confirmation",message:"",ok:()=>{this.$store.dispatch("removeCustomTile",this.EditTileLayer),this.confirm.isVisible=!1},cancel:()=>{this.confirm.isVisible=!1}},isUserAdmin:this.$User.IsCorporateAdmin}},computed:{mapTiles(){return this.$store.state.mapTiles}},methods:{resetToast(){this.toast={message:null,state:"success"}},closeEditModal(){this.EditTileLayer.Id=null,this.EditTileLayer.Name=null,this.EditTileLayer.maps__Options__c=null,this.showEditModal=!1},resetCustomTile(){this.customTile={urlName:null,urlAddress:null}},unencodeString:e=>(e=e.replace(/(&quot\;)/g,"'").replace(/'/g,'"').replace(/&amp;/g,"&").trim(),JSON.parse(e)),setCustomTile(){this.customTile.urlName&&this.customTile.urlAddress?(this.$store.commit("showLoading"),this.$store.dispatch("setCustomTiles",{Name:this.customTile.urlName,maps__Options__c:JSON.stringify({url:this.customTile.urlAddress})}).then((()=>{this.resetCustomTile(),this.$store.commit("hideLoading")}))):(this.toast.message="please complete custom tile information before continuing",setTimeout(this.resetToast(),4e3))},openEditModal(e){this.EditTileLayer.Id=e.Id,this.EditTileLayer.Name=e.Name,this.EditTileLayer.maps__Options__c=this.unencodeString(e.maps__Options__c).url,this.showEditModal=!0},updateCustomTile(){this.EditTileLayer.maps__Options__c=JSON.stringify({url:this.EditTileLayer.maps__Options__c}),this.$store.dispatch("setCustomTiles",this.EditTileLayer),this.closeEditModal()},confirmTileDelete(e){this.confirm.isVisible=!0,this.confirm.message=`Are you sure you want to delete ${e.Name}?`,this.EditTileLayer.Id=e.Id}}},A=(0,h.Z)(k,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"ma-tab"},[e.toast.message?s("MAToast",{attrs:{msg:e.toast.message},on:{close:function(t){e.toast.message=null}}}):e._e(),e._v(" "),e.showEditModal?s("MAModal",{attrs:{title:"Edit Custom Layer"},on:{close:e.closeEditModal}},[s("div",{attrs:{slot:"content"},slot:"content"},[s("MAInput",{staticClass:"slds-form-element",attrs:{isRequired:!0,type:"text",label:"Name"},on:{input:e.$v.EditTileLayer.Name.$touch},model:{value:e.EditTileLayer.Name,callback:function(t){e.$set(e.EditTileLayer,"Name",t)},expression:"EditTileLayer.Name"}}),e._v(" "),e.$v.EditTileLayer.Name.required?e._e():s("div",{staticClass:"invalidField"},[e._v("\n                $Labels.MA_This_Field_Is_Required\n            ")]),e._v(" "),s("MAInput",{staticClass:"slds-form-element",attrs:{isRequired:!0,type:"text",label:"URL"},on:{input:e.$v.EditTileLayer.maps__Options__c.$touch},model:{value:e.EditTileLayer.maps__Options__c,callback:function(t){e.$set(e.EditTileLayer,"maps__Options__c",t)},expression:"EditTileLayer.maps__Options__c"}}),e._v(" "),e.$v.EditTileLayer.maps__Options__c.required?e._e():s("div",{staticClass:"invalidField"},[e._v("\n                $Labels.MA_This_Field_Is_Required\n            ")]),e._v(" "),e.$v.EditTileLayer.maps__Options__c.url?e._e():s("div",{staticClass:"invalidField"},[e._v("\n                $Labels.MA_This_Field_Is_Required\n            ")])],1),e._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("button",{staticClass:"slds-button slds-button_neutral",on:{click:e.closeEditModal}},[e._v("\n                cancel\n            ")]),e._v(" "),s("button",{staticClass:"slds-button slds-button_brand",attrs:{disabled:e.$v.EditTileLayer.$invalid},on:{click:e.updateCustomTile}},[e._v("\n                save\n            ")])])]):e._e(),e._v(" "),e.confirm.isVisible?s("MAModal",{attrs:{title:e.confirm.title,isSmall:"true",hideCloseButton:"true"},on:{close:e.confirm.cancel}},[s("div",{attrs:{slot:"content"},slot:"content"},[s("p",{staticStyle:{"text-align":"center"}},[e._v("\n                "+e._s(e.confirm.message)+"\n            ")])]),e._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("button",{staticClass:"slds-button slds-button_neutral",on:{click:e.confirm.cancel}},[e._v("\n                Cancel\n            ")]),e._v(" "),s("button",{staticClass:"slds-button slds-button_brand",on:{click:e.confirm.ok}},[e._v("\n                Ok\n            ")])])]):e._e(),e._v(" "),s("div",{staticClass:"slds-section slds-is-open headerTitle"},[e._m(0),e._v(" "),s("div",{staticClass:"slds-section"},[s("div",{staticClass:"slds-form slds-form_stacked"},[s("div",{staticClass:"slds-form-element__row"},[s("div",{staticClass:"slds-col slds-size_1-of-1 slds-medium-size_1-of-3"},[s("MAInput",{staticClass:"slds-form-element",attrs:{label:"Name"},model:{value:e.customTile.urlName,callback:function(t){e.$set(e.customTile,"urlName",t)},expression:"customTile.urlName"}}),e._v(" "),""!==e.customTile.urlName||e.$v.customTile.urlName.required?e._e():s("div",{staticClass:"invalidField"},[e._v("\n                            Name is required\n                        ")]),e._v(" "),s("MAInput",{staticClass:"slds-form-element",attrs:{placeholder:"custom url ex. www.mycustomurl.com/{zoom}/{latitude}/{longitude}",label:"URL"},model:{value:e.customTile.urlAddress,callback:function(t){e.$set(e.customTile,"urlAddress",t)},expression:"customTile.urlAddress"}}),e._v(" "),""!==e.customTile.urlAddress||e.$v.customTile.urlAddress.required?e._e():s("div",{staticClass:"invalidField"},[e._v("\n                            URL is required\n                        ")]),e._v(" "),e.$v.customTile.urlAddress.url?e._e():s("div",{staticClass:"invalidField"},[e._v("\n                            Invalid URL\n                        ")]),e._v(" "),s("div",{staticClass:"slds-form-element"},[s("button",{staticClass:"customTile slds-button slds-button_neutral",attrs:{disabled:e.$v.customTile.$invalid},on:{click:e.setCustomTile}},[e._v("\n                                Add\n                            ")])]),e._v(" "),e._m(1)],1)])])])]),e._v(" "),s("div",{staticClass:"slds-section slds-is-open headerTitle"},[e._m(2),e._v(" "),s("div",{staticClass:"slds-section"},[s("div",{staticClass:"slds-form slds-form_stacked"},[s("div",{staticClass:"slds-form-element__row"},[s("div",{staticClass:"slds-col"},e._l(e.mapTiles,(function(t){return s("div",{key:t.Id,staticClass:"flex-row slds-section",staticStyle:{"border-bottom":"1.4px solid #d6d2d2"}},[s("button",{staticClass:"slds-button slds-button_icon slds-button_icon-container slds-shrink-none",on:{click:function(s){return e.openEditModal(t)}}},[s("span",{staticClass:"slds-button__icon ma-icon ma-icon-edit",on:{click:function(s){return e.openEditModal(t)}}})]),e._v(" "),s("button",{staticClass:"slds-button slds-button_icon slds-button_icon-container slds-shrink-none",on:{click:function(s){return e.confirmTileDelete(t)}}},[s("span",{staticClass:"slds-button__icon ma-icon ma-icon-delete"})]),e._v(" "),s("h2",{staticClass:"tileName"},[e._v("\n                                "+e._s(t.Name)+"\n                            ")]),e._v(" "),s("h3",{staticClass:"tileUrlString slds-truncate"},[e._v("\n                                "+e._s(e.unencodeString(t.maps__Options__c).url)+"\n                            ")])])})),0)])])])])],1)}),[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"slds-section__title slds-theme--shade"},[s("span",{staticClass:"section-header-title slds-p-horizontal--small slds-truncate"},[e._v("Add Custom Tile")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("table",{staticClass:"chatter-post-merge-fields slds-table slds-no-row-hover",staticStyle:{color:"#757575"},attrs:{cellpadding:"2"}},[s("tbody",[s("tr",[s("td",[e._v("{zoom}")]),e._v(" "),s("td",[e._v("=")]),e._v(" "),s("td",[e._v("Zoom level of map")])]),e._v(" "),s("tr",[s("td",[e._v("{latitude}")]),e._v(" "),s("td",[e._v("=")]),e._v(" "),s("td",[e._v("Latitude parameter for map tile")])]),e._v(" "),s("tr",[s("td",[e._v("{longitude}")]),e._v(" "),s("td",[e._v("=")]),e._v(" "),s("td",[e._v("Longitude parameter for map tile")])])])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"slds-section__title slds-theme--shade"},[s("span",{staticClass:"section-header-title slds-p-horizontal--small slds-truncate"},[e._v("Existing Tile Layers")])])}],!1,null,null,null).exports,M={components:{MACheckbox:c.Z},computed:{IncludePointOfInterest:{set(e){this.$store.commit("setState",{IncludePointOfInterest:e})},get(){return this.$store.state.settings.IncludePointOfInterest}},IncludeMarkersOnMap:{set(e){this.$store.commit("setState",{IncludeMarkersOnMap:e})},get(){return this.$store.state.settings.IncludeMarkersOnMap}},IncludeRecordsInSalesforce:{set(e){this.$store.commit("setState",{IncludeRecordsInSalesforce:e})},get(){return this.$store.state.settings.IncludeRecordsInSalesforce}},disable_places_search:{set(e){this.$store.commit("setState",{disable_places_search:e})},get(){return this.$store.state.settings.disable_places_search}}}},T=(0,h.Z)(M,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"ma-tab"},[s("div",{staticClass:"slds-section slds-is-open"},[e._m(0),e._v(" "),s("div",{staticClass:"slds-section"},[s("div",{staticClass:"slds-form slds-form_stacked"},[s("MACheckbox",{staticClass:"flex-row slds-form-element",attrs:{noSlide:!0,title:"Include Points of Interest"},model:{value:e.IncludePointOfInterest,callback:function(t){e.IncludePointOfInterest=t},expression:"IncludePointOfInterest"}}),e._v(" "),s("MACheckbox",{staticClass:"flex-row slds-form-element",attrs:{noSlide:!0,title:"Include Markers on the Map"},model:{value:e.IncludeMarkersOnMap,callback:function(t){e.IncludeMarkersOnMap=t},expression:"IncludeMarkersOnMap"}}),e._v(" "),s("MACheckbox",{staticClass:"flex-row slds-form-element",attrs:{noSlide:!0,title:"Include Records in Salesforce"},model:{value:e.IncludeRecordsInSalesforce,callback:function(t){e.IncludeRecordsInSalesforce=t},expression:"IncludeRecordsInSalesforce"}}),e._v(" "),s("MACheckbox",{staticClass:"flex-row slds-form-element",attrs:{noSlide:!0,title:"Disable Places Search"},model:{value:e.disable_places_search,callback:function(t){e.disable_places_search=t},expression:"disable_places_search"}})],1)])])])}),[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"slds-section__title slds-theme--shade"},[s("span",{staticClass:"section-header-title slds-p-horizontal--small slds-truncate"},[e._v("POI Search Settings")])])}],!1,null,null,null).exports;var y=s(2934),L=s.n(y),w=s(2423);const{MARemoting:$}=window;class E{static handleRemoteActionError(e){Error(`Remote action exception: ${e}`)}static getSettings(){return new Promise(((e,t)=>{(new w.Z).setAction($.AdminStartUpAction).setErrorHandler(this.handleRemoteActionError.bind(this,t)).invoke([{action:"get_settings"}],(s=>{s?e(s):t(new Error({status:"error",message:"error loading settings"}))}),{buffer:!1})}))}static setSettings(e){const t={action:"save_settings",settings:JSON.stringify(e)};return new Promise(((e,s)=>{(new w.Z).setAction($.AdminStartUpAction).setErrorHandler(this.handleRemoteActionError).invoke([t],(({success:t})=>{t?e({status:"success",message:"settings saved"}):s(new Error({status:"error",message:"save error"}))}))}))}static removeCustomTile(e){return new Promise(((t,s)=>{(new w.Z).setAction($.removeMapTile).setErrorHandler(this.handleRemoteActionError).invoke([e.Id],(a=>{a.success?t(`${e.Name} succsfully removed`):s(new Error(`Unable to remove layer ${e.Name}, please try again or contact an adult`))}))}))}static loadLogACall(){return new Promise(((e,t)=>{(new w.Z).setAction($.getLogACallFieldSets).setErrorHandler(this.handleRemoteActionError).invoke([],(({error:s,success:a,fieldSets:i})=>{a&&i?e(i):t(new Error("logACall",s))}),{buffer:!1,escape:!1})}))}static setCustomTiles(e){return new Promise(((t,s)=>{(new w.Z).setAction($.saveNewMapTile).setErrorHandler(this.handleRemoteActionError).invoke([e],(a=>{a.success?t(`${e.Name} succsfully removed`):s(new Error(a.error))}))}))}}L().use(r());const O=new(r().Store)({state:{settings:{AutoAssignmentBatchSize:200,HideChatterTab:!1,DisableClick2CreateMarkers:!1,disable_places_search:!1,ClusterZoomLevel:13,PendoEnabled:!0,RunWayPointTriggers:!1,StoreRouteGeometry:!1,ShowOnlySubordinates:!1,RemoveAggregatesTooltipTab:!1,LaborLawsNotify:!1,LightningNewWindow:!1,HandleAction:"showPopup",IncludePointOfInterest:!0,IncludeMarkersOnMap:!0,IncludeRecordsInSalesforce:!0,MarkerLayerBatchsize:1e3,MarkerLayerExternalObjectBatchSize:200,GoogleMapsURL:"https://maps.googleapis.com",MassFieldUpdateScopeSize:201,AutomaticClusterThreshold:500,OverwriteSFDCMarkerLimit:!1,LogACallTemplate:""},LogACallOptions:[],territoryAuthSettings:{authExists:!1,authorizedTerritoryUser:"",authUrl:""},mapTiles:[],isLoading:!1,stateChangeDetected:!1},mutations:{setState(e,t){Object.keys(t).map((s=>("number"!=typeof t[s]&&"string"!=typeof t[s]&&"boolean"!=typeof t[s]||(e.settings={...e.settings,...t},e.stateChangeDetected=!0),!0)))},setMapTiles(e,t){e.mapTiles=t,e.stateChangeDetected=!0},updateStateSettings(e,t){Object.keys(e.settings).forEach((s=>{if(Object.prototype.hasOwnProperty.call(t,s)){const a=t[s].Name,i=t[s].maps__Value__c;"GoogleMapsURL"===a||"HandleAction"===a||"LogACallTemplate"===a?e.settings[s]=i:"default_map_tile"!==a&&(e.settings[s]=JSON.parse(i))}}))},updateStateMapTiles(e,t){e.mapTiles=t,e.stateChangeDetected=!0},showLoading(e){e.isLoading=!0},hideLoading(e){e.isLoading=!1},clearStateChange(e){e.stateChangeDetected=!1}},actions:{loadSettings:({commit:e})=>new Promise(((t,s)=>{E.getSettings().then((({data:s,mapTiles:a})=>{e("updateStateSettings",s),e("setMapTiles",a),e("clearStateChange"),t("settings")})).catch((e=>{s(e)}))})),saveSettings:({state:e,commit:t})=>new Promise(((s,a)=>{E.setSettings(e.settings).then((e=>{t("clearStateChange"),s(e)})).catch((e=>{a(e)}))})),setCustomTiles:({dispatch:e},t)=>new Promise(((s,a)=>{E.setCustomTiles(JSON.stringify(t)).then((()=>{e("loadSettings"),s()})).catch((e=>a(e)))})),removeCustomTile:({dispatch:e},t)=>new Promise(((s,a)=>{E.removeCustomTile(t).then((t=>{t&&(e("loadSettings"),s(t))})).catch((e=>a(e)))})),loadLogACall:({state:e,commit:t})=>new Promise(((t,s)=>{E.loadLogACall().then((s=>{s.length>0&&(e.LogACallOptions=s),t("logged")})).catch((e=>s(e)))}))}}),x={components:{MAToast:a.Z,MATabs:i.Z,MATab:l.Z,SystemSettings:v,BatchSettings:S,MarkersSettingsTab:b,MapTileSettings:A,PoiSettings:T},data:()=>({showToast:null,toast:{message:null,state:"success"}}),computed:{...(0,o.mapState)({store__stateChangeDetected:"stateChangeDetected",store__isLoading:"isLoading"})},beforeCreate(){this.$store=O},created(){Promise.all([this.$store.dispatch("loadSettings"),this.$store.dispatch("loadLogACall")]).then((()=>{this.$store.commit("hideLoading")})).catch((e=>new Error(e)))},methods:{resetToast(){setTimeout((()=>{this.showToast=null,this.toast.message=null,this.toast.state="success"}),4e3)},saveSettings(){this.$store.dispatch("saveSettings").then((({message:e})=>{this.toast.message=e,this.resetToast()})).catch((e=>{this.toast.message=e.message,this.toast.state="error",this.resetToast()}))}}},z=(0,h.Z)(x,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"slds-p-bottom_large"},[e.toast.message?s("MAToast",{attrs:{msg:e.toast.message,state:e.toast.state},on:{close:function(t){e.toast.message=null}}}):e._e(),e._v(" "),s("div",[s("MATabs",{staticClass:"ma-advanced-tabs"},[s("MATab",{attrs:{id:"system",title:"System"}},[s("SystemSettings")],1),e._v(" "),s("MATab",{attrs:{id:"markers",title:"Markers"}},[s("MarkersSettingsTab")],1),e._v(" "),s("MATab",{attrs:{id:"mapTile",title:"Map Tiles"}},[s("MapTileSettings")],1),e._v(" "),s("MATab",{attrs:{id:"batch",title:"Batch"}},[s("BatchSettings")],1),e._v(" "),s("MATab",{attrs:{id:"poi",title:"POI(Global) Search"}},[s("PoiSettings")],1)],1)],1),e._v(" "),s("button",{staticClass:"slds-button slds-button_brand slds-m-left_medium",attrs:{disabled:!e.store__stateChangeDetected},on:{click:e.saveSettings}},[e._v("\n        Save Settings\n    ")])],1)}),[],!1,null,"7e813640",null).exports}}]);