(globalThis.webpackChunkmaps_desktop=globalThis.webpackChunkmaps_desktop||[]).push([[2199],{8969:(t,e,s)=>{"use strict";s.d(e,{Z:()=>i});var r=s(3856);const i={render:t=>t("span"),props:{svg:{required:!0,validator(t){const e="string"==typeof t,s="object"==typeof t&&!0===t.__esModule;return e||s}},inheritFillFromParent:{type:Boolean,default:!0},assistiveText:{type:String},iconClass:{type:[Array,String]}},mounted(){const t="object"==typeof this.svg&&!0===this.svg.__esModule?this.svg.default:this.svg,e=document.createRange().createContextualFragment(t),s=Array.from(e.childNodes).find((t=>"svg"===t.nodeName));s?r.Z.call(this,s):console.error("Could not build SVG.")}}},1792:t=>{t.exports='<svg xmlns=http://www.w3.org/2000/svg x=0px y=0px width=52px height=52px viewBox="0 0 52 52" enable-background="new 0 0 52 52" xml:space=preserve> <g> <path fill=#FFFFFF d="M19.1,42.5L2.6,25.9c-0.6-0.6-0.6-1.6,0-2.2l2.2-2.2c0.6-0.6,1.6-0.6,2.2,0L19.4,34c0.4,0.4,1.1,0.4,1.5,0\r\n\t\tL45.2,9.5c0.6-0.6,1.6-0.6,2.2,0l2.2,2.2c0.6,0.6,0.6,1.6,0,2.2L21.3,42.5C20.7,43.2,19.7,43.2,19.1,42.5z"/> </g> </svg> '},5615:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>c});var r=s(675);const i={name:"MASetupAssistantItem",components:{MAProgressRing:s(4604).Z},props:{step:{type:Number,default:1},stepProgress:{type:Boolean,default:!0},isComplete:{type:Boolean,default:!1},percent:{type:Number,default:0},theme:{type:String,default:"active"}}};var o=s(1900);const a=(0,o.Z)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"slds-setup-assistant__item"},[s("article",{staticClass:"slds-setup-assistant__step"},[s("div",{staticClass:"slds-setup-assistant__step-summary"},[s("div",{staticClass:"slds-media"},[t.stepProgress?s("div",{staticClass:"slds-media__figure"},[s("MAProgressRing",{attrs:{step:t.step,showStep:"",isComplete:t.isComplete,percent:t.percent,large:"",theme:t.isComplete?"":t.theme}})],1):t._e(),t._v(" "),s("div",{staticClass:"slds-media__body slds-m-top_x-small"},[s("div",{staticClass:"slds-media"},[s("div",{staticClass:"slds-setup-assistant__step-summary-content slds-media__body"},[s("h3",{staticClass:"slds-setup-assistant__step-summary-title slds-text-heading_small"},[t._t("header",(function(){return[t._v("Default Header")]}))],2),t._v(" "),s("p",[t._t("description")],2)]),t._v(" "),s("div",{staticClass:"slds-media__figure slds-media__figure_reverse"},[t._t("additional-content")],2)])])])])])])}),[],!1,null,"c35daac6",null).exports;var n=s(2423);class l{static handleRemoteActionError(t){Error(`Remote action exception: ${t}`)}static getOrgAuthorization(){return new Promise(((t,e)=>{(new n.Z).setAction("maps.OAuth.getAuthorizationInfo").setErrorHandler(((t,s)=>{let r="Uknown Error";s&&s.message&&(r=s.message),e(new Error(`Remote action exception: ${r}`))})).invoke([],(s=>{s?t(s):e(new Error("Error authorizing user"))}),{buffer:!1})}))}static getAuthRedirectURL(){return new Promise(((t,e)=>{(new n.Z).setAction("maps.OAuth.getAuthRedirectURL").setErrorHandler(((t,s)=>{let r="Uknown Error";s&&s.message&&(r=s.message),e(new Error(`Remote action exception: ${r}`))})).invoke([],(s=>{s?t(s):e(new Error("Error authorizing user"))}),{buffer:!1})}))}static deleteOrgAuthorization(){return new Promise(((t,e)=>{(new n.Z).setAction("maps.OAuth.revokeOrgAuthorization").setErrorHandler(((t,s)=>{let r="Uknown Error";s&&s.message&&(r=s.message),e(new Error(`Remote action exception: ${r}`))})).invoke([],(s=>{s?t(s):e(new Error("Error removing user authorization"))}),{buffer:!1})}))}}const{MAToastMessages:d}=window,u={components:{MASpinner:r.Z,MASetupAssistantItem:a},data:()=>({authExists:!1,authorizedTerritoryUser:"",isLoading:!1,hasError:!1}),computed:{isAuthorized:{get(){return this.authExists},set(t){this.authExists=t,this.authExists||(this.authorizedTerritoryUser="")}}},created(){this.loadAuthorizationInformation()},methods:{authorize(){this.isLoading=!0,l.getAuthRedirectURL().then((t=>{const e=window.htmlDecode(t.authUrl);window.open(e),setTimeout((()=>{this.loadAuthorizationInformation()}),5e3)}))},deauthorize(){this.isLoading=!0,l.deleteOrgAuthorization().then((t=>{t.success?(d.showSuccess({message:"Deauthorization Successful."}),this.loadAuthorizationInformation()):d.showError({message:this.$Labels.MA_Error,subMessage:"Unauthorization request failed.",timeOut:0,extendedTimeOut:0,closeButton:!0})})).finally((()=>{this.isLoading=!1}))},loadAuthorizationInformation(){this.isLoading=!0,l.getOrgAuthorization().then((t=>{this.isAuthorized=t.authExists,this.isAuthorized&&(this.authorizedTerritoryUser=t.data.user.username),this.isLoading=!1})).catch((t=>{console.warn(t),this.isLoading=!1,this.hasError=!0,window.MAToastMessages.showError({message:t.message,closeButton:!0,timeOut:0})}))}}},c=(0,o.Z)(u,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.isLoading?s("MASpinner"):t._e(),t._v(" "),s("div",{staticClass:"slds-section slds-is-open"},[s("div",{staticClass:"slds-section__content"},[s("ol",{staticClass:"slds-setup-assistant"},[s("MASetupAssistantItem",{attrs:{stepProgress:!1}},[s("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n                        Salesforce Maps Authorization\n                    ")]),t._v(" "),s("div",{attrs:{slot:"description"},slot:"description"},[t._v("\n                        Authorize to enable our external services to access the necessary data needed to support our product functionality.\n                    ")]),t._v(" "),s("div",{attrs:{slot:"additional-content"},slot:"additional-content"},[t.isAuthorized?s("div",{staticClass:"slds-grid slds-grid_vertical-align-end slds-grid_vertical",attrs:{id:"currentAuthInfo"}},[s("div",[s("button",{staticClass:"slds-button slds-button_text-destructive",attrs:{id:"deauthorizeTerritoryUser"},on:{click:t.deauthorize}},[t._v("\n                                    Deauthorize\n                                ")])]),t._v(" "),s("div",{staticClass:"slds-text-align_right slds-text-color_weak slds-p-top_medium"},[s("div",[t._v("\n                                    Current Authorization User\n                                ")]),t._v(" "),s("div",{staticClass:"slds-m-bottom_small",attrs:{id:"currentAuthName"}},[t._v("\n                                    "+t._s(t.authorizedTerritoryUser)+"\n                                ")])])]):s("div",[s("div",{attrs:{id:"authorizeTerritory"}},[s("button",{staticClass:"slds-button slds-button_neutral",attrs:{id:"authorizeTerritoryIO",disabled:t.hasError},on:{click:t.authorize}},[t._v("\n                                    Authorize\n                                ")])])])])])],1)])])],1)}),[],!1,null,null,null).exports},4604:(t,e,s)=>{"use strict";s.d(e,{Z:()=>i});const r={components:{MAIconInline:s(8969).Z},props:{percent:{type:Number,default:0,validate:()=>(void 0).percent<=100},large:{type:Boolean,default:!1},theme:{type:String,default:""},showPercent:{type:Boolean,default:!1},showStep:{type:Boolean,default:!1},step:{type:Number,default:0},isComplete:{type:Boolean,default:!1}},data:()=>({percentStored:0}),computed:{progress(){const t=Math.cos(2*Math.PI*(this.percentStored/100)),e=Math.sin(2*Math.PI*(this.percentStored/100));return`M 1 0 A 1 1 0 ${this.percentStored<50?0:1} 1 ${t} ${e} L 0 0`},themeClass(){return{"slds-progress-ring_large":this.large,"slds-progress-ring_complete":this.isComplete,"slds-progress-ring_warning":"warning"===this.theme,"slds-progress-ring_expired":"expired"===this.theme,"slds-progress-ring_active-step":"active"===this.theme}}},watch:{percent:{handler(t){t>100?t=100:t<0&&(t=0),this.percentStored=t},immediate:!0}}},i=(0,s(1900).Z)(r,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"slds-progress-ring",class:t.themeClass},[r("div",{staticClass:"slds-progress-ring__progress",attrs:{"aria-valuenow":t.percentStored,role:"progressbar","aria-valuemin":"0","aria-valuemax":"100"}},[r("svg",{attrs:{viewBox:"-1 -1 2 2"}},[r("path",{staticClass:"slds-progress-ring__path",attrs:{id:"slds-progress-ring-path-2",d:t.progress}})])]),t._v(" "),r("div",{staticClass:"slds-progress-ring__content"},[t._t("default",(function(){return[t.showPercent?[t._v("\n                "+t._s(Math.floor(t.percentStored))+"\n            ")]:t.showStep?[t.isComplete?r("MAIconInline",{staticClass:"slds-icon_container slds-icon-utility-check",attrs:{svg:s(1792),iconClass:"slds-icon",assistiveText:"Complete"}}):r("span",[t._v(t._s(t.step))])]:t._e()]}))],2)])}),[],!1,null,"9eedfc06",null).exports}}]);