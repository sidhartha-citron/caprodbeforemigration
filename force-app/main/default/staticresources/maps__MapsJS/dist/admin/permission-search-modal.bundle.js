(globalThis.webpackChunkmaps_desktop=globalThis.webpackChunkmaps_desktop||[]).push([[8576],{1296:(t,s,e)=>{var i=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,n=/^0o[0-7]+$/i,o=parseInt,l="object"==typeof e.g&&e.g&&e.g.Object===Object&&e.g,d="object"==typeof self&&self&&self.Object===Object&&self,c=l||d||Function("return this")(),u=Object.prototype.toString,_=Math.max,g=Math.min,h=function(){return c.Date.now()};function p(t){var s=typeof t;return!!t&&("object"==s||"function"==s)}function m(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==u.call(t)}(t))return NaN;if(p(t)){var s="function"==typeof t.valueOf?t.valueOf():t;t=p(s)?s+"":s}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var e=r.test(t);return e||n.test(t)?o(t.slice(2),e?2:8):a.test(t)?NaN:+t}t.exports=function(t,s,e){var i,a,r,n,o,l,d=0,c=!1,u=!1,f=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function v(s){var e=i,r=a;return i=a=void 0,d=s,n=t.apply(r,e)}function b(t){return d=t,o=setTimeout(x,s),c?v(t):n}function C(t){var e=t-l;return void 0===l||e>=s||e<0||u&&t-d>=r}function x(){var t=h();if(C(t))return y(t);o=setTimeout(x,function(t){var e=s-(t-l);return u?g(e,r-(t-d)):e}(t))}function y(t){return o=void 0,f&&i?v(t):(i=a=void 0,n)}function I(){var t=h(),e=C(t);if(i=arguments,a=this,l=t,e){if(void 0===o)return b(l);if(u)return o=setTimeout(x,s),v(l)}return void 0===o&&(o=setTimeout(x,s)),n}return s=m(s)||0,p(e)&&(c=!!e.leading,r=(u="maxWait"in e)?_(m(e.maxWait)||0,s):r,f="trailing"in e?!!e.trailing:f),I.cancel=function(){void 0!==o&&clearTimeout(o),d=0,i=l=a=o=void 0},I.flush=function(){return void 0===o?n:y(h())},I}},1412:(t,s,e)=>{"use strict";e.r(s),e.d(s,{default:()=>g});var i=e(5908),a=e(4141),r=e(7356),n=e(1296),o=e.n(n),l=e(3294);const d=async function(){this.$emit("update:isLoading",!0),this.assignments=[];try{const{assignments:t=[],success:s=!1,error:e}=await this.$remote("maps.UserAJAXResources.getAssignmentsBySearchTerm",[this.searchTerm,this.store__toggle.searchType]);s?(t.forEach((t=>{t.disabled=!this.groupId&&t.id||t.id&&t.groupId!==this.groupId})),this.assignments=t):console.error(e)}catch(t){console.error(t)}finally{this.$emit("update:isLoading",!1)}},c={components:{MAInput:l.Z},props:{isLoading:{type:Boolean,default:!1},groupId:{type:String,default:""}},data:()=>({searchTerm:"",assignments:[]}),computed:{...(0,i.mapState)({store__settingsGroup:"settingsGroup",store__toggle:"toggle"}),searchLabel(){return`Search ${this.store__toggle.searchType}s`}},watch:{searchTerm(){this.debouncedGetAssignmentsBySearchTerm()}},mounted(){d.call(this)},methods:{debouncedGetAssignmentsBySearchTerm:o()(d,500),toggleSearch(){this.store__toggle.searchType="Profile"===this.store__toggle.searchType?"User":"Profile",this.searchTerm||d.call(this),this.searchTerm=""},select(t){t.assigned=!t.assigned,t.assigned?this.$emit("add",t):this.$emit("remove",t)}}};var u=e(1900);const _={components:{AssignmentGrid:(0,u.Z)(c,(function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"slds-modal__content slds-grid slds-grow",attrs:{id:"settingsGroupDetailsModal"}},[i("div",{staticClass:"slds-grid slds-grid_vertical"},[i("div",{staticClass:"slds-p-vertical_x-small slds-p-horizontal_large slds-shrink-none slds-theme_shade"},[i("div",{staticClass:"slds-form-element slds-grid"},[i("label",{staticClass:"slds-form-element__label slds-assistive-text",attrs:{for:"combobox-unique-id-1"}},[t._v("Search")]),t._v(" "),i("div",{staticClass:"slds-form-element__control slds-col"},[i("div",{staticClass:"slds-combobox_container"},[i("div",{staticClass:"slds-combobox slds-dropdown-trigger slds-dropdown-trigger_click",attrs:{"aria-expanded":"false","aria-haspopup":"listbox",role:"combobox"}},[i("MAInput",{staticClass:"slds-input-has-icon slds-input-has-icon_left",attrs:{id:"combobox-unique-id-1",type:"text",placeholder:t.searchLabel},model:{value:t.searchTerm,callback:function(s){t.searchTerm=s},expression:"searchTerm"}},[i("MAIcon",{attrs:{slot:"extendInput",src:e(2181),iconClass:["slds-icon","slds-input__icon","slds-input__icon_left","slds-icon-text-default"]},slot:"extendInput"})],1)],1)])])])]),t._v(" "),i("div",{staticClass:"slds-scrollable slds-grow"},[i("div",{staticClass:"slds-scrollable_none"},[i("table",{staticClass:"slds-table slds-no-row-hover slds-table_cell-buffer slds-table_bordered slds-table_fixed-layout",attrs:{"aria-multiselectable":"true",role:"grid"}},[i("thead",[t.assignments.length>0?i("tr",{staticClass:"slds-line-height_reset"},[i("th",{staticStyle:{width:"3.75rem"},attrs:{scope:"col"}}),t._v(" "),i("th",{staticClass:"slds-is-sortable",attrs:{"aria-label":"Profile","aria-sort":"none",scope:"col"}},[i("a",{staticClass:"slds-th__action slds-text-link_reset",attrs:{href:"javascript:void(0);",role:"button",tabindex:"-1"}},[i("span",{staticClass:"slds-assistive-text"},[t._v("Sort by: ")]),t._v(" "),i("div",{staticClass:"slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate"},[i("span",{staticClass:"slds-truncate",attrs:{title:t.store__toggle.searchType}},[t._v(t._s(t.store__toggle.searchType))])])])]),t._v(" "),t._m(0),t._v(" "),t._m(1)]):t._e()]),t._v(" "),i("tbody",t._l(t.assignments,(function(s,e){return i("tr",{key:e,staticClass:"slds-hint-parent",attrs:{"aria-selected":"false"}},[i("td",{staticClass:"slds-text-align_right",attrs:{role:"gridcell",tabindex:"0"}},["Default"!==t.store__settingsGroup.Name?i("div",{staticClass:"slds-checkbox_add-button"},[i("input",{staticClass:"slds-assistive-text",attrs:{id:"add-checkbox-"+e,type:"checkbox",tabindex:"-1",disabled:s.disabled},domProps:{value:"add-checkbox-"+e,checked:s.assigned},on:{click:function(e){return t.select(s)}}}),t._v(" "),i("label",{staticClass:"slds-checkbox_faux",attrs:{for:"add-checkbox-"+e}},[i("span",{staticClass:"slds-assistive-text"},[t._v("Select item 1")])])]):t._e()]),t._v(" "),i("td",{attrs:{scope:"row"}},[i("div",{staticClass:"slds-truncate",attrs:{title:"Profiles"}},[t._v("\n                                    "+t._s(t._f("decode")(s.name))+"\n                                ")])]),t._v(" "),i("td",{attrs:{scope:"row"}},[i("div",{staticClass:"slds-truncate",attrs:{title:"Current Permission Group"}},[t._v("\n                                    "+t._s(t._f("decode")(s.groupName))+"\n                                ")])]),t._v(" "),i("td",{attrs:{scope:"row"}},[i("div",{staticClass:"slds-truncate",attrs:{title:"Description"}},[t._v("\n                                    "+t._s(t._f("decode")(s.description))+"\n                                ")])])])})),0)])])])])])}),[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("th",{staticClass:"slds-is-sortable",attrs:{"aria-label":"Current Permission Group","aria-sort":"none",scope:"col"}},[e("a",{staticClass:"slds-th__action slds-text-link_reset",attrs:{href:"javascript:void(0);",role:"button",tabindex:"-1"}},[e("span",{staticClass:"slds-assistive-text"},[t._v("Sort by: ")]),t._v(" "),e("div",{staticClass:"slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate"},[e("span",{staticClass:"slds-truncate",attrs:{title:"Current Permission Group"}},[t._v("Current Permission Group")])])])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("th",{staticClass:"slds-is-sortable",attrs:{"aria-label":"Description","aria-sort":"none",scope:"col"}},[e("a",{staticClass:"slds-th__action slds-text-link_reset",attrs:{href:"javascript:void(0);",role:"button",tabindex:"-1"}},[e("span",{staticClass:"slds-assistive-text"},[t._v("Sort by: ")]),t._v(" "),e("div",{staticClass:"slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate"},[e("span",{staticClass:"slds-truncate",attrs:{title:"Description"}},[t._v("Description")])])])])}],!1,null,"4a742a26",null).exports,MAModal:a.Z},data:()=>({isLoading:!1}),computed:{...(0,i.mapState)({store__toggle:"toggle",store__settingsGroup:"settingsGroup",store__entityIdsForInsert:"entityIdsForInsert",store__assignmentIdsForDelete:"assignmentIdsForDelete"})},mounted(){this.$store.commit("resetAssignmentSelections")},methods:{close(){this.store__toggle.showSearchModal=!1,this.$store.commit("resetAssignmentSelections")},addAssignment({entityId:t,id:s}){this.store__assignmentIdsForDelete.has(s)?this.store__assignmentIdsForDelete.delete(s):this.store__entityIdsForInsert.add(t)},removeAssignment({entityId:t,id:s}){this.store__entityIdsForInsert.has(t)?this.store__entityIdsForInsert.delete(t):this.store__assignmentIdsForDelete.add(s)},async saveChanges(){this.isLoading=!0,await(0,r.C)(this.store__settingsGroup,this.store__entityIdsForInsert,this.store__assignmentIdsForDelete,!0)&&(this.store__toggle.showSearchModal=!1,this.$store.commit("resetAssignmentSelections"),this.store__toggle.refresh=!0),this.isLoading=!1}}},g=(0,u.Z)(_,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("MAModal",{attrs:{title:"Modify Assignments",isLoading:t.isLoading},on:{close:function(s){return t.close()}}},[e("div",{attrs:{slot:"content"},slot:"content"},[e("AssignmentGrid",{attrs:{isLoading:t.isLoading,groupId:t.store__settingsGroup.Id},on:{"update:isLoading":function(s){t.isLoading=s},"update:is-loading":function(s){t.isLoading=s},add:t.addAssignment,remove:t.removeAssignment}})],1),t._v(" "),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("button",{staticClass:"slds-button slds-button_neutral",on:{click:function(s){return t.close()}}},[t._v("\n            Cancel\n        ")]),t._v(" "),e("button",{staticClass:"slds-button slds-button_brand",on:{click:t.saveChanges}},[t._v("\n            Save\n        ")])])])}),[],!1,null,"d79f3f48",null).exports}}]);