(globalThis.webpackChunkmaps_desktop=globalThis.webpackChunkmaps_desktop||[]).push([[8154],{1275:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var o=s(8620);const i=e=>(0,o.RP)({type:"not"},((...t)=>!e(...t)))},8719:(e,t,s)=>{"use strict";s.d(t,{x:()=>l,K:()=>r});var o=s(5735),i=s.n(o),a=s(2423),n=s(5658);const r=async({sobject:e="",permissionsToCheck:t={isAccessible:!0},updateProgress:s=(()=>{}),includeDedicatedLookupOptions:o=!1})=>(async({sobject:e="",permissionsToCheck:t={isAccessible:!0},fieldIndex:s,progressCallback:o=(()=>{}),includeDedicatedLookupOptions:r=!1})=>{const{success:l=!1,data:d={},message:c}=await(0,n.wX)("RemoteFunctions.GetGlobalDescribeFields",[e,t,s,r],{escape:!1,buffer:!1});if(l){const{hasMore:s=!1,index:n,availableFields:r=[],totalSize:l=0}=d;if(s){let s=r;return await(async(e="",t={isAccessible:!0},s,o=(()=>{}))=>new Promise((n=>{let r=[];const l={status:"Running Batch",total:0,complete:0,success:0,failure:0},d=i()(((e,t)=>{const{object:s,limits:i,index:n}=e;((e="",t={isAccessible:!0},s)=>new Promise(((o,i)=>{(new a.Z).setAction("maps.RemoteFunctions.GetGlobalDescribeFields").setErrorHandler((e=>{i(new Error(e))})).invoke([e,t,s],(e=>{const{success:t=!1,data:s=[]}=e;t?o(s):(console.warn("Unable to get data from Salesforce."),i(new Error("Unable to get data from Salesforce (SFDC fields).")))}),{escape:!1,buffer:!1,timeout:45e3})})))(s,i,n).then((e=>{const{hasMore:t=!1,availableFields:o=[]}=e,a=e.index;t&&d.push({object:s,limits:i,index:a}),r=[...r,...o],l.success+=o.length})).catch((e=>{console.warn("schema error",e),l.failure++})).finally((()=>{l.complete++,o(l),t()}))}),1);d.push({object:e,limits:t,index:s}),d.drain=()=>{const e=r.sort(((e,t)=>e.label>t.label?1:-1));n(e)}})))(e,t,n,(e=>{e.total=l,o(e)})).then((e=>{s=[...s,...e]})),s}return r}throw console.warn("Unable to get data from Salesforce."),new Error(c)})({sobject:e,permissionsToCheck:t,fieldIndex:0,updateProgress:e=>{s(e)},includeDedicatedLookupOptions:o}),l=async(e={},t=!1,s=(()=>{}))=>{const o=e.hideExtraObjects||!1;let n;return await(async(e=!1,t=!0,s={},o=0,n=(()=>{}))=>new Promise(((r,l)=>{const d=o;(new a.Z).setAction("maps.RemoteFunctions.GetGlobalDescribeObjects").setErrorHandler((e=>{l(new Error(e))})).invoke([e,s,t,d],(async o=>{const{success:d=!1,data:c={}}=o;if(d){const{hasMore:o=!1,index:l,availableObjects:d=[],totalSize:u=0}=c;if(o){let o=d;await((e=!1,t=!0,s={},o=0,n=(()=>{}))=>new Promise((r=>{const l={status:"Running Batch",total:0,complete:0,success:0,failure:0};let d=[];const c=i()(((e,t)=>{const{removeExtra:s,limitedSet:o,limits:i,index:r}=e;((e=!1,t=!0,s={},o=0)=>new Promise(((i,n)=>{(new a.Z).setAction("maps.RemoteFunctions.GetGlobalDescribeObjects").setErrorHandler((e=>{n(new Error(e))})).invoke([e,s,t,o],(e=>{const{success:t=!1,data:s={}}=e;t?i(s):(console.warn("Unable to get data from Salesforce."),n(new Error("Unable to get data from Salesforce (SFDC objects).")))}),{escape:!1,buffer:!1})})))(s,o,i,r).then((e=>{const{hasMore:t=!1,availableObjects:a=[]}=e,n=e.index;t&&c.push({removeExtra:s,limitedSet:o,limits:i,index:n}),d=[...d,...a],l.success+=a.length})).catch((e=>{l.failure++,console.warn("schema error",e)})).finally((()=>{l.complete++,n(l),t()}))}),1);c.push({removeExtra:e,limitedSet:t,limits:s,index:o}),c.drain=()=>{const e=d.sort(((e,t)=>e.name>t.name?1:-1));r(e)}})))(e,t,s,l,(e=>{e.total=u,n(e)})).then((e=>{o=[...o,...e]})),r(o)}else r(d)}else console.warn("Unable to get data from Salesforce."),l(new Error("Unable to get data from Salesforce (SFDC objects)."))}),{escape:!1,buffer:!1})})))(o,t,e,0,(e=>{s(e)})).then((e=>{n=e})),n}},831:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>E});var o=s(8050),i=s(2423),a=s(675),n=s(8607),r=s(1595),l=s(5747),d=s(4141);const c={components:{MAModal:d.Z,MAToast:n.Z},props:{doShow:{type:Boolean,required:!0}},data:()=>({error:null,isLoading:!1}),methods:{no(){this.$emit("update:doShow",!1)},yes(){this.isLoading=!0,(new i.Z).setAction("maps.CustomEventConfigController.setEventDefaults").setErrorHandler(this.handleRemoteActionError.bind(this)).invoke([],(e=>{e.success?(this.$emit("refresh"),this.no()):this.error=e.error,this.isLoading=!1}))},handleRemoteActionError(e,t){this.error=t.message,this.isLoading&&(this.isLoading=!1)}}};var u=s(1900);const b=(0,u.Z)(c,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.doShow?s("MAModal",{staticClass:"ma-standard-config-modal",attrs:{errorMsg:e.error,isLoading:e.isLoading,doDetach:!0,title:"Install Standard Configuration"},on:{"update:errorMsg":function(t){e.error=t},"update:error-msg":function(t){e.error=t},"update:isLoading":function(t){e.isLoading=t},"update:is-loading":function(t){e.isLoading=t},close:e.no}},[s("div",{attrs:{slot:"content"},slot:"content"},[e.error?s("MAToast",{attrs:{msg:e.error},on:{close:function(t){e.error=null}}}):e._e(),e._v(" "),e.isLoading?e._e():s("div",[e._v("\n            We did not detect a standard configuration record. Would you like us to create one for you?\n        ")])],1),e._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("button",{staticClass:"slds-button slds-button_neutral",on:{click:e.no}},[e._v("\n            No\n        ")]),e._v(" "),s("button",{staticClass:"slds-button slds-button_brand",on:{click:e.yes}},[e._v("\n            Yes\n        ")])])]):e._e()}),[],!1,null,"eb616024",null).exports;var p=s(9486),h=s(1853),m=s(7391),f=s(8719);class _{static getConfigById(e,t=(()=>{})){return new Promise(((s,o)=>{(new i.Z).setAction("maps.CustomEventConfigController.getConfigById").setErrorHandler((e=>{o(new Error(`Remote action exception: ${e.message}`))})).invoke([e],(async i=>{const{success:a=!1,config:n={}}=i;if(a){const{eventObjectAPI:a="",metadata:r={}}=n;try{const e=await _.getFieldsForConfig(a,(e=>{t(e)}));e.eventTypes=r.eventTypes||[],n.metadata=e,s(i)}catch(t){o(new Error(i.error||`Failed to load config record (${e}).`))}}else o(new Error(i.error||`Failed to load config record (${e}).`))}),{escape:!1,buffer:!1})}))}static getAllLookupsWithBaseObjects(e="",t=[]){return new Promise(((s,o)=>{(new i.Z).setAction("maps.CustomEventConfigController.getAllLookupsWithBaseObjects").setErrorHandler((e=>{o(new Error(`Remote action exception: ${e.message}`))})).invoke([e,t],(async t=>{const{success:i=!1,lookups:a=[]}=t;i?s(a):o(new Error(`Failed to load config lookups (${e}).`))}),{escape:!1,buffer:!1})}))}static async getFieldsForConfig(e,t=(()=>{})){return new Promise((async(s,o)=>{try{const o=await(0,f.K)({sobject:e,permissionsToCheck:{isAccessible:!0,isUpdateable:!0,isCreateable:!0},progressCallback:e=>t(e)}),i=await(0,f.K)({sobject:e,permissionsToCheck:{isAccessible:!0,isCreateable:!0},progressCallback:e=>t(e)}),a={booleanFields:[],dateTimeFields:[],numericFields:[],eventNameFields:[],resources:[],lookupAssociations:[]},n="event"===String(e).toLowerCase();for(let e=0;e<o.length;e++){const t=o[e],{apiName:s,label:i,isNameField:r,isAutoNumber:l,displayType:d=""}=t,c={api:s,label:i};switch(d){case"boolean":a.booleanFields.push(c);break;case"datetime":a.dateTimeFields.push(c);break;case"integer":case"double":a.numericFields.push(c);break;case"string":r&&l&&(c.label+=" (auto-number)"),a.eventNameFields.push(c);break;case"reference":a.resources.push(c)}if(n){const e=String(t.apiName).toLowerCase();"enddatetime"===e?a.endFieldLabel=t.label:"startdatetime"===e?a.startFieldLabel=t.label:"subject"===e?a.eventNameFieldLabel=t.label:"ownerid"===e&&(a.resourceFieldLabel=t.label)}}for(let e=0;e<i.length;e++){const t=i[e],{displayType:s=""}=t,o={api:t.apiName,label:t.label};"reference"===s&&a.lookupAssociations.push(o)}s(a)}catch(t){console.warn("Unable to get fields",t),o(new Error(`Unable to get fields for object: ${e}`))}}))}static getConfigMetadata(e,t=(()=>{})){return new Promise((async(s,o)=>{try{const o=await _.getFieldsForConfig(e,(e=>{e.total++,t(e)})),i=o.lookupAssociations.map((e=>e.api)),a=await _.getAllLookupsWithBaseObjects(e,i);t({complete:1,total:1}),o.lookups=a,s(o)}catch(t){o(new Error(`Failed to load config metadata (${e}).`))}}))}static getAllowableSObjectsWithActivities(e=!1,t=(()=>{})){return new Promise((async(s,o)=>{try{const o=await(0,f.x)({isAccessible:!0,isCustomSetting:!1,supportsActivities:!0,hideExtraObjects:!0},e,(e=>{t(e)})),i=[];for(let e=0;e<o.length;e++){const t=o[e];i.push({api:t.label,label:t.name,isStandard:t.isStandard})}s(i)}catch(e){o(new Error("Failed to load sObjects with activities."))}}))}static getAvailableSObjects(e=!1,t=(()=>{})){return new Promise((async(s,o)=>{try{const o=await(0,f.x)({isAccessible:!0,isCustomSetting:!1,hideExtraObjects:!0},e,(e=>{t(e)})),i=[];for(let e=0;e<o.length;e++){const t=o[e];i.push({api:t.label,label:t.name,isStandard:t.isStandard})}s(i)}catch(e){o(new Error("Failed to load sObjects."))}}))}static save(e){return new Promise(((t,s)=>{(new i.Z).setAction("maps.CustomEventConfigController.save").setErrorHandler((e=>{s(new Error(`Remote action exception: ${e.message}`))})).invoke([e],(e=>{e&&e.success?t(e.Id):s(new Error(e.error))}))}))}}const v={components:{MACheckbox:h.Z,MAModal:d.Z,MAPicklist:m.Z,MAToast:n.Z},validations:{sobject:{required:p.required}},data:()=>({doShow:!1,error:null,sobject:null,sobjectLabel:null,isLoading:!1,showAllSObjects:!1,metadata:{sobjects:[]},objectLoadingProgress:0}),computed:{filteredSObjects(){return this.metadata.sobjects},progressStyle(){return{width:`${this.objectLoadingProgress}%`}}},watch:{showAllSObjects(){this.isLoading=!0,this.getAvailableSObjects().then((e=>{this.metadata.sobjects=e})).catch((e=>{console.warn(e)})).finally((()=>{this.isLoading=!1}))}},created(){this.$bus.$on("show-new-config-modal",this.showModal)},destroyed(){this.$bus.$off("show-new-config-modal")},methods:{objectSelected(e){this.sobjectLabel=e.label},showModal(){this.doShow=!0,this.isLoading=!0,this.getAvailableSObjects().then((e=>{this.metadata.sobjects=e,this.doShow=!0})).catch((e=>{console.warn(e)})).finally((()=>{this.isLoading=!1}))},confirm(){this.$v.$touch(),this.$v.$invalid?this.error="All fields are required.":(this.$emit("confirm",{name:this.sobject,label:this.sobjectLabel}),this.close())},close(){this.$v.$reset(),Object.assign(this.$data,this.$options.data.apply(this))},getAvailableSObjects(){return new Promise(((e,t)=>{this.objectLoadingProgress=0,_.getAvailableSObjects(!this.showAllSObjects,(e=>{const{complete:t=0,total:s=0}=e,o=Math.round(t/s*100);this.objectLoadingProgress=o})).then((s=>{Array.isArray(s)?(s=s.filter((e=>"Event"!==e.api)),e(s)):t(new Error("Error loading sobjects."))})).catch((()=>{t(new Error("Error loading sobjects."))}))}))}}},g=(0,u.Z)(v,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.doShow?s("MAModal",{attrs:{isLoading:e.isLoading,doDetach:!0,title:"Create Custom Event Config"},on:{"update:isLoading":function(t){e.isLoading=t},"update:is-loading":function(t){e.isLoading=t},close:e.close}},[s("div",{attrs:{slot:"content"},slot:"content"},[e.error?s("MAToast",{attrs:{msg:e.error},on:{close:function(t){e.error=null}}}):e._e(),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}],staticClass:"slds-progress-bar slds-progress-bar_small",staticStyle:{position:"absolute",top:"0",left:"0"},attrs:{"aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":"25",role:"progressbar"}},[s("span",{staticClass:"slds-progress-bar__value",style:e.progressStyle},[s("span",{staticClass:"slds-assistive-text"},[e._v("Progress: 25%")])])]),e._v(" "),s("div",{attrs:{role:"listitem"}},[s("MAPicklist",{staticClass:"slds-p-vertical_xx-small",attrs:{options:e.filteredSObjects,isInvalid:e.$v.sobject.$error,isRequired:!0,doDetach:!0,keyString:"api",valueString:"label",label:"Salesforce Object"},on:{input:e.$v.sobject.$touch,change:e.objectSelected},model:{value:e.sobject,callback:function(t){e.sobject=t},expression:"sobject"}})],1),e._v(" "),s("div",{staticClass:"slds-grid"},[s("div",[s("MACheckbox",{attrs:{toggleBuffer:100,title:"View All Salesforce Objects"},model:{value:e.showAllSObjects,callback:function(t){e.showAllSObjects=t},expression:"showAllSObjects"}})],1)])],1),e._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("button",{staticClass:"slds-button slds-button_neutral",on:{click:e.close}},[e._v("\n            Cancel\n        ")]),e._v(" "),s("button",{staticClass:"slds-button slds-button_brand",on:{click:e.confirm}},[e._v("\n            Confirm\n        ")])])]):e._e()}),[],!1,null,null,null).exports;var y=s(1275),C=s(713),A=s(3294),S=s(9756),j=s(5217);const $={components:{MAModal:d.Z},props:{recordId:{type:String,required:!0},isOpen:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},title:{type:String,default:"Delete"}},data:()=>({toast:""}),methods:{deleteRecord(){this.recordId?(this.$emit("update:isLoading",!0),this.close(),(new i.Z).setAction("maps.CustomEventConfigController.deleteRecord").setErrorHandler(this.handleRemoteActionError.bind(this)).invoke([this.recordId],(e=>{e&&!e.success&&(this.toast=e.error||`Failed to delete config (${this.recordId}).`),this.$emit("update:isLoading",!1),this.$emit("remove")}))):this.$emit("remove")},close(){this.$emit("update:isOpen",!1)},handleRemoteActionError(e,t,s){e?e(s.message):(this.isLoading&&this.$emit("update:isLoading",!1),this.toast=t.message||s.message)}}},w=(0,u.Z)($,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.isOpen?s("MAModal",{attrs:{doDetach:!0,isSmall:!0,hideCloseButton:!0,title:e.title},on:{close:e.close}},[s("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n        "+e._s(e.$Labels.MA_Are_You_Sure)+"\n    ")]),e._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("button",{staticClass:"slds-button slds-button_neutral",on:{click:e.close}},[e._v("\n            "+e._s(e.$Labels.MA_Cancel)+"\n        ")]),e._v(" "),s("button",{staticClass:"slds-button slds-button_brand",on:{click:e.deleteRecord}},[e._v("\n            "+e._s(e.$Labels.MA_Delete)+"\n        ")])])]):e._e()}),[],!1,null,null,null).exports,L={STANDARD:"standard",CUSTOM:"custom"},k={components:{MAPicklist:m.Z,MACheckbox:h.Z,ConfigDeleteModal:w},props:{lookup:{type:Object,required:!0,validator:e=>e.metadata&&e.record&&Object.keys(e.record).length},sobjects:{type:Array,default:()=>[]},baseObjects:{type:Array,required:!0,default:()=>[]},isStandardBaseConfig:{type:Boolean,required:!0},isLoading:{type:Boolean,default:!1},guid:{type:String,required:!0},eventTypes:{type:Array,required:!1,default:()=>[]}},data(){return{storedBaseObjects:this.baseObjects,type:null,showDeleteModal:!1,record:{Id:null,Name:null,BaseObjectId__c:null,Enabled__c:!0,LookupFieldAPI__c:null,CalEventBaseObj__c:null,LocationSource__c:!1,TypeAPI__c:"Type",TypeDefaultValue__c:null,ObjectAPI__c:null}}},validations(){const e={record:{ObjectAPI__c:{},BaseObjectId__c:{}}};return this.disableInputs&&!this.lookup.isRelatedObject||(e.record.ObjectAPI__c={required:p.required},e.record.BaseObjectId__c={required:p.required},this.record.Enabled__c||(e.record.BaseObjectId__c={})),e},computed:{disableInputs(){return!this.storedBaseObjects.length},isStandard(){return this.type===L.STANDARD},isCustom(){return this.type===L.CUSTOM},_isLoading:{get(){return this.isLoading},set(e){this.$emit("update:isLoading",e)}}},watch:{"record.LocationSource__c"(e){e&&this.$bus.$emit("set-primary-location-to-false",this.guid)}},created(){this.$bus.$on("set-primary-location-to-false",this.setPrimaryToFalse),this.init()},destroyed(){this.$bus.$off("set-primary-location-to-false",this.setPrimaryToFalse)},methods:{init(){Object.keys(this.lookup.record||{}).forEach((e=>{this.record[e]=this.lookup.record[e]})),this.type=L[this.lookup.type.toUpperCase()]},deleteLookup(){this.showDeleteModal=!0},removeLookup(){this.$emit("remove-lookup",this.guid)},baseObjectChangeHandler(e){this.record.ObjectAPI__c=e.api},getMABaseObjects(e){this.record.Enabled__c=!1,this.record.TypeDefaultValue__c=null,e&&e.api?(this.$emit("update:isLoading",!0),(new i.Z).setAction("maps.CustomEventConfigController.getBaseObjectsBySObjectAPIs").setErrorHandler(this.handleRemoteActionError.bind(this)).invoke([e.api,this.lookup.eventObject],(t=>{t?this.storedBaseObjects=t.baseObjects:this.toast=t.error||`Failed to retrieve ma base objects. ${e.api}`,this.$emit("update:isLoading",!1)}))):this.storedBaseObjects=[]},setPrimaryToFalse(e){e!==this.guid&&(this.record.LocationSource__c=!1)},getRecord(){return this.record},handleRemoteActionError(e,t){this.isLoading&&this.$emit("update:isLoading",!1),this.toast=e.message||t.message}}},O=(0,u.Z)(k,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("tr",[s("ConfigDeleteModal",{attrs:{recordId:e.record.Id||"",isOpen:e.showDeleteModal,isLoading:e._isLoading,title:e.$Labels.Delete_Custom_Event_Lookup},on:{"update:isOpen":function(t){e.showDeleteModal=t},"update:is-open":function(t){e.showDeleteModal=t},"update:isLoading":function(t){e._isLoading=t},"update:is-loading":function(t){e._isLoading=t},remove:e.removeLookup}}),e._v(" "),s("td",{staticClass:"events-enabled-column"},[s("div",{staticClass:"slds-form-element"},[s("MACheckbox",{class:{"slds-m-bottom_x-small":e.disableInputs},attrs:{isDisabled:e.disableInputs},model:{value:e.record.Enabled__c,callback:function(t){e.$set(e.record,"Enabled__c",t)},expression:"record.Enabled__c"}})],1)]),e._v(" "),e.lookup.isRelatedObject?s("td",[s("MAPicklist",{staticClass:"sobject-picklist",attrs:{showLabel:!1,options:e.sobjects,doDetach:!0,isInvalid:e.$v.record.ObjectAPI__c.$error,keyString:"api",valueString:"label"},on:{change:e.getMABaseObjects,input:e.$v.record.ObjectAPI__c.$touch},model:{value:e.record.ObjectAPI__c,callback:function(t){e.$set(e.record,"ObjectAPI__c",t)},expression:"record.ObjectAPI__c"}})],1):s("td",[e._v("\n        "+e._s(e._f("decode")(e.lookup.label))+"\n    ")]),e._v(" "),s("td",{staticClass:"events-form-input-column"},[e.storedBaseObjects.length?s("MAPicklist",{attrs:{showLabel:!1,options:e.storedBaseObjects,doDetach:!0,isInvalid:e.$v.record.BaseObjectId__c.$error,keyString:"value",valueString:"label"},on:{input:e.$v.record.BaseObjectId__c.$touch,change:e.baseObjectChangeHandler},model:{value:e.record.BaseObjectId__c,callback:function(t){e.$set(e.record,"BaseObjectId__c",t)},expression:"record.BaseObjectId__c"}}):s("div",[e._v("\n            "+e._s(e.$Labels.MA_No_Base_Objects)+"\n            "),e.$v.record.BaseObjectId__c.$error?s("div",{staticClass:"generic-error"},[e._v("\n                This field is required.\n            ")]):e._e()])],1),e._v(" "),e.isStandardBaseConfig?s("td",{staticClass:"events-form-input-column"},[s("MAPicklist",{attrs:{showLabel:!1,options:e.eventTypes,doDetach:!0,keyString:"value",valueString:"label"},model:{value:e.record.TypeDefaultValue__c,callback:function(t){e.$set(e.record,"TypeDefaultValue__c",t)},expression:"record.TypeDefaultValue__c"}})],1):e._e(),e._v(" "),e.isStandardBaseConfig||e.disableInputs?e._e():s("td",{staticClass:"events-primary-column slds-text-align_center"},[s("div",{staticClass:"slds-form-element__control"},[s("span",{staticClass:"slds-radio"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.record.LocationSource__c,expression:"record.LocationSource__c"}],attrs:{id:"radio-"+e.guid,type:"radio",name:"options"},domProps:{value:!0,checked:e._q(e.record.LocationSource__c,!0)},on:{change:function(t){return e.$set(e.record,"LocationSource__c",!0)}}}),e._v(" "),s("label",{staticClass:"slds-radio__label",attrs:{for:"radio-"+e.guid}},[s("span",{staticClass:"slds-radio_faux"}),e._v(" "),s("span",{staticClass:"slds-form-element__label"})])])])]),e._v(" "),e.isStandardBaseConfig?s("td",[e.isCustom?s("button",{staticClass:"slds-button slds-button_icon-container has-hover-tooltip",on:{click:e.deleteLookup}},[s("span",{staticClass:"slds-button__icon ma-icon ma-icon-close"})]):s("div")]):e._e()],1)}),[],!1,null,"d309ac22",null).exports,x={components:{MAInput:A.Z,MACheckbox:h.Z,MAPicklist:m.Z,MASpinner:a.Z,MATooltip:S.Z,MAToast:n.Z,MARadioGroup:j.Z,ConfigLookup:O,ConfigDeleteModal:w},props:{bootstrap:{type:Object,required:!0},index:{type:Number,required:!0}},data(){return{initialName:this.bootstrap.name,isLoading:!1,toast:null,showDeleteModal:!1,options:{eventNameField:null,startField:null,endField:null,useDuration:!1,durationField:null,durationUnit:null,resourceField:null,trackingField:null,exclusionField:null},record:{Id:null,Name:"",EventObject__c:null,Options__c:null,Type__c:null,Enabled__c:!0},type:null,eventObjectLabel:null,lookups:[],metadata:{resources:[],eventNameFields:[],dateTimeFields:[],numericFields:[],booleanFields:[],durationUnits:["seconds","minutes","hours"],timeFieldOptions:[{label:this.$Labels.MA_Use_DateTime,value:!1},{label:this.$Labels.MA_Use_Duration,value:!0}],eventTypes:[],resourceFieldLabel:null,eventNameFieldLabel:null,startFieldLabel:null,endFieldLabel:null,availableObjects:[]},relatedObjectProgress:{loading:!1,style:{width:"0%"}},mainProgressStyle:{loading:!1,style:{width:"0%"}}}},validations(){const e={record:{Name:{required:p.required,maxLength:(0,p.maxLength)(80)},EventObject__c:{required:p.required}},options:{eventNameField:{required:p.required},startField:{required:p.required},resourceField:{required:p.required}}};return this.options.useDuration?(e.options.durationField={required:p.required},e.options.durationUnit={required:p.required}):(e.options.endField={required:p.required,notSameAsStart:(0,y.Z)((0,p.sameAs)("startField"))},e.options.startField.notSameAsEnd=(0,y.Z)((0,p.sameAs)("endField"))),e},computed:{isStandard(){return this.type===L.STANDARD},isCustom(){return this.type===L.CUSTOM},isNew(){return this.bootstrap.isNew}},watch:{"record.Name"(e){e||(e=this.initialName),this.$emit("update:bootstrap",Object.assign(this.bootstrap,{name:e}))}},created(){this.init()},methods:{init(){this.bootstrap.isNew&&this.bootstrap.sobject?(this.record.Name=this.bootstrap.name,this.record.EventObject__c=this.bootstrap.sobject,this.eventObjectLabel=this.bootstrap.label,this.type=L.CUSTOM,this.loadMetadata(this.bootstrap.sobject)):this.bootstrap.id?(this.record.Id=this.bootstrap.id,this.loadRecord(this.bootstrap.id)):this.toast="Missing bootstrap data. Contact your administrator."},loadMetadata(e){this.isLoading=!0,this.mainProgressStyle.style.width="0%",this.mainProgressStyle.loading=!0,_.getConfigMetadata(e,(e=>{const{complete:t=0,total:s=0}=e,o=Math.round(t/s*100);this.mainProgressStyle.style.width=`${o}%`})).then((t=>{this.type=L.CUSTOM,Object.keys(t).forEach((e=>{this.metadata[e]=t[e]}));let s=!1;t.lookups.forEach((t=>{const i=2===t.objects.length?"User":t.objects[0],a={metadata:{baseObjects:t.baseObjects},type:L.CUSTOM,guid:(0,o.x$)(),record:{LookupFieldAPI__c:t.api,ObjectAPI__c:i,Enabled__c:!1},label:t.label};e===i&&(a.metadata.baseObjects=t.CalEventBaseObjects),!s&&t.baseObjects.length&&(a.record.LocationSource__c=!0,s=!0),this.lookups.push(a)})),this.sortLookups(this.lookups)})).catch((e=>{console.warn(e)})).finally((()=>{this.isLoading=!1,this.mainProgressStyle.loading=!1}))},loadRecord(e){this.isLoading=!0,this.mainProgressStyle.style.width="0%",this.mainProgressStyle.loading=!0,_.getConfigById(e,(e=>{const{complete:t=0,total:s=0}=e,o=Math.round(t/s*100);this.mainProgressStyle.style.width=`${o}%`})).then((t=>{if(!t.success)return this.type=L.CUSTOM,void(this.toast=t.error||`An error occured while fetching config for ${e}.`);const s=(0,C.a)(t.config,"maps__");if(s.record){Object.keys(s.record).forEach((e=>{this.record[e]=s.record[e]}));const e=JSON.parse(this.record.Options__c)||{};Object.keys(e).forEach((t=>{this.options[t]=e[t]}))}Object.keys(s.metadata).forEach((e=>{this.metadata[e]=s.metadata[e]})),this.type=L[s.type.toUpperCase()],this.eventObjectLabel=s.eventObjectLabel,s.lookups=s.lookups.map((e=>{const{baseObjects:t=[],CalEventBaseObjects:i=[]}=e.metadata;return e.metadata.baseObjects=t,e.record.ObjectAPI__c===s.record.EventObject__c&&(e.metadata.baseObjects=i),e.guid=(0,o.x$)(),e})),this.sortLookups(s.lookups),this.lookups=s.lookups})).catch((e=>{console.warn(e.message),this.type=L.CUSTOM,this.toast="An error occurred while fetching and processing the config record."})).finally((()=>{this.isLoading=!1,this.mainProgressStyle.loading=!1}))},sortLookups(e){e.sort(((e,t)=>"This Object"===e.label?-1:"This Object"===t.label?1:e.metadata&&e.metadata.baseObjects&&e.metadata.baseObjects.length?t.metadata.baseObjects.length?1:-1:1))},removeConfig(){this.$emit("deleteConfig",this.index)},openDeleteModal(){this.showDeleteModal=!0},save(){this.$v.$touch();let e=this.$v.$invalid;if(this.$children.forEach((t=>{t.$v&&"object"==typeof t.$v&&"function"==typeof t.$v.$touch&&(t.$v.$touch(),!e&&t.$v.$invalid&&(e=!0))})),e)this.toast="Please fix validation issues before saving.";else{this.isLoading=!0,this.options.useDuration?this.options.endField=null:(this.options.durationField=null,this.options.durationUnit=null);try{this.record.Options__c=JSON.stringify(this.options);const e=[];this.$children.forEach((t=>{"function"==typeof t.getRecord&&e.push({record:t.getRecord()})}));const t={record:this.record,lookups:e};_.save(t).then((e=>{this.lookups=[],e&&(e!==this.bootstrap.id&&(this.$emit("update:bootstrap",Object.assign(this.bootstrap,{id:e,isNew:!1})),this.$bus.$emit("update-tabid",e)),this.init())})).catch((e=>{this.toast=e.error||`Failed to save config (${this.id}).`})).finally((()=>{this.isLoading=!1}))}catch(e){console.warn(e),this.isLoading=!1}}},removeLookup(e){this.lookups=this.lookups.filter((t=>t.guid!==e))},addRelatedObject(){this.isLoading=!0,this.relatedObjectProgress.loading=!0,this.relatedObjectProgress.style.width="0%",_.getAllowableSObjectsWithActivities(!1,(e=>{const{complete:t=0,total:s=0}=e,o=Math.round(t/s*100);this.relatedObjectProgress.style.width=`${o}%`})).then((e=>{Array.isArray(e)?this.lookups.push({metadata:{sobjects:this.filterUsedRelatedObjects(e),baseObjects:[]},type:L.CUSTOM,guid:(0,o.x$)(),eventObject:this.record.EventObject__c,isRelatedObject:!0}):this.toast=e.error||"Failed to retrieve objects with activity support."})).finally((()=>{this.isLoading=!1,this.relatedObjectProgress.loading=!1}))},filterUsedRelatedObjects(e){const t=[];return e.forEach((e=>{let s=!1;this.lookups.forEach((t=>{t.record&&t.record.ObjectAPI__c===e.api&&(s=!0)})),s||t.push(e)})),t},closedToast(){this.toast=null},handleRemoteActionError(e,t,s){e?e(s.message):(this.isLoading&&(this.isLoading=!1),this.toast=t.message||s.message)}}},M=(0,u.Z)(x,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"slds-is-relative"},[e.isLoading?s("MASpinner"):e._e(),e._v(" "),null!=e.toast?s("MAToast",{attrs:{msg:e.toast},on:{close:e.closedToast}}):e._e(),e._v(" "),s("ConfigDeleteModal",{attrs:{recordId:e.record.Id||"",isOpen:e.showDeleteModal,isLoading:e.isLoading,title:e.$Labels.MA_Delete_Custom_Event},on:{"update:isOpen":function(t){e.showDeleteModal=t},"update:is-open":function(t){e.showDeleteModal=t},"update:isLoading":function(t){e.isLoading=t},"update:is-loading":function(t){e.isLoading=t},remove:e.removeConfig}}),e._v(" "),e.mainProgressStyle.loading?s("div",{staticClass:"slds-progress-bar slds-progress-bar_small",staticStyle:{position:"absolute",top:"-16px",left:"0"},attrs:{"aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":"25",role:"progressbar"}},[s("span",{staticClass:"slds-progress-bar__value",style:e.mainProgressStyle.style},[s("span",{staticClass:"slds-assistive-text"},[e._v("Progress: 25%")])])]):e._e(),e._v(" "),s("div",{staticClass:"slds-grid"},[s("div",{staticClass:"slds-text-heading_medium"},[e._v("\n            "+e._s(e.$Labels.MA_Event_Obj_Config)+"\n        ")]),e._v(" "),s("div",{staticClass:"slds-col"}),e._v(" "),e.isCustom?s("div",{staticClass:"slds-m-right_small"},[s("button",{staticClass:"slds-button slds-button_icon slds-button_icon-container",on:{click:e.openDeleteModal}},[s("span",{staticClass:"slds-button__icon ma-icon ma-icon-delete"})])]):e._e(),e._v(" "),s("div",{staticClass:"slds-form-element slds-m-right_small"},[s("MACheckbox",{attrs:{showStateLabels:!0},model:{value:e.record.Enabled__c,callback:function(t){e.$set(e.record,"Enabled__c",t)},expression:"record.Enabled__c"}})],1),e._v(" "),s("div",[s("button",{staticClass:"slds-button slds-button_success",on:{click:e.save}},[e._v("\n                "+e._s(e.$Labels.MA_Save)+"\n            ")])])]),e._v(" "),s("div",{staticClass:"slds-grid slds-wrap slds-container_medium slds-m-bottom_large"},[s("div",{staticClass:"slds-has-flexi-truncate slds-p-horizontal_medium slds-size_1-of-2",attrs:{role:"listitem"}},[s("MAInput",{staticClass:"slds-p-vertical_xx-small",attrs:{isRequired:!0,isInvalid:e.$v.record.Name.$error,label:e.$Labels.MA_Name},on:{input:e.$v.record.Name.$touch},model:{value:e.record.Name,callback:function(t){e.$set(e.record,"Name",t)},expression:"record.Name"}},[s("div",{attrs:{slot:"errors"},slot:"errors"},[e.$v.record.Name.maxLength?e._e():s("div",[e._v("\n                        Maximum length of 80 characters allowed.\n                    ")]),e._v(" "),e.$v.record.Name.required?e._e():s("div",[e._v("\n                        This field is required.\n                    ")])])])],1),e._v(" "),s("div",{staticClass:"slds-has-flexi-truncate slds-p-horizontal_medium slds-size_1-of-2",attrs:{role:"listitem"}},[s("div",{staticClass:"slds-form-element slds-p-vertical_xx-small"},[s("label",{staticClass:"slds-form-element__label"},[e._v("Salesforce "+e._s(e.$Labels.MA_OBJECT))]),e._v(" "),s("div",[e._v(e._s(e.eventObjectLabel))])])]),e._v(" "),s("div",{staticClass:"slds-has-flexi-truncate slds-p-horizontal_medium slds-size_1-of-2",attrs:{role:"listitem"}},[e.isCustom?s("MAPicklist",{attrs:{options:e.metadata.resources,doDetach:!0,isRequired:!0,isInvalid:e.$v.options.resourceField.$error,label:e.$Labels.MA_Sched_Resource,keyString:"api",valueString:"label"},on:{input:e.$v.options.resourceField.$touch},model:{value:e.options.resourceField,callback:function(t){e.$set(e.options,"resourceField",t)},expression:"options.resourceField"}}):e._e(),e._v(" "),e.isStandard?s("div",{staticClass:"slds-form-element slds-p-vertical_xx-small"},[s("label",{staticClass:"slds-form-element__label"},[e._v(e._s(e.$Labels.MA_Sched_Resource))]),e._v(" "),s("div",[e._v(e._s(e.metadata.resourceFieldLabel))])]):e._e()],1),e._v(" "),s("div",{staticClass:"slds-has-flexi-truncate slds-p-horizontal_medium slds-size_1-of-2",attrs:{role:"listitem"}},[e.isCustom?s("MAPicklist",{attrs:{options:e.metadata.eventNameFields,doDetach:!0,isRequired:!0,isInvalid:e.$v.options.eventNameField.$error,label:e.$Labels.MA_Event_Name_Field,keyString:"api",valueString:"label"},on:{input:e.$v.options.eventNameField.$touch},model:{value:e.options.eventNameField,callback:function(t){e.$set(e.options,"eventNameField",t)},expression:"options.eventNameField"}}):e._e(),e._v(" "),e.isStandard?s("div",{staticClass:"slds-form-element slds-p-vertical_xx-small"},[s("label",{staticClass:"slds-form-element__label"},[e._v(e._s(e.$Labels.MA_Event_Name_Field))]),e._v(" "),s("div",[e._v(e._s(e.metadata.eventNameFieldLabel))])]):e._e()],1),e._v(" "),e.isCustom?s("div",{staticClass:"slds-has-flexi-truncate slds-p-horizontal_medium slds-size_1-of-1",attrs:{role:"listitem"}},[s("MARadioGroup",{attrs:{name:"time-options",options:e.metadata.timeFieldOptions,label:e.$Labels.MA_Time_Fields},model:{value:e.options.useDuration,callback:function(t){e.$set(e.options,"useDuration",t)},expression:"options.useDuration"}})],1):e._e(),e._v(" "),s("div",{staticClass:"slds-has-flexi-truncate slds-p-horizontal_medium slds-size_1-of-2",attrs:{role:"listitem"}},[e.isCustom?s("MAPicklist",{attrs:{options:e.metadata.dateTimeFields,doDetach:!0,isRequired:!0,isInvalid:e.$v.options.startField.$error,label:e.$Labels.MA_Start_DateTime_Field,keyString:"api",valueString:"label"},on:{input:e.$v.options.startField.$touch},model:{value:e.options.startField,callback:function(t){e.$set(e.options,"startField",t)},expression:"options.startField"}},[s("div",{attrs:{slot:"errors"},slot:"errors"},[e.$v.options.startField.required?e._e():s("div",[e._v("\n                        This field is required.\n                    ")]),e._v(" "),e.$v.options.startField.notSameAsStart?e._e():s("div",[e._v("\n                        This field must be different than the End DateTime Field.\n                    ")])])]):e._e(),e._v(" "),e.isStandard?s("div",{staticClass:"slds-form-element slds-p-vertical_xx-small"},[s("label",{staticClass:"slds-form-element__label"},[e._v(e._s(e.$Labels.MA_Start_DateTime_Field))]),e._v(" "),s("div",[e._v(e._s(e.metadata.startFieldLabel))])]):e._e()],1),e._v(" "),e.isStandard||!e.options.useDuration?s("div",{staticClass:"slds-has-flexi-truncate slds-p-horizontal_medium slds-size_1-of-2",attrs:{role:"listitem"}},[e.isCustom?s("MAPicklist",{attrs:{options:e.metadata.dateTimeFields,doDetach:!0,isRequired:!0,isInvalid:e.$v.options.endField.$error,label:e.$Labels.MA_End_DateTime_Field,keyString:"api",valueString:"label"},on:{input:e.$v.options.endField.$touch},model:{value:e.options.endField,callback:function(t){e.$set(e.options,"endField",t)},expression:"options.endField"}},[s("div",{attrs:{slot:"errors"},slot:"errors"},[e.$v.options.endField.required?e._e():s("div",[e._v("\n                        This field is required.\n                    ")]),e._v(" "),e.$v.options.endField.notSameAsStart?e._e():s("div",[e._v("\n                        This field must be different than the Start DateTime Field.\n                    ")])])]):e._e(),e._v(" "),e.isStandard?s("div",{staticClass:"slds-form-element slds-p-vertical_xx-small"},[s("label",{staticClass:"slds-form-element__label"},[e._v(e._s(e.$Labels.MA_End_DateTime_Field))]),e._v(" "),s("div",[e._v(e._s(e.metadata.endFieldLabel))])]):e._e()],1):e._e(),e._v(" "),e.isCustom&&e.options.useDuration?s("div",{staticClass:"slds-has-flexi-truncate slds-p-horizontal_medium slds-size_1-of-4",attrs:{role:"listitem"}},[s("MAPicklist",{attrs:{options:e.metadata.numericFields,doDetach:!0,isRequired:!0,isInvalid:e.$v.options.durationField.$error,label:e.$Labels.MA_Duration_Field,keyString:"api",valueString:"label"},on:{input:e.$v.options.durationField.$touch},model:{value:e.options.durationField,callback:function(t){e.$set(e.options,"durationField",t)},expression:"options.durationField"}})],1):e._e(),e._v(" "),e.isCustom&&e.options.useDuration?s("div",{staticClass:"slds-has-flexi-truncate slds-p-horizontal_medium slds-size_1-of-4",attrs:{role:"listitem"}},[s("MAPicklist",{attrs:{options:e.metadata.durationUnits,doDetach:!0,isRequired:!0,isInvalid:e.$v.options.durationUnit.$error,label:e.$Labels.MA_UNITS},on:{input:e.$v.options.durationUnit.$touch},model:{value:e.options.durationUnit,callback:function(t){e.$set(e.options,"durationUnit",t)},expression:"options.durationUnit"}})],1):e._e(),e._v(" "),s("div",{staticClass:"slds-has-flexi-truncate slds-p-horizontal_medium slds-size_1-of-2",attrs:{role:"listitem"}},[s("MAPicklist",{attrs:{options:e.metadata.booleanFields,doDetach:!0,label:"Track Schedule Usage",keyString:"api",valueString:"label"},model:{value:e.options.trackingField,callback:function(t){e.$set(e.options,"trackingField",t)},expression:"options.trackingField"}})],1),e._v(" "),s("div",{staticClass:"slds-has-flexi-truncate slds-p-horizontal_medium slds-size_1-of-2",attrs:{role:"listitem"}},[s("label",{staticClass:"slds-form-element__label slds-align-middle"},[e._v("\n                Exclude Specific Records from Schedule\n                "),s("a",{staticClass:"inline-block",attrs:{href:"https://help.salesforce.com/articleView?id=salesforce_maps_intro.htm&type=5",target:"_blank"}},[s("MATooltip",{staticClass:"slds-p-left_x-small",attrs:{showIcon:!0}},[s("div",{staticClass:"slds-popover__body",attrs:{slot:"content"},slot:"content"},[e._v("\n                            You may use a checkbox field to exclude a record from the Maps Schedule. If this checkbox is checked true, the record will not appear in the Schedule.\n                            "),s("br"),e._v(" "),s("br"),e._v("\n                            Click to read the full documentation.\n                        ")])])],1)]),e._v(" "),s("MAPicklist",{attrs:{options:e.metadata.booleanFields,doDetach:!0,label:"",keyString:"api",valueString:"label"},model:{value:e.options.exclusionField,callback:function(t){e.$set(e.options,"exclusionField",t)},expression:"options.exclusionField"}})],1)]),e._v(" "),s("div",{staticClass:"slds-grid slds-m-horizontal_medium"},[s("div",{staticClass:"slds-box slds-theme_shade"},[s("div",{staticClass:"slds-p-bottom_medium slds-text-heading_medium"},[e._v("\n                "+e._s(e.$Labels.MA_Related_Object_Config)+"\n            ")]),e._v(" "),s("div",[s("table",{staticClass:"custom-events-mapping-table"},[s("thead",[s("tr",[s("th",{staticClass:"events-enabled-column"},[e._v("\n                                "+e._s(e.$Labels.ArcGIS_Enabled)+"\n                            ")]),e._v(" "),s("th",[e._v(e._s(e.isStandard?e.$Labels.MA_OBJECT:e.$Labels.MA_Field))]),e._v(" "),s("th",{staticClass:"events-form-input-column"},[e._v("\n                                "+e._s(e.$Labels.MA_Get_Location_From)+"\n                            ")]),e._v(" "),e.isStandard?s("th",{staticClass:"events-form-input-column"},[e._v("\n                                "+e._s(e.$Labels.MA_Event_Type)+"\n                            ")]):e._e(),e._v(" "),e.isCustom?s("th",{staticClass:"events-primary-column"},[s("div",{staticClass:"slds-grid"},[s("div",[e._v("\n                                        "+e._s(e.$Labels.MA_Primary)+"\n                                    ")]),e._v(" "),s("MATooltip",{staticClass:"slds-p-left_x-small",attrs:{showIcon:!0}},[s("div",{staticClass:"slds-popover__body",attrs:{slot:"content"},slot:"content"},[e._v("\n                                            "+e._s(e.$Labels.MA_lookup_source_help)+"\n                                        ")])])],1)]):e._e(),e._v(" "),e.isStandard?s("th"):e._e()])]),e._v(" "),s("tbody",[e._l(e.lookups,(function(t){return s("ConfigLookup",{key:t.guid,attrs:{isLoading:e.isLoading,lookup:t,sobjects:t.metadata.sobjects,baseObjects:t.metadata.baseObjects,eventTypes:e.metadata.eventTypes,isStandardBaseConfig:e.isStandard,guid:t.guid},on:{"update:isLoading":function(t){e.isLoading=t},"update:is-loading":function(t){e.isLoading=t},"remove-lookup":e.removeLookup}})})),e._v(" "),s("tr",{directives:[{name:"show",rawName:"v-show",value:e.relatedObjectProgress.loading,expression:"relatedObjectProgress.loading"}]},[s("td",{attrs:{colspan:"4"}},[s("div",{staticClass:"slds-progress-bar slds-progress-bar_small",attrs:{"aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":"25",role:"progressbar"}},[s("span",{staticClass:"slds-progress-bar__value",style:e.relatedObjectProgress.style},[s("span",{staticClass:"slds-assistive-text"},[e._v("Progress: 25%")])])])])])],2)])]),e._v(" "),"standard"===e.type?s("div",[s("button",{staticClass:"slds-button slds-button_neutral slds-grid slds-grid_align-center",on:{click:e.addRelatedObject}},[s("span",{staticClass:"slds-button__icon slds-button__icon_left ma-icon ma-icon-add"}),e._v("\n                    "+e._s(e.$Labels.MA_Add_Related_Object)+"\n                ")])]):e._e()])])],1)}),[],!1,null,null,null).exports,F={name:"RoutesScheduleRoot",components:{NewConfigModal:g,InstallStandardConfigModal:b,MASpinner:a.Z,MAToast:n.Z,MATabs:r.Z,MATab:l.Z,Config:M},data:()=>({isLoading:!1,eventsTabError:null,configs:[],defaultTabId:null,doShowInstallStandardConfigModal:!1}),created(){this.$bus.$on("update-tabid",this.updateTabIdFromEvent)},mounted(){this.init()},destroyed(){this.$bus.$off("update-tabid")},methods:{refresh(){this.configs=[],this.init()},deleteConfig(e){this.configs.splice(e,1),this.defaultTabId=this.configs[0].id},init(){this.isLoading=!0,this.getAllConfigs().then((e=>{this.configs=e.map((e=>({id:e.Id,name:e.Name}))),e.find((e=>"Standard"===e.maps__Type__c))||(this.doShowInstallStandardConfigModal=!0),this.defaultTabId=this.configs.length?this.configs[0].id:null})).catch((e=>{console.warn(e)})).finally((()=>{this.isLoading=!1}))},getAllConfigs(){return new Promise(((e,t)=>{(new i.Z).setAction("maps.CustomEventConfigController.getAllConfigs").setErrorHandler(this.handleRemoteActionError.bind(this)).invoke([],(s=>{Array.isArray(s)?e(s):t(new Error("Error loading records."))}))}))},confirmCustomEventObject(e){this.defaultTabId=this.getTabId(),this.configs.push({id:this.defaultTabId,name:"New Custom Event",isNew:!0,sobject:e.name,label:e.label}),this.activeTabId=this.getTabId()},newCustomEventClick(){this.$bus.$emit("show-new-config-modal")},getTabId:()=>(0,o.x$)(),closeEventsTabError(){this.eventsTabError=null},handleRemoteActionError(e,t,s){e?e(s.message):(this.isLoading&&(this.isLoading=!1),this.toast=t.message||s.message)},updateTabIdFromEvent(e){this.defaultTabId=e}}},E=(0,u.Z)(F,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("MATabs",{staticClass:"slds-m-bottom_medium"},[s("MATab",{staticClass:"slds-m-around_medium",attrs:{id:e.getTabId(),title:"Events"}},[s("div",{staticClass:"events-tab-content"},[e.isLoading?s("MASpinner"):e._e(),e._v(" "),null!=e.eventsTabError?s("MAToast",{attrs:{msg:e.eventsTabError},on:{close:e.closeEventsTabError}}):e._e(),e._v(" "),s("MATabs",{staticClass:"slds-m-bottom_medium",attrs:{isVertical:!0,activeTabId:e.defaultTabId,defaultTabId:e.defaultTabId}},[e._l(e.configs,(function(t,o){return s("MATab",{key:t.id,attrs:{id:t.id,title:t.name}},[s("Config",{attrs:{bootstrap:t,index:o},on:{"update:bootstrap":function(e){t=e},deleteConfig:e.deleteConfig}})],1)})),e._v(" "),s("li",{staticClass:"slds-p-around_small",attrs:{slot:"additionalContent",role:"presentation"},slot:"additionalContent"},[s("button",{staticClass:"slds-button slds-button_neutral slds-grid slds-grid_align-center ma-new-custom-event",on:{click:e.newCustomEventClick}},[s("span",{staticClass:"slds-button__icon slds-button__icon_left ma-icon ma-icon-add"}),e._v("\n                            "+e._s(e.$Labels.MA_Custom_Event)+"\n                        ")])])],2)],1)])],1),e._v(" "),s("NewConfigModal",{on:{confirm:e.confirmCustomEventObject}}),e._v(" "),s("InstallStandardConfigModal",{attrs:{doShow:e.doShowInstallStandardConfigModal},on:{"update:doShow":function(t){e.doShowInstallStandardConfigModal=t},"update:do-show":function(t){e.doShowInstallStandardConfigModal=t},refresh:e.refresh}})],1)}),[],!1,null,"21c335df",null).exports},9486:e=>{window,e.exports=function(e){var t={};function s(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,s),i.l=!0,i.exports}return s.m=e,s.c=t,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(o,i,function(t){return e[t]}.bind(null,i));return o},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s(s.s=2)}([function(e,t,s){"use strict";s.r(t),function(e){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}s.d(t,"withParams",(function(){return a}));var i="undefined"!=typeof window?window:void 0!==e?e:{},a=i.vuelidate?i.vuelidate.withParams:function(e,t){return"object"===o(e)&&void 0!==t?t:e((function(){}))}}.call(this,s(1))},function(e,t){var s;s=function(){return this}();try{s=s||new Function("return this")()}catch(e){"object"==typeof window&&(s=window)}e.exports=s},function(e,t,s){"use strict";s.r(t),s.d(t,"alpha",(function(){return c})),s.d(t,"alphaNum",(function(){return u})),s.d(t,"numeric",(function(){return b})),s.d(t,"between",(function(){return p})),s.d(t,"email",(function(){return h})),s.d(t,"ipAddress",(function(){return m})),s.d(t,"macAddress",(function(){return _})),s.d(t,"maxLength",(function(){return g})),s.d(t,"minLength",(function(){return y})),s.d(t,"required",(function(){return C})),s.d(t,"requiredIf",(function(){return A})),s.d(t,"requiredUnless",(function(){return S})),s.d(t,"sameAs",(function(){return j})),s.d(t,"url",(function(){return $})),s.d(t,"or",(function(){return w})),s.d(t,"and",(function(){return L})),s.d(t,"not",(function(){return k})),s.d(t,"minValue",(function(){return O})),s.d(t,"maxValue",(function(){return x})),s.d(t,"integer",(function(){return M})),s.d(t,"decimal",(function(){return F})),s.d(t,"helpers",(function(){return o}));var o={};s.r(o),s.d(o,"withParams",(function(){return i})),s.d(o,"req",(function(){return n})),s.d(o,"len",(function(){return r})),s.d(o,"ref",(function(){return l})),s.d(o,"regex",(function(){return d}));var i=s(0).withParams;function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=function(e){if(Array.isArray(e))return!!e.length;if(null==e)return!1;if(!1===e)return!0;if(e instanceof Date)return!isNaN(e.getTime());if("object"===a(e)){for(var t in e)return!0;return!1}return!!String(e).length},r=function(e){return Array.isArray(e)?e.length:"object"===a(e)?Object.keys(e).length:String(e).length},l=function(e,t,s){return"function"==typeof e?e.call(t,s):s[e]},d=function(e,t){return i({type:e},(function(e){return!n(e)||t.test(e)}))},c=d("alpha",/^[a-zA-Z]*$/),u=d("alphaNum",/^[a-zA-Z0-9]*$/),b=d("numeric",/^[0-9]*$/),p=function(e,t){return i({type:"between",min:e,max:t},(function(s){return!n(s)||(!/\s/.test(s)||s instanceof Date)&&+e<=+s&&+t>=+s}))},h=d("email",/^(?:[A-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[A-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9]{2,}(?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i),m=i({type:"ipAddress"},(function(e){if(!n(e))return!0;if("string"!=typeof e)return!1;var t=e.split(".");return 4===t.length&&t.every(f)})),f=function(e){if(e.length>3||0===e.length)return!1;if("0"===e[0]&&"0"!==e)return!1;if(!e.match(/^\d+$/))return!1;var t=0|+e;return t>=0&&t<=255},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:":";return i({type:"macAddress"},(function(t){if(!n(t))return!0;if("string"!=typeof t)return!1;var s="string"==typeof e&&""!==e?t.split(e):12===t.length||16===t.length?t.match(/.{2}/g):null;return null!==s&&(6===s.length||8===s.length)&&s.every(v)}))},v=function(e){return e.toLowerCase().match(/^[0-9a-f]{2}$/)},g=function(e){return i({type:"maxLength",max:e},(function(t){return!n(t)||r(t)<=e}))},y=function(e){return i({type:"minLength",min:e},(function(t){return!n(t)||r(t)>=e}))},C=i({type:"required"},(function(e){return n("string"==typeof e?e.trim():e)})),A=function(e){return i({type:"requiredIf",prop:e},(function(t,s){return!l(e,this,s)||n(t)}))},S=function(e){return i({type:"requiredUnless",prop:e},(function(t,s){return!!l(e,this,s)||n(t)}))},j=function(e){return i({type:"sameAs",eq:e},(function(t,s){return t===l(e,this,s)}))},$=d("url",/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?$/i),w=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return i({type:"or"},(function(){for(var e=this,s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return t.length>0&&t.reduce((function(t,s){return t||s.apply(e,o)}),!1)}))},L=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return i({type:"and"},(function(){for(var e=this,s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return t.length>0&&t.reduce((function(t,s){return t&&s.apply(e,o)}),!0)}))},k=function(e){return i({type:"not"},(function(t,s){return!n(t)||!e.call(this,t,s)}))},O=function(e){return i({type:"minValue",min:e},(function(t){return!n(t)||(!/\s/.test(t)||t instanceof Date)&&+t>=+e}))},x=function(e){return i({type:"maxValue",max:e},(function(t){return!n(t)||(!/\s/.test(t)||t instanceof Date)&&+t<=+e}))},M=d("integer",/(^[0-9]*$)|(^-[0-9]+$)/),F=d("decimal",/^[-]?\d*(\.\d+)?$/)}])}}]);