"use strict";(globalThis.webpackChunkmaps_desktop=globalThis.webpackChunkmaps_desktop||[]).push([[2237],{5264:(t,e,s)=>{s.d(e,{Z:()=>l});const i=new Map;function n(t,e,s){const n=function(i){s.context._isDestroyed?document.removeEventListener("click",n):t.contains(i.target)||t===i.target||e(i)};i.set(t,n),setTimeout((()=>document.addEventListener("click",n)),0)}function o(t){const e=i.get(t);document.removeEventListener("click",e),i.delete(t)}const l={bind(t,{arg:{active:e,handler:s}},i){if("function"!=typeof s)throw new Error("v-click-outside: missing required handler argument.");!0===e&&n(t,s,i)},update(t,{arg:{active:e,handler:s}},l){e&&!i.has(t)?n(t,s,l):!e&&i.has(t)&&o(t)},unbind(t){o(t)}}},9199:(t,e,s)=>{s.r(e),s.d(e,{default:()=>o});var i=s(5908);const n={components:{ActionSheet:s(7335).Z},props:{selectedQuery:{type:String,required:!0},isLoading:{type:Boolean,default:!1}},data:()=>({showLayerSelection:!1,plottedLayers:[]}),computed:{...(0,i.mapGetters)("layers",{layers__plottedLayers:"plottedLayers"}),selectedQueryInfo(){return this.plottedLayers.find((t=>t.qid===this.selectedQuery))||{}},finishedLayers(){return this.layers__plottedLayers.filter((t=>"marker"===t.type&&!1===t.isLoading))}},watch:{finishedLayers(){this.buildQuerySelectList()}},created(){this.buildQuerySelectList()},methods:{...(0,i.mapMutations)("mainNavBar",{mainNavBar__returnToPreviousTab:"returnToPreviousTab",mainNavBar__toggleSubView:"toggleSubView"}),hideMarkerLegend(){this.mainNavBar__toggleSubView({doShow:!1,subView:"legend"}),this.mainNavBar__returnToPreviousTab()},changeSelectedLayer(t){this.$emit("update:selectedQuery",t.qid)},buildQuerySelectList(){if(this.plottedLayers=[],this.finishedLayers.forEach((t=>{this.plottedLayers.push({label:t.name,qid:t.qid})})),""===this.selectedQuery){const[t]=this.plottedLayers;t&&this.changeSelectedLayer(t)}}}},o=(0,s(1900).Z)(n,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"legendTopBar"}},[s("div",{staticClass:"slds-grid tablet-only"},[s("div",{staticClass:"slds-p-around_medium"},[s("div",{staticClass:"slds-text-heading_medium"},[t._v(t._s(t._f("decode")(t.$Labels.MA_MARKER_LEGEND)))])]),t._v(" "),s("div",{staticClass:"slds-col_bump-left slds-p-vertical_small slds-p-right_x-small"},[s("button",{staticClass:"slds-button slds-button_icon slds-button_icon-container  ma-close-button close-legend-panel",on:{click:t.hideMarkerLegend}},[s("span",{staticClass:"slds-button__icon ma-icon ma-icon-close"})])])]),t._v(" "),s("div",{staticClass:"slds-grid"},[s("div",{staticClass:"legendLayerSelector ma-dropdown-wrap ma-dropdown--click slds-p-left_medium slds-p-vertical_small slds-col slds-truncate"},[s("ActionSheet",{attrs:{doDetach:!0,options:t.plottedLayers,buttonText:t.selectedQueryInfo.label,buttonIcon:"ma-icon-down"},on:{select:t.changeSelectedLayer,hide:function(e){t.showLayerSelection=!1}}})],1),t._v(" "),s("div",{staticClass:"slds-col_bump-left slds-p-vertical_small phone-only close-legend-panel slds-p-right_x-small slds-p-left_medium"},[s("button",{staticClass:"slds-button slds-button_icon slds-button_icon-container ma-close-button close-legend-panel",on:{click:t.hideMarkerLegend}},[s("span",{staticClass:"slds-button__icon ma-icon ma-icon-close"})])])])])}),[],!1,null,null,null).exports},7335:(t,e,s)=>{s.d(e,{Z:()=>l});var i=s(5264);const{$:n}=window,o={name:"ActionSheet",directives:{"click-outside":i.Z},props:{options:{type:Array,required:!0},doDetach:{type:Boolean,default:!0},labelKey:{type:String,default:"label"},buttonText:{type:String,default:""},buttonIcon:{type:String,default:""},hideOverride:{type:Boolean,default:!1},selectedItems:{type:Array,default:()=>[]},buttonType:{type:String,default:""}},data:()=>({container:null,showOptions:!1,styleObject:{},window:{height:0,width:0},uid:"action-sheet"}),computed:{isPhone(){return this.window.width<769},computedIcon(){let t="";return""!==this.buttonIcon?t=this.buttonIcon:""===this.buttonText&&(t="ma-icon-threedots-vertical"),t},actionSheetClickOutsideOptions(){return{active:this.showOptions,handler:this.hideActionSheet}}},watch:{isPhone(){this.showOptions=!1}},created(){window.addEventListener("resize",this.handleResize),this.handleResize()},destroyed(){window.removeEventListener("resize",this.handleResize),this.hideActionSheet()},methods:{handleResize(){this.window.width=window.innerWidth,this.window.height=window.innerHeight},returnItem(t){t.isHeader||(this.$emit("select",t),this.hideActionSheet())},hideActionSheet(){this.showOptions=!1,this.container&&(this.container.remove(),this.container=null)},detach(){if(!this.$refs.button)return;const t=document.querySelector(`.slds-scope.${this.uid}`);try{t.remove()}catch(t){}const e=this.$refs.button.getBoundingClientRect();this.container=document.createElement("div"),this.container.className=`slds-scope ${this.uid}`,this.container.appendChild(this.$refs.actions),document.body.appendChild(this.container),this.styleObject={top:`${e.top+this.$refs.button.clientHeight+n(window).scrollTop()}px`,left:`${e.left+n(window).scrollLeft()}px`,"max-height":"300px"}},adjustForClipping(){const t=this.$refs.actions.getBoundingClientRect();let e;if(e=document.documentElement.clientHeight-window.innerHeight<=0?document.documentElement.clientHeight:window.innerHeight-this.getScrollbarWidth(),t.x<0)this.styleObject.left=`${this.$refs.actions.offsetLeft+Math.abs(t.x)}px`;else if(t.left+t.width>document.documentElement.clientWidth){const e=t.left+t.width-document.documentElement.clientWidth-n(window).scrollLeft();this.styleObject.left=t.left-e+"px"}const s=this.$refs.actions.scrollHeight,i=n(window).scrollTop();if(this.styleObject["max-height"]="300px",t.top+s>e){const n=t.top+s-i-e;this.$bus.$emit("ma-modal-scroll-by",n),this.styleObject.top=t.top-n+"px"}},disableClick(t){t.stopPropagation(),t.preventDefault()},openActionSheet(){this.showOptions=!0,this.doDetach&&this.detach(),this.$nextTick((()=>{this.doDetach&&this.adjustForClipping(),this.options.forEach(((t,e)=>{const s=t,i=this.$refs.optionItem[e];s.isHeader&&i.addEventListener("click",this.disableClick,!0)}))}))}}},l=(0,s(1900).Z)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"click-outside",rawName:"v-click-outside:[actionSheetClickOutsideOptions]",arg:t.actionSheetClickOutsideOptions}],staticClass:"action-sheet-wrapper slds-scope"},[s("div",{ref:"button",staticClass:"slds-grid slds-grid_vertical-align-center",on:{click:t.openActionSheet}},[s("div",{staticClass:"slds-button slds-col slds-truncate"},[t._v(t._s(t._f("decode")(t.buttonText)))]),t._v(" "),""!==t.computedIcon?s("div",[s("button",{staticClass:"slds-button slds-button_icon slds-button_icon-container",class:[t.buttonType]},[s("span",{staticClass:"slds-button__icon ma-icon",class:[t.computedIcon]})])]):t._e()]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showOptions,expression:"showOptions"}],ref:"actions",staticClass:"ma-action-sheet-wrap in slds-grid slds-grid_vertical slds-grid_align-end",style:t.isPhone?{}:t.styleObject},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.isPhone,expression:"isPhone"}],staticClass:"action-sheet_mask",on:{click:t.hideActionSheet}}),t._v(" "),s("div",{staticClass:"action-sheet_wrap slds-grid slds-grid_vertical"},[s("div",{staticClass:"action-sheet_content slds-scrollable"},t._l(t.options,(function(e,i){return s("div",{key:i,ref:"optionItem",refInFor:!0,staticClass:"action-sheet_item slds-grid slds-p-around_medium",class:{"header slds-text-title_caps slds-section__title slds-theme--shade":e.isHeader,"slds-is-selected":t.selectedItems.includes(e.id)},on:{click:function(s){return t.returnItem(e)}}},[t._m(0,!0),t._v(" "),s("div",{staticClass:"slds-col"},[s("span",{staticStyle:{"word-break":"break-word"}},[t._v(t._s(t._f("decode")(e[t.labelKey])))])])])})),0),t._v(" "),s("div",{staticClass:"slds-button slds-button_neutral action-sheet_close-button",on:{click:t.hideActionSheet}},[t._v("\n                "+t._s(t._f("decode")(t.$Labels.MA_Close))+"\n            ")])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"action-sheet_selected-icon slds-p-right_medium"},[e("span",{staticClass:"slds-icon slds-icon_x-small ma-icon ma-icon-check"})])}],!1,null,"44c08aa9",null).exports}}]);