"use strict";(globalThis.webpackChunkmaps_desktop=globalThis.webpackChunkmaps_desktop||[]).push([[2580],{2258:(e,a,s)=>{s.r(a),s.d(a,{default:()=>n});var t=s(5908),i=s(3589),l=s(9159);const{MASystem:d,getProperty:c}=window,u={components:{ScheduleRoot:()=>({...(0,i.Z)(),component:s.e(997).then(s.bind(s,2164)),error:l.Z})},data:()=>({showLaborsLaws:!1}),computed:{...(0,t.mapState)("schedule",{schedule__isInitialized:"isInitialized",schedule__scheduleReady:"scheduleReady"}),...(0,t.mapGetters)("mainNavBar",{layers__activeTab:"activeTab"}),...(0,t.mapGetters)("schedule",{schedule__isLoading:"isLoading",schedule__queue:"queue"})},watch:{layers__activeTab(e){"schedule"!==e||this.schedule__isInitialized||this.initSchedule()}},created(){this.$bus.$on("activate-scheduling",this.initSchedule),this.showLaborsLaws=c(d||{},"Organization.LaborLawsNotify",!1)||!1},methods:{...(0,t.mapMutations)("schedule",{schedule__updateInitialized:"updateInitialized",schedule__loadingToggle:"loadingToggle"}),...(0,t.mapMutations)("mainNavBar",{mainNavBar__updateActiveTab:"updateActiveTab"}),...(0,t.mapActions)("schedule",{schedule__buildDayView:"buildDayView"}),initSchedule(e=(()=>{})){const a=this;a.schedule__isInitialized?e():(a.schedule__updateInitialized(),a.getScheduleData({saveEventsState:!1}).finally((()=>{const s=setInterval((()=>{a.schedule__scheduleReady&&(clearInterval(s),e())}),500)})))},getScheduleData({saveEventsState:e=!1,shiftId:a}){return new Promise((s=>{this.schedule__loadingToggle(!0),this.schedule__buildDayView({saveEventsState:e,shiftId:a}).catch((e=>{window.MAToastMessages.showError({message:"Unable to update schedule",subMessage:String(e),timeOut:8e3,closeButton:!0})})).finally((()=>{this.schedule__loadingToggle(!1),s()}))}))}}},n=(0,s(1900).Z)(u,(function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("div",{staticClass:"main-panel view-panel sidebar-panel slds-scope",class:{in:"schedule"===e.layers__activeTab,"labor-law-notification-in":e.showLaborsLaws},attrs:{id:"scheduleWrap"}},[e.schedule__isInitialized?s("div",{directives:[{name:"show",rawName:"v-show",value:"schedule"===e.layers__activeTab,expression:"layers__activeTab === 'schedule'"}],staticClass:"schedule-wrapper slds-grid slds-grid_vertical"},[s("ScheduleRoot",{on:{getScheduleData:e.getScheduleData}})],1):e._e()])}),[],!1,null,"04d42a41",null).exports}}]);