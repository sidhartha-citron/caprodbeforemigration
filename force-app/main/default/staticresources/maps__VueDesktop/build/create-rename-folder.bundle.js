"use strict";(globalThis.webpackChunkmaps_desktop=globalThis.webpackChunkmaps_desktop||[]).push([[82],{5758:(e,s,o)=>{o.r(s),o.d(s,{default:()=>n});var t=o(1515),a=o(257);const r={components:{Spinner:t.$j,Modal:t.u_,TextInput:t.oi},props:{modalOptions:{type:Object,default:()=>{}}},data:()=>({name:"",id:"",isLoading:!1,nodeType:"",isNew:!1}),computed:{modalHeader(){return this.isNew?this.$Labels.Layers_Personal_Folder_Modal_Create_Folder:this.$Labels.MA_Rename}},created(){const{layer:e={},isNew:s=!1}=this.modalOptions;s||(this.name=e.name||""),this.id=e.id||"",this.nodeType=e.nodeType,this.isNew=s},mounted(){try{setTimeout((()=>{this.$refs.nameInput.$el.querySelector("input").focus()}),500)}catch(e){console.warn("please update folder rename modal auto focus:",e)}},methods:{close(){this.$emit("close")},saveChanges(){this.isNew?this.createFolder():this.updateFolder()},updateFolder(){this.isLoading=!0;const e={ajaxResource:"TreeAJAXResources",action:"rename_folder",id:this.id,name:this.name};(new a.Z).setAction("maps.RemoteFunctions.processAJAXRequest").setErrorHandler((e=>{this.isLoading=!1,this.showError(e),this.close()})).invoke([e],(e=>{const{success:s=!1,error:o="Unknown Error"}=e;s?(this.$bus.$emit("refresh-folder"),this.close()):(this.showError(o),this.close()),this.isLoading=!1}),{buffer:!1})},createFolder(){this.isLoading=!0;const e={ajaxResource:"TreeAJAXResources",action:"new_folder",pid:this.id,pos:"0",name:this.name,NodeType:this.nodeType,personUser:"user"};(new a.Z).setAction("maps.RemoteFunctions.processAJAXRequest").setErrorHandler((e=>{this.isLoading=!1,this.showError(e),this.close()})).invoke([e],(e=>{const{success:s=!1,error:o="Unknown Error"}=e;s?(this.$bus.$emit("refresh-folder"),this.close()):(this.showError(o),this.close()),this.isLoading=!1}),{buffer:!1})},showError(e){window.MAToastMessages.showError({message:"Unable to Rename Folder",subMessage:e}),this.isLoading=!1}}},n=(0,o(1900).Z)(r,(function(){var e=this,s=e.$createElement,o=e._self._c||s;return o("Modal",{attrs:{title:e.modalHeader,labels:{close:e.$Labels.MA_Close}},on:{close:e.close}},[o("div",{attrs:{slot:"content"},slot:"content"},[o("Spinner",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}]}),e._v(" "),o("TextInput",{ref:"nameInput",staticClass:"slds-form-element",attrs:{required:"",labels:{name:e.$Labels.Layers_Personal_Folder_Modal_Create_Folder_Name},type:"text"},model:{value:e.name,callback:function(s){e.name=s},expression:"name"}})],1),e._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("button",{staticClass:"slds-button slds-button_neutral",attrs:{disabled:e.isLoading},on:{click:e.close}},[e._v("\n            "+e._s(e.$Labels.Layers_Personal_Folder_Modal_Create_Folder_Button_Cancel)+"\n        ")]),e._v(" "),o("button",{staticClass:"slds-button slds-button_brand",attrs:{disabled:e.isLoading},on:{click:e.saveChanges}},[e._v("\n            "+e._s(e.$Labels.Layers_Personal_Folder_Modal_Create_Folder_Button_Done)+"\n        ")])])])}),[],!1,null,null,null).exports}}]);