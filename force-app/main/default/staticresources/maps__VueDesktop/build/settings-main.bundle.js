"use strict";(globalThis.webpackChunkmaps_desktop=globalThis.webpackChunkmaps_desktop||[]).push([[440],{2681:(t,e,s)=>{s.r(e),s.d(e,{default:()=>y});var i=s(4461),a=s(6342),l=s(1515),o=s(2072);const r={name:"General",data:()=>({proximitySettings:{DefaultProximityType:"Circle",circleRadius:"50",circleRadiusUnits:"MILES",radius:"50",travelDistanceRadius:"50",travelDistanceRadiusUnits:"MILES",travelTimeRadiusMinutes:"",travelTimeRadiusHours:""},distanceUnit:"mi",mobilePlotLimit:1e3,recallMobileSaveState:!1,invertProximity:!1,mapItProximity:!1}),computed:{generalSettings(){return{proximitySettings:this.proximitySettings,distanceUnit:this.distanceUnit,mobilePlotLimit:this.mobilePlotLimit,recallMobileSaveState:this.recallMobileSaveState,invertProximity:this.invertProximity,mapItProximity:this.mapItProximity}},unitTypeReadonlyValue(){return"mi"===this.distanceUnit?this.$Labels.Routes_Miles:this.$Labels.Routes_Kilometers},defaultProximityTypeReadonlyValue(){let t="";switch(this.proximitySettings.DefaultProximityType){case"Circle":t=this.$Labels.Routes_As_Crow_Flies;break;case"travelTime":t=this.$Labels.MA_Travel_Time;break;case"travelDistance":t=this.$Labels.MA_Travel_Distance}return t},circleRadiusUnitsReadonlyValue(){let t="";switch(this.proximitySettings.circleRadiusUnits){case"MILES":t=this.$Labels.Routes_Miles;break;case"KM":t=this.$Labels.Routes_Kilometers;break;case"METERS":t=this.$Labels.MA_Meters;break;case"YARDS":t=this.$Labels.MA_Yards;break;case"FEET":t=this.$Labels.MA_Feet}return t},travelDistanceUnitsReadonlyValue(){let t="";switch(this.proximitySettings.travelDistanceRadiusUnits){case"MILES":t=this.$Labels.Routes_Miles;break;case"KM":t=this.$Labels.Routes_Kilometers;break;case"METERS":t=this.$Labels.MA_Meters;break;case"YARDS":t=this.$Labels.MA_Yards;break;case"FEET":t=this.$Labels.MA_Feet}return t}},watch:{generalSettings(t){this.$emit("update-general-settings",t)}},created(){this.buildGeneralSettings()},methods:{buildGeneralSettings(){const{userSettings:t={}}=window,{defaultProximitySettings:e={},RouteDefaults:s={unit:"mi"}}=t,i={...this.proximitySettings,...e};this.proximitySettings=i;let a=t.mobilePlotLimit||1e3;a=parseInt(window.MA.Util.parseNumberString(String(a)),10),Number.isNaN(a)&&(a=1e3),this.mobilePlotLimit=a,this.recallMobileSaveState=t.recallMobileSaveState||!1,this.mapItProximity=t.MapItProximityOn||!1,this.invertProximity=t.InvertProximity||!1,this.distanceUnit=s.unit||"mi",this.$emit("radius-updated",i.circleRadius)},emitChange(t){window.validateRadiusSetting(t),this.$emit("radius-updated",t)}}};var n=s(1900);const d=(0,n.Z)(r,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"general-tab"}},[s("div",{staticClass:"slds-grid slds-wrap slds-grid--vertical"},[s("div",{staticClass:"slds-size_1-of-1 slds-medium-size_3-of-4 slds-large-size_7-of-12"},[s("div",{staticClass:"slds-form-element"},[s("label",{staticClass:"slds-form-element__label",attrs:{for:"UnitType"}},[t._v(t._s(t.$Labels.MapsSetting_Default_Units))]),t._v(" "),s("div",{staticClass:"slds-form-element__control"},[t.$store.state.defaultSettings.units.overridable?s("div",{staticClass:"slds-select_container"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.distanceUnit,expression:"distanceUnit"}],staticClass:"slds-select",attrs:{id:"UnitType"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.distanceUnit=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"mi"}},[t._v(t._s(t.$Labels.Routes_Miles))]),t._v(" "),s("option",{attrs:{value:"km"}},[t._v(t._s(t.$Labels.Routes_Kilometers))])])]):s("input",{staticClass:"slds-input",attrs:{id:"UnitType",readonly:""},domProps:{value:t.unitTypeReadonlyValue}})])]),t._v(" "),s("div",{staticClass:"slds-form-element"},[s("div",{staticClass:"slds-form-element__control"},[t.$store.state.defaultSettings.invertProximity.overridable?s("span",{staticClass:"slds-checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.invertProximity,expression:"invertProximity"}],attrs:{id:"InvertProximityCheckbox",type:"checkbox",name:"InvertProximityCheckbox",value:"off",onclick:"ChangeVisibilityWhenCircleIsAdded();"},domProps:{checked:Array.isArray(t.invertProximity)?t._i(t.invertProximity,"off")>-1:t.invertProximity},on:{change:function(e){var s=t.invertProximity,i=e.target,a=!!i.checked;if(Array.isArray(s)){var l=t._i(s,"off");i.checked?l<0&&(t.invertProximity=s.concat(["off"])):l>-1&&(t.invertProximity=s.slice(0,l).concat(s.slice(l+1)))}else t.invertProximity=a}}}),t._v(" "),s("label",{staticClass:"slds-checkbox__label",attrs:{for:"InvertProximityCheckbox"}},[s("span",{staticClass:"slds-checkbox_faux"}),t._v(" "),s("span",{staticClass:"slds-form-element__label"},[t._v(t._s(t.$Labels.MapsSetting_Invert_Proximity))])])]):[s("div",{staticClass:"slds-grid"},[s("Icon",{attrs:{category:"utility",name:t.invertProximity?"check":"steps",title:t.invertProximity,size:"x-small",assistiveText:t.invertProximity}}),t._v(" "),s("span",{staticClass:"slds-m-bottom_x-small slds-m-left_small"},[t._v(t._s(t.$Labels.MapsSetting_Invert_Proximity))])],1)]],2)]),t._v(" "),s("div",{staticClass:"slds-form-element"},[s("label",{staticClass:"slds-form-element__label",attrs:{for:"DefaultProximityType"}},[t._v(t._s(t.$Labels.MA_DEFAULT_PROX_TYPE)+":")]),t._v(" "),s("div",{staticClass:"slds-form-element__control"},[t.$store.state.defaultSettings.defaultProximityType.overridable?s("div",{staticClass:"slds-select_container"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.proximitySettings.DefaultProximityType,expression:"proximitySettings.DefaultProximityType"}],staticClass:"slds-select proximitytype",attrs:{id:"DefaultProximityType"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.proximitySettings,"DefaultProximityType",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"Circle"}},[t._v(t._s(t.$Labels.Routes_As_Crow_Flies))]),t._v(" "),s("option",{attrs:{value:"travelTime"}},[t._v(t._s(t.$Labels.MA_Travel_Time))]),t._v(" "),s("option",{attrs:{value:"travelDistance"}},[t._v(t._s(t.$Labels.MA_Travel_Distance))])])]):s("input",{staticClass:"slds-input",attrs:{id:"DefaultProximityType",readonly:""},domProps:{value:t.defaultProximityTypeReadonlyValue}})])]),t._v(" "),s("div",{staticClass:"prox-options"},[s("div",{directives:[{name:"show",rawName:"v-show",value:"Circle"===t.proximitySettings.DefaultProximityType,expression:"proximitySettings.DefaultProximityType === 'Circle'"}],staticClass:"slds-form slds-form_stacked slds-grid slds-grid_pull-padded-medium options-circle prox-option"},[s("div",{staticClass:"slds-col slds-size_1-of-2 slds-p-horizontal_medium "},[s("label",{staticClass:"slds-form-element__label",attrs:{for:"ProximityRadius"}},[t._v(t._s(t.$Labels.MapsSetting_Radius))]),t._v(" "),s("div",{staticClass:"slds-form-element__control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.proximitySettings.circleRadius,expression:"proximitySettings.circleRadius"}],staticClass:"slds-input options-circle-radius",attrs:{id:"ProximityRadius",type:"text",readonly:!t.$store.state.defaultSettings.defaultProximityType.overridable},domProps:{value:t.proximitySettings.circleRadius},on:{input:[function(e){e.target.composing||t.$set(t.proximitySettings,"circleRadius",e.target.value)},function(e){return t.emitChange(e.target.value)}]}})]),t._v(" "),s("div",{staticClass:"radiusError slds-form-element__help",staticStyle:{display:"none"}},[t._v("\n                            "+t._s(t.$Labels.MapsSetting_Radius_Error)+"\n                        ")])]),t._v(" "),s("div",{staticClass:"slds-col slds-size_1-of-2 slds-p-horizontal_medium"},[s("label",{staticClass:"slds-form-element__label",attrs:{for:"ProximityRadiusMeasurementType"}},[t._v(t._s(t.$Labels.MA_UNITS))]),t._v(" "),s("div",{staticClass:"slds-form-element__control"},[t.$store.state.defaultSettings.defaultProximityType.overridable?s("div",{staticClass:"slds-select_container"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.proximitySettings.circleRadiusUnits,expression:"proximitySettings.circleRadiusUnits"}],staticClass:"slds-select options-circle-unit",attrs:{id:"ProximityRadiusMeasurementType"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.proximitySettings,"circleRadiusUnits",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"MILES"}},[t._v(t._s(t.$Labels.Routes_Miles))]),t._v(" "),s("option",{attrs:{value:"KM"}},[t._v(t._s(t.$Labels.Routes_Kilometers))]),t._v(" "),s("option",{attrs:{value:"METERS"}},[t._v(t._s(t.$Labels.MA_Meters))]),t._v(" "),s("option",{attrs:{value:"YARDS"}},[t._v(t._s(t.$Labels.MA_Yards))]),t._v(" "),s("option",{attrs:{value:"FEET"}},[t._v(t._s(t.$Labels.MA_Feet))])])]):s("input",{staticClass:"slds-input",attrs:{id:"ProximityRadiusMeasurementType",readonly:""},domProps:{value:t.circleRadiusUnitsReadonlyValue}})])])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"travelDistance"===t.proximitySettings.DefaultProximityType,expression:"proximitySettings.DefaultProximityType === 'travelDistance'"}],staticClass:"slds-form slds-form_stacked slds-grid slds-grid_pull-padded-medium prox-option",attrs:{id:"proximity-travel-distance"}},[s("div",{staticClass:"slds-col slds-size_1-of-2 slds-p-horizontal_medium"},[s("label",{staticClass:"slds-form-element__label",attrs:{for:"TravelDistanceRadius"}},[t._v(t._s(t.$Labels.MapsSetting_Radius))]),t._v(" "),s("div",{staticClass:"slds-form-element__control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.proximitySettings.travelDistanceRadius,expression:"proximitySettings.travelDistanceRadius"}],staticClass:"slds-input travel-distance-radius",attrs:{id:"TravelDistanceRadius",type:"text",placeholder:"0",readonly:!t.$store.state.defaultSettings.defaultProximityType.overridable},domProps:{value:t.proximitySettings.travelDistanceRadius},on:{input:function(e){e.target.composing||t.$set(t.proximitySettings,"travelDistanceRadius",e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"slds-col slds-size_1-of-2 slds-p-horizontal_medium"},[s("label",{staticClass:"slds-form-element__label",attrs:{for:"TravelDistanceUnits"}},[t._v(t._s(t.$Labels.MA_UNITS))]),t._v(" "),s("div",{staticClass:"slds-form-element__control"},[t.$store.state.defaultSettings.defaultProximityType.overridable?s("div",{staticClass:"slds-select_container"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.proximitySettings.travelDistanceRadiusUnits,expression:"proximitySettings.travelDistanceRadiusUnits"}],staticClass:"slds-select travel-distance-units",attrs:{id:"TravelDistanceUnits"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.proximitySettings,"travelDistanceRadiusUnits",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"MILES"}},[t._v(t._s(t.$Labels.Routes_Miles))]),t._v(" "),s("option",{attrs:{value:"KM"}},[t._v(t._s(t.$Labels.Routes_Kilometers))]),t._v(" "),s("option",{attrs:{value:"METERS"}},[t._v(t._s(t.$Labels.MA_Meters))]),t._v(" "),s("option",{attrs:{value:"YARDS"}},[t._v(t._s(t.$Labels.MA_Yards))]),t._v(" "),s("option",{attrs:{value:"FEET"}},[t._v(t._s(t.$Labels.MA_Feet))])])]):s("input",{staticClass:"slds-input",attrs:{id:"TravelDistanceUnits",readonly:""},domProps:{value:t.travelDistanceUnitsReadonlyValue}})])])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"travelTime"===t.proximitySettings.DefaultProximityType,expression:"proximitySettings.DefaultProximityType === 'travelTime'"}],staticClass:"slds-form slds-form_stacked prox-option",attrs:{id:"proximity-travel-time"}},[s("div",{staticClass:"slds-grid slds-grid_pull-padded-medium"},[s("div",{staticClass:"slds-form-element__control slds-col slds-p-horizontal_medium"},[s("label",{staticClass:"slds-form-element__label",attrs:{for:"travelTimeHours"}},[t._v(t._s(t.$Labels.MA_hours))]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.proximitySettings.travelTimeRadiusHours,expression:"proximitySettings.travelTimeRadiusHours"}],staticClass:"slds-input numberVal radius-hours prox-style",attrs:{id:"travelTimeHours",type:"text",placeholder:"0",readonly:!t.$store.state.defaultSettings.defaultProximityType.overridable},domProps:{value:t.proximitySettings.travelTimeRadiusHours},on:{input:function(e){e.target.composing||t.$set(t.proximitySettings,"travelTimeRadiusHours",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"slds-form-element__control slds-col slds-p-horizontal_medium"},[s("label",{staticClass:"slds-form-element__label",attrs:{for:"travelTimeMinutes"}},[t._v(t._s(t.$Labels.MA_minutes))]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.proximitySettings.travelTimeRadiusMinutes,expression:"proximitySettings.travelTimeRadiusMinutes"}],staticClass:"slds-input numberVal radius-minutes prox-style",attrs:{id:"travelTimeMinutes",type:"text",placeholder:"0",readonly:!t.$store.state.defaultSettings.defaultProximityType.overridable},domProps:{value:t.proximitySettings.travelTimeRadiusMinutes},on:{input:function(e){e.target.composing||t.$set(t.proximitySettings,"travelTimeRadiusMinutes",e.target.value)}}})])])])])])])])}),[],!1,null,null,null).exports;var c=s(5262);const{moment:u}=window,m={components:{Picklist:l.Gp,Checkbox:l.XZ,Tooltip:l.u,TimePicker:l.jI},data(){return{transportationMode:"driving",optimizationType:"fastest shift completion",startLocation:{label:"",value:""},endLocation:{label:"",value:""},enableDuplicateStops:!0,routeType:"Standard",routeStart:"9:00 am",routeEnd:"5:00 pm",stopDuration:"0 hr, 30 min",timeOptions:[],durationOptions:[],transportationModes:[{value:"driving",label:this.$Labels.MA_DRIVING},{value:"walking",label:this.$Labels.MA_WALKING},{value:"bicycling",label:this.$Labels.MA_Bicycle}],optimizationTypes:[{value:"fastest shift completion",label:this.$Labels.MA_Fastest_Shift_Completion},{value:"least windshield time",label:this.$Labels.MA_Least_Windshield_Time}],routeTypes:[{value:"Standard",label:this.$Labels.MA_Standard},{value:"TimeBased",label:this.$Labels.MA_Time_Based_Route}],searches:[{options:async t=>{const{results:e}=await c.Z.searchFavorites(t);return e}}],workingHours:{sunday:{startHour:9,startMinute:0,convertedStart:"9:00 am",endHour:17,endMinute:0,convertedEnd:"5:00 pm",overnight:!1,workingDay:!0,label:this.$Labels.MA_Sunday},monday:{startHour:9,startMinute:0,convertedStart:"9:00 am",endHour:17,endMinute:0,convertedEnd:"5:00 pm",overnight:!1,workingDay:!0,label:this.$Labels.MA_Monday},tuesday:{startHour:9,startMinute:0,convertedStart:"9:00 am",endHour:17,endMinute:0,convertedEnd:"5:00 pm",overnight:!1,workingDay:!0,label:this.$Labels.MA_Tuesday},wednesday:{startHour:9,startMinute:0,convertedStart:"9:00 am",endHour:17,endMinute:0,convertedEnd:"5:00 pm",overnight:!1,workingDay:!0,label:this.$Labels.MA_Wednesday},thursday:{startHour:9,startMinute:0,convertedStart:"9:00 am",endHour:17,endMinute:0,convertedEnd:"5:00 pm",overnight:!1,workingDay:!0,label:this.$Labels.MA_Thursday},friday:{startHour:9,startMinute:0,convertedStart:"9:00 am",endHour:17,endMinute:0,convertedEnd:"5:00 pm",overnight:!1,workingDay:!0,label:this.$Labels.MA_Friday},saturday:{startHour:9,startMinute:0,convertedStart:"9:00 am",endHour:17,endMinute:0,convertedEnd:"5:00 pm",overnight:!1,workingDay:!0,label:this.$Labels.MA_Saturday}},hasOverNightWorkingHours:!1,breakInformation:{enabled:!1,endHour:12,endMinute:0,startHour:11,startMinute:0,convertedStart:"11:00 am",convertedEnd:"12:00 pm",startInvalid:!1,endInvalid:!1}}},computed:{routeSettings(){return{transportationMode:this.transportationMode,optimizationType:this.optimizationType,startLocation:this.startLocation,endLocation:this.endLocation,routeStart:this.routeStart,routeType:this.routeType,routeEnd:this.routeEnd,stopDuration:this.stopDuration,enableDuplicateStops:this.enableDuplicateStops,enableCurrentLocationTime:this.enableCurrentLocationTime,workingHours:this.workingHours,breakInformation:this.breakInformation}},breakInformationError(){return this.breakInformation.startInvalid||this.breakInformation.endInvalid?[this.$Labels.routes_Settings_Break_Validation]:[]}},watch:{routeSettings(t){this.$emit("update-route-settings",t)}},created(){this.buildTimeOptions(),this.buildDurationOptions(),this.parseRouteSettings(),this.buildDriveProfiles()},methods:{getSelectReadOnlyValue:(t,e,s="value")=>e.filter((e=>e[s]===t))[0].label,parseRouteSettings(){const{userSettings:t={}}=window,{RouteDefaults:e={}}=t,{driveProfile:s,optimizationType:i}=e,a=s||"driving";this.transportationMode=a;const l=i||"fastest shift completion";if(this.optimizationType=l,this.startLocation={label:e.startLocationLabel||"",id:e.startLocationId||""},this.endLocation={label:e.endLocationLabel||"",id:e.endLocationId||""},this.enableDuplicateStops="true"===String(e.enabledDuplicateStops),this.routeType=e.type||"Standard",t.workingHours)Object.keys(t.workingHours).forEach((e=>{const s=t.workingHours[e],i=this.workingHours[e],a=u(`${s.startHour}:${s.startMinute}`,"H:m");i.convertedStart=a.format("h:mm a"),i.startHour=Number(a.format("H")),i.startMinute=Number(a.format("m"));const l=u(`${s.endHour}:${s.endMinute}`,"H:m");i.convertedEnd=l.format("h:mm a"),i.endHour=Number(l.format("H")),i.endMinute=Number(l.format("m")),l.isBefore(a)&&(i.overnight=!0,this.hasOverNightWorkingHours=!0),i.workingDay=!0===s.workingDay}));else{const t=e.start||"9:00 am",s=e.end||"5:00 pm",i=u(t,"h:mm a"),a=u(s,"h:mm a");Object.keys(this.workingHours).forEach((e=>{const l=this.workingHours[e];l.startHour=Number(i.format("H")),l.startMinute=Number(i.format("m")),l.convertedStart=t,l.endHour=Number(a.format("H")),l.endMinute=Number(a.format("m")),l.convertedEnd=s,l.workingDay=!0}))}if(t.floatingBreak){const{floatingBreak:e}=t;this.breakInformation.enabled=e.enabled,this.breakInformation.startMinute=e.startMinute,this.breakInformation.startHour=e.startHour,this.breakInformation.endMinute=e.endMinute,this.breakInformation.endHour=e.endHour;const s=u(`${e.startHour}:${e.startMinute}`,"H:m");this.breakInformation.convertedStart=s.format("h:mm a");const i=u(`${e.endHour}:${e.endMinute}`,"H:m");this.breakInformation.convertedEnd=i.format("h:mm a")}this.stopDuration=e.duration||"0 hr, 30 min";const o=void 0===e.enableCurrentLocationTime||e.enableCurrentLocationTime;this.enableCurrentLocationTime="true"===String(o)},buildDurationOptions(){let t=5;for(;t<360;){const e=`${Math.floor(t/60)} ${this.$Labels.MA_Hr_Singular}, ${t%60} ${this.$Labels.MA_Min_Singular}`;this.durationOptions.push({label:e,id:e}),t+=5}},buildTimeOptions(t){t=t||30;const e=window.moment().startOf("day"),s=e.day();for(this.showDuration&&this.timeOptions.push({id:this.$Labels.MA_Set_Start,label:"N/A"});e.day()===s;)this.timeOptions.push({id:e.format("h:mm a"),label:e.format("h:mm a")}),e.add(t,"m")},buildDriveProfiles(){(0,i.wX)("maps.RemoteFunctions.processAJAXRequest",[{ajaxResource:"RouteCalendarAJAXResources",action:"getDriveProfiles"}]).then((t=>{const{success:e=!1,data:s={}}=t;if(e){const{driveProfiles:t=[]}=s;t.forEach((t=>{this.transportationModes.push({label:t.Name,value:t.Id})}))}else console.warn("error getting drive profiles",t);let i=this.transportationMode;0===this.transportationModes.filter((t=>t.value===i)).length&&(i="driving"),this.transportationMode=i}))},clearStartSearch(){this.startLocation={label:"",id:""}},clearEndSearch(){this.endLocation={label:"",id:""}},setStartLocation(t){this.startLocation={label:t.Name,id:t.Id}},setEndLocation(t){this.endLocation={label:t.Name,id:t.Id}},updateBreak(t,e){this.breakInformation.startInvalid=!1,this.breakInformation.endInvalid=!1;const s=u.utc(`${this.breakInformation.startHour}:${this.breakInformation.startMinute}`,"H:m"),i=u.utc(`${this.breakInformation.endHour}:${this.breakInformation.endMinute}`,"H:m"),a=u.utc(t,"h:mm a",!0);a.isValid()?"start"===e?(a.isAfter(i)&&(this.breakInformation.startInvalid=!0),this.breakInformation.startHour=Number(a.format("H")),this.breakInformation.startMinute=Number(a.format("m"))):"end"===e&&(a.isBefore(s)&&(this.breakInformation.endInvalid=!0),this.breakInformation.endHour=Number(a.format("H")),this.breakInformation.endMinute=Number(a.format("m"))):this.rebuildBreakTime(e)},rebuildBreakTime(t){let e;if("start"===t){const t=`${this.breakInformation.startHour}:${this.breakInformation.startMinute}`;e=u(t,"H:m").format("h:mm a")}else{const t=`${this.breakInformation.endHour}:${this.breakInformation.endMinute}`;e=u(t,"H:m").format("h:mm a")}this.$nextTick((()=>{"start"===t?this.breakInformation.convertedStart=e:this.breakInformation.convertedEnd=e}))},selectTime(t,e,s){const i=u(t,"h:mm a",!0),a=this.workingHours[e];if(i.isValid())"start"===s?(a.startHour=Number(i.format("H")),a.startMinute=Number(i.format("m"))):(a.endHour=Number(i.format("H")),a.endMinute=Number(i.format("m")));else{const t=this.convertWorkingHours(e,s);this.$nextTick((()=>{"start"===s?a.convertedStart=t:a.convertedEnd=t}))}const l=u(`${a.startHour}:${a.startMinute}`,"H:m");u(`${a.endHour}:${a.endMinute}`,"H:m").isBefore(l)?(a.overnight=!0,this.hasOverNightWorkingHours=!0):(a.overnight=!1,this.checkOverNightStatus())},checkOverNightStatus(){const t=Object.keys(this.workingHours);let e=!1;for(let s=0;s<t.length;s++){const i=t[s];if(this.workingHours[i].overnight){e=!0;break}}this.hasOverNightWorkingHours=e},convertWorkingHours(t,e){const s=this.workingHours[t];let i;if("start"===e){const t=`${s.startHour}:${s.startMinute}`;i=u(t,"H:m").format("h:mm a")}else{const t=`${s.endHour}:${s.endMinute}`;i=u(t,"H:m").format("h:mm a")}return i}}},_=(0,n.Z)(m,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"Routing-Settings"}},[s("div",{staticClass:"slds-section slds-is-open"},[s("h3",{staticClass:"slds-section__title slds-theme_shade"},[s("span",{staticClass:"slds-truncate slds-p-horizontal_small"},[t._v(t._s(t.$Labels.MapsSetting_General))])]),t._v(" "),s("div",{staticClass:"slds-grid slds-wrap slds-grid--vertical slds-p-left_small slds-p-top_small"},[s("div",{staticClass:"slds-size_1-of-1 slds-medium-size_3-of-4 slds-large-size_7-of-12"},[s("div",{staticClass:"slds-form-element"},[s("label",{staticClass:"slds-form-element__label",attrs:{for:"RouteMode"}},[t._v(t._s(t.$Labels.MA_Default_Transportation_Mode))]),t._v(" "),s("div",{staticClass:"slds-form-element__control"},[t.$store.state.defaultSettings.defaultTransportationMode.overridable?s("div",{staticClass:"slds-select_container"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.transportationMode,expression:"transportationMode"}],staticClass:"slds-select",attrs:{id:"RouteMode"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.transportationMode=e.target.multiple?s:s[0]}}},t._l(t.transportationModes,(function(e,i){return s("option",{key:i,domProps:{value:e.value}},[t._v("\n                                    "+t._s(e.label)+"\n                                ")])})),0)]):s("input",{staticClass:"slds-input",attrs:{id:"RouteMode",readonly:""},domProps:{value:t.getSelectReadOnlyValue(t.transportationMode,t.transportationModes)}})])]),t._v(" "),s("div",{staticClass:"slds-form-element"},[s("label",{staticClass:"slds-form-element__label slds-grid"},[t._v(t._s(t.$Labels.routes_Settings_OptimizeBy))]),t._v(" "),s("Tooltip",{staticClass:"slds-form-element__icon",attrs:{alignment:"top right"}},[s("div",[s("span",{staticClass:"bold"},[t._v(t._s(t.$Labels.MA_Fastest_Shift_Completion))]),t._v(": "+t._s(t.$Labels.routes_Settings_Earliest_Text)+"\n                            "),s("br"),t._v(" "),s("br"),t._v(" "),s("span",{staticClass:"bold"},[t._v(t._s(t.$Labels.MA_Least_Windshield_Time))]),t._v(": "+t._s(t.$Labels.routes_Settings_Shortest_Text)+"\n                            "),s("br"),t._v(" "),s("br"),t._v(" "),s("span",{staticStyle:{"font-style":"italic"}},[s("a",{attrs:{href:"https://help.salesforce.com/articleView?id=salesforce_maps_intro.htm&type=5",target:"_blank"}},[t._v("\n                                    "+t._s(t.$Labels.routes_Settings_Learn_Optimization)+"\n                                ")])])])]),t._v(" "),s("div",{staticClass:"slds-form-element__control"},[t.$store.state.defaultSettings.optimizationMethod.overridable?s("div",{staticClass:"slds-select_container"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.optimizationType,expression:"optimizationType"}],staticClass:"slds-select",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.optimizationType=e.target.multiple?s:s[0]}}},t._l(t.optimizationTypes,(function(e,i){return s("option",{key:i,domProps:{value:e.value}},[t._v("\n                                    "+t._s(e.label)+"\n                                ")])})),0)]):s("input",{staticClass:"slds-input",attrs:{readonly:""},domProps:{value:t.getSelectReadOnlyValue(t.optimizationType,t.optimizationTypes)}})])],1),t._v(" "),s("div",{staticClass:"slds-form-element edit-default-location"},[s("label",{staticClass:"slds-form-element__label",attrs:{for:"MAStartLocation"}},[t._v(t._s(t.$Labels.MA_Default_Start_Location))]),t._v(" "),s("div",{staticClass:"slds-grid slds-grid_vertical-align-center slds-form-element__control"},[t._m(0),t._v(" "),s("Picklist",{ref:"MASearchStart",staticClass:"search-full-width",attrs:{filterable:"",options:t.searches,titleKey:"Name",idKey:"Id",disabled:!t.$store.state.defaultSettings.defaultStartLocation.overridable,labels:{search:t.$Labels.MA_Search_Fav_Loc,noSearchResults:t.$Labels.MA_NO_RESULTS_FOUND}},on:{clear:t.clearStartSearch,"selected-option":t.setStartLocation},scopedSlots:t._u([{key:"result",fn:function(e){return s("span",{staticClass:"slds-listbox__option-text_entity slds-listbox__option slds-listbox__option_plain",attrs:{id:"listbox-option-unique-id-01"}},[t._v("\n                                "+t._s(t._f("decode")(e.result.Name))+"\n                            ")])}}]),model:{value:t.startLocation.label,callback:function(e){t.$set(t.startLocation,"label",e)},expression:"startLocation.label"}})],1)]),t._v(" "),s("div",{staticClass:"slds-form-element edit-default-location"},[s("label",{staticClass:"slds-form-element__label",attrs:{for:"MAEndLocation"}},[t._v(t._s(t.$Labels.MA_Default_End_Location))]),t._v(" "),s("div",{staticClass:"slds-grid slds-grid_vertical-align-center slds-form-element__control"},[t._m(1),t._v(" "),s("Picklist",{ref:"MASearchEnd",staticClass:"search-full-width",attrs:{filterable:"",options:t.searches,titleKey:"Name",idKey:"Id",disabled:!t.$store.state.defaultSettings.defaultEndLocation.overridable,labels:{search:t.$Labels.MA_Search_Fav_Loc,noSearchResults:t.$Labels.MA_NO_RESULTS_FOUND}},on:{clear:t.clearEndSearch,"selected-option":t.setEndLocation},scopedSlots:t._u([{key:"result",fn:function(e){return s("span",{staticClass:"slds-listbox__option-text_entity slds-listbox__option slds-listbox__option_plain",attrs:{id:"listbox-option-unique-id-01"}},[t._v("\n                                "+t._s(t._f("decode")(e.result.Name))+"\n                            ")])}}]),model:{value:t.endLocation.label,callback:function(e){t.$set(t.endLocation,"label",e)},expression:"endLocation.label"}})],1)])]),t._v(" "),s("div",{staticClass:"slds-size_1-of-1 slds-medium-size_3-of-4 slds-large-size_7-of-12"},[s("div",{staticClass:"slds-form-element"},[s("label",{staticClass:"slds-form-element__label",attrs:{for:"RouteMode"}},[t._v(t._s(t.$Labels.MA_Label_Default_Route_Type))]),t._v(" "),s("div",{staticClass:"slds-form-element__control"},[t.$store.state.defaultSettings.routeType.overridable?s("div",{staticClass:"slds-select_container"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.routeType,expression:"routeType"}],staticClass:"slds-select timedefaults-routetype",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.routeType=e.target.multiple?s:s[0]}}},t._l(t.routeTypes,(function(e,i){return s("option",{key:i,domProps:{value:e.value}},[t._v("\n                                    "+t._s(e.label)+"\n                                ")])})),0)]):s("input",{staticClass:"slds-input",attrs:{readonly:""},domProps:{value:t.getSelectReadOnlyValue(t.routeType,t.routeTypes)}})])]),t._v(" "),s("div",{staticClass:"slds-form-element"},[s("label",{staticClass:"slds-form-element__label",attrs:{for:"select-01"}},[t._v(t._s(t.$Labels.MA_Default_Event_Duration))]),t._v(" "),s("div",{staticClass:"slds-form-element__control"},[t.$store.state.defaultSettings.stopEventDuration.overridable?s("div",{staticClass:"slds-select_container"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.stopDuration,expression:"stopDuration"}],staticClass:"timedefaults-appointmentduration slds-select",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.stopDuration=e.target.multiple?s:s[0]}}},t._l(t.durationOptions,(function(e,i){return s("option",{key:i,domProps:{value:e.id}},[t._v("\n                                    "+t._s(e.label)+"\n                                ")])})),0)]):s("input",{staticClass:"slds-input",attrs:{readonly:""},domProps:{value:t.getSelectReadOnlyValue(t.stopDuration,t.durationOptions,"id")}})])])]),t._v(" "),s("div",{staticClass:"slds-form-element"},[s("div",{staticClass:"slds-form-element__control"},[t.$store.state.defaultSettings.enableDuplicateStops.overridable?s("span",{staticClass:"slds-checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.enableDuplicateStops,expression:"enableDuplicateStops"}],attrs:{id:"enable-duplicate-stops",type:"checkbox",name:"enable-duplicate-stops"},domProps:{checked:Array.isArray(t.enableDuplicateStops)?t._i(t.enableDuplicateStops,null)>-1:t.enableDuplicateStops},on:{change:function(e){var s=t.enableDuplicateStops,i=e.target,a=!!i.checked;if(Array.isArray(s)){var l=t._i(s,null);i.checked?l<0&&(t.enableDuplicateStops=s.concat([null])):l>-1&&(t.enableDuplicateStops=s.slice(0,l).concat(s.slice(l+1)))}else t.enableDuplicateStops=a}}}),t._v(" "),s("label",{staticClass:"slds-checkbox__label",attrs:{for:"enable-duplicate-stops"}},[s("span",{staticClass:"slds-checkbox_faux"}),t._v(" "),s("span",{staticClass:"slds-form-element__label"},[t._v(t._s(t.$Labels.routes_Settings_Enable_Duplicate_Stops))])])]):[s("Icon",{attrs:{title:t.enableDuplicateStops,size:"x-small",category:"utility",name:t.enableDuplicateStops?"check":"steps",assistiveText:t.enableDuplicateStops}}),t._v(" "),s("span",{staticClass:"slds-form-element__label slds-m-left_x-small"},[t._v(t._s(t.$Labels.routes_Settings_Enable_Duplicate_Stops))])]],2)])])]),t._v(" "),s("div",{staticClass:"slds-section slds-is-open"},[s("h3",{staticClass:"slds-section__title slds-theme_shade"},[s("span",{staticClass:"slds-truncate slds-p-horizontal_small"},[t._v(t._s(t.$Labels.MA_Shift_Times))])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.hasOverNightWorkingHours,expression:"hasOverNightWorkingHours"}],staticClass:"ma-message-notification slds-inline_icon_text slds-grid slds-box slds-theme_shade slds-m-around_small"},[t._m(2),t._v(" "),s("div",{staticClass:"slds-col slds-align-middle"},[s("p",[t._v(t._s(t.$Labels.routes_Settings_Time_Validation))])])]),t._v(" "),s("div",{staticClass:"slds-grid slds-wrap slds-grid--vertical slds-p-left_small slds-p-top_small"},t._l(t.workingHours,(function(e,i){return s("div",{key:i,staticClass:"slds-grid"},[s("div",{staticClass:"slds-col"},[s("div",{staticClass:"slds-form-element"},[s("div",{staticClass:"slds-form-element__control",staticStyle:{width:"130px"}},[s("div",{staticClass:"slds-checkbox"},[s("label",{staticClass:"slds-checkbox__label",attrs:{for:i+"_workingDay"}},[s("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"slds-checkbox_faux"}),t._v(" "),s("span",{staticClass:"slds-form-element__label",staticStyle:{"text-transform":"capitalize","line-height":"30px"}},[t._v(t._s(e.label))])])])])])]),t._v(" "),s("div",{staticClass:"slds-col"},[s("div",{staticClass:"slds-form-element inline slds-p-right_small time-based-start-select-wrap"},[t.$store.state.defaultSettings.schedule[i].overridable?s("TimePicker",{attrs:{combobox:"",start:e.convertedStart},on:{changed:function(e){return t.selectTime(e,i,"start")}},model:{value:e.convertedStart,callback:function(s){t.$set(e,"convertedStart",s)},expression:"dayInfo.convertedStart"}}):s("div",{staticClass:"slds-form-element__control slds-input-has-icon slds-input-has-icon_right search-full-width"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.convertedStart,expression:"dayInfo.convertedStart"}],staticClass:"slds-input",attrs:{type:"text",placeholder:"9:00 am",disabled:""},domProps:{value:e.convertedStart},on:{input:function(s){s.target.composing||t.$set(e,"convertedStart",s.target.value)}}}),t._v(" "),s("Icon",{attrs:{category:"utility",name:"clock",iconClass:["slds-input__icon","slds-input__icon_left"]}})],1)],1)]),t._v(" "),s("div",{staticClass:"slds-col"},[s("div",{staticClass:"slds-form-element inline slds-p-right_small time-based-start-select-wrap"},[t.$store.state.defaultSettings.schedule[i].overridable?s("TimePicker",{attrs:{combobox:"",start:e.convertedEnd},on:{changed:function(e){return t.selectTime(e,i,"end")}},model:{value:e.convertedEnd,callback:function(s){t.$set(e,"convertedEnd",s)},expression:"dayInfo.convertedEnd"}}):s("div",{staticClass:"slds-form-element__control slds-input-has-icon slds-input-has-icon_right search-full-width"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.convertedEnd,expression:"dayInfo.convertedEnd"}],staticClass:"slds-input",attrs:{type:"text",placeholder:"5:00 pm",disabled:""},domProps:{value:e.convertedEnd},on:{input:function(s){s.target.composing||t.$set(e,"convertedEnd",s.target.value)}}}),t._v(" "),s("Icon",{attrs:{category:"utility",name:"clock",iconClass:["slds-input__icon","slds-input__icon_left"]}})],1)],1)]),t._v(" "),e.overnight?s("div",{staticClass:"slds-col",staticStyle:{"line-height":"24px"}},[t._v("\n                    * "+t._s(t.$Labels.routes_Settings_Time_Notification)+"\n                ")]):t._e()])})),0)]),t._v(" "),s("div",{staticClass:"slds-section slds-is-open"},[s("h3",{staticClass:"slds-section__title slds-theme_shade"},[s("span",{staticClass:"slds-truncate slds-p-horizontal_small"},[t._v(t._s(t.$Labels.MA_Break_Information))])]),t._v(" "),s("div",{staticClass:"slds-p-left_small slds-p-top_small"},[s("Checkbox",{attrs:{disabled:!t.$store.state.defaultSettings.includeBreak.overridable,labels:{name:t.$Labels.MA_Include_Break}},model:{value:t.breakInformation.enabled,callback:function(e){t.$set(t.breakInformation,"enabled",e)},expression:"breakInformation.enabled"}})],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.breakInformation.enabled,expression:"breakInformation.enabled"}],staticClass:"slds-grid slds-wrap slds-grid--vertical slds-p-left_small slds-p-top_small"},[s("div",{staticClass:"slds-grid"},[s("div",{staticClass:"slds-col"},[s("div",{staticClass:"slds-form-element inline slds-p-right_small time-based-start-select-wrap"},[s("Picklist",{attrs:{options:t.timeOptions,errors:t.breakInformationError,combobox:"",disabled:!t.$store.state.defaultSettings.shiftBreakHours.overridable,titleKey:"label"},on:{changed:function(e){return t.updateBreak(e,"start")}},model:{value:t.breakInformation.convertedStart,callback:function(e){t.$set(t.breakInformation,"convertedStart",e)},expression:"breakInformation.convertedStart"}})],1)]),t._v(" "),s("div",{staticClass:"slds-col"},[s("div",{staticClass:"slds-form-element inline slds-p-right_small time-based-start-select-wrap"},[s("Picklist",{attrs:{options:t.timeOptions,combobox:"",disabled:!t.$store.state.defaultSettings.shiftBreakHours.overridable,titleKey:"label"},on:{changed:function(e){return t.updateBreak(e,"end")}},model:{value:t.breakInformation.convertedEnd,callback:function(e){t.$set(t.breakInformation,"convertedEnd",e)},expression:"breakInformation.convertedEnd"}})],1)])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"routes-start-destination slds-p-right_small slds-p-bottom_small"},[e("span",{staticClass:"ma-icon ma-icon-priority"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"routes-end-destination slds-p-right_small slds-p-bottom_small"},[e("span",{staticClass:"ma-icon ma-icon-goal"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",{staticClass:"ma-icon ma-icon-info",staticStyle:{"font-size":"26px",width:"26px","line-height":"1",height:"26px","padding-right":"8px"}})])}],!1,null,"de076c12",null).exports;var v=s(9980),p=s.n(v);const{getProperty:b}=window,f={components:{draggable:p()},data:()=>({available:[],visible:[],pageSize:"50"}),computed:{listSettings(){return{visibleList:this.visible,pageSize:this.pageSize}}},watch:{listSettings(t){this.$emit("update-list-settings",t)}},created(){this.buildListViewColumns()},methods:{buildListViewColumns(){const t=b(window,"userSettings.PageSizeDefault",!1)||"50";this.pageSize=t;const e={...window.MAListView.ListViewColumns};let s=!0;window.userSettings.ListViewColumns?s=!1:window.userSettings.ListViewColumns=window.MAListView.DefaultListViewColumns,Object.keys(window.userSettings.ListViewColumns).forEach((t=>{const i=window.userSettings.ListViewColumns[t],a=window.MAListView.ListViewColumns[i.id];let l=!1;if(l=s?"true"===a.visible&&!1===a.deprecated:!1===a.deprecated,l){let t=["4","5","23","24"].includes(i.id)?`*${a.label}`:a.label;t="24"===i.id?`*${t}`:t,this.visible.push({id:i.id,sortColumn:a.sortColumn,isRecordProperty:a.isRecordProperty,label:t});try{delete e[i.id]}catch(t){}}})),Object.keys(e).forEach((t=>{const s=e[t],i=window.MAListView.ListViewColumns[s.id];if(!1===s.deprecated){let t=["4","5","23","24"].includes(s.id)?`*${i.label}`:i.label;console.log(t),t="24"===s.id?`*${t}`:t,this.available.push({id:s.id,sortColumn:i.sortColumn,isRecordProperty:i.isRecordProperty,label:t})}}))}}},g=(0,n.Z)(f,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"list-view"}},[s("div",{staticClass:"slds-grid slds-grid_align-spread"},[s("div",[s("div",{staticClass:"slds-text-heading_medium"},[t._v(t._s(t.$Labels.MA_COLUMN_VISIBILITY_AND_ORDER))]),t._v(" "),s("div",{staticClass:"slds-text-title slds-m-bottom_small"},[t._v(t._s(t.$Labels.MA_DRAG_AND_DROP_TO_ADDREMOVE_FROM_VISIBLE_COLUMN))])])]),t._v(" "),s("div",{staticClass:"slds-dueling-list slds-form-element__control"},[s("div",{staticClass:"slds-assistive-text",attrs:{id:"drag-live-region"}}),t._v(" "),s("div",{staticClass:"slds-assistive-text",attrs:{id:"option-drag-label"}},[t._v("\n            Press space bar when on an item, to move it within the list. CMD plus left and right arrow keys, to move items between lists.\n        ")]),t._v(" "),s("div",{staticClass:"slds-dueling-list__column slds-p-right_small"},[s("span",{staticClass:"slds-form-element__label",attrs:{id:"label-3"}},[t._v(t._s(t.$Labels.MA_AVAILABLE))]),t._v(" "),t.$store.state.defaultSettings.columnsConfig.overridable?s("div",{staticClass:"slds-dueling-list__options lvs-drag-col"},[s("draggable",{staticClass:"list-group slds-listbox slds-listbox_vertical",attrs:{id:"AvailableListViewColumns",list:t.available,options:{group:"listColumns"}}},t._l(t.available,(function(e,i){return s("div",{key:i,staticClass:"settings-listview-column slds-listbox__option slds-listbox__option_plain slds-media slds-grid_vertical-align-center",attrs:{"data-id":e.id,label:e.label,isRecordProperty:e.isRecordProperty,sortColumn:e.sortColumn}},[t._v("\n                        "+t._s(t._f("decode")(e.label))+" "),s("span",{staticClass:"ma-icon ma-icon-move slds-m-left_x-small"})])})),0)],1):s("div",{staticClass:"slds-box slds-theme_shade slds-dueling-list__options"},t._l(t.available,(function(e,i){return s("div",{key:i,staticClass:"slds-p-bottom_small slds-listbox__option slds-listbox__option_plain slds-media slds-grid_vertical-align-center",attrs:{"data-id":e.id,label:e.label,isRecordProperty:e.isRecordProperty}},[t._v("\n                    "+t._s(t._f("decode")(e.label))+"\n                ")])})),0)]),t._v(" "),s("div",{staticClass:"slds-dueling-list__column slds-p-left_small"},[s("span",{staticClass:"slds-form-element__label",attrs:{id:"label-4"}},[t._v(t._s(t.$Labels.VISIBLE))]),t._v(" "),t.$store.state.defaultSettings.columnsConfig.overridable?s("div",{staticClass:"slds-dueling-list__options lvs-drag-col"},[s("draggable",{staticClass:"list-group slds-listbox slds-listbox_vertical",attrs:{id:"VisibleListViewColumns",list:t.visible,options:{group:"listColumns"}}},t._l(t.visible,(function(e,i){return s("div",{key:i,staticClass:"settings-listview-column slds-listbox__option slds-listbox__option_plain slds-media slds-grid_vertical-align-center",attrs:{"data-id":e.id,label:e.label,isRecordProperty:e.isRecordProperty,sortColumn:e.sortColumn}},[t._v("\n                        "+t._s(t._f("decode")(e.label))+" "),s("span",{staticClass:"ma-icon ma-icon-move slds-m-left_x-small"})])})),0)],1):s("div",{staticClass:"slds-box slds-theme_shade slds-dueling-list__options"},t._l(t.visible,(function(e,i){return s("div",{key:i,staticClass:"slds-p-bottom_small slds-listbox__option slds-listbox__option_plain slds-media slds-grid_vertical-align-center",attrs:{"data-id":e.id,label:e.label}},[t._v("\n                    "+t._s(t._f("decode")(e.label))+"\n                ")])})),0)])]),t._v(" "),s("div",{staticClass:"slds-grid"},[s("div",{staticClass:"slds-form-element"},[s("label",{staticClass:"slds-form-element__label",attrs:{for:"PageSizeDefault"}},[t._v(t._s(t.$Labels.Listview_Settings_Max_Records_on_Page))]),t._v(" "),s("div",{staticClass:"slds-form-element__control"},[t.$store.state.defaultSettings.defaultPageSize.overridable?s("div",{staticClass:"slds-select_container"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.pageSize,expression:"pageSize"}],staticClass:"slds-select",attrs:{id:"PageSizeDefault"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.pageSize=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"10"}},[t._v("10")]),t._v(" "),s("option",{attrs:{value:"20"}},[t._v("20")]),t._v(" "),s("option",{attrs:{value:"30"}},[t._v("30")]),t._v(" "),s("option",{attrs:{value:"40"}},[t._v("40")]),t._v(" "),s("option",{attrs:{value:"50"}},[t._v("50")])])]):s("input",{staticClass:"slds-input",attrs:{readonly:""},domProps:{value:t.pageSize}})])])]),t._v(" "),s("div",{staticClass:"slds-p-top_small"},[s("p",[t._v("*"+t._s(t.$Labels.MA_THESE_COLUMNS_WILL_ONLY_APPEAR_IN_THE_SELECTED_TAB)+".")]),t._v(" "),s("p",[t._v("**"+t._s(t.$Labels.MA_THESE_COLUMNS_ONLY_APPEAR_IN_THE_SELECTED_TAB_WHEN_MULTIPLE)+".")])])])}),[],!1,null,"520a8783",null).exports,h={name:"SettingsMain",components:{Modal:l.u_,Spinner:l.$j,Tabs:l.mQ,Tab:l.OK,General:d,RoutesSchedule:_,ListSettings:g,DataSources:()=>({...(0,o.YH)(),component:s.e(965).then(s.bind(s,9532))})},props:{activeTab:{type:String,default:"generalTab"}},data:()=>({isInvalidRadius:!1,isLoading:!1,activeTabId:"generalTab",generalSettings:{},routeSettings:{},listSettings:{},defaultGeneralSettings:{proximitySettings:{DefaultProximityType:"Circle",circleRadius:"50",circleRadiusUnits:"MILES",radius:"50",travelDistanceRadius:"50",travelDistanceRadiusUnits:"MILES",travelTimeRadiusMinutes:"",travelTimeRadiusHours:""},distanceUnit:"mi",mobilePlotLimit:1e3,recallMobileSaveState:!1,invertProximity:!1,mapItProximity:!1},defaultRouteSettings:{transportationMode:"driving",startLocation:{label:"",value:""},endLocation:{label:"",value:""},enableDuplicateStops:!1,routeType:"Standard",routeStart:"9:00 am",routeEnd:"5:00 pm",stopDuration:"0 hr, 30 min",unit:"mi"}}),computed:{MAVersion(){return(0,a.N4)(this.$Labels.MapSettings_Version,[window.MASystem.MapAnythingInfo.version])}},created(){this.activeTabId=this.activeTab},methods:{getGUID:i.x$,checkValidRadius(t){const e=Number(t);this.isInvalidRadius=Number.isNaN(e)||e<0||""===t},updateGeneralSettings(t){this.generalSettings=t},updateRouteSettings(t){this.routeSettings=t},updateListSettings(t){this.listSettings=t},save(t=!1){this.isLoading=!0;const e=this.buildSettings(t);let s;e.floatingBreak&&(s=e.floatingBreak.enabled,delete e.floatingBreak.enabled);const a={ajaxResource:"UserAJAXResources",removeMobileState:!this.generalSettings.recallMobileSaveState,action:"store_ma_settings",id:this.$User.Id,jsonstring:JSON.stringify(e),DefaultProximityRadius:this.generalSettings.proximitySettings.radius,PreferredTypeOfMeasurement:this.generalSettings.proximitySettings.unit};(0,i.wX)("maps.RemoteFunctions.processAJAXRequest",[a]).then((t=>{t&&t.success?(e.floatingBreak&&(e.floatingBreak.enabled=s),this.updateGlobalSettingsAfterSave(e),this.close(),this.$nextTick((()=>{this.$bus.$emit("user-settings-updated")})),window.MAToastMessages.showSuccess({message:this.$Labels.MA_Success}),window.MAListView.isVisible()&&window.MAListView.ConstructAllTabs()):(console.warn(t),window.MAToastMessages.showError({message:this.$Labels.MapsSetting_Save_Error,closeButton:!0,timeOut:5e3}))})).catch((t=>{console.warn(t),window.MAToastMessages.showError({message:"Error saving settings...",closeButton:!0,timeOut:5e3})})).finally((()=>{this.isLoading=!1}))},updateGlobalSettingsAfterSave(t){window.userSettings={...window.userSettings,...t}},buildSettings(t=!1){let{generalSettings:e,routeSettings:s}=this;t&&(e=this.defaultGeneralSettings,s=this.defaultRouteSettings);const i={MapItProximityOn:e.mapItProximity,InvertProximity:e.invertProximity,mobilePlotLimit:e.mobilePlotLimit,recallMobileSaveState:e.recallMobileSaveState},{PlotOnLoadQueries:a=[]}=window.userSettings;i.PlotOnLoadQueries=a,i.defaultProximitySettings=e.proximitySettings;const{startLocation:l={},endLocation:o={},workingHours:r={},breakInformation:n={},transportationMode:d,routeType:c,stopDuration:u,enableDuplicateStops:m,enableCurrentLocationTime:_,optimizationType:v}=s;if(i.RouteDefaults={mode:d,driveProfile:d,optimizationType:v,unit:e.distanceUnit,startLocationId:""===l.label?"":l.value||l.id,startLocationLabel:l.label,endLocationId:""===o.label?"":o.value||o.id,endLocationLabel:o.label,type:c,duration:u,displayTrafficTime:!0,enabledDuplicateStops:m,enableCurrentLocationTime:_,enableDraggableWaypoints:!1},t||!n.enabled?i.floatingBreak=null:n.enabled&&(i.floatingBreak={enabled:!0,endHour:n.endHour,endMinute:n.endMinute,startHour:n.startHour,startMinute:n.startMinute}),t){const t={};["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].forEach((e=>{t[e]={startHour:9,startMinute:0,endHour:17,endMinute:0,overnight:!1,workingDay:!0}})),i.workingHours=t}else{const t=Object.keys(r),e={};t.forEach((t=>{const s=r[t];e[t]={startHour:Number(s.startHour),startMinute:Number(s.startMinute),endHour:Number(s.endHour),endMinute:Number(s.endMinute),overnight:s.overnight,workingDay:!0===s.workingDay}})),i.workingHours=e}if(i.ListViewColumns={},t)i.ListViewColumns=window.MAListView.DefaultListViewColumns,i.PageSizeDefault="50";else{const{pageSize:t="50",visibleList:e=[]}=this.listSettings;e.forEach(((t,e)=>{i.ListViewColumns[e]={id:t.id}})),i.PageSizeDefault=t}return i},close(){this.$emit("close")},updateTab(t){this.$emit("update:activeTab",t),this.activeTabId=t}}},y=(0,n.Z)(h,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Modal",{attrs:{id:"maSettings",title:t.$Labels.MapsSetting_Settings,labels:{close:t.$Labels.MA_Close},size:"large"},on:{close:function(e){return t.$emit("close")}}},[s("div",{attrs:{slot:"content",id:"settings-tabs"},slot:"content"},[s("Spinner",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}]}),t._v(" "),s("Tabs",{staticClass:"content",attrs:{isVertical:"",activeTabId:t.activeTabId},on:{changed:t.updateTab}},[s("Tab",{attrs:{id:"generalTab",renderImmediately:"",title:t.$Labels.MapsSetting_General}},[s("General",{on:{"radius-updated":t.checkValidRadius,"update-general-settings":t.updateGeneralSettings}})],1),t._v(" "),s("Tab",{attrs:{id:"routesScheduleTab",renderImmediately:"",title:t.$Labels.MapsSetting_Route_Schedule}},[s("RoutesSchedule",{on:{"update-route-settings":t.updateRouteSettings}})],1),t._v(" "),s("Tab",{attrs:{id:"listTab",renderImmediately:"",title:t.$Labels.MA_List}},[s("ListSettings",{on:{"update-list-settings":t.updateListSettings}})],1),t._v(" "),s("Tab",{attrs:{id:"dataSourcesTab",renderImmediately:"",title:t.$Labels.DataSources_Data_Sources}},["dataSourcesTab"===t.activeTabId?s("DataSources"):t._e()],1)],1)],1),t._v(" "),s("div",{staticClass:"slds-grid slds-grid_vertical-align-center",attrs:{slot:"footer"},slot:"footer"},[s("div",{staticClass:"slds-grid slds-grid_vertical-align-center"},[s("div",{staticClass:"slds-p-horizontal_xx-small"},[t._v(t._s(t.MAVersion))]),t._v(" "),s("div",{staticClass:"slds-p-horizontal_x-small"},[s("a",{staticClass:"global-settings-doc slds-button slds-p-horizontal_small",attrs:{href:"https://help.salesforce.com/articleView?id=salesforce_maps_intro.htm&type=5",target:"_blank"}},[s("span",{staticClass:"slds-button__icon slds-button__icon_left ma-icon ma-icon-link"}),t._v("\n                    "+t._s(t.$Labels.MA_Documentation)+"\n                ")])])]),t._v(" "),s("div",{staticClass:"slds-col_bump-left"},[s("button",{staticClass:"slds-button slds-button_neutral",on:{click:t.close}},[t._v("\n                "+t._s(t.$Labels.MA_Cancel)+"\n            ")]),t._v(" "),s("button",{staticClass:"slds-button slds-button_brand",attrs:{disabled:t.isInvalidRadius},on:{click:function(e){return t.save(!1)}}},[t._v("\n                "+t._s(t.$Labels.MA_Save)+"\n            ")])])])])}),[],!1,null,"2a97bab4",null).exports}}]);