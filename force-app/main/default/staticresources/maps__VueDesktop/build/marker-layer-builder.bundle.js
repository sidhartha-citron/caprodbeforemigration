(globalThis.webpackChunkmaps_desktop=globalThis.webpackChunkmaps_desktop||[]).push([[690],{707:(e,t,s)=>{e.exports=s.p+"images/2e0d266ec0a18868d612ea5d4b1b808a.png"},6813:(e,t,s)=>{e.exports=s.p+"images/c9437e92b32352e83c85468e2c0c600c.png"},2026:(e,t,s)=>{e.exports=s.p+"images/5d747cb226d9a7f672b2e11b43d87743.png"},4622:(e,t,s)=>{e.exports=s.p+"images/34b397a85399b6adc721a781e108d5ff.png"},4901:(e,t,s)=>{e.exports=s.p+"images/aae2f70fa4af1a2c8a65180e07b9d3f6.png"},3897:(e,t,s)=>{e.exports=s.p+"images/53306603a8a4e42833f04f247c9e6ca7.png"},8910:(e,t,s)=>{e.exports=s.p+"images/c496afa14484e67ef620ea33599cb3c3.png"},849:(e,t,s)=>{"use strict";s.r(t),s.d(t,{SaveTypes:()=>Ct,default:()=>Rt});var a=s(1515),i=s(3465),l=s.n(i),o=s(2378),r=s.n(o),n=s(6342),d=s(7957),c=s(8719);const p=new Map,_=({sobject:e,includeDedicatedLookupOptions:t=!1,excludeUnsupportedDisplayTypes:s=!1})=>{let a=e;Array.isArray(a)||(a=[a]);let i=a.join(".");return t&&(i+=".lookup"),s&&(i+=".filtered"),p.has(i)||p.set(i,new Promise((async(e,t)=>{try{const t=a.map((e=>(0,c.K)({sobject:e,includeDedicatedLookupOptions:!0})));let s=(await Promise.all(t)).reduce(((e,t)=>e.concat(t)),[]);if(a.length>1){const e=["Alias","Email","FirstName","Id","IsActive","LastName","LastReferencedDate","LastViewedDate","Name","Phone","ProfileId","Title","Username","UserRoleId"],t=new Map;s.forEach((s=>{if(e.includes(s.apiName))if(s.sobjects=[s.sobject],t.has(s.apiName)){const e=t.get(s.apiName);e.sobjects.push(s.sobject),e.label=`${e.sobjects.join("/")} ${e.apiName}`}else t.set(s.apiName,s)})),s=Array.from(t.values())}const l=["address","time"],o=[],r=[],n=[];s.forEach((e=>{const t=!l.includes(e.displayType);t&&r.push(e),e.isLookup||o.push(e),t&&!e.isLookup&&n.push(e)}));const d=a.join(".");p.set(d,o),p.set(`${d}.lookup`,s),p.set(`${d}.filtered`,n),p.set(`${d}.lookup.filtered`,r),e(p.get(i))}catch(e){t(e)}}))),p.get(i)},m=["WhatId","WhoId","WhatId.lookup","WhoId.lookup"],u=e=>e.filter((({apiName:e})=>!m.includes(e))),h=(e="string")=>d.xq[e.toUpperCase()]||d.xq.STRING,y={methods:{genericExceptionHandler(e){this.store.toasts.push({message:e.message,subMessage:e.action&&e.method?`${e.action}.${e.method}`:null,state:"error"})},showErrorToast(e){this.store.toasts.push({message:this.$Labels.MA_Error,subMessage:e,state:"error"})}}},b={mixins:[y],inject:["getStore","registerValidator","unregisterValidator"],computed:{store(){return this.getStore()}},created(){if(this.$v){const e=(0,n.x$)();this.registerValidator(e,this.$v),this.onDestroy=()=>this.unregisterValidator(e)}},destroyed(){"function"==typeof this.onDestroy&&this.onDestroy()}};var L=s(1900);const v=(0,L.Z)(b,void 0,void 0,!1,null,null,null).exports,f={};f[d.xq.STRING]=f[d.xq.TEXTAREA]=f[d.xq.URL]=f[d.xq.EMAIL]=f[d.xq.COMBOBOX]=[{id:"contains",title:window.MASystem.Labels.MA_Contains},{id:"equals",title:window.MASystem.Labels.MA_Equals},{id:"starts",title:window.MASystem.Labels.MA_Starts_With}],f[d.xq.PHONE]=[{id:"equals",title:window.MASystem.Labels.MA_Equals},{id:"starts",title:window.MASystem.Labels.MA_Starts_With}],f[d.xq.NUMBER]=f[d.xq.CURRENCY]=f[d.xq.INTEGER]=f[d.xq.DOUBLE]=f[d.xq.PERCENT]=[{id:"currency",title:window.MASystem.Labels.MA_Range}],f[d.xq.DATE]=f[d.xq.DATETIME]=[{id:"date",title:window.MASystem.Labels.MA_Range}],f[d.xq.MULTIPICKLIST]=[{id:"includes",title:window.MASystem.Labels.MA_Includes},{id:"excludes",title:window.MASystem.Labels.MA_Excludes}],f[d.xq.REFERENCE]=f[d.xq.PICKLIST]=f[d.xq.BOOLEAN]=f[d.xq.ID]=[{id:"equals",title:window.MASystem.Labels.MA_Equals}];const $=f;var M=s(9486),g=s(2072);const{MAMarkerBuilder:O}=window,{shapes:x,createSVG:T}=O,S=Object.entries(x).filter((e=>e[1].types&&e[1].types.includes("dynamic"))).map((e=>e[0]));let B=14;const k={components:{Icon:a.JO},props:{focusedShape:{type:String,default:"Marker"}},data:()=>({showPopover:!1,selectedShape:"",targetBindTo:null,focusedShapeIndex:0,openingFocusIndex:0,openingValue:"",shapeDivsRef:[],renderedShapes:[],scrollBatches:[]}),created(){this.openingValue=this.$props.focusedShape;let e=[];for(let t=0;t<S.length;t++){const s=S[t];s!==this.$props.focusedShape?(t<20?this.renderedShapes.push(s):e.push(s),20===e.length&&(this.scrollBatches.push(e),e=[])):this.renderedShapes.unshift(s)}e.length>0&&(this.scrollBatches.push(e),e=[])},mounted(){this.getShapes(),this.setShapeFocus()},methods:{setSelectedShape(e="Marker",t){if(this.getShapes(),this.$emit("input",e),void 0!==t)this.shapeDivsRef[this.focusedShapeIndex].setAttribute("tabindex",-1),this.removeActiveStyle(this.focusedShapeIndex),this.focusedShapeIndex=t,this.setShapeFocus(),this.selectedShape=e;else{this.selectedShape=e;const t=Array.from(document.querySelectorAll(".shapeImage"));for(let e=0;e<t.length;e++)t[e].classList.remove("is-active")}},setShapeFocus(){this.shapeDivsRef[this.focusedShapeIndex].focus(),this.shapeDivsRef[this.focusedShapeIndex].setAttribute("tabindex",0),this.shapeDivsRef[this.focusedShapeIndex].classList.add("slds-button_outline-brand")},addActiveStyle(e){this.shapeDivsRef.length>0&&(this.shapeDivsRef[e].classList.add("is-active"),this.shapeDivsRef[e].classList.add("slds-button_outline-brand"))},removeActiveStyle(e){this.shapeDivsRef[e].classList.remove("is-active"),this.shapeDivsRef[e].classList.remove("slds-button_outline-brand")},previousShape(){this.getShapes(),this.removeActiveStyle(this.focusedShapeIndex),this.shapeDivsRef[this.focusedShapeIndex].setAttribute("tabindex",-1),this.focusedShapeIndex>0&&this.focusedShapeIndex--,this.setSelectedShape(this.renderedShapes[this.focusedShapeIndex],this.focusedShapeIndex),this.setShapeFocus()},nextShape(){this.getShapes(),this.removeActiveStyle(this.focusedShapeIndex),this.shapeDivsRef[this.focusedShapeIndex].setAttribute("tabindex",-1),this.focusedShapeIndex<S.length-1&&this.focusedShapeIndex++,this.setSelectedShape(this.renderedShapes[this.focusedShapeIndex],this.focusedShapeIndex),this.setShapeFocus(),this.focusedShapeIndex===B&&this.scrollBatches.length>0&&(this.loadMoreShapes(),B+=20)},keypressHandler(e){"ArrowUp"!==e.key&&"ArrowLeft"!==e.key||(e.preventDefault(),this.previousShape()),"ArrowDown"!==e.key&&"ArrowRight"!==e.key||(e.preventDefault(),this.nextShape())},scrollHandler(e){const{target:t}=e,{scrollHeight:s,scrollTop:a,clientHeight:i}=t;s-a-i<=25&&this.scrollBatches.length&&this.loadMoreShapes()},getShapes(){this.shapeDivsRef=[],this.shapeDivsRef=this.$refs.swatches.querySelectorAll(".shapeImage")},loadMoreShapes(){this.renderedShapes=[...this.renderedShapes,...this.scrollBatches.shift()],this.$nextTick(this.getShapes)},generateAssistiveTextByIconName(e){const t=`shapePicker_shape_${e}`;return this.$Labels[t]},createSVGImage(e,t){return e&&"string"==typeof e||(e="Marker"),e===this.$props.value&&t&&(this.focusedShapeIndex=t,this.openingFocusIndex=t),T({type:"Marker",color:`#f4f6f9:${e}`})}}},D=(0,L.Z)(k,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("ul",{ref:"swatches",staticClass:"slds-color-picker__swatches slds-grid slds-grid_align-center slds-grid_align-spread slds-gutters slds-gutters_xx-small slds-wrap slds-scrollable popoverContentContainer",attrs:{role:"listbox",tabindex:"-1"},on:{keydown:e.keypressHandler,scroll:e.scrollHandler}},e._l(e.renderedShapes,(function(t,a){return s("li",{key:t,staticClass:"slds-col slds-m-top_x-small",attrs:{role:"presentation"},on:{click:function(s){return e.setSelectedShape(t,a)}}},[s("Icon",{staticClass:"slds-button slds-button_icon slds-p-around_xxx-small shapeImage",attrs:{svg:e.createSVGImage(t,a),inheritFillFromParent:"",role:"option",iconClass:["slds-icon_small","slds-icon-text-light"]}}),e._v(" "),s("span",{staticClass:"slds-assistive-text"},[e._v(" "+e._s(e.generateAssistiveTextByIconName(t)))])],1)})),0)])}),[],!1,null,"8bf58968",null).exports,{MAMarkerBuilder:{createSVG:F,shapes:A}}=window,w={components:{Button:a.zx,ButtonIcon:a.Ei,Icon:a.JO,Popover:a.J2,ShapeSelectorBody:D},props:{value:{type:String,default:"Marker"}},data(){return{showPopover:!1,selectedShape:"",targetBindTo:null,focusedShapeIndex:0,openingFocusIndex:0,openingValue:this.$props.value,displaySVG:"",testing:'<svg data-shape="Marker" class="svg-marker" width="22" height="36" viewBox="0 0 28 42" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet"> <g> <path transform="rotate(180 13.5708 20.8542)" fill="#f4f6f9" d="m6.300003,37.5c-4.300003,-3.399994 -5.900002,-8.5 -4.300003,-13.699997c1.700005,-5.800003 11.100006,-23.100006 12,-22.100006c1.400009,1.5 10.800003,20.800003 11.5,23.5c1,3.800003 -1.099991,9.300003 -4.599991,12.300003c-4.100006,3.400009 -10.200012,3.400009 -14.600006,0z" stroke="#b4b6b9"/> <circle stroke="#b4b6b9" r="4.5" cy="14" cx="13.5" stroke-width="2" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" fill="#0f1114"/> </g> </svg>'}},watch:{value:{handler(){this.setSelectedShape(this.$props.value)},immediate:!0}},created(){A[this.openingValue]||(this.openingValue="Marker",this.$emit("input",this.openingValue)),this.displaySVG=this.createSVGImage(this.openingValue)},methods:{createSVGImage:e=>(e&&"string"==typeof e||(e="Marker"),F({type:"Marker",color:`#f4f6f9:${e}`})),openPopover(e){this.targetBindTo=e.target,this.showPopover=!0},closePopover(){this.showPopover=!1},togglePopover(e){this.showPopover?this.closePopover():this.openPopover(e)},setSelectedShape(e="Marker"){this.selectedShape=e},cancel(){this.setSelectedShape(this.openingValue),this.focusedShapeIndex=this.openingFocusIndex,this.closePopover()},saveSelection(){this.$emit("input",this.selectedShape),this.displaySVG=this.createSVGImage(this.selectedShape),this.openingValue=this.selectedShape,this.openingFocusIndex=this.focusedShapeIndex,this.closePopover()}}},I=(0,L.Z)(w,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"slds-form-element"},[s("label",{staticClass:"slds-form-element__label"},[e._v(e._s(e.$Labels.shapePicker_MLB_default_title))]),e._v(" "),s("div",{staticClass:"slds-form-element__control"},[s("ButtonIcon",{attrs:{more:"",variant:"border-filled",assistiveText:e.$Labels.shapePicker_MLB_default_assistive_text,title:e.$Labels.shapePicker_MLB_default_assistive_text},on:{click:e.togglePopover}},[s("Icon",{staticClass:"slds-m-right_xx-small",attrs:{svg:e.displaySVG,inheritFillFromParent:"",iconClass:["slds-icon_small","slds-icon-text-light"]}})],1)],1),e._v(" "),e.showPopover?s("Popover",{attrs:{alignment:"right bottom",width:"small",closeOnClickOutside:""},on:{close:e.cancel}},[s("template",{slot:"header"},[e._v("\n            "+e._s(e.$Labels.shapePicker_MLB_default_title)+"\n        ")]),e._v(" "),s("div",{attrs:{slot:"content"},slot:"content"},[s("ShapeSelectorBody",{attrs:{focusedShape:e.openingValue},on:{input:e.setSelectedShape}})],1),e._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("div",{staticClass:"slds-grid slds-grid_align-end"},[s("div",{staticClass:"slds-col"},[s("Button",{attrs:{variant:"neutral"},on:{click:e.cancel}},[e._v("\n                        "+e._s(e.$Labels.shapePicker_MLB_Cancel)+"\n                    ")]),e._v(" "),s("Button",{attrs:{variant:"brand"},on:{click:e.saveSelection}},[e._v("\n                        "+e._s(e.$Labels.shapePicker_MLB_Done)+"\n                    ")])],1)])])],2):e._e()],1)}),[],!1,null,null,null).exports,C={name:"MarkerStyle",components:{ShapeSelector:I,ColorPicker:a.zH,RadioButtonGroup:a.SY,Picklist:a.Gp},extends:v,props:{hasColor:Boolean,value:{type:String,default:""}},validations(){const e={customShape:{},color:{}};return("custom"===this.markerTypeMode||"custom"===this.markerTypeMode&&this.hasColor)&&(e.customShape={required:M.required}),e},data(){return{radioEdit:!1,shape:"Marker",color:"#3be282",customShape:"",markerTypeMode:"preset",markerTypeOptions:[{label:this.$Labels.markerStylePicker_RadioButtonGroup_MLB_Preset,value:"preset"},{label:this.$Labels.markerStylePicker_RadioButtonGroup_MLB_Custom,value:"custom"}]}},watch:{"$props.value":{handler(){const e=this.$props.value.split(":");this.radioEdit?this.radioEdit=!1:"image"===e[0]?(this.markerTypeMode="custom",this.customShape=this.$props.value):(this.markerTypeMode="preset",e.length>1?[this.color,this.shape]=e:[this.shape]=e)},immediate:!0},markerTypeMode:{handler(){this.radioEdit=!0,this.updateBinding()}}},methods:{updateBinding(){"custom"===this.markerTypeMode?this.$emit("input",this.customShape):this.$emit("input",this.$props.hasColor&&this.color?`${this.color}:${this.shape}`:this.shape)},getValidationMessages:(0,g.ed)({required:window.MASystem.Labels.MLB_Required_Field_Error})}},E=(0,L.Z)(C,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Layout",{staticClass:"slds-gutters_xx-small"},[s("LayoutItem",{staticClass:"slds-col slds-grow-none"},[s("RadioButtonGroup",{attrs:{options:e.markerTypeOptions,labels:{name:e.$Labels.markerStylePicker_RadioButtonGroup_MLB_MarkerType}},model:{value:e.markerTypeMode,callback:function(t){e.markerTypeMode=t},expression:"markerTypeMode"}})],1),e._v(" "),"preset"===e.markerTypeMode?s("LayoutItem",{staticClass:"slds-col slds-shrink-none"},[s("ShapeSelector",{on:{input:e.updateBinding},model:{value:e.shape,callback:function(t){e.shape=t},expression:"shape"}})],1):e._e(),e._v(" "),"preset"===e.markerTypeMode&&e.hasColor?s("LayoutItem",{staticClass:"slds-col slds-shrink-none"},[e.hasColor?s("ColorPicker",{attrs:{errors:e.getValidationMessages(e.$v.color),labels:{chooseColor:e.$Labels.markerStylePicker_ColorPicker_MLB_MarkerColor}},on:{input:e.updateBinding},model:{value:e.$v.color.$model,callback:function(t){e.$set(e.$v.color,"$model",t)},expression:"$v.color.$model"}}):e._e()],1):e._e(),e._v(" "),"custom"===e.markerTypeMode?s("LayoutItem",{staticClass:"slds-col slds-grow-none"},[s("Picklist",{attrs:{errors:e.getValidationMessages(e.$v.customShape),labels:{name:e.$Labels.modal_MLB_option_DO_section_Markers_modal_Custom_Marker_Image_Picklist_Label},options:e.store.metadata.customMarkerImageOptions},on:{changed:e.updateBinding},model:{value:e.$v.customShape.$model,callback:function(t){e.$set(e.$v.customShape,"$model",t)},expression:"$v.customShape.$model"}})],1):e._e()],1)}),[],!1,null,"1c02aa98",null).exports,R={name:"BooleanValueType",components:{RadioGroup:a.Ee},data(){return{options:[{label:this.$Labels.modal_MLB_Boolean_True,value:"TRUE",disabled:!1},{label:this.$Labels.modal_MLB_Boolean_False,value:"FALSE",disabled:!1}]}}},P=(0,L.Z)(R,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("RadioGroup",{attrs:{value:e.$attrs.value,labels:{name:e.$Labels.modal_MLB_Condition_Value},disabled:e.$attrs.disabled,options:e.options},on:{input:function(t){return e.$emit("update:value",t)}}})}),[],!1,null,"2bb84a79",null).exports;var V=s(379),N=s(8620);const j=e=>(0,N.RP)({type:"minIntegerValue",minInteger:e},(t=>(0,V.C1)(t)&&(0,V._L)(t)&&(0,V.uv)(e)(t))),U=[{id:"YESTERDAY",title:window.MASystem.Labels.modal_MLB_DateTime_Literal_Yesterday},{id:"TODAY",title:window.MASystem.Labels.modal_MLB_DateTime_Literal_Today},{id:"TOMORROW",title:window.MASystem.Labels.modal_MLB_DateTime_Literal_Tomorrow},{id:"LAST_N_DAYS",title:window.MASystem.Labels.modal_MLB_DateTime_Literal_Last_N_Days,variable:!0},{id:"NEXT_N_DAYS",title:window.MASystem.Labels.modal_MLB_DateTime_Literal_Next_N_Days,variable:!0},{id:"N_DAYS_AGO",title:window.MASystem.Labels.modal_MLB_DateTime_Literal_N_Days_Ago,variable:!0},{id:"N_DAYS_FROM_NOW",title:window.MASystem.Labels.modal_MLB_DateTime_Literal_N_Days_From_Now,variable:!0},{id:"LAST_WEEK",title:window.MASystem.Labels.modal_MLB_DateTime_Literal_Last_Week},{id:"THIS_WEEK",title:window.MASystem.Labels.modal_MLB_DateTime_Literal_This_Week},{id:"NEXT_WEEK",title:window.MASystem.Labels.modal_MLB_DateTime_Literal_Next_Week},{id:"LAST_N_WEEKS",title:window.MASystem.Labels.modal_MLB_DateTime_Literal_Last_N_Weeks,variable:!0},{id:"NEXT_N_WEEKS",title:window.MASystem.Labels.modal_MLB_DateTime_Literal_Next_N_Weeks,variable:!0},{id:"LAST_MONTH",title:window.MASystem.Labels.modal_MLB_DateTime_Literal_Last_Month},{id:"THIS_MONTH",title:window.MASystem.Labels.modal_MLB_DateTime_Literal_This_Month},{id:"NEXT_MONTH",title:window.MASystem.Labels.modal_MLB_DateTime_Literal_Next_Month},{id:"LAST_N_MONTHS",title:window.MASystem.Labels.modal_MLB_DateTime_Literal_Last_N_Months,variable:!0},{id:"NEXT_N_MONTHS",title:window.MASystem.Labels.modal_MLB_DateTime_Literal_Next_N_Months,variable:!0},{id:"THIS_QUARTER",title:window.MASystem.Labels.modal_MLB_DateTime_Literal_This_Quarter},{id:"LAST_QUARTER",title:window.MASystem.Labels.modal_MLB_DateTime_Literal_Last_Quarter},{id:"NEXT_QUARTER",title:window.MASystem.Labels.modal_MLB_DateTime_Literal_Next_Quarter},{id:"LAST_N_QUARTERS",title:window.MASystem.Labels.modal_MLB_DateTime_Literal_Last_N_Quarters,variable:!0},{id:"NEXT_N_QUARTERS",title:window.MASystem.Labels.modal_MLB_DateTime_Literal_Next_N_Quarters,variable:!0},{id:"THIS_YEAR",title:window.MASystem.Labels.modal_MLB_DateTime_Literal_This_Year},{id:"LAST_YEAR",title:window.MASystem.Labels.modal_MLB_DateTime_Literal_Last_Year},{id:"NEXT_YEAR",title:window.MASystem.Labels.modal_MLB_DateTime_Literal_Next_Year},{id:"LAST_N_YEARS",title:window.MASystem.Labels.modal_MLB_DateTime_Literal_Last_N_Years,variable:!0},{id:"NEXT_N_YEARS",title:window.MASystem.Labels.modal_MLB_DateTime_Literal_Next_N_Years,variable:!0},{id:"N_YEARS_AGO",title:window.MASystem.Labels.modal_MLB_DateTime_Literal_N_Years_Ago,variable:!0},{id:"N_YEARS_FROM_NOW",title:window.MASystem.Labels.modal_MLB_DateTime_Literal_N_Years_From_Now,variable:!0},{id:"THIS_FISCAL_QUARTER",title:window.MASystem.Labels.modal_MLB_DateTime_Literal_This_Fiscal_Quarter},{id:"LAST_FISCAL_QUARTER",title:window.MASystem.Labels.modal_MLB_DateTime_Literal_Last_Fiscal_Quarter},{id:"NEXT_FISCAL_QUARTER",title:window.MASystem.Labels.modal_MLB_DateTime_Literal_Next_Fiscal_Quarter},{id:"LAST_N_FISCAL_QUARTERS",title:window.MASystem.Labels.modal_MLB_DateTime_Literal_Last_N_Fiscal_Quarters,variable:!0},{id:"NEXT_N_FISCAL_QUARTERS",title:window.MASystem.Labels.modal_MLB_DateTime_Literal_Next_N_Fiscal_Quarters,variable:!0},{id:"THIS_FISCAL_YEAR",title:window.MASystem.Labels.modal_MLB_DateTime_Literal_This_Fiscal_Year},{id:"LAST_FISCAL_YEAR",title:window.MASystem.Labels.modal_MLB_DateTime_Literal_Last_Fiscal_Year},{id:"NEXT_FISCAL_YEAR",title:window.MASystem.Labels.modal_MLB_DateTime_Literal_Next_Fiscal_Year},{id:"LAST_N_FISCAL_YEARS",title:window.MASystem.Labels.modal_MLB_DateTime_Literal_Last_N_Fiscal_Years,variable:!0},{id:"NEXT_N_FISCAL_YEARS",title:window.MASystem.Labels.modal_MLB_DateTime_Literal_Next_N_Fiscal_Years,variable:!0}],q={number:{decimal:window.MASystem.Labels.modal_MLB_Input_Error_Number},date:{minIntegerValue:window.MASystem.Labels.modal_MLB_Input_Error_Positive_Integer,required:window.MASystem.Labels.modal_MLB_Date_Required}},G=Object.freeze({FIXED:"FIXED",LITERAL:"LITERAL"}),z="YYYY-MM-DD",H={name:"DateTimeValueTypeInstance",components:{DatePicker:a.Mt,Picklist:a.Gp,TextInput:a.oi,TimePicker:a.jI},extends:v,inheritAttrs:!1,validations(){const e={date:{},literalN:{},literal:{}};return this.mode===G.LITERAL?(e.literal={required:M.required},this.showLiteralN&&(e.literalN={minIntegerValue:j(1)})):this.mode===G.FIXED&&this.$attrs.isMarkerStyleFilter&&(e.date={required:M.required}),e},data(){return{date:null,literals:U,literal:"",literalN:"",literalOption:{},mode:G.FIXED,modes:[{id:G.FIXED,title:this.$Labels.modal_MLB_DateTime_Mode_Picklist_Fixed},{id:G.LITERAL,title:this.$Labels.modal_MLB_DateTime_Mode_Picklist_Literal}],Modes:G,time:""}},computed:{showLiteralN(){return this.literalOption.variable}},watch:{"$attrs.value":{handler(e){e&&"NULL"!==e?this.setLocalValuesByBinding():this.$emit(`update:${this.$attrs.valueString}`,"NULL")},immediate:!0}},methods:{getValidationMessages:(0,g.ed)(q.date),setLocalValuesByBinding(){let e=this.$attrs.value;if(this.$attrs.isMarkerStyleFilter&&!window.moment(e).isValid()){e=e.replace(/\s/g,"_");const t=e.match(/\d+/);if(t){const s=t[0];e=`${e.replace(/\d+/,"N")}:${s}`}}const t=e.split(":"),s=this.literals.findIndex((e=>e.id===t[0]));-1!==s?(this.mode=this.Modes.LITERAL,this.literalOption=this.literals[s],[this.literal,this.literalN=""]=t):(this.mode=this.Modes.FIXED,e&&(this.date=window.moment(e),this.$attrs.hasTime&&(this.time=this.date.format("h:mm a"))))},onLiteralClear(){this.literalN="",this.literalOption={},this.updateSyncValue()},onSelectOption(e){this.literalOption=e,this.updateSyncValue()},updateSyncValue(){let e="NULL";if(this.mode===G.FIXED)if(this.$v.literal.$reset(),this.date){let t=window.moment(this.date).set({hour:0,minute:0,second:0,millisecond:0});this.$attrs.hasTime&&this.time&&(t=window.moment(`${t.format(z)} ${this.time}`,"YYYY-MM-DD h:mm A")),e=this.$attrs.hasTime?t.toISOString():t.format(z)}else this.time="";else this.mode===G.LITERAL&&(this.$v.date.$reset(),this.literal&&(this.literalOption.variable?e=this.$attrs.isMarkerStyleFilter?this.literal.replace(/(N)_/,`${this.literalN||1}_`).replace(/_/g," "):`${this.literal}:${this.literalN||1}`:(e=this.$attrs.isMarkerStyleFilter?this.literal.replace(/_/g," "):this.literal,this.literalN="")));this.$emit(`update:${this.$attrs.valueString}`,e)}}},Y=(0,L.Z)(H,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Layout",{staticClass:"slds-gutters_xx-small"},[s("LayoutItem",{staticClass:"slds-col slds-grow-none"},[s("Picklist",{attrs:{labels:{name:e.$attrs.labels.type},options:e.modes},on:{changed:e.updateSyncValue},model:{value:e.mode,callback:function(t){e.mode=t},expression:"mode"}})],1),e._v(" "),e.mode===e.Modes.FIXED?[s("LayoutItem",{staticClass:"slds-col slds-grow-none"},[s("DatePicker",{attrs:{dateFormat:e.$User.dateFormat.toUpperCase(),errors:e.getValidationMessages(e.$v.date),labels:{name:e.$attrs.labels.date},locale:e.$User.UserLocale,detach:""},on:{changed:e.updateSyncValue},model:{value:e.$v.date.$model,callback:function(t){e.$set(e.$v.date,"$model",t)},expression:"$v.date.$model"}})],1),e._v(" "),s("LayoutItem",{staticClass:"slds-col slds-grow-none"},[s("TimePicker",{attrs:{disabled:!e.$attrs.hasTime||!e.date,combobox:"",labels:{name:e.$attrs.labels.time}},on:{changed:e.updateSyncValue},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1)]:e.mode===e.Modes.LITERAL?[s("LayoutItem",{staticClass:"slds-col slds-grow-none"},[s("Picklist",{attrs:{labels:{name:e.$attrs.labels.date},options:e.literals,errors:e.getValidationMessages(e.$v.literal),filterable:"",resizeToFitContent:""},on:{clear:e.onLiteralClear,"selected-option":e.onSelectOption},model:{value:e.$v.literal.$model,callback:function(t){e.$set(e.$v.literal,"$model",t)},expression:"$v.literal.$model"}})],1),e._v(" "),s("LayoutItem",{staticClass:"slds-col"},[s("TextInput",{attrs:{labels:{name:e.$Labels.modal_MLB_Condition_DateTime_Value_of_N},disabled:!e.showLiteralN,errors:e.getValidationMessages(e.$v.literalN)},on:{changed:e.updateSyncValue},model:{value:e.$v.literalN.$model,callback:function(t){e.$set(e.$v.literalN,"$model",t)},expression:"$v.literalN.$model"}})],1)]:e._e()],2)}),[],!1,null,"a8010312",null).exports,Z=function(e,t,s){return e("Instance",{on:this.$listeners,attrs:{...this.$attrs,hasTime:this.$attrs.displayType===d.xq.DATETIME,labels:s,value:this.$attrs[t],valueString:t}})},W={name:"DateTimeValueType",components:{Instance:Y},inheritAttrs:!1,render(e){return this.$attrs.range?e("div",{class:"slds-form-element"},[e("label",{class:"slds-form-element__label"},[this.$Labels.modal_MLB_DateTime_Range_Label]),e("div",{class:"slds-col slds-grow-none margin-top-auto slds-box",attrs:{style:"background: #eee; padding: 4px 10px;"}},[Z.call(this,e,"value",{type:this.$Labels.modal_MLB_DateTime_Mode_Picklist_Start_Label,date:this.$Labels.modal_MLB_DateTime_Date_Component_Start_Label,time:this.$Labels.modal_MLB_DateTime_Time_Component_Start_Label}),Z.call(this,e,"value2",{type:this.$Labels.modal_MLB_DateTime_Mode_Picklist_End_Label,date:this.$Labels.modal_MLB_DateTime_Date_Component_End_Label,time:this.$Labels.modal_MLB_DateTime_Time_Component_End_Label})])]):Z.call(this,e,"value",{type:this.$Labels.modal_MLB_DateTime_Mode_Picklist_Label,date:this.$Labels.modal_MLB_DateTime_Date_Component_Label,time:this.$Labels.modal_MLB_DateTime_Time_Component_Label})}},K=new n.pT(["FIXED","VARIABLE"]),X={id:":Dynamic",title:window.MASystem.Labels.modal_MLB_Dynamic_Filter_Dynamic},Q={name:"IdValueType",components:{ActionMenu:a.PC,ActionMenuItem:a.F9,Picklist:a.Gp,TextInput:a.oi},extends:v,inheritAttrs:!1,data:()=>({options:[],Types:K,type:K.FIXED,variableValue:""}),computed:{isFixed(){return this.type===K.FIXED},isVariable(){return this.type===K.VARIABLE},isMenuDisabled(){return["Task","Event"].includes(this.store.layer.baseObject)}},created(){const e=[{id:":UserId",title:window.MASystem.Labels.modal_MLB_Dynamic_Filter_UserID},{id:":DirectReportIds",title:window.MASystem.Labels.modal_MLB_Dynamic_Filter_DirectReportIDs},{id:":SubordinateIds",title:window.MASystem.Labels.modal_MLB_Dynamic_Filter_SubordinateIDs},{id:":TeamAccountIds",title:window.MASystem.Labels.modal_MLB_Dynamic_Filter_TeamAccountIDs}],{sobjects:t=[],referenceSObjects:s=[]}=this.$attrs.option;(s&&s.includes("User")||t&&t.includes("User"))&&e.unshift(X),this.options=e,e.find((e=>e.id===this.$attrs.value))&&(this.type=K.VARIABLE,this.variableValue=this.$attrs.value)},methods:{setType(e){this.type=e,this.variableValue="",this.$emit("update:value","")}}},J=(0,L.Z)(Q,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Layout",{staticClass:"slds-gutters_xx-small",attrs:{verticalAlign:"end"}},[s("LayoutItem",{staticClass:"slds-col"},[e.isFixed?s("TextInput",{attrs:{value:e.$attrs.value,labels:{name:e.$Labels.modal_MLB_Condition_Value},disabled:e.$attrs.disabled},on:{changed:function(t){return e.$emit("update:value",t)}}}):e._e(),e._v(" "),e.isVariable?s("Picklist",{attrs:{disabled:e.$attrs.disabled,labels:{name:e.$Labels.modal_MLB_Condition_Value},options:e.options},on:{changed:function(t){return e.$emit("update:value",t)}},model:{value:e.variableValue,callback:function(t){e.variableValue=t},expression:"variableValue"}}):e._e()],1),e._v(" "),e.$attrs.disableDynamicOptions?e._e():s("LayoutItem",{staticClass:"slds-col"},[s("ActionMenu",{staticClass:"slds-form-element__control",attrs:{disabled:e.isMenuDisabled,isActionMenu:!1}},[s("ActionMenuItem",{attrs:{label:e.$Labels.modal_MLB_Dynamic_Filter_Mode_Picklist_Fixed,selected:e.isFixed},on:{click:function(t){return e.setType(e.Types.FIXED)}}}),e._v(" "),s("ActionMenuItem",{attrs:{label:e.$Labels.modal_MLB_Dynamic_Filter_Mode_Picklist_Variable,selected:e.isVariable},on:{click:function(t){return e.setType(e.Types.VARIABLE)}}})],1)],1)],1)}),[],!1,null,null,null).exports,ee={name:"PicklistValueType",components:{Picklist:a.Gp},data:()=>({values:[]}),watch:{"$attrs.value":{handler(){var e;this.values=(e=this.$attrs.value)?e.split("~~"):[]},immediate:!0},values(){this.$emit("update:value",this.values.join("~~"))}}},te=(0,L.Z)(ee,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("Picklist",{attrs:{labels:{name:e.$Labels.modal_MLB_Condition_Value},disabled:e.$attrs.disabled,options:e.$attrs.option.picklistOptions,multiselectDialog:"",resizeToFitContent:""},model:{value:e.values,callback:function(t){e.values=t},expression:"values"}})}),[],!1,null,null,null).exports,se=[d.xq.CURRENCY,d.xq.DOUBLE,d.xq.INTEGER,d.xq.PERCENT],ae={name:"TextValueType",components:{TextInput:a.oi},extends:v,inheritAttrs:!1,validations(){const e={$attrs:{value:{},value2:{}}};return se.includes(this.$attrs.displayType)&&(e.$attrs={value:{decimal:V.gH},value2:{decimal:V.gH}}),e},computed:{computedDisplayType(){let e="string";const{displayType:t}=this.$attrs;return se.includes(t)&&(e="number"),e},typeErrors(){let e={};return q[this.computedDisplayType]&&(e=q[this.computedDisplayType]),e}},methods:{getValidationMessagesByType(e){return(0,g.ed)(this.typeErrors)(e)}}},ie=(0,L.Z)(ae,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Layout",{staticClass:"slds-gutters_xx-small"},[s("LayoutItem",{staticClass:"slds-col"},[s("TextInput",{attrs:{labels:{name:e.$attrs.range?e.$Labels.modal_MLB_Condition_Value_From:e.$Labels.modal_MLB_Condition_Value},disabled:e.$attrs.disabled,errors:e.getValidationMessagesByType(e.$v.$attrs.value)},on:{changed:function(t){return e.$emit("update:value",t)}},model:{value:e.$v.$attrs.value.$model,callback:function(t){e.$set(e.$v.$attrs.value,"$model",t)},expression:"$v.$attrs.value.$model"}})],1),e._v(" "),e.$attrs.range?s("LayoutItem",{staticClass:"slds-col"},[s("TextInput",{attrs:{labels:{name:e.$Labels.modal_MLB_Condition_Value_To},disabled:e.$attrs.disabled,errors:e.getValidationMessagesByType(e.$v.$attrs.value2)},on:{changed:function(t){return e.$emit("update:value2",t)}},model:{value:e.$v.$attrs.value2.$model,callback:function(t){e.$set(e.$v.$attrs.value2,"$model",t)},expression:"$v.$attrs.value2.$model"}})],1):e._e()],1)}),[],!1,null,null,null).exports,le={[d.xq.BOOLEAN]:"Boolean",[d.xq.CURRENCY]:"TextInput",[d.xq.DOUBLE]:"TextInput",[d.xq.DATE]:"DateTime",[d.xq.DATETIME]:"DateTime",[d.xq.EMAIL]:"TextInput",[d.xq.ENCRYPTEDSTRING]:"TextInput",[d.xq.ID]:"Id",[d.xq.INTEGER]:"TextInput",[d.xq.MULTIPICKLIST]:"Picklist",[d.xq.PICKLIST]:"Picklist",[d.xq.PHONE]:"TextInput",[d.xq.PERCENT]:"TextInput",[d.xq.REFERENCE]:"Id",[d.xq.STRING]:"TextInput",[d.xq.TEXTAREA]:"TextInput",[d.xq.URL]:"TextInput"},oe={name:"ConditionValue",components:{Boolean:P,DateTime:W,Id:J,Picklist:te,TextInput:ie},inheritAttrs:!1,props:{displayType:{type:n.Jr,default:()=>d.xq.STRING}},data:()=>({cmp:null}),watch:{displayType:{handler(){this.cmp=le[this.$props.displayType]},immediate:!0}}},re=(0,L.Z)(oe,(function(){var e=this,t=e.$createElement;return(e._self._c||t)(e.cmp,e._g(e._b({tag:"component"},"component",Object.assign({},e.$attrs,e.$props),!1),e.$listeners))}),[],!1,null,null,null).exports,ne={name:"OneFieldVaried",components:{TextInput:a.oi,MarkerStyling:E,ButtonIcon:a.Ei,ColorPicker:a.zH,ShapeSelector:I,ConditionValue:re,Picklist:a.Gp},extends:v,props:{color:Boolean,shape:Boolean,assignmentField:{type:String,required:!0},fieldLabel:{type:String,required:!0},displayType:{type:String,required:!0},picklistOptions:{type:String,required:!0},addShapeOrColor:{type:Function,required:!0},toValPropertyName:{type:String,required:!0}},data(){return{DisplayTypes:d.xq,otherPicklistOption:[{id:"<Other>",title:this.$Labels.modal_MLB_DO_One_Field_Varied_Label_Unspecified_Text}]}},computed:{gridIsReadOnly(){return"picklist"===this.$props.displayType||"boolean"===this.$props.displayType},allowGridModification(){return"picklist"!==this.$props.displayType&&"boolean"!==this.$props.displayType},computedDisplayType(){return h(this.$props.displayType)},operatorOptions(){let e=[{id:"equals",title:this.$Labels.modal_MLB_DO_One_Field_Varied_Text_Operator_Equals}];return $[this.computedDisplayType]&&(e=$[this.computedDisplayType]),e},showRangeInput(){return"number"===this.$props.displayType||"date"===this.$props.displayType},showOperatorSelect(){return"number"!==this.$props.displayType&&"date"!==this.$props.displayType},fieldPicklistOptions(){return this.store.metadata.markerStyle[this.$props.picklistOptions]}},mounted(){this.setFocusOnRow()},methods:{addBelow(e){this.$emit("add-row",{index:e})},removeRow(e){this.store.layer[this.$props.assignmentField].splice(e,1),this.$nextTick((()=>{const t=this.store.layer[this.$props.assignmentField].length;if(t>1){let s=e;e===t-1&&(s=e-1),this.$refs[`add-${s}`][0].focus()}}))},isNotLastElement(e){return this.store.layer[this.$props.assignmentField].length-1!==e},setFocusOnRow(e){this.$nextTick((()=>{const t=this.store.layer[this.$props.assignmentField].length;let s=t-2;void 0!==e&&(s=e),t>1&&!this.gridIsReadOnly&&this.$refs[`add-${s}`][0].focus()}))}}},de=(0,L.Z)(ne,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",e._l(e.store.layer[e.$props.assignmentField],(function(t,a){return s("Layout",{key:t.id,staticClass:"slds-gutters_xx-small",attrs:{verticalAlign:"start"}},[e.allowGridModification?s("LayoutItem",{staticClass:"slds-col slds-grow-none slds-m-right_medium",staticStyle:{"margin-top":"1.5rem"}},[s("ButtonIcon",{ref:"add-"+a,refInFor:!0,attrs:{disabled:!e.isNotLastElement(a),iconCategory:"utility",iconName:"add",variant:"border-filled",assistiveText:e.$Labels.modal_MLB_DO_One_Field_Varied_Assist_Text_add,title:e.$Labels.modal_MLB_DO_One_Field_Varied_Assist_Text_add},on:{click:function(t){return e.addBelow(a)}}})],1):e._e(),e._v(" "),s("LayoutItem",{staticClass:"slds-col slds-grow-none slds-shrink-none"},[s("TextInput",{ref:"label-"+a,refInFor:!0,attrs:{labels:{name:e.$Labels.modal_MLB_DO_One_Field_Varied_Label_Read_Only},readonly:"",value:e.store.metadata.markerStyle[e.$props.fieldLabel]}})],1),e._v(" "),e.showOperatorSelect?s("LayoutItem",{staticClass:"slds-col slds-grow-none",attrs:{size:"2"}},[s("Picklist",{attrs:{labels:{name:e.$Labels.modal_MLB_DO_One_Field_Varied_Label_Form_Control_Op},options:e.operatorOptions,disabled:!e.isNotLastElement(a)||e.gridIsReadOnly},model:{value:t.operator,callback:function(s){e.$set(t,"operator",s)},expression:"assignment.operator"}})],1):e._e(),e._v(" "),s("LayoutItem",{staticClass:"slds-col slds-grow-none",attrs:{size:e.showRangeInput?5:2}},["<Other>"!==t.comparevalue?s("ConditionValue",{attrs:{displayType:e.computedDisplayType,value:t.comparevalue,value2:t[e.$props.toValPropertyName],option:{picklistOptions:e.fieldPicklistOptions},disabled:e.gridIsReadOnly||!e.isNotLastElement(a),disableDynamicOptions:"true",isMarkerStyleFilter:"true",range:e.showRangeInput},on:{"update:value":function(s){return e.$set(t,"comparevalue",s)},"update:value2":function(s){return e.$set(t,e.$props.toValPropertyName,s)}}}):[s("Layout",{staticClass:"slds-gutters_xx-small"},[s("LayoutItem",{attrs:{flexibility:"auto"}},[s("TextInput",{attrs:{value:e.$Labels.modal_MLB_DO_One_Field_Varied_Label_Unspecified_Text,labels:{name:e.showRangeInput?e.$Labels.modal_MLB_Condition_Value_From:e.$Labels.modal_MLB_DO_One_Field_Varied_Label_Form_Control_Val},disabled:""}})],1),e._v(" "),e.showRangeInput?s("LayoutItem",{attrs:{flexibility:"auto"}},[s("TextInput",{attrs:{value:e.$Labels.modal_MLB_DO_One_Field_Varied_Label_Unspecified_Text,labels:{name:e.$Labels.modal_MLB_Condition_Value_To},disabled:""}})],1):e._e()],1)]],2),e._v(" "),s("LayoutItem",{staticClass:"slds-col slds-grow-none"},[s("Layout",{staticClass:"slds-gutters_xx-small"},[e.$props.shape&&e.$props.color?s("LayoutItem",{staticClass:"slds-col"},[s("MarkerStyling",{attrs:{hasColor:e.$props.color},model:{value:t.value,callback:function(s){e.$set(t,"value",s)},expression:"assignment.value"}})],1):e.$props.color?s("LayoutItem",{staticClass:"slds-col"},[s("ColorPicker",{model:{value:t.value,callback:function(s){e.$set(t,"value",s)},expression:"assignment.value"}})],1):s("LayoutItem",{staticClass:"slds-col"},[s("ShapeSelector",{model:{value:t.value,callback:function(s){e.$set(t,"value",s)},expression:"assignment.value"}})],1),e._v(" "),s("LayoutItem",{staticClass:"slds-col"},[s("ButtonIcon",{staticStyle:{"margin-top":"1.5rem"},attrs:{iconCategory:"utility",iconName:"delete",variant:"border-filled",assistiveText:e.$Labels.modal_MLB_DO_One_Field_Varied_Assist_Text_delete,disabled:!e.isNotLastElement(a)||!e.allowGridModification,title:e.$Labels.modal_MLB_DO_One_Field_Varied_Assist_Text_delete},on:{click:function(t){return e.removeRow(a)}}})],1)],1)],1)],1)})),1)}),[],!1,null,null,null).exports,ce=()=>{const e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"];let t="#";for(let s=0;s<6;s++)t+=e[Math.floor(16*Math.random())];return t},pe={name:"DivisionGenerator",components:{TextInput:a.oi,Checkbox:a.XZ,Button:a.zx,Popover:a.J2},data:()=>({showPopover:!1,generateDivisionsFrom:"",generateDivisionsTo:"",numberOfDivisions:"",overwrite:!0,disableGenerate:!1}),methods:{generateDivisions(){const{generateDivisionsFrom:e,generateDivisionsTo:t,numberOfDivisions:s,overwrite:a}=this,i=(({generateDivisionsFrom:e,generateDivisionsTo:t,numberOfDivisions:s})=>{const a=Number(e),i=Number(t),l=Number(s),o=Math.ceil((i-a)/l);let r=a;const n=[];for(let e=1;e<=l;e++){const t=l===e?o:o-1,s=l===e?i:r+t;n.push([r,s]),r+=o}return n})({generateDivisionsFrom:e,generateDivisionsTo:t,numberOfDivisions:s});this.$emit("generate",{divisions:i,overwrite:a}),this.generateDivisionsFrom="",this.generateDivisionsTo="",this.numberOfDivisions="",this.showPopover=!1},validateNumOfDivisions(){const e=Number(this.numberOfDivisions);return e&&e>50?(this.disableGenerate=!0,[this.$Labels.modal_MLB_DO_Generate_Divisions_Validator]):(this.disableGenerate=!1,[])}}},_e=(0,L.Z)(pe,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Button",{staticClass:"slds-form-element__control",attrs:{label:e.$Labels.modal_MLB_DO_One_Field_Varied_Btn_Generate_Div,variant:"base"},on:{click:function(t){e.showPopover=!e.showPopover}}}),e._v(" "),e.showPopover?s("Popover",{on:{close:function(t){e.showPopover=!1}}},[s("template",{slot:"header"},[e._v("\n            "+e._s(e.$Labels.modal_MLB_DO_One_Field_Varied_Btn_Generate_Div)+"\n        ")]),e._v(" "),s("div",{attrs:{slot:"content"},slot:"content"},[s("TextInput",{attrs:{labels:{name:e.$Labels.modal_MLB_DO_One_Field_Varied_Text_Operator_From},type:"number"},model:{value:e.generateDivisionsFrom,callback:function(t){e.generateDivisionsFrom=t},expression:"generateDivisionsFrom"}}),e._v(" "),s("TextInput",{attrs:{labels:{name:e.$Labels.modal_MLB_DO_One_Field_Varied_Text_Operator_To},type:"number"},model:{value:e.generateDivisionsTo,callback:function(t){e.generateDivisionsTo=t},expression:"generateDivisionsTo"}}),e._v(" "),s("TextInput",{attrs:{labels:{name:e.$Labels.modal_MLB_DO_One_Field_Varied_Text_Input_Label_NumDiv},errors:e.validateNumOfDivisions(),type:"number"},model:{value:e.numberOfDivisions,callback:function(t){e.numberOfDivisions=t},expression:"numberOfDivisions"}}),e._v(" "),s("Checkbox",{staticClass:"slds-p-top_xx-small",attrs:{labels:{name:e.$Labels.modal_MLB_DO_One_Field_Varied_CB_Overwrite_Label}},model:{value:e.overwrite,callback:function(t){e.overwrite=t},expression:"overwrite"}})],1),e._v(" "),s("div",{staticClass:"slds-clearfix",attrs:{slot:"footer"},slot:"footer"},[s("div",{staticClass:"slds-float_right"},[s("Button",{attrs:{title:"Cancel",variant:"neutral"},on:{click:function(t){e.showPopover=!1}}},[e._v("\n                    "+e._s(e.$Labels.modal_MLB_DO_One_Field_Varied_Btn_Cancel)+"\n                ")]),e._v(" "),s("Button",{attrs:{title:"Generate",variant:"brand",disabled:e.disableGenerate},on:{click:e.generateDivisions}},[e._v("\n                    "+e._s(e.$Labels.modal_MLB_DO_One_Field_Varied_Btn_Generate)+"\n                ")])],1)])],2):e._e()],1)}),[],!1,null,null,null).exports,me={required:window.MASystem.Labels.MA_Field_Req,parentRequired:window.MASystem.Labels.MA_Field_Req},ue={name:"MarkerFieldSelection",components:{Picklist:a.Gp},extends:v,props:{labelForId:{type:String,default:""},value:{type:String,default:""},size:{type:Number,default:3},labels:{type:Object,default:()=>{}},baseObject:{type:String,default:""}},data:()=>({fields:[],mainValue:"",parentValue:"",parentReferenceData:{baseType:"",currentBaseObjectName:"",fieldType:"",parentFieldOptions:[],isUpdated:!1},isLookup:!1,isPolymorphic:!1,picklistLabels:{}}),validations:{mainValue:{required:M.required},parentValue:{parentRequired:(e,t)=>{let s=!0;return t.isLookup&&(s=(0,M.required)(e)),s}}},computed:{field(){let e="";const t=this.store.layer.baseObjectPolymorphicObject&&this.mainValue.split(".")[0]===this.store.layer.baseObjectAddressObject;return this.parentValue&&t?e=`${this.store.layer.baseObjectPolymorphicObject}::${this.parentValue}`:this.parentValue&&this.isLookup?e=`${this.mainValue.replace("__c.lookup","__r").replace("Id.lookup","")}.${this.parentValue}`:this.mainValue&&!this.isLookup&&(e=this.mainValue),e}},async created(){this.fields=await _({sobject:this.store.layer.baseObject,includeDedicatedLookupOptions:!0}),await this.setPicklistFieldValues(this.$props.value)},methods:{getValidationMessages:(0,g.ed)(me),async setPicklistFieldValues(e){const t=new RegExp("::|\\.");[this.mainValue="",this.parentValue=""]=e.split(t),this.isPolymorphic=e.indexOf("::")>-1,this.isPolymorphic?this.mainValue=`${this.store.layer.baseObjectAddressObject}.lookup`:(this.parentValue||this.isLookup)&&(this.mainValue=this.mainValue.indexOf("__r")>-1?this.mainValue.replace("__r","__c.lookup"):`${this.mainValue}Id.lookup`),(this.parentValue||this.isLookup)&&(this.isLookup=!0,this.parentReferenceData.isUpdated||await this.getParentReferenceData()),this.getFieldMetaData(this.isLookup)},async handleValueChange(e){this.resetValues(),this.isLookup=e.isLookup,this.isLookup?await this.getParentReferenceData():await this.getFieldMetaData()},async getParentReferenceData(){try{this.store.callouts++;const e=this.fields.find((e=>e.apiName===this.mainValue)),t=await _({sobject:e.referenceSObjects});this.parentReferenceData={baseType:e.displayType,currentBaseObjectName:e.referenceSObjects[0],fieldType:e.soapType,parentFieldOptions:t,isUpdated:!0}}catch(e){this.genericExceptionHandler(e)}finally{this.store.callouts--}},resetValues(){this.parentValue="",this.isLookup=!1,this.isPolymorphic=!1,this.parentReferenceData={baseType:"",currentBaseObjectName:"",fieldType:"",parentFieldOptions:[],isUpdated:!1},this.$emit("clear"),this.$v.parentValue.$reset()},resetParentValues(){this.parentValue="",this.$emit("clear")},async handleParentChange(){await this.getFieldMetaData(!0)},async getFieldMetaData(e){let t=null;t=e?this.parentReferenceData.parentFieldOptions.find((e=>e.apiName===this.parentValue)):this.fields.find((e=>e.apiName===this.mainValue)),t&&this.$emit("changed",{baseType:t.displayType.toUpperCase(),fieldType:t.soapType,field:t,value:this.field}),this.$emit("update:value",this.field)},toProperCase:e=>e.replace(/\w\S*/g,(e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase())),focus(){this.$refs.focusTarget2?this.$refs.focusTarget2.focus():this.$refs.focusTarget1.focus()}}},he=(0,L.Z)(ue,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("LayoutItem",{attrs:{size:e.$props.size}},[s("Layout",[s("LayoutItem",{staticClass:"slds-align-middle",attrs:{size:"12"}},[s("Picklist",{ref:"focusTarget1",attrs:{errors:e.getValidationMessages(e.$v.mainValue),required:"",options:e.fields,labels:e.$props.labels,filterable:"",idKey:"apiName",titleKey:"label",resizeToFitContent:"",labelForId:e.isLookup?"default":e.$props.labelForId},on:{"selected-option":e.handleValueChange,clear:e.resetValues},model:{value:e.$v.mainValue.$model,callback:function(t){e.$set(e.$v.mainValue,"$model",t)},expression:"$v.mainValue.$model"}}),e._v(" "),e.isLookup?s("Picklist",{ref:"focusTarget2",attrs:{required:"",filterable:"",resizeToFitContent:"",labelForId:e.$props.labelForId,options:e.parentReferenceData.parentFieldOptions,errors:e.getValidationMessages(e.$v.parentValue),idKey:"apiName",titleKey:"label"},on:{"selected-option":e.handleParentChange,clear:e.resetParentValues},model:{value:e.$v.parentValue.$model,callback:function(t){e.$set(e.$v.parentValue,"$model",t)},expression:"$v.parentValue.$model"}}):e._e()],1)],1)],1)}),[],!1,null,null,null).exports,ye={name:"MarkerStyling",components:{Button:a.zx,MarkerStyleGrid:de,DivisionGenerator:_e,FieldSelection:he},extends:v,props:{color:Boolean,shape:Boolean,picklistLabel:{type:String,required:!1,default:""}},data:()=>({processSavedData:!1,isFieldSelected:!1}),computed:{isShapeOnlyMode(){return this.shape&&!this.color},computedDisplayType(){return(e=>{switch(this.store.metadata.markerStyle[this.computedFieldDataType]){case"currency":case"double":case"integer":case"percent":return"number";case"reference":case"string":case"textarea":case"url":case"phone":case"combobox":case"id":return"string";case"picklist":case"boolean":return"picklist";case"multipicklist":return"multipicklist";case"date":case"datetime":return"date";default:return null}})()},computedAssignmentField(){return this.isShapeOnlyMode?"shapeAssignment":"colorAssignment"},computedField(){return this.isShapeOnlyMode?"shapePicklistField":"picklistField"},computedToValPropertyName(){return"date"===this.computedDisplayType?"enddate":"toVal"},computedFieldDataType(){return this.isShapeOnlyMode?"shapeFieldDataType":"fieldDataType"},computedFieldLabel(){return this.isShapeOnlyMode?"shapeFieldLabel":"fieldLabel"},computedPicklistOptions(){return this.isShapeOnlyMode?"shapePicklistOptions":"colorPicklistOptions"},showDivisionGenerator(){return"number"===this.computedDisplayType},showAddRowButton(){const e=this.store.metadata.markerStyle[this.computedFieldDataType];return!["picklist","boolean"].includes(e)}},created(){this.store.layer[this.computedField]&&(this.processSavedData=!0),this.validateAssignmentData()},methods:{resetFieldType(){this.store.layer.colorAssignmentType===ke.ONE_VARIED&&this.$emit("resetAutoAssignData"),this.isFieldSelected=!1,this.store.metadata.markerStyle[this.computedFieldDataType]=""},async setPicklistFieldAndColorAssignment(e){const{field:t}=e,{apiName:s,displayType:a,label:i,picklistOptions:l}=t;if(this.store.metadata.markerStyle[this.computedFieldDataType]=a,this.store.metadata.markerStyle[this.computedFieldLabel]=i,this.store.layer[this.computedField]=s,this.isFieldSelected=!0,"boolean"===a?this.store.metadata.markerStyle[this.computedPicklistOptions]=[{id:"True",title:this.$Labels.MA_True},{id:"False",title:this.$Labels.MA_False}]:"picklist"!==a&&"multipicklist"!==this.computedDisplayType||(this.store.metadata.markerStyle[this.computedPicklistOptions]=l),this.processSavedData)return void(this.processSavedData=!1);const o=this.getValidOperator();let r=!1,d=!1;if(this.store.layer[this.computedAssignmentField].length=0,"picklist"===this.computedDisplayType?"boolean"===this.store.metadata.markerStyle[this.computedFieldDataType]?this.store.layer[this.computedAssignmentField].push({id:(0,n.x$)(),operator:o,comparevalue:"True",value:this.generateColorAndShapeValue()},{id:(0,n.x$)(),operator:o,comparevalue:"False",value:this.generateColorAndShapeValue()}):(l.forEach((e=>{this.store.layer[this.computedAssignmentField].push({id:(0,n.x$)(),operator:o,comparevalue:e.id,value:this.generateColorAndShapeValue()})})),r=!0):null!==this.computedDisplayType&&(r=!0,d=!0),d){const e={id:(0,n.x$)(),operator:o,comparevalue:"",[this.computedToValPropertyName]:"",value:this.generateColorAndShapeValue()};this.store.layer[this.computedAssignmentField].push(e)}if(r){const e={id:(0,n.x$)(),operator:o,comparevalue:"<Other>",[this.computedToValPropertyName]:"<Other>",value:this.generateColorAndShapeValue()};this.store.layer[this.computedAssignmentField].push(e)}},addRow({index:e}){let t=0;void 0!==e&&(t=e+1);const s=this.getValidOperator();this.store.layer[this.computedAssignmentField].splice(t,0,{id:(0,n.x$)(),operator:s,comparevalue:"",[this.computedToValPropertyName]:"",value:this.generateColorAndShapeValue()}),this.$refs.markerStyleGrid.setFocusOnRow(t)},onGenerateDivision({divisions:e,overwrite:t}){t&&(this.store.layer[this.computedAssignmentField].length=0,this.store.layer[this.computedAssignmentField].push({id:(0,n.x$)(),operator:"currency",comparevalue:"<Other>",toVal:"<Other>",value:this.generateColorAndShapeValue()}));for(let t=e.length-1;t>=0;t--){const[s,a]=e[t];this.store.layer[this.computedAssignmentField].unshift({id:(0,n.x$)(),comparevalue:s.toString(),operator:"currency",toVal:a.toString(),value:this.generateColorAndShapeValue()})}this.$refs.markerStyleGrid.setFocusOnRow()},randomizeColors(){const{shape:e,color:t}=this,s=(a=this.store.layer[this.computedAssignmentField],i={shape:e,color:t},a.map((e=>{const{shape:t}=i;let s=null;if(t){const[,t]=e.value.split(":");s=`${ce()}:${t}`}else s=ce();return{...e,value:s}})));var a,i;this.store.layer[this.computedAssignmentField]=s},randomizeShapes(){const{shape:e,color:t}=this,s=((e,t)=>{const{shape:s,color:a}=t,{MAMarkerBuilder:{shapes:i}}=window,l=Object.keys(i);return e.map((e=>{const t=Math.floor(Math.random()*l.length);let i=null;if(s&&a){const[s]=e.value.split(":");i=`${s}:${l[t]}`}else i=l[t];return{...e,value:i}}))})(this.store.layer[this.computedAssignmentField],{shape:e,color:t});this.store.layer[this.computedAssignmentField]=[],this.$nextTick((()=>{this.store.layer[this.computedAssignmentField]=s}))},generateColorAndShapeValue(){return this.color&&this.shape?"#00FF00:Marker":this.color?"#00FF00":this.shape?"Marker":null},getValidOperator(){let e="equals";const t=this.store.metadata.markerStyle[this.computedFieldDataType],s=h(t);if($[s]){const t=$[s],[a]=t;e=a.id}return e},validateAssignmentData(){Array.isArray(this.store.layer.colorAssignment)&&!this.isShapeOnlyMode&&this.store.layer.colorAssignment.forEach((e=>{if(e.operator||(e.operator=this.getValidOperator()),this.color&&this.shape){const[t="#00FF00",s="Marker"]=e.value.split(":");e.value=`${t}:${s}`}else e.value||(e.value="#00FF00")})),Array.isArray(this.store.layer.shapeAssignment)&&this.isShapeOnlyMode&&this.store.layer.shapeAssignment.forEach((e=>{e.operator||(e.operator=this.getValidOperator()),e.value||(e.value="Marker")}))}}},be=ye,Le=(0,L.Z)(be,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Layout",{staticClass:"slds-gutters_xx-small",attrs:{verticalAlign:"end"}},[s("LayoutItem",{staticClass:"slds-col slds-grow-none"},[s("FieldSelection",{attrs:{value:e.store.layer[e.computedField],size:12,baseObject:e.store.layer.baseObject,labels:{name:e.$props.picklistLabel}},on:{"update:value":function(t){return e.$set(e.store.layer,e.computedField,t)},clear:e.resetFieldType,changed:e.setPicklistFieldAndColorAssignment}})],1),e._v(" "),e.isFieldSelected?[e.showAddRowButton?s("LayoutItem",{staticClass:"slds-col slds-grow-none"},[s("Button",{staticClass:"slds-form-element__control",attrs:{label:e.$Labels.modal_MLB_DO_One_Field_Varied_Btn_Add_Row,variant:"neutral"},on:{click:e.addRow}})],1):e._e(),e._v(" "),e.showDivisionGenerator?s("LayoutItem",{staticClass:"slds-col slds-grow-none"},[s("DivisionGenerator",{on:{generate:e.onGenerateDivision}})],1):e._e()]:e._e(),e._v(" "),e.isFieldSelected?s("LayoutItem",{staticClass:"slds-col",attrs:{size:"6",alignmentBump:"left"}},[s("div",{staticClass:"slds-button-group",attrs:{role:"group"}},[e.color?s("Button",{staticClass:"slds-form-element__control",attrs:{label:e.$Labels.modal_MLB_DO_One_Field_Varied_Btn_Random_Colors,variant:"neutral"},on:{click:e.randomizeColors}}):e._e(),e._v(" "),e.shape?s("Button",{staticClass:"slds-form-element__control",attrs:{label:e.$Labels.modal_MLB_DO_One_Field_Varied_Btn_Random_Shapes,variant:"neutral"},on:{click:e.randomizeShapes}}):e._e()],1)]):e._e()],2),e._v(" "),e.isFieldSelected?s("MarkerStyleGrid",{ref:"markerStyleGrid",staticClass:"slds-m-top_medium",attrs:{color:e.$props.color,shape:e.$props.shape,assignmentField:e.computedAssignmentField,fieldLabel:e.computedFieldLabel,displayType:e.computedDisplayType,addShapeOrColor:e.generateColorAndShapeValue,picklistOptions:e.computedPicklistOptions,toValPropertyName:e.computedToValPropertyName},on:{"add-row":e.addRow}}):e._e()],1)}),[],!1,null,null,null).exports,ve={name:"LabeledPins",components:{MarkerStyle:Le,TextInput:a.oi},extends:v,beforeDestroy(){this.store.metadata.markerStyle.fieldDataType="",this.store.metadata.markerStyle.fieldLabel="",this.store.layer.picklistField=""}},fe=(0,L.Z)(ve,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Layout",[s("LayoutItem",{attrs:{size:"12"}},[s("Layout",[s("LayoutItem",{attrs:{size:"12"}},[s("TextInput",{attrs:{labels:{name:e.$Labels.modal_MLB_DO_Labeled_Pins_Label_Field_Text},readonly:"",value:e.store.layer.tooltip1Label,helpText:e.$Labels.modal_MLB_DO_Labeled_Pins_Label_Field_Help_Text}})],1)],1),e._v(" "),s("MarkerStyle",{attrs:{color:"",picklistLabel:e.$Labels.modal_MLB_DO_Labeled_Pins_Label_Field_Picklist_Label}})],1)],1)}),[],!1,null,null,null).exports,$e={name:"OneFieldOrdered",components:{Picklist:a.Gp,Checkbox:a.XZ},extends:v,data(){return{sortOptions:[{title:this.$Labels.modal_MLB_option_DO_section_Markers_modal_Sort_PL_Opt_Desc,id:"desc"},{title:this.$Labels.modal_MLB_option_DO_section_Markers_modal_Sort_PL_Opt_Asc,id:"asc"}]}},computed:{sortableFields(){return this.store.metadata.fields.filter((e=>e.isSortable&&!e.isLookup))},computedDrawLine:{get(){return!!Object.prototype.hasOwnProperty.call(this.store.layer.colorAssignment,"drawLine")&&this.store.layer.colorAssignment.drawLine},set(e){this.store.layer.colorAssignment={drawLine:e}}}}},Me=(0,L.Z)($e,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"slds-p-around_x-small"},[s("Layout",[s("LayoutItem",{attrs:{size:"4"}},[s("Picklist",{staticStyle:{"max-width":"15rem"},attrs:{labels:{name:e.$Labels.modal_MLB_option_DO_section_Markers_modal_OrderBy_PL_Label},options:e.sortableFields,idKey:"apiName",titleKey:"label",resizeToFitContent:"",filterable:""},model:{value:e.store.layer.rowOrder,callback:function(t){e.$set(e.store.layer,"rowOrder",t)},expression:"store.layer.rowOrder"}}),e._v(" "),s("Picklist",{staticStyle:{"max-width":"15rem"},attrs:{labels:{name:e.$Labels.modal_MLB_option_DO_section_Markers_modal_Sort_PL_Label},options:e.sortOptions},model:{value:e.store.layer.rowOrderDirection,callback:function(t){e.$set(e.store.layer,"rowOrderDirection",t)},expression:"store.layer.rowOrderDirection"}}),e._v(" "),s("Checkbox",{staticClass:"slds-p-top_xx-small",attrs:{labels:{name:e.$Labels.modal_MLB_option_DO_section_Markers_modal_OBOF_CB_Label}},model:{value:e.computedDrawLine,callback:function(t){e.computedDrawLine=t},expression:"computedDrawLine"}})],1)],1)],1)}),[],!1,null,null,null).exports,ge={name:"OneFieldVaried",components:{TextInput:a.oi,Picklist:a.Gp,Checkbox:a.XZ,ShapeSelector:I,MarkerStyle:Le},extends:v,data(){return{applicationOfShapes:[{id:"dynamic",title:this.$Labels.modal_MLB_DO_One_Field_Varied_Label_Or_Disabled_Random},{id:"static",title:this.$Labels.modal_MLB_DO_One_Field_Varied_PL_Uniform}],shape:"Marker"}},computed:{showDynamicAutoAssign(){const{fieldDataType:e}=this.store.metadata.markerStyle;return["reference","string","id"].includes(e)}},created(){if(this.store.layer.advancedOptions.markerShapeValue){const[,e]=this.store.layer.advancedOptions.markerShapeValue.split(":");this.shape=e}},beforeDestroy(){this.store.layer.advancedOptions.markerShapeType="static",this.store.layer.advancedOptions.otherthreshold="0",this.store.layer.advancedOptions.automaticassign=!1},methods:{resetAutoAssignData(){this.store.layer.advancedOptions.markerShapeType="dynamic",this.store.layer.advancedOptions.otherthreshold=".001",this.store.layer.advancedOptions.automaticassign=!1,delete this.store.layer.advancedOptions.markerShapeValue},setMarkerShapeValue(e){this.shape=e,this.store.layer.advancedOptions.markerShapeValue=`#00FF00:${e}`}}},Oe=(0,L.Z)(ge,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("MarkerStyle",{attrs:{color:"",shape:"",picklistLabel:e.$Labels.modal_MLB_DO_One_Field_Varied_PL_Style_Field},on:{resetAutoAssignData:e.resetAutoAssignData}}),e._v(" "),e.showDynamicAutoAssign?s("Layout",{staticClass:"slds-p-top_large",attrs:{multipleRows:""}},[s("LayoutItem",{attrs:{size:"12"}},[s("div",{staticClass:"slds-text-heading_small slds-text-title_bold"},[e._v(e._s(e.$Labels.modal_MLB_DO_One_Field_Varied_Text_Unspecified))])]),e._v(" "),s("LayoutItem",{staticClass:"slds-p-top_large",attrs:{size:"12"}},[s("Checkbox",{attrs:{labels:{name:e.$Labels.modal_MLB_DO_One_Field_Varied_CB_Label_Auto_Assign}},model:{value:e.store.layer.advancedOptions.automaticassign,callback:function(t){e.$set(e.store.layer.advancedOptions,"automaticassign",t)},expression:"store.layer.advancedOptions.automaticassign"}})],1),e._v(" "),e.store.layer.advancedOptions.automaticassign?[s("LayoutItem",{staticClass:"slds-p-top_small",attrs:{size:"12"}},[s("Layout",[s("LayoutItem",{attrs:{size:"2"}},[s("TextInput",{attrs:{labels:{name:e.$Labels.modal_MLB_DO_One_Field_Varied_Text_Label_Threshold},type:"number"},model:{value:e.store.layer.advancedOptions.otherthreshold,callback:function(t){e.$set(e.store.layer.advancedOptions,"otherthreshold",t)},expression:"store.layer.advancedOptions.otherthreshold"}})],1)],1)],1),e._v(" "),s("LayoutItem",{attrs:{size:"12"}},[s("Layout",[s("LayoutItem",{attrs:{size:"2"}},[s("Picklist",{attrs:{labels:{name:e.$Labels.modal_MLB_DO_One_Field_Varied_PL_App_Of_Shapes},options:e.applicationOfShapes},model:{value:e.store.layer.advancedOptions.markerShapeType,callback:function(t){e.$set(e.store.layer.advancedOptions,"markerShapeType",t)},expression:"store.layer.advancedOptions.markerShapeType"}})],1),e._v(" "),"static"===e.store.layer.advancedOptions.markerShapeType?s("LayoutItem",{staticClass:"slds-p-left_large",attrs:{size:"2"}},[s("ShapeSelector",{attrs:{value:e.shape},on:{input:e.setMarkerShapeValue}})],1):e._e()],1)],1),e._v(" "),s("LayoutItem",{attrs:{size:"12"}},[s("Layout",[s("LayoutItem",{attrs:{size:"1"}},[s("TextInput",{attrs:{labels:{name:e.$Labels.modal_MLB_DO_One_Field_Varied_Label_Marker_Color},type:"text",disabled:"",value:e.$Labels.modal_MLB_DO_One_Field_Varied_Label_Or_Disabled_Random}})],1)],1)],1)]:e._e()],2):e._e()],1)}),[],!1,null,null,null).exports,xe={name:"TwoFieldVaried",components:{MarkerStyle:Le},extends:v},Te=(0,L.Z)(xe,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Layout",{attrs:{multipleRows:"",verticalAlign:"center"}},[s("LayoutItem",{attrs:{size:"12"}},[s("p",{staticClass:"slds-text-heading_small slds-text-title_bold"},[e._v(e._s(e.$Labels.modal_MLB_DO_Two_Field_Varied_Shape_Section))])]),e._v(" "),s("LayoutItem",{staticClass:"slds-m-top_large",attrs:{size:"12"}},[s("MarkerStyle",{attrs:{shape:"",picklistLabel:e.$Labels.modal_MLB_DO_One_Field_Varied_PL_Style_Field}})],1),e._v(" "),s("LayoutItem",{staticClass:"slds-border_bottom slds-m-top_large slds-m-bottom_large",attrs:{size:"12"}}),e._v(" "),s("LayoutItem",{attrs:{size:"12"}},[s("p",{staticClass:"slds-text-heading_medium slds-text-title_bold"},[e._v(e._s(e.$Labels.modal_MLB_DO_Two_Field_Varied_Color_Section))])]),e._v(" "),s("LayoutItem",{staticClass:"slds-m-top_large",attrs:{size:"12"}},[s("MarkerStyle",{attrs:{color:"",picklistLabel:e.$Labels.modal_MLB_DO_Two_Field_Varied_Picklist_Label}})],1)],1)}),[],!1,null,null,null).exports,Se={name:"Uniform",components:{MarkerStyling:E},extends:v,data:()=>({style:""}),created(){this.store.metadata.mode!==d.nl.EDIT&&this.store.metadata.mode!==d.nl.PLOTTED_EDIT||this.store.layer.iconColor&&(this.style=this.store.layer.iconColor)},methods:{setStyle(e){this.store.layer.colorAssignmentType="Static",this.store.layer.iconColor=e}}},Be=(0,L.Z)(Se,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("MarkerStyling",{attrs:{hasColor:""},on:{input:e.setStyle},model:{value:e.style,callback:function(t){e.style=t},expression:"style"}})}),[],!1,null,null,null).exports,ke=Object.freeze({UNIFORM:"Static",ONE_VARIED:"Dynamic, Field",TWO_VARIED:"Dynamic-multiField",LABELED:"Dynamic-Label",ORDERED:"Dynamic-Order"}),De={name:"MLBDisplayMarkers",components:{VisualPicker:a.Tb,LabeledPins:fe,OneFieldOrdered:Me,OneFieldVaried:Oe,TwoFieldVaried:Te,Uniform:Be},extends:v,data(){return{MarkerStyles:ke,markerOptions:[{value:ke.UNIFORM,label:this.$Labels.modal_MLB_Display_Markers_Styles_Uniform,imageUrl:s(2026)},{value:ke.ONE_VARIED,label:this.$Labels.modal_MLB_Display_Markers_Styles_One_Varied,imageUrl:s(4622)},{value:ke.TWO_VARIED,label:this.$Labels.modal_MLB_Display_Markers_Styles_Two_Varied,imageUrl:s(4901)},{value:ke.LABELED,label:this.$Labels.modal_MLB_Display_Markers_Styles_Labeled_Pins,imageUrl:s(707)},{value:ke.ORDERED,label:this.$Labels.modal_MLB_Display_Markers_Styles_Ordered,imageUrl:s(6813)}]}},async created(){await this.getMarkerImageOptions()},methods:{async getMarkerImageOptions(){this.store.callouts++;try{const{success:e,data:t=[],error:s}=await this.$remoting("MarkerLayerBuilderController.getMarkerImageOptions");e?this.store.metadata.customMarkerImageOptions=t.map((e=>({title:e.itemLabel,id:`image:${e.itemValue}`}))):this.genericErrorHandler(s)}catch(e){this.genericExceptionHandler(e)}finally{this.store.callouts--}},setStoreData(e){this.store.layer.colorAssignmentType=e,e===ke.ORDERED?this.store.layer.colorAssignment={drawLine:!1}:this.store.layer.colorAssignment=[],this.store.layer.shapeAssignment=[],this.store.metadata.markerStyle.fieldDataType="",this.store.metadata.markerStyle.fieldLabel="",this.store.metadata.markerStyle.shapeFieldDataType="",this.store.metadata.markerStyle.shapeFieldLabel="",this.store.layer.picklistField="",this.store.layer.shapePicklistField=""}}},Fe=(0,L.Z)(De,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"slds-p-around_medium"},[s("VisualPicker",{attrs:{options:e.markerOptions,label:e.$Labels.modal_MLB_Display_Markers_Styles_Title,value:e.store.layer.colorAssignmentType},on:{input:e.setStoreData}}),e._v(" "),s("div",{staticClass:"slds-p-vertical_large"},[e.store.layer.colorAssignmentType===e.MarkerStyles.UNIFORM?s("Uniform"):e._e(),e._v(" "),e.store.layer.colorAssignmentType===e.MarkerStyles.ONE_VARIED?s("OneFieldVaried"):e._e(),e._v(" "),e.store.layer.colorAssignmentType===e.MarkerStyles.TWO_VARIED?s("TwoFieldVaried"):e._e(),e._v(" "),e.store.layer.colorAssignmentType===e.MarkerStyles.LABELED?s("LabeledPins"):e._e(),e._v(" "),e.store.layer.colorAssignmentType===e.MarkerStyles.ORDERED?s("OneFieldOrdered"):e._e()],1)],1)}),[],!1,null,null,null).exports,Ae={};Ae[d.xq.STRING]=Ae[d.xq.PHONE]=Ae[d.xq.TEXTAREA]=Ae[d.xq.URL]=Ae[d.xq.EMAIL]=Ae[d.xq.COMBOBOX]=[{id:"equals",title:window.MASystem.Labels.MA_Equals},{id:"not equal to",title:window.MASystem.Labels.MA_NOT_EQUAL_TO},{id:"starts with",title:window.MASystem.Labels.MA_Starts_With},{id:"contains",title:window.MASystem.Labels.MA_Contains},{id:"does not contain",title:window.MASystem.Labels.MA_Does_Not_Contain}],Ae[d.xq.NUMBER]=Ae[d.xq.DATE]=Ae[d.xq.DATETIME]=Ae[d.xq.CURRENCY]=Ae[d.xq.INTEGER]=Ae[d.xq.DOUBLE]=Ae[d.xq.PERCENT]=[{id:"equals",title:window.MASystem.Labels.MA_Equals},{id:"not equal to",title:window.MASystem.Labels.MA_NOT_EQUAL_TO},{id:"less than",title:window.MASystem.Labels.MA_Less_Than},{id:"greater than",title:window.MASystem.Labels.MA_Greater_Than},{id:"less or equal",title:window.MASystem.Labels.MA_Less_Than_Equal},{id:"greater or equal",title:window.MASystem.Labels.MA_Greater_Than_Equal},{id:"range",title:window.MASystem.Labels.MA_Range}],Ae[d.xq.MULTIPICKLIST]=[{id:"includes",title:window.MASystem.Labels.MA_Includes},{id:"excludes",title:window.MASystem.Labels.MA_Excludes}],Ae[d.xq.ID]=Ae[d.xq.PICKLIST]=Ae[d.xq.REFERENCE]=[{id:"equals",title:window.MASystem.Labels.MA_Equals},{id:"not equal to",title:window.MASystem.Labels.MA_NOT_EQUAL_TO}],Ae[d.xq.BOOLEAN]=[{id:"equals",title:window.MASystem.Labels.MA_Equals}];const we=Ae,Ie=(e,t)=>({index:t,baseObject:e,indexLabel:(t+1).toString(),fieldName:"",parentFieldName:null,grandparentFieldName:null,fieldType:"",operator:"",value:"",value2:"",addressObject:"",polymorphicAddressObject:""}),Ce={components:{Expression:a.A2.ZP,Condition:a.gP.default,ConditionValue:re},extends:v,props:{fields:{type:Array,default:()=>[]},filterLogic:{type:String,default:""},filters:{type:Array,default:()=>[]},baseObject:{type:String,default:""},disableLogic:Boolean,noGutter:Boolean,noLogic:Boolean,useFilterLogic:Boolean,disableDynamicVariables:Boolean},data(){return{mode:a.A2.nl.ALL,modes:[a.A2.nl.ALL,a.A2.nl.CUSTOM],conditions:[],conditionLabels:{deleteCondition:this.$Labels.modal_MLB_Filters_Field_Condition_Delete,resource:this.$Labels.modal_MLB_Filters_Field_Condition_Resource,operator:this.$Labels.modal_MLB_Filters_Field_Condition_Operator,parent:this.$Labels.modal_MLB_Filters_Field_Condition_Parent,grandparent:this.$Labels.modal_MLB_Filters_Field_Condition_Grandparent},conditionAssistiveText:{title:this.$Labels.modal_MLB_Filters_Field_Condition_AssistiveText_Title,deleteIcon:this.$Labels.modal_MLB_Filters_Field_Condition_AssistiveText_Delete},expressionLabels:{addCondition:this.$Labels.modal_MLB_Filters_Field_Expression_Add_Condition,and:this.$Labels.modal_MLB_Filters_Field_Expression_Boolean_AND,customLogic:this.$Labels.modal_MLB_Filters_Field_Expression_Custom_Logic,customLogicPlaceholder:this.$Labels.modal_MLB_Expression_Placeholder,modeAll:this.$Labels.modal_MLB_Filters_Field_Expression_Mode_All,modeCustom:this.$Labels.modal_MLB_Filters_Field_Expression_Mode_Custom_Logic,takeAction:this.$Labels.modal_MLB_Filters_Field_Expression_Mode,title:this.$Labels.modal_MLB_Filters_Field_Expression_Title}}},created(){this.$props.filters.length?this.initExistingCondition():this.onAddCondition()},destroyed(){this.$props.filters.length=0},methods:{setMode(e){this.mode=e},reset(){this.conditions.length=0,this.$props.filters.length=0,this.$emit("update:filterLogic",""),this.mode=a.A2.nl.ALL,this.onAddCondition()},onAddCondition(){this.conditions.push(this.buildDefaultCondition()),this.$props.filters.push(Ie(this.$props.baseObject,this.conditions.length-1))},initExistingCondition(){this.$props.useFilterLogic&&(this.mode=a.A2.nl.CUSTOM);const e=this.$props.filters.map(((e,t)=>({...Ie(this.$props.baseObject,t),...e})));this.$props.filters.length=0,this.$props.filters.push(...e),this.$props.filters.forEach(((e,t)=>{const s=[];e.fieldName&&s.push(e.parentFieldName?`${e.fieldName}.lookup`:e.fieldName),e.parentFieldName&&s.push(e.grandparentFieldName?`${e.parentFieldName}.lookup`:e.parentFieldName),e.grandparentFieldName&&s.push(e.grandparentFieldName);const{fieldSObjectTypes:a,parentSObjectTypes:i}=e,l=[];if(a&&a.length&&e.parentFieldName){const t=null!==e.parentFieldName&&""!==e.parentFieldName;l.push(_({sobject:a,includeDedicatedLookupOptions:t,excludeUnsupportedDisplayTypes:!0}))}if(i&&i.length&&e.grandparentFieldName){const t=null!==e.grandparentFieldName&&""!==e.grandparentFieldName;l.push(_({sobject:i,includeDedicatedLookupOptions:t,excludeUnsupportedDisplayTypes:!0}))}this.conditions.push({id:(0,n.x$)(),resource:s,resources:[this.$props.fields]}),this.store.callouts+=l.length,Promise.all(l).then((e=>{this.conditions[t].resources=this.conditions[t].resources.concat(e);const a=this.conditions[t].resources[this.conditions[t].resources.length-1].find((e=>e.apiName===s[s.length-1])),i=h(a.displayType);this.conditions[t].displayType=i,this.conditions[t].operators=we[i],this.conditions[t].option=a,i!==d.xq.PICKLIST&&i!==d.xq.MULTIPICKLIST||(this.conditions[t].picklistOptions=a.picklistOptions),this.store.callouts-=l.length}))}))},getDefaultFilterLogicString(){return this.conditions.reduce(((e,t,s)=>0===s?e:`${e} AND ${s+1}`),"1")},buildDefaultCondition(){return{...a.gP.buildGenericCondition(),resource:[],displayType:d.xq.STRING,resources:[this.$props.fields]}},onOperatorChange({index:e}){this.$props.filters[e].value2=""},async onResourceChange({index:e,ancestralIndex:t,option:s,cleared:a}){if(a)this.onResetCondition({index:e,ancestralIndex:t});else if(this.conditions[e].resource.push(s.apiName),s.isLookup)try{this.store.callouts++;const t=2,a=this.conditions[e].resource.length<t;this.conditions[e].resources.push(await _({sobject:s.referenceSObjects,includeDedicatedLookupOptions:a,excludeUnsupportedDisplayTypes:!0}))}catch(e){this.genericExceptionHandler(e)}finally{this.store.callouts--}else{const t=h(s.displayType);this.conditions[e].displayType=t,this.conditions[e].operators=we[t],this.conditions[e].option=s,this.setFilterFields(e)}},onResetCondition({index:e,ancestralIndex:t}){this.conditions[e].resource.splice(t,this.conditions[e].resource.length),this.conditions[e].operators=[],this.conditions[e].displayType=d.xq.STRING,this.conditions[e].option=null,this.$props.filters[e].value="",this.$props.filters[e].value2="",this.$props.filters[e].operator=null,this.setFilterFields(e)},onDeleteCondition({index:e}){this.conditions.splice(e,1),this.$props.filters.splice(e,1),this.$props.filters.forEach(((e,t)=>{e.index=t,e.indexLabel=`${t+1}`}))},onModeChange(e){this.$emit("update:useFilterLogic",e===a.A2.nl.CUSTOM),this.$emit("update:filterLogic",e===a.A2.nl.CUSTOM?this.getDefaultFilterLogicString():"")},getDefaultFilterOperator(e){const t=this.conditions[e].operators||[],[s={}]=t;return s.id||""},setFilterFields(e){this.$props.filters[e].fieldType=this.conditions[e].displayType.toString(),this.$props.filters[e].operator=this.getDefaultFilterOperator(e),[this.$props.filters[e].fieldName=null,this.$props.filters[e].parentFieldName=null,this.$props.filters[e].grandparentFieldName=null]=[...this.conditions[e].resource.map((e=>e.split(".")[0]))]}}},Ee=(0,L.Z)(Ce,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Expression",{attrs:{customLogic:e.$props.filterLogic,labels:e.expressionLabels,disableLogic:e.$props.disableLogic,mode:e.mode,modes:e.modes,noGutter:e.$props.noGutter,noLogic:e.$props.noLogic,noTitle:""},on:{"update:mode":function(t){e.mode=t},"add-condition":e.onAddCondition,"mode-change":e.onModeChange,"custom-logic-change":function(t){return e.$emit("update:filterLogic",t)}}},e._l(e.$props.filters,(function(t,a){return s("Condition",{key:e.conditions[a].id,attrs:{id:e.conditions[a].id,assistiveText:e.conditionAssistiveText,labels:e.conditionLabels,resource:e.conditions[a].resource,resources:e.conditions[a].resources,operator:t.operator,operators:e.conditions[a].operators,ancestral:"",resourceIdKey:"apiName",resourceTitleKey:"label"},on:{"update:resources":function(t){return e.$set(e.conditions[a],"resources",t)},"update:operator":function(s){return e.$set(t,"operator",s)},"delete-condition":e.onDeleteCondition,"operator-change":e.onOperatorChange,"reset-condition":e.onResetCondition,"resource-change":e.onResourceChange}},[s("ConditionValue",{staticClass:"slds-col",attrs:{slot:"value",displayType:e.conditions[a].displayType,value:t.value,value2:t.value2,option:e.conditions[a].option,range:"range"===t.operator,disabled:e.conditions[a].resource.length!==e.conditions[a].resources.length,disableDynamicOptions:e.disableDynamicVariables},on:{"update:value":function(s){return e.$set(t,"value",s)},"update:value2":function(s){return e.$set(t,"value2",s)}},slot:"value"})],1)})),1)}),[],!1,null,null,null).exports,Re=()=>{const e={toasts:[],callouts:0,local:{baseObjectId:"",layerTypeOptions:"",baseObjectSettings:{},filters:[],crossFilters:[],eventFilters:[],taskFilters:[],rowLimit:0},metadata:{mode:d.nl.CREATE,type:d.Yk.MARKER,fields:[],customMarkerImageOptions:[],markerStyle:{fieldDataType:"",fieldLabel:"",shapeFieldDataType:"",shapeFieldLabel:"",colorPicklistOptions:[],shapePicklistOptions:[]},relatedObjects:[],crossObjects:[],crossObjectFields0:[],crossObjectFields1:[],taskFields:[],eventFields:[]},layer:{advancedOptions:{address:"",aggregateType:"",automaticassign:!1,defaultLiveTab:"live",defaultRenderArea:"EntireMap",defaultRenderMode:"Default",defaultTab:"info",distance:"",enableHide:!1,enableLimit:!1,enableMapUpdates:!1,enableProxLimit:!1,heatmapDissipating:!0,heatmapGradient:[],heatmapMaxIntensity:"5",heatmapOpacity:"0.80",heatmapRadius:"15",heatmapWeightedValue:"None",layerTypeOptions:"",mapUpdateUnits:"min",markerLabelBackgroundColor:"#16325C",markerLabelTextColor:"#FFFFFF",markerShapeType:"dynamic",otherthreshold:".001",selectType:"MILES",markerShapeValue:null,updateEvery:"",waypointsBefore:"",waypointsAfter:""},baseObject:"",baseObjectName:"",baseObjectPlural:"",baseObjectAddressObject:"",baseObjectPolymorphicObject:"",colorAssignment:[],colorAssignmentType:ke.UNIFORM,createdBy:"",createdDate:"",crossFilters:[],description:"",filterByActivity:{task:"all",event:"all",operator:"AND"},filterByOwner:"All",filterLogicString:"",filters:[],folderId:"",folderType:"",iconColor:"#00FF00:Marker",id:"",modifiedBy:"",modifiedDate:"",name:"",picklistField:"",proximityOptions:{affectVisibility:!0,border:"#16325C",enabled:!1,fill:"#3083D3",hideMarkers:!1,measurementType:"MILES",opacity:"0.60",radius:"15",selectType:"circle"},refreshInterval:"",relatedLists:[],rowOrder:"",rowOrderDirection:"asc",scopeFilterOptions:{},shapeAssignment:[],shapePicklistField:"",tooltip1:"",tooltip1Label:"",tooltip2:"",tooltip3:"",tooltip4:"",tooltip5:"",tooltip6:"",tooltip7:"",tooltip8:"",tooltip9:"",tooltip10:"",tooltip11:"",tooltip12:"",tooltip13:"",tooltip14:"",tooltip15:"",useFilterLogic:!1,layerType:""},setBaseObject:function(e){this.layer.baseObject=e.Name,this.layer.baseObjectName=e.Name__c,this.layer.baseObjectPlural=e.PluralLabel,this.local.baseObjectSettings=JSON.parse(e.Settings__c),this.layer.baseObjectAddressObject=e.AddressObject__c,this.layer.baseObjectPolymorphicObject=e.PolymorphicObject,this.layer.baseObjectId=e.Id}};return function(e){Reflect.defineProperty(e.layer,"baseObjectId",{enumerable:!0,get:()=>e.local.baseObjectId,set:t=>(e.local.baseObjectId=t,(async()=>{try{e.callouts++;const t={sobject:e.layer.baseObject,includeDedicatedLookupOptions:!0,excludeUnsupportedDisplayTypes:!0};e.metadata.fields=await _(t),e.local.hasPolymorphicBaseObject&&e.metadata.fields.forEach((t=>{t.apiName&&t.apiName===`${e.layer.baseObjectAddressObject}.lookup`&&(t.referenceSObjects=[e.layer.baseObjectPolymorphicObject])})),e.metadata.mode===d.nl.CREATE&&(e=>{const t={Case:{label:"Case Number",apiName:"CaseNumber"},WorkOrder:{label:"Subject",apiName:"Subject"},Task:{label:"Subject",apiName:"Subject"}};let s=e.metadata.fields[0];if(t[e.layer.baseObjectName])s=t[e.layer.baseObjectName];else{const t=e.metadata.fields.length;for(let a=0;a<t;a++){const t=e.metadata.fields[a];if(t.isNameField){if("Name"===t.apiName){s=t;break}s&&(s=t)}}}e.layer.tooltip1=s.apiName,e.layer.tooltip1Label=s.label})(e)}catch(t){e.toasts.push({message:window.MASystem.Labels.MA_Error,subMessage:t.message,state:"error"})}finally{e.callouts--}})())}),Reflect.defineProperty(e.local,"markerLimit",{get(){const{maxQuerySizeExt:t,maxQuerySize:s}=window.userSettings;return e.local.hasExternalBaseObject?t:s}}),Reflect.defineProperty(e.local,"hasExternalBaseObject",{get:()=>e.layer.baseObject.endsWith("__x")}),Reflect.defineProperty(e.local,"hasPolymorphicBaseObject",{get:()=>!!e.layer.baseObjectPolymorphicObject}),Reflect.defineProperty(e.layer,"rowLimit",{enumerable:!0,get:()=>(e.local.rowLimit||(e.local.rowLimit=e.local.markerLimit),e.local.rowLimit),set(t){e.local.rowLimit=t}}),Reflect.defineProperty(e.metadata,"isMarkerLayer",{get:()=>e.metadata.type===d.Yk.MARKER}),Reflect.defineProperty(e.layer,"filters",{enumerable:!0,get:()=>e.local.filters.filter((e=>null!==e.fieldName&&""!==e.fieldName)).map((e=>({value:"",...e}))),set(t){e.local.filters=t}}),Reflect.defineProperty(e.layer,"activitySubfilters",{enumerable:!0,get:()=>[...e.local.taskFilters.filter((e=>null!==e.fieldName&&""!==e.fieldName)),...e.local.eventFilters.filter((e=>null!==e.fieldName&&""!==e.fieldName))],set(t){0===t.length?(e.local.taskFilters=[],e.local.eventFilters=[]):t.forEach((t=>{const{baseObject:s}=t;"Task"===s&&e.local.taskFilters.push(t),"Event"===s&&e.local.eventFilters.push(t)}))}}),Reflect.defineProperty(e.layer,"crossFilters",{enumerable:!0,get:()=>e.local.crossFilters.map(((e,t)=>{const s=e.filters.filter((e=>null!==e.fieldName&&""!==e.fieldName));return{crossFieldName:null,index:t,indexLabel:t+1,...e,filters:s}})).filter((e=>e.crossObjectName)),set(t){e.local.crossFilters=t.map((t=>{const s={crossFilterLogicString:"",...t};return s.filters=s.filters.map(((t,s)=>({...Ie(e.layer.baseObject,s),...t}))),s}))}})}(e),e},Pe={render(){return this.$slots.default},provide(){return{registerValidator:(e,t)=>this.registeredValidators.set(e,t),unregisterValidator:e=>this.registeredValidators.delete(e)}},data:()=>({registeredValidators:new Map}),methods:{isValid(){let e=!0;for(const t of this.registeredValidators.values())t.$invalid&&(e=!1,t.$touch());return e}}},Ve={name:{required:window.MASystem.Labels.MA_A_NAME_IS_REQUIRED_TO_CONTINUE,maxLength:window.MASystem.Labels.MA_Max_Length_80_Name},baseObject:{required:window.MASystem.Labels.MA_This_Field_Is_Required}},Ne={name:"MarkerLayerBuilderDetails",components:{Modal:a.u_,Picklist:a.Gp,ScopedNotification:a.ac,TextInput:a.oi},extends:v,validations:{baseObjectId:{required:V.C1},store:{layer:{name:{required:V.C1,maxLength:(0,V.BS)(80)}}}},data:()=>({showConfirmChange:!1,baseObjectId:"",coreBaseObjects:[],liveBaseObjects:[],cachedSelectedBaseObject:{}}),computed:{availableBaseOjects(){return this.isEditMode?[{Id:this.store.layer.baseObjectId,Name__c:this.store.layer.baseObjectName}]:this.store.metadata.type===d.Yk.MARKER?this.coreBaseObjects:this.liveBaseObjects},isEditMode(){return this.store.metadata.mode!==d.nl.CREATE}},watch:{"store.layer.baseObjectId":{handler(e){this.baseObjectId=e},immediate:!0}},created(){this.isEditMode||this.loadBaseObjects()},methods:{getNameValidationMessages:(0,g.ed)(Ve.name),getBaseObjectValidationMessages:(0,g.ed)(Ve.baseObject),async loadBaseObjects(){try{this.store.callouts++;const{success:e,data:t,error:s}=await this.$remoting("MarkerLayerBuilderController.getAvailableBaseObjects");if(e){const{core:e=[],live:s=[]}=t;this.coreBaseObjects=e,this.liveBaseObjects=s}else this.showErrorToast(s.message)}catch(e){this.genericExceptionHandler(e)}finally{this.store.callouts--}},validateBaseObjectChange(e){this.cachedSelectedBaseObject=e,this.store.layer.baseObjectId&&this.baseObjectId!==this.store.layer.baseObjectId?this.showConfirmChange=!0:this.store.setBaseObject(e)},async onConfirmBaseObjectChange(){this.$emit("reset-store",this.cachedSelectedBaseObject),this.showConfirmChange=!1},cancelBaseObjectSelection(){this.showConfirmChange=!1,this.baseObjectId=this.store.layer.baseObjectId}}},je=(0,L.Z)(Ne,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Layout",{attrs:{vertical:""}},[s("LayoutItem",{attrs:{largeDeviceSize:"6",mediumDeviceSize:"8",smallDeviceSize:"10",size:"12"}},[s("h2",{staticClass:"slds-text-heading_medium"},[s("b",[e._v(e._s(e.$Labels.modal_MLB_option_ND_Name))])]),e._v(" "),s("div",{staticClass:"slds-text-title slds-m-top_xx-small slds-m-bottom_large"},[e._v(e._s(e.$Labels.modal_MLB_option_ND_header_help_text))]),e._v(" "),s("TextInput",{attrs:{errors:e.getNameValidationMessages(e.$v.store.layer.name),labels:{name:e.$Labels.modal_MLB_option_ND_input_Name},required:""},model:{value:e.$v.store.layer.name.$model,callback:function(t){e.$set(e.$v.store.layer.name,"$model",t)},expression:"$v.store.layer.name.$model"}})],1),e._v(" "),s("LayoutItem",{attrs:{largeDeviceSize:"6",mediumDeviceSize:"8",smallDeviceSize:"10",size:"12"}},[s("TextInput",{attrs:{labels:{name:e.$Labels.modal_MLB_option_ND_input_Description},useTextArea:""},model:{value:e.store.layer.description,callback:function(t){e.$set(e.store.layer,"description",t)},expression:"store.layer.description"}})],1)],1),e._v(" "),s("Layout",{staticClass:"slds-m-top_large",attrs:{vertical:""}},[s("LayoutItem",{attrs:{largeDeviceSize:"6",mediumDeviceSize:"8",smallDeviceSize:"10",size:"12"}},[s("h2",{staticClass:"slds-text-heading_medium"},[s("b",[e._v(e._s(e.$Labels.modal_MLB_option_BOF_section_BaseObject))])]),e._v(" "),s("div",{staticClass:"slds-text-title slds-m-top_xx-small slds-m-bottom_large"},[e._v(e._s(e.$Labels.modal_MLB_option_BOF_section_BaseObject_description))]),e._v(" "),s("Picklist",{attrs:{disabled:e.isEditMode,options:e.availableBaseOjects,labels:{name:e.$Labels.MA_Base_Object},errors:e.getBaseObjectValidationMessages(e.$v.baseObjectId),detach:"",required:"",idKey:"Id",titleKey:"Name__c"},on:{"selected-option":e.validateBaseObjectChange},model:{value:e.$v.baseObjectId.$model,callback:function(t){e.$set(e.$v.baseObjectId,"$model",t)},expression:"$v.baseObjectId.$model"}})],1),e._v(" "),e.store.local.hasExternalBaseObject||e.store.local.hasPolymorphicBaseObject?s("LayoutItem",{staticClass:"slds-m-top_small",attrs:{largeDeviceSize:"6",mediumDeviceSize:"8",smallDeviceSize:"10",size:"12"}},[s("ScopedNotification",[s("p",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.store.local.hasExternalBaseObject?e.$Labels.modal_MLB_External_Object_Notification:e.$Labels.BaseObject_PolymorphicMessage))])])],1):e._e()],1),e._v(" "),e.showConfirmChange?s("Modal",{staticClass:"modal-force-top",attrs:{title:e.$Labels.modal_MLB_option_BOF_section_BaseObject_modal_Change_header,size:"small"},on:{close:e.cancelBaseObjectSelection}},[s("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n            "+e._s(e.$Labels.modal_MLB_option_BOF_section_BaseObject_modal_Confirm_text)+"\n        ")]),e._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("button",{staticClass:"slds-button slds-button_neutral",on:{click:e.cancelBaseObjectSelection}},[e._v("\n                "+e._s(e.$Labels.modal_MLB_option_BOF_section_BaseObject_modal_Confirm_button_Cancel)+"\n            ")]),e._v(" "),s("button",{staticClass:"slds-button slds-button_brand",on:{click:e.onConfirmBaseObjectChange}},[e._v("\n                "+e._s(e.$Labels.modal_MLB_option_BOF_section_BaseObject_modal_Confirm_button_Change)+"\n            ")])])]):e._e()],1)}),[],!1,null,"c0ba495a",null).exports,Ue={name:"ActivityFilters",components:{Button:a.zx,ExpandableSection:a.Lm,ObjectFieldFilteringConfig:Ee,Picklist:a.Gp},extends:v,data(){return{metadataLoaded:!1,eventFields:[],taskFields:[],condition:[{id:"AND",title:this.$Labels.modal_MLB_Activity_Filter_Condition_Op_And},{id:"OR",title:this.$Labels.modal_MLB_Activity_Filter_Condition_Op_Or}],taskOperators:[{id:"with",title:this.$Labels.modal_MLB_Activity_Filter_With_Tasks},{id:"all",title:this.$Labels.modal_MLB_Activity_Filter_With_Or_Without_Tasks},{id:"without",title:this.$Labels.modal_MLB_Activity_Filter_Without_Tasks}],eventOperators:[{id:"with",title:this.$Labels.modal_MLB_Activity_Filter_With_Events},{id:"all",title:this.$Labels.modal_MLB_Activity_Filter_With_Or_Without_Events},{id:"without",title:this.$Labels.modal_MLB_Activity_Filter_Without_Events}]}},computed:{computedEventConditionSelected(){return"all"!==this.store.layer.filterByActivity.event},computedTaskConditionSelected(){return"all"!==this.store.layer.filterByActivity.task},computedTaskEventConditionPicklistLabels(){return{name:`${this.$Labels.modal_MLB_Activity_Filter_Picklist_Label_Show} ${this.store.layer.baseObjectPlural}`,placeholder:this.$Labels.modal_MLB_Activity_Filter_Placeholder_Select}},computedCollapsedOnLoad(){return!this.store.local.eventFilters.length&&!this.store.local.taskFilters.length}},created(){this.computedCollapsedOnLoad||this.loadMetadata()},methods:{onSectionExpand(){this.metadataLoaded||this.loadMetadata()},async loadMetadata(){try{this.store.callouts++;const[e=[],t=[]]=await Promise.all([_({sobject:"Task",includeDedicatedLookupOptions:!0,excludeUnsupportedDisplayTypes:!0}),_({sobject:"Event",includeDedicatedLookupOptions:!0,excludeUnsupportedDisplayTypes:!0})]);this.store.metadata.taskFields=u(e),this.store.metadata.eventFields=u(t)}catch(e){this.genericExceptionHandler(e)}finally{this.metadataLoaded=!0,this.store.callouts--}},resetActivityFilters(){this.store.layer.filterByActivity.event="all",this.store.layer.filterByActivity.operator="AND",this.store.layer.filterByActivity.task="all",this.store.layer.activitySubfilters=[],this.$refs.section.collapse()}}},qe=(0,L.Z)(Ue,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Layout",{staticClass:"slds-box slds-m-vertical--small",staticStyle:{padding:"0.5rem 1rem"}},[s("LayoutItem",{attrs:{size:"12"}},[s("Layout",[s("LayoutItem",{attrs:{size:"10"}},[s("ExpandableSection",{ref:"section",attrs:{disabled:e.store.local.hasExternalBaseObject,title:e.$Labels.modal_MLB_Activity_Filter_Title,collapsedOnLoad:e.computedCollapsedOnLoad,transparent:""},on:{expanded:e.onSectionExpand}},[s("Layout",[s("LayoutItem",{attrs:{size:"4"}},[s("Picklist",{attrs:{options:e.taskOperators,labels:e.computedTaskEventConditionPicklistLabels},model:{value:e.store.layer.filterByActivity.task,callback:function(t){e.$set(e.store.layer.filterByActivity,"task",t)},expression:"store.layer.filterByActivity.task"}})],1)],1),e._v(" "),e.computedTaskConditionSelected?s("Layout",[s("LayoutItem",{staticClass:"slds-m-left_xx-large",attrs:{size:"12"}},[e.metadataLoaded?s("ObjectFieldFilteringConfig",{attrs:{fields:e.store.metadata.taskFields,filters:e.store.local.taskFilters,noGutter:"",noLogic:"",disableDynamicVariables:"",baseObject:"Task"}}):e._e()],1)],1):e._e(),e._v(" "),s("Layout",[s("LayoutItem",{class:{"slds-m-bottom_x-large":e.computedEventConditionSelected,"slds-m-top_x-large":e.computedTaskConditionSelected},attrs:{size:"3"}},[s("Picklist",{attrs:{options:e.condition,labels:{name:e.$Labels.modal_MLB_Activity_Filter_Label_Condition,placeholder:e.$Labels.modal_MLB_Activity_Filter_Placeholder_Select}},model:{value:e.store.layer.filterByActivity.operator,callback:function(t){e.$set(e.store.layer.filterByActivity,"operator",t)},expression:"store.layer.filterByActivity.operator"}})],1)],1),e._v(" "),s("Layout",[s("LayoutItem",{attrs:{size:"4"}},[s("Picklist",{attrs:{options:e.eventOperators,labels:e.computedTaskEventConditionPicklistLabels},model:{value:e.store.layer.filterByActivity.event,callback:function(t){e.$set(e.store.layer.filterByActivity,"event",t)},expression:"store.layer.filterByActivity.event"}})],1)],1),e._v(" "),e.computedEventConditionSelected?s("Layout",[s("LayoutItem",{staticClass:"slds-m-left_xx-large",attrs:{size:"12"}},[e.metadataLoaded?s("ObjectFieldFilteringConfig",{attrs:{fields:e.store.metadata.eventFields,filters:e.store.local.eventFilters,noGutter:"",noLogic:"",disableDynamicVariables:"",baseObject:"Event"}}):e._e()],1)],1):e._e()],1)],1),e._v(" "),s("LayoutItem",{staticClass:"slds-clearfix",attrs:{size:"2"}},[s("Button",{staticClass:"slds-m-top_x-small slds-m-right--x-small slds-float_right",attrs:{label:e.$Labels.modal_MLB_ActivityFilters_Button_Reset,title:e.$Labels.modal_MLB_ActivityFilters_Button_Reset},on:{click:e.resetActivityFilters}})],1)],1)],1)],1)}),[],!1,null,null,null).exports,Ge={methods:{async getRelatedObjects(){if(Array.isArray(this.store.metadata.crossObjects)&&0===this.store.metadata.crossObjects.length){this.store.callouts++;try{const{data:e,error:t,success:s}=await this.$remoting("MarkerLayerBuilderController.getRelatedsObjects",[this.store.layer.baseObject]);if(s){const{relatedLists:t=[],crossObjects:s=[]}=e;this.store.metadata.relatedObjects=t,this.store.metadata.crossObjects=s}else this.showErrorToast(t.message),console.error(e,t)}catch(e){this.genericExceptionHandler(e)}finally{this.store.callouts--}}}}},ze={components:{ObjectFieldFilteringConfig:Ee,Picklist:a.Gp,Button:a.zx,ExpandableSection:a.Lm},extends:v,mixins:[Ge],data(){return{metadataLoaded:!1,operators:[{id:"with",title:this.$Labels.modal_MLB_CrossFilters_Picklist_Option_With},{id:"without",title:this.$Labels.modal_MLB_CrossFilters_Picklist_Option_Without}]}},async created(){this.store.local.crossFilters.length?this.initExistingFilters():this.addCrossFilter()},methods:{onSectionExpand(){this.metadataLoaded||this.getRelatedObjects()},addCrossFilter(){this.store.local.crossFilters.push(this.buildDefaultCrossFilter())},buildDefaultCrossFilter(){return{id:(0,n.x$)(),useCrossFilterLogic:!1,operator:"with",indexLabel:"0",index:this.store.local.crossFilters.length,filters:[],fieldName:"Id",crossBaseObject:"",crossObjectName:"",crossFilterLogicString:"",baseObject:this.store.layer.baseObject}},resetCrossFilter(e){this.store.local.crossFilters[e]={...this.buildDefaultCrossFilter(),index:e},this.store.metadata[`crossObjectFields${e}`]=[]},deleteCrossFilter(e){this.store.local.crossFilters.splice(e,1),this.store.metadata[`crossObjectFields${e}`]=[]},async initExistingFilters(){await this.getRelatedObjects();const e=[];this.store.local.crossFilters.forEach((t=>{const{crossObjectName:s}=t,[a]=s.split("~~");t.crossBaseObject=a,e.push(_({sobject:a,includeDedicatedLookupOptions:!0,excludeUnsupportedDisplayTypes:!0}))}));try{this.store.callouts++,(await Promise.all(e)).forEach(((e,t)=>{this.store.metadata[`crossObjectFields${t}`].push(...e)}))}catch(e){this.genericExceptionHandler(e)}finally{this.store.callouts--}},async onCrossObjectSelect(e){try{this.store.callouts++;const[t]=this.store.local.crossFilters[e].crossObjectName.split("~~");this.$set(this.store.local.crossFilters,e,{...this.buildDefaultCrossFilter(),crossObjectName:this.store.local.crossFilters[e].crossObjectName,crossBaseObject:t});const s=await _({sobject:t,includeDedicatedLookupOptions:!0,excludeUnsupportedDisplayTypes:!0});this.store.metadata[`crossObjectFields${e}`].length=0,this.store.metadata[`crossObjectFields${e}`].push(...s)}catch(e){this.genericExceptionHandler(e)}finally{this.store.callouts--}}}},He=(0,L.Z)(ze,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Layout",[s("LayoutItem",{attrs:{size:"12"}},[e._l(e.store.local.crossFilters,(function(t,a){return s("Layout",{key:t.id,staticClass:"slds-box",class:{"slds-m-top_small":1===a}},[s("LayoutItem",{attrs:{size:"9",largeDeviceSize:"8",mediumDeviceSize:"6"}},[s("ExpandableSection",{attrs:{collapsedOnLoad:!t.filters.length&&!t.crossObjectName,transparent:"",title:e.$Labels.modal_MLB_CrossFilters_Label},on:{expanded:e.onSectionExpand}},[s("Layout",{attrs:{multipleRows:""}},[s("LayoutItem",{attrs:{size:"3"}},[s("Picklist",{attrs:{labels:{name:e.$Labels.modal_MLB_Cross_Object_Filter_Picklist_Label_Show+" "+e.store.layer.baseObjectPlural,placeholder:e.$Labels.modal_MLB_Cross_Object_Filter_Placeholder_Select},options:e.operators},model:{value:t.operator,callback:function(s){e.$set(t,"operator",s)},expression:"crossFilter.operator"}})],1),e._v(" "),s("LayoutItem",{staticClass:"slds-m-left_x-small",attrs:{size:"4"}},[s("Picklist",{attrs:{labels:{name:e.$Labels.modal_MLB_Cross_Object_Filter_Picklist_Label,placeholder:e.$Labels.modal_MLB_Cross_Object_Filter_Placeholder_Select},options:e.store.metadata.crossObjects},on:{"selected-option":function(t){return e.onCrossObjectSelect(a)}},model:{value:t.crossObjectName,callback:function(s){e.$set(t,"crossObjectName",s)},expression:"crossFilter.crossObjectName"}})],1),e._v(" "),e.store.metadata["crossObjectFields"+a].length?s("LayoutItem",{staticClass:"slds-m-top_large",attrs:{size:"12"}},[s("ObjectFieldFilteringConfig",{attrs:{fields:e.store.metadata["crossObjectFields"+a],filterLogic:t.crossFilterLogicString,filters:t.filters,useFilterLogic:t.useCrossFilterLogic,baseObject:t.crossBaseObject},on:{"update:filterLogic":function(s){return e.$set(t,"crossFilterLogicString",s)},"update:filter-logic":function(s){return e.$set(t,"crossFilterLogicString",s)},"update:useFilterLogic":function(s){return e.$set(t,"useCrossFilterLogic",s)},"update:use-filter-logic":function(s){return e.$set(t,"useCrossFilterLogic",s)}}})],1):e._e()],1)],1)],1),e._v(" "),s("LayoutItem",{staticClass:"slds-clearfix",attrs:{size:"3",largeDeviceSize:"4",mediumDeviceSize:"6"}},[s("Button",{staticClass:"slds-m-top_x-small slds-float_right",attrs:{label:e.$Labels.modal_MLB_CrossFilters_Button_Delete,title:e.$Labels.modal_MLB_CrossFilters_Button_Delete,disabled:0===a},on:{click:function(t){return e.deleteCrossFilter(a)}}}),e._v(" "),s("Button",{staticClass:"slds-m-top_x-small slds-m-right--x-small slds-float_right",attrs:{label:e.$Labels.modal_MLB_CrossFilters_Button_Reset,title:e.$Labels.modal_MLB_CrossFilters_Button_Reset},on:{click:function(t){return e.resetCrossFilter(a)}}})],1)],1)})),e._v(" "),2!==e.store.local.crossFilters.length?s("Button",{staticClass:"slds-m-top_small",attrs:{variant:"neutral",iconCategory:"utility",iconName:"add",label:e.$Labels.modal_MLB_CrossFilters_Button_Add,title:e.$Labels.modal_MLB_CrossFilters_Button_Add},on:{click:e.addCrossFilter}}):e._e()],2)],1)}),[],!1,null,"586e7c54",null).exports,Ye={components:{Button:a.zx,ExpandableSection:a.Lm,ObjectFieldFilteringConfig:Ee,ScopedNotification:a.ac},extends:v,computed:{computedDisableFilterLogic(){return this.store.local.filters.some((e=>e.parentFieldName&&this.store.layer.baseObjectPolymorphicObject&&e.fieldName===this.store.layer.baseObjectAddressObject))}},watch:{computedDisableFilterLogic(e){e&&(this.$refs.filter.setMode(a.A2.nl.ALL),this.store.layer.useFilterLogic=!1)}},methods:{resetFilters(){this.$refs.filter.reset()},filterUnsupportedFields:u}},Ze=(0,L.Z)(Ye,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Layout",{staticClass:"slds-box slds-m-top_xx-small",staticStyle:{"padding-top":"0.5rem"},attrs:{multipleRows:""}},[s("LayoutItem",{attrs:{size:"10"}},[s("ExpandableSection",{attrs:{title:e.$Labels.modal_MLB_Filters_Field_Expression_Title,disabled:"",transparent:""}},[e.computedDisableFilterLogic?s("ScopedNotification",{staticClass:"slds-m-bottom_small"},[s("p",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.$Labels.modal_MLB_Hide_Filter_Config_Notification))])]):e._e(),e._v(" "),s("ObjectFieldFilteringConfig",{ref:"filter",attrs:{fields:e.filterUnsupportedFields(e.store.metadata.fields),filterLogic:e.store.layer.filterLogicString,filters:e.store.local.filters,useFilterLogic:e.store.layer.useFilterLogic,baseObject:e.store.layer.baseObject,disableLogic:e.computedDisableFilterLogic},on:{"update:filterLogic":function(t){return e.$set(e.store.layer,"filterLogicString",t)},"update:filter-logic":function(t){return e.$set(e.store.layer,"filterLogicString",t)},"update:useFilterLogic":function(t){return e.$set(e.store.layer,"useFilterLogic",t)},"update:use-filter-logic":function(t){return e.$set(e.store.layer,"useFilterLogic",t)}}})],1)],1),e._v(" "),s("LayoutItem",{staticClass:"slds-clearfix",attrs:{size:"2"}},[s("Button",{staticClass:"slds-m-top_x-small slds-m-right--x-small slds-float_right",attrs:{label:e.$Labels.modal_MLB_Filters_Button_Reset,title:e.$Labels.modal_MLB_Filters_Button_Reset},on:{click:function(t){return t.stopPropagation(),e.resetFilters.apply(null,arguments)}}})],1)],1)}),[],!1,null,null,null).exports,We={name:"ScopeFilter",components:{Picklist:a.Gp},extends:v,data(){return{filterByOwnerValues:[],userIdOptions:[{id:"UserId",title:`${this.$Labels.modal_MLB_Scope_Filter_picklist_option_UserIds_CurrentUserId}`},{id:"DirectReportIds",title:`${this.$Labels.modal_MLB_Scope_Filter_picklist_option_UserIds_Current_Direct}`},{id:"SubordinateIds",title:`${this.$Labels.modal_MLB_Scope_Filter_picklist_option_UserIds_CurrentUser_Subordinate}`}]}},computed:{filterOptions(){const e=[{id:"All",title:`${this.$Labels.modal_MLB_Scope_Filter_picklist_option_CreateFilters_All.replace("{0}",this.store.layer.baseObjectPlural)}`},{id:"My",title:`${this.$Labels.modal_MLB_Scope_Filter_picklist_option_CreateFilters_My.replace("{0}",this.store.layer.baseObjectPlural)}`},{id:"Team",title:`${this.$Labels.modal_MLB_Scope_Filter_picklist_option_CreateFilters_MyTeams.replace("{0}",this.store.layer.baseObjectPlural)}`}];return this.store.local.baseObjectSettings.MyTerritoryScope&&e.push({id:"MINE",title:`${this.$Labels.modal_MLB_Scope_Filter_picklist_option_CreateFilters_MyTerritories.replace("{0}",this.store.layer.baseObjectPlural)}`}),this.store.local.baseObjectSettings.MyTerritoryTeamScope&&e.push({id:"MYTEAM",title:`${this.$Labels.modal_MLB_Scope_Filter_picklist_option_CreateFilters_MyTerritoryTeam.replace("{0}",this.store.layer.baseObjectPlural)}`}),e},showAdditionalFilters(){return"My"===this.filterByOwnerValues[0]},dynamicIdFields(){return this.store.metadata.fields.filter((e=>e.referenceSObjects&&(e.referenceSObjects.includes("User")||e.referenceSObjects.includes("Group"))&&!e.isLookup))}},created(){var e;this.filterByOwnerValues=(e=this.store.layer.filterByOwner)?e.split(":"):[]},methods:{updateFilterByOwner(){this.showAdditionalFilters?(this.filterByOwnerValues[1]||(this.filterByOwnerValues[1]="UserId"),this.filterByOwnerValues[2]||(this.filterByOwnerValues[2]=this.dynamicIdFields[0].apiName)):this.filterByOwnerValues.splice(1,2),this.store.layer.filterByOwner=this.filterByOwnerValues.join(":")}}},Ke={name:"MarkerLayerBuilderFilters",components:{ActivityFilters:qe,CrossFilters:He,FieldFilters:Ze,ScopeFilter:(0,L.Z)(We,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Layout",{staticClass:"slds-m-top_medium",attrs:{multipleRows:""}},[s("LayoutItem",{attrs:{size:"4"}},[s("Layout",{attrs:{multipleRows:""}},[s("LayoutItem",{attrs:{size:"6"}},[s("Picklist",{attrs:{labels:{name:e.$Labels.modal_MLB_Scope_Filter_Create_Filters_Picklist},options:e.filterOptions,readonly:e.store.local.hasExternalBaseObject},on:{"selected-option":e.updateFilterByOwner},model:{value:e.filterByOwnerValues[0],callback:function(t){e.$set(e.filterByOwnerValues,0,t)},expression:"filterByOwnerValues[0]"}})],1)],1),e._v(" "),e.showAdditionalFilters?s("Layout",{attrs:{multipleRows:""}},[s("LayoutItem",{staticClass:"slds-p-top_xx-small slds-p-right_small",attrs:{size:"6"}},[s("Picklist",{attrs:{options:e.userIdOptions,labels:{name:e.$Labels.modal_MLB_Scope_Filter_User_IDS_Included_Picklist}},on:{"selected-option":e.updateFilterByOwner},model:{value:e.filterByOwnerValues[1],callback:function(t){e.$set(e.filterByOwnerValues,1,t)},expression:"filterByOwnerValues[1]"}})],1),e._v(" "),s("LayoutItem",{staticClass:"slds-p-top_xx-small",attrs:{size:"6"}},[s("Picklist",{attrs:{options:e.dynamicIdFields,labels:{name:e.$Labels.modal_MLB_Scope_Filter_ID_Field},idKey:"apiName",titleKey:"label"},on:{"selected-option":e.updateFilterByOwner},model:{value:e.filterByOwnerValues[2],callback:function(t){e.$set(e.filterByOwnerValues,2,t)},expression:"filterByOwnerValues[2]"}})],1)],1):e._e()],1)],1)}),[],!1,null,null,null).exports,ScopedNotification:a.ac},extends:v},Xe=(0,L.Z)(Ke,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h2",{staticClass:"slds-text-heading_medium"},[s("b",[e._v(e._s(e.$Labels.modal_MLB_Filters_Title))])]),e._v(" "),s("div",{staticClass:"slds-text-title slds-m-top_xx-small"},[e._v(e._s(e.$Labels.modal_MLB_Filters_Description))]),e._v(" "),s("Layout",{staticClass:"slds-m-top_medium",attrs:{vertical:""}},[e.store.local.hasExternalBaseObject||e.store.local.hasPolymorphicBaseObject?s("LayoutItem",{attrs:{largeDeviceSize:"6",mediumDeviceSize:"8",smallDeviceSize:"10",size:"12"}},[s("ScopedNotification",[s("p",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.store.local.hasExternalBaseObject?e.$Labels.modal_MLB_External_Object_Notification:e.$Labels.BaseObject_PolymorphicMessage))])])],1):e._e()],1),e._v(" "),s("ScopeFilter"),e._v(" "),s("FieldFilters"),e._v(" "),s("ActivityFilters"),e._v(" "),s("CrossFilters")],1)}),[],!1,null,null,null).exports,Qe={name:"MapUpdates",components:{Card:a.Zb,Checkbox:a.XZ,TextInput:a.oi,Picklist:a.Gp},extends:v,validations(){const e={store:{layer:{advancedOptions:{updateEvery:{}}}}};return this.store.layer.advancedOptions.enableMapUpdates&&(e.store.layer.advancedOptions.updateEvery={minIntegerValue:j(1)}),e},data(){return{isLoading:!1,unitOptions:[{id:"sec",title:this.$Labels.modal_MLB_option_MapUpdates_dropdown_sec_option},{id:"min",title:this.$Labels.modal_MLB_option_MapUpdates_dropdown_min_option}]}},methods:{getValidationMessages:(0,g.ed)({minIntegerValue:window.MASystem.Labels.modal_MLB_Input_Error_Positive_Integer})}},Je=(0,L.Z)(Qe,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Card",{staticClass:"slds-p-around_x-small",staticStyle:{"box-shadow":"none"},attrs:{title:e.$Labels.modal_MLB_option_MapUpdates_card_label}},[s("div",{staticClass:"slds-p-left_medium slds-p-right_medium slds-grow-none",attrs:{slot:"body"},slot:"body"},[s("Checkbox",{attrs:{labels:{name:e.$Labels.modal_MLB_option_MapUpdates_checkbox_label}},model:{value:e.store.layer.advancedOptions.enableMapUpdates,callback:function(t){e.$set(e.store.layer.advancedOptions,"enableMapUpdates",t)},expression:"store.layer.advancedOptions.enableMapUpdates"}}),e._v(" "),s("Layout",{attrs:{multipleRows:""}},[s("LayoutItem",{staticClass:"slds-m-right_medium slds-col slds-grow-none"},[s("TextInput",{attrs:{labels:{name:e.$Labels.modal_MLB_option_MapUpdates_numerical_input_option},disabled:!e.store.layer.advancedOptions.enableMapUpdates,errors:e.getValidationMessages(e.$v.store.layer.advancedOptions.updateEvery)},model:{value:e.$v.store.layer.advancedOptions.updateEvery.$model,callback:function(t){e.$set(e.$v.store.layer.advancedOptions.updateEvery,"$model",t)},expression:"$v.store.layer.advancedOptions.updateEvery.$model"}})],1),e._v(" "),s("LayoutItem",{staticClass:"slds-grow-none slds-col"},[s("Picklist",{attrs:{labels:{name:e.$Labels.modal_MLB_option_MapUpdates_dropdown_unit_of_measurement_option},options:e.unitOptions,disabled:!e.store.layer.advancedOptions.enableMapUpdates},model:{value:e.store.layer.advancedOptions.mapUpdateUnits,callback:function(t){e.$set(e.store.layer.advancedOptions,"mapUpdateUnits",t)},expression:"store.layer.advancedOptions.mapUpdateUnits"}})],1)],1)],1)])}),[],!1,null,null,null).exports,et={lastReport:[{id:"all",title:window.MASystem.Labels.modal_MLB_Live_Last_Report_DateTime_All},{id:"today",title:window.MASystem.Labels.modal_MLB_DateTime_Literal_Today},{id:"yesterday",title:window.MASystem.Labels.modal_MLB_DateTime_Literal_Yesterday},{id:"date",title:window.MASystem.Labels.modal_MLB_Live_dropdown_date_range_option},{id:"duration",title:window.MASystem.Labels.modal_MLB_Live_dropdown_time_option}],relationOptions:[{value:"in",label:window.MASystem.Labels.modal_MLB_Live_radio_live_device_reported_within},{value:"not_in",label:window.MASystem.Labels.modal_MLB_Live_radio_live_device_not_reported_within}],timeMeasurements:[{id:"hours",title:window.MASystem.Labels.modal_MLB_Live_dropdown_hours_option},{id:"minutes",title:window.MASystem.Labels.modal_MLB_option_MapUpdates_dropdown_min_option}]},tt="M/D/YYYY",st=()=>({live:{filterByLastReportDateAndTime:{dateTime:[{dateTimeRange:"all",fromDate:window.moment(),toDate:window.moment(),dateInputFormat:tt,dateTimeRelation:"in",timeUnits:"hours",duration:1}]}}}),at=e=>{let t=window.moment(e,tt);return t.isValid()||(t=window.moment()),t},it={name:"LiveReportDateTime",components:{DatePicker:a.Mt,Picklist:a.Gp,RadioGroup:a.Ee,TextInput:a.oi},extends:v,validations(){const e={lastReportData:{live:{filterByLastReportDateAndTime:{dateTime:{$each:{duration:{},fromDate:{},toDate:{}}}}}}};return"date"===this.lastReportData.live.filterByLastReportDateAndTime.dateTime[0].dateTimeRange&&(e.lastReportData.live.filterByLastReportDateAndTime.dateTime.$each.fromDate={maxFromDate:e=>window.moment(e).isSameOrBefore(window.moment()),maxFromDateBeforeEnd:e=>window.moment(e).isSameOrBefore(window.moment(this.$v.lastReportData.live.filterByLastReportDateAndTime.dateTime.$each[0].toDate.$model))},e.lastReportData.live.filterByLastReportDateAndTime.dateTime.$each.toDate={minToDate:e=>window.moment(e).isSameOrAfter(window.moment(this.$v.lastReportData.live.filterByLastReportDateAndTime.dateTime.$each[0].fromDate.$model)),maxToDate:e=>window.moment(e).isSameOrBefore(window.moment())}),"duration"===this.lastReportData.live.filterByLastReportDateAndTime.dateTime[0].dateTimeRange&&(e.lastReportData.live.filterByLastReportDateAndTime.dateTime.$each.duration={minIntegerValue:j(1)}),e},data:()=>({liveOptions:et,lastReportData:st()}),created(){if(this.store.layer.advancedOptions.layerTypeOptions){const{dateTime:e}=this.store.layer.advancedOptions.layerTypeOptions.live.filterByLastReportDateAndTime;this.lastReportData.live.filterByLastReportDateAndTime.dateTime=[{...e[0],fromDate:at(e[0].fromDate),toDate:at(e[0].toDate)}]}else this.store.layer.advancedOptions.layerTypeOptions=st(),this.updateStoreValue();this.$v.$touch()},methods:{getValidationMessages:(0,g.ed)({minIntegerValue:window.MASystem.Labels.modal_MLB_Input_Error_Positive_Integer,maxFromDateBeforeEnd:window.MASystem.Labels.modal_MLB_Live_Last_Report_Date_StartDate_after_End_Date,maxFromDate:window.MASystem.Labels.modal_MLB_Live_Last_Report_Date_StartDate_not_greater_than_today,minToDate:window.MASystem.Labels.modal_MLB_Live_Last_Report_Date_EndDate_before_Start_Date,maxToDate:window.MASystem.Labels.modal_MLB_Live_Last_Report_Date_EndDate_not_greater_than_today}),resetValid(e){this.$v.$reset(),"date"===e&&(this.$v.lastReportData.live.filterByLastReportDateAndTime.dateTime.$each[0].fromDate.$touch(),this.$v.lastReportData.live.filterByLastReportDateAndTime.dateTime.$each[0].toDate.$touch()),"duration"===e&&this.$v.lastReportData.live.filterByLastReportDateAndTime.dateTime.$each[0].duration.$touch()},updateStoreValue(){const{dateTime:e}=this.lastReportData.live.filterByLastReportDateAndTime;this.store.layer.advancedOptions.layerTypeOptions.live.filterByLastReportDateAndTime.dateTime=[{...e[0],fromDate:window.moment(e[0].fromDate).format(tt),toDate:window.moment(e[0].toDate).format(tt)}]}}},lt=(0,L.Z)(it,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Picklist",{staticStyle:{width:"15rem"},attrs:{labels:{name:e.$Labels.modal_MLB_Live_picklist_last_report_date},options:e.liveOptions.lastReport},on:{"selected-option":e.updateStoreValue,changed:e.resetValid},model:{value:e.lastReportData.live.filterByLastReportDateAndTime.dateTime[0].dateTimeRange,callback:function(t){e.$set(e.lastReportData.live.filterByLastReportDateAndTime.dateTime[0],"dateTimeRange",t)},expression:"lastReportData.live.filterByLastReportDateAndTime.dateTime[0].dateTimeRange"}}),e._v(" "),"date"===e.lastReportData.live.filterByLastReportDateAndTime.dateTime[0].dateTimeRange?[s("Layout",[s("LayoutItem",{staticClass:"slds-m-right_large"},[s("DatePicker",{staticClass:"normalizeWidth",class:{"slds-has-error":e.$v.lastReportData.live.filterByLastReportDateAndTime.dateTime.$each[0].fromDate.$error},attrs:{dateFormat:e.$User.dateFormat.toUpperCase(),labels:{name:e.$Labels.modal_MLB_DateTime_Date_Component_Start_Label},errors:e.getValidationMessages(e.$v.lastReportData.live.filterByLastReportDateAndTime.dateTime.$each[0].fromDate),locale:e.$User.UserLocale,numYearsInPast:1,numYearsInFuture:0,detach:""},on:{changed:e.updateStoreValue},model:{value:e.$v.lastReportData.live.filterByLastReportDateAndTime.dateTime.$each[0].fromDate.$model,callback:function(t){e.$set(e.$v.lastReportData.live.filterByLastReportDateAndTime.dateTime.$each[0].fromDate,"$model",t)},expression:"$v.lastReportData.live.filterByLastReportDateAndTime.dateTime.$each[0].fromDate.$model"}})],1),e._v(" "),s("LayoutItem",[s("DatePicker",{staticClass:"normalizeWidth",class:{"slds-has-error":e.$v.lastReportData.live.filterByLastReportDateAndTime.dateTime.$each[0].toDate.$error},attrs:{dateFormat:e.$User.dateFormat.toUpperCase(),labels:{name:e.$Labels.modal_MLB_DateTime_Date_Component_End_Label},errors:e.getValidationMessages(e.$v.lastReportData.live.filterByLastReportDateAndTime.dateTime.$each[0].toDate),locale:e.$User.UserLocale,numYearsInPast:1,numYearsInFuture:0,detach:""},on:{changed:e.updateStoreValue},model:{value:e.$v.lastReportData.live.filterByLastReportDateAndTime.dateTime.$each[0].toDate.$model,callback:function(t){e.$set(e.$v.lastReportData.live.filterByLastReportDateAndTime.dateTime.$each[0].toDate,"$model",t)},expression:"$v.lastReportData.live.filterByLastReportDateAndTime.dateTime.$each[0].toDate.$model"}})],1)],1)]:e._e(),e._v(" "),"duration"===e.lastReportData.live.filterByLastReportDateAndTime.dateTime[0].dateTimeRange?[s("RadioGroup",{attrs:{labels:{name:e.$Labels.modal_MLB_Live_radio_live_device_reported_status},options:e.liveOptions.relationOptions},on:{input:e.updateStoreValue},model:{value:e.lastReportData.live.filterByLastReportDateAndTime.dateTime[0].dateTimeRelation,callback:function(t){e.$set(e.lastReportData.live.filterByLastReportDateAndTime.dateTime[0],"dateTimeRelation",t)},expression:"lastReportData.live.filterByLastReportDateAndTime.dateTime[0].dateTimeRelation"}}),e._v(" "),s("Layout",[s("LayoutItem",{staticClass:"slds-m-right_medium"},[s("TextInput",{staticStyle:{width:"6rem"},attrs:{labels:{name:e.$Labels.modal_MLB_Live_picklist_unit_field},errors:e.getValidationMessages(e.$v.lastReportData.live.filterByLastReportDateAndTime.dateTime.$each[0].duration),type:"number"},on:{changed:e.updateStoreValue},model:{value:e.$v.lastReportData.live.filterByLastReportDateAndTime.dateTime.$each[0].duration.$model,callback:function(t){e.$set(e.$v.lastReportData.live.filterByLastReportDateAndTime.dateTime.$each[0].duration,"$model",t)},expression:"$v.lastReportData.live.filterByLastReportDateAndTime.dateTime.$each[0].duration.$model"}})],1),e._v(" "),s("LayoutItem",[s("Picklist",{attrs:{options:e.liveOptions.timeMeasurements,labels:{name:e.$Labels.modal_MLB_Live_picklist_time_measure},resizeToFitContent:""},on:{"selected-option":e.updateStoreValue},model:{value:e.lastReportData.live.filterByLastReportDateAndTime.dateTime[0].timeUnits,callback:function(t){e.$set(e.lastReportData.live.filterByLastReportDateAndTime.dateTime[0],"timeUnits",t)},expression:"lastReportData.live.filterByLastReportDateAndTime.dateTime[0].timeUnits"}})],1)],1)]:e._e()],2)}),[],!1,null,"4737a942",null).exports,ot={name:"General",components:{Checkbox:a.XZ,TextInput:a.oi,Picklist:a.Gp,LiveReportDateTime:lt},extends:v,validations(){const e={store:{layer:{advancedOptions:{waypointsBefore:{},waypointsAfter:{}}}}};return this.store.layer.advancedOptions.enableHide&&(e.store.layer.advancedOptions={waypointsBefore:{minIntegerValue:j(1)},waypointsAfter:{minIntegerValue:j(1)}}),e},data(){return{isLoading:!1,tooltipOptions:[{id:"info",title:this.$Labels.modal_MLB_option_General_tooltip_default_picklist_info},{id:"actions",title:this.$Labels.modal_MLB_option_General_tooltip_default_picklist_actions},{id:"chatter",title:this.$Labels.modal_MLB_option_General_tooltip_default_picklist_chatter},{id:"MarkerLayerRelatedList",title:this.$Labels.modal_MLB_option_General_tooltip_default_picklist_related_lists},{id:"weather",title:this.$Labels.modal_MLB_option_General_tooltip_default_picklist_weather}],liveTooltipOptions:[{id:"live",title:this.$Labels.modal_MLB_option_General_tooltip_default_picklist_live},{id:"history",title:this.$Labels.modal_MLB_option_General_tooltip_default_picklist_history},{id:"info",title:this.$Labels.modal_MLB_option_General_tooltip_default_picklist_info},{id:"actions",title:this.$Labels.modal_MLB_option_General_tooltip_default_picklist_actions},{id:"chatter",title:this.$Labels.modal_MLB_option_General_tooltip_default_picklist_chatter},{id:"MarkerLayerRelatedList",title:this.$Labels.modal_MLB_option_General_tooltip_default_picklist_related_lists},{id:"weather",title:this.$Labels.modal_MLB_option_General_tooltip_default_picklist_weather}],renderModeOptions:[{id:"Default",title:this.$Labels.modal_MLB_option_General_picklist_default_render_mode_default},{id:"Markers",title:this.$Labels.modal_MLB_option_General_picklist_default_render_mode_markers},{id:"Heatmap",title:this.$Labels.modal_MLB_option_General_picklist_default_render_mode_heatmap},{id:"Cluster",title:this.$Labels.modal_MLB_option_General_picklist_default_render_mode_clusters},{id:"Scatter",title:this.$Labels.modal_MLB_option_General_picklist_default_render_mode_scatter}],renderAreaOptions:[{id:"EntireMap",title:this.$Labels.modal_MLB_option_General_picklist_default_render_area_entire_map},{id:"VisibleArea",title:this.$Labels.modal_MLB_option_General_picklist_default_render_area_in_visible_area}]}},methods:{getValidationMessages:(0,g.ed)({minIntegerValue:window.MASystem.Labels.modal_MLB_Input_Error_Positive_Integer})}},rt=(0,L.Z)(ot,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"slds-m-around_large slds-grow-none"},[e.store.metadata.isMarkerLayer?s("Picklist",{staticStyle:{width:"15rem"},attrs:{labels:{name:e.$Labels.modal_MLB_option_General_dropdown_label_tooltip_default_tab},options:e.tooltipOptions},model:{value:e.store.layer.advancedOptions.defaultTab,callback:function(t){e.$set(e.store.layer.advancedOptions,"defaultTab",t)},expression:"store.layer.advancedOptions.defaultTab"}}):s("Picklist",{staticStyle:{width:"15rem"},attrs:{labels:{name:e.$Labels.modal_MLB_option_General_dropdown_label_tooltip_default_tab},options:e.liveTooltipOptions},model:{value:e.store.layer.advancedOptions.defaultLiveTab,callback:function(t){e.$set(e.store.layer.advancedOptions,"defaultLiveTab",t)},expression:"store.layer.advancedOptions.defaultLiveTab"}}),e._v(" "),e.store.metadata.isMarkerLayer?s("Checkbox",{attrs:{labels:{name:e.$Labels.modal_MLB_option_General_checkbox_option_hide_markers_outside_window}},model:{value:e.store.layer.advancedOptions.enableHide,callback:function(t){e.$set(e.store.layer.advancedOptions,"enableHide",t)},expression:"store.layer.advancedOptions.enableHide"}}):e._e(),e._v(" "),e.store.metadata.isMarkerLayer?s("Layout",{staticClass:"slds-grow-none",attrs:{multipleRows:""}},[s("LayoutItem",{staticClass:"slds-p-right_large slds-col slds-grow-none"},[s("TextInput",{attrs:{disabled:!e.store.layer.advancedOptions.enableHide,errors:e.getValidationMessages(e.$v.store.layer.advancedOptions.waypointsBefore),labels:{name:e.$Labels.modal_MLB_option_General_numerical_input_days_before}},model:{value:e.$v.store.layer.advancedOptions.waypointsBefore.$model,callback:function(t){e.$set(e.$v.store.layer.advancedOptions.waypointsBefore,"$model",t)},expression:"$v.store.layer.advancedOptions.waypointsBefore.$model"}})],1),e._v(" "),s("LayoutItem",{staticClass:"slds-col slds-grow-none"},[s("TextInput",{attrs:{disabled:!e.store.layer.advancedOptions.enableHide,errors:e.getValidationMessages(e.$v.store.layer.advancedOptions.waypointsAfter),labels:{name:e.$Labels.modal_MLB_option_General_numerical_input_days_after}},model:{value:e.$v.store.layer.advancedOptions.waypointsAfter.$model,callback:function(t){e.$set(e.$v.store.layer.advancedOptions.waypointsAfter,"$model",t)},expression:"$v.store.layer.advancedOptions.waypointsAfter.$model"}})],1)],1):e._e(),e._v(" "),e.store.metadata.isMarkerLayer?s("Picklist",{staticStyle:{width:"15rem"},attrs:{labels:{name:e.$Labels.modal_MLB_option_General_picklist_default_render_mode},options:e.renderModeOptions},model:{value:e.store.layer.advancedOptions.defaultRenderMode,callback:function(t){e.$set(e.store.layer.advancedOptions,"defaultRenderMode",t)},expression:"store.layer.advancedOptions.defaultRenderMode"}}):e._e(),e._v(" "),s("Picklist",{staticStyle:{width:"15rem"},attrs:{labels:{name:e.$Labels.modal_MLB_option_General_picklist_default_render_area},options:e.renderAreaOptions},model:{value:e.store.layer.advancedOptions.defaultRenderArea,callback:function(t){e.$set(e.store.layer.advancedOptions,"defaultRenderArea",t)},expression:"store.layer.advancedOptions.defaultRenderArea"}}),e._v(" "),e.store.metadata.isMarkerLayer?e._e():s("LiveReportDateTime")],1)}),[],!1,null,null,null).exports;var nt=s(5262);const{MA:dt}=window,ct={name:"MarkerLimits",components:{Card:a.Zb,Checkbox:a.XZ,TextInput:a.oi,Picklist:a.Gp},extends:v,validations(){const e={searchTerm:{},store:{layer:{rowLimit:{},advancedOptions:{distance:{}}}}};return this.store.layer.advancedOptions.enableLimit&&(e.store.layer.rowLimit={maxValue:(0,V.PW)(this.store.local.markerLimit),minIntegerValue:j(1)}),this.store.layer.advancedOptions.enableProxLimit&&(e.searchTerm={required:V.C1},e.store.layer.advancedOptions.distance={minIntegerValue:j(1)}),e},data(){return{isLoading:!1,distanceOptions:[{id:"MILES",title:this.$Labels.modal_MLB_option_MarkerLimits_picklist_distance_units_option_miles},{id:"METERS",title:this.$Labels.modal_MLB_option_MarkerLimits_picklist_distance_units_option_meters},{id:"YARDS",title:this.$Labels.modal_MLB_option_MarkerLimits_picklist_distance_units_option_yards},{id:"KM",title:this.$Labels.modal_MLB_option_MarkerLimits_picklist_distance_units_option_kilometers},{id:"FEET",title:this.$Labels.modal_MLB_option_MarkerLimits_picklist_distance_units_option_feet}],searchTerm:"",proximityOptions:[{options:async e=>{const{results:t}=await nt.Z.searchGoogle(e,!0);return t}}]}},created(){this.searchTerm=this.store.layer.advancedOptions.address},methods:{getValidationMessages(e){return(0,g.ed)({maxValue:this.$Labels.Marker_Limits_Max_Marker_Valid_Number.replace("{0}",this.store.local.markerLimit),minValue:this.$Labels.Marker_Limits_Min_Marker_Valid_Number,minIntegerValue:this.$Labels.modal_MLB_Input_Error_Positive_Integer})(e)},selected(e){const{places:t}=window.google.maps;"null"!==e.placeId?new t.PlacesService(dt.map).getDetails({placeId:e.placeId},((s,a)=>{a===t.PlacesServiceStatus.OK?(this.searchTerm=e.label,this.store.layer.advancedOptions.address=e.label,this.store.layer.advancedOptions.distanceLat=s.geometry.location.lat(),this.store.layer.advancedOptions.distanceLong=s.geometry.location.lng()):this.error=this.$Labels.modal_MLB_option_MarkerLimits_address_of_proximity_search_error})):this.error=this.$Labels.modal_MLB_option_MarkerLimits_address_of_proximity_address_search_error},clearSearch(){this.searchTerm="",this.store.layer.advancedOptions.address="",this.store.layer.advancedOptions.distanceLat="",this.store.layer.advancedOptions.distanceLong="",this.store.layer.advancedOptions.distanceMinLat="",this.store.layer.advancedOptions.distanceMaxLat="",this.store.layer.advancedOptions.distanceMinLong="",this.store.layer.advancedOptions.distanceMaxLong=""}}},pt={name:"MLBDisplayAdvanced",components:{MapUpdates:Je,General:rt,MarkerLimits:(0,L.Z)(ct,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Card",{staticClass:"slds-p-around_x-small",staticStyle:{"box-shadow":"none"},attrs:{title:e.$Labels.modal_MLB_option_MarkerLimits_card_label}},[s("div",{staticClass:"slds-p-left_medium slds-p-right_medium",attrs:{slot:"body"},slot:"body"},[s("Checkbox",{attrs:{labels:{name:e.$Labels.modal_MLB_option_MarkerLimits_checkbox_option_limit_markers_on_map}},model:{value:e.store.layer.advancedOptions.enableLimit,callback:function(t){e.$set(e.store.layer.advancedOptions,"enableLimit",t)},expression:"store.layer.advancedOptions.enableLimit"}}),e._v(" "),s("Layout",[s("TextInput",{attrs:{errors:e.getValidationMessages(e.$v.store.layer.rowLimit),disabled:!e.store.layer.advancedOptions.enableLimit,labels:{name:e.$Labels.modal_MLB_option_MarkerLimits_numerical_input_max_markers}},model:{value:e.$v.store.layer.rowLimit.$model,callback:function(t){e.$set(e.$v.store.layer.rowLimit,"$model",t)},expression:"$v.store.layer.rowLimit.$model"}})],1),e._v(" "),e.store.metadata.isMarkerLayer?s("Checkbox",{attrs:{labels:{name:e.$Labels.modal_MLB_option_MarkerLimits_checkbox_option_limit_markers_in_proximity}},model:{value:e.store.layer.advancedOptions.enableProxLimit,callback:function(t){e.$set(e.store.layer.advancedOptions,"enableProxLimit",t)},expression:"store.layer.advancedOptions.enableProxLimit"}}):e._e(),e._v(" "),e.store.metadata.isMarkerLayer?s("LayoutItem",{staticClass:"slds-grow-none",attrs:{size:"6"}},[s("Picklist",{attrs:{disabled:!e.store.layer.advancedOptions.enableProxLimit,labels:{name:e.$Labels.modal_MLB_option_MarkerLimits_proximity_center_address_search},filterable:"",options:e.proximityOptions,errors:e.getValidationMessages(e.$v.searchTerm),titleKey:"label",idKey:"placeId"},on:{"selected-option":e.selected,clear:e.clearSearch},model:{value:e.$v.searchTerm.$model,callback:function(t){e.$set(e.$v.searchTerm,"$model",t)},expression:"$v.searchTerm.$model"}})],1):e._e(),e._v(" "),e.store.metadata.isMarkerLayer?s("Layout",{attrs:{multipleRows:""}},[s("LayoutItem",{staticClass:"slds-m-right_medium slds-grow-none"},[s("TextInput",{attrs:{disabled:!e.store.layer.advancedOptions.enableProxLimit,labels:{name:e.$Labels.modal_MLB_numerical_input_boundary_radius},errors:e.getValidationMessages(e.$v.store.layer.advancedOptions.distance)},model:{value:e.$v.store.layer.advancedOptions.distance.$model,callback:function(t){e.$set(e.$v.store.layer.advancedOptions.distance,"$model",t)},expression:"$v.store.layer.advancedOptions.distance.$model"}})],1),e._v(" "),s("LayoutItem",{staticClass:"slds-grow-none"},[s("Picklist",{attrs:{disabled:!e.store.layer.advancedOptions.enableProxLimit,labels:{name:e.$Labels.modal_MLB_picklist_distance_units},options:e.distanceOptions},model:{value:e.store.layer.advancedOptions.selectType,callback:function(t){e.$set(e.store.layer.advancedOptions,"selectType",t)},expression:"store.layer.advancedOptions.selectType"}})],1)],1):e._e()],1)])}),[],!1,null,null,null).exports},extends:v,created(){this.store.metadata.mode===d.nl.CREATE&&this.store.metadata.type===d.Yk.LIVE&&(this.store.layer.advancedOptions.enableMapUpdates=!0,this.store.layer.advancedOptions.updateEvery=30,this.store.layer.advancedOptions.mapUpdateUnits="sec")}},_t=(0,L.Z)(pt,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Layout",{staticClass:"slds-m-top_medium"},[s("LayoutItem",{staticClass:"slds-m-right_large",attrs:{size:"5"}},[s("Layout",{attrs:{multipleRows:""}},[s("LayoutItem",{attrs:{size:"12"}},[s("MapUpdates")],1),e._v(" "),s("LayoutItem",{attrs:{size:"12"}},[s("General")],1)],1)],1),e._v(" "),s("LayoutItem",{attrs:{size:"5"}},[s("MarkerLimits")],1)],1)],1)}),[],!1,null,null,null).exports,mt={name:"HeatMapOptions",components:{TextInput:a.oi,Picklist:a.Gp,Checkbox:a.XZ},extends:v,validations:{store:{layer:{advancedOptions:{heatmapRadius:{minIntegerValue:j(1)},heatmapMaxIntensity:{minIntegerValue:j(1)}}}}},computed:{opacityOptions(){const e=[];for(let t=5;t<=95;t+=5)e.push({title:`${t}%`,value:(t/100).toFixed(2)});return e.push({title:"100%",value:"1"}),e},baseObjectFields(){const e=["double","integer"];return[{apiName:"None",label:`--${this.$Labels.MA_None}--`}].concat(this.store.metadata.fields.filter((t=>e.includes(t.soapType))))}},methods:{getValidationMessages:(0,g.ed)({minIntegerValue:window.MASystem.Labels.modal_MLB_Input_Error_Positive_Integer})}},ut=(0,L.Z)(mt,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Layout",[s("LayoutItem",{attrs:{size:"7"}},[s("TextInput",{attrs:{labels:{name:e.$Labels.modal_MLB_option_DO_section_HeatMap_modal_Radius_Input_Label},errors:e.getValidationMessages(e.$v.store.layer.advancedOptions.heatmapRadius)},model:{value:e.$v.store.layer.advancedOptions.heatmapRadius.$model,callback:function(t){e.$set(e.$v.store.layer.advancedOptions.heatmapRadius,"$model",t)},expression:"$v.store.layer.advancedOptions.heatmapRadius.$model"}}),e._v(" "),s("Picklist",{attrs:{labels:{name:e.$Labels.modal_MLB_option_DO_section_HeatMap_modal_Opacity_Picklist_Label},options:e.opacityOptions,idKey:"value"},model:{value:e.store.layer.advancedOptions.heatmapOpacity,callback:function(t){e.$set(e.store.layer.advancedOptions,"heatmapOpacity",t)},expression:"store.layer.advancedOptions.heatmapOpacity"}}),e._v(" "),s("TextInput",{staticClass:"slds-p-bottom_xx-small",staticStyle:{"z-index":"2"},attrs:{labels:{name:e.$Labels.modal_MLB_option_DO_section_HeatMap_modal_Max_Intensity_Input_Label},helpText:e.$Labels.modal_MLB_option_DO_section_HeatMap_modal_Max_Intensity_Input_Tooltip,errors:e.getValidationMessages(e.$v.store.layer.advancedOptions.heatmapMaxIntensity)},model:{value:e.$v.store.layer.advancedOptions.heatmapMaxIntensity.$model,callback:function(t){e.$set(e.$v.store.layer.advancedOptions.heatmapMaxIntensity,"$model",t)},expression:"$v.store.layer.advancedOptions.heatmapMaxIntensity.$model"}}),e._v(" "),s("Checkbox",{attrs:{labels:{name:e.$Labels.modal_MLB_option_DO_section_HeatMap_modal_Fade_Zoom_Checkbox_Label}},model:{value:e.store.layer.advancedOptions.heatmapDissipating,callback:function(t){e.$set(e.store.layer.advancedOptions,"heatmapDissipating",t)},expression:"store.layer.advancedOptions.heatmapDissipating"}}),e._v(" "),s("Picklist",{attrs:{labels:{name:e.$Labels.modal_MLB_option_DO_section_HeatMap_modal_Weighted_Value_Picklist_Label},options:e.baseObjectFields,idKey:"apiName",titleKey:"label"},model:{value:e.store.layer.advancedOptions.heatmapWeightedValue,callback:function(t){e.$set(e.store.layer.advancedOptions,"heatmapWeightedValue",t)},expression:"store.layer.advancedOptions.heatmapWeightedValue"}})],1)],1)],1)}),[],!1,null,null,null).exports;var ht=s(8050);const yt={name:"ColorGradients",components:{ColorPicker:a.zH,Button:a.zx,ButtonIcon:a.Ei},extends:v,computed:{gradientOptions(){return this.store.layer.advancedOptions.heatmapGradient.map((e=>({id:(0,ht.x$)(),value:e})))}},methods:{moveGradient(e,t){let s;"up"===t?s=e-1:"down"===t&&(s=e+1);const{heatmapGradient:a}=this.store.layer.advancedOptions;[a[e],a[s]]=[a[s],a[e]],this.store.layer.advancedOptions.heatmapGradient=[...a],this.$nextTick((()=>{this.$refs[`color-${s}`][0].focus()}))},removeGradient(e){this.store.layer.advancedOptions.heatmapGradient.splice(e,1),this.$nextTick((()=>{if(this.store.layer.advancedOptions.heatmapGradient.length){let t=e;e===this.store.layer.advancedOptions.heatmapGradient.length&&(t=e-1),this.$refs[`color-${t}`][0].focus()}}))},addGradient(){const{heatmapGradient:e}=this.store.layer.advancedOptions;e.push("#FFFFFF"),this.$nextTick((()=>{this.$refs["color-"+(e.length-1)][0].focus()}))}}},bt={name:"MLBDisplayHeatmap",components:{HeatMapOptions:ut,ColorGradients:(0,L.Z)(yt,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Layout",[s("LayoutItem",{attrs:{size:"11"}},[s("p",{staticClass:"slds-text-title"},[e._v("\n            "+e._s(e.$Labels.modal_MLB_option_DO_section_HeatMap_modal_Color_Picker_Label)+"\n        ")]),e._v(" "),s("div",{staticClass:"slds-box slds-p-around_none"},[s("Layout",{staticClass:"slds-p-around_x-small",attrs:{verticalAlign:"center",horizontalAlign:"spread"}},[s("LayoutItem",[s("p",{staticClass:"slds-text-title"},[e._v("\n                        "+e._s(e.$Labels.modal_MLB_option_DO_section_HeatMap_modal_Color_Picker_Header_section)+"\n                    ")])]),e._v(" "),s("LayoutItem",[s("Button",{attrs:{variant:"neutral",iconName:"add",iconCategory:"utility",title:e.$Labels.modal_MLB_option_DO_section_HeatMap_modal_Color_Picker_button_Add},on:{click:function(t){return e.addGradient()}}},[e._v("\n                        "+e._s(e.$Labels.modal_MLB_option_DO_section_HeatMap_modal_Color_Picker_button_Add)+"\n                    ")])],1)],1),e._v(" "),e._l(e.gradientOptions,(function(t,a){return s("Layout",{key:t.id,staticClass:"slds-border_top",attrs:{verticalAlign:"center",horizontalAlign:"spread"}},[s("LayoutItem",{staticClass:"slds-p-left_x-small"},[s("ButtonIcon",{attrs:{iconCategory:"utility",iconName:"arrowup",variant:"border-filled",assistiveText:e.$Labels.modal_MLB_option_DO_section_Markers_modal_Custom_Marker_Arr_Up_Btn_Assist_Text,disabled:0===a,title:e.$Labels.modal_MLB_option_DO_section_Markers_modal_Custom_Marker_Arr_Up_Btn_Assist_Text},on:{click:function(t){return e.moveGradient(a,"up")}}}),e._v(" "),s("ButtonIcon",{attrs:{iconCategory:"utility",iconName:"arrowdown",variant:"border-filled",assistiveText:e.$Labels.modal_MLB_option_DO_section_Markers_modal_Custom_Marker_Arr_Down_Btn_Assist_Text,disabled:a===e.store.layer.advancedOptions.heatmapGradient.length-1,title:e.$Labels.modal_MLB_option_DO_section_Markers_modal_Custom_Marker_Arr_Down_Btn_Assist_Text},on:{click:function(t){return e.moveGradient(a,"down")}}})],1),e._v(" "),s("LayoutItem",{attrs:{size:"3"}},[s("label",{attrs:{for:t.id}},[s("p",{staticClass:"slds-text-title"},[e._v("\n                            "+e._s(e.$Labels.modal_MLB_option_DO_section_HeatMap_modal_Color_Picker_Color_Label)+" "+e._s(a+1)+"\n                        ")])])]),e._v(" "),s("LayoutItem",{staticClass:"slds-p-right_x-small"},[s("Layout",{attrs:{verticalAlign:"center",horizontalAlign:"spread"}},[s("LayoutItem",{staticClass:"slds-p-right_x-small slds-m-top_x-small"},[s("ColorPicker",{ref:"color-"+a,refInFor:!0,attrs:{labels:{chooseColor:""},value:t.value,labelForId:t.id},model:{value:e.store.layer.advancedOptions.heatmapGradient[a],callback:function(t){e.$set(e.store.layer.advancedOptions.heatmapGradient,a,t)},expression:"store.layer.advancedOptions.heatmapGradient[index]"}})],1),e._v(" "),s("LayoutItem",[s("ButtonIcon",{attrs:{iconCategory:"utility",iconName:"delete",variant:"border-filled",assistiveText:e.$Labels.modal_MLB_option_DO_section_Markers_modal_Custom_Marker_Delete_Btn_Assist_Text,title:e.$Labels.modal_MLB_option_DO_section_Markers_modal_Custom_Marker_Delete_Btn_Assist_Text},on:{click:function(t){return e.removeGradient(a)}}})],1)],1)],1)],1)})),e._v(" "),0===e.gradientOptions.length?s("div",{staticClass:"slds-border_top slds-p-horizontal_x-small slds-p-vertical_medium"},[s("p",{staticClass:"slds-text-title empty-state-text"},[e._v("\n                    "+e._s(e.$Labels.modal_MLB_option_DO_section_HeatMap_modal_Color_Picker_No_Color_Message)+"\n                ")])]):e._e(),e._v(" "),s("div",{staticClass:"slds-border_top slds-p-horizontal_x-small slds-p-vertical_medium"},[s("p",{staticClass:"slds-text-title"},[e._v("\n                    "+e._s(e.$Labels.modal_MLB_option_DO_section_HeatMap_modal_Color_Picker_Footer_section)+"\n                ")])])],2)])],1)}),[],!1,null,"2fc63dae",null).exports}},Lt=(0,L.Z)(bt,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Layout",{staticClass:"slds-p-around_medium"},[s("LayoutItem",{attrs:{size:"6"}},[s("HeatMapOptions")],1),e._v(" "),s("LayoutItem",{attrs:{size:"6"}},[s("ColorGradients")],1)],1)}),[],!1,null,null,null).exports,vt={name:"MLBDisplayProximity",components:{Checkbox:a.XZ,ColorPicker:a.zH,Picklist:a.Gp,TextInput:a.oi},extends:v,validations(){const e={store:{layer:{proximityOptions:{radius:{}}}}};return this.store.layer.proximityOptions.enabled&&(e.store.layer.proximityOptions.radius={minIntegerValue:j(1)}),e},data(){return{isLoading:!1,distance:0,opacity:[],types:[{id:"circle",title:this.$Labels.MA_Circle}],units:[{id:"MILES",title:this.$Labels.Marker_Layer_Proximity_PickList_Options_DistanceUnits_Miles},{id:"METERS",title:this.$Labels.Marker_Layer_Proximity_PickList_Options_DistanceUnits_Meters},{id:"FEET",title:this.$Labels.Marker_Layer_Proximity_PickList_Options_DistanceUnits_Feet},{id:"YARDS",title:this.$Labels.Marker_Layer_Proximity_PickList_Options_DistanceUnits_Yards},{id:"KM",title:this.$Labels.Marker_Layer_Proximity_PickList_Options_DistanceUnits_Kilometers}]}},created(){for(let e=0;e<100;e+=5)this.opacity.push({id:(e/100).toFixed(2),title:`${e}%`})},methods:{getValidationMessages:(0,g.ed)({minIntegerValue:window.MASystem.Labels.modal_MLB_Input_Error_Positive_Integer})}},ft=(0,L.Z)(vt,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Layout",[s("LayoutItem",{staticClass:"slds-p-around_large",attrs:{size:"6"}},[s("Checkbox",{attrs:{labels:{name:e.$Labels.Marker_Layer_Proximity_Enable_Around}},model:{value:e.store.layer.proximityOptions.enabled,callback:function(t){e.$set(e.store.layer.proximityOptions,"enabled",t)},expression:"store.layer.proximityOptions.enabled"}}),e._v(" "),s("Checkbox",{attrs:{labels:{name:e.$Labels.Marker_Layer_Proximity_Center_Markers},disabled:!e.store.layer.proximityOptions.enabled},model:{value:e.store.layer.proximityOptions.hideMarkers,callback:function(t){e.$set(e.store.layer.proximityOptions,"hideMarkers",t)},expression:"store.layer.proximityOptions.hideMarkers"}}),e._v(" "),s("Checkbox",{attrs:{labels:{name:e.$Labels.Marker_Layer_Proximity_Markers_Outside},disabled:!e.store.layer.proximityOptions.enabled},model:{value:e.store.layer.proximityOptions.affectVisibility,callback:function(t){e.$set(e.store.layer.proximityOptions,"affectVisibility",t)},expression:"store.layer.proximityOptions.affectVisibility"}}),e._v(" "),s("Picklist",{staticClass:"slds-size_4-of-12",attrs:{options:e.types,labels:{name:e.$Labels.Marker_Layer_Proximity_Type,placeholder:e.$Labels.MA_Select},disabled:""},model:{value:e.store.layer.proximityOptions.selectType,callback:function(t){e.$set(e.store.layer.proximityOptions,"selectType",t)},expression:"store.layer.proximityOptions.selectType"}})],1),e._v(" "),s("LayoutItem",{staticClass:"slds-p-around_large",attrs:{size:"6"}},[s("Layout",[s("LayoutItem",{staticClass:"slds-p-right_large"},[s("TextInput",{attrs:{errors:e.getValidationMessages(e.$v.store.layer.proximityOptions.radius),labels:{name:e.$Labels.Marker_Layer_Proximity_Radius_Distance},disabled:!e.store.layer.proximityOptions.enabled},model:{value:e.$v.store.layer.proximityOptions.radius.$model,callback:function(t){e.$set(e.$v.store.layer.proximityOptions.radius,"$model",t)},expression:"$v.store.layer.proximityOptions.radius.$model"}})],1),e._v(" "),s("LayoutItem",[s("Picklist",{attrs:{options:e.units,labels:{name:e.$Labels.Marker_Layer_Proximity_Radius_Units,placeholder:e.$Labels.MA_Select},disabled:!e.store.layer.proximityOptions.enabled},model:{value:e.store.layer.proximityOptions.measurementType,callback:function(t){e.$set(e.store.layer.proximityOptions,"measurementType",t)},expression:"store.layer.proximityOptions.measurementType"}})],1)],1),e._v(" "),s("ColorPicker",{attrs:{labels:{chooseColor:e.$Labels.Marker_Layer_Proximity_Fill_Color},disabled:!e.store.layer.proximityOptions.enabled},model:{value:e.store.layer.proximityOptions.fill,callback:function(t){e.$set(e.store.layer.proximityOptions,"fill",t)},expression:"store.layer.proximityOptions.fill"}}),e._v(" "),s("ColorPicker",{attrs:{labels:{chooseColor:e.$Labels.Marker_Layer_Proximity_Border_Color},disabled:!e.store.layer.proximityOptions.enabled},model:{value:e.store.layer.proximityOptions.border,callback:function(t){e.$set(e.store.layer.proximityOptions,"border",t)},expression:"store.layer.proximityOptions.border"}}),e._v(" "),s("Picklist",{staticClass:"slds-size_4-of-12",attrs:{options:e.opacity,labels:{name:e.$Labels.Marker_Layer_Proximity_Opacity,placeholder:e.$Labels.MA_Select},disabled:!e.store.layer.proximityOptions.enabled},model:{value:e.store.layer.proximityOptions.opacity,callback:function(t){e.$set(e.store.layer.proximityOptions,"opacity",t)},expression:"store.layer.proximityOptions.opacity"}})],1)],1)}),[],!1,null,null,null).exports,$t={name:"MarkerLayerBuilderDisplay",components:{Advanced:_t,ExpandableSection:a.Lm,Heatmap:Lt,Markers:Fe,Proximity:ft},extends:v},Mt=(0,L.Z)($t,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Layout",{attrs:{multipleRows:""}},[s("LayoutItem",{attrs:{size:"12"}},[s("h2",{staticClass:"slds-text-heading_medium"},[s("b",[e._v(e._s(e.$Labels.modal_MLB_Display_Title))])]),e._v(" "),s("div",{staticClass:"slds-text-title slds-m-top_xx-small"},[e._v(e._s(e.$Labels.modal_MLB_Display_Title_Info))])]),e._v(" "),s("LayoutItem",{staticClass:"slds-m-top_large",attrs:{size:"12"}},[s("ExpandableSection",{attrs:{title:e.$Labels.modal_MLB_option_DO_section_Markers_modal_Section_Text}},[s("Markers")],1),e._v(" "),e.store.metadata.isMarkerLayer?s("ExpandableSection",{attrs:{title:e.$Labels.modal_MLB_option_DO_section_HeatMap_modal_Section_Text,collapsedOnLoad:""}},[s("Heatmap")],1):e._e(),e._v(" "),e.store.metadata.isMarkerLayer?s("ExpandableSection",{attrs:{title:e.$Labels.modal_MLB_option_section_Proximity_modal_Section_Text,collapsedOnLoad:""}},[s("Proximity")],1):e._e(),e._v(" "),s("ExpandableSection",{attrs:{title:e.$Labels.modal_MLB_option_section_Advanced_Options_modal_Section_Text,collapsedOnLoad:""}},[s("Advanced")],1)],1)],1)}),[],!1,null,null,null).exports,gt={name:"MLBPopupsDetails",components:{ButtonIcon:a.Ei,FieldSelection:he,Button:a.zx},extends:v,data:()=>({tooltips:[]}),computed:{totalRows(){return this.tooltips.length},disableAddRow(){return 14===this.totalRows}},watch:{tooltips:{handler(){this.syncStoreTooltipValues()},deep:!0}},created(){for(let e=2;e<16;e++){const t=this.store.layer[`tooltip${e}`];t&&this.tooltips.push({value:t,uid:(0,n.x$)()})}},methods:{deleteTooltip(e){this.tooltips.splice(e,1),this.$nextTick((()=>{if(this.tooltips.length){let t=e;e===this.tooltips.length&&(t=e-1),this.$refs[`tooltip-${t}`][0].focus()}}))},addTooltip(){this.tooltips.push({value:"",uid:(0,n.x$)()}),this.$nextTick((()=>{this.$refs["tooltip-"+(this.tooltips.length-1)][0].focus()}))},moveUp(e){let t=e-1;t<=0&&(t=0);const s=this.tooltips[e];this.tooltips.splice(e,1),this.tooltips.splice(t,0,s),this.setFocusOnMovedElement(t)},moveDown(e){let t=e+1;t>=13&&(t=13);const s=this.tooltips[e];this.tooltips.splice(e,1),this.tooltips.splice(t,0,s),this.setFocusOnMovedElement(t)},setFocusOnMovedElement(e){this.$nextTick((()=>{this.$refs[`tooltip-${e}`][0].focus()}))},createFieldLabel(e){return this.$Labels.modal_MLB_option_MP_Text_Field.replace("{0}",e+1)},syncStoreTooltipValues(){for(let e=0;e<15;e++){const t=this.tooltips[e];let s="";t&&t.value&&(s=t.value),this.store.layer[`tooltip${e+2}`]=s}}}},Ot=(0,L.Z)(gt,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Layout",{staticClass:"slds-m-horizontal_medium"},[a("LayoutItem",{attrs:{size:"8"}},[a("Layout",{attrs:{vertical:""}},[a("LayoutItem",{staticClass:"slds-m-top_x-small slds-m-bottom_x-small"},[e._v("\n                "+e._s(e.$Labels.modal_MLB_option_MP_Fields_Display)+"\n            ")]),e._v(" "),e._l(e.tooltips,(function(t,s){return a("Layout",{key:t.uid},[a("LayoutItem",{staticClass:"slds-m-top_x-small slds-m-right_x-small"},[a("ButtonIcon",{attrs:{assistiveText:e.$Labels.modal_MLB_option_MP_button_Add_Arr_Up_Btn_Assist_Text,disabled:0===s,iconCategory:"utility",iconName:"arrowup",title:e.$Labels.modal_MLB_option_MP_button_Add_Arr_Up_Btn_Assist_Text,variant:"border-filled"},on:{click:function(t){return e.moveUp(s)}}})],1),e._v(" "),a("LayoutItem",{staticClass:"slds-m-top_x-small"},[a("ButtonIcon",{attrs:{assistiveText:e.$Labels.modal_MLB_option_MP_button_Add_Arr_Down_Btn_Assist_Text,disabled:s+1===e.totalRows,iconCategory:"utility",iconName:"arrowdown",title:e.$Labels.modal_MLB_option_MP_button_Add_Arr_Down_Btn_Assist_Text,variant:"border-filled"},on:{click:function(t){return e.moveDown(s)}}})],1),e._v(" "),a("LayoutItem",{staticClass:"slds-m-left_medium slds-m-top_medium",attrs:{size:"2"}},[a("label",{attrs:{for:t.uid}},[e._v("\n                        "+e._s(e.createFieldLabel(s))+"\n                    ")])]),e._v(" "),a("FieldSelection",{ref:"tooltip-"+s,refInFor:!0,staticClass:"slds-m-top_x-small",attrs:{value:t.value,baseObject:e.store.layer.baseObject,size:4,labelForId:t.uid},on:{"update:value":function(s){return e.$set(t,"value",s)}}}),e._v(" "),a("LayoutItem",{staticClass:"slds-m-left_x-small slds-m-top_x-small"},[a("ButtonIcon",{attrs:{assistiveText:e.$Labels.modal_MLB_option_MP_button_Delete_Btn_Assist_Text,iconCategory:"utility",iconName:"delete",title:e.$Labels.modal_MLB_option_MP_button_Delete_Btn_Assist_Text,variant:"border-filled"},on:{click:function(t){return e.deleteTooltip(s)}}})],1)],1)})),e._v(" "),a("Layout",[a("LayoutItem",{class:{"slds-m-top_small":e.tooltips.length,"slds-m-top_x-small":!e.tooltips.length}},[a("Button",{attrs:{variant:"neutral",iconCategory:"utility",iconName:"add",disabled:e.disableAddRow,label:e.$Labels.modal_MLB_option_MP_button_Add,title:e.$Labels.modal_MLB_option_MP_button_Add},on:{click:e.addTooltip}})],1)],1)],2)],1),e._v(" "),a("LayoutItem",{attrs:{size:"4"}},[a("img",{attrs:{src:s(3897),alt:e.$Labels.modal_MLB_option_MP_Tooltip_Alt_Text}})])],1)}),[],!1,null,null,null).exports,xt={required:window.MASystem.Labels.MA_This_Field_Is_Required,maxLength:window.MASystem.Labels.MA_Character_Limit,orderByRequired:window.MASystem.Labels.MA_This_Field_Is_Required},Tt={name:"FieldSelectRow",components:{ButtonIcon:a.Ei,Picklist:a.Gp},extends:v,props:{fieldIndex:{type:Number,required:!0},relatedField:{type:Object,default:()=>{}},totalRows:{type:Number,default:0},fields:{type:Array,default:()=>[]},labelForId:{type:String,default:""}},validations:{relatedField:{id:{required:M.required}}},methods:{deleteRow(){this.$emit("delete-row")},createFieldLabel(){return this.$Labels.modal_MLB_option_MP_Text_Field.replace("{0}",this.fieldIndex+1)},focus(){this.$refs.fieldSelect.focus()},moveDown(){this.$emit("move-down")},moveUp(){this.$emit("move-up")},getValidationMessages:(0,g.ed)(xt)}},St=(0,L.Z)(Tt,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Layout",[s("LayoutItem",{staticClass:"slds-m-top_x-small slds-m-right_x-small"},[s("ButtonIcon",{attrs:{assistiveText:e.$Labels.modal_MLB_option_MP_button_Add_Arr_Up_Btn_Assist_Text,disabled:0===e.fieldIndex,iconCategory:"utility",iconName:"arrowup",title:e.$Labels.modal_MLB_option_MP_button_Add_Arr_Up_Btn_Assist_Text,variant:"border-filled"},on:{click:function(t){return e.moveUp(e.fieldIndex)}}})],1),e._v(" "),s("LayoutItem",{staticClass:"slds-m-top_x-small"},[s("ButtonIcon",{attrs:{assistiveText:e.$Labels.modal_MLB_option_MP_button_Add_Arr_Down_Btn_Assist_Text,disabled:e.fieldIndex+1===e.totalRows,iconCategory:"utility",iconName:"arrowdown",title:e.$Labels.modal_MLB_option_MP_button_Add_Arr_Down_Btn_Assist_Text,variant:"border-filled"},on:{click:function(t){return e.moveDown(e.fieldIndex)}}})],1),e._v(" "),s("LayoutItem",{staticClass:"slds-m-left_medium slds-m-top_medium",attrs:{size:"2"}},[s("label",{attrs:{for:e.$props.labelForId}},[e._v("\n            "+e._s(e.createFieldLabel(e.fieldIndex))+"\n        ")])]),e._v(" "),s("LayoutItem",{staticClass:"slds-m-top_x-small",attrs:{size:"4"}},[s("Picklist",{ref:"fieldSelect",attrs:{options:e.fields,errors:e.getValidationMessages(e.$v.relatedField.id),labelForId:e.$props.labelForId,idKey:"apiName",titleKey:"label",filterable:""},model:{value:e.$v.relatedField.id.$model,callback:function(t){e.$set(e.$v.relatedField.id,"$model",t)},expression:"$v.relatedField.id.$model"}})],1),e._v(" "),s("LayoutItem",{staticClass:"slds-m-left_x-small slds-m-top_x-small"},[s("ButtonIcon",{attrs:{assistiveText:e.$Labels.modal_MLB_option_MP_button_Delete_Btn_Assist_Text,iconCategory:"utility",iconName:"delete",title:e.$Labels.modal_MLB_option_MP_button_Delete_Btn_Assist_Text,variant:"border-filled"},on:{click:function(t){return e.deleteRow(e.fieldIndex)}}})],1)],1)}),[],!1,null,null,null).exports,Bt={name:"RelatedListGroup",components:{ButtonIcon:a.Ei,TextInput:a.oi,FieldSelectRow:St,Picklist:a.Gp,Button:a.zx,ObjectFieldFilteringConfig:Ee},extends:v,props:{relatedList:{type:Object,required:!0},listIndex:{type:Number,required:!0}},validations:{relatedList:{relatedlistname:{required:M.required,maxLength:(0,M.maxLength)(255)}},sortField:{orderByRequired:(e,t)=>{let s=!0;return t.selectedObject&&(s=(0,M.required)(e)),s}},selectedObject:{required:M.required}},data(){return{relatedListFields:[],numToDisplayOptions:["1","2","3","4","5","6","7","8","9","10"],sortableFields:[],sortDirection:[{id:"ASC",title:this.$Labels.modal_MLB_Related_Tab_Picklist_Ascending},{id:"DESC",title:this.$Labels.modal_MLB_Related_Tab_Picklist_Descending}],isLoaded:!1,fields:[],sortFieldDirection:"",sortField:"",numToDisplay:String(this.relatedList.numtodisplay)}},computed:{listIsDisabled(){return!this.relatedList.relatedobject||!this.relatedList.referencefield},disableAddField(){return this.fields.length>=5},storeSortField(){return`${this.sortField} ${this.sortFieldDirection}`},selectedObject:{get(){let e="";return this.relatedList.relatedobject&&this.relatedList.referencefield&&(e=`${this.relatedList.relatedobject}~~${this.relatedList.referencefield}`),e},set(e){const[t="",s=""]=e.split("~~");this.relatedList.relatedobject=t,this.relatedList.referencefield=s}}},watch:{fields:{handler(){this.syncRelatedListDataWithStore()},deep:!0},storeSortField(e){this.relatedList.relatedlistsort=e},numToDisplay(e){this.relatedList.numtodisplay=e}},created(){for(let e=1;e<6;e++){const t=this.relatedList[`field${e}`];t&&this.fields.push({id:t,uid:(0,ht.x$)()})}const[e="",t="DESC"]=this.relatedList.relatedlistsort.split(" ");this.sortField=e,this.sortFieldDirection=t,this.getFieldsForRelatedList()},methods:{filterUnsupportedFields:u,getValidationMessages:(0,g.ed)(xt),deleteFieldRow(e){this.fields.splice(e,1),this.focusFieldRow(e)},moveFieldUp(e){let t=e-1;t<=0&&(t=0);const s=this.fields[e];this.fields.splice(e,1),this.fields.splice(t,0,s),this.setFocusOnMovedElement(t)},moveFieldDown(e){let t=e+1;t>=5&&(t=5);const s=this.fields[e];this.fields.splice(e,1),this.fields.splice(t,0,s),this.setFocusOnMovedElement(t)},setFocusOnMovedElement(e){this.$nextTick((()=>{this.$refs[`fieldrow_${e}`][0].focus()}))},async getFieldsForRelatedList(){if(this.relatedList.relatedobject)try{this.store.callouts++,this.relatedListFields=await _({sobject:this.relatedList.relatedobject,excludeUnsupportedDisplayTypes:!0,excludeWhatIdWhoId:!1}),this.sortableFields=this.relatedListFields.filter((e=>e.isSortable)),0===this.fields.length&&this.addField()}catch(e){this.genericExceptionHandler(e)}finally{this.store.callouts--,this.isLoaded=!0}},addField(){this.fields.push({id:"",uid:(0,ht.x$)()}),this.focusFieldRow()},async focusFieldRow(e){await this.$nextTick();try{0===this.fields.length?this.$refs.addFieldButton.$el.focus():((!e||e>this.fields.length-1)&&(e=this.fields.length-1),this.$refs[`fieldrow_${e}`][0].$refs.fieldSelect.focus())}catch(e){}},syncRelatedListDataWithStore(){for(let e=0;e<5;e++){const t=this.fields[e];let s="";t&&(s=t.id),this.relatedList[`field${e+1}`]=s}},deleteGroup(){this.$emit("delete-related-list",this.listIndex)},async updateRelatedList(e){this.resetRelatedList(),await this.getFieldsForRelatedList(),this.relatedList.relatedlistname||(this.relatedList.relatedlistname=e.title),this.sortField="CreatedDate"},resetRelatedList(){this.fields=[],this.relatedList.filters=[],this.sortField="",this.$v.sortField.$reset()}}},kt={name:"MLBPopupsRelated",components:{RelatedListGroup:(0,L.Z)(Bt,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("LayoutItem",{staticClass:"slds-m-bottom_xx-large",attrs:{size:"11"}},[s("Layout",{staticClass:"slds-border_top slds-border_right slds-border_left slds-border_bottom slds-p-around_medium",staticStyle:{background:"#f3f2f2"}},[s("LayoutItem",{staticClass:"slds-m-right_small",attrs:{size:"4"}},[s("Picklist",{ref:"relatedListSelect",attrs:{filterable:"",required:"",detach:"",options:e.store.metadata.relatedObjects,errors:e.getValidationMessages(e.$v.selectedObject),labels:{name:e.$Labels.modal_MLB_Related_List_Object_Select_Text}},on:{"selected-option":e.updateRelatedList,clear:e.resetRelatedList},model:{value:e.$v.selectedObject.$model,callback:function(t){e.$set(e.$v.selectedObject,"$model",t)},expression:"$v.selectedObject.$model"}})],1),e._v(" "),s("LayoutItem",{staticClass:"slds-col_bump-right",attrs:{size:"4"}},[s("TextInput",{ref:"relatedListName",class:["slds-input-has-icon","slds-input-has-icon_right"],attrs:{labels:{name:e.$Labels.modal_MLB_Related_List_Name_Input_Text},errors:e.getValidationMessages(e.$v.relatedList.relatedlistname),required:""},model:{value:e.$v.relatedList.relatedlistname.$model,callback:function(t){e.$set(e.$v.relatedList.relatedlistname,"$model",t)},expression:"$v.relatedList.relatedlistname.$model"}})],1),e._v(" "),s("LayoutItem",{staticClass:"slds-m-top_large"},[s("ButtonIcon",{attrs:{assistiveText:e.$Labels.modal_MLB_option_MP_button_Delete_Btn_Assist_Text,iconCategory:"utility",iconName:"delete",title:e.$Labels.modal_MLB_option_MP_button_Delete_Btn_Assist_Text,variant:"border-filled"},on:{click:e.deleteGroup}})],1)],1),e._v(" "),s("Layout",{staticClass:"slds-border_right slds-border_left slds-border_bottom slds-p-around_medium",attrs:{vertical:""}},[s("LayoutItem",[e._v("\n            "+e._s(e.$Labels.modal_MLB_option_MP_Fields_Display)+"\n        ")]),e._v(" "),e._l(e.fields,(function(t,a){return s("LayoutItem",{key:t.uid},[s("FieldSelectRow",{ref:"fieldrow_"+a,refInFor:!0,attrs:{fieldIndex:a,relatedField:t,fields:e.relatedListFields,totalRows:e.fields.length,labelForId:t.uid},on:{"delete-row":function(t){return e.deleteFieldRow(a)},"move-up":function(t){return e.moveFieldUp(a)},"move-down":function(t){return e.moveFieldDown(a)}}})],1)})),e._v(" "),s("LayoutItem",{staticClass:"slds-m-top_small"},[s("Button",{ref:"addFieldButton",attrs:{variant:"neutral",iconCategory:"utility",iconName:"add",disabled:e.disableAddField||e.listIsDisabled,label:e.$Labels.modal_MLB_Related_List_Add_Field_Btn,title:e.$Labels.modal_MLB_Related_List_Add_Field_Btn},on:{click:e.addField}})],1)],2),e._v(" "),s("Layout",{staticClass:"slds-border_right slds-border_left slds-border_bottom slds-p-around_large",attrs:{vertical:""}},[s("Layout",{staticClass:"slds-size_12-of-12"},[s("LayoutItem",{staticClass:"slds-m-right_medium",attrs:{size:"5"}},[s("Picklist",{attrs:{options:e.sortableFields,labels:{name:e.$Labels.modal_MLB_Related_List_OrderRecordsBy_Input},errors:e.getValidationMessages(e.$v.sortField),disabled:e.listIsDisabled,titleKey:"label",idKey:"apiName",filterable:""},model:{value:e.$v.sortField.$model,callback:function(t){e.$set(e.$v.sortField,"$model",t)},expression:"$v.sortField.$model"}})],1),e._v(" "),s("LayoutItem",{attrs:{size:"5"}},[s("Picklist",{attrs:{options:e.numToDisplayOptions,labels:{name:e.$Labels.modal_MLB_Related_List_LimitRecords_Input},disabled:e.listIsDisabled},model:{value:e.numToDisplay,callback:function(t){e.numToDisplay=t},expression:"numToDisplay"}})],1)],1),e._v(" "),s("Layout",{staticClass:"slds-size_12-of-12"},[s("LayoutItem",{attrs:{size:"5"}},[s("Picklist",{attrs:{options:e.sortDirection,labels:{name:e.$Labels.modal_MLB_Related_List_OrderBy_Input},disabled:e.listIsDisabled},model:{value:e.sortFieldDirection,callback:function(t){e.sortFieldDirection=t},expression:"sortFieldDirection"}})],1)],1),e._v(" "),s("LayoutItem",[e.isLoaded?s("ObjectFieldFilteringConfig",{ref:"filter",attrs:{fields:e.filterUnsupportedFields(e.relatedListFields),filters:e.relatedList.filters,baseObject:e.relatedList.relatedobject,noLogic:"",disableDynamicVariables:""}}):e._e()],1)],1)],1)}),[],!1,null,null,null).exports,Button:a.zx},extends:v,mixins:[Ge],created(){this.init()},methods:{init(){this.formatRelatedListInfo(),this.getRelatedObjects()},formatRelatedListInfo(){const e=[];this.store.layer.relatedLists.forEach(((t,s)=>{e.push({...t,uid:(0,ht.x$)(),index:s,numtodisplay:String(t.numtodisplay)})})),this.store.layer.relatedLists=e},async createNewRelatedList(){this.store.layer.relatedLists.push({baseObject:this.store.layer.baseObject,filters:[],numtodisplay:1,referencefield:"",relatedlistname:"",relatedlistsort:" ASC",relatedobject:"",uid:(0,ht.x$)(),index:this.store.layer.relatedLists.length}),await this.$nextTick();const e=this.store.layer.relatedLists.length;this.$refs["relatedListGroup_"+(e-1)][0].$refs.relatedListSelect.focus()},async deleteRelatedList(e){this.store.layer.relatedLists.splice(e,1);const t=this.store.layer.relatedLists.length;if(this.store.layer.relatedLists.forEach(((e,t)=>{e.index=t})),await this.$nextTick(),0===t)this.$refs.relatedListAddButton.$el.focus();else try{this.$refs["relatedListGroup_"+(t-1)][0].$refs.relatedListSelect.focus()}catch(e){}}}},Dt=(0,L.Z)(kt,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Layout",{staticClass:"slds-m-horizontal_medium"},[a("LayoutItem",{attrs:{size:"8"}},[a("Layout",{attrs:{vertical:""}},[a("LayoutItem",{staticClass:"slds-m-vertical_medium",attrs:{size:"8"}},[e._v("\n                "+e._s(e.$Labels.modal_MLB_Related_List_SubHeader)+"\n            ")]),e._v(" "),e._l(e.store.layer.relatedLists,(function(t,s){return a("RelatedListGroup",{key:t.uid,ref:"relatedListGroup_"+s,refInFor:!0,attrs:{listIndex:s,relatedList:t},on:{"delete-related-list":e.deleteRelatedList}})})),e._v(" "),a("LayoutItem",{staticClass:"slds-m-bottom_medium",attrs:{size:"4"}},[a("Button",{ref:"relatedListAddButton",attrs:{variant:"neutral",iconCategory:"utility",iconName:"add",label:e.$Labels.modal_MLB_Related_List_Button_Add_New,title:e.$Labels.modal_MLB_Related_List_Button_Add_New},on:{click:e.createNewRelatedList}})],1)],2)],1),e._v(" "),a("LayoutItem",{attrs:{size:"4"}},[a("img",{attrs:{src:s(8910),alt:e.$Labels.modal_MLB_Related_List_Image_Alt_Text}})])],1)}),[],!1,null,null,null).exports,Ft={name:"MarkerLayerBuilderPopups",components:{Details:Ot,ExpandableSection:a.Lm,Related:Dt,FieldSelection:he},extends:v,methods:{onFieldSelectionChanged(e){this.store.layer.tooltip1Label=e.field.label}}},At=(0,L.Z)(Ft,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Layout",{attrs:{multipleRows:""}},[s("LayoutItem",{attrs:{size:"12"}},[s("h2",{staticClass:"slds-text-heading_medium"},[s("b",[e._v(e._s(e.$Labels.modal_MLB_option_MP))])]),e._v(" "),s("div",{staticClass:"slds-text-title slds-m-top_xx-small slds-m-bottom_large"},[e._v(e._s(e.$Labels.modal_MLB_option_MP_help))]),e._v(" "),s("FieldSelection",{attrs:{value:e.store.layer.tooltip1,size:4,baseObject:e.store.layer.baseObject,labels:{name:e.$Labels.modal_MLB_option_MP_picklist_Title}},on:{"update:value":function(t){return e.$set(e.store.layer,"tooltip1",t)},changed:e.onFieldSelectionChanged}})],1),e._v(" "),s("LayoutItem",{staticClass:"slds-m-top_xx-small",attrs:{size:"12"}},[s("ExpandableSection",{attrs:{title:e.$Labels.modal_MLB_option_MP_section_Details}},[s("Details")],1),e._v(" "),s("ExpandableSection",{staticClass:"slds-m-top_large",attrs:{title:e.$Labels.modal_MLB_option_Related_Tab_section_Details,collapsedOnLoad:""}},[s("Related")],1)],1)],1)}),[],!1,null,null,null).exports,{queryEditorSaveComplete:wt,google:It}=window,Ct=Object.freeze({SAVE:Symbol("save"),SAVE_PLOT:Symbol("plot"),SAVE_REFRESH:Symbol("refresh")}),Et={components:{ButtonIcon:a.Ei,Modal:a.u_,Popover:a.J2,ProgressIndicator:a.YF,Spinner:a.$j,Tab:a.OK,Tabs:a.mQ,DetailsPanel:je,FiltersPanel:Xe,DisplayPanel:Mt,PopupsPanel:At,Toasts:a.F1,ValidatorTrap:Pe},mixins:[y],provide(){return{getStore:()=>this.store}},props:{options:{type:Object,required:!0},mode:{type:n.Jr,required:!0},type:{type:n.Jr,required:!0}},data(){return{currentStepIndex:0,getGUID:n.x$,bindTo:null,modalShow:!1,modalTitle:this.getModalTitle(),previouslyRenderedSteps:[],renderErrorIcon:!1,renderPopover:!1,store:Re(),steps:[{id:(0,n.x$)(),label:this.$Labels.modal_MLB_option_ND,tabId:"panel-details"},{id:(0,n.x$)(),label:this.$Labels.modal_MLB_option_BOF,tabId:"panel-object-filters"},{id:(0,n.x$)(),label:this.$Labels.modal_MLB_option_DO,tabId:"panel-display-options"},{id:(0,n.x$)(),label:this.$Labels.modal_MLB_option_MP,tabId:"panel-marker-popups"}],activeTabId:"panel-details"}},computed:{isCreateMode(){return this.$props.mode===d.nl.CREATE},isEditMode(){return this.$props.mode!==d.nl.CREATE},onLastStep(){return this.currentStepIndex===this.steps.length-1},disableNextButton(){return this.onLastStep},showPreviousButton(){return this.isCreateMode&&this.currentStepIndex>0},showSavePlotButton(){return this.$props.mode!==d.nl.PLOTTED_EDIT},showSaveRefreshButton(){return this.$props.mode===d.nl.PLOTTED_EDIT},loading(){return this.store.callouts>0},currentPanelId(){return this.isEditMode?this.activeTabId:this.currentStepIndex}},created(){this.init()},destroyed(){p.clear()},methods:{init(){switch(this.$props.mode){case d.nl.CREATE:this.applyDefaults(),this.applyOptions();break;case d.nl.EDIT:case d.nl.PLOTTED_EDIT:this.loadLayer()}this.store.metadata.type=this.$props.type},onResetStore(e){const t=Re();t.layer.name=this.store.layer.name,t.layer.description=this.store.layer.description,t.layer.folderId=this.store.layer.folderId,t.layer.folderType=this.store.layer.folderType,t.metadata.type=this.store.metadata.type,t.setBaseObject(e),this.$set(this,"store",t),this.previouslyRenderedSteps.length=0},applyDefaults(){this.store.layer.advancedOptions.heatmapGradient=["#68FFD7","#01BFBF","#2C2ED0"]},applyOptions(){this.store.layer.folderId=this.$props.options.id,this.store.layer.folderType=this.$props.options.nodeType,this.store.metadata.mode=this.$props.mode},getModalTitle(){let e="Marker Layer Builder";return this.$props.type===d.Yk.MARKER&&(e=this.$props.mode===d.nl.CREATE?this.$Labels.modal_MLB_header_new_marker:this.$Labels.modal_MLB_header_Edit_marker),this.$props.type===d.Yk.LIVE&&(e=this.$props.mode===d.nl.CREATE?this.$Labels.modal_MLB_header_new_live:this.$Labels.modal_MLB_header_Edit_live),e},async loadLayer(){try{this.store.callouts++;const{data:e,error:t,success:s}=await this.$remoting("MarkerLayerBuilderController.getLayerInfo",[this.$props.options.id,this.$props.options.clone||!1]);s?(this.parseLayerJSON(e.query),"Dynamic-Order"===e.query.colorAssignmentType&&(this.store.layer.colorAssignment={}),this.store.layer=r()(this.store.layer,e.query),this.store.local.baseObjectId=e.query.baseObjectId,this.store.local.baseObjectSettings=JSON.parse(e.query.baseObjectSettings),this.store.metadata.mode=this.$props.mode):(this.showErrorToast(t.message),console.error(e,t))}catch(e){this.genericExceptionHandler(e)}finally{this.store.callouts--}},parseLayerJSON(e){e.advancedOptions.heatmapGradient&&(e.advancedOptions.heatmapGradient=JSON.parse(e.advancedOptions.heatmapGradient)),e.advancedOptions.layerTypeOptions&&(e.advancedOptions.layerTypeOptions=JSON.parse(e.advancedOptions.layerTypeOptions)),e.colorAssignment&&("Dynamic-Order"===e.colorAssignmentType?e.colorAssignment=JSON.parse(e.colorAssignment):e.colorAssignment=JSON.parse(e.colorAssignment).map((e=>({...e,id:(0,n.x$)()})))),e.shapeAssignment&&(e.shapeAssignment=JSON.parse(e.shapeAssignment).map((e=>({...e,id:(0,n.x$)()})))),e.advancedOptions.waypointsAfter&&e.advancedOptions.waypointsBefore&&null!==e.advancedOptions.waypointsAfter&&null!==e.advancedOptions.waypointsBefore?e.advancedOptions.enableHide=!0:e.advancedOptions.enableHide=!1,void 0!==e.refreshInterval&&null!==e.refreshInterval?(e.advancedOptions.enableMapUpdates=!0,[e.advancedOptions.updateEvery,e.advancedOptions.mapUpdateUnits]=e.refreshInterval.trim().split(" ")):e.advancedOptions.enableMapUpdates=!1,Object.entries(e.advancedOptions).forEach((([t,s])=>{"true"===s?e.advancedOptions[t]=!0:"false"===s&&(e.advancedOptions[t]=!1)})),Object.entries(e.proximityOptions).forEach((([t,s])=>{"true"===s?e.proximityOptions[t]=!0:"false"===s&&(e.proximityOptions[t]=!1)}))},changeStep(e){this.currentStepIndex=e,this.previouslyRenderedSteps.push(e)},handlePrevious(){this.$refs.progressIndicator.previous()},handleNext(){this.$refs.progressIndicator.next()},handleSave(){this.save(Ct.SAVE)},handleSavePlot(){this.save(Ct.SAVE_PLOT)},handleSaveRefresh(){this.save(Ct.SAVE_REFRESH)},async save(e){if(this.isCurrentPanelValid())try{this.store.callouts++;const t=l()(this.store.layer);if(t.advancedOptions.heatmapGradient=JSON.stringify(t.advancedOptions.heatmapGradient),t.advancedOptions.layerTypeOptions=JSON.stringify(t.advancedOptions.layerTypeOptions),t.colorAssignment=JSON.stringify(t.colorAssignment),t.shapeAssignment=JSON.stringify(t.shapeAssignment),t.advancedOptions.enableProxLimit&&t.advancedOptions.distance&&""!==t.advancedOptions.distance&&t.advancedOptions.selectType&&""!==t.advancedOptions.selectType&&t.advancedOptions.distanceLat&&""!==t.advancedOptions.distanceLat&&t.advancedOptions.distanceLong&&""!==t.advancedOptions.distanceLong){const e=t.advancedOptions.distance,s={MILES:1609.344,KM:1e3,YARDS:.9144,FEET:.3048}[t.advancedOptions.selectType]||1;t.advancedOptions.distanceMeters=e*s;const a=new It.maps.LatLng(t.advancedOptions.distanceLat,t.advancedOptions.distanceLong),i=It.maps.geometry.spherical.computeOffset(a,t.advancedOptions.distanceMeters,0).lat()-a.lat(),l=It.maps.geometry.spherical.computeOffset(a,t.advancedOptions.distanceMeters,90).lng()-a.lng();t.advancedOptions.distanceMinLat=a.lat()-i,t.advancedOptions.distanceMaxLat=a.lat()+i,t.advancedOptions.distanceMinLong=a.lng()-l,t.advancedOptions.distanceMaxLong=a.lng()+l}else t.advancedOptions.enableProxLimit=!1;t.advancedOptions.enableHide&&null!==t.advancedOptions.waypointsAfter&&null!==t.advancedOptions.waypointsBefore&&""!==t.advancedOptions.waypointsAfter&&""!==t.advancedOptions.waypointsBefore||(t.advancedOptions.waypointsAfter=null,t.advancedOptions.waypointsBefore=null),t.advancedOptions.enableMapUpdates&&null!==t.advancedOptions.updateEvery&&""!==t.advancedOptions.updateEvery?t.refreshInterval=`${t.advancedOptions.updateEvery} ${t.advancedOptions.mapUpdateUnits}`:t.refreshInterval=null;const{data:s,error:a,success:i}=await this.$remoting("MarkerLayerBuilderController.upsertLayer",[JSON.stringify(t)]);if(i)this.store.layer.id=s.id,wt(s.id,this.store.layer.baseObjectName,this.store.layer,e!==Ct.SAVE,e===Ct.SAVE_REFRESH?this.$props.options.queryIndex.toString():null),this.$emit("close");else{let e=a.message;this.store.layer.tooltip1||(e=this.$Labels.modal_MLB_no_tooltip1_error),this.showErrorToast(e),console.error(s,a)}}catch(e){this.genericExceptionHandler(e)}finally{this.store.callouts--}},cancel(){this.$emit("close")},isCurrentPanelValid(){let e=!0;const t=this.$refs[`root-${this.currentPanelId}`];return t&&"function"==typeof t.isValid&&(e=t.isValid()),e?(this.renderErrorIcon=!1,this.renderPopover=!1):(this.bindTo=this.$refs.errorIcon.$el,this.renderErrorIcon=!0,this.renderPopover=!0),e},togglePopover(){this.bindTo=this.$refs.errorIcon.$el,this.renderPopover=!this.renderPopover}}},Rt=(0,L.Z)(Et,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Modal",{staticClass:"modal-no-padding",attrs:{title:e.modalTitle,size:"x-large",footless:e.loading},on:{close:e.cancel}},[s("Layout",{staticStyle:{height:"100%"},attrs:{slot:"content"},slot:"content"},[e.loading?s("Spinner"):e._e(),e._v(" "),e.renderPopover?s("Popover",{attrs:{bindTo:e.bindTo,theme:"error",position:"fixed"},on:{close:e.togglePopover}},[s("template",{slot:"header"},[e._v(" "+e._s(e.$Labels.modal_MLB_popover_Snag_Error_Button_Text))]),e._v(" "),s("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.$Labels.modal_MLB_popover_Review_Fields_Button_Text))])],2):e._e(),e._v(" "),s("Toasts",{attrs:{toasts:e.store.toasts}}),e._v(" "),s("Layout",{staticStyle:{width:"100%"}},[e.isCreateMode?[s("LayoutItem",{staticStyle:{width:"245px"},attrs:{size:"2"}},[s("nav",{staticClass:"slds-nav-vertical slds-border_right slds-p-vertical_small slds-p-horizontal_large",staticStyle:{height:"100%"},attrs:{"aria-label":"modal nav"}},[s("ProgressIndicator",{ref:"progressIndicator",attrs:{orientation:"vertical",onRequestStepChange:e.isCurrentPanelValid,steps:e.steps},on:{"step-change":e.changeStep}})],1)]),e._v(" "),s("div",{staticClass:"slds-p-around_medium slds-scrollable",staticStyle:{width:"100%"}},[s("ValidatorTrap",{ref:"root-0"},[s("DetailsPanel",{directives:[{name:"show",rawName:"v-show",value:0===e.currentStepIndex,expression:"currentStepIndex === 0"}],on:{"reset-store":e.onResetStore}})],1),e._v(" "),s("ValidatorTrap",{ref:"root-1"},[e.previouslyRenderedSteps.includes(1)?s("FiltersPanel",{directives:[{name:"show",rawName:"v-show",value:1===e.currentStepIndex,expression:"currentStepIndex === 1"}],ref:"root-1"}):e._e()],1),e._v(" "),s("ValidatorTrap",{ref:"root-2"},[e.previouslyRenderedSteps.includes(2)?s("DisplayPanel",{directives:[{name:"show",rawName:"v-show",value:2===e.currentStepIndex,expression:"currentStepIndex === 2"}],ref:"root-2"}):e._e()],1),e._v(" "),s("ValidatorTrap",{ref:"root-3"},[e.previouslyRenderedSteps.includes(3)?s("PopupsPanel",{directives:[{name:"show",rawName:"v-show",value:3===e.currentStepIndex,expression:"currentStepIndex === 3"}],ref:"root-3"}):e._e()],1)],1)]:s("Tabs",{staticStyle:{width:"100%"},attrs:{isVertical:"",activeTabId:e.activeTabId,onRequestTabChange:e.isCurrentPanelValid},on:{"update:activeTabId":function(t){e.activeTabId=t},"update:active-tab-id":function(t){e.activeTabId=t}}},[s("Tab",{staticClass:"slds-scrollable",attrs:{id:e.steps[0].tabId,title:e.steps[0].label}},[s("ValidatorTrap",{ref:"root-"+e.steps[0].tabId},[s("DetailsPanel")],1)],1),e._v(" "),s("Tab",{staticClass:"slds-scrollable",attrs:{id:e.steps[1].tabId,title:e.steps[1].label}},[s("ValidatorTrap",{ref:"root-"+e.steps[1].tabId},[s("FiltersPanel")],1)],1),e._v(" "),s("Tab",{staticClass:"slds-scrollable",attrs:{id:e.steps[2].tabId,title:e.steps[2].label}},[s("ValidatorTrap",{ref:"root-"+e.steps[2].tabId},[s("DisplayPanel")],1)],1),e._v(" "),s("Tab",{staticClass:"slds-scrollable",attrs:{id:e.steps[3].tabId,title:e.steps[3].label}},[s("ValidatorTrap",{ref:"root-"+e.steps[3].tabId},[s("PopupsPanel")],1)],1)],1)],2)],1),e._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("ButtonIcon",{directives:[{name:"show",rawName:"v-show",value:e.renderErrorIcon,expression:"renderErrorIcon"}],ref:"errorIcon",staticClass:"slds-button_icon-error",attrs:{assistiveText:e.$Labels.MA_Error,title:e.$Labels.MA_Error,iconCategory:"utility",iconName:"error",iconSize:"large"},on:{click:e.togglePopover}}),e._v(" "),s("button",{staticClass:"slds-button slds-button_neutral slds-float_left",on:{click:e.cancel}},[e._v("\n            "+e._s(e.$Labels.modal_MLB_Cancel_Button)+"\n        ")]),e._v(" "),e.showPreviousButton?s("button",{staticClass:"slds-button slds-button_neutral",on:{click:e.handlePrevious}},[e._v("\n            "+e._s(e.$Labels.modal_MLB_Previous_Button)+"\n        ")]):e._e(),e._v(" "),e.isCreateMode?s("button",{staticClass:"slds-button slds-button_neutral",attrs:{disabled:e.disableNextButton},on:{click:e.handleNext}},[e._v("\n            "+e._s(e.$Labels.modal_MLB_Next_Button)+"\n        ")]):e._e(),e._v(" "),s("button",{staticClass:"slds-button slds-button_neutral",on:{click:e.handleSave}},[e._v("\n            "+e._s(e.$Labels.modal_MLB_Save_Button)+"\n        ")]),e._v(" "),e.showSavePlotButton?s("button",{staticClass:"slds-button slds-button_brand",on:{click:e.handleSavePlot}},[e._v("\n            "+e._s(e.$Labels.modal_MLB_Save_and_Plot_Button)+"\n        ")]):e._e(),e._v(" "),e.showSaveRefreshButton?s("button",{staticClass:"slds-button slds-button_brand",on:{click:e.handleSaveRefresh}},[e._v("\n            Save & Refresh\n        ")]):e._e()],1)],1)}),[],!1,null,"594b6fc0",null).exports}}]);