"use strict";(globalThis.webpackChunkmaps_desktop=globalThis.webpackChunkmaps_desktop||[]).push([[833],{3278:(e,s,t)=>{t.r(s),t.d(s,{default:()=>r});var a=t(1515),o=t(257);const l={components:{Modal:a.u_,Spinner:a.$j,ScopedNotification:a.ac},props:{modalOptions:{type:Object,default:()=>{}}},data:()=>({baseObjects:[],isPoly:!1,isLoading:!1,selectedObject:"",hasError:!1}),computed:{baseObjectType(){return this.modalOptions.baseObjectType},hasBaseObjects(){return this.baseObjects.length>0}},created(){this.isLoading=!0,this.getBaseObjects().catch((e=>{const{message:s=""}=e;this.$root.$emit("toast",{message:s,state:"warning"}),this.hasError=!0})).finally((()=>{this.checkForPolyObject(),this.isLoading=!1}))},methods:{checkForPolyObject(){this.baseObjects.find((e=>e.Id===this.selectedObject)).PolymorphicObject?this.isPoly=!0:this.isPoly=!1},getBaseObjects(){return new Promise(((e,s)=>{(new o.Z).setAction("maps.RemoteFunctions.GetSavedBaseObjects").setErrorHandler((e=>{console.warn(e),s(new Error("An error occurred while retrieving the available base objects. Please try refreshing the page or contacting your SF admin."))})).invoke([],(t=>{const{success:a=!1,data:o={}}=t;if(a){"live"===this.baseObjectType?this.baseObjects=o.live||[]:this.baseObjects=o.core||[];const[s]=this.baseObjects;s&&(this.selectedObject=s.Id),e()}else console.warn(t),s(new Error("An error occurred while retrieving the available base objects. Please try refreshing the page or contacting your SF admin."))}))}))},close(){this.$emit("close")},openMarkerLayerBuilder(){this.close();const e=window.MALayers.currentFolder;let s=window.MALayers.currentFolderNodeType;"PersonalRoot"!==e&&"CorporateRoot"!==s||(s=e);const t=this.selectedObject;this.$bus.$emit("open-modal",{modal:"create-sfdc-layer",options:{params:{b:t,f:e,ft:s}}})}}},r=(0,t(1900).Z)(l,(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("Modal",{staticClass:"select-base-object-modal",attrs:{title:"Maps "+e.$Labels.MA_BASE_OBJECTS,labels:{close:e.$Labels.MA_Close}},on:{close:e.close}},[t("div",{attrs:{slot:"content"},slot:"content"},[t("Spinner",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}],attrs:{loadingLabel:e.$Labels.MA_Loading}}),e._v(" "),t("div",{staticClass:"slds-scrollable slds-grow"},[e.isPoly&&e.hasBaseObjects?t("div",[t("ScopedNotification",{attrs:{theme:"info"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                        "+e._s(e.$Labels.BaseObject_PolymorphicMessage)+"\n                    ")])])],1):e._e(),e._v(" "),e.isLoading?t("div",[e._v("\n                Loading base objects... Please wait\n            ")]):e.hasBaseObjects?t("table",{staticClass:"slds-table slds-table_bordered slds-table_cell-buffer",attrs:{role:"grid"}},[t("thead",{staticClass:"ma-table-header"},[t("tr",{staticClass:"slds-text-title_caps"},[t("th",[e._v("Base Object")]),e._v(" "),t("th",[e._v("Description")])])]),e._v(" "),t("tbody",e._l(e.baseObjects,(function(s,a){return t("tr",{key:a},[t("td",[t("span",{staticClass:"slds-radio"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedObject,expression:"selectedObject"}],attrs:{id:"radio-"+s.Id,type:"radio",name:"baseObject"},domProps:{value:s.Id,checked:e._q(e.selectedObject,s.Id)},on:{change:[function(t){e.selectedObject=s.Id},e.checkForPolyObject]}}),e._v(" "),t("label",{staticClass:"slds-radio__label",attrs:{for:"radio-"+s.Id}},[t("span",{staticClass:"slds-radio_faux"}),e._v(" "),t("span",{staticClass:"slds-form-element__label slds-m-left--x-small"},[e._v(e._s(e._f("decode")(s.Name__c)))])])])]),e._v(" "),t("td",{staticStyle:{"white-space":"normal !important"}},[e._v(e._s(e._f("decode")(s.Description__c)))])])})),0)]):t("div",[e._v("\n                Unfortunately no base objects have been configured. Please create one or contact your SF admin to continue.\n            ")])])],1),e._v(" "),t("template",{slot:"footer"},[t("button",{staticClass:"slds-button slds-button_neutral customDis-cancel",on:{click:e.close}},[e._v("\n            "+e._s(e.$Labels.MA_Cancel)+"\n        ")]),e._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:!e.hasError&&e.hasBaseObjects,expression:"!hasError && hasBaseObjects"}],staticClass:"slds-button slds-button_brand js-layerSubType",attrs:{"data-layerSubType":"::layerSubType::",role:"saveButton"},on:{click:e.openMarkerLayerBuilder}},[e._v("\n            "+e._s(e.$Labels.MA_Continue)+"\n        ")])])],2)}),[],!1,null,"7759785e",null).exports}}]);