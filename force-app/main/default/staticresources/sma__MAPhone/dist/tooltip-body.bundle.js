webpackJsonp([34],{218:function(t,e,i){var o=i(13)(i(225),i(226),function(t){i(223)},"data-v-4c583d7f",null);t.exports=o.exports},222:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=new(function(t){return t&&t.__esModule?t:{default:t}}(i(94)).default);function a(t,e,i){var a=function o(a){i.context._isDestroyed?document.removeEventListener("click",o):t.contains(a.target)||t===a.target||e(a)};o.set(t,a),setTimeout(function(){return document.addEventListener("click",a)},0)}function n(t){var e=o.get(t);document.removeEventListener("click",e),o.delete(t)}e.default={bind:function(t,e,i){var o=e.arg,n=o.active,s=o.handler;if("function"!=typeof s)throw new Error("v-click-outside: missing required handler argument.");!0===n&&a(t,s,i)},update:function(t,e,i){var s=e.arg,r=s.active,c=s.handler;r&&!o.has(t)?a(t,c,i):!r&&o.has(t)&&n(t)},unbind:function(t){n(t)}}},223:function(t,e,i){var o=i(224);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);i(198)("49b356e9",o,!0)},224:function(t,e,i){(t.exports=i(197)(void 0)).push([t.i,".action-sheet_wrap[data-v-4c583d7f]{background-color:#fff;overflow:hidden!important;position:relative;z-index:110}.action-sheet_content[data-v-4c583d7f]{overflow-y:auto}.slds-scope .slds-button.slds-button_neutral.action-sheet_close-button[data-v-4c583d7f]{border-radius:0;box-shadow:0 -2px 4px #f9f9fa;padding:1rem 0;text-align:center!important;background:none;border:0;border-top:1px solid #dddbda;line-height:inherit;width:100%;vertical-align:top}.action-sheet_item[data-v-4c583d7f]{min-width:150px;border-bottom:1px solid #dddbda}.action-sheet_item[data-v-4c583d7f]:last-child{border-bottom:0}.action-sheet_selected-icon[data-v-4c583d7f]{display:none}.slds-is-selected .action-sheet_selected-icon[data-v-4c583d7f]{display:block}.action-sheet_mask[data-v-4c583d7f]{background-color:rgba(8,7,7,.6);height:100%;left:0;position:fixed;top:0;z-index:100;width:100%}.ma-action-sheet-item.header[data-v-4c583d7f]{background-color:#3083d3;color:#fff}.ma-top-bar-row .slds-button[data-v-4c583d7f]{color:#fff;font-size:20px}@media screen and (max-width:769px){.ma-action-sheet-wrap .footer[data-v-4c583d7f]{padding:25px!important}.ma-action-sheet-item[data-v-4c583d7f]{padding:16px 16px 16px 40px!important}}.ma-action-sheet-wrap[data-v-4c583d7f]{position:fixed;width:100%;height:100%;left:0;top:0;visibility:hidden;z-index:6000}.ma-action-sheet-wrap .ma-action-sheet[data-v-4c583d7f]{position:absolute;left:0;margin:0;bottom:0;width:100%;transform:translateY(100%);background-color:#fff;z-index:200;box-shadow:0 2px 3px 0 rgba(0,0,0,.16);padding-top:16px;border-radius:0}@media screen and (max-width:768px){.ma-action-sheet-wrap .ma-action-sheet .maActionSheetClose[data-v-4c583d7f]{text-align:center;width:100%;display:block;padding:16px;font-size:16px;line-height:1.5;color:#1589ee}}.ma-action-sheet-wrap .ma-action-sheet .ma-action-sheet-item[data-v-4c583d7f]{padding:16px;color:#0070d2;font-size:16px;line-height:1;text-align:center}.ma-action-sheet-wrap .ma-action-sheet .ma-action-sheet-close[data-v-4c583d7f]{padding:20px 16px;border-top:2px solid #dddbda;color:#0070d2;font-size:16px;line-height:1;text-align:center}.ma-action-sheet-wrap .ma-action-sheet .ma-action-sheet-close .ma-icon[data-v-4c583d7f]{height:16px;display:inline-block;margin-right:4px;transform:translateY(2px)}.ma-action-sheet-wrap#longPressActionSheet[data-v-4c583d7f]{height:100%;width:100%}.ma-action-sheet-wrap#longPressActionSheet .ma-action-sheet[data-v-4c583d7f]{padding-top:0;width:100%;bottom:0}.ma-action-sheet-wrap#longPressActionSheet .ma-action-sheet .ma-action-sheet-item[data-v-4c583d7f]{text-align:left;color:#3e3e3c;display:flex;align-items:center;border-bottom:1px solid #dddbda}@media screen and (min-width:769px){.ma-action-sheet-wrap#longPressActionSheet .ma-action-sheet .ma-action-sheet-item[data-v-4c583d7f]{justify-content:center}}.ma-action-sheet-wrap#longPressActionSheet .ma-action-sheet .ma-action-sheet-item .ma-icon[data-v-4c583d7f]{color:#fff;background-color:#1589ee;border-radius:100%;height:34px;width:34px;display:flex;justify-content:center;align-items:center;margin-right:8px;font-size:22px}.ma-action-sheet-wrap.in[data-v-4c583d7f]{visibility:visible}.ma-action-sheet-wrap.in .action-sheet-mask[data-v-4c583d7f]{opacity:1}.ma-action-sheet-wrap.in .ma-action-sheet[data-v-4c583d7f]{transform:translate(0)}@media screen and (min-width:769px){.ma-action-sheet-wrap[data-v-4c583d7f]{position:absolute;width:auto;height:auto;background-color:transparent}.ma-action-sheet-wrap .ma-action-sheet[data-v-4c583d7f]{width:auto;left:auto;bottom:auto;border-radius:4px;transform:translate(0);opacity:0;text-align:left;min-width:250px;border:1px solid #dddbda}.ma-action-sheet-wrap .ma-action-sheet .ma-action-sheet-item[data-v-4c583d7f]{text-align:left}.ma-action-sheet-wrap .ma-action-sheet .ma-action-sheet-close[data-v-4c583d7f]{display:none}.ma-action-sheet-wrap.in .ma-action-sheet[data-v-4c583d7f]{opacity:1;transform:translate(0)}}",""])},225:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(222),a=i.n(o),n=window.$;e.default={name:"ActionSheet",directives:{"click-outside":a.a},props:{options:{type:Array,required:!0},doDetach:{type:Boolean,default:!0},labelKey:{type:String,default:"label"},buttonText:{type:String,default:""},buttonIcon:{type:String,default:""},hideOverride:{type:Boolean,default:!1},selectedItems:{type:Array,default:function(){return[]}},buttonType:{type:String,default:""}},data:function(){return{container:null,showOptions:!1,styleObject:{},window:{height:0,width:0},uid:"action-sheet"}},computed:{isPhone:function(){return this.window.width<769},computedIcon:function(){var t="";return""!==this.buttonIcon?t=this.buttonIcon:""===this.buttonText&&(t="ma-icon-threedots-vertical"),t},actionSheetClickOutsideOptions:function(){return{active:this.showOptions,handler:this.hideActionSheet}}},watch:{isPhone:function(){this.showOptions=!1}},created:function(){window.addEventListener("resize",this.handleResize),this.handleResize()},destroyed:function(){window.removeEventListener("resize",this.handleResize),this.hideActionSheet()},methods:{handleResize:function(){this.window.width=window.innerWidth,this.window.height=window.innerHeight},returnItem:function(t){t.isHeader||(this.$emit("select",t),this.hideActionSheet())},hideActionSheet:function(){this.showOptions=!1,this.container&&(this.container.remove(),this.container=null)},detach:function(){if(this.$refs.button){var t=document.querySelector(".slds-scope."+this.uid);try{t.remove()}catch(t){}var e=this.$refs.button.getBoundingClientRect();this.container=document.createElement("div"),this.container.className="slds-scope "+this.uid,this.container.appendChild(this.$refs.actions),document.body.appendChild(this.container),this.styleObject={top:e.top+this.$refs.button.clientHeight+n(window).scrollTop()+"px",left:e.left+n(window).scrollLeft()+"px","max-height":"300px"}}},adjustForClipping:function(){var t=this.$refs.actions.getBoundingClientRect(),e=void 0;if(e=document.documentElement.clientHeight-window.innerHeight<=0?document.documentElement.clientHeight:window.innerHeight-this.getScrollbarWidth(),t.x<0)this.styleObject.left=this.$refs.actions.offsetLeft+Math.abs(t.x)+"px";else if(t.left+t.width>document.documentElement.clientWidth){var i=t.left+t.width-document.documentElement.clientWidth-n(window).scrollLeft();this.styleObject.left=t.left-i+"px"}var o=this.$refs.actions.scrollHeight,a=n(window).scrollTop();if(this.styleObject["max-height"]="300px",t.top+o>e){var s=t.top+o-a-e;this.$bus.$emit("ma-modal-scroll-by",s),this.styleObject.top=t.top-s+"px"}},disableClick:function(t){t.stopPropagation(),t.preventDefault()},openActionSheet:function(){var t=this;this.showOptions=!0,this.doDetach&&this.detach(),this.$nextTick(function(){t.doDetach&&t.adjustForClipping(),t.options.forEach(function(e,i){var o=e,a=t.$refs.optionItem[i];o.isHeader&&a.addEventListener("click",t.disableClick,!0)})})}}}},226:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"click-outside",rawName:"v-click-outside:[actionSheetClickOutsideOptions]",arg:t.actionSheetClickOutsideOptions}],staticClass:"action-sheet-wrapper slds-scope"},[i("div",{ref:"button",staticClass:"slds-grid slds-grid_vertical-align-center",on:{click:t.openActionSheet}},[i("div",{staticClass:"slds-button slds-col slds-truncate"},[t._v(t._s(t._f("decode")(t.buttonText)))]),t._v(" "),""!==t.computedIcon?i("div",[i("button",{staticClass:"slds-button slds-button_icon slds-button_icon-container",class:[t.buttonType]},[i("span",{staticClass:"slds-button__icon ma-icon",class:[t.computedIcon]})])]):t._e()]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showOptions,expression:"showOptions"}],ref:"actions",staticClass:"ma-action-sheet-wrap in slds-grid slds-grid_vertical slds-grid_align-end",style:t.isPhone?{}:t.styleObject},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isPhone,expression:"isPhone"}],staticClass:"action-sheet_mask",on:{click:t.hideActionSheet}}),t._v(" "),i("div",{staticClass:"action-sheet_wrap slds-grid slds-grid_vertical"},[i("div",{staticClass:"action-sheet_content slds-scrollable"},t._l(t.options,function(e,o){return i("div",{key:o,ref:"optionItem",refInFor:!0,staticClass:"action-sheet_item slds-grid slds-p-around_medium",class:{"header slds-text-title_caps slds-section__title slds-theme--shade":e.isHeader,"slds-is-selected":t.selectedItems.includes(e.id)},on:{click:function(i){return t.returnItem(e)}}},[t._m(0,!0),t._v(" "),i("div",{staticClass:"slds-col"},[i("span",{staticStyle:{"word-break":"break-word"}},[t._v(t._s(t._f("decode")(e[t.labelKey])))])])])}),0),t._v(" "),i("div",{staticClass:"slds-button slds-button_neutral action-sheet_close-button",on:{click:t.hideActionSheet}},[t._v("\n                "+t._s(t._f("decode")(t.$Labels.MA_Close))+"\n            ")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"action-sheet_selected-icon slds-p-right_medium"},[e("span",{staticClass:"slds-icon slds-icon_x-small ma-icon ma-icon-check"})])}]}},579:function(t,e,i){var o=i(13)(i(580),i(657),null,null,null);t.exports=o.exports},580:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(14),a=i.n(o),n=i(581),s=i.n(n),r=i(62),c=i.n(r),d=i(63),l=i.n(d);e.default={components:{TooltipActionButtons:s.a,TooltipContent:function(){return a()({},c()(),{component:i.e(27).then(i.bind(null,586)),error:l.a})}}}},581:function(t,e,i){var o=i(13)(i(584),i(585),function(t){i(582)},"data-v-525f8806",null);t.exports=o.exports},582:function(t,e,i){var o=i(583);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);i(198)("7689641c",o,!0)},583:function(t,e,i){(t.exports=i(197)(void 0)).push([t.i,".action-button[data-v-525f8806]{padding:8px}.action-button_text[data-v-525f8806]{font-family:AvenirNextCondensed,HelveticaNeue-Condensed,Ubuntu Condensed,Liberation Sans Narrow,Franklin Gothic Cond,Arial Narrow,sans-serif-condensed,Arial,Trebuchet MS,Lucida Grande,Tahoma,Verdana,sans-serif;text-align:center;line-height:1;font-size:12px;color:#fff;background-color:transparent;outline:0;border:0;min-width:52px;letter-spacing:.5px;font-weight:300}.action-button-wrapper[data-v-525f8806]{width:100%}.action-button_icon[data-v-525f8806]{color:#fff;font-size:24px;line-height:1}[data-v-525f8806].action-sheet-wrapper .ma-icon{color:#fff}",""])},584:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(14),a=i.n(o),n=i(39),s=i.n(n),r=i(218),c=i.n(r),d=i(35),l=(i.n(d),window),h=l.MAActionFramework,u=l.getProperty;e.default={components:{ActionSheet:c.a},data:function(){return{actionButtons:[],actionButtonsExtended:[],showActionSheet:!1,buttonSetMap:{"sfdc-marker":"tooltipLayout","my-position":"myPositionLayout","data-layer":"dataLayerLayout","favorite-marker":"FavoriteMarkerLayout","arcGIS-marker":"ArcGISLayerLayout",poi:"poiLayout"}}},computed:a()({buttonSetSettings:function(){return u(window,"userSettings.ButtonSetSettings",!1)||{}}},Object(d.mapGetters)("tooltip",{tooltip__record:"record",tooltip__queryMetaData:"queryMetaData",tooltip__markerType:"markerType",tooltip__marker:"marker"})),created:function(){this.$bus.$on("refresh-action-buttons",this.buildActionButtons),this.buildActionButtons()},beforeDestroy:function(){this.closeActionSheet(),this.$bus.$off("refresh-action-buttons")},methods:{buildActionButtons:function(){this.actionButtons=[],this.actionButtonsExtended=[];var t=[],e=void 0!==this.buttonSetMap[this.tooltip__markerType];if("waypoint-marker"===this.tooltip__markerType)t.push({action:"Take Me There",header:!1,icon:"ma-icon-navigate-arrow",label:this.$Labels.MAActionFramework_Take_Me_There,type:"Standard Action"});else if("c2c-marker"===this.tooltip__markerType)t.push({action:"View Record",header:!1,icon:"ma-icon-document",label:this.$Labels.MA_VIEW_RECORD,type:"Standard Action"}),t.push({action:"Add to Trip",header:!1,icon:"ma-icon-route",label:this.$Labels.MAActionFramework_Add_to_Trip,Type:"Standard Action"}),t.push({action:"Take Me There",header:!1,icon:"ma-icon-navigate-arrow",label:this.$Labels.MAActionFramework_Take_Me_There,type:"Standard Action"}),t.push({action:"Remove C2C Marker",header:!1,icon:"ma-icon-close",label:this.$Labels.MAContext_Remove_Marker,type:"Standard Action"}),t.push({action:"Check In",header:!1,icon:"ma-icon-checkin",label:this.$Labels.MAActionFramework_Check_In,type:"Standard Action"});else if(e){var i=this.buttonSetMap[this.tooltip__markerType];if(t=h.buildMobileLayoutFromContentsListView(this.buttonSetSettings[i],{queryMetadata:this.tooltip__queryMetaData,record:this.tooltip__record,markerType:this.tooltip__markerType}),"sfdc-marker"===this.tooltip__markerType||"favorite-marker"===this.tooltip__markerType){var o={action:"View Record",header:!1,icon:"ma-icon-document",label:this.$Labels.MA_VIEW_RECORD,type:"Standard Action"};t.unshift(o)}}else console.warn("no button set info found");this.setActionButtons(t)},setActionButtons:function(t){for(var e=0,i=0,o=t.length;i<o;i++){var a=t[i],n=a.icon||"ma-icon-solution",r=void 0;r="Check In"===a.action?this.processCheckInStatus(a):{type:a.type,action:a.action,label:a.label,icon:n,id:s()()},a.header||this.tooltip__record.isRouteMarker&&"Remove Marker"===a.action||(e<=4?this.actionButtons.push(r):this.actionButtonsExtended.push(r)),e++}},processCheckInStatus:function(t){var e=[],i=[];try{e=this.tooltip__record.Tasks||[]}catch(s){}try{i=this.tooltip__record.Events||[]}catch(s){}for(var o="",a=0;a<e.length;a++){var n=e[a];if(!n.IsClosed){o=n.Id,t.label=this.$Labels.MAActionFramework_Check_Out,t.action="Check Out",t.checkInId=o;break}}for(var s=0;s<i.length;s++){var r=i[s];if(0===r.Subject.indexOf("Check In @")){o=r.Id,t.label=this.$Labels.MAActionFramework_Check_Out,t.action="Check Out",t.checkInId=o;break}}return t},formatMarkerForActionFramework:function(){var t={};switch(this.tooltip__markerType){case"sfdc-marker":case"waypoint-marker":case"c2c-marker":t={records:[this.tooltip__record]};break;case"favorite-marker":t={favorites:[this.tooltip__marker]};break;case"data-layer":(t={dataLayers:{}}).dataLayers[this.tooltip__marker.qid]=[this.tooltip__marker];break;case"my-position":t={customMarkers:[{type:"MyPosition",title:"My Position",latlng:this.tooltip__marker.getPosition(),address:this.tooltip__marker.address||""}]};break;case"arcGIS-marker":t={records:[{type:"feature",title:this.tooltip__record.name||"ArcGIS Marker",location:this.tooltip__record.location,address:"Lat: "+this.tooltip__record.location.coordinates.lat+", Lng: "+this.tooltip__record.location.coordinates.lng,sublayer:this.tooltip__queryMetaData.sublayer,marker:{title:this.tooltip__record.name||"ArcGIS Marker"},feature:this.tooltip__marker.feature}]};break;case"poi":t={customMarkers:[{type:"POI",title:this.tooltip__marker.title,latlng:this.tooltip__marker.getPosition(),address:this.tooltip__record.formatted_address||"",place:u(this.tooltip__marker,"maData.place",!1)||{}}]};break;default:console.warn("type not found",this.tooltip__markerType)}return t},handleTooltipAction:function(t){var e=this,i="Custom Action"===t.type?h.customActions[t.action]||null:h.standardActions[t.action]||null;if("Iframe"===i);else if("NewWindow"===i.Action){i.ActionValue.indexOf("{records}");var o=i.ActionValue+(-1===i.ActionValue.indexOf("?")?"?noparams":"")+"&Button="+encodeURIComponent(i.Label)+"&RecordId="+this.tooltip__record.record.Id;if("GET"===i.Options.method)i.Options.addRecords&&(o+="&"+i.Options.paramName+"="+this.tooltip__record.Id),window.ma_navigateToUrl(o,"url","blank");else{var a={};i.Options.addRecords&&(a[i.Options.paramName]=this.tooltip__record.Id),window.openNewWindow("POST",o,a,"_blank")}}else if("Check In"===t.action||"Check Out"===t.action)i.ActionValue.call(this,{buttonInfo:t,records:[this.tooltip__record]}).then(function(i){window.MA.enabledFeatures.autoCheckOut||"Check Out"===t.action?(t.label=e.$Labels.MAActionFramework_Check_In,t.action="Check In"):(t.label=e.$Labels.MAActionFramework_Check_Out,t.action="Check Out"),t.checkInId=i});else{var n=this.formatMarkerForActionFramework();n.button=t,i.ActionValue.call(this,n)}},openActionSheet:function(){this.showActionSheet=!0},closeActionSheet:function(){this.showActionSheet=!1}}}},585:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"action-bar-wrap"},[i("div",{staticClass:"slds-grid slds-grid_vertical-align-center",staticStyle:{width:"100%"}},[t._l(t.actionButtons,function(e){return i("button",{key:e.id,staticClass:"action-button slds-col action-bar-button actionbutton",attrs:{"data-type":e.type,"data-action":e.action},on:{click:function(i){return t.handleTooltipAction(e)}}},[i("div",{staticClass:"slds-grid slds-grid_vertical slds-grid_vertical-align-center slds-grid_horizontal-align-center"},[i("div",{staticClass:"action-button_icon ma-icon",class:e.icon}),t._v(" "),i("div",{staticClass:"action-button_text action-bar-button-text"},[t._v(t._s(t._f("decode")(e.label)))])])])}),t._v(" "),t.actionButtonsExtended.length>0?i("ActionSheet",{attrs:{doDetach:!0,hideOverride:t.showActionSheet,options:t.actionButtonsExtended},on:{select:t.handleTooltipAction,hide:t.closeActionSheet}}):t._e()],2)])},staticRenderFns:[]}},657:function(t,e){t.exports={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tooltip-body flex-grow-1",attrs:{id:"markerTooltipBody"}},[e("div",{staticClass:"tooltip-inner slds-grid slds-grid_vertical"},[e("TooltipActionButtons"),this._v(" "),e("TooltipContent")],1)])},staticRenderFns:[]}}});