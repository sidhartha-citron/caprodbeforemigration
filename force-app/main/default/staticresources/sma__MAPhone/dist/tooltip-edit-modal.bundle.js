webpackJsonp([50],{279:function(e,t,s){var a=s(13)(s(280),s(281),null,null,null);e.exports=a.exports},280:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(217),l=s.n(a),i=window.getProperty;t.default={components:{MAModal:l.a},props:{searchFunction:{type:Function,required:!0},searchKey:{type:String,required:!0},searchLabel:{type:String,required:!0},minimumSearchLength:{type:Number,required:!1,default:2}},data:function(){return{searchResults:[],styleObject:{position:"relative",padding:0,background:"#fff",border:"1px solid #dddbda","border-radius":".25rem","background-clip":"padding-box","box-shadow":"0 2px 2px 0 rgba(0,0,0,.1)"},searchTerm:"",isLoading:!1,searchTimeout:null}},computed:{showEmptyState:function(){var e=0===this.searchResults.length,t=this.searchTerm.length<=this.minimumSearchLength;return t||e||t}},watch:{searchTerm:function(e){e.length>this.minimumSearchLength&&this.debounceSearch(e)}},mounted:function(){var e=this;this.$nextTick(function(){e.$refs.mobileSearchInput.focus()})},methods:{returnResult:function(e){this.$emit("result",e),this.close()},close:function(){this.$emit("close-search-modal")},clearInput:function(){this.returnResult({id:"",label:""})},debounceSearch:function(e){var t=this;clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(function(){t.isLoading=!0,t.searchResults=[],t.searchFunction(e).then(function(e){t.processResults(e)}).catch(function(e){console.warn(e)}).finally(function(){t.isLoading=!1})},250)},processResults:function(e){var t=this;e.forEach(function(e){t.searchResults.push({label:i(e,t.searchLabel,!1),id:i(e,t.searchKey,!1),result:e})})}}}},281:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("MAModal",{staticClass:"slds-modal_large",attrs:{doDetach:!0,title:e.$Labels.MA_Search,closeLabel:e.$Labels.MA_Close},on:{close:e.close}},[s("div",{attrs:{slot:"content"},slot:"content"},[s("div",{staticClass:"ma-form-control has-inset-icon--right"},[s("div",{staticClass:"slds-form-element"},[s("div",{staticClass:"slds-form-element__control slds-input-has-icon slds-input-has-icon_right"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}],staticClass:"slds-input__icon-group slds-input__icon-group_right"},[s("div",{staticClass:"slds-spinner slds-spinner_brand slds-spinner_x-small slds-input__spinner",staticStyle:{right:"5px"},attrs:{role:"status"}},[s("span",{staticClass:"slds-assistive-text"},[e._v("Loading")]),e._v(" "),s("div",{staticClass:"slds-spinner__dot-a"}),e._v(" "),s("div",{staticClass:"slds-spinner__dot-b"})])]),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:!e.isLoading,expression:"!isLoading"}],staticClass:"slds-icon slds-input__icon slds-input__icon_left slds-icon-text-default ma-icon ma-icon-search"}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchTerm,expression:"searchTerm"}],ref:"mobileSearchInput",staticClass:"slds-input",attrs:{placeholder:e.$Labels.MA_Search+"...",type:"text"},domProps:{value:e.searchTerm},on:{input:function(t){t.target.composing||(e.searchTerm=t.target.value)}}})])])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.showEmptyState,expression:"showEmptyState"}],staticClass:"search-empty-state"},[s("div",{staticClass:"text-center"},[s("span",{staticClass:"ma-icon ma-icon-info ma-icon--large"})]),e._v(" "),s("div",[s("p",{staticClass:"text-center"},[e._v("Search above for available options")])])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.showEmptyState,expression:"!showEmptyState"}],staticClass:"slds-m-top_medium"},e._l(e.searchResults,function(t,a){return s("article",{key:a,staticClass:"slds-card",style:e.styleObject,on:{click:function(s){return e.returnResult(t)}}},[s("div",{staticClass:"slds-card__header slds-grid"},[s("header",{staticClass:"slds-media slds-media_center slds-has-flexi-truncate"},[s("div",{staticClass:"slds-media__body"},[s("h2",{staticClass:"slds-card__header-title"},[s("div",{staticClass:"slds-card__header-link slds-truncate"},[s("span",[e._v(e._s(e._f("decode")(t.label)))])])])])])])])}),0)]),e._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("div",{staticClass:"float-right"},[s("button",{staticClass:"slds-button slds-button_neutral",on:{click:e.close}},[e._v("\n                "+e._s(e.$Labels.MA_Cancel)+"\n            ")]),e._v(" "),s("button",{staticClass:"slds-button slds-button_brand",on:{click:e.clearInput}},[e._v("\n                "+e._s(e.$Labels.MA_Clear)+"\n            ")])])])])},staticRenderFns:[]}},608:function(e,t,s){var a=s(13)(s(609),s(610),null,null,null);e.exports=a.exports},609:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(65),l=s.n(a),i=s(17),o=s.n(i),r=s(217),n=s.n(r),c=s(7),d=s.n(c),u=s(279),p=s.n(u),f=window,m=f.getProperty,h=f.$,v=f.MARemoting,b=f.MA,_=f.moment,w=f.htmlEncode;t.default={components:{MAModal:n.a,MobileSearch:p.a},props:{tooltips:{type:Array,required:!0},record:{type:Object,required:!0}},data:function(){return{rawHTML:"",showSearch:!1,fieldToSearch:{},searchRow:null,isLoading:!1,fieldInfo:[]}},computed:{},created:function(){var e=this;this.createHTML().then(function(){e.setRecordValues(),e.attachEventListeners()})},methods:{toggleSearch:function(e){this.showSearch=e},close:function(){this.isLoading||this.$emit("close-edit-tooltips",!1)},performAction:function(e){this.$emit("handle-tooltip-action",e),this.close()},updateSearchValue:function(e){this.searchRow.find(".js-search").attr("data-value",e.id).val(e.label)},createHTML:function(){var e=this;return new o.a(function(t){for(var s=0;s<e.tooltips.length;s++){var a=e.tooltips[s],l="",i="uid_"+s,o=a.isEditAble?"":'disabled="disabled"';switch(a.editType){case"number":case"string":l='<div class="slds-form-element tooltip-row slds-p-vertical_x-small" data-type="'+a.editType+'">\n                                        <label class="slds-form-element__label" for="'+i+'">'+w(a.fieldLabel)+'</label>\n                                        <div class="slds-form-element__control">\n                                            <input '+o+' type="text" id="'+i+'" class="slds-input tooltipValue" />\n                                        </div>\n                                    </div>';break;case"textarea":l='<div class="slds-form-element tooltip-row slds-p-vertical_x-small" data-type="string">\n                                        <label class="slds-form-element__label" for="'+i+'">'+w(a.fieldLabel)+'</label>\n                                        <div class="slds-form-element__control">\n                                            <textarea '+o+' type="text" id="'+i+'" class="slds-input tooltipValue"></textarea>\n                                        </div>\n                                    </div>';break;case"picklist":for(var r="",n=m(a,"describe.picklistValues",!1)||a.picklistOptions||[],c=0;c<n.length;c++){var d=n[c];d.active&&(r+='<option value="'+d.value+'">'+w(d.label)+"</option>")}l='<div class="slds-form-element tooltip-row slds-p-vertical_x-small" data-type="picklist">\n                                        <label class="slds-form-element__label" for="'+i+'">'+w(a.fieldLabel)+'</label>\n                                        <div class="slds-select_container">\n                                            <select '+o+' class="slds-select tooltipValue" id="'+i+'">'+r+"</select>\n                                        </div>\n                                    </div>";break;case"multipicklist":for(var u="",p=m(a,"describe.picklistValues",!1)||a.picklistOptions||[],f=0;f<p.length;f++){var h=p[f];h.active&&(u+='<option value="'+h.value+'">'+w(h.label)+"</option>")}l='<div class="slds-form-element tooltip-row slds-p-vertical_x-small" data-type="multipicklist">\n                                        <label class="slds-form-element__label" for="'+i+'">'+w(a.fieldLabel)+'</label>\n                                        <div class="slds-select_container">\n                                            <select '+o+' multiple class="slds-select multiSelect tooltipValue" id="'+i+'" style="overflow: auto;">'+u+"</select>\n                                        </div>\n                                    </div>";break;case"boolean":l='<div class="slds-form-element tooltip-row slds-p-vertical_x-small" data-type="boolean">\n                                        <div class="slds-form-element__control">\n                                            <span class="slds-checkbox">\n                                                <input '+o+' type="checkbox" name="options" class="tooltipValue" id="'+i+'" />\n                                                <label class="slds-checkbox__label" for="'+i+'">\n                                                    <span class="slds-checkbox_faux"></span>\n                                                    <span class="slds-form-element__label">'+w(a.fieldLabel)+"</span>\n                                                </label>\n                                            </span>\n                                        </div>\n                                    </div>";break;case"date":l='<div class="slds-form-element tooltip-row slds-p-vertical_x-small" data-type="date">\n                                        <label class="slds-form-element__label" for="'+i+'">'+w(a.fieldLabel)+'</label>\n                                        <div class="slds-form-element__control">\n                                            <input '+o+' type="text" id="'+i+'" class="slds-input ma-datepicker tooltipValue" />\n                                        </div>\n                                    </div>';break;case"datetime":l='<div class="slds-form-element tooltip-row slds-p-vertical_x-small" data-type="datetime">\n                                        <label class="slds-form-element__label" for="'+i+'">'+w(a.fieldLabel)+'</label>\n                                        <div class="slds-form-element__control">\n                                            <input '+o+' type="text" id="'+i+'" class="slds-input ma-datepicker tooltipValue" />\n                                        </div>\n                                    </div>';break;case"reference":l='<div data-baseObject="'+a.baseObject+'" data-fieldName="'+a.updateField+'" class="slds-form-element tooltip-row slds-p-vertical_x-small" data-type="reference">\n                                        <label class="slds-form-element__label" for="'+i+'">'+w(a.fieldLabel)+'</label>\n                                        <div class="slds-form-element__control">\n                                            <input '+o+' type="text" id="'+i+'" class="slds-input js-search tooltipValue" />\n                                        </div>\n                                    </div>';break;default:a.isEditAble=!1,l='<div data-baseObject="'+a.baseObject+'" data-fieldName="'+a.updateField+'" class="slds-form-element tooltip-row slds-p-vertical_x-small" data-type="reference">\n                                        <label class="slds-form-element__label" for="'+i+'">'+w(a.fieldLabel)+'</label>\n                                        <div class="slds-form-element__control">\n                                            <input '+o+' disabled="disabled" type="text" id="'+i+'" class="slds-input js-search tooltipValue" />\n                                        </div>\n                                    </div>'}e.rawHTML+=l}t()})},setRecordValues:function(){var e=this;h("#editTooltipsModal .tooltipWrapper").find(".tooltip-row").each(function(t,s){var a=h(s),l=e.tooltips[t];a.removeAttr("data-initial");var i=l.fieldValue,o=l.rawValue,r=void 0===o?"":o;switch(i=window.htmlDecode(i),r=window.htmlDecode(r),a.attr("data-type")){case"number":case"string":case"textarea":a.find(".tooltipValue").val(r),a.attr("data-initial",i);break;case"picklist":a.find(".tooltipValue").val(r),a.attr("data-initial",r);break;case"multipicklist":r=r||"",a.attr("data-initial",r);var n=r.split(";");a.find(".tooltipValue").val(n);break;case"boolean":var c="true"===i;a.attr("data-initial",c),a.find(".tooltipValue").prop("checked",c);break;case"date":case"datetime":a.find(".tooltipValue").val(i),a.attr("data-initial",i);break;case"reference":var d=m(e.record,l.linkId,!1);a.attr("data-initial",d),a.find(".tooltipValue").attr({"data-value":d}).val(i)}})},createSaveData:function(){var e=this;this.isLoading||(this.fieldInfo=[],h("#editTooltipsModal .tooltipWrapper").find(".tooltip-row").each(function(t,s){var a=h(s),l=e.tooltips[t];if(l.isEditAble){var i=a.attr("data-type"),o=a.find(".tooltipValue").val(),r="",n=!1;switch(i){case"number":o=b.Util.parseNumberString(o,!0);break;case"string":case"textarea":case"picklist":break;case"multipicklist":Array.isArray(o)&&(o=o.join(";"));break;case"boolean":o=a.find(".tooltipValue").prop("checked"),o=String(o);break;case"date":if(""!==o){var c=window.formatUserLocaleDate({moment:!0}),d=e.$User.dateFormat||"M/DD/YYYY";d=d.toUpperCase(),o=_(o,c).format(d)}else n=!0;break;case"datetime":if(""!==o){var u=window.formatUserLocaleDate({moment:!0});o=_(o,u).format(u)}else n=!0;break;case"reference":o=a.find(".tooltipValue").attr("data-value")||"",r=a.find(".tooltipValue").val()}n||e.fieldInfo.push({fieldName:l.updateField,newFieldValue:o,dataType:i,lookupDisplayValue:r,actualFieldName:l.actualFieldName})}}),this.saveTooltips(this.fieldInfo).then(function(){e.updateRecord(e.fieldInfo)}).catch(function(t){e.showErrorMsg(t),e.isLoading=!1}))},updateRecord:function(e){for(var t=this,s=0;s<e.length;s++){var a=e[s];if("reference"===a.dataType)window.updateValue(this.record,a.fieldName,a.newFieldValue),window.updateValue(this.record,a.actualFieldName,a.lookupDisplayValue);else if("date"===a.dataType){var l=_.tz(a.newFieldValue,this.$User.dateFormat.toUpperCase(),this.$User.timezoneId).format("x");window.updateValue(this.record,a.fieldName,parseFloat(l))}else if("datetime"===a.dataType){var i=window.formatUserLocaleDate({moment:!0}),o=_.tz(a.newFieldValue,i,this.$User.timezoneId).format("x");window.updateValue(this.record,a.fieldName,parseFloat(o))}else window.updateValue(this.record,a.fieldName,a.newFieldValue)}this.close(),window.MAToastMessages.showSuccess({message:this.$Labels.MA_Success}),this.$nextTick(function(){t.$bus.$emit("update-tooltips")})},saveTooltips:function(e){var t=this;return new o.a(function(s,a){t.isLoading=!0;var i={action:"update_field",ajaxResource:"MATooltipAJAXResources",fieldUpdateInfo:l()(e),serializedRecordIds:l()([t.record.Id])};(new d.a).setAction(v.processAJAXRequest).setErrorHandler(function(e,t){var s=b.isUserLoggedIn(e,t,!1);s&&a(s),a(e)}).invoke([i],function(e){if(t.isLoading=!1,e.success){var l=e.results,i=(void 0===l?[]:l)[0];if(i.success)s(e);else{var o=i.errors,r=(void 0===o?[]:o)[0];a(r.message)}}else a(e.details)},{escape:!1,buffer:!1})})},showErrorMsg:function(e){window.MAToastMessages.showError({message:"Save Error",subMessage:String(e),timeOut:0,closeButton:!0})},attachEventListeners:function(){var e=this;h("#editTooltipsModal .tooltipWrapper").find(".tooltip-row").each(function(t,s){var a=h(s);switch(a.attr("data-type")){case"date":case"datetime":try{a.find(".ma-datepicker").datepicker("destroy")}catch(e){}a.find(".ma-datepicker").datepicker({dateFormat:window.formatUserLocaleDate({datepicker:!0}),monthNames:[e.$Labels.MA_January,e.$Labels.MA_February,e.$Labels.MA_March,e.$Labels.MA_April,e.$Labels.MA_May,e.$Labels.MA_June,e.$Labels.MA_July,e.$Labels.MA_August,e.$Labels.MA_September,e.$Labels.MA_October,e.$Labels.MA_November,e.$Labels.MA_December]});break;case"reference":a.find(".js-search").on("click",function(){e.fieldToSearch=e.tooltips[t],e.toggleSearch(!0),e.searchRow=a})}})},referenceSearch:function(e){var t=this;return new o.a(function(s,a){var l={action:"get_lookup_options",ajaxResource:"MATooltipAJAXResources",baseObject:t.fieldToSearch.baseObject,fieldName:t.fieldToSearch.updateField,term:e};(new d.a).setAction(v.processAJAXRequest).setErrorHandler(function(e,t){var s=b.isUserLoggedIn(e,t,!1);s&&a(s),console.warn(e),a(e)}).invoke([l],function(e){if(e.success){var t=e.lookupOptions;s(void 0===t?[]:t)}},{escape:!1,buffer:!1})})}}}},610:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("MAModal",{directives:[{name:"show",rawName:"v-show",value:!e.showSearch,expression:"!showSearch"}],staticClass:"slds-modal-fullscreen-phone",attrs:{doDetach:!0,isLoading:e.isLoading,title:e.$Labels.MA_Modify_Tooltips},on:{close:e.close}},[s("div",{attrs:{slot:"content",id:"editTooltipsModal"},slot:"content"},[s("div",{ref:"tooltipWrapper",staticClass:"tooltipWrapper",domProps:{innerHTML:e._s(e.rawHTML)}})]),e._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("button",{staticClass:"slds-button slds-button_neutral",on:{click:e.close}},[e._v("\n                "+e._s(e.$Labels.MA_Cancel)+"\n            ")]),e._v(" "),s("button",{staticClass:"slds-button slds-button_brand",on:{click:e.createSaveData}},[e._v("\n                "+e._s(e.$Labels.MA_Save)+"\n            ")])])]),e._v(" "),e.showSearch?s("MobileSearch",{attrs:{searchFunction:e.referenceSearch,searchKey:"value",searchLabel:"label"},on:{"close-search-modal":function(t){return e.toggleSearch(!1)},result:e.updateSearchValue}}):e._e()],1)},staticRenderFns:[]}}});