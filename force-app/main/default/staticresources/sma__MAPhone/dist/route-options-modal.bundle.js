webpackJsonp([41],{259:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={methods:{decodeHtml:function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}}}},270:function(e,t,s){var a=s(13)(s(273),s(274),function(e){s(271)},"data-v-63bf9b6e",null);e.exports=a.exports},271:function(e,t,s){var a=s(272);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);s(198)("1c032509",a,!0)},272:function(e,t,s){(e.exports=s(197)(void 0)).push([e.i,".disable-resize[data-v-63bf9b6e]{resize:none}@media screen and (max-width:1024px){.slds-input[data-v-63bf9b6e]{-moz-appearance:none;-webkit-appearance:none;appearance:none}}",""])},273:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(14),i=s.n(a),n=s(259),o=s.n(n);t.default={name:"MAInput",mixins:[o.a],props:{value:{type:String|Number,required:!0},isRequired:{type:Boolean,default:!1},useTextArea:{type:Boolean,default:!1},disableResize:{type:Boolean,default:!1},label:{type:String,default:""},errors:{type:Array,default:function(){return[]}},placeholder:{type:String,default:""},type:{type:String,default:"text"},isInvalid:{type:Boolean,default:!1},isDisabled:{type:Boolean,default:!1},hasFocus:{type:Boolean,default:!1},requiredLabel:{type:String,default:"Required"}},computed:{showLabel:function(){return this.label},hasErrors:function(){return this.errors&&this.errors.length},listeners:function(){var e=this;return i()({},this.$listeners,{input:function(t){return e.$emit("input",t.target.value)}})}},watch:{hasFocus:function(e){e&&this.focus()}},mounted:function(){this.hasFocus&&this.focus()},methods:{focus:function(){this.$refs.input.focus(),this.$refs.input.select()}}}},274:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"slds-form-element",class:{"slds-has-error":e.isInvalid}},[e.showLabel?s("label",{staticClass:"slds-form-element__label"},[e.isRequired?s("abbr",{staticClass:"slds-required",attrs:{title:e.requiredLabel}},[e._v("*")]):e._e(),e._v("\n        "+e._s(e.decodeHtml(e.label))+"\n        "),e._t("label")],2):e._e(),e._v(" "),s("div",{staticClass:"slds-form-element__control",staticStyle:{position:"relative"}},[e.useTextArea?s("textarea",e._g({staticClass:"slds-textarea",attrs:{disabled:e.isDisabled,placeholder:e.placeholder},domProps:{value:e.decodeHtml(e.value)}},e.listeners)):s("input",e._g({ref:"input",staticClass:"slds-input",attrs:{type:e.type,disabled:e.isDisabled,placeholder:e.placeholder},domProps:{value:e.decodeHtml(e.value)},on:{blur:function(t){return e.$emit("update:hasFocus",!1)}}},e.listeners)),e._v(" "),e._t("extendInput")],2),e._v(" "),e.isInvalid?s("div",{staticClass:"slds-form-element__help"},[e._t("errors")],2):e._e()])},staticRenderFns:[]}},483:function(e,t,s){var a=s(13)(s(486),s(487),function(e){s(484)},null,null);e.exports=a.exports},484:function(e,t,s){var a=s(485);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);s(198)("75f211d8",a,!0)},485:function(e,t,s){(e.exports=s(197)(void 0)).push([e.i,".mobile-date-input{background-color:inherit!important;cursor:pointer!important}.guide-warning-text{vertical-align:top;line-height:16px}",""])},486:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(14),i=s.n(a),n=s(260),o=s.n(n),r=s(66),l=s.n(r),d=s(217),u=s.n(d),c=s(270),p=s.n(c),m=s(59),_=s.n(m),h=s(294),f=(s.n(h),s(35)),v=(s.n(f),s(62)),b=s.n(v),g=s(63),M=s.n(g),x=window.moment;t.default={components:{MAModal:u.a,MobileSelect:o.a,MASpinner:_.a,MAInput:p.a,DateSelectionModal:function(){return i()({},b()(),{component:s.e(17).then(s.bind(null,283)),error:M.a})}},props:{isGuideRoute:{type:Boolean,default:!1}},data:function(){return{name:"",isLoading:!1,timeOptions:[],timeBasedOptions:{Enabled:!1,Start:"9:00 am",End:"5:00 pm"},isTimeBased:!1,start:"9:00 am",end:"5:00 pm",date:null,dateString:"",showDateModal:!1,driveProfile:"driving"}},validations:{name:{required:h.required}},computed:i()({},Object(f.mapGetters)("routes",{routes__route:"route",routes__record:"record",routes__driveProfiles:"driveProfiles",routes__travelMode:"travelMode"}),{record:function(){return this.routes__record},driveOptions:function(){var e=[{label:this.$Labels.MA_DRIVING,value:"driving"},{label:this.$Labels.MA_WALKING,value:"walking"},{label:this.$Labels.MA_BICYCLING,value:"bicycling"}];return[].concat(e,[])}}),created:function(){this.name=this.record.Name,this.timeBasedOptions=i()({},this.timeBasedOptions,this.routes__route.timeBasedOptions),this.isTimeBased=this.timeBasedOptions.Enabled||!1;var e=void 0,t=void 0;this.timeBasedOptions.Start&&(e=l.a.approximateStartTime(x(this.timeBasedOptions.Start,"hh:mm a"))),this.timeBasedOptions.End&&(t=l.a.approximateEndTime(x(this.timeBasedOptions.End,"hh:mm a"))),this.start=e||l.a.getRoutingDefaultStartTime(!0)||"9:00 am",this.end=t||l.a.getRoutingDefaultEndTime(!0)||"5:00 pm",this.driveProfile=this.routes__travelMode,this.parseDate(this.record.Date__c),this.buildTimeOptions(5)},methods:i()({},Object(f.mapMutations)("routes",{routes__updateRouteOptions:"updateRouteOptions",routes__updateRecord:"updateRecord",routes__updatePendingChanges:"updatePendingChanges",routes__updateDriveProfile:"updateDriveProfile"}),{close:function(){this.isLoading||this.$emit("close")},toggleTimeBased:function(){this.isGuideRoute&&(window.MAToastMessages.showWarning({message:"Time Based Locked.",subMessage:"Time Based Settings are locked for Guide Generated Routes.",closeButton:!0,timeOut:7e3,extendedTimeout:0}),this.isTimeBased=!0)},toggleDateModal:function(e){this.showDateModal=e},setDate:function(e){this.date.set({date:e.get("date"),month:e.get("month"),year:e.get("year")}),this.dateString=this.date.format(this.$User.dateFormat.toUpperCase())},buildTimeOptions:function(e){e=e||30;for(var t=window.moment().startOf("day"),s=t.day();t.day()===s;)this.timeOptions.push({id:t.format("h:mm a"),label:t.format("h:mm a")}),t.add(e,"m")},updateOptions:function(){var e={Name:this.name,Date__c:this.date.format("YYYY-MM-DD")},t={timeBasedOptions:{Start:this.start,End:this.end,Enabled:this.isTimeBased}};this.routes__updateRecord(e),this.routes__updateRouteOptions(t),this.routes__updatePendingChanges(!0),this.routes__updateDriveProfile(this.driveProfile),this.$emit("close")},parseDate:function(e){var t=x.utc(e,"YYYY-MM-DD");this.date=t,this.dateString=t.format(this.$User.dateFormat.toUpperCase())}})}},487:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("MAModal",{directives:[{name:"show",rawName:"v-show",value:!e.showDateModal,expression:"!showDateModal"}],staticClass:"slds-modal-fullscreen-phone",attrs:{doDetach:!0,title:e.$Labels.MASettings_Update+" "+e.$Labels.MA_Current_Route+" "+e.$Labels.MA_Info,closeLabel:e.$Labels.MA_Close},on:{close:e.close}},[s("div",{attrs:{slot:"content"},slot:"content"},[s("MASpinner",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}]}),e._v(" "),s("MAInput",{attrs:{isRequired:!0,label:e.$Labels.MA_Name,requiredLabel:e.$Labels.MA_Required},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),s("div",{staticClass:"slds-form-element",on:{click:function(t){return e.toggleDateModal(!0)}}},[s("label",{staticClass:"slds-form-element__label",attrs:{for:"text-input-id-1"}},[s("abbr",{staticClass:"slds-required"},[e._v("*")]),e._v("\n                    "+e._s(e._f("decode")(e.$Labels.MA_Date))+"\n                ")]),e._v(" "),s("div",{staticClass:"slds-form-element__control slds-input-has-icon slds-input-has-icon_right"},[s("span",{staticClass:"slds-icon slds-input__icon slds-input__icon_right ma-icon ma-icon-event slds-icon-text-light"}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.dateString,expression:"dateString"}],staticClass:"slds-input mobile-date-input",attrs:{id:"text-input-id-1",type:"text",disabled:""},domProps:{value:e.dateString},on:{input:function(t){t.target.composing||(e.dateString=t.target.value)}}})])]),e._v(" "),s("MobileSelect",{attrs:{options:e.driveOptions,disabled:e.isGuideRoute,doDetach:!0,isRequired:!0,hasNoneOption:!1,label:e.$Labels.MARoutes_Directions_Defaults,keyString:"value",valueString:"label"},model:{value:e.driveProfile,callback:function(t){e.driveProfile=t},expression:"driveProfile"}}),e._v(" "),e.isGuideRoute?s("div",{staticClass:"slds-m-left_x-small slds-form-element__help slds-grid slds-grid_vertical-align-end",staticStyle:{color:"#844800"}},[s("span",{staticClass:"slds-icon_container ma-icon ma-icon-warning slds-m-right_xx-small"}),e._v(" "),s("span",{staticClass:"guide-warning-text"},[e._v(e._s(e.$Labels.MA_Guide_Profiles_Warning))])]):e._e(),e._v(" "),s("div",{staticClass:"ma-form-control-wrap"},[s("label",{staticClass:"ma-checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.isTimeBased,expression:"isTimeBased"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.isTimeBased)?e._i(e.isTimeBased,null)>-1:e.isTimeBased},on:{change:[function(t){var s=e.isTimeBased,a=t.target,i=!!a.checked;if(Array.isArray(s)){var n=e._i(s,null);a.checked?n<0&&(e.isTimeBased=s.concat([null])):n>-1&&(e.isTimeBased=s.slice(0,n).concat(s.slice(n+1)))}else e.isTimeBased=i},e.toggleTimeBased]}}),e._v(" "),s("span",{staticClass:"ma-checkbox-faux"}),e._v(" "),s("span",{staticClass:"ma-checkbox-label"},[e._v(e._s(e._f("decode")(e.$Labels.MA_Time_Based_Route)))])])]),e._v(" "),e.isTimeBased?s("div",[s("MobileSelect",{attrs:{options:e.timeOptions,doDetach:!0,hasNoneOption:!1,isRequired:!0,label:e.$Labels.MA_Start+" "+e.$Labels.MA_Time,keyString:"id",valueString:"label"},model:{value:e.start,callback:function(t){e.start=t},expression:"start"}}),e._v(" "),s("MobileSelect",{attrs:{options:e.timeOptions,doDetach:!0,hasNoneOption:!1,isRequired:!0,label:e.$Labels.MA_End+" "+e.$Labels.MA_Time,keyString:"id",valueString:"label"},model:{value:e.end,callback:function(t){e.end=t},expression:"end"}})],1):e._e()],1),e._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("div",{staticClass:"float-right"},[s("button",{staticClass:"slds-button slds-button_neutral",on:{click:e.close}},[e._v("\n                    "+e._s(e._f("decode")(e.$Labels.MA_Cancel))+"\n                ")]),e._v(" "),s("button",{staticClass:"slds-button slds-button_brand",on:{click:e.updateOptions}},[e._v("\n                    "+e._s(e._f("decode")(e.$Labels.MA_Done))+"\n                ")])])])]),e._v(" "),e.showDateModal?s("DateSelectionModal",{attrs:{date:e.date},on:{close:function(t){return e.toggleDateModal(!1)},update:e.setDate}}):e._e()],1)},staticRenderFns:[]}}});