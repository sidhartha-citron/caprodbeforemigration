webpackJsonp([33],{218:function(t,e,i){var n=i(13)(i(225),i(226),function(t){i(223)},"data-v-4c583d7f",null);t.exports=n.exports},222:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=new(function(t){return t&&t.__esModule?t:{default:t}}(i(94)).default);function a(t,e,i){var a=function n(a){i.context._isDestroyed?document.removeEventListener("click",n):t.contains(a.target)||t===a.target||e(a)};n.set(t,a),setTimeout(function(){return document.addEventListener("click",a)},0)}function s(t){var e=n.get(t);document.removeEventListener("click",e),n.delete(t)}e.default={bind:function(t,e,i){var n=e.arg,s=n.active,o=n.handler;if("function"!=typeof o)throw new Error("v-click-outside: missing required handler argument.");!0===s&&a(t,o,i)},update:function(t,e,i){var o=e.arg,c=o.active,d=o.handler;c&&!n.has(t)?a(t,d,i):!c&&n.has(t)&&s(t)},unbind:function(t){s(t)}}},223:function(t,e,i){var n=i(224);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(198)("49b356e9",n,!0)},224:function(t,e,i){(t.exports=i(197)(void 0)).push([t.i,".action-sheet_wrap[data-v-4c583d7f]{background-color:#fff;overflow:hidden!important;position:relative;z-index:110}.action-sheet_content[data-v-4c583d7f]{overflow-y:auto}.slds-scope .slds-button.slds-button_neutral.action-sheet_close-button[data-v-4c583d7f]{border-radius:0;box-shadow:0 -2px 4px #f9f9fa;padding:1rem 0;text-align:center!important;background:none;border:0;border-top:1px solid #dddbda;line-height:inherit;width:100%;vertical-align:top}.action-sheet_item[data-v-4c583d7f]{min-width:150px;border-bottom:1px solid #dddbda}.action-sheet_item[data-v-4c583d7f]:last-child{border-bottom:0}.action-sheet_selected-icon[data-v-4c583d7f]{display:none}.slds-is-selected .action-sheet_selected-icon[data-v-4c583d7f]{display:block}.action-sheet_mask[data-v-4c583d7f]{background-color:rgba(8,7,7,.6);height:100%;left:0;position:fixed;top:0;z-index:100;width:100%}.ma-action-sheet-item.header[data-v-4c583d7f]{background-color:#3083d3;color:#fff}.ma-top-bar-row .slds-button[data-v-4c583d7f]{color:#fff;font-size:20px}@media screen and (max-width:769px){.ma-action-sheet-wrap .footer[data-v-4c583d7f]{padding:25px!important}.ma-action-sheet-item[data-v-4c583d7f]{padding:16px 16px 16px 40px!important}}.ma-action-sheet-wrap[data-v-4c583d7f]{position:fixed;width:100%;height:100%;left:0;top:0;visibility:hidden;z-index:6000}.ma-action-sheet-wrap .ma-action-sheet[data-v-4c583d7f]{position:absolute;left:0;margin:0;bottom:0;width:100%;transform:translateY(100%);background-color:#fff;z-index:200;box-shadow:0 2px 3px 0 rgba(0,0,0,.16);padding-top:16px;border-radius:0}@media screen and (max-width:768px){.ma-action-sheet-wrap .ma-action-sheet .maActionSheetClose[data-v-4c583d7f]{text-align:center;width:100%;display:block;padding:16px;font-size:16px;line-height:1.5;color:#1589ee}}.ma-action-sheet-wrap .ma-action-sheet .ma-action-sheet-item[data-v-4c583d7f]{padding:16px;color:#0070d2;font-size:16px;line-height:1;text-align:center}.ma-action-sheet-wrap .ma-action-sheet .ma-action-sheet-close[data-v-4c583d7f]{padding:20px 16px;border-top:2px solid #dddbda;color:#0070d2;font-size:16px;line-height:1;text-align:center}.ma-action-sheet-wrap .ma-action-sheet .ma-action-sheet-close .ma-icon[data-v-4c583d7f]{height:16px;display:inline-block;margin-right:4px;transform:translateY(2px)}.ma-action-sheet-wrap#longPressActionSheet[data-v-4c583d7f]{height:100%;width:100%}.ma-action-sheet-wrap#longPressActionSheet .ma-action-sheet[data-v-4c583d7f]{padding-top:0;width:100%;bottom:0}.ma-action-sheet-wrap#longPressActionSheet .ma-action-sheet .ma-action-sheet-item[data-v-4c583d7f]{text-align:left;color:#3e3e3c;display:flex;align-items:center;border-bottom:1px solid #dddbda}@media screen and (min-width:769px){.ma-action-sheet-wrap#longPressActionSheet .ma-action-sheet .ma-action-sheet-item[data-v-4c583d7f]{justify-content:center}}.ma-action-sheet-wrap#longPressActionSheet .ma-action-sheet .ma-action-sheet-item .ma-icon[data-v-4c583d7f]{color:#fff;background-color:#1589ee;border-radius:100%;height:34px;width:34px;display:flex;justify-content:center;align-items:center;margin-right:8px;font-size:22px}.ma-action-sheet-wrap.in[data-v-4c583d7f]{visibility:visible}.ma-action-sheet-wrap.in .action-sheet-mask[data-v-4c583d7f]{opacity:1}.ma-action-sheet-wrap.in .ma-action-sheet[data-v-4c583d7f]{transform:translate(0)}@media screen and (min-width:769px){.ma-action-sheet-wrap[data-v-4c583d7f]{position:absolute;width:auto;height:auto;background-color:transparent}.ma-action-sheet-wrap .ma-action-sheet[data-v-4c583d7f]{width:auto;left:auto;bottom:auto;border-radius:4px;transform:translate(0);opacity:0;text-align:left;min-width:250px;border:1px solid #dddbda}.ma-action-sheet-wrap .ma-action-sheet .ma-action-sheet-item[data-v-4c583d7f]{text-align:left}.ma-action-sheet-wrap .ma-action-sheet .ma-action-sheet-close[data-v-4c583d7f]{display:none}.ma-action-sheet-wrap.in .ma-action-sheet[data-v-4c583d7f]{opacity:1;transform:translate(0)}}",""])},225:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(222),a=i.n(n),s=window.$;e.default={name:"ActionSheet",directives:{"click-outside":a.a},props:{options:{type:Array,required:!0},doDetach:{type:Boolean,default:!0},labelKey:{type:String,default:"label"},buttonText:{type:String,default:""},buttonIcon:{type:String,default:""},hideOverride:{type:Boolean,default:!1},selectedItems:{type:Array,default:function(){return[]}},buttonType:{type:String,default:""}},data:function(){return{container:null,showOptions:!1,styleObject:{},window:{height:0,width:0},uid:"action-sheet"}},computed:{isPhone:function(){return this.window.width<769},computedIcon:function(){var t="";return""!==this.buttonIcon?t=this.buttonIcon:""===this.buttonText&&(t="ma-icon-threedots-vertical"),t},actionSheetClickOutsideOptions:function(){return{active:this.showOptions,handler:this.hideActionSheet}}},watch:{isPhone:function(){this.showOptions=!1}},created:function(){window.addEventListener("resize",this.handleResize),this.handleResize()},destroyed:function(){window.removeEventListener("resize",this.handleResize),this.hideActionSheet()},methods:{handleResize:function(){this.window.width=window.innerWidth,this.window.height=window.innerHeight},returnItem:function(t){t.isHeader||(this.$emit("select",t),this.hideActionSheet())},hideActionSheet:function(){this.showOptions=!1,this.container&&(this.container.remove(),this.container=null)},detach:function(){if(this.$refs.button){var t=document.querySelector(".slds-scope."+this.uid);try{t.remove()}catch(t){}var e=this.$refs.button.getBoundingClientRect();this.container=document.createElement("div"),this.container.className="slds-scope "+this.uid,this.container.appendChild(this.$refs.actions),document.body.appendChild(this.container),this.styleObject={top:e.top+this.$refs.button.clientHeight+s(window).scrollTop()+"px",left:e.left+s(window).scrollLeft()+"px","max-height":"300px"}}},adjustForClipping:function(){var t=this.$refs.actions.getBoundingClientRect(),e=void 0;if(e=document.documentElement.clientHeight-window.innerHeight<=0?document.documentElement.clientHeight:window.innerHeight-this.getScrollbarWidth(),t.x<0)this.styleObject.left=this.$refs.actions.offsetLeft+Math.abs(t.x)+"px";else if(t.left+t.width>document.documentElement.clientWidth){var i=t.left+t.width-document.documentElement.clientWidth-s(window).scrollLeft();this.styleObject.left=t.left-i+"px"}var n=this.$refs.actions.scrollHeight,a=s(window).scrollTop();if(this.styleObject["max-height"]="300px",t.top+n>e){var o=t.top+n-a-e;this.$bus.$emit("ma-modal-scroll-by",o),this.styleObject.top=t.top-o+"px"}},disableClick:function(t){t.stopPropagation(),t.preventDefault()},openActionSheet:function(){var t=this;this.showOptions=!0,this.doDetach&&this.detach(),this.$nextTick(function(){t.doDetach&&t.adjustForClipping(),t.options.forEach(function(e,i){var n=e,a=t.$refs.optionItem[i];n.isHeader&&a.addEventListener("click",t.disableClick,!0)})})}}}},226:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"click-outside",rawName:"v-click-outside:[actionSheetClickOutsideOptions]",arg:t.actionSheetClickOutsideOptions}],staticClass:"action-sheet-wrapper slds-scope"},[i("div",{ref:"button",staticClass:"slds-grid slds-grid_vertical-align-center",on:{click:t.openActionSheet}},[i("div",{staticClass:"slds-button slds-col slds-truncate"},[t._v(t._s(t._f("decode")(t.buttonText)))]),t._v(" "),""!==t.computedIcon?i("div",[i("button",{staticClass:"slds-button slds-button_icon slds-button_icon-container",class:[t.buttonType]},[i("span",{staticClass:"slds-button__icon ma-icon",class:[t.computedIcon]})])]):t._e()]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showOptions,expression:"showOptions"}],ref:"actions",staticClass:"ma-action-sheet-wrap in slds-grid slds-grid_vertical slds-grid_align-end",style:t.isPhone?{}:t.styleObject},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isPhone,expression:"isPhone"}],staticClass:"action-sheet_mask",on:{click:t.hideActionSheet}}),t._v(" "),i("div",{staticClass:"action-sheet_wrap slds-grid slds-grid_vertical"},[i("div",{staticClass:"action-sheet_content slds-scrollable"},t._l(t.options,function(e,n){return i("div",{key:n,ref:"optionItem",refInFor:!0,staticClass:"action-sheet_item slds-grid slds-p-around_medium",class:{"header slds-text-title_caps slds-section__title slds-theme--shade":e.isHeader,"slds-is-selected":t.selectedItems.includes(e.id)},on:{click:function(i){return t.returnItem(e)}}},[t._m(0,!0),t._v(" "),i("div",{staticClass:"slds-col"},[i("span",{staticStyle:{"word-break":"break-word"}},[t._v(t._s(t._f("decode")(e[t.labelKey])))])])])}),0),t._v(" "),i("div",{staticClass:"slds-button slds-button_neutral action-sheet_close-button",on:{click:t.hideActionSheet}},[t._v("\n                "+t._s(t._f("decode")(t.$Labels.MA_Close))+"\n            ")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"action-sheet_selected-icon slds-p-right_medium"},[e("span",{staticClass:"slds-icon slds-icon_x-small ma-icon ma-icon-check"})])}]}},276:function(t,e,i){t.exports={default:i(277),__esModule:!0}},277:function(t,e,i){i(278),t.exports=i(0).Number.isNaN},278:function(t,e,i){var n=i(2);n(n.S,"Number",{isNaN:function(t){return t!=t}})},803:function(t,e,i){var n=i(13)(i(806),i(807),function(t){i(804)},"data-v-23141602",null);t.exports=n.exports},804:function(t,e,i){var n=i(805);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(198)("46c8f30a",n,!0)},805:function(t,e,i){(t.exports=i(197)(void 0)).push([t.i,"#clusterTopBar[data-v-23141602]{background:#f3f2f2}.cluster_subtext[data-v-23141602]{color:#3e3e3c;font-size:14px}",""])},806:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(276),a=i.n(n),s=i(218),o=i.n(s),c=window,d=c.MA,r=c.$,l=c.google,h=c.getProperty;e.default={components:{ActionSheet:o.a},props:{clickOptions:{type:Object,default:function(){}},totalRecordCount:{type:String|Number,default:"0"}},data:function(){return{measurements:{area:0,perimeter:0},shapeInfoNotFound:!1,shapeInfoLoaded:!1,isShapeClick:!1,window:{height:0,width:0},customShapeActions:[{label:this.$Labels.MA_Save_As_Shape_Layer,value:"saveShape"}]}},computed:{isPhone:function(){return this.window.width<769},headerValue:function(){var t="Info";return this.isShapeClick?void 0===(t=window.getProperty(this.clickOptions,"shape.label",!1))&&(t=window.getProperty(this.clickOptions,"feature.label",!1)||"Shape Info"):t="Cluster Info",t},isCustomShape:function(){return this.clickOptions.custom||!1}},created:function(){var t=this;"shape"===this.clickOptions.type&&(this.isShapeClick=!0,this.$nextTick(function(){var e=t.clickOptions.shape||t.clickOptions.feature||{};t.getShapeMeasurements(e)})),window.addEventListener("resize",this.handleResize),this.handleResize()},destroyed:function(){window.removeEventListener("resize",this.handleResize)},methods:{hideCluster:function(){this.$emit("hide-cluster")},handleResize:function(){this.window.width=window.innerWidth,this.window.height=window.innerHeight},getShapeMeasurements:function(t){var e=this,i=t.qid,n=t.shapeType,s=void 0===n?"":n;if("travelTime"!==s&&"travelDistance"!==s){var o=t instanceof l.maps.Circle?Number(t.getCenter()):null,c=t instanceof l.maps.Circle?Number(t.getRadius()):null,p=t instanceof l.maps.Rectangle?t.getBounds():null,u=t instanceof l.maps.Polygon?t.getPath():null,f=r('#PlottedQueriesTable [qid="'+i+'"]').data()||{},m=h(f,"id",!1),v=void 0;if(m)v={territoryId:m};else if(o&&!a()(c))v={type:"circle",radius:c,lat:o.lat(),lng:o.lng()};else if(p)v={type:"rectangle",NE:p.getNorthEast(),SW:p.getSouthWest()};else if(u){var g=[];u.getArray().forEach(function(t){g.push({lat:t.lat(),lng:t.lng()})}),v={type:"polygon",points:g}}v?d.getShapeGeometry(v).then(function(i){e.shapeInfoLoaded=!0;var n=i.custom,a="",s="";if(void 0!==n&&n){var o=h(i,"geometries.custom");a=o.area,s=o.perimeter}else{var c=h(t,"maData.id",!1);if("Merged Shape"===c){var r=i.total;a=r.area,s=r.perimeter}else{var l=h(i,"geometries",!1)[c];l?(a=l.area,s=l.perimeter):e.shapeInfoNotFound=!0}}e.measurements={area:d.Util.formatNumberString(a),perimeter:d.Util.formatNumberString(s)}}).fail(function(){e.shapeInfoLoaded=!0,e.shapeInfoNotFound=!0}):(this.shapeInfoLoaded=!0,this.shapeInfoNotFound=!0)}},handleSelectOption:function(t){"saveShape"===t.value&&window.launchSaveShapeUI(this.clickOptions)}}}},807:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ma-top-bar tooltip-top-bar"},[i("div",{staticClass:"slds-grid",class:[t.isPhone?"phone-only":"tablet-only"],attrs:{id:"clusterTopBar"}},[i("div",{staticClass:"slds-p-left_x-small slds-p-vertical_small"},[i("button",{staticClass:"slds-button slds-button_icon slds-button_icon-container hide-tooltip",on:{click:t.hideCluster}},[i("span",{staticClass:"slds-button__icon ma-icon ma-icon-back"})])]),t._v(" "),i("div",{staticClass:"slds-p-around_medium"},[i("div",{staticClass:"slds-text-heading_medium slds-truncate"},[t._v(t._s(t._f("decode")(t.headerValue)))]),t._v(" "),i("div",{staticClass:"cluster_subtext"},[t._v(t._s(t._f("decode")(t.totalRecordCount))+" record(s)")]),t._v(" "),t.isShapeClick&&t.shapeInfoLoaded&&!t.shapeInfoNotFound?i("div",{staticClass:"cluster_subtext shape-geometry slds-m-top_small"},[i("div",[t._v("Area: "+t._s(t._f("decode")(t.measurements.area))+" m"),i("sup",[t._v("2")])]),t._v(" "),i("div",[t._v("Perimeter: "+t._s(t._f("decode")(t.measurements.perimeter))+" m")])]):t._e()]),t._v(" "),t.isCustomShape?i("div",{staticClass:"slds-p-right_x-small slds-p-vertical_small slds-col_bump-left"},[i("ActionSheet",{attrs:{doDetach:!0,options:t.customShapeActions},on:{select:t.handleSelectOption}})],1):t._e()])])},staticRenderFns:[]}}});