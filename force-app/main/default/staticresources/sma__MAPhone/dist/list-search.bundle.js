webpackJsonp([31],{217:function(e,t,a){var s=a(13)(a(229),a(230),function(e){a(227)},"data-v-2c92a8a8",null);e.exports=s.exports},227:function(e,t,a){var s=a(228);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a(198)("5bf9c067",s,!0)},228:function(e,t,a){(e.exports=a(197)(void 0)).push([e.i,".slds-modal__content[data-v-2c92a8a8]{min-height:0}.slds-modal__content[data-v-2c92a8a8]:last-child{border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem;box-shadow:0 2px 3px 0 rgba(0,0,0,.16)}[data-v-2c92a8a8].slds-notify{min-width:auto;width:100%}.slds-modal_small .slds-modal__container[data-v-2c92a8a8]{width:20rem}.ma-footer-bodyless[data-v-2c92a8a8]{border-top:none}.slds-modal__container .slds-modal__header .ma-icon-close[data-v-2c92a8a8]{font-size:22px}",""])},229:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(59),l=a.n(s);t.default={name:"MAModal",components:{MASpinner:l.a},props:{title:{type:String,required:!0},doDetach:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},isLarge:{type:Boolean,default:!1},closeLabel:{type:String,default:"Close"},isSmall:{type:Boolean,default:!1},hideCloseButton:{type:Boolean,default:!1},isBodyless:{type:Boolean,default:!1}},data:function(){return{supressScrollEmitter:!1,container:null}},mounted:function(){var e=this;this.doDetach&&this.detach(),this.$emit("mounted"),setTimeout(function(){e.$refs.backdrop.classList.add("slds-backdrop_open")},1),setTimeout(function(){e.$refs.section.classList.add("slds-fade-in-open")},250)},beforeDestroy:function(){this.container&&(this.container.remove(),this.container=null)},methods:{detach:function(){this.container=document.createElement("div"),this.container.className="slds-scope "+this.$el.className,this.container.appendChild(this.$el),document.body.appendChild(this.container)},modalClass:function(){return{"slds-modal_small":this.isSmall,"slds-modal_large":this.isLarge}}}}},230:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("section",{ref:"section",staticClass:"slds-modal",class:e.modalClass(),attrs:{role:"dialog",tabindex:"-1"}},[a("div",{staticClass:"slds-modal__container"},[a("header",{staticClass:"slds-modal__header"},[e.hideCloseButton?e._e():a("button",{staticClass:"slds-button slds-button_icon slds-modal__close slds-button_icon-inverse",attrs:{title:e.closeLabel},on:{click:function(t){return e.$emit("close")}}},[a("span",{staticClass:"slds-button__icon slds-button__icon_large ma-icon ma-icon-close"}),e._v(" "),a("span",{staticClass:"slds-assistive-text"},[e._v(e._s(e.closeLabel))])]),e._v(" "),a("h2",{staticClass:"slds-text-heading_medium slds-hyphenate",attrs:{id:"modal-heading-01"}},[e._v(e._s(e.title))])]),e._v(" "),e.isBodyless?e._e():a("div",{ref:"content",staticClass:"slds-modal__content slds-p-around_medium slds-is-relative"},[e.isLoading?a("MASpinner"):e._e(),e._v(" "),e._t("content",[e._v("default content")])],2),e._v(" "),e.isLoading?e._e():a("footer",{staticClass:"slds-modal__footer",class:{"ma-footer-bodyless":e.isBodyless}},[e._t("footer",[e._v("default footer")])],2)])]),e._v(" "),a("div",{ref:"backdrop",staticClass:"slds-backdrop"})])},staticRenderFns:[]}},260:function(e,t,a){var s=a(13)(a(264),a(265),function(e){a(262)},null,null);e.exports=s.exports},262:function(e,t,a){var s=a(263);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a(198)("324f9978",s,!0)},263:function(e,t,a){(e.exports=a(197)(void 0)).push([e.i,".slds-select{-moz-appearance:none;-webkit-appearance:none;appearance:none;padding-right:30px}.slds-select,.slds-select option{padding-left:12px}.select-icon{color:#706e6b;font-size:12px;line-height:1;position:absolute;top:11px;right:12px}",""])},264:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(219),l=a.n(s);t.default={name:"MASelect",props:{label:{type:String,default:""},options:{type:Object|Array,required:!0},keyString:{type:String,default:"key"},valueString:{type:String,default:"value"},hasNoneOption:{type:Boolean,default:!0},value:{type:String|Number,default:""},default:{type:String|Number,default:""},isRequired:{type:Boolean,default:!1},isInvalid:{type:Boolean,default:!1},placeholder:{type:String,default:""},isMultiSelect:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data:function(){return{defaultValue:this.default}},computed:{showLabel:function(){return this.label}},watch:{value:function(){var e={};e[this.keyString]=this.value,e[this.valueString]=this.getSelectedValue(),this.$emit("change",e)}},methods:{decodeHtml:function(e){if(!e)return e;var t=window.document.createElement("textarea");return t.innerHTML=e,t.value},getKey:function(e){return"string"==typeof e||"number"==typeof e?e:e[this.keyString]},getValue:function(e){return"string"==typeof e||"number"==typeof e?e:e[this.valueString]},isSelected:function(e){var t=!1;return t=Array.isArray(this.value)?-1!==this.value.indexOf(this.getKey(e)):this.getKey(e)===this.value,t},change:function(e){e||(e=null);for(var t=[],a=0;a<e.length;a++){var s=e[a];t.push(s.value)}if(1===t.length){var i=t;t=l()(i,1)[0]}this.$emit("input",t)},getSelectedValue:function(){var e=this;if(!this.options||!this.options.length)return"";var t=this.options.find(function(t){return e.getKey(t)===e.value});return t?this.decodeHtml(this.getValue(t)):null},remove:function(){this.$emit("input",""),this.doHide()}}}},265:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"slds-form-element",class:{"slds-has-error":e.isInvalid}},[e.showLabel?a("label",{staticClass:"slds-form-element__label"},[e.isRequired?a("abbr",{staticClass:"slds-required",attrs:{title:"required"}},[e._v("*")]):e._e(),e._v("\n        "+e._s(e.decodeHtml(e.label))+"\n    ")]):e._e(),e._v(" "),a("div",{staticClass:"slds-is-relative"},[a("select",e._b({staticClass:"slds-select",staticStyle:{overflow:"auto"},attrs:{placeholder:e.placeholder,disabled:e.disabled},on:{change:function(t){return e.change(t.target.selectedOptions)}}},"select",{multiple:e.isMultiSelect},!1),[e.hasNoneOption?a("option",{attrs:{value:""}},[e._v("-- None --")]):e._e(),e._v(" "),e._l(e.options,function(t,s){return a("option",{key:s,domProps:{value:e.getKey(t),selected:e.isSelected(t)}},[e._v(e._s(e.getValue(t)))])})],2),e._v(" "),e._m(0)]),e._v(" "),e.isInvalid?a("div",{staticClass:"slds-form-element__help"},[e._t("errors",[e._v("This field is required.")])],2):e._e()])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"select-icon"},[t("span",{staticClass:"ma-icon ma-icon-down"})])}]}},776:function(e,t,a){var s=a(13)(a(781),a(782),function(e){a(777),a(779)},"data-v-77e5e3c2",null);e.exports=s.exports},777:function(e,t,a){var s=a(778);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a(198)("80a00cc2",s,!0)},778:function(e,t,a){(e.exports=a(197)(void 0)).push([e.i,".listview-search .slds-modal__content{-webkit-overflow-scrolling:touch!important;overflow:auto!important}",""])},779:function(e,t,a){var s=a(780);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a(198)("40eb67bb",s,!0)},780:function(e,t,a){(e.exports=a(197)(void 0)).push([e.i,".ma-list__phone .filter-row[data-v-77e5e3c2]{padding:10px;background:#fff;border:1px solid #dddbda;border-radius:.25rem;background-clip:padding-box;box-shadow:0 2px 0 0 rgba(0,0,0,.1);margin-bottom:10px}",""])},781:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(61),l=a.n(s),i=a(67),o=a.n(i),r=a(219),n=a.n(r),d=a(217),c=a.n(d),u=a(59),p=a.n(u),f=a(260),h=a.n(f),v=a(29),m=(a.n(v),window),_=m.$,b=m.getProperty,g=m.moment;t.default={components:{MAModal:c.a,MASpinner:p.a,MobileSelect:h.a,DateSelectionModal:function(){return a.e(17).then(a.bind(null,283))}},props:{selectedQuery:{type:String,required:!0},currentFilters:{type:Array,required:!0}},data:function(){return{isLoading:!1,showDateModal:!1,date:g().tz(this.$User.timezoneId),dateRow:null,filterOptions:{boolean:[{label:this.$Labels.MA_Equals,value:"equals"}],picklist:[{label:this.$Labels.MA_Equals,value:"equals"},{label:this.$Labels.MA_Not_Equal,value:"notEqualTo"}],multipicklist:[{label:this.$Labels.MA_Contains,value:"contains"},{label:this.$Labels.MA_Does_Not_Contain,value:"doesNotContain"}],string:[{label:this.$Labels.MA_Equals,value:"equals"},{label:this.$Labels.MA_Not_Equal,value:"notEqualTo"},{label:this.$Labels.MA_Starts_With,value:"startsWith"},{label:this.$Labels.MA_Contains,value:"contains"},{label:this.$Labels.MA_Does_Not_Contain,value:"doesNotContain"}],double:[{label:this.$Labels.MA_Equals,value:"equals"},{label:this.$Labels.MA_Not_Equal,value:"notEqualTo"},{label:this.$Labels.MA_Less_Than,value:"lessThan"},{label:this.$Labels.MA_Less_Than_Equal,value:"lessThanEqualTo"},{label:this.$Labels.MA_Greater_Than,value:"greaterThan"},{label:this.$Labels.MA_Greater_Than_Equal,value:"greaterThanEqualTo"}]},filterRows:[],window:{height:0,width:0}}},computed:{isPhone:function(){return this.window.width<769},plottedLayer:function(){return _('#PlottedQueriesTable .PlottedRowUnit[qid="'+this.selectedQuery+'"]')}},created:function(){this.build(),window.addEventListener("resize",this.handleResize),this.handleResize()},destroyed:function(){window.removeEventListener("resize",this.handleResize)},methods:{close:function(){this.$emit("close")},handleResize:function(){this.window.width=window.innerWidth,this.window.height=window.innerHeight},doShowDateModal:function(e){this.showDateModal=!0,this.dateRow=e},setDate:function(e){this.dateRow.filterValue=e.format(this.$User.dateFormat.toUpperCase())},build:function(){var e=this,t=this.getTooltips(),a=this.currentFilters||[];t.forEach(function(t){var s=t.soapType,l=b(t,"describe.picklistValues",!1)||[],i=t.DisplayType,o=t.ActualFieldName.startsWith("sma__")?t.ActualFieldName.replace("sma__",""):t.ActualFieldName,r=a.find(function(e){return e.tooltip===o});"BOOLEAN"===i&&(l=[{label:"False",value:"false"},{label:"True",value:"true"}]);var d=l,c=n()(d,1)[0],u=void 0===c?{}:c,p={label:t.FieldLabel,filterOptions:e.getFilterOptions(s),templateType:e.getTemplateType(i),filterOperator:void 0,filterValue:u.value||"",soapType:s,displayType:i,picklistOptions:l,sfdcField:t.ActualFieldName};if(r){var f=r.value;"DATE"!==s&&"DATETIME"!==s||(f=g(+r.value).format(e.$User.dateFormat.toUpperCase())),"MULTIPICKLIST"===i&&(f=r.value.split(";")),p.filterValue=f,p.filterOperator=r.operator}e.filterRows.push(p)})},getTooltips:function(){var e=(this.plottedLayer.data()||{}).tooltips,t=void 0===e?[]:e,a=[].concat(o()(t));return a.splice(1,0,{DisplayType:"STRING",FieldName:"FormattedAddress_MA",FieldLabel:"Address",ActualFieldName:"FormattedAddress_MA",describe:{type:"string",label:"Address",name:"Address",soapType:"xsd:string"},soapType:"STRING",needsLink:!1}),a},getFilterOptions:function(e){var t=[];switch(e){case"DATETIME":case"DATE":case"DOUBLE":case"DECIMAL":case"INTEGER":t=this.filterOptions.double;break;case"BOOLEAN":t=this.filterOptions.boolean;break;case"PICKLIST":t=this.filterOptions.picklist;break;case"MULTIPICKLIST":t=this.filterOptions.multipicklist;break;default:t=this.filterOptions.string}return t},getTemplateType:function(e){var t="STRING";switch(e){case"BOOLEAN":case"PICKLIST":t="select";break;case"MULTIPICKLIST":t="multiselect";break;case"DATETIME":case"DATE":t="date";break;default:t="input"}return t},filter:function(){var e=this,t=[];e.filterRows.forEach(function(a){if(a.filterOperator){var s=a.sfdcField;s.startsWith("sma__")&&(s=s.replace("sma__","")),t.push({operator:a.filterOperator,value:e.normalizeFilterValue(a),tooltip:s,isMultiSelect:"MULTIPICKLIST"===a.displayType,filterType:a.soapType})}});var a=(e.plottedLayer.data()||{}).records,s=void 0===a?{}:a,i=0,o=l()(s)||[],r=o.length,n=[];setTimeout(function a(){if(i<r){for(var l=0;l<100&&i<r;){l++;for(var d=o[i],c=s[d],u=0===t.length,p=0,f=t.length;p<f;p++){var h=t[p],v=b(c,h.tooltip,!1);if(h.isMultiSelect&&void 0===v&&(v=""),!1===(u=e.isMatch({searchTerm:h.value,operator:h.operator,value:v,dataType:h.filterType})))break}u&&n.push(c.Id),i++}setTimeout(a,1)}else{var m={qid:e.selectedQuery,filters:t,records:n};e.$emit("filterResults",m),e.close()}},100)},isMatch:function(e){var t=!1,a=e.value,s=e.searchTerm,l=e.operator;if(void 0!==a&&void 0!==s&&null!==a&&null!==s||"notEqualTo"!==l&&"doesNotContain"!==l)switch(e.dataType){case"STRING":t=this.matchString(e);break;case"INTEGER":case"DOUBLE":t=this.matchNumber(e);break;case"BOOLEAN":t=this.matchBoolean(e);break;case"DATE":case"DATETIME":t=this.matchDate(e);break;default:t=!1}else t=!0;return t},matchDate:function(e){var t=!1,a=parseFloat(e.value||0),s=parseFloat(e.searchTerm||0),l=g(a).set({hour:0,minute:0,second:0,millisecond:0});a=parseFloat(l.format("X"));var i=g(s).set({hour:0,minute:0,second:0,millisecond:0});return s=parseFloat(i.format("X")),"equals"===e.operator&&a===s?t=!0:"notEqualTo"===e.operator&&a!==s?t=!0:"lessThan"===e.operator&&a<s?t=!0:"lessThanEqualTo"===e.operator&&a<=s?t=!0:"greaterThan"===e.operator&&a>s?t=!0:"greaterThanEqualTo"===e.operator&&a>=s&&(t=!0),t},matchString:function(e){var t=!1,a=e.searchTerm,s=e.value;return s&&a&&(s=Object(v.decodeHtml)(s.toLowerCase()),a=Object(v.decodeHtml)(a.toLowerCase()),"equals"===e.operator&&s===a?t=!0:"notEqualTo"===e.operator&&s!==a?t=!0:"startsWith"===e.operator&&0===s.indexOf(a)?t=!0:"contains"===e.operator&&s.indexOf(a)>-1?t=!0:"doesNotContain"===e.operator&&-1===s.indexOf(a)&&(t=!0)),t},matchNumber:function(e){var t=!1,a=parseFloat(e.value||0),s=parseFloat(e.searchTerm||0);return"equals"===e.operator&&a===s?t=!0:"notEqualTo"===e.operator&&a!==s?t=!0:"lessThan"===e.operator&&a<s?t=!0:"lessThanEqualTo"===e.operator&&a<=s?t=!0:"greaterThan"===e.operator&&a>s?t=!0:"greaterThanEqualTo"===e.operator&&a>=s&&(t=!0),t},matchBoolean:function(e){var t=!0;return t="string"==typeof e.searchTerm?"true"===e.searchTerm:e.searchTerm,e.value===t},normalizeFilterValue:function(e){var t=e.filterValue,a=e.displayType;switch(void 0===a?"STRING":a){case"DATE":case"DATETIME":(t=g(t,this.$User.dateFormat.toUpperCase())).isValid()&&(t=t.tz(this.$User.timezoneId).unix(),t*=1e3);break;case"MULTIPICKLIST":try{t=t.join(";")}catch(e){}break;case"DOUBLE":case"CURRENCY":case"INT":t=window.MA.Util.parseNumberString(t);break;default:t=e.filterValue}return t}}}},782:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("MAModal",{directives:[{name:"show",rawName:"v-show",value:!e.showDateModal,expression:"!showDateModal"}],staticClass:"slds-modal-fullscreen-phone listview-search",attrs:{doDetach:!0,title:e.$Labels.MA_Filter_List_View,closeLabel:e.$Labels.MA_Close},on:{close:e.close}},[a("div",{staticClass:"momentum-scrolling-y slds-scrollable",attrs:{slot:"content"},slot:"content"},[a("MASpinner",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}]}),e._v(" "),a("div",{staticClass:"filter-list",class:{"ma-list__phone":e.isPhone}},e._l(e.filterRows,function(t,s){return a("div",{key:s,staticClass:"filter-row",class:{"slds-grid slds-wrap":!e.isPhone}},[a("div",{staticClass:"slds-size_1-of-1 slds-large-size_4-of-12 slds-p-right_x-small"},[a("div",{staticClass:"slds-form-element"},[a("label",{staticClass:"slds-form-element__label",attrs:{for:"text-input-id-1"}},[e._v(e._s(e.$Labels.MA_Tooltip))]),e._v(" "),a("div",{staticClass:"slds-text-body_regular"},[e._v("\n                                "+e._s(e._f("decode")(t.label))+"\n                            ")])])]),e._v(" "),a("div",{staticClass:"slds-size_1-of-1 slds-large-size_4-of-12 slds-p-right_x-small"},[a("div",{staticClass:"slds-form-element"},[a("label",{staticClass:"slds-form-element__label",attrs:{for:"text-input-id-1"}},[e._v(e._s(e.$Labels.MA_OPERATOR))]),e._v(" "),a("div",{staticClass:"slds-form-element__control"},[a("MobileSelect",{attrs:{options:t.filterOptions,doDetach:!0,isRequired:!0,hasNoneOption:!0,keyString:"value",valueString:"label"},model:{value:t.filterOperator,callback:function(a){e.$set(t,"filterOperator",a)},expression:"row.filterOperator"}})],1)])]),e._v(" "),a("div",{staticClass:"slds-size_1-of-1 slds-large-size_4-of-12"},[a("div",{staticClass:"slds-form-element"},[a("label",{staticClass:"slds-form-element__label",attrs:{for:"text-input-id-1"}},[e._v(e._s(e.$Labels.MA_Value))]),e._v(" "),a("div",{staticClass:"slds-form-element__control"},["input"===t.templateType?a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filterValue,expression:"row.filterValue"}],staticClass:"slds-input",attrs:{type:"text"},domProps:{value:t.filterValue},on:{input:function(a){a.target.composing||e.$set(t,"filterValue",a.target.value)}}})]):"select"===t.templateType||"multiselect"===t.templateType?a("div",[a("MobileSelect",{attrs:{options:t.picklistOptions,doDetach:!0,isRequired:!0,isMultiSelect:"multiselect"===t.templateType,hasNoneOption:!1,keyString:"value",valueString:"label"},model:{value:t.filterValue,callback:function(a){e.$set(t,"filterValue",a)},expression:"row.filterValue"}})],1):"date"===t.templateType?a("div",{on:{click:function(a){return e.doShowDateModal(t)}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filterValue,expression:"row.filterValue"}],staticClass:"slds-input",attrs:{type:"text",disabled:""},domProps:{value:t.filterValue},on:{input:function(a){a.target.composing||e.$set(t,"filterValue",a.target.value)}}})]):e._e()])])])])}),0)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"float-right"},[a("button",{staticClass:"slds-button slds-button_neutral",on:{click:e.close}},[e._v("\n                    "+e._s(e._f("decode")(e.$Labels.MA_Cancel))+"\n                ")]),e._v(" "),a("button",{staticClass:"slds-button slds-button_brand",on:{click:e.filter}},[e._v("\n                    "+e._s(e._f("decode")(e.$Labels.MA_FILTER))+"\n                ")])])])]),e._v(" "),e.showDateModal?a("DateSelectionModal",{attrs:{date:e.date},on:{close:function(t){e.showDateModal=!1},update:e.setDate}}):e._e()],1)},staticRenderFns:[]}}});