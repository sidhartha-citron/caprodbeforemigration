webpackJsonp([55],{668:function(e,t,a){var s=a(13)(a(671),a(672),function(e){a(669)},"data-v-a56113b6",null);e.exports=s.exports},669:function(e,t,a){var s=a(670);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a(198)("f188e69e",s,!0)},670:function(e,t,a){(e.exports=a(197)(void 0)).push([e.i,".map-secondary-view-button[data-v-a56113b6]{color:#0070d2;height:32px;line-height:32px}",""])},671:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(14),n=a.n(s),r=a(35),i=(a.n(r),window),o=i.async,c=i.jQuery;t.default={components:{},data:function(){return{showRefreshQueryButton:!1,refreshingLayers:!1}},computed:n()({},Object(r.mapGetters)("layers",{layers__plottedLayers:"plottedLayers"}),{plottedSFDCLayers:function(){return this.layers__plottedLayers.filter(function(e){return"marker"===e.type&&!1===e.isLoading}).length},plottedDataLayers:function(){return this.layers__plottedLayers.filter(function(e){return"datalayer"===e.type||"arcgisonline"===e.type}).length}}),created:function(){this.$bus.$on("check-refresh-layers-button",this.checkValidLayers)},methods:n()({},Object(r.mapMutations)("mainNavBar",{mainNavBar__toggleSubView:"toggleSubView"}),{showListView:function(){this.mainNavBar__toggleSubView({doShow:!0,subView:"listView"})},showLegendInfo:function(){this.mainNavBar__toggleSubView({doShow:!0,subView:"legend"})},checkValidLayers:function(){var e=this;this.showRefreshQueryButton=!1,this.$nextTick(function(){var t=!1;e.plottedSFDCLayers+e.plottedDataLayers>0&&(t=!0),e.showRefreshQueryButton=t})},refreshAllLayers:function(){var e=this;if(!this.refreshingLayers){this.refreshingLayers=!0,this.$bus.$emit("hide-single-view");var t=this.layers__plottedLayers.filter(function(e){return"datalayer"===e.type||"marker"===e.type||"arcgisonline"===e.type}),a=o.queue(function(e,t){var a=e.hasClass("DataLayer"),s=e.attr("type");if(a)window.MADemographicLayer.refreshDataLayer(e,{stayOnMapTab:!0},function(){e.removeClass("visibleLoading"),c("#layersIndividualWrap .plotLayer").prop("checked","checked"),t()});else if("arcgisonline"===s){var n=e.attr("qid");window.ArcGIS.refreshLayer(n),t()}else window.MAPlotting.refreshQuery(e,null,{force:!0,stayOnMapTab:!0}).then(function(){t()})});a.concurrency=2,t.forEach(function(e){var t=e.qid,s=c('#PlottedQueriesTable .PlottedRowUnit[qid="'+t+'"]');s.length>0&&a.push(s)}),a.drain=function(){window.MAToastMessages.showSuccess({message:"Done"}),e.$bus.$emit("refresh-list-view"),e.refreshingLayers=!1}}}})}},672:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"ma-tablet-map-buttons"},[a("button",{staticClass:"ma-button map-secondary-view-button ma-button--white",attrs:{id:"mapListButton"},on:{click:e.showListView}},[a("span",{staticClass:"ma-icon ma-icon-table"}),e._v("\n            "+e._s(e._f("decode")(e.$Labels.MA_List))+"\n        ")]),e._v(" "),a("button",{staticClass:"ma-button map-secondary-view-button ma-button--white",attrs:{id:"mapLegendButton"},on:{click:e.showLegendInfo}},[e._v("\n            "+e._s(e._f("decode")(e.$Labels.MA_MARKER_LEGEND))+"\n        ")])]),e._v(" "),a("button",{staticClass:"ma-button ma-button--blue ma-button--shadow ma-button--circle-large",class:{in:e.showRefreshQueryButton&&!e.refreshingLayers},attrs:{id:"mapMarkerRefreshButton"},on:{click:e.refreshAllLayers}},[a("span",{staticClass:"ma-icon ma-icon-refresh-markers"})])])},staticRenderFns:[]}}});