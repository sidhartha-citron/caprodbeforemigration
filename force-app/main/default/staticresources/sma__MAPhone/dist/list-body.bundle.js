webpackJsonp([29],{218:function(t,e,i){var s=i(13)(i(225),i(226),function(t){i(223)},"data-v-4c583d7f",null);t.exports=s.exports},222:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=new(function(t){return t&&t.__esModule?t:{default:t}}(i(94)).default);function o(t,e,i){var o=function s(o){i.context._isDestroyed?document.removeEventListener("click",s):t.contains(o.target)||t===o.target||e(o)};s.set(t,o),setTimeout(function(){return document.addEventListener("click",o)},0)}function a(t){var e=s.get(t);document.removeEventListener("click",e),s.delete(t)}e.default={bind:function(t,e,i){var s=e.arg,a=s.active,n=s.handler;if("function"!=typeof n)throw new Error("v-click-outside: missing required handler argument.");!0===a&&o(t,n,i)},update:function(t,e,i){var n=e.arg,r=n.active,l=n.handler;r&&!s.has(t)?o(t,l,i):!r&&s.has(t)&&a(t)},unbind:function(t){a(t)}}},223:function(t,e,i){var s=i(224);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);i(198)("49b356e9",s,!0)},224:function(t,e,i){(t.exports=i(197)(void 0)).push([t.i,".action-sheet_wrap[data-v-4c583d7f]{background-color:#fff;overflow:hidden!important;position:relative;z-index:110}.action-sheet_content[data-v-4c583d7f]{overflow-y:auto}.slds-scope .slds-button.slds-button_neutral.action-sheet_close-button[data-v-4c583d7f]{border-radius:0;box-shadow:0 -2px 4px #f9f9fa;padding:1rem 0;text-align:center!important;background:none;border:0;border-top:1px solid #dddbda;line-height:inherit;width:100%;vertical-align:top}.action-sheet_item[data-v-4c583d7f]{min-width:150px;border-bottom:1px solid #dddbda}.action-sheet_item[data-v-4c583d7f]:last-child{border-bottom:0}.action-sheet_selected-icon[data-v-4c583d7f]{display:none}.slds-is-selected .action-sheet_selected-icon[data-v-4c583d7f]{display:block}.action-sheet_mask[data-v-4c583d7f]{background-color:rgba(8,7,7,.6);height:100%;left:0;position:fixed;top:0;z-index:100;width:100%}.ma-action-sheet-item.header[data-v-4c583d7f]{background-color:#3083d3;color:#fff}.ma-top-bar-row .slds-button[data-v-4c583d7f]{color:#fff;font-size:20px}@media screen and (max-width:769px){.ma-action-sheet-wrap .footer[data-v-4c583d7f]{padding:25px!important}.ma-action-sheet-item[data-v-4c583d7f]{padding:16px 16px 16px 40px!important}}.ma-action-sheet-wrap[data-v-4c583d7f]{position:fixed;width:100%;height:100%;left:0;top:0;visibility:hidden;z-index:6000}.ma-action-sheet-wrap .ma-action-sheet[data-v-4c583d7f]{position:absolute;left:0;margin:0;bottom:0;width:100%;transform:translateY(100%);background-color:#fff;z-index:200;box-shadow:0 2px 3px 0 rgba(0,0,0,.16);padding-top:16px;border-radius:0}@media screen and (max-width:768px){.ma-action-sheet-wrap .ma-action-sheet .maActionSheetClose[data-v-4c583d7f]{text-align:center;width:100%;display:block;padding:16px;font-size:16px;line-height:1.5;color:#1589ee}}.ma-action-sheet-wrap .ma-action-sheet .ma-action-sheet-item[data-v-4c583d7f]{padding:16px;color:#0070d2;font-size:16px;line-height:1;text-align:center}.ma-action-sheet-wrap .ma-action-sheet .ma-action-sheet-close[data-v-4c583d7f]{padding:20px 16px;border-top:2px solid #dddbda;color:#0070d2;font-size:16px;line-height:1;text-align:center}.ma-action-sheet-wrap .ma-action-sheet .ma-action-sheet-close .ma-icon[data-v-4c583d7f]{height:16px;display:inline-block;margin-right:4px;transform:translateY(2px)}.ma-action-sheet-wrap#longPressActionSheet[data-v-4c583d7f]{height:100%;width:100%}.ma-action-sheet-wrap#longPressActionSheet .ma-action-sheet[data-v-4c583d7f]{padding-top:0;width:100%;bottom:0}.ma-action-sheet-wrap#longPressActionSheet .ma-action-sheet .ma-action-sheet-item[data-v-4c583d7f]{text-align:left;color:#3e3e3c;display:flex;align-items:center;border-bottom:1px solid #dddbda}@media screen and (min-width:769px){.ma-action-sheet-wrap#longPressActionSheet .ma-action-sheet .ma-action-sheet-item[data-v-4c583d7f]{justify-content:center}}.ma-action-sheet-wrap#longPressActionSheet .ma-action-sheet .ma-action-sheet-item .ma-icon[data-v-4c583d7f]{color:#fff;background-color:#1589ee;border-radius:100%;height:34px;width:34px;display:flex;justify-content:center;align-items:center;margin-right:8px;font-size:22px}.ma-action-sheet-wrap.in[data-v-4c583d7f]{visibility:visible}.ma-action-sheet-wrap.in .action-sheet-mask[data-v-4c583d7f]{opacity:1}.ma-action-sheet-wrap.in .ma-action-sheet[data-v-4c583d7f]{transform:translate(0)}@media screen and (min-width:769px){.ma-action-sheet-wrap[data-v-4c583d7f]{position:absolute;width:auto;height:auto;background-color:transparent}.ma-action-sheet-wrap .ma-action-sheet[data-v-4c583d7f]{width:auto;left:auto;bottom:auto;border-radius:4px;transform:translate(0);opacity:0;text-align:left;min-width:250px;border:1px solid #dddbda}.ma-action-sheet-wrap .ma-action-sheet .ma-action-sheet-item[data-v-4c583d7f]{text-align:left}.ma-action-sheet-wrap .ma-action-sheet .ma-action-sheet-close[data-v-4c583d7f]{display:none}.ma-action-sheet-wrap.in .ma-action-sheet[data-v-4c583d7f]{opacity:1;transform:translate(0)}}",""])},225:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(222),o=i.n(s),a=window.$;e.default={name:"ActionSheet",directives:{"click-outside":o.a},props:{options:{type:Array,required:!0},doDetach:{type:Boolean,default:!0},labelKey:{type:String,default:"label"},buttonText:{type:String,default:""},buttonIcon:{type:String,default:""},hideOverride:{type:Boolean,default:!1},selectedItems:{type:Array,default:function(){return[]}},buttonType:{type:String,default:""}},data:function(){return{container:null,showOptions:!1,styleObject:{},window:{height:0,width:0},uid:"action-sheet"}},computed:{isPhone:function(){return this.window.width<769},computedIcon:function(){var t="";return""!==this.buttonIcon?t=this.buttonIcon:""===this.buttonText&&(t="ma-icon-threedots-vertical"),t},actionSheetClickOutsideOptions:function(){return{active:this.showOptions,handler:this.hideActionSheet}}},watch:{isPhone:function(){this.showOptions=!1}},created:function(){window.addEventListener("resize",this.handleResize),this.handleResize()},destroyed:function(){window.removeEventListener("resize",this.handleResize),this.hideActionSheet()},methods:{handleResize:function(){this.window.width=window.innerWidth,this.window.height=window.innerHeight},returnItem:function(t){t.isHeader||(this.$emit("select",t),this.hideActionSheet())},hideActionSheet:function(){this.showOptions=!1,this.container&&(this.container.remove(),this.container=null)},detach:function(){if(this.$refs.button){var t=document.querySelector(".slds-scope."+this.uid);try{t.remove()}catch(t){}var e=this.$refs.button.getBoundingClientRect();this.container=document.createElement("div"),this.container.className="slds-scope "+this.uid,this.container.appendChild(this.$refs.actions),document.body.appendChild(this.container),this.styleObject={top:e.top+this.$refs.button.clientHeight+a(window).scrollTop()+"px",left:e.left+a(window).scrollLeft()+"px","max-height":"300px"}}},adjustForClipping:function(){var t=this.$refs.actions.getBoundingClientRect(),e=void 0;if(e=document.documentElement.clientHeight-window.innerHeight<=0?document.documentElement.clientHeight:window.innerHeight-this.getScrollbarWidth(),t.x<0)this.styleObject.left=this.$refs.actions.offsetLeft+Math.abs(t.x)+"px";else if(t.left+t.width>document.documentElement.clientWidth){var i=t.left+t.width-document.documentElement.clientWidth-a(window).scrollLeft();this.styleObject.left=t.left-i+"px"}var s=this.$refs.actions.scrollHeight,o=a(window).scrollTop();if(this.styleObject["max-height"]="300px",t.top+s>e){var n=t.top+s-o-e;this.$bus.$emit("ma-modal-scroll-by",n),this.styleObject.top=t.top-n+"px"}},disableClick:function(t){t.stopPropagation(),t.preventDefault()},openActionSheet:function(){var t=this;this.showOptions=!0,this.doDetach&&this.detach(),this.$nextTick(function(){t.doDetach&&t.adjustForClipping(),t.options.forEach(function(e,i){var s=e,o=t.$refs.optionItem[i];s.isHeader&&o.addEventListener("click",t.disableClick,!0)})})}}}},226:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"click-outside",rawName:"v-click-outside:[actionSheetClickOutsideOptions]",arg:t.actionSheetClickOutsideOptions}],staticClass:"action-sheet-wrapper slds-scope"},[i("div",{ref:"button",staticClass:"slds-grid slds-grid_vertical-align-center",on:{click:t.openActionSheet}},[i("div",{staticClass:"slds-button slds-col slds-truncate"},[t._v(t._s(t._f("decode")(t.buttonText)))]),t._v(" "),""!==t.computedIcon?i("div",[i("button",{staticClass:"slds-button slds-button_icon slds-button_icon-container",class:[t.buttonType]},[i("span",{staticClass:"slds-button__icon ma-icon",class:[t.computedIcon]})])]):t._e()]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showOptions,expression:"showOptions"}],ref:"actions",staticClass:"ma-action-sheet-wrap in slds-grid slds-grid_vertical slds-grid_align-end",style:t.isPhone?{}:t.styleObject},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isPhone,expression:"isPhone"}],staticClass:"action-sheet_mask",on:{click:t.hideActionSheet}}),t._v(" "),i("div",{staticClass:"action-sheet_wrap slds-grid slds-grid_vertical"},[i("div",{staticClass:"action-sheet_content slds-scrollable"},t._l(t.options,function(e,s){return i("div",{key:s,ref:"optionItem",refInFor:!0,staticClass:"action-sheet_item slds-grid slds-p-around_medium",class:{"header slds-text-title_caps slds-section__title slds-theme--shade":e.isHeader,"slds-is-selected":t.selectedItems.includes(e.id)},on:{click:function(i){return t.returnItem(e)}}},[t._m(0,!0),t._v(" "),i("div",{staticClass:"slds-col"},[i("span",{staticStyle:{"word-break":"break-word"}},[t._v(t._s(t._f("decode")(e[t.labelKey])))])])])}),0),t._v(" "),i("div",{staticClass:"slds-button slds-button_neutral action-sheet_close-button",on:{click:t.hideActionSheet}},[t._v("\n                "+t._s(t._f("decode")(t.$Labels.MA_Close))+"\n            ")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"action-sheet_selected-icon slds-p-right_medium"},[e("span",{staticClass:"slds-icon slds-icon_x-small ma-icon ma-icon-check"})])}]}},276:function(t,e,i){t.exports={default:i(277),__esModule:!0}},277:function(t,e,i){i(278),t.exports=i(0).Number.isNaN},278:function(t,e,i){var s=i(2);s(s.S,"Number",{isNaN:function(t){return t!=t}})},767:function(t,e,i){var s=i(13)(i(770),i(783),function(t){i(768)},"data-v-b2d3ba72",null);t.exports=s.exports},768:function(t,e,i){var s=i(769);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);i(198)("2ef5eac4",s,!0)},769:function(t,e,i){(t.exports=i(197)(void 0)).push([t.i,'.list-body-fixed-header .ma-button[data-v-b2d3ba72]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;width:100%;padding:0 10px}#listScrollingBodyFull.in[data-v-b2d3ba72]{z-index:1;visibility:visible!important;opacity:1!important}.sortable-column[data-v-b2d3ba72]{position:relative}.flex-table.ma-table--sortable .sortable-column div.sortable-column-inner[data-v-b2d3ba72]:after{position:absolute;right:10px;font-family:ma-icons-2;content:"\\E187";font-size:16px;width:16px;height:16px;line-height:1;top:0;bottom:0;margin-top:auto;margin-bottom:auto}.flex-table.ma-table--sortable .sortable-column.headerSortUp div.sortable-column-inner[data-v-b2d3ba72]:after{content:"o"}.flex-table.ma-table--sortable .sortable-column.headerSortDown div.sortable-column-inner[data-v-b2d3ba72]:after{content:"n"}.slds-scope .slds-table_bordered[data-v-b2d3ba72]{border-top:0}@media (max-width:425px){.narrowListText[data-v-b2d3ba72],.narrowListText[data-v-b2d3ba72] .slds-button{font-size:12px}}',""])},770:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(276),o=i.n(s),a=i(61),n=i.n(a),r=i(67),l=i.n(r),c=i(17),d=i.n(c),u=i(219),h=i.n(u),p=i(14),m=i.n(p),f=i(218),v=i.n(f),w=i(771),b=i.n(w),g=i(29),x=(i.n(g),i(35)),_=(i.n(x),i(62)),y=i.n(_),A=i(63),C=i.n(A),S=window,k=S.getProperty,L=S.$;e.default={components:{ActionSheet:v.a,ListRow:b.a,ListViewSearch:function(){return m()({},y()(),{component:i.e(31).then(i.bind(null,776)),error:C.a})}},props:{selectedQuery:{type:String,required:!0},isFullScreen:{type:Boolean,required:!0},isLoading:{type:Boolean,default:!1}},data:function(){return{showMassActions:!1,showSortOptions:!1,massActionButtons:[],listViewColumns:[],orderedListViewRecords:[],selectedRecords:{},sortedColumns:[],listRecords:[],listIndex:0,listRecordsToLoadOnScroll:50,loadingListRows:!1,selectedRecordCount:0,selectAllRecords:!1,showListViewSearch:!1,listViewRecords:[],filterInfo:{},currentFilters:[]}},computed:m()({},Object(x.mapGetters)("mainNavBar",{mainNavBar__listView:"listView"}),{filterText:function(){var t=this.$Labels.MA_FILTER;return this.currentFilters.length>0&&(t=this.$Labels.MA_FILTER+" ("+this.currentFilters.length+")"),t},columnWidthPercent:function(){var t=this.listViewColumns.length;return Math.floor(100/t)+"%"},totalColumnWidth:function(){var t=200*this.listViewColumns.length;return this.isFullScreen?Math.floor(t+135)+"px":"100%"}}),watch:{selectedQuery:function(){this.updateListView()}},mounted:function(){""!==this.selectedQuery&&this.build()},created:function(){this.$bus.$on("refresh-list-view",this.updateListView)},beforeDestroy:function(){this.orderedListViewRecords=[],this.listViewRecords=[],this.massActionButtons=[],this.currentFilters=[],this.listRecords=[]},destroyed:function(){this.$bus.$off("refresh-list-view")},methods:{build:function(){this.getListViewActions(),this.updateListView()},handleMassAction:function(t){var e=this,i=t.type,s=t.action,o=t.label,a=[];L("#PlottedQueriesTable .PlottedRowUnit").each(function(t,i){var s=L(i);if(s.hasClass("savedQuery")){var o=(s.data()||{}).qid||"",n=e.selectedRecords[o]||{};L.each(s.data("records"),function(t,e){var i=n[t]||!1;(e.isVisible||e.isClustered||e.isScattered)&&i&&a.push(e)})}});var n="Custom Action"===i?window.MAActionFramework.customActions[o]||null:window.MAActionFramework.standardActions[s||o]||null;if(n){var r=n.Action,l=void 0===r?"":r;if("Javascript"===l)0===a.length?window.MAToastMessages.showMessage({message:"No markers selected"}):n.ActionValue.call(this,{records:a,isMassAction:!0});else if("NewWindow"===l){var c={recString:""};L.each(a||[],function(t,e){var i=e.record.Id;c.recString+=""===c.recString?i:","+i});var d=n.ActionValue;if("GET"===n.Options.method)n.Options.addRecords&&(d=n.ActionValue+(n.ActionValue.indexOf("?"),"?"+n.Options.paramName+"="+c.recString)),window.open(d);else{var u={};if(n.Options.addRecords&&(u[n.Options.paramName]=c.recString),d.indexOf("?")>-1)d.split("?")[1].split("&").forEach(function(t){var e=t.split("=");if(2===e.length){var i=h()(e,2),s=i[0],o=i[1];u[s]=o}});window.openNewWindow("POST",d,u,"_blank")}}}},updateListView:function(){var t=this;return new d.a(function(e){t.sortedColumns=[],t.clearList(),t.$nextTick(function(){t.updateFilters(),t.updateRecordOrderList(),t.buildSortListFromQuery(),t.selectedRecords[t.selectedQuery]={},t.updateRecordsInList().then(function(){t.updateSelectedCount(),e()})})})},refreshListView:function(){var t=this;return new d.a(function(e){t.clearList(),t.$nextTick(function(){t.updateFilters(),t.updateRecordOrderList(),t.updateRecordsInList().then(function(){t.updateSelectedCount(),e()})})})},filterResults:function(t){this.filterInfo[t.qid]=t,this.refreshListView()},toggleSelectAllRecords:function(){var t=this;this.listRecords.forEach(function(e){e.selected=t.selectAllRecords}),this.selectedRecords[this.selectedQuery]||(this.selectedRecords[this.selectedQuery]={}),this.selectAllRecords?this.orderedListViewRecords.forEach(function(e){t.selectedRecords[t.selectedQuery][e]=!0}):this.selectedRecords[this.selectedQuery]={},this.updateSelectedCount()},updateSortList:function(t){var e="";e="asc"===t.sort?"desc":"desc"===t.sort?"":"asc";var i=this.sortedColumns.findIndex(function(e){return e.index===t.index});i>-1?this.sortedColumns.splice(i,1):2===this.sortedColumns.length&&this.sortedColumns.shift(),t.sort=e,""!==e&&this.sortedColumns.push(t);var s=this.sortedColumns.map(function(t){return t.index});this.listViewColumns.forEach(function(t){var e=t.index;-1===s.indexOf(e)&&(t.sort="")})},sortList:function(t){this.updateSortList(t),this.reorderRows()},getListViewActions:function(){var t=this,e=k(window.userSettings||{},"ButtonSetSettings.massActionLayout",!1)||[];e.length>0?e.forEach(function(e){t.massActionButtons.push({isHeader:!0,label:e.Label});var i=e.Buttons;(void 0===i?[]:i).forEach(function(e){var i={},s=void 0;if("Custom Action"===e.Type&&window.MAActionFramework.customActions[e.Label])s=window.MAActionFramework.customActions[e.Label],i=m()({},i,window.MAActionFramework.customActions[e.Label]);else{if(!window.MAActionFramework.standardActions[e.Action||e.Label])return;s=window.MAActionFramework.standardActions[e.Action||e.Label],i=m()({},i,window.MAActionFramework.standardActions[e.Action||e.Label])}-1!==i.Modes.indexOf("Mobile")&&t.massActionButtons.push({label:i.Label,action:e.Label,type:s.Type})})}):this.massActionButtons.push({label:"No Mass Actions Found"})},getTooltips:function(){var t=(L('#PlottedQueriesTable .PlottedRowUnit[qid="'+this.selectedQuery+'"]').data()||{}).tooltips,e=void 0===t?[]:t,i=[].concat(l()(e));return i.splice(1,0,{DisplayType:"STRING",FieldName:"FormattedAddress_MA",FieldLabel:"Address",ActualFieldName:"FormattedAddress_MA",describe:{type:"string",label:"Address",name:"Address",soapType:"xsd:string"},soapType:"STRING",needsLink:!1}),i},clearList:function(){this.listIndex=0,this.listRecords=[],document.getElementById("listScrollingBodyFull").scrollTop=0},updateFilters:function(){var t=this.filterInfo[this.selectedQuery]||{};this.currentFilters=t.filters||[]},updateRecordOrderList:function(){var t=[],e=this.filterInfo[this.selectedQuery];if(e)t=e.records;else{var i=(L('#PlottedQueriesTable .PlottedRowUnit[qid="'+this.selectedQuery+'"]').data()||{}).recordList;t=void 0===i?[]:i}this.orderedListViewRecords=t},buildSortListFromQuery:function(){var t=this;(this.listViewColumns=[],""!==this.selectedQuery)&&this.getTooltips().forEach(function(e,i){var s=k(e,"describe.soapType",!1)||"string";(s=String(s).toLowerCase()).indexOf("double")>-1&&(s="number"),t.listViewColumns.push({label:e.FieldLabel,index:i,sort:"",value:String(e.ActualFieldName).replace("sma__",""),type:s})})},updateRecordsInList:function(){var t=this;return new d.a(function(e){for(var i=L('#PlottedQueriesTable .PlottedRowUnit[qid="'+t.selectedQuery+'"]'),s=i.data()||{},o=s.records,a=void 0===o?{}:o,n={},r=i.find(".renderButtons .item-selectable .on"),c=0;c<r.length;c++){n[r[c].getAttribute("data-renderAs")]=!0}var d=t.listIndex,u=[].concat(l()(t.orderedListViewRecords)).splice(d,t.listRecordsToLoadOnScroll);if(u.length>0){t.loadingListRows=!0,t.listIndex=t.listIndex+t.listRecordsToLoadOnScroll+1;var h=t.getTooltips(),p=t.selectedRecords[t.selectedQuery]||{};u.forEach(function(e){var i=a[e],o=i.marker.getIcon(),n={id:i.Id,qid:s.qid,imgURL:o.url,selected:p[i.Id],tooltips:[]};h.forEach(function(t){n.tooltips.push({label:Object(g.decodeHtml)(window.formatTooltip(i,t,!0)),needsLink:t.needsLink,updateable:t.Updateable,updateField:t.updateField})}),(i.isClustered||i.isVisible||i.isScattered)&&i.listViewVisible&&t.listRecords.push(n)}),t.loadingListRows=!1,e()}else e()})},loadDataOnScroll:function(t){var e=t.target;e?e.scrollHeight-e.scrollTop-e.clientHeight<1&&this.updateRecordsInList():console.warn("target missing: scrolling list view error, rows will be missing.")},updateSelectedRecords:function(t){var e=t.qid,i=void 0===e?"":e,s=t.id,o=void 0===s?"":s,a=t.selected;if(void 0!==a&&a)this.selectedRecords[i]||(this.selectedRecords[i]={}),this.selectedRecords[i][o]=!0;else try{delete this.selectedRecords[i][o]}catch(t){}this.updateSelectedCount()},updateSelectedCount:function(){var t=this.selectedRecords[this.selectedQuery]||{};this.selectedRecordCount=n()(t).length;var e=this.selectedRecordCount===this.orderedListViewRecords.length;this.selectAllRecords=e},reorderRows:function(){if(0!==this.sortedColumns.length){var t=this,e=h()(this.sortedColumns,2),i=e[0],s=e[1];this.$emit("update:isLoading",!0);var a=["sortBy","desc"===i.sort],r="number"===i.type,l=!1,c=[];if(s){var d="desc"===s.sort;c=["sortBy2",d],l="number"===s.type}var u=L('#PlottedQueriesTable .PlottedRowUnit[qid="'+this.selectedQuery+'"]').data()||{},p=u.records,m=void 0===p?{}:p,f=0,v=n()(m)||[],w=v.length,b=[];setTimeout(function e(){if(f<w){for(var n=0;n<500&&f<w;){n++;var d=v[f],h=m[d],p=null,g=null,x=k(h,i.value,!1);if(r){var _=Number(x);p=o()(_)?null:_}else p=x?String(x):"";if(s){var y=k(h,s.value,!1);if(l){var A=Number(y);g=o()(A)?null:A}else g=y?String(y):""}b.push({sortBy:p,id:f,recId:h.Id,sortBy2:g}),f++}setTimeout(e,1)}else if(b.length>0){t.sortHelper(b,a,c);var C=b.map(function(t){return t.recId});t.sortFilteredList(C),u.recordList=C,t.refreshListView().then(function(){t.$emit("update:isLoading",!1)})}else t.$emit("update:isLoading",!1),window.MAToastMessages.showMessage({message:"List View",subMessage:"Appears we have nothing sort..."})},1)}},sortFilteredList:function(t){var e=this.filterInfo[this.selectedQuery];if(e){var i=e.records,s=[];t.forEach(function(t){-1!==i.indexOf(t)&&s.push(t)}),e.records=s}},sortHelper:function(){var t=arguments,e=t[0],i=void 0,s=void 0,o=void 0,a=void 0,n=void 0,r=void 0,l=void 0;return"boolean"==typeof arguments[arguments.length-1]?(i=arguments[arguments.length-1],s=arguments.length-1):(i=!1,s=arguments.length),e.sort(function(e,c){for(l=1;l<s;l++)if("string"!=typeof(o=t[l])?(a=o[1],o=o[0],n=e[t[l][0]],r=c[t[l][0]]):(a=!1,n=e[t[l]],r=c[t[l]]),!1===i&&"string"==typeof n&&(n=n.toLowerCase(),r=r.toLowerCase()),a){if(n>r)return-1;if(n<r)return 1}else{if(n<r)return-1;if(n>r)return 1}return 0})},showListViewModal:function(){this.showListViewSearch=!0}}}},771:function(t,e,i){var s=i(13)(i(774),i(775),function(t){i(772)},"data-v-2008c4aa",null);t.exports=s.exports},772:function(t,e,i){var s=i(773);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);i(198)("6ae40e31",s,!0)},773:function(t,e,i){(t.exports=i(197)(void 0)).push([t.i,".slds-list-item-container .list-item_clickable-area[data-v-2008c4aa],.slds-list-item-container[data-v-2008c4aa]{width:100%}.list-row[data-v-2008c4aa]{background-color:#fff;border-collapse:separate;border-bottom:1px solid #dddbda}.list-row .list-column-small[data-v-2008c4aa]{white-space:nowrap;position:relative;width:50px;min-width:50px;max-width:50px}.list-row .sortable-column[data-v-2008c4aa]{overflow-wrap:break-word;word-wrap:break-word;-ms-word-break:break-all;word-break:break-word;-ms-hyphens:auto;-moz-hyphens:auto;-webkit-hyphens:auto;hyphens:auto}.list-row .map-marker[data-v-2008c4aa]{width:20px}.ma-listview-item-subtext[data-v-2008c4aa]{font-size:14px;color:#3e3e3c}.ma-listview-item-meta[data-v-2008c4aa]{flex:0 1 auto;align-items:center;justify-content:center;display:flex}",""])},774:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(14),o=i.n(s),a=i(219),n=i.n(a),r=i(218),l=i.n(r),c=window,d=c.$,u=c.MAActionFramework;e.default={components:{ActionSheet:l.a},props:{record:{type:Object,required:!0},isFullScreen:{type:Boolean,default:!1},columnWidthPercent:{type:String,default:"200px"},totalColumnWidth:{type:String,default:"100%"}},data:function(){return{actionButtons:[],showActions:!1}},computed:{tooltips:function(){return this.record.tooltips||[]},shortHandTooltipInfo:function(){var t=n()(this.tooltips,2),e=t[0],i=t[1];return{label:e.label,address:i.label}}},methods:{updateSelections:function(){this.$emit("update-selected-records",this.record)},getButtons:function(){var t=this;this.actionButtons=[];var e=window.getProperty(window.userSettings||{},"ButtonSetSettings.tooltipLayout",!1)||[];e.length>0?e.forEach(function(e){t.actionButtons.push({isHeader:!0,label:e.Label});var i=e.Columns;(void 0===i?[]:i).forEach(function(e){e.forEach(function(e){var i={},s=void 0;if("Custom Action"===e.Type&&window.MAActionFramework.customActions[e.Label])s=window.MAActionFramework.customActions[e.Label],i=o()({},i,window.MAActionFramework.customActions[e.Label]);else{if(!window.MAActionFramework.standardActions[e.Action||e.Label])return;s=window.MAActionFramework.standardActions[e.Action||e.Label],i=o()({},i,window.MAActionFramework.standardActions[e.Action||e.Label])}-1!==i.Modes.indexOf("Mobile")&&t.actionButtons.push({label:i.Label,action:e.Label,type:s.Type})})})}):this.actionButtons.push({label:"No Mass Actions Found"})},viewMarker:function(){try{var t=(d('#PlottedQueriesTable .PlottedRowUnit[qid="'+this.record.qid+'"]').data()||{}).records,e=((void 0===t?{}:t)[this.record.id]||{}).marker;window.MAPlotting.marker_Click.call(e)}catch(t){console.warn("unable to locate marker")}},handleTooltipAction:function(t){var e=this,i="Custom Action"===t.type?u.customActions[t.action]||null:u.standardActions[t.action]||null;if("Iframe"===i);else if("NewWindow"===i.Action){i.ActionValue.indexOf("{records}");var s=i.ActionValue+(-1===i.ActionValue.indexOf("?")?"?noparams":"")+"&Button="+encodeURIComponent(i.Label)+"&RecordId="+this.tooltip__record.record.Id;if("GET"===i.Options.method)i.Options.addRecords&&(s+="&"+i.Options.paramName+"="+this.tooltip__record.Id),window.ma_navigateToUrl(s,"url","blank");else{var o={};i.Options.addRecords&&(o[i.Options.paramName]=this.tooltip__record.Id),window.openNewWindow("POST",s,o,"_blank")}}else if("Check In"===t.action||"Check Out"===t.action)i.ActionValue.call(this,{buttonInfo:t,records:[this.tooltip__record]}).then(function(i){window.MA.enabledFeatures.autoCheckOut||"Check Out"===t.action?(t.label=e.$Labels.MAActionFramework_Check_In,t.action="Check In"):(t.label=e.$Labels.MAActionFramework_Check_Out,t.action="Check Out"),t.checkInId=i});else{var a=this.getFormattedActionOptions();a.button=t,i.ActionValue.call(this,a)}},getFormattedActionOptions:function(){var t=(d('#PlottedQueriesTable .PlottedRowUnit[qid="'+this.record.qid+'"]').data()||{}).records;return{records:[(void 0===t?{}:t)[this.record.id]||{}]}}}}},775:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"slds-grid slds-gutters list-row slds-p-vertical_xx-small slds-grid_vertical-align-center",style:{"min-width":t.totalColumnWidth},attrs:{"data-id":t.record.id}},[i("div",{staticClass:"slds-col checkbox-column list-column-small slds-p-left_large",staticStyle:{"padding-left":"1.0rem"}},[i("div",{staticClass:"slds-grid slds-grid_vertical-align-center"},[i("div",{staticClass:"ma-checkbox-wrap list-checkbox"},[i("label",{staticClass:"ma-checkbox"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.record.selected,expression:"record.selected"}],staticClass:"listRowCheckbox",attrs:{name:"checkbox",type:"checkbox"},domProps:{checked:t.record.selected,checked:Array.isArray(t.record.selected)?t._i(t.record.selected,null)>-1:t.record.selected},on:{change:[function(e){var i=t.record.selected,s=e.target,o=!!s.checked;if(Array.isArray(i)){var a=t._i(i,null);s.checked?a<0&&t.$set(t.record,"selected",i.concat([null])):a>-1&&t.$set(t.record,"selected",i.slice(0,a).concat(i.slice(a+1)))}else t.$set(t.record,"selected",o)},t.updateSelections]}}),t._v(" "),i("span",{staticClass:"ma-checkbox-faux"}),t._v(" "),i("span",{staticClass:"ma-checkbox-label"})])])])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isFullScreen,expression:"isFullScreen"}],staticClass:"slds-col list-column-small"},[i("div",{on:{click:t.getButtons}},[i("ActionSheet",{attrs:{doDetach:!0,options:t.actionButtons},on:{select:t.handleTooltipAction,hide:function(e){t.showActions=!1}}})],1)]),t._v(" "),i("div",{staticClass:"slds-col list-column-small",staticStyle:{width:"35px","min-width":"35px","max-width":"35px"}},[i("div",{staticClass:"ma-icon map-marker"},[i("img",{staticClass:"legendMarkerImg",attrs:{src:t.record.imgURL}})])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.isFullScreen,expression:"!isFullScreen"}],staticClass:"slds-col slds-list-item-container"},[i("div",{staticClass:"slds-grid slds-grid_vertical-align-center list-item_clickable-area",on:{click:t.viewMarker}},[i("div",{staticClass:"slds-p-vertical_x-small"},[i("div",{staticClass:"ma-listview-item-text list-item_text",staticStyle:{"white-space":"pre-wrap","max-width":"100%"}},[t._v(t._s(t._f("decode")(t.shortHandTooltipInfo.label)))]),t._v(" "),i("div",{staticClass:"ma-listview-item-subtext list-item_subtext",staticStyle:{"white-space":"pre-wrap","max-width":"100%"}},[t._v(t._s(t._f("decode")(t.shortHandTooltipInfo.address)))])]),t._v(" "),t._m(0),t._v(" "),t._m(1)])]),t._v(" "),i("div",{staticClass:"slds-col"},[i("div",{staticClass:"slds-grid slds-grid_vertical-align-center slds-gutters"},t._l(t.tooltips,function(e,s){return i("div",{directives:[{name:"show",rawName:"v-show",value:t.isFullScreen,expression:"isFullScreen"}],key:s,staticClass:"sortable-column slds-col slds-p-horizontal_xx-small",style:{width:t.columnWidthPercent+"%","min-width":"200px"}},[t._v("\n                "+t._s(t._f("decode")(e.label))+"\n            ")])}),0)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"ma-listview-item-meta slds-col_bump-right"},[e("div",{staticClass:"ma-listview-distance"},[e("span",{staticClass:"ma-listview-distance-value"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"slds-p-left_medium slds-p_vertical_medium slds-p-right_x-small slds-grid slds-grid_align-end slds-grid_vertical-align-center"},[e("span",{staticClass:"layer-item_chevron ma-icon ma-icon-chevronright"})])}]}},783:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"slds-grid slds-grid_vertical slds-col",staticStyle:{height:"80%"},attrs:{id:"listBody"}},[i("div",{staticClass:"slds-grid slds-grid_vertical-align-center slds-shrink-none slds-p-vertical_x-small slds-border_bottom"},[i("div",{staticClass:"slds-p-left_medium"},[i("div",{staticClass:"ma-checkbox-wrap"},[i("label",{staticClass:"ma-checkbox"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectAllRecords,expression:"selectAllRecords"}],attrs:{name:"checkbox",type:"checkbox"},domProps:{checked:Array.isArray(t.selectAllRecords)?t._i(t.selectAllRecords,null)>-1:t.selectAllRecords},on:{change:[function(e){var i=t.selectAllRecords,s=e.target,o=!!s.checked;if(Array.isArray(i)){var a=t._i(i,null);s.checked?a<0&&(t.selectAllRecords=i.concat([null])):a>-1&&(t.selectAllRecords=i.slice(0,a).concat(i.slice(a+1)))}else t.selectAllRecords=o},t.toggleSelectAllRecords]}}),t._v(" "),i("span",{staticClass:"ma-checkbox-faux"}),t._v(" "),i("span",{staticClass:"ma-checkbox-label listViewTotalSelections narrowListText"},[t._v(t._s(t._f("decode")(t.selectedRecordCount))+" selected:")])])])]),t._v(" "),i("div",{staticClass:"slds-p-left_x-small slds-col_bump-right"},[i("ActionSheet",{staticClass:"narrowListText",attrs:{doDetach:!0,options:t.massActionButtons,buttonText:t.$Labels.MA_Actions},on:{select:t.handleMassAction,hide:function(e){t.showMassActions=!1}}})],1),t._v(" "),i("div",{staticClass:"slds-p-left_x-small"},[i("button",{staticClass:"slds-button addFilter slds-grid slds-grid_vertical-align-center narrowListText",on:{click:t.showListViewModal}},[i("div",[t._v(t._s(t.filterText))]),t._v(" "),t._m(0)])]),t._v(" "),i("div",{staticClass:"slds-p-left_medium ma-form-control icon-left icon-right",staticStyle:{display:"none"}},[i("input",{staticClass:"ma-input clearable-input",staticStyle:{"line-height":"32px"},attrs:{id:"searchInputList",placeholder:t._f("decode")(t.$Labels.MA_Search),type:"text"}}),t._v(" "),i("div",{staticClass:"ma-icon icon-left ma-icon-search"}),t._v(" "),i("div",{staticClass:"ma-icon icon-right ma-icon-clear",staticStyle:{display:"none"},attrs:{onclick:"MALayers.clearAllSearch();"}})]),t._v(" "),i("div",{staticClass:"slds-p-left_medium slds-p-right_x-small"},[i("ActionSheet",{directives:[{name:"show",rawName:"v-show",value:!t.isFullScreen,expression:"!isFullScreen"}],staticClass:"narrowListText",attrs:{doDetach:!0,options:t.listViewColumns,buttonText:t._f("decode")(t.$Labels.MA_SORT),buttonIcon:"ma-icon-sort"},on:{select:t.sortList,hide:function(e){t.showSortOptions=!1}}})],1)]),t._v(" "),i("div",{staticClass:"slds-col list-body-scrolling-body slds-scrollable momentum-scrolling-y",class:{in:t.mainNavBar__listView,"small-list":!t.isFullScreen},staticStyle:{"overflow-y":"scroll",height:"100%"},attrs:{id:"listScrollingBodyFull"},on:{"&scroll":function(e){return t.loadDataOnScroll(e)}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isFullScreen,expression:"isFullScreen"}],staticClass:"slds-grid slds-gutters flex-table ma-table--sortable slds-grid_vertical-align-center",staticStyle:{"min-height":"40px"}},[i("div",{staticClass:"slds-col",staticStyle:{width:"50px","min-width":"50px","max-width":"50px"}}),t._v(" "),i("div",{staticClass:"slds-col",staticStyle:{width:"50px","min-width":"50px","max-width":"50px"}}),t._v(" "),i("div",{staticClass:"slds-col",staticStyle:{width:"35px","min-width":"35px","max-width":"35px"}}),t._v(" "),i("div",{staticClass:"slds-col"},[i("div",{staticClass:"slds-grid"},t._l(t.listViewColumns,function(e,s){return i("div",{key:s,staticClass:"sortable-column header slds-col slds-p-horizontal_small slds-align-middle",class:{headerSortUp:"asc"===e.sort,headerSortDown:"desc"===e.sort},style:{width:t.columnWidthPercent,"min-width":"200px"},attrs:{"data-sort":e.sort},on:{click:function(i){return t.sortList(e)}}},[i("div",{staticClass:"sortable-column-inner"},[t._v("\n                            "+t._s(t._f("decode")(e.label))+"\n                        ")])])}),0)])]),t._v(" "),t._l(t.listRecords,function(e,s){return i("ListRow",{key:s,attrs:{record:e,columnWidthPercent:t.columnWidthPercent,totalColumnWidth:t.totalColumnWidth,isFullScreen:t.isFullScreen},on:{"update-selected-records":t.updateSelectedRecords}})})],2),t._v(" "),t.showListViewSearch?i("ListViewSearch",{attrs:{selectedQuery:t.selectedQuery,currentFilters:t.currentFilters},on:{close:function(e){t.showListViewSearch=!1},filterResults:t.filterResults}}):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",{staticClass:"slds-button__icon slds-button__icon_right ma-icon ma-icon-filter"})])}]}}});