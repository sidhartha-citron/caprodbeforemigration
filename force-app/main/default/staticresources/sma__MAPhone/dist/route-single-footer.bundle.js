webpackJsonp([28],{259:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={methods:{decodeHtml:function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}}}},270:function(e,t,s){var a=s(13)(s(273),s(274),function(e){s(271)},"data-v-63bf9b6e",null);e.exports=a.exports},271:function(e,t,s){var a=s(272);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);s(198)("1c032509",a,!0)},272:function(e,t,s){(e.exports=s(197)(void 0)).push([e.i,".disable-resize[data-v-63bf9b6e]{resize:none}@media screen and (max-width:1024px){.slds-input[data-v-63bf9b6e]{-moz-appearance:none;-webkit-appearance:none;appearance:none}}",""])},273:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(14),o=s.n(a),n=s(259),i=s.n(n);t.default={name:"MAInput",mixins:[i.a],props:{value:{type:String|Number,required:!0},isRequired:{type:Boolean,default:!1},useTextArea:{type:Boolean,default:!1},disableResize:{type:Boolean,default:!1},label:{type:String,default:""},errors:{type:Array,default:function(){return[]}},placeholder:{type:String,default:""},type:{type:String,default:"text"},isInvalid:{type:Boolean,default:!1},isDisabled:{type:Boolean,default:!1},hasFocus:{type:Boolean,default:!1},requiredLabel:{type:String,default:"Required"}},computed:{showLabel:function(){return this.label},hasErrors:function(){return this.errors&&this.errors.length},listeners:function(){var e=this;return o()({},this.$listeners,{input:function(t){return e.$emit("input",t.target.value)}})}},watch:{hasFocus:function(e){e&&this.focus()}},mounted:function(){this.hasFocus&&this.focus()},methods:{focus:function(){this.$refs.input.focus(),this.$refs.input.select()}}}},274:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"slds-form-element",class:{"slds-has-error":e.isInvalid}},[e.showLabel?s("label",{staticClass:"slds-form-element__label"},[e.isRequired?s("abbr",{staticClass:"slds-required",attrs:{title:e.requiredLabel}},[e._v("*")]):e._e(),e._v("\n        "+e._s(e.decodeHtml(e.label))+"\n        "),e._t("label")],2):e._e(),e._v(" "),s("div",{staticClass:"slds-form-element__control",staticStyle:{position:"relative"}},[e.useTextArea?s("textarea",e._g({staticClass:"slds-textarea",attrs:{disabled:e.isDisabled,placeholder:e.placeholder},domProps:{value:e.decodeHtml(e.value)}},e.listeners)):s("input",e._g({ref:"input",staticClass:"slds-input",attrs:{type:e.type,disabled:e.isDisabled,placeholder:e.placeholder},domProps:{value:e.decodeHtml(e.value)},on:{blur:function(t){return e.$emit("update:hasFocus",!1)}}},e.listeners)),e._v(" "),e._t("extendInput")],2),e._v(" "),e.isInvalid?s("div",{staticClass:"slds-form-element__help"},[e._t("errors")],2):e._e()])},staticRenderFns:[]}},279:function(e,t,s){var a=s(13)(s(280),s(281),null,null,null);e.exports=a.exports},280:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(217),o=s.n(a),n=window.getProperty;t.default={components:{MAModal:o.a},props:{searchFunction:{type:Function,required:!0},searchKey:{type:String,required:!0},searchLabel:{type:String,required:!0},minimumSearchLength:{type:Number,required:!1,default:2}},data:function(){return{searchResults:[],styleObject:{position:"relative",padding:0,background:"#fff",border:"1px solid #dddbda","border-radius":".25rem","background-clip":"padding-box","box-shadow":"0 2px 2px 0 rgba(0,0,0,.1)"},searchTerm:"",isLoading:!1,searchTimeout:null}},computed:{showEmptyState:function(){var e=0===this.searchResults.length,t=this.searchTerm.length<=this.minimumSearchLength;return t||e||t}},watch:{searchTerm:function(e){e.length>this.minimumSearchLength&&this.debounceSearch(e)}},mounted:function(){var e=this;this.$nextTick(function(){e.$refs.mobileSearchInput.focus()})},methods:{returnResult:function(e){this.$emit("result",e),this.close()},close:function(){this.$emit("close-search-modal")},clearInput:function(){this.returnResult({id:"",label:""})},debounceSearch:function(e){var t=this;clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(function(){t.isLoading=!0,t.searchResults=[],t.searchFunction(e).then(function(e){t.processResults(e)}).catch(function(e){console.warn(e)}).finally(function(){t.isLoading=!1})},250)},processResults:function(e){var t=this;e.forEach(function(e){t.searchResults.push({label:n(e,t.searchLabel,!1),id:n(e,t.searchKey,!1),result:e})})}}}},281:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("MAModal",{staticClass:"slds-modal_large",attrs:{doDetach:!0,title:e.$Labels.MA_Search,closeLabel:e.$Labels.MA_Close},on:{close:e.close}},[s("div",{attrs:{slot:"content"},slot:"content"},[s("div",{staticClass:"ma-form-control has-inset-icon--right"},[s("div",{staticClass:"slds-form-element"},[s("div",{staticClass:"slds-form-element__control slds-input-has-icon slds-input-has-icon_right"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}],staticClass:"slds-input__icon-group slds-input__icon-group_right"},[s("div",{staticClass:"slds-spinner slds-spinner_brand slds-spinner_x-small slds-input__spinner",staticStyle:{right:"5px"},attrs:{role:"status"}},[s("span",{staticClass:"slds-assistive-text"},[e._v("Loading")]),e._v(" "),s("div",{staticClass:"slds-spinner__dot-a"}),e._v(" "),s("div",{staticClass:"slds-spinner__dot-b"})])]),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:!e.isLoading,expression:"!isLoading"}],staticClass:"slds-icon slds-input__icon slds-input__icon_left slds-icon-text-default ma-icon ma-icon-search"}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchTerm,expression:"searchTerm"}],ref:"mobileSearchInput",staticClass:"slds-input",attrs:{placeholder:e.$Labels.MA_Search+"...",type:"text"},domProps:{value:e.searchTerm},on:{input:function(t){t.target.composing||(e.searchTerm=t.target.value)}}})])])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.showEmptyState,expression:"showEmptyState"}],staticClass:"search-empty-state"},[s("div",{staticClass:"text-center"},[s("span",{staticClass:"ma-icon ma-icon-info ma-icon--large"})]),e._v(" "),s("div",[s("p",{staticClass:"text-center"},[e._v("Search above for available options")])])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.showEmptyState,expression:"!showEmptyState"}],staticClass:"slds-m-top_medium"},e._l(e.searchResults,function(t,a){return s("article",{key:a,staticClass:"slds-card",style:e.styleObject,on:{click:function(s){return e.returnResult(t)}}},[s("div",{staticClass:"slds-card__header slds-grid"},[s("header",{staticClass:"slds-media slds-media_center slds-has-flexi-truncate"},[s("div",{staticClass:"slds-media__body"},[s("h2",{staticClass:"slds-card__header-title"},[s("div",{staticClass:"slds-card__header-link slds-truncate"},[s("span",[e._v(e._s(e._f("decode")(t.label)))])])])])])])])}),0)]),e._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("div",{staticClass:"float-right"},[s("button",{staticClass:"slds-button slds-button_neutral",on:{click:e.close}},[e._v("\n                "+e._s(e.$Labels.MA_Cancel)+"\n            ")]),e._v(" "),s("button",{staticClass:"slds-button slds-button_brand",on:{click:e.clearInput}},[e._v("\n                "+e._s(e.$Labels.MA_Clear)+"\n            ")])])])])},staticRenderFns:[]}},462:function(e,t,s){var a=s(13)(s(465),s(471),function(e){s(463)},"data-v-792622ad",null);e.exports=a.exports},463:function(e,t,s){var a=s(464);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);s(198)("29336142",a,!0)},464:function(e,t,s){(e.exports=s(197)(void 0)).push([e.i,".route-single-footer[data-v-792622ad]{flex:0 0 auto;background-color:#fff}.route-single-footer .slds-button[data-v-792622ad]{width:100%}@media (max-width:425px){.route-single-footer .slds-button[data-v-792622ad]{font-family:AvenirNextCondensed,HelveticaNeue-Condensed,Ubuntu Condensed,Liberation Sans Narrow,Franklin Gothic Cond,Arial Narrow,sans-serif-condensed,Arial,Trebuchet MS,Lucida Grande,Tahoma,Verdana,sans-serif;font-size:14px}}",""])},465:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(14),o=s.n(a),n=s(35),i=(s.n(n),s(466)),r=s.n(i);t.default={components:{AddStopModal:r.a},data:function(){return{showAddStop:!1}},computed:o()({},Object(n.mapGetters)("routes",{routes__editMode:"editMode",routes__travelMode:"travelMode",routes__totalStops:"totalStops",routes__route:"route",routes__onMap:"onMap"}),{getDirectionsText:function(){return this.routes__route.lockOrder?this.$Labels.MA_Get_Directions:this.$Labels.MA_Optimize}}),methods:o()({},Object(n.mapMutations)("routes",{routes__toggleEditMode:"toggleEditMode"}),Object(n.mapActions)("routes",{routes__createRoute:"createRoute",routes__removeRoute:"removeRoute"}),{removeRoute:function(){this.routes__removeRoute(),window.setMobileState()},showAddStopModal:function(){this.showAddStop=!0},closeAddStopModal:function(){this.showAddStop=!1},optimizeRoute:function(){this.$bus.$emit("remove-schedule-route"),this.routes__createRoute(),this.routes__onMap=!0},editRoute:function(){this.routes__toggleEditMode(!0)}})}},466:function(e,t,s){var a=s(13)(s(469),s(470),function(e){s(467)},null,null);e.exports=a.exports},467:function(e,t,s){var a=s(468);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);s(198)("c97b6eac",a,!0)},468:function(e,t,s){(e.exports=s(197)(void 0)).push([e.i,"@media only screen and (max-width:768px){.slds-modal-fullscreen-phone .slds-modal__container{padding:0;margin:0 auto;border-radius:0}.slds-modal-fullscreen-phone .slds-modal__content{flex-grow:1;background-color:#fff}.slds-modal-fullscreen-phone .slds-modal__close{top:11px;right:11px;color:#9faab5!important;width:32px;font-size:20px;z-index:10;padding:0;height:32px;line-height:1;vertical-align:middle;text-align:center}}",""])},469:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(17),o=s.n(a),n=s(14),i=s.n(n),r=s(217),l=s.n(r),d=s(270),c=s.n(d),u=s(59),_=s.n(u),p=s(294),h=(s.n(p),s(279)),m=s.n(h),f=s(7),v=s.n(f),b=s(39),g=s.n(b),S=s(35),x=(s.n(S),window),M=x.MA,w=x.MARemoting,C=x.google;t.default={components:{MAModal:l.a,MAInput:c.a,MASpinner:_.a,MobileSearch:m.a},data:function(){return{name:"",address:"",isLoading:!1,showSearch:!1,searchResult:null}},validations:{name:{required:p.required}},methods:i()({},Object(S.mapMutations)("routes",{routes__addStop:"addStop"}),{toggleSearch:function(e){this.showSearch=e},close:function(){this.isLoading||this.$emit("close")},updateSearchValue:function(e){this.address=e.label,this.searchResult=e.result},placeSearch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{radius:8e3};return new o.a(function(s,a){if(""===e)a(new Error("Missing search term."));else{var o=M.map.getBounds().getCenter(),n=o.lat(),i=o.lng(),r=t.radius||8e3;try{var l=M.map.getBounds();r=(r=C.maps.geometry.spherical.computeDistanceBetween(o,l.getNorthEast()))>5e4?5e4:r}catch(e){console.warn("Error getting map radius, defaulting to 5 miles. Results may be affected",e)}(new v.a).setAction(w.placeSearch).setErrorHandler(function(e,t){console.warn(e),M.isUserLoggedIn(e,t,!0),a()}).invoke([e,n,i,r,"placeSearch"],function(e){var t=e.success,o=void 0!==t&&t,n=e.data;o?s((void 0===n?{}:n).results):a()},{escape:!1,buffer:!1})}})},validateStop:function(){this.isLoading||(this.searchResult&&!this.$v.$invalid?this.addStop():window.MAToastMessages.showError({message:this.$Labels.MA_Validation_Error,subMessage:this.$Labels.MAFavoriteLocation_Please_complete_all_information}))},addStop:function(){var e=this.searchResult,t={id:g()(),lat:e.geometry.location.lat,Latitude__c:e.geometry.location.lat,lng:e.geometry.location.lng,Longitude__c:e.geometry.location.lng,Name:this.name,Address__c:e.formatted_address,BaseObjectId__c:null,BaseObject__c:null,LinkId__c:"",MASavedQry__c:"",Options__c:{TimeBasedOptions:{Start:"Set start time...",Duration:"0 hr, 30 min"},LockType:"unlocked",DraggablePoint:!1}};this.routes__addStop(t),this.$bus.$emit("remove-route"),this.$emit("close")}})}},470:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("MAModal",{directives:[{name:"show",rawName:"v-show",value:!e.showSearch,expression:"!showSearch"}],staticClass:"slds-modal-fullscreen-phone",attrs:{id:"addStopModal",doDetach:!0,title:e._f("decode")(e.$Labels.MA_Add_Stop),closeLabel:e.$Labels.MA_Close},on:{close:e.close}},[s("div",{attrs:{slot:"content"},slot:"content"},[s("MASpinner",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}]}),e._v(" "),s("div",{staticClass:"pad-8-16",attrs:{id:"changeowner-user-select"}},[s("MAInput",{attrs:{isRequired:!0,isInvalid:e.$v.name.$error,label:e._f("decode")(e.$Labels.MA_Name),requiredLabel:e.$Labels.MA_Required},on:{input:e.$v.name.$touch},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},[s("span",{attrs:{slot:"errors"},slot:"errors"},[e._v(e._s(e._f("decode")(e.$Labels.MA_A_NAME_IS_REQUIRED_TO_CONTINUE)))])]),e._v(" "),s("div",{staticClass:"slds-form-element"},[s("label",{staticClass:"slds-form-element__label"},[s("abbr",{staticClass:"slds-required",attrs:{title:"required"}},[e._v("*")]),e._v("\n                        "+e._s(e._f("decode")(e.$Labels.MA_Address))+"\n                    ")]),e._v(" "),s("div",{staticClass:"slds-form-element__control",staticStyle:{position:"relative"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.address,expression:"address"}],staticClass:"slds-input",attrs:{type:"text",placeholder:""},domProps:{value:e.address},on:{focus:function(t){return e.toggleSearch(!0)},input:function(t){t.target.composing||(e.address=t.target.value)}}})])])],1)],1),e._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("div",{staticClass:"float-right"},[s("button",{staticClass:"slds-button slds-button_neutral",on:{click:e.close}},[e._v("\n                    "+e._s(e._f("decode")(e.$Labels.MA_Cancel))+"\n                ")]),e._v(" "),s("button",{staticClass:"slds-button slds-button_brand",on:{click:e.validateStop}},[e._v("\n                    "+e._s(e._f("decode")(e.$Labels.MA_Done))+"\n                ")])])])]),e._v(" "),e.showSearch?s("MobileSearch",{attrs:{searchFunction:e.placeSearch,searchKey:"id",searchLabel:"formatted_address"},on:{"close-search-modal":function(t){return e.toggleSearch(!1)},result:e.updateSearchValue}}):e._e()],1)},staticRenderFns:[]}},471:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"route-single-footer slds-is-relative slds-border_top slds-p-horizontal_medium slds-p-vertical_small"},[s("div",{staticClass:"slds-grid"},[s("div",{staticClass:"slds-p-right_x-small slds-col slds-size_1-of-2"},[s("button",{staticClass:"slds-button slds-button_neutral",on:{click:e.showAddStopModal}},[e._v(e._s(e.$Labels.MA_Add_Stop))])]),e._v(" "),s("div",{staticClass:"slds-p-left_x-small slds-col slds-size_1-of-2"},[e.routes__onMap?s("button",{staticClass:"slds-button slds-button_brand slds-grid slds-grid slds-grid_vertical-align-center slds-grid_align-center",on:{click:e.removeRoute}},[s("div",[e._v("\n                    Remove From Map\n                ")])]):s("button",{staticClass:"slds-button slds-button_brand slds-grid slds-grid slds-grid_vertical-align-center slds-grid_align-center",on:{click:e.optimizeRoute}},[e._m(0),e._v(" "),s("div",[e._v("\n                    "+e._s(e.getDirectionsText)+"\n                ")])])])]),e._v(" "),e.showAddStop?s("AddStopModal",{on:{close:e.closeAddStopModal}}):e._e()],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("span",{staticClass:"slds-button__icon slds-button__icon_left ma-icon ma-icon-route"})])}]}}});