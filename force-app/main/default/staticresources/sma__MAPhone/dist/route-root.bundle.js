webpackJsonp([11],{205:function(e,t,o){var s=o(13)(o(432),o(515),function(e){o(430)},"data-v-4749c4a5",null);e.exports=s.exports},430:function(e,t,o){var s=o(431);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);o(198)("00c6b973",s,!0)},431:function(e,t,o){(e.exports=o(197)(void 0)).push([e.i,"#routesWrap[data-v-4749c4a5]{height:100%}@media screen and (max-width:769px){#routesWrap[data-v-4749c4a5]{max-height:calc(100% - 57px)}}",""])},432:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=o(17),a=o.n(s),i=o(14),n=o.n(i),r=o(35),u=(o.n(r),o(59)),d=o.n(u),_=o(20),c=o.n(_),h=o(66),l=o.n(h),p=o(39),m=o.n(p),g=o(62),v=o.n(g),R=o(63),f=o.n(R);t.default={components:{RouteList:function(){return n()({},v()(),{component:o.e(21).then(o.bind(null,490)),error:f.a})},RouteSingleView:function(){return n()({},v()(),{component:o.e(20).then(o.bind(null,433)),error:f.a})},MASpinner:d.a},props:{recallMobileSaveState:{type:Boolean,default:!1}},data:function(){return{showRouteList:!0,routeIsNew:!0}},computed:n()({},Object(r.mapGetters)("mainNavBar",{layers__activeTab:"activeTab"}),Object(r.mapGetters)("routes",{routes__isLoading:"isLoading",routes__route:"route",routes__isInitialized:"isInitialized",routes__showSingleRoute:"showSingleRoute",routes__record:"record",store__unsavedChanges:"unsavedChanges",store__pendingChanges:"pendingChanges"})),watch:{layers__activeTab:function(e){"routes"!==e||this.routes__isInitialized||this.initRoutes()},store__pendingChanges:function(){this.store__pendingChanges?this.store__setUnsavedChanges(!0):this.store__setUnsavedChanges(!1)}},created:function(){this.$bus.$on("init-routes",this.initRoutes),this.$bus.$on("add-to-route",this.addToRouteHandler),this.$bus.$on("add-to-new-route",this.addToNewRouteHandler),this.$bus.$on("remove-route",this.route__removeRoute),this.$bus.$on("get-plotted-route",this.getPlottedRoute),this.$bus.$on("plot-route",this.plotRoute),this.$bus.$on("zoom-to-fit-route",this.zoomToFitRoute)},methods:n()({},Object(r.mapMutations)("routes",{routes__loadingToggle:"loadingToggle",routes__updateRouteOptions:"updateRouteOptions",routes__updateInitialized:"updateInitialized",routes__setIsTimeBased:"setIsTimeBased",routes__updateRouteView:"updateRouteView",store__setUnsavedChanges:"setUnsavedChanges"}),Object(r.mapMutations)("mainNavBar",{mainNavBar__updateActiveTab:"updateActiveTab"}),Object(r.mapActions)("routes",{routes__createNewRoute:"createNewRoute",routes__addWaypoints:"addWaypoints",route__removeRoute:"removeRoute"}),{initRoutes:function(){var e=this;return new a.a(function(t){e.routes__isInitialized?t():(e.routes__updateInitialized(),e.routes__loadingToggle(!0),e.routes__getRouteData().finally(function(){e.routes__loadingToggle(!1),t()}))})},zoomToFitRoute:function(e){if(this.routes__route.onMap){var t=!1;e.isEmpty()&&(t=!0),e.extend(this.routes__route.boundingbox.southwest),e.extend(this.routes__route.boundingbox.northeast),window.MA.map.fitBounds(e),t&&window.MA.map.setZoom(window.MA.map.getZoom()-1)}},addToRouteHandler:function(e){var t=this;this.initRoutes().then(function(){t.routes__showSingleRoute?t.addMarkersToRoute(e):t.routes__createNewRoute().then(t.addMarkersToRoute(e))})},addToNewRouteHandler:function(e){this.store__unsavedChanges?("routes"!==this.mainNavBar__activeTab&&this.mainNavBar__updateActiveTab("routes"),window.MAToastMessages.showError({message:"Please save your current route first.",timeOut:0,closeButton:!0})):this.initRoutes().then(this.routes__createNewRoute()).then(this.addMarkersToRoute(e))},addMarkersToRoute:function(e){this.route__removeRoute(),this.routes__updateRouteView("singleView");var t=[],o=!1;e.forEach(function(e){if(e.id=m()(),e.Name=e.title,e.Address__c=e.address||e.marker.address||e.marker.FormattedAddress_MA,e.Options__c=c.a.defaultOptions,e.marker&&e.marker.StartDateTime&&e.marker.EndDateTime){o=!0,e.marker.DurationInMinutes=(e.marker.EndDateTime-e.marker.StartDateTime)/1e3/60;var s=l.a.processEventData(e.marker);e=n()({},e,s)}t.push(e)}),o&&this.routes__setIsTimeBased(o),this.routes__addWaypoints(t)}},Object(r.mapActions)("routes",{routes__getRouteData:"getRouteData"}),{getPlottedRoute:function(e){e({Id:this.routes__record.Id,onMap:this.routes__route.onMap})},plotRoute:function(e){var t=this;this.initRoutes().then(function(){t.$bus.$emit("display-route",e)})}})}},515:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"main-panel view-panel sidebar-panel slds-scope",class:{in:"routes"===e.layers__activeTab},attrs:{id:"routesWrap"}},["routes"===e.layers__activeTab&&e.routes__isInitialized||e.recallMobileSaveState?o("div",{staticStyle:{height:"100%"}},[o("MASpinner",{directives:[{name:"show",rawName:"v-show",value:e.routes__isLoading,expression:"routes__isLoading"}]}),e._v(" "),o("RouteList"),e._v(" "),e.routes__showSingleRoute?o("RouteSingleView"):e._e()],1):e._e()])},staticRenderFns:[]}}});