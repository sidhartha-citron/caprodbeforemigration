webpackJsonp([35],{218:function(e,t,i){var o=i(13)(i(225),i(226),function(e){i(223)},"data-v-4c583d7f",null);e.exports=o.exports},222:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=new(function(e){return e&&e.__esModule?e:{default:e}}(i(94)).default);function n(e,t,i){var n=function o(n){i.context._isDestroyed?document.removeEventListener("click",o):e.contains(n.target)||e===n.target||t(n)};o.set(e,n),setTimeout(function(){return document.addEventListener("click",n)},0)}function s(e){var t=o.get(e);document.removeEventListener("click",t),o.delete(e)}t.default={bind:function(e,t,i){var o=t.arg,s=o.active,a=o.handler;if("function"!=typeof a)throw new Error("v-click-outside: missing required handler argument.");!0===s&&n(e,a,i)},update:function(e,t,i){var a=t.arg,d=a.active,c=a.handler;d&&!o.has(e)?n(e,c,i):!d&&o.has(e)&&s(e)},unbind:function(e){s(e)}}},223:function(e,t,i){var o=i(224);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);i(198)("49b356e9",o,!0)},224:function(e,t,i){(e.exports=i(197)(void 0)).push([e.i,".action-sheet_wrap[data-v-4c583d7f]{background-color:#fff;overflow:hidden!important;position:relative;z-index:110}.action-sheet_content[data-v-4c583d7f]{overflow-y:auto}.slds-scope .slds-button.slds-button_neutral.action-sheet_close-button[data-v-4c583d7f]{border-radius:0;box-shadow:0 -2px 4px #f9f9fa;padding:1rem 0;text-align:center!important;background:none;border:0;border-top:1px solid #dddbda;line-height:inherit;width:100%;vertical-align:top}.action-sheet_item[data-v-4c583d7f]{min-width:150px;border-bottom:1px solid #dddbda}.action-sheet_item[data-v-4c583d7f]:last-child{border-bottom:0}.action-sheet_selected-icon[data-v-4c583d7f]{display:none}.slds-is-selected .action-sheet_selected-icon[data-v-4c583d7f]{display:block}.action-sheet_mask[data-v-4c583d7f]{background-color:rgba(8,7,7,.6);height:100%;left:0;position:fixed;top:0;z-index:100;width:100%}.ma-action-sheet-item.header[data-v-4c583d7f]{background-color:#3083d3;color:#fff}.ma-top-bar-row .slds-button[data-v-4c583d7f]{color:#fff;font-size:20px}@media screen and (max-width:769px){.ma-action-sheet-wrap .footer[data-v-4c583d7f]{padding:25px!important}.ma-action-sheet-item[data-v-4c583d7f]{padding:16px 16px 16px 40px!important}}.ma-action-sheet-wrap[data-v-4c583d7f]{position:fixed;width:100%;height:100%;left:0;top:0;visibility:hidden;z-index:6000}.ma-action-sheet-wrap .ma-action-sheet[data-v-4c583d7f]{position:absolute;left:0;margin:0;bottom:0;width:100%;transform:translateY(100%);background-color:#fff;z-index:200;box-shadow:0 2px 3px 0 rgba(0,0,0,.16);padding-top:16px;border-radius:0}@media screen and (max-width:768px){.ma-action-sheet-wrap .ma-action-sheet .maActionSheetClose[data-v-4c583d7f]{text-align:center;width:100%;display:block;padding:16px;font-size:16px;line-height:1.5;color:#1589ee}}.ma-action-sheet-wrap .ma-action-sheet .ma-action-sheet-item[data-v-4c583d7f]{padding:16px;color:#0070d2;font-size:16px;line-height:1;text-align:center}.ma-action-sheet-wrap .ma-action-sheet .ma-action-sheet-close[data-v-4c583d7f]{padding:20px 16px;border-top:2px solid #dddbda;color:#0070d2;font-size:16px;line-height:1;text-align:center}.ma-action-sheet-wrap .ma-action-sheet .ma-action-sheet-close .ma-icon[data-v-4c583d7f]{height:16px;display:inline-block;margin-right:4px;transform:translateY(2px)}.ma-action-sheet-wrap#longPressActionSheet[data-v-4c583d7f]{height:100%;width:100%}.ma-action-sheet-wrap#longPressActionSheet .ma-action-sheet[data-v-4c583d7f]{padding-top:0;width:100%;bottom:0}.ma-action-sheet-wrap#longPressActionSheet .ma-action-sheet .ma-action-sheet-item[data-v-4c583d7f]{text-align:left;color:#3e3e3c;display:flex;align-items:center;border-bottom:1px solid #dddbda}@media screen and (min-width:769px){.ma-action-sheet-wrap#longPressActionSheet .ma-action-sheet .ma-action-sheet-item[data-v-4c583d7f]{justify-content:center}}.ma-action-sheet-wrap#longPressActionSheet .ma-action-sheet .ma-action-sheet-item .ma-icon[data-v-4c583d7f]{color:#fff;background-color:#1589ee;border-radius:100%;height:34px;width:34px;display:flex;justify-content:center;align-items:center;margin-right:8px;font-size:22px}.ma-action-sheet-wrap.in[data-v-4c583d7f]{visibility:visible}.ma-action-sheet-wrap.in .action-sheet-mask[data-v-4c583d7f]{opacity:1}.ma-action-sheet-wrap.in .ma-action-sheet[data-v-4c583d7f]{transform:translate(0)}@media screen and (min-width:769px){.ma-action-sheet-wrap[data-v-4c583d7f]{position:absolute;width:auto;height:auto;background-color:transparent}.ma-action-sheet-wrap .ma-action-sheet[data-v-4c583d7f]{width:auto;left:auto;bottom:auto;border-radius:4px;transform:translate(0);opacity:0;text-align:left;min-width:250px;border:1px solid #dddbda}.ma-action-sheet-wrap .ma-action-sheet .ma-action-sheet-item[data-v-4c583d7f]{text-align:left}.ma-action-sheet-wrap .ma-action-sheet .ma-action-sheet-close[data-v-4c583d7f]{display:none}.ma-action-sheet-wrap.in .ma-action-sheet[data-v-4c583d7f]{opacity:1;transform:translate(0)}}",""])},225:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(222),n=i.n(o),s=window.$;t.default={name:"ActionSheet",directives:{"click-outside":n.a},props:{options:{type:Array,required:!0},doDetach:{type:Boolean,default:!0},labelKey:{type:String,default:"label"},buttonText:{type:String,default:""},buttonIcon:{type:String,default:""},hideOverride:{type:Boolean,default:!1},selectedItems:{type:Array,default:function(){return[]}},buttonType:{type:String,default:""}},data:function(){return{container:null,showOptions:!1,styleObject:{},window:{height:0,width:0},uid:"action-sheet"}},computed:{isPhone:function(){return this.window.width<769},computedIcon:function(){var e="";return""!==this.buttonIcon?e=this.buttonIcon:""===this.buttonText&&(e="ma-icon-threedots-vertical"),e},actionSheetClickOutsideOptions:function(){return{active:this.showOptions,handler:this.hideActionSheet}}},watch:{isPhone:function(){this.showOptions=!1}},created:function(){window.addEventListener("resize",this.handleResize),this.handleResize()},destroyed:function(){window.removeEventListener("resize",this.handleResize),this.hideActionSheet()},methods:{handleResize:function(){this.window.width=window.innerWidth,this.window.height=window.innerHeight},returnItem:function(e){e.isHeader||(this.$emit("select",e),this.hideActionSheet())},hideActionSheet:function(){this.showOptions=!1,this.container&&(this.container.remove(),this.container=null)},detach:function(){if(this.$refs.button){var e=document.querySelector(".slds-scope."+this.uid);try{e.remove()}catch(e){}var t=this.$refs.button.getBoundingClientRect();this.container=document.createElement("div"),this.container.className="slds-scope "+this.uid,this.container.appendChild(this.$refs.actions),document.body.appendChild(this.container),this.styleObject={top:t.top+this.$refs.button.clientHeight+s(window).scrollTop()+"px",left:t.left+s(window).scrollLeft()+"px","max-height":"300px"}}},adjustForClipping:function(){var e=this.$refs.actions.getBoundingClientRect(),t=void 0;if(t=document.documentElement.clientHeight-window.innerHeight<=0?document.documentElement.clientHeight:window.innerHeight-this.getScrollbarWidth(),e.x<0)this.styleObject.left=this.$refs.actions.offsetLeft+Math.abs(e.x)+"px";else if(e.left+e.width>document.documentElement.clientWidth){var i=e.left+e.width-document.documentElement.clientWidth-s(window).scrollLeft();this.styleObject.left=e.left-i+"px"}var o=this.$refs.actions.scrollHeight,n=s(window).scrollTop();if(this.styleObject["max-height"]="300px",e.top+o>t){var a=e.top+o-n-t;this.$bus.$emit("ma-modal-scroll-by",a),this.styleObject.top=e.top-a+"px"}},disableClick:function(e){e.stopPropagation(),e.preventDefault()},openActionSheet:function(){var e=this;this.showOptions=!0,this.doDetach&&this.detach(),this.$nextTick(function(){e.doDetach&&e.adjustForClipping(),e.options.forEach(function(t,i){var o=t,n=e.$refs.optionItem[i];o.isHeader&&n.addEventListener("click",e.disableClick,!0)})})}}}},226:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"click-outside",rawName:"v-click-outside:[actionSheetClickOutsideOptions]",arg:e.actionSheetClickOutsideOptions}],staticClass:"action-sheet-wrapper slds-scope"},[i("div",{ref:"button",staticClass:"slds-grid slds-grid_vertical-align-center",on:{click:e.openActionSheet}},[i("div",{staticClass:"slds-button slds-col slds-truncate"},[e._v(e._s(e._f("decode")(e.buttonText)))]),e._v(" "),""!==e.computedIcon?i("div",[i("button",{staticClass:"slds-button slds-button_icon slds-button_icon-container",class:[e.buttonType]},[i("span",{staticClass:"slds-button__icon ma-icon",class:[e.computedIcon]})])]):e._e()]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.showOptions,expression:"showOptions"}],ref:"actions",staticClass:"ma-action-sheet-wrap in slds-grid slds-grid_vertical slds-grid_align-end",style:e.isPhone?{}:e.styleObject},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isPhone,expression:"isPhone"}],staticClass:"action-sheet_mask",on:{click:e.hideActionSheet}}),e._v(" "),i("div",{staticClass:"action-sheet_wrap slds-grid slds-grid_vertical"},[i("div",{staticClass:"action-sheet_content slds-scrollable"},e._l(e.options,function(t,o){return i("div",{key:o,ref:"optionItem",refInFor:!0,staticClass:"action-sheet_item slds-grid slds-p-around_medium",class:{"header slds-text-title_caps slds-section__title slds-theme--shade":t.isHeader,"slds-is-selected":e.selectedItems.includes(t.id)},on:{click:function(i){return e.returnItem(t)}}},[e._m(0,!0),e._v(" "),i("div",{staticClass:"slds-col"},[i("span",{staticStyle:{"word-break":"break-word"}},[e._v(e._s(e._f("decode")(t[e.labelKey])))])])])}),0),e._v(" "),i("div",{staticClass:"slds-button slds-button_neutral action-sheet_close-button",on:{click:e.hideActionSheet}},[e._v("\n                "+e._s(e._f("decode")(e.$Labels.MA_Close))+"\n            ")])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"action-sheet_selected-icon slds-p-right_medium"},[t("span",{staticClass:"slds-icon slds-icon_x-small ma-icon ma-icon-check"})])}]}},757:function(e,t,i){var o=i(13)(i(760),i(764),function(e){i(758)},null,null);e.exports=o.exports},758:function(e,t,i){var o=i(759);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);i(198)("4b8880ca",o,!0)},759:function(e,t,i){(e.exports=i(197)(void 0)).push([e.i,"#legendBodyInner .legend-body-scrolling-body{height:calc(100% - 167px)}@media screen and (max-width:768px){#legendBodyInner .legend-body-scrolling-body{height:calc(100% - 110px)}}",""])},760:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(61),n=i.n(o),s=i(14),a=i.n(s),d=i(218),c=i.n(d),l=i(35),r=(i.n(l),i(761)),h=i.n(r),u=window.jQuery;t.default={components:{ActionSheet:c.a,LegendRow:h.a},props:{selectedQuery:{type:String,required:!0},isLoading:{type:Boolean,default:!1}},data:function(){return{toggleRows:!1,legendRows:{},legendField:"",showAllRows:!1,legendRowSelections:{},legendRowTimeout:null}},computed:a()({},Object(l.mapGetters)("mainNavBar",{mainNavBar__listView:"listView"}),{showText:function(){var e=this.$Labels.MA_Show_All;return this.showAllRows&&(e=this.$Labels.MA_Show_Less),e}}),watch:{selectedQuery:function(){this.build()}},mounted:function(){""!==this.selectedQuery&&this.build()},methods:{toggleAllRows:function(){var e=this,t=n()(this.legendRows);this.legendRowSelections={},t.forEach(function(t){e.legendRowSelections[t]=e.toggleRows}),this.peformRowToggle()},build:function(){this.clearLegend(),this.updateLegendRows(),this.updateSelectAllCheckbox()},clearLegend:function(){this.legendRowSelections={},this.legendRows=[]},updateLegendRows:function(){var e=u('#PlottedQueriesTable .PlottedRowUnit[qid="'+this.selectedQuery+'"]').data()||{},t=e.legendInfo,i=void 0===t?{}:t,o=e.tooltips,n=void 0===o?[]:o;this.legendRows=i,this.legendField=this.getLegendFieldValue(n)},getLegendFieldValue:function(e){for(var t="",i=0;i<e.length;i++){var o=e[i],n=o.TooltipType,s=void 0===n?"":n,a=o.FieldLabel;"Color"===s&&(t=a)}return t},toggleRowVisibility:function(){this.showAllRows=!this.showAllRows},toggleRow:function(e){var t=this;clearTimeout(this.legendRowTimeout),this.legendRowTimeout=null,this.legendRowSelections[e.legendId]=e.active,this.legendRowTimeout=setTimeout(function(){t.peformRowToggle()},250)},peformRowToggle:function(){var e=this,t=u('#PlottedQueriesTable .PlottedRowUnit[qid="'+this.selectedQuery+'"]');this.$emit("update:isLoading",!0);var i={plottedQuery:t,rows:this.legendRowSelections};window.MAPlotting.toggleLegendRow(i,function(){window.MAPlotting.updateQueryInfo(t,function(){e.build(),window.VueEventBus.$emit("refresh-list-view"),e.$emit("update:isLoading",!1),t.removeClass("loading"),t.find(".queryLoader").hide(),t.find(".queryIcon ").show()})})},updateSelectAllCheckbox:function(){var e=this,t=n()(this.legendRows),i=0;t.forEach(function(t){e.legendRows[t].active&&i++}),this.toggleRows=i===t.length}}}},761:function(e,t,i){var o=i(13)(i(762),i(763),null,null,null);e.exports=o.exports},762:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{legendInfo:{type:Object,required:!0},showAllRows:{type:Boolean,default:!1}},computed:{isVisible:function(){var e=!1;return!0===this.showAllRows?e=!0:this.legendInfo.totalmarkers>0&&(e=!0),e}},methods:{toggleRow:function(e){this.$emit("toggle-row",e)}}}},763:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.isVisible,expression:"isVisible"}],staticClass:"legend-item legend-row ma-form-control-wrap ma-checkbox-wrap flex-horizontal",staticStyle:{display:"flex"},attrs:{"data-id":e.legendInfo.legendId}},[i("div",{staticClass:"flex-grow-1"},[i("label",{staticClass:"ma-checkbox"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.legendInfo.active,expression:"legendInfo.active"}],staticClass:"legend-checkbox",attrs:{name:"checkbox",type:"checkbox"},domProps:{checked:Array.isArray(e.legendInfo.active)?e._i(e.legendInfo.active,null)>-1:e.legendInfo.active},on:{change:[function(t){var i=e.legendInfo.active,o=t.target,n=!!o.checked;if(Array.isArray(i)){var s=e._i(i,null);o.checked?s<0&&e.$set(e.legendInfo,"active",i.concat([null])):s>-1&&e.$set(e.legendInfo,"active",i.slice(0,s).concat(i.slice(s+1)))}else e.$set(e.legendInfo,"active",n)},function(t){return e.toggleRow(e.legendInfo)}]}}),e._v(" "),i("span",{staticClass:"ma-checkbox-faux"}),e._v(" "),i("span",{staticClass:"ma-checkbox-label"},[e._v(e._s(e._f("decode")(e.legendInfo.label)))])])]),e._v(" "),i("div",{staticClass:"legend-count"},[i("span",{staticClass:"visiblemarkers"},[e._v(e._s(e._f("decode")(e.legendInfo.count)))]),e._v(" "),i("span",{staticClass:"of"},[e._v(e._s(e._f("decode")(e.$Labels.MA_of)))]),e._v(" "),i("span",{staticClass:"totalmarkers"},[e._v(e._s(e._f("decode")(e.legendInfo.totalmarkers)))])]),e._v(" "),i("div",{staticClass:"legend-marker"},[e.legendInfo.icon.indexOf("/services/images/marker")>-1||e.legendInfo.icon.indexOf("servlet.FileDownload")>-1?i("img",{staticClass:"legend-image",staticStyle:{height:"20px","max-width":"30px"},attrs:{src:e.legendInfo.icon}}):i("span",{domProps:{innerHTML:e._s(e.legendInfo.icon)}})])])},staticRenderFns:[]}},764:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"qidLocation ma-view-body",attrs:{id:"legendBody"}},[i("div",{attrs:{id:"legendBodyInner"}},[i("div",{staticClass:"legend-body-fixed-header",staticStyle:{position:"relative"}},[i("div",{staticClass:"ma-divider compact"}),e._v(" "),i("div",{staticClass:"legend-item ma-form-control-wrap ma-checkbox-wrap"},[i("label",{staticClass:"ma-checkbox",staticStyle:{"min-height":"40px"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.toggleRows,expression:"toggleRows"}],attrs:{name:"checkbox",type:"checkbox",checked:"checked"},domProps:{checked:Array.isArray(e.toggleRows)?e._i(e.toggleRows,null)>-1:e.toggleRows},on:{change:[function(t){var i=e.toggleRows,o=t.target,n=!!o.checked;if(Array.isArray(i)){var s=e._i(i,null);o.checked?s<0&&(e.toggleRows=i.concat([null])):s>-1&&(e.toggleRows=i.slice(0,s).concat(i.slice(s+1)))}else e.toggleRows=n},e.toggleAllRows]}}),e._v(" "),i("span",{staticClass:"ma-checkbox-faux"}),e._v(" "),""!==e.legendField?i("span",{staticClass:"ma-checkbox-label queryColorField"},[i("strong",[e._v(e._s(e.$Labels.MA_Field)+":")]),e._v(" "+e._s(e._f("decode")(e.legendField)))]):e._e()])]),e._v(" "),i("div",{staticStyle:{position:"absolute",top:"2px",right:"0px"},on:{click:e.toggleRowVisibility}},[i("span",{staticClass:"float-left ma-button compact legend-moreless-text",staticStyle:{padding:"10px 20px 0px"}},[i("span",{staticClass:"moreless-text"},[e._v(e._s(e._f("decode")(e.showText)))])])])]),e._v(" "),i("div",{staticClass:"legend-body-scrolling-body momentum-scrolling-y slds-scrollable"},[i("div",{staticClass:"legend-wrap"},e._l(e.legendRows,function(t,o){return i("LegendRow",{key:o,attrs:{legendInfo:t,showAllRows:e.showAllRows},on:{"toggle-row":e.toggleRow}})}),1)])])])},staticRenderFns:[]}}});