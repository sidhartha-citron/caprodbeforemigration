function getOpener(){var a=null;if(window.dialogArguments){a=window.dialogArguments}else{if(window.opener){a=window.opener}}return a}function setSelectionRange(b,c,d){if(b.setSelectionRange){b.focus();b.setSelectionRange(c,d)}else{if(b.createTextRange){var a=b.createTextRange();a.collapse(true);a.moveEnd("character",d);a.moveStart("character",c);a.select()}}}function getUrlParameter(d){d=d.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c="[\\?&]"+d+"=([^&#]*)";var b=new RegExp(c);var a=b.exec(window.location.href);if(a==null){return""}else{return a[1]}}Ext.onReady(function(){getOpener().setIsPopUpDisplayed(true);var b=getOpener().document.getElementById(noteFldId);var a=document.getElementById("noteEditor");if(b!=null&&b!="undefined"&&typeof(b)!=" undefined"&&a!=null&&a!="undefined"&&typeof(a)!="undefined"){a.value=b.value;if(Ext.isIE7||Ext.isIE8){a.rows="20";a.cols="80"}else{if(Ext.isIE&&!Ext.isIE7&&!Ext.isIE8){a.rows="29";a.cols="80"}else{if(Ext.isChrome){a.rows="27";a.cols="200"}else{a.rows="25";a.cols="100"}}}}if(from.toLowerCase()!="textarea"){a.title=TooltipNote}a.focus();var c=a.value.length;setSelectionRange(a,c,c);if(getUrlParameter("from")=="textarea"){document.getElementById("noteEditor").className="clsTextArea"}});window.onbeforeunload=function(a){getOpener().setIsPopUpDisplayed(false)};function CopyTextInParent(){var b=getOpener().document.getElementById(noteFldId);var a=document.getElementById("noteEditor");if(a!=null&&a.value!=null&&a.value.length>VALID_LENGTH){a.value=a.value.substr(0,VALID_LENGTH)}if(b!=null&&b!="undefined"&&typeof(b)!=" undefined"&&a!=null&&a!="undefined"&&typeof(a)!="undefined"){if(b.value!=a.value&&getUrlParameter("from").toLowerCase()=="textarea"){if(getOpener().setTabUnsavedChanges!=undefined){getOpener().setTabUnsavedChanges()}}var c=getOpener();b.value=a.value;if(c&&c.currentConsole=="Incident"){if(c.checkForListeners(c.orgNamespace+"incidentDescription__c")&&c.showSmartSuggestions){c.smartSuggestionsHandler()}}getOpener().renderAddNoteButton()}b.focus();window.close()}function limitText(b,a){if(b.value.length>a){b.value=b.value.substring(0,a)}};