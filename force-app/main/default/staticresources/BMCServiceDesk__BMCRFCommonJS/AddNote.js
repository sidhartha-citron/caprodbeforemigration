function validateDuration(d){if(d==null||d=="undefined"||d.length>0){d=document.getElementById(durationCompId).value}if(d!=""){var b=d.split(":");if(b[0].length==1){d="0"+d;document.getElementById(durationCompId).value=d;durationErrorFlg=0}var a=/^([0-9]{2}):([0-9]{2})$/;var c=d.match(a);if(c==null){durationErrorFlg=1;Ext.MessageBox.show({msg:durationErrorLabel,buttons:Ext.MessageBox.OK});document.getElementById(durationCompId).value="00:00"}}}function renderAddNoteAfterClose(){var b=document.getElementById(notesCompId);var c=document.getElementById(durationCompId);if(b!=null){b.disabled=true;b.className="clsInputTextAreaDisabledNote";var a=document.getElementById("addNoteBtn");a.disabled=true;a.className="AddButtonOff"}if(c!=null&&c!=undefined){c.disabled=true;c.className="clsDurationTextBoxDisable"}}function disableAddNote(){var b=document.getElementById(notesCompId).value;if(!actionHideDuration){var c=document.getElementById(durationCompId).value;validateDuration(c)}if(durationErrorFlg!=1){if(b.length>32000){Ext.MessageBox.show({msg:noteLabel+": "+overflowLabel,buttons:Ext.MessageBox.OK})}else{var a=document.getElementById("addNoteBtn");a.disabled=true;a.className="AddButtonOff";saveNote()}}durationErrorFlg=0}function renderNote(){if(errormsg==durationErrorLabel){Ext.MessageBox.show({msg:errormsg,buttons:Ext.MessageBox.OK})}else{var a=document.getElementById(notesCompId);if(a!=null){a.disabled=false;a.className="clsInputTextAreaNote";a.value="";if(insideNote==false){clickedOnce=true;handleResetChange()}}var b=document.getElementById(durationCompId);if(b!=null&&b!=undefined){b.disabled=false;b.value="00:00"}}}function renderAddNoteButton(){var b=document.getElementById(notesCompId);var d=document.getElementById(durationCompId);if(b!=null){var a=document.getElementById("addNoteBtn");var c=b.value.trim();if(recordId==null||recordId==""||c==null||c==""||recordState=="false"){a.disabled=true;a.className="AddButtonOff"}else{a.disabled=false;a.className="AddButton"}if(recordId==null||recordId==""||recordState=="false"){b.disabled=true;b.className="clsInputTextAreaDisabledNote";if(d!=null&&d!=undefined){d.disabled=true;d.className="clsDurationTextBoxDisable"}}else{b.disabled=false;b.className="clsInputTextAreaNote";if(d!=null&&d!=undefined){d.disabled=false;d.className="clsDurationTextBox"}}}}function renderOnPaste(){window.setInterval("renderAddNoteButton();",100)}Ext.onReady(function(){if(recordId==null||recordId==""||recordState=="false"){enableDisableAddNote(true)}else{enableDisableAddNote(false);var b=document.getElementById("addNoteBtn");b.disabled=true;b.className="AddButtonOff"}var a=document.getElementById(notesCompId);a.onpaste=renderOnPaste});function enableDisableAddNote(c){var b=document.getElementById(notesCompId);if(b!=null&&b!="undefined"){b.disabled=c;b.className=!c?"clsInputTextAreaNote":"clsInputTextAreaDisabledNote"}var e=document.getElementById(durationCompId);if(e!=null&&e!="undefined"){e.disabled=c;e.className=!c?"clsDurationTextBox":"clsDurationTextBoxDisable";e.value="00:00"}var d=document.getElementById("inputTxtAreaButton");if(d!=null&&d!="undefined"){d.disabled=c}var a=document.getElementById("addNoteBtn");if(a!=null&&a!="undefined"){if(b!=null&&(b.val==null||b.val=="")){c=true}a.disabled=c;a.className=!c?"clsDurationTextBox":"clsDurationTextBoxDisable"}}function refreshRelatedListAfterAddNote(){if(Fromconsole=="true"){window.opener.refreshRelatedLists();window.close()}else{if(objectName=="Projected_Service_Outage__c"){window.close()}else{var a=window.opener.parent;a.location.href="/"+recordId;window.close()}}}function refreshPage(){if(objectName=="Incident__c"||objectName=="Task__c"||objectName=="Change_Request__c"||objectName=="Problem__c"||objectName=="Release__c"||objectName=="Broadcasts__c"||objectName=="Projected_Service_Outage__c"){if(Fromconsole!=""){refreshRelatedListAfterAddNote()}else{if(objectName=="Incident__c"){refreshIncident()}else{if(objectName=="Task__c"){refreshTask()}else{if(objectName=="Change_Request__c"){refreshChangeRequest()}else{if(objectName=="Problem__c"){refreshProblem()}else{if(objectName=="Release__c"){refreshRelease()}else{if(objectName=="Broadcasts__c"){refreshbroadcast()}}}}}}}}}var isPopUpDisplayed=false;var AddNoteTextEditor;var left=300;var top=300;function showTextEditor(a){if(!isPopUpDisplayed&&recordId!=null&&recordId!=""&&recordState!="false"){if(!AddNoteTextEditor||AddNoteTextEditor.closed){if(window.showModalDialog&&(Ext.isIE7||Ext.isIE8)){AddNoteTextEditor=window.showModalDialog("/apex/AddNoteTextEditor?noteFldId="+a,window,"toolbar=no;directories=no;menubar=no;scrollbars=no;location=no;titlebar=no;dialogWidth:800px;dialogHeight:500px;left=350;top=250;status=no")}else{AddNoteTextEditor=window.open("/apex/AddNoteTextEditor?noteFldId="+a,"_blank","location=1,status=1,scrollbars=1,width=800,height=500,top=100, left=300")}}}if(AddNoteTextEditor!=""&&typeof(AddNoteTextEditor)!="undefined"&&AddNoteTextEditor.focus){AddNoteTextEditor.focus()}}function setIsPopUpDisplayed(a){isPopUpDisplayed=a}function validateCustomeRules(a){if(a!=null&&a!=""&&a!="undefined"){Ext.MessageBox.show({msg:a,buttons:Ext.MessageBox.OK});renderAddNoteButton()}else{refreshPage()}};