"use strict";(globalThis.webpackChunkmaps_desktop=globalThis.webpackChunkmaps_desktop||[]).push([[4490],{9660:(e,a,t)=>{t.r(a),t.d(a,{default:()=>n});var s=t(2766),o=t(5602),d=t(5908),i=t.n(d),l=t(257);const c={state:()=>({callouts:0,isLoading:!1,dataSources:[],dataSource:{label:"",fields:[],id:""},baseObject:{apiName:"",label:""},availableSFDCObject:[],sfdcMetaData:{ready:!1,fieldSets:[],fields:{},objectAPIName:"",recordTypes:[]},savedSFDCRecord:{maps__Type__c:"",Id:"",maps__Settings__c:"{}"},fieldSetData:[],fieldMapData:{}}),mutations:{loadingToggle(e,a){"boolean"==typeof a?a?(e.callouts+=1,e.isLoading=!0):(e.callouts-=1,e.callouts<=0&&(e.isLoading=!1,e.callouts=0)):(e.callouts-=1,e.isLoading=!1)},resetDataLayerSetup(e){e.dataSource.label="",e.dataSource.fields=[],e.dataSource.id="",e.baseObject.label="",e.baseObject.apiName="",e.sfdcMetaData.ready=!1,e.sfdcMetaData.fieldSets=[],e.sfdcMetaData.fields={},e.sfdcMetaData.objectAPIName="",e.sfdcMetaData.recordTypes=[],e.savedSFDCRecord.maps__Type__c="",e.savedSFDCRecord.Id="",e.savedSFDCRecord.maps__Settings__c="{}",e.fieldSetData=[]},updateDataSource(e,a){e.dataSource.label=a.label,e.dataSource.fields=a.fields,e.dataSource.id=a.id},updateDataSources(e,a){e.dataSources=a},updateDataSourceFields(e,a){e.dataSource.fields=a},updateAvailableObjects(e,a){e.availableSFDCObject=a},updateBaseObject(e,a){e.baseObject.label=a.label,e.baseObject.apiName=a.name,e.sfdcMetaData.ready=!1,e.sfdcMetaData.fieldSets=[],e.sfdcMetaData.fields={},e.sfdcMetaData.objectAPIName=a.name,e.sfdcMetaData.recordTypes=[],e.fieldSetData=[]},updateSFDCMetaData(e,a){const{fields:t={},fieldSets:s=[],recordTypes:o=[],objectAPIName:d=""}=a;e.sfdcMetaData.fields=t,e.sfdcMetaData.fieldSets=s,e.sfdcMetaData.recordTypes=o,e.sfdcMetaData.objectAPIName=d,e.sfdcMetaData.ready=!0},setSavedC2CData(e,a){e.savedSFDCRecord=a},updateFieldSetData(e,a){e.fieldSetData=a},updateFieldMapData(e,a){e.fieldMapData=a}},actions:{getDataLayerSourceData:(e,{source:a=null,fields:t=!1})=>new Promise(((e,s)=>{const o={fields:t,source:a||void 0,orgId:window.MASystem.MergeFields.OrganizationId};(new l.Z).setAction("maps.RemoteFunctions.MapAnythingIORequest").setErrorHandler((e=>{console.warn(e),s(new Error("Unable to get latest data for this data layer."))})).invoke([{method:"get",action:"sources",subType:"data",version:"1"},o],(a=>{const{success:t=!1,data:o={}}=a;t?e(o):s(new Error("Unable to get latest data for this data layer."))}),{buffer:!1,escape:!1})})),reset({commit:e}){e("reset")}}},r={components:{DataLayerSelection:()=>({...(0,o.YH)(),component:Promise.all([t.e(581),t.e(4485)]).then(t.bind(t,5882))}),BaseObjectSelection:()=>({...(0,o.YH)(),component:Promise.all([t.e(581),t.e(4485)]).then(t.bind(t,1788))}),FieldSetSelection:()=>({...(0,o.YH)(),component:Promise.all([t.e(581),t.e(4485)]).then(t.bind(t,5656))}),FieldMapSelection:()=>({...(0,o.YH)(),component:Promise.all([t.e(581),t.e(4485)]).then(t.bind(t,9456))}),SaveDataLayer:()=>({...(0,o.YH)(),component:t.e(9517).then(t.bind(t,1558))}),Spinner:s.$j},data:()=>({showSelectMessage:!1,toast:{type:"error",message:"",active:!1},fieldSetValid:!1}),computed:{...(0,d.mapState)(["dataSource","sfdcMetaData","savedSFDCRecord","isLoading","callouts"]),showSFDCObjectSelection(){return this.dataSource.id},showFieldSetInformation(){return this.sfdcMetaData.ready&&this.savedSFDCRecord.ready},showFieldMappingSection(){const{fields:e=[]}=this.dataSource;return this.fieldSetValid&&this.showFieldSetInformation&&e.length>0}},beforeCreate(){this.$store=new(i().Store)(c)},methods:{showToastMessage({type:e="error",message:a=""}){this.$root.$emit("toast",{message:a,state:e})}}},n=(0,t(1900).Z)(r,(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"slds-p-around_medium",staticStyle:{position:"relative"},attrs:{id:"dataLayerWrapper"}},[t("Spinner",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}]}),e._v(" "),t("DataLayerSelection",{attrs:{dataSource:e.dataSource},on:{"update:dataSource":function(a){e.dataSource=a},"update:data-source":function(a){e.dataSource=a},udpateToast:e.showToastMessage}}),e._v(" "),e.showSFDCObjectSelection?t("BaseObjectSelection",{on:{udpateToast:e.showToastMessage}}):e._e(),e._v(" "),e.showFieldSetInformation?t("FieldSetSelection",{attrs:{fieldSetValid:e.fieldSetValid},on:{"update:fieldSetValid":function(a){e.fieldSetValid=a},"update:field-set-valid":function(a){e.fieldSetValid=a},udpateToast:e.showToastMessage}}):e._e(),e._v(" "),e.showFieldMappingSection?t("FieldMapSelection",{on:{udpateToast:e.showToastMessage}}):e._e(),e._v(" "),e.showFieldMappingSection?t("SaveDataLayer",{on:{udpateToast:e.showToastMessage}}):e._e()],1)}),[],!1,null,null,null).exports}}]);