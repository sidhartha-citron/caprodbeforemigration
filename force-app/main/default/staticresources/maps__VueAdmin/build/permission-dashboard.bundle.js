"use strict";(globalThis.webpackChunkmaps_desktop=globalThis.webpackChunkmaps_desktop||[]).push([[7718],{2417:(s,t,e)=>{e.r(t),e.d(t,{default:()=>n});var i=e(5908),a=e(3088),o=e(2766);const{MAToastMessages:r}=window,l={components:{ActionMenu:o.PC,ActionMenuItem:o.F9,Modal:o.u_,Spinner:o.$j},data:()=>({isLoading:!1}),computed:{...(0,i.mapState)({store__toggle:"toggle",store__settingsGroup:"settingsGroup",store__config:"config"}),filteredGroups(){let s=this.store__config.groups;return this.store__config.filterTerm&&(s=this.store__config.groups.filter((s=>s.Name.toLowerCase().includes(this.store__config.filterTerm.toLowerCase())))),s}},async created(){await this.getAllSettingsGroups();const s=(0,a.Qb)();s.recordId&&this.$parent.populatePermissionGroup(s.recordId,"edit")},methods:{...(0,i.mapMutations)({store__setSettingsGroup:"setSettingsGroup"}),async getAllSettingsGroups(){this.isLoading=!0;try{const{groups:s,success:t,error:e}=await this.$remote("maps.UserAJAXResources.GetAllSettingsGroups",[]);t?this.store__config.groups=s.map((s=>({...s,LastModifiedDate:this.$moment(s.LastModifiedDate).format("MMMM Do, YYYY"),Id:s.Id?s.Id:"defaultSettings"}))):(r.showError({message:"Error. Could not get Permission Groups",timeOut:6e3}),console.error(e))}catch(s){r.showError({message:`Error. ${s.event.message}.`,timeOut:6e3}),console.error(s)}finally{this.isLoading=!1}},openDeletePermissionModal(s){this.store__config.groupIdToDelete=s,this.store__config.showDeleteWarning=!0},closeDeletePermissionModal(){this.store__config.showDeleteWarning=!1,this.store__config.groupIdToDelete=null},async deletePermissionGroup(s){this.isLoading=!0;try{const{success:t,error:e}=await this.$remote("maps.UserAJAXResources.DeleteSettingsGroup",[s]);t?(r.showSuccess({message:"Permission Group Deleted",timeOut:6e3}),await this.getAllSettingsGroups()):(r.showError({message:"Error Deleting Permission Group.",timeOut:6e3}),console.error(e))}catch(s){r.showError({message:`Error. ${s.event.message}.`,timeOut:6e3}),console.error(s)}finally{this.store__toggle.showPermissionGroupView=!1,this.isLoading=!1,this.store__config.showDeleteWarning=!1,this.store__config.groupIdToDelete=null}}}},n=(0,e(1900).Z)(l,(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",[s.store__config.showDeleteWarning?e("Modal",{attrs:{title:"Delete Permission Group",doDetach:!0,hideCloseButton:!0,closeLabel:""},on:{close:s.closeDeletePermissionModal}},[e("div",{staticClass:"slds-text-body_regular slds-var-p-around_small",attrs:{slot:"content"},slot:"content"},[e("p",[s._v("Are you sure you want to delete this Permission Group?")]),s._v(" "),e("br"),s._v(" "),e("p",[s._v("When deleting a Permission Group all Assignments made will be deleted as well. The Users in the deleted Permission Group will then return to the Default Group.")]),s._v(" "),e("br"),s._v(" "),e("p",[s._v("A user can only be assigned to 1 User-based Permission Group and/or 1 Profile-based Permission Group at a given time.")])]),s._v(" "),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("button",{staticClass:"slds-button slds-button_neutral",on:{click:s.closeDeletePermissionModal}},[s._v("\n                Cancel\n            ")]),s._v(" "),e("button",{staticClass:"slds-button slds-button_destructive",on:{click:function(t){return s.deletePermissionGroup(s.store__config.groupIdToDelete)}}},[s._v("\n                Delete\n            ")])])]):s._e(),s._v(" "),e("div",{staticClass:"slds-card slds-grid slds-grid_vertical"},[e("Spinner",{directives:[{name:"show",rawName:"v-show",value:s.isLoading,expression:"isLoading"}]}),s._v(" "),e("div",{staticClass:"slds-grid"},[e("table",{staticClass:"slds-table slds-table_bordered slds-table_fixed-layout slds-table_resizable-cols",attrs:{role:"grid"}},[e("thead",[e("tr",{staticClass:"slds-line-height_reset"},[e("th",{staticClass:"slds-text-align_right",staticStyle:{width:"3.25rem"},attrs:{scope:"col"}}),s._v(" "),e("th",{attrs:{"aria-label":"Permission Groups","aria-sort":"none",scope:"col"}},[e("a",{staticClass:"slds-th__action slds-text-link_reset",attrs:{href:"javascript:void(0);",role:"button",tabindex:"-1"}},[e("span",{staticClass:"slds-assistive-text"},[s._v(" "+s._s(s.$Labels.MA_Sort_By)+" ")]),s._v(" "),e("div",{staticClass:"slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate"},[e("span",{staticClass:"slds-truncate",attrs:{title:"Permission Group"}},[s._v(" "+s._s(s.$Labels.Permission_Group))]),s._v(" "),e("Icon",{staticClass:"slds-icon_container slds-icon-utility-arrowdown",attrs:{category:"utility",name:"arrowdown",iconClass:["slds-icon","slds-icon-text-default","slds-is-sortable__icon"]}})],1)])]),s._v(" "),e("th",{attrs:{"aria-label":"Description","aria-sort":"none",scope:"col"}},[e("a",{staticClass:"slds-th__action slds-text-link_reset",attrs:{href:"javascript:void(0);",role:"button",tabindex:"-1"}},[e("span",{staticClass:"slds-assistive-text"},[s._v(" "+s._s(s.$Labels.MA_Sort_By)+" ")]),s._v(" "),e("div",{staticClass:"slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate"},[e("span",{staticClass:"slds-truncate",attrs:{title:"Description"}},[s._v(" "+s._s(s.$Labels.MA_Description)+" ")]),s._v(" "),e("Icon",{staticClass:"slds-icon_container slds-icon-utility-arrowdown",attrs:{category:"utility",name:"arrowdown",iconClass:["slds-icon","slds-icon-text-default","slds-is-sortable__icon"]}})],1)])]),s._v(" "),e("th",{attrs:{"aria-label":"Created By","aria-sort":"none",scope:"col"}},[e("a",{staticClass:"slds-th__action slds-text-link_reset",attrs:{href:"javascript:void(0);",role:"button",tabindex:"-1"}},[e("span",{staticClass:"slds-assistive-text"},[s._v(" "+s._s(s.$Labels.MA_Sort_By)+" ")]),s._v(" "),e("div",{staticClass:"slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate"},[e("span",{staticClass:"slds-truncate",attrs:{title:"Created By"}},[s._v(" "+s._s(s.$Labels.Created_By)+" ")]),s._v(" "),e("Icon",{staticClass:"slds-icon_container slds-icon-utility-arrowdown",attrs:{category:"utility",name:"arrowdown",iconClass:["slds-icon","slds-icon-text-default","slds-is-sortable__icon"]}})],1)])]),s._v(" "),e("th",{attrs:{"aria-label":s.$Labels.lastModifiedDate,"aria-sort":"none",scope:"col"}},[e("a",{staticClass:"slds-th__action slds-text-link_reset",attrs:{href:"javascript:void(0);",role:"button",tabindex:"-1"}},[e("span",{staticClass:"slds-assistive-text"},[s._v(" "+s._s(s.$Labels.MA_Sort_By)+" ")]),s._v(" "),e("div",{staticClass:"slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate"},[e("span",{staticClass:"slds-truncate",attrs:{title:"Last Modified"}},[s._v(" "+s._s(s.$Labels.lastModifiedDate))]),s._v(" "),e("Icon",{staticClass:"slds-icon_container slds-icon-utility-arrowdown",attrs:{category:"utility",name:"arrowdown",iconClass:["slds-icon","slds-icon-text-default","slds-is-sortable__icon"]}})],1)])]),s._v(" "),e("th",{staticStyle:{width:"3.25rem"},attrs:{scope:"col"}},[e("div",{staticClass:"slds-truncate slds-assistive-text",attrs:{title:"Actions"}},[s._v("\n                                Actions\n                            ")])])])]),s._v(" "),e("tbody",s._l(s.filteredGroups,(function(t,i){return e("tr",{key:i,staticClass:"slds-hint-parent"},[e("td",{staticClass:"slds-text-align_right",attrs:{role:"gridcell"}}),s._v(" "),e("th",{attrs:{scope:"row",tabindex:"0"}},[e("div",{staticClass:"slds-truncate"},[e("a",{attrs:{href:"javascript:void(0);",tabindex:"-1"},on:{click:function(e){return s.$parent.populatePermissionGroup(t.Id,"edit")}}},[s._v(s._s(t.Name))])])]),s._v(" "),e("td",{attrs:{role:"gridcell"}},[e("div",{staticClass:"slds-truncate"},[s._v("\n                                "+s._s(t.maps__Description__c)+"\n                            ")])]),s._v(" "),e("td",{attrs:{role:"gridcell"}},[e("div",{staticClass:"slds-truncate"},[s._v("\n                                "+s._s(t.CreatedBy?t.CreatedBy.Name:s.$Labels.MapsSetting_System)+"\n                            ")])]),s._v(" "),e("td",{attrs:{role:"gridcell"}},[e("div",{staticClass:"slds-truncate"},[s._v("\n                                "+s._s(t.LastModifiedBy?t.LastModifiedBy.Name:"")+" - "+s._s(t.LastModifiedBy?t.LastModifiedDate:"")+"\n                            ")])]),s._v(" "),e("td",{attrs:{role:"gridcell"}},[e("ActionMenu",[e("button",{staticClass:"slds-button slds-button_icon slds-button_icon-border-filled slds-button_icon-x-small",attrs:{slot:"button"},slot:"button"},[e("span",{staticClass:"slds-button__icon ma-icon ma-icon-down"})]),s._v(" "),"Default"!==t.Name&&t.Name!==s.$Labels.MA_DEFAULT&&s.store__settingsGroup.Name!==s.$Labels.MA_DEFAULT||"defaultSettings"!==t.Id?e("ActionMenuItem",{attrs:{label:s.$Labels.MA_Edit},on:{click:function(e){s.store__toggle.readOnlyMode=!1,s.$parent.populatePermissionGroup(t.Id,"edit")}}}):s._e(),s._v(" "),e("ActionMenuItem",{attrs:{label:s.$Labels.MA_Clone},on:{click:function(e){return s.$parent.populatePermissionGroup(t.Id,"clone")}}}),s._v(" "),"Default"!==t.Name&&t.Name!==s.$Labels.MA_DEFAULT&&s.store__settingsGroup.Name!==s.$Labels.MA_DEFAULT||"defaultSettings"!==t.Id?e("ActionMenuItem",{attrs:{label:s.$Labels.MA_Delete},on:{click:function(e){return s.openDeletePermissionModal(t.Id)}}}):s._e()],1)],1)])})),0)])])],1)],1)}),[],!1,null,null,null).exports}}]);