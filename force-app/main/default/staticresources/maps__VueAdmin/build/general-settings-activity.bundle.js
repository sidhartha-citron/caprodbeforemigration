"use strict";(globalThis.webpackChunkmaps_desktop=globalThis.webpackChunkmaps_desktop||[]).push([[4807],{9048:(t,e,s)=>{s.d(e,{_:()=>i,a:()=>a});const i=(t,e)=>{if(t&&"object"==typeof t&&Array.isArray(e)){for(;e.length&&t;)t=t[e.shift()];return t}},a=(t,e="maps__")=>{try{const s=new Set(["marker","scatterMarker","clusterMarker","clusterGroup","workers","DeviceHistory","orderedPolyline","distanceLimitCircle","heatmapLayer"]);Object.entries(t).forEach((([i,c])=>{if(!s.has(i))if(i.startsWith(e)){const s=i.replace(e,"");t[s]=c,delete t[i],null!=t[s]&&"object"==typeof t[s]&&a(t[s],e)}else"object"==typeof c&&a(c,e)}))}catch(t){}return t}},8166:(t,e,s)=>{s.r(e),s.d(e,{default:()=>d});var i=s(9048),a=s(5658),c=s(2766),l=s(5908);const o={components:{Picklist:c.Gp,Spinner:c.$j},data(){return{test:"",options:[],isLoading:!1,durationOptions:[{label:(0,a.N4)(this.$Labels.Settings_Time_Duration_Label,[0,30]),value:"30"},{label:(0,a.N4)(this.$Labels.Settings_Time_Duration_Label,[1,0]),value:"60"},{label:(0,a.N4)(this.$Labels.Settings_Time_Duration_Label,[1,30]),value:"90"},{label:(0,a.N4)(this.$Labels.Settings_Time_Duration_Label,[2,0]),value:"120"},{label:(0,a.N4)(this.$Labels.Settings_Time_Duration_Label,[2,30]),value:"150"},{label:(0,a.N4)(this.$Labels.Settings_Time_Duration_Label,[3,0]),value:"180"}],duration:"30",createdLatitude:"",createdLocationAccuracy:"",createdLongitude:"",createdLocationVerified:"",createdDistanceFromRecord:"",checkOutLatitude:"",checkOutAccuracy:"",checkOutLongitude:"",checkOutDistanceFromRecord:"",checkOutDate:"",customDisposition:"",fieldSets:[]}},computed:{...(0,l.mapState)({settings__booleanFields:"booleanFields",settings__dateTimeFields:"dateTimeFields",settings__numberFields:"numberFields",settings__settings:"settings"})},created(){this.init()},methods:{...(0,l.mapActions)({settings__getActivityFields:"getActivityFields",settings__getFieldSets:"getFieldSets",settings__saveActivitySettings:"saveActivitySettings",settings__getSettings:"getSettings"}),init(){this.isLoading=!0;const t=this.getSettigns(),e=this.settings__getActivityFields(),s=this.getFieldSets();Promise.all([t,e,s]).finally((()=>{this.isLoading=!1}))},getActivityFields(){this.isLoading=!0,this.settings__getActivityFields().finally((()=>{this.isLoading=!1}))},getSettigns(){return new Promise((t=>{this.settings__getSettings().then((t=>{this.updateSettings(t)})).finally((()=>{t()}))}))},getFieldSets(){return new Promise((t=>{this.settings__getFieldSets().then((t=>{this.fieldSets=t})).finally((()=>{t()}))}))},updateSettings(t){this.duration=(0,i._)(t,["Activity-DefaultDuration","maps__Value__c"])||"30",this.createdLatitude=(0,i._)(t,["Activity-CreatedLatitude","maps__Value__c"])||"",this.createdLocationAccuracy=(0,i._)(t,["Activity-CreatedLocationAccuracy","maps__Value__c"])||"",this.createdLongitude=(0,i._)(t,["Activity-CreatedLongitude","maps__Value__c"])||"",this.createdLocationVerified=(0,i._)(t,["Activity-CreatedLocationVerified","maps__Value__c"])||"",this.createdDistanceFromRecord=(0,i._)(t,["Activity-DistanceFromRecord","maps__Value__c"])||"",this.checkOutLatitude=(0,i._)(t,["Activity-CheckOutLatitude","maps__Value__c"])||"",this.checkOutAccuracy=(0,i._)(t,["Activity-CheckOutAccuracy","maps__Value__c"])||"",this.checkOutLongitude=(0,i._)(t,["Activity-CheckOutLongitude","maps__Value__c"])||"",this.checkOutDistanceFromRecord=(0,i._)(t,["Activity-CheckOutDistanceFromRecord","maps__Value__c"])||"",this.checkOutDate=(0,i._)(t,["Activity-CheckOutDate","maps__Value__c"])||"",this.customDisposition=(0,i._)(t,["Activity-FieldSet","maps__Value__c"])||""},saveActivitySettings(){const t={serializedFields:JSON.stringify({"Activity-DefaultDuration":this.duration,"Activity-CheckOutAccuracy":this.checkOutAccuracy||"","Activity-CheckOutDate":this.checkOutDate||"","Activity-CheckOutDistanceFromRecord":this.checkOutDistanceFromRecord||"","Activity-CreatedLocationAccuracy":this.createdLocationAccuracy||"","Activity-CheckOutLatitude":this.checkOutLatitude||"","Activity-CheckOutLongitude":this.checkOutLongitude||"","Activity-CreatedLatitude":this.createdLatitude||"","Activity-CreatedLongitude":this.createdLongitude||"","Activity-CreatedLocationVerified":this.createdLocationVerified,"Activity-DistanceFromRecord":this.createdDistanceFromRecord,"Activity-FieldSet":this.customDisposition||""})};this.isLoading=!0,this.settings__saveActivitySettings(t).then((()=>{window.MAToastMessages.showSuccess({message:"Success"})})).catch((t=>{window.MAToastMessages.showError({message:"Save Error",subMessage:t.message,timeOut:1e4,closeButton:!0})})).finally((()=>{this.isLoading=!1}))},suggestFields(){let t=!1;for(let e=0;e<this.settings__booleanFields.length;e++){const s=this.settings__booleanFields[e];if(this.createdLocationVerified)break;{const e=s.name.toLowerCase(),i=["location","verified","created"];this.findMatch(e,i)&&(this.createdLocationVerified=s.value,t=!0)}}for(let e=0;e<this.settings__dateTimeFields.length;e++){const s=this.settings__dateTimeFields[e];if(this.checkOutDate)break;{const e=s.name.toLowerCase(),i=["check","out","date"];this.findMatch(e,i)&&(this.checkOutDate=s.value,t=!0)}}for(let e=0;e<this.settings__numberFields.length;e++){const s=this.settings__numberFields[e],i=s.name.toLowerCase();if(!this.checkOutAccuracy){const e=["check","out","accuracy"];this.findMatch(i,e)&&(this.checkOutAccuracy=s.value,t=!0)}if(!this.checkOutDistanceFromRecord){const e=["distance","from","record"];this.findMatch(i,e)&&(this.checkOutDistanceFromRecord=s.value,t=!0)}if(!this.createdLocationAccuracy){const e=["created","location","accuracy"];this.findMatch(i,e)&&(this.createdLocationAccuracy=s.value,t=!0)}if(!this.checkOutLatitude){const e=["check","out","latitude"];this.findMatch(i,e)&&(this.checkOutLatitude=s.value,t=!0)}if(!this.checkOutLongitude){const e=["check","out","longitude"];this.findMatch(i,e)&&(this.checkOutLongitude=s.value,t=!0)}if(!this.createdLatitude){const e=["created","latitude"];this.findMatch(i,e)&&(this.createdLatitude=s.value,t=!0)}if(!this.createdLongitude){const e=["created","longitude"];this.findMatch(i,e)&&(this.createdLongitude=s.value,t=!0)}if(!this.createdDistanceFromRecord){const e=["distance","from","record"];this.findMatch(i,e)&&(this.createdDistanceFromRecord=s.value,t=!0)}}t||this.$root.$emit("toast",{message:"Unable to locate fields to suggest. Please continue with manual field mapping.",state:"info"})},findMatch(t="",e=[]){const s=t.split(" "),i=[];for(let t=0;t<s.length;t++){const a=String(s[t]).toLowerCase();for(let t=0;t<e.length;t++){const s=String(e[t]).toLowerCase();if(a.indexOf(s)>-1){i.push(s);break}}}return i.length===e.length}}},d=(0,s(1900).Z)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"TopTabs-ActivitySettings"}},[t.isLoading?s("Spinner"):t._e(),t._v(" "),s("div",[s("div",{staticClass:"slds-section slds-m-bottom_large slds-is-open activityfielddetails"},[s("div",{staticClass:"slds-section__title slds-theme--shade"},[s("span",{staticClass:"section-header-title slds-p-horizontal--small slds-truncate"},[t._v(t._s(t.$Labels.MapsSetting_Activities_Check_In_Fields))])]),t._v(" "),s("div",{staticClass:"slds-section__content section__content"},[s("div",{staticClass:"slds-grid"},[s("div",{staticClass:"slds-col slds-size_1-of-1 slds-large-size_3-of-4"},[s("div",{staticClass:"slds-form slds-form_compound"},[s("fieldset",{staticClass:"slds-form-element"},[s("div",{staticClass:"slds-form-element__group"},[s("div",{staticClass:"slds-form-element__row"},[s("div",{staticClass:"slds-form-element slds-size_1-of-2"},[s("Picklist",{staticClass:"slds-p-vertical_xx-small",attrs:{options:t.settings__numberFields,detach:!0,labels:{name:t.$Labels.MA_Created_Latitude},idKey:"value",titleKey:"name",filterable:""},model:{value:t.createdLatitude,callback:function(e){t.createdLatitude=e},expression:"createdLatitude"}})],1),t._v(" "),s("div",{staticClass:"slds-form-element slds-size_1-of-2"},[s("Picklist",{staticClass:"slds-p-vertical_xx-small",attrs:{options:t.settings__numberFields,detach:!0,labels:{name:t.$Labels.MA_Created_Location_Accuracy},idKey:"value",titleKey:"name",filterable:""},model:{value:t.createdLocationAccuracy,callback:function(e){t.createdLocationAccuracy=e},expression:"createdLocationAccuracy"}})],1)]),t._v(" "),s("div",{staticClass:"slds-form-element__row"},[s("div",{staticClass:"slds-form-element slds-size_1-of-2"},[s("Picklist",{staticClass:"slds-p-vertical_xx-small",attrs:{options:t.settings__numberFields,detach:!0,labels:{name:t.$Labels.MA_Created_Longitude},idKey:"value",titleKey:"name",filterable:""},model:{value:t.createdLongitude,callback:function(e){t.createdLongitude=e},expression:"createdLongitude"}})],1),t._v(" "),s("div",{staticClass:"slds-form-element slds-size_1-of-2"},[s("Picklist",{staticClass:"slds-p-vertical_xx-small",attrs:{options:t.settings__booleanFields,detach:!0,labels:{name:t.$Labels.MA_Created_Location_Verified},idKey:"value",titleKey:"name",filterable:""},model:{value:t.createdLocationVerified,callback:function(e){t.createdLocationVerified=e},expression:"createdLocationVerified"}})],1)]),t._v(" "),s("div",{staticClass:"slds-form-element__row"},[s("div",{staticClass:"slds-form-element slds-size_1-of-2"},[s("Picklist",{staticClass:"slds-p-vertical_xx-small",attrs:{options:t.settings__numberFields,detach:!0,labels:{name:t.$Labels.MA_Distance_from_Record},idKey:"value",titleKey:"name",filterable:""},model:{value:t.createdDistanceFromRecord,callback:function(e){t.createdDistanceFromRecord=e},expression:"createdDistanceFromRecord"}})],1),t._v(" "),s("div",{staticClass:"slds-form-element slds-size_1-of-2"},[s("Picklist",{staticClass:"slds-p-vertical_xx-small",attrs:{options:t.durationOptions,detach:!0,hasNoneOption:!1,labels:{name:t.$Labels.Settings_Default_Duration},idKey:"value",titleKey:"label",filterable:""},model:{value:t.duration,callback:function(e){t.duration=e},expression:"duration"}})],1)])])])])])])])]),t._v(" "),s("div",{staticClass:"slds-section slds-m-bottom_large slds-is-open activityfielddetails"},[s("div",{staticClass:"slds-section__title slds-theme--shade"},[s("span",{staticClass:"section-header-title slds-p-horizontal--small slds-truncate"},[t._v(t._s(t.$Labels.Settings_Check_Out_Fields))])]),t._v(" "),s("div",{staticClass:"slds-section__content section__content"},[s("div",{staticClass:"slds-grid"},[s("div",{staticClass:"slds-col slds-size_1-of-1 slds-large-size_3-of-4"},[s("div",{staticClass:"slds-form slds-form_compound"},[s("fieldset",{staticClass:"slds-form-element"},[s("div",{staticClass:"slds-form-element__group"},[s("div",{staticClass:"slds-form-element__row"},[s("div",{staticClass:"slds-form-element slds-size_1-of-2"},[s("Picklist",{staticClass:"slds-p-vertical_xx-small",attrs:{options:t.settings__numberFields,detach:!0,labels:{name:t.$Labels.MA_Check_Out_Latitude},idKey:"value",titleKey:"name",filterable:""},model:{value:t.checkOutLatitude,callback:function(e){t.checkOutLatitude=e},expression:"checkOutLatitude"}})],1),t._v(" "),s("div",{staticClass:"slds-form-element slds-size_1-of-2"},[s("Picklist",{staticClass:"slds-p-vertical_xx-small",attrs:{options:t.settings__numberFields,detach:!0,labels:{name:t.$Labels.MA_Check_Out_Accuracy},idKey:"value",titleKey:"name",filterable:""},model:{value:t.checkOutAccuracy,callback:function(e){t.checkOutAccuracy=e},expression:"checkOutAccuracy"}})],1)]),t._v(" "),s("div",{staticClass:"slds-form-element__row"},[s("div",{staticClass:"slds-form-element slds-size_1-of-2"},[s("Picklist",{staticClass:"slds-p-vertical_xx-small",attrs:{options:t.settings__numberFields,detach:!0,labels:{name:t.$Labels.MA_Check_Out_Longitude},idKey:"value",titleKey:"name",filterable:""},model:{value:t.checkOutLongitude,callback:function(e){t.checkOutLongitude=e},expression:"checkOutLongitude"}})],1),t._v(" "),s("div",{staticClass:"slds-form-element slds-size_1-of-2"},[s("Picklist",{staticClass:"slds-p-vertical_xx-small",attrs:{options:t.settings__numberFields,detach:!0,labels:{name:t.$Labels.MA_Distance_from_Record},idKey:"value",titleKey:"name",filterable:""},model:{value:t.checkOutDistanceFromRecord,callback:function(e){t.checkOutDistanceFromRecord=e},expression:"checkOutDistanceFromRecord"}})],1)]),t._v(" "),s("div",{staticClass:"slds-form-element__row"},[s("div",{staticClass:"slds-form-element slds-size_1-of-2"},[s("Picklist",{staticClass:"slds-p-vertical_xx-small",attrs:{options:t.settings__dateTimeFields,detach:!0,labels:{name:t.$Labels.MA_Check_Out_Date},idKey:"value",titleKey:"name",filterable:""},model:{value:t.checkOutDate,callback:function(e){t.checkOutDate=e},expression:"checkOutDate"}})],1)])])])])])])])]),t._v(" "),s("div",{staticClass:"slds-section slds-m-bottom_large slds-is-open activityfielddetails"},[s("div",{staticClass:"slds-section__title slds-theme--shade"},[s("span",{staticClass:"section-header-title slds-p-horizontal--small slds-truncate"},[t._v(t._s(t.$Labels.MA_Custom_Disposition))])]),t._v(" "),s("div",{staticClass:"slds-section__content section__content"},[s("div",{staticClass:"slds-grid"},[s("div",{staticClass:"slds-col slds-size_1-of-1 slds-large-size_3-of-4"},[s("div",{staticClass:"slds-form slds-form_compound"},[s("fieldset",{staticClass:"slds-form-element"},[s("div",{staticClass:"slds-form-element__group"},[s("div",{staticClass:"slds-form-element__row"},[s("div",{staticClass:"slds-form-element slds-size_1-of-2"},[s("Picklist",{staticClass:"slds-p-vertical_xx-small",attrs:{options:t.fieldSets,detach:!0,labels:{name:t.$Labels.Settings_Field_Set},idKey:"value",titleKey:"name",filterable:""},model:{value:t.customDisposition,callback:function(e){t.customDisposition=e},expression:"customDisposition"}})],1)])])])])])])])])]),t._v(" "),s("div",{staticClass:"ActivityFieldButtons"},[s("button",{staticClass:"slds-button slds-button_brand",on:{click:t.saveActivitySettings}},[t._v("\n            "+t._s(t.$Labels.MA_Save)+"\n        ")]),t._v(" "),s("button",{staticClass:"slds-button slds-button_brand",on:{click:t.suggestFields}},[t._v("\n            "+t._s(t.$Labels.MA_Suggest)+"\n        ")]),t._v(" "),s("span",{staticClass:"msgs",staticStyle:{color:"red","font-size":"10px",display:"none"}})])],1)}),[],!1,null,null,null).exports}}]);