"use strict";(globalThis.webpackChunkmaps_desktop=globalThis.webpackChunkmaps_desktop||[]).push([[5977],{1370:(t,e,s)=>{s.r(e),s.d(e,{default:()=>o});var a=s(2766),n=s(5658),i=s(3088);const l={components:{Checkbox:a.XZ,Spinner:a.$j,ProgressRing:a.eL,Tooltip:a.u},data:()=>({isLoading:!0,settings:[{sobjectType:"maps__MapsSetting__c",Name:"Asynchronous Data Set Creation",maps__Value__c:!0},{sobjectType:"maps__MapsSetting__c",Name:"Skip Recycle Bin",maps__Value__c:!1}],asyncDataSetCreation:!0,currentCleanupJob:null}),computed:{cleanupJobLabelFormat(){return(0,n.N4)(this.$Labels.TPSettings_Admin_Settings_Cleanup_Job_Status,[this.currentCleanupJob.JobItemsProcessed,this.currentCleanupJob.JobItemsProcessed,this.currentCleanupJob.TotalJobItems])}},async mounted(){this.cleanupDataClick();let t=await(0,i.wX)("maps.TPRemoteActions.GetSettings",[["Asynchronous Data Set Creation","Skip Recycle Bin"]]);this.settings.forEach((e=>{const s=t.data.find((t=>t.Name===e.Name));s&&(e.Id=s.Id,e.maps__Value__c="true"==s.maps__Value__c)})),this.isLoading=!1},methods:{async handleOptionClick(t){const e=JSON.parse(JSON.stringify(this.settings.find((e=>e.Name===t))));e.maps__Value__c=`${e.maps__Value__c}`;const s=e.Id?"Update":"Insert",a=await(0,i.wX)(`maps.TPRemoteActions.${s}ObjectBatch`,[[e],!0]);this.settings.find((e=>e.Name===t)).Id=a.data[0].Id,MAToastMessages.showSuccess({position:"toast-top-right",message:`${t} Updated`,timeOut:8e3})},async cleanupDataClick(t){this.currentCleanupJob=this.currentCleanupJob||"Loading",this.currentCleanupJob=(await(0,i.wX)("maps.TPRemoteActions.GetCleanupBatchJob",[!!t])).data,this.currentCleanupJob&&setTimeout((()=>{this.cleanupDataClick()}),3e3)}}},o=(0,s(1900).Z)(l,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[t.isLoading?s("Spinner"):t._e(),t._v(" "),s("div",{staticClass:"slds-section__title slds-theme--shade slds-m-bottom_x-small"},[s("span",{staticClass:"section-header-title slds-p-horizontal--small slds-truncate"},[t._v(t._s(t.$Labels.TPSettings_Admin_Settings_Asynchronouse_Options))])]),t._v(" "),s("Checkbox",{attrs:{labels:{name:t.$Labels.TPSettings_Admin_Settings_Asynchronous_Data_Set_Creation},toggleBuffer:500},on:{changed:function(e){return t.handleOptionClick("Asynchronous Data Set Creation")}},model:{value:t.settings.find((function(t){return"Asynchronous Data Set Creation"===t.Name})).maps__Value__c,callback:function(e){t.$set(t.settings.find((function(t){return"Asynchronous Data Set Creation"===t.Name})),"maps__Value__c",e)},expression:"settings.find(s => s.Name === 'Asynchronous Data Set Creation').maps__Value__c"}}),t._v(" "),s("div",{staticClass:"slds-section__title slds-theme--shade slds-m-bottom_x-small"},[s("span",{staticClass:"section-header-title slds-p-horizontal--small slds-truncate"},[t._v(t._s(t.$Labels.TPSettings_Admin_Settings_Clean_Up_Deleted))])]),t._v(" "),t.currentCleanupJob?"Loading"===t.currentCleanupJob?s("div",{staticClass:"slds-grid slds-grid_vertical-align-center"},[s("ProgressRing",{staticStyle:{"margin-right":"5px"},attrs:{percent:0}}),t._v(" "),s("span",[t._v(t._s(t.$Labels.TPSettings_Admin_Settings_Retrieving_Job_Details))])],1):s("div",{staticClass:"slds-grid slds-grid_vertical-align-center"},[s("ProgressRing",{staticStyle:{"margin-right":"5px"},attrs:{percent:100-100*t.currentCleanupJob.JobItemsProcessed/t.currentCleanupJob.TotalJobItems||100}}),t._v(" "),s("span",[t._v(t._s(t.cleanupJobLabelFormat))])],1):s("div",[s("button",{staticClass:"slds-button slds-button_text-destructive",on:{click:function(e){return t.cleanupDataClick(!0)}}},[t._v(t._s(t.$Labels.TPSettings_Admin_Settings_Delete_Data))]),t._v(" "),s("div",{staticClass:"slds-grid"},[s("Checkbox",{attrs:{noSlide:"",labels:{name:t.$Labels.TPSettings_Admin_Settings_Skip_Recycle_Bin},toggleBuffer:500},on:{changed:function(e){return t.handleOptionClick("Skip Recycle Bin")}},model:{value:t.settings.find((function(t){return"Skip Recycle Bin"===t.Name})).maps__Value__c,callback:function(e){t.$set(t.settings.find((function(t){return"Skip Recycle Bin"===t.Name})),"maps__Value__c",e)},expression:"settings.find(s => s.Name === 'Skip Recycle Bin').maps__Value__c"}}),t._v(" "),s("Tooltip",{attrs:{text:t.$Labels.TPSettings_Admin_Settings_Skip_Recycle_Tooltip,assistiveText:t.$Labels.TPSettings_Admin_Settings_Skip_Recycle_Tooltip}})],1)])],1)}),[],!1,null,"2db1dfa3",null).exports}}]);