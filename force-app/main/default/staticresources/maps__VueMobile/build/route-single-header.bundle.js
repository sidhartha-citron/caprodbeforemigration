"use strict";(globalThis.webpackChunkmaps_desktop=globalThis.webpackChunkmaps_desktop||[]).push([[216,366],{5796:(e,t,s)=>{s.r(t),s.d(t,{default:()=>c});var o=s(5908),a=s(3589),i=s(4549),d=s(5244),l=s(9159);const{MASystem:r,getProperty:n,moment:u}=window,_={components:{RouteOptionsModal:()=>({...(0,a.Z)(),component:s.e(806).then(s.bind(s,1545)),error:l.Z}),SaveRouteModal:()=>({...(0,a.Z)(),component:s.e(3533).then(s.bind(s,6997)),error:l.Z}),SaveChangesModal:d.default,MobileToggle:i.Z},data(){return{test:!1,showRouteOptions:!1,showSaveRouteModal:!1,showSaveChangesModal:!1,routeOptions:[{label:this.$Labels.MA_Edit,value:"edit"}]}},computed:{...(0,o.mapGetters)("routes",{routes__showSingleRoute:"showSingleRoute",routes__route:"route",routes__record:"record",routes__onMap:"onMap",routes__pendingChanges:"pendingChanges",routes__totalStops:"totalStops",routes__editMode:"editMode"}),lockOrder:{get(){return this.routes__route.lockOrder},set(){this.routes__updateLockOrder(),this.routes__removeRoute()}},timeOptions(){return this.routes__route.timeBasedOptions},isTimeBased(){return this.timeOptions.Enabled||!1},showLaborLawsBanner:()=>n(r,"Organization.LaborLawsNotify",!1)||!1,routeDate(){const e=this.routes__record.Date__c,t=u(e,"YYYY-MM-DD"),s=(this.$User.dateFormat||"M/D/YYYY").toUpperCase();return t.format(s)},isGuideRoute(){return this.routes__route.isGuideRoute||!1},routeStart(){return this.timeOptions.Start},routeEnd(){return this.timeOptions.End},userFormattedStartTime(){return u(this.routeStart,"h:mm a").format(this.$User.timeFormat)},userFormattedEndTime(){return u(this.routeEnd,"h:mm a").format(this.$User.timeFormat)},routeName(){return this.routes__record.Name||this.$Labels.MA_NEW_ROUTE}},created(){},methods:{...(0,o.mapActions)("routes",{routes__closeSingleRouteView:"closeSingleRouteView",routes__saveRoute:"saveRoute",routes__removeRoute:"removeRoute"}),...(0,o.mapMutations)("routes",{routes__updateRouteView:"updateRouteView",routes__toggleEditMode:"toggleEditMode",routes__updateOnMap:"updateOnMap",routes__updateLockOrder:"updateLockOrder"}),discardClose(){this.routes__closeSingleRouteView()},saveClose(){this.routes__saveRoute(!1).then((()=>{this.$bus.$emit("refresh-route-list"),this.routes__closeSingleRouteView()})).catch((e=>{window.MAToastMessages.showError({message:"Unable to save this route.",subMessage:String(e),timeOut:8e3,closeButton:!0})}))},handleRouteAction(e){"edit"===e.value&&this.routes__toggleEditMode(!0)},returnToRouteList(){this.routes__pendingChanges?this.toggleSavedChangesModal(!0):this.routes__closeSingleRouteView()},toggleSavedChangesModal(e){this.showSaveChangesModal=e},closeSaveChangesModal(){this.showSaveChangesModal=!1},showSaveModal(){this.showSaveRouteModal=!0},disableEditMode(){this.routes__toggleEditMode(!1)},editRouteOptions(){this.showRouteOptions=!0},closeRouteOptions(){this.showRouteOptions=!1},closeSaveRouteModal(){this.showSaveRouteModal=!1}}},c=(0,s(1900).Z)(_,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.showLaborLawsBanner?s("div",{directives:[{name:"show",rawName:"v-show",value:!e.routes__editMode,expression:"!routes__editMode"}],staticClass:"labor-law-notification slds-notify_container slds-notify_container--inline"},[s("div",{staticClass:"slds-notify slds-notify--alert slds-theme--warning slds-theme--alert-texture slds-banner"},[s("h2",[e._v(e._s(e._f("decode")(e.$Labels.MA_Labor_Laws)))])])]):e._e(),e._v(" "),s("div",{staticClass:"route-single-header slds-border_bottom"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.routes__editMode,expression:"routes__editMode"}],staticClass:"route-edit-header"},[s("div",{staticClass:"ma-button ma-button--white hide-route-edit",on:{click:e.disableEditMode}},[e._v("\n                "+e._s(e._f("decode")(e.$Labels.MA_Done))+"\n            ")])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.routes__editMode,expression:"!routes__editMode"}],staticClass:"slds-grid"},[s("div",{staticClass:"slds-col slds-p-around_medium",staticStyle:{"min-width":"0"},on:{click:e.editRouteOptions}},[s("div",{staticClass:"slds-text-heading_medium slds-p-top_xxx-small slds-truncate",attrs:{"data-id":e.routes__record.Id||""}},[e._v("\n                    "+e._s(e._f("decode")(e.routeName))+"\n                ")]),e._v(" "),s("div",{staticClass:"slds-grid"},[s("p",{staticClass:"route-date_label slds-m-right_medium"},[e._v(e._s(e._f("decode")(e.routeDate)))]),e._v(" "),e.isTimeBased?s("p",{staticClass:"slds-grid route-time_label"},[e._v("\n                        "+e._s(e._f("decode")(e.userFormattedStartTime))+"â€“"+e._s(e._f("decode")(e.userFormattedEndTime))+"\n                    ")]):e._e()])]),e._v(" "),s("div",{staticClass:"slds-p-vertical_medium"},[s("button",{staticClass:"slds-button slds-button_icon slds-button_icon-container",on:{click:e.editRouteOptions}},[s("span",{staticClass:"slds-icon ma-icon ma-icon-edit"})])]),e._v(" "),s("div",{staticClass:"slds-p-around_medium"},[s("button",{staticClass:"slds-button slds-button_icon slds-button_icon-container",on:{click:e.returnToRouteList}},[s("span",{staticClass:"slds-icon ma-icon ma-icon-close"})])])]),e._v(" "),e.isGuideRoute?s("div",{directives:[{name:"show",rawName:"v-show",value:!e.routes__editMode,expression:"!routes__editMode"}],staticClass:"Advanced Route-route-header slds-p-horizontal_small slds-p-bottom_small"},[s("div",{staticClass:"slds-text-title_caps"},[s("span",{staticClass:"slds-icon ma-icon ma-icon-Advanced Route-logo",staticStyle:{"font-size":".75rem","margin-left":"5px"}},[e._v(e._s(e.$Labels.routes_Maps_Advanced_route))])])]):e._e(),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.routes__editMode,expression:"!routes__editMode"}],staticClass:"slds-grid slds-grid_vertical-align-center slds-p-bottom_x-small"},[s("div",{staticClass:"slds-p-left_medium"},[s("MobileToggle",{attrs:{label:e.$Labels.MA_Lock_Order},model:{value:e.lockOrder,callback:function(t){e.lockOrder=t},expression:"lockOrder"}})],1),e._v(" "),s("div",{staticClass:"slds-p-right_medium slds-col_bump-left"},[s("button",{staticClass:"slds-button slds-button_success",attrs:{disabled:e.routes__totalStops<2},on:{click:e.showSaveModal}},[e._v("\n                    "+e._s(e._f("decode")(e.$Labels.MA_Save))+"\n                ")])])])]),e._v(" "),e.showRouteOptions?s("RouteOptionsModal",{attrs:{isGuideRoute:e.isGuideRoute},on:{close:e.closeRouteOptions}}):e._e(),e._v(" "),e.showSaveRouteModal?s("SaveRouteModal",{on:{close:e.closeSaveRouteModal}}):e._e(),e._v(" "),e.showSaveChangesModal?s("SaveChangesModal",{attrs:{title:e.$Labels.MA_Route_SaveChanges},on:{close:e.closeSaveChangesModal,"discard-close":e.discardClose,"save-close":e.saveClose}}):e._e()],1)}),[],!1,null,"49124d40",null).exports},5244:(e,t,s)=>{s.r(t),s.d(t,{default:()=>a});const o={components:{MAModal:s(4141).Z},props:{title:{type:String,required:!0}},data:()=>({}),methods:{close(){this.$emit("close",!1)},exitRoute(){this.$emit("discard-close"),this.close()},saveAndClose(){this.$emit("save-close"),this.close()}}},a=(0,s(1900).Z)(o,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("MAModal",{staticClass:"schedule-discard-changes-modal",attrs:{title:e.title,doDetach:!0,closeLabel:e.$Labels.MA_Close},on:{close:e.close}},[s("div",{attrs:{slot:"footer"},slot:"footer"},[s("button",{staticClass:"slds-button slds-button_neutral",on:{click:e.close}},[e._v("\n            "+e._s(e._f("decode")(e.$Labels.MA_Cancel))+"\n        ")]),e._v(" "),s("button",{staticClass:"slds-button slds-button_brand",on:{click:e.exitRoute}},[e._v("\n            "+e._s(e._f("decode")(e.$Labels.MA_Close_Discard))+"\n        ")])])])}),[],!1,null,"5dda3a80",null).exports}}]);