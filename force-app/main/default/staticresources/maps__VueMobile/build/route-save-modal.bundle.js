"use strict";(globalThis.webpackChunkmaps_desktop=globalThis.webpackChunkmaps_desktop||[]).push([[3533],{6997:(e,t,s)=>{s.r(t),s.d(t,{default:()=>_});var a=s(4141),o=s(3294),l=s(675),i=s(379),r=s(5908),n=s(3589),d=s(9159);const{moment:u}=window,c={components:{MAModal:a.Z,MASpinner:l.Z,MAInput:o.Z,DateSelectionModal:()=>({...(0,n.Z)(),component:s.e(9822).then(s.bind(s,314)),error:d.Z})},data:()=>({isLoading:!1,name:"",date:null,dateString:"",showDateModal:!1}),validations:{name:{required:i.C1}},computed:{...(0,r.mapGetters)("routes",{routes__route:"route",routes__record:"record",routes__waypoints:"waypoints"}),last(){return this.routes__route.last},first(){return this.routes__route.first}},created(){this.name=this.routes__record.Name,this.parseDate(this.routes__record.Date__c)},methods:{...(0,r.mapMutations)("routes",{routes__updateRecord:"updateRecord",store__setPendingChange:"setPendingChange"}),...(0,r.mapActions)("routes",{routes__saveRoute:"saveRoute"}),toggleDateModal(e){this.showDateModal=e},setDate(e){this.date.set({date:e.get("date"),month:e.get("month"),year:e.get("year")}),this.dateString=this.date.format(this.$User.dateFormat.toUpperCase())},close(){this.isLoading||this.$emit("close")},parseDate(e){const t=u.utc(e,"YYYY-MM-DD");this.date=t,this.dateString=t.format(this.$User.dateFormat.toUpperCase())},saveRoute(e){""!==this.name.trim()?(this.routes__updateRecord({Name:this.name,Date__c:this.date.format("YYYY-MM-DD")}),this.routes__saveRoute(e).then((()=>{this.store__setPendingChange(!1),this.$bus.$emit("refresh-route-list"),this.$emit("close")})).catch((e=>{window.MAToastMessages.showError({message:"Unable to save this route.",subMessage:String(e),timeOut:8e3,closeButton:!0})}))):window.MAToastMessages.showWarning({message:"Save Route Error",subMessage:"Please enter a valid name",timeOut:6e3})}}},_=(0,s(1900).Z)(c,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("MAModal",{directives:[{name:"show",rawName:"v-show",value:!e.showDateModal,expression:"!showDateModal"}],staticClass:"slds-modal-fullscreen-phone",attrs:{doDetach:!0,title:e._f("decode")(e.$Labels.MA_Save_Route),closeLabel:e.$Labels.MA_Close},on:{close:e.close}},[s("div",{attrs:{slot:"content"},slot:"content"},[s("MASpinner",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}]}),e._v(" "),s("MAInput",{attrs:{isRequired:!0,label:e._f("decode")(e.$Labels.MA_Name),requiredLabel:e.$Labels.MA_Required},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),s("div",{staticClass:"slds-form-element",on:{click:function(t){return e.toggleDateModal(!0)}}},[s("label",{staticClass:"slds-form-element__label",attrs:{for:"text-input-id-1"}},[s("abbr",{staticClass:"slds-required"},[e._v("*")]),e._v("\n                    "+e._s(e._f("decode")(e.$Labels.MA_Date))+"\n                ")]),e._v(" "),s("div",{staticClass:"slds-form-element__control slds-input-has-icon slds-input-has-icon_right"},[s("span",{staticClass:"slds-icon slds-input__icon slds-input__icon_right ma-icon ma-icon-event slds-icon-text-light"}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.dateString,expression:"dateString"}],staticClass:"slds-input mobile-date-input",attrs:{id:"text-input-id-1",type:"text",disabled:""},domProps:{value:e.dateString},on:{input:function(t){t.target.composing||(e.dateString=t.target.value)}}})])])],1),e._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("div",{staticClass:"float-right"},[s("button",{staticClass:"slds-button slds-button_neutral",on:{click:e.close}},[e._v("\n                    "+e._s(e._f("decode")(e.$Labels.MA_Cancel))+"\n                ")]),e._v(" "),s("button",{staticClass:"slds-button slds-button_brand",on:{click:function(t){return e.saveRoute(!0)}}},[e._v("\n                    "+e._s(e._f("decode")(e.$Labels.MA_SaveAs))+"\n                ")]),e._v(" "),s("button",{staticClass:"slds-button slds-button_brand",on:{click:function(t){return e.saveRoute(!1)}}},[e._v("\n                    "+e._s(e._f("decode")(e.$Labels.MA_Save))+"\n                ")])])])]),e._v(" "),e.showDateModal?s("DateSelectionModal",{attrs:{date:e.date},on:{close:function(t){return e.toggleDateModal(!1)},update:e.setDate}}):e._e()],1)}),[],!1,null,null,null).exports},3294:(e,t,s)=>{s.d(t,{Z:()=>o});const a={name:"MAInput",mixins:[s(3826).Z],props:{value:{type:[String,Number],required:!0},isRequired:{type:Boolean,default:!1},useTextArea:{type:Boolean,default:!1},disableResize:{type:Boolean,default:!1},label:{type:String,default:""},errors:{type:Array,default:()=>[]},placeholder:{type:String,default:""},type:{type:String,default:"text"},isInvalid:{type:Boolean,default:!1},isDisabled:{type:Boolean,default:!1},hasFocus:{type:Boolean,default:!1},requiredLabel:{type:String,default:"Required"}},computed:{showLabel(){return this.label},hasErrors(){return this.errors&&this.errors.length},listeners(){return{...this.$listeners,input:e=>this.$emit("input",e.target.value)}}},watch:{hasFocus(e){e&&this.focus()}},mounted(){this.hasFocus&&this.focus()},methods:{focus(){this.$refs.input.focus(),this.$refs.input.select()}}},o=(0,s(1900).Z)(a,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"slds-form-element",class:{"slds-has-error":e.isInvalid}},[e.showLabel?s("label",{staticClass:"slds-form-element__label"},[e.isRequired?s("abbr",{staticClass:"slds-required",attrs:{title:e.requiredLabel}},[e._v("*")]):e._e(),e._v("\n        "+e._s(e.decodeHtml(e.label))+"\n        "),e._t("label")],2):e._e(),e._v(" "),s("div",{staticClass:"slds-form-element__control",staticStyle:{position:"relative"}},[e.useTextArea?s("textarea",e._g({staticClass:"slds-textarea",attrs:{disabled:e.isDisabled,placeholder:e.placeholder},domProps:{value:e.decodeHtml(e.value)}},e.listeners)):s("input",e._g({ref:"input",staticClass:"slds-input",attrs:{type:e.type,disabled:e.isDisabled,placeholder:e.placeholder},domProps:{value:e.decodeHtml(e.value)},on:{blur:function(t){return e.$emit("update:hasFocus",!1)}}},e.listeners)),e._v(" "),e._t("extendInput")],2),e._v(" "),e.isInvalid?s("div",{staticClass:"slds-form-element__help"},[e._t("errors")],2):e._e()])}),[],!1,null,"71386de2",null).exports}}]);