(globalThis.webpackChunkmaps_desktop=globalThis.webpackChunkmaps_desktop||[]).push([[4029],{2083:(t,e,s)=>{t.exports=s.p+"images/b4d28525cd0697b45cf4fbfaa819a2a0.svg"},3469:(t,e,s)=>{t.exports=s.p+"images/0d9cf6b7a777f5765f78f2b96fd4459a.svg"},2181:(t,e,s)=>{t.exports=s.p+"images/e7ef49a382e454e4f675205eae05b3d7.svg"},2929:(t,e,s)=>{t.exports=s.p+"images/48a4d600ba0ea51d6e017b4cee35b053.svg"},7460:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>L});var i=s(675),a=s(2423),l=s(5908),n=s(3294),o=s(4549),r=s(7579);const{MA:d}=window,c={components:{MobileToggle:o.Z,MAInput:n.Z,MobileSelect:r.Z},props:{whatOS:{type:String,default:""}},data(){return{proximitySettings:{DefaultProximityType:"Circle",circleRadius:"50",circleRadiusUnits:"MILES",radius:"50",travelDistanceRadius:"50",travelDistanceRadiusUnits:"MILES",travelTimeRadiusMinutes:"0",travelTimeRadiusHours:"1"},mapsOptions:[{label:this.$Labels.Mobile_Settings_Use_Apple_Maps,value:"appleMaps"},{label:this.$Labels.Mobile_Settings_Use_Google_Maps,value:"googleMaps"},{label:this.$Labels.Mobile_Settings_Use_Waze,value:"waze"},{label:this.$Labels.Mobile_Settings_Use_Uber,value:"uber"}],distanceUnit:"mi",mobilePlotLimit:1e3,recallMobileSaveState:!1,invertProximity:!1,mapItProximity:!1,distanceUnits:[{value:"mi",label:this.$Labels.Routes_Miles},{value:"km",label:this.$Labels.Routes_Kilometers}],proximityTypes:[{value:"Circle",label:this.$Labels.Routes_As_Crow_Flies},{value:"travelTime",label:this.$Labels.MA_Travel_Time},{value:"travelDistance",label:this.$Labels.MA_Travel_Distance}],extendedDistanceUnits:[{value:"MILES",label:this.$Labels.Routes_Miles},{value:"KM",label:this.$Labels.Routes_Kilometers},{value:"METERS",label:this.$Labels.MA_Meters},{value:"YARDS",label:this.$Labels.MA_Yards},{value:"FEET",label:this.$Labels.MA_Feet}],handleMobileMaps:""}},computed:{generalSettings(){return{proximitySettings:this.proximitySettings,distanceUnit:this.distanceUnit,mobilePlotLimit:this.mobilePlotLimit,recallMobileSaveState:this.recallMobileSaveState,invertProximity:this.invertProximity,mapItProximity:this.mapItProximity,handleMobileMaps:this.handleMobileMaps}}},watch:{generalSettings(t){this.$emit("update-general-settings",t)}},created(){this.parseGeneralSettings()},methods:{parseGeneralSettings(){const{userSettings:t={}}=window,{defaultProximitySettings:e={},RouteDefaults:s={unit:"mi"}}=t,i={...this.proximitySettings,...e};this.proximitySettings=i;let a=t.mobilePlotLimit||1e3;a=parseInt(d.Util.parseNumberString(String(a)),10),Number.isNaN(a)&&(a=1e3),this.mobilePlotLimit=a,this.recallMobileSaveState=t.recallMobileSaveState||!1,this.mapItProximity=t.MapItProximityOn||!1,this.invertProximity=t.InvertProximity||!1,this.distanceUnit=s.unit||"mi",this.handleMobileMaps=t.handleMobileMaps},ChangeVisibilityWhenCircleIsAdded(){window.ChangeVisibilityWhenCircleIsAdded()},getSelectReadOnlyValue(t,e,s,i){const a=e?e.filter((e=>e[s]===t)):[];return a[0]?a[0][i]:null}}};var u=s(1900);const m=(0,u.Z)(c,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"ma-section-title ma-section-title"},[t._v("\n        "+t._s(t._f("decode")(t.$Labels.MapsSetting_General))+"\n    ")]),t._v(" "),i("div",{staticClass:"pad-0-16-8",attrs:{id:"general-tab"}},[t.$store.state.defaultSettings.maxQueryMobile.overridable?i("MAInput",{attrs:{label:t.$Labels.MA_Max_Records_To_Plot,requiredLabel:t.$Labels.MA_Required,type:"number"},model:{value:t.mobilePlotLimit,callback:function(e){t.mobilePlotLimit=e},expression:"mobilePlotLimit"}}):i("div",{staticClass:"slds-form-element"},[i("label",{staticClass:"slds-form-element__label"},[t._v(t._s(t._f("decode")(t.$Labels.MA_Max_Records_To_Plot)))]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.mobilePlotLimit,expression:"mobilePlotLimit"}],staticClass:"slds-input",attrs:{readonly:""},domProps:{value:t.mobilePlotLimit},on:{input:function(e){e.target.composing||(t.mobilePlotLimit=e.target.value)}}})]),t._v(" "),"ios"===t.whatOS?i("MobileSelect",{attrs:{options:t.mapsOptions,doDetach:!0,hasNoneOption:!1,label:t.$Labels.MA_Handle_Maps,keyString:"value",valueString:"label"},model:{value:t.handleMobileMaps,callback:function(e){t.handleMobileMaps=e},expression:"handleMobileMaps"}}):t._e(),t._v(" "),t.$store.state.defaultSettings.units.overridable?i("MobileSelect",{attrs:{options:t.distanceUnits,doDetach:!0,hasNoneOption:!1,label:t.$Labels.Mobile_Settings_Default_Distance_Units,keyString:"value",valueString:"label"},model:{value:t.distanceUnit,callback:function(e){t.distanceUnit=e},expression:"distanceUnit"}}):i("div",{staticClass:"slds-form-element"},[i("label",{staticClass:"slds-form-element__label"},[t._v(t._s(t.$Labels.Mobile_Settings_Default_Distance_Units))]),t._v(" "),i("input",{staticClass:"slds-input",attrs:{readonly:""},domProps:{value:t.getSelectReadOnlyValue(t.distanceUnit,t.distanceUnits,"value","label")}})]),t._v(" "),t.$store.state.defaultSettings.invertProximity.overridable?i("MobileSelect",{attrs:{options:t.proximityTypes,doDetach:!0,hasNoneOption:!1,label:t.$Labels.Mobile_Settings_Default_Proximity_Type,keyString:"value",valueString:"label"},model:{value:t.proximitySettings.DefaultProximityType,callback:function(e){t.$set(t.proximitySettings,"DefaultProximityType",e)},expression:"proximitySettings.DefaultProximityType"}}):i("div",{staticClass:"slds-form-element"},[i("label",{staticClass:"slds-form-element__label"},[t._v(t._s(t.$Labels.Mobile_Settings_Default_Proximity_Type))]),t._v(" "),i("input",{staticClass:"slds-input",attrs:{readonly:""},domProps:{value:t.getSelectReadOnlyValue(t.proximitySettings.DefaultProximityType,t.proximityTypes,"value","label")}})]),t._v(" "),i("div",{staticClass:"prox-options",staticStyle:{"margin-left":"16px"}},["Circle"===t.proximitySettings.DefaultProximityType?i("div",{staticClass:"ma-form-control-wrap options-circle prox-option"},[t.$store.state.defaultSettings.defaultProximityType.overridable?i("MAInput",{attrs:{label:t.$Labels.MapsSetting_Radius,requiredLabel:t.$Labels.MA_Required,type:"number"},model:{value:t.proximitySettings.circleRadius,callback:function(e){t.$set(t.proximitySettings,"circleRadius",e)},expression:"proximitySettings.circleRadius"}}):i("div",{staticClass:"slds-form-element"},[i("label",{staticClass:"slds-form-element__label"},[t._v(t._s(t.$Labels.MapsSetting_Radius))]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.proximitySettings.circleRadius,expression:"proximitySettings.circleRadius"}],staticClass:"slds-input",attrs:{readonly:""},domProps:{value:t.proximitySettings.circleRadius},on:{input:function(e){e.target.composing||t.$set(t.proximitySettings,"circleRadius",e.target.value)}}})]),t._v(" "),t.$store.state.defaultSettings.defaultProximityType.overridable?i("MobileSelect",{attrs:{options:t.extendedDistanceUnits,doDetach:!0,hasNoneOption:!1,label:t.$Labels.MA_UNITS,keyString:"value",valueString:"label"},model:{value:t.proximitySettings.circleRadiusUnits,callback:function(e){t.$set(t.proximitySettings,"circleRadiusUnits",e)},expression:"proximitySettings.circleRadiusUnits"}}):i("div",{staticClass:"slds-form-element"},[i("label",{staticClass:"slds-form-element__label"},[t._v(t._s(t.$Labels.MA_UNITS))]),t._v(" "),i("input",{staticClass:"slds-input",attrs:{readonly:""},domProps:{value:t.getSelectReadOnlyValue(t.proximitySettings.circleRadiusUnits,t.extendedDistanceUnits,"value","label")}})])],1):t._e(),t._v(" "),"travelDistance"===t.proximitySettings.DefaultProximityType?i("div",{staticClass:"ma-form-control-wrap prox-option",attrs:{id:"proximity-travel-distance"}},[t.$store.state.defaultSettings.defaultProximityType.overridable?i("MAInput",{attrs:{label:t.$Labels.MapsSetting_Radius,requiredLabel:t.$Labels.MA_Required,type:"number"},model:{value:t.proximitySettings.travelDistanceRadius,callback:function(e){t.$set(t.proximitySettings,"travelDistanceRadius",e)},expression:"proximitySettings.travelDistanceRadius"}}):i("div",{staticClass:"slds-form-element"},[i("label",{staticClass:"slds-form-element__label"},[t._v(t._s(t.$Labels.MapsSetting_Radius))]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.proximitySettings.travelDistanceRadius,expression:"proximitySettings.travelDistanceRadius"}],staticClass:"slds-input",attrs:{readonly:""},domProps:{value:t.proximitySettings.travelDistanceRadius},on:{input:function(e){e.target.composing||t.$set(t.proximitySettings,"travelDistanceRadius",e.target.value)}}})]),t._v(" "),t.$store.state.defaultSettings.defaultProximityType.overridable?i("MobileSelect",{attrs:{options:t.extendedDistanceUnits,doDetach:!0,hasNoneOption:!1,label:t.$Labels.MA_UNITS,keyString:"value",valueString:"label"},model:{value:t.proximitySettings.travelDistanceRadiusUnits,callback:function(e){t.$set(t.proximitySettings,"travelDistanceRadiusUnits",e)},expression:"proximitySettings.travelDistanceRadiusUnits"}}):i("div",{staticClass:"slds-form-element"},[i("label",{staticClass:"slds-form-element__label"},[t._v(t._s(t.$Labels.MA_UNITS))]),t._v(" "),i("input",{staticClass:"slds-input",attrs:{readonly:""},domProps:{value:t.getSelectReadOnlyValue(t.proximitySettings.travelDistanceRadiusUnits,t.extendedDistanceUnits,"value","label")}})])],1):t._e(),t._v(" "),"travelTime"===t.proximitySettings.DefaultProximityType?i("div",{staticClass:"ma-form-control-wrap prox-option",attrs:{id:"proximity-travel-time"}},[t.$store.state.defaultSettings.defaultProximityType.overridable?i("MAInput",{attrs:{label:t.$Labels.MA_hours,requiredLabel:t.$Labels.MA_Required,type:"number"},model:{value:t.proximitySettings.travelTimeRadiusHours,callback:function(e){t.$set(t.proximitySettings,"travelTimeRadiusHours",e)},expression:"proximitySettings.travelTimeRadiusHours"}}):i("div",{staticClass:"slds-form-element"},[i("label",{staticClass:"slds-form-element__label"},[t._v(t._s(t.$Labels.MA_hours))]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.proximitySettings.travelTimeRadiusHours,expression:"proximitySettings.travelTimeRadiusHours"}],staticClass:"slds-input",attrs:{readonly:""},domProps:{value:t.proximitySettings.travelTimeRadiusHours},on:{input:function(e){e.target.composing||t.$set(t.proximitySettings,"travelTimeRadiusHours",e.target.value)}}})]),t._v(" "),t.$store.state.defaultSettings.defaultProximityType.overridable?i("MAInput",{attrs:{label:t.$Labels.MA_minutes,requiredLabel:t.$Labels.MA_Required,type:"number"},model:{value:t.proximitySettings.travelTimeRadiusMinutes,callback:function(e){t.$set(t.proximitySettings,"travelTimeRadiusMinutes",e)},expression:"proximitySettings.travelTimeRadiusMinutes"}}):i("div",{staticClass:"slds-form-element"},[i("label",{staticClass:"slds-form-element__label"},[t._v(t._s(t.$Labels.MA_minutes))]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.proximitySettings.travelTimeRadiusMinutes,expression:"proximitySettings.travelTimeRadiusMinutes"}],staticClass:"slds-input",attrs:{readonly:""},domProps:{value:t.proximitySettings.travelTimeRadiusMinutes},on:{input:function(e){e.target.composing||t.$set(t.proximitySettings,"travelTimeRadiusMinutes",e.target.value)}}})])],1):t._e()]),t._v(" "),i("div",{staticClass:"ma-form-control-wrap"},[i("label",{staticClass:"ma-input-label ma-checkbox slds-grid slds-grid_vertical-align-center"},[i("div",{staticClass:"ma-checkbox-label slds-col slds-p-right_small"},[i("div",[t._v(t._s(t._f("decode")(t.$Labels.Mobile_Settings_Show_Last_Session)))])]),t._v(" "),i("div",{staticClass:"layer-toggle"},[t.$store.state.defaultSettings.retainMobileState.overridable?i("MobileToggle",{model:{value:t.recallMobileSaveState,callback:function(e){t.recallMobileSaveState=e},expression:"recallMobileSaveState"}}):[t.recallMobileSaveState?i("MAIcon",{staticClass:"slds-icon_container slds-current-color",class:{"slds-icon-utility-check":t.recallMobileSaveState},attrs:{title:t.recallMobileSaveState,iconClass:["slds-icon","slds-icon_x-small","slds-icon-text-default"],assistiveText:"True",src:s(2083)}}):i("MAIcon",{staticClass:"slds-icon_container slds-current-color",class:{"slds-icon-utility-steps":!t.recallMobileSaveState},attrs:{title:t.recallMobileSaveState,iconClass:["slds-icon","slds-icon_x-small","slds-icon-text-default"],assistiveText:"False",src:s(2929)}})]],2)])]),t._v(" "),i("div",{staticClass:"ma-form-control-wrap"},[i("label",{staticClass:"ma-input-label ma-checkbox slds-grid slds-grid_vertical-align-center"},[i("div",{staticClass:"ma-checkbox-label slds-col slds-p-right_small"},[t._v("\n                    "+t._s(t._f("decode")(t.$Labels.MapsSetting_MapIt_Proximity))+"\n                ")]),t._v(" "),i("div",{staticClass:"layer-toggle"},[t.$store.state.defaultSettings.mapItProximity.overridable?i("MobileToggle",{model:{value:t.mapItProximity,callback:function(e){t.mapItProximity=e},expression:"mapItProximity"}}):[t.mapItProximity?i("MAIcon",{staticClass:"slds-icon_container slds-current-color",class:{"slds-icon-utility-check":t.mapItProximity},attrs:{title:t.mapItProximity,iconClass:["slds-icon","slds-icon_x-small","slds-icon-text-default"],assistiveText:"True",src:s(2083)}}):i("MAIcon",{staticClass:"slds-icon_container slds-current-color",class:{"slds-icon-utility-steps":!t.mapItProximity},attrs:{title:t.mapItProximity,iconClass:["slds-icon","slds-icon_x-small","slds-icon-text-default"],assistiveText:"False",src:s(2929)}})]],2)])]),t._v(" "),i("div",{staticClass:"ma-form-control-wrap"},[i("label",{staticClass:"ma-input-label ma-checkbox slds-grid slds-grid_vertical-align-center"},[i("div",{staticClass:"ma-checkbox-label slds-col slds-p-right_small"},[t._v("\n                    "+t._s(t._f("decode")(t.$Labels.MapsSetting_Invert_Proximity))+"\n                ")]),t._v(" "),i("div",{staticClass:"layer-toggle"},[t.$store.state.defaultSettings.invertProximity.overridable?i("MobileToggle",{on:{input:t.ChangeVisibilityWhenCircleIsAdded},model:{value:t.invertProximity,callback:function(e){t.invertProximity=e},expression:"invertProximity"}}):[t.invertProximity?i("MAIcon",{staticClass:"slds-icon_container slds-current-color",class:{"slds-icon-utility-check":t.invertProximity},attrs:{title:t.invertProximity,iconClass:["slds-icon","slds-icon_x-small","slds-icon-text-default"],assistiveText:"True",src:s(2083)}}):i("MAIcon",{staticClass:"slds-icon_container slds-current-color",class:{"slds-icon-utility-steps":!t.invertProximity},attrs:{title:t.invertProximity,iconClass:["slds-icon","slds-icon_x-small","slds-icon-text-default"],assistiveText:"False",src:s(2929)}})]],2)])])],1)])}),[],!1,null,"7ebb2bc6",null).exports;var p=s(8050),v=s(5262),h=s(5261),b=s(7806),_=s(7395);const{moment:g}=window,f={components:{MobileSearch:b.Z,MobileToggle:o.Z,MobileSelect:r.Z,MATimePicker:_.Z,MAInput:n.Z},data(){return{transportationMode:"driving",optimizationType:"fastest shift completion",startLocation:{label:"",value:""},endLocation:{label:"",value:""},enableDuplicateStops:!0,enableCurrentLocationTime:!1,routeType:"Standard",stopDuration:"0 hr, 30 min",timeOptions:[],durationOptions:[],showSearchLocationsModal:!1,locationToUpdate:null,transportationModes:[{value:"driving",label:this.$Labels.MA_DRIVING},{value:"walking",label:this.$Labels.MA_WALKING},{value:"bicycling",label:this.$Labels.MA_Bicycle}],optimizationTypes:[{value:"fastest shift completion",label:this.$Labels.MA_Fastest_Shift_Completion},{value:"least windshield time",label:this.$Labels.MA_Least_Windshield_Time}],routeTypes:[{value:"Standard",label:this.$Labels.MA_Standard},{value:"TimeBased",label:this.$Labels.MA_Time_Based_Route}],workingHours:{sunday:{startHour:9,startMinute:0,convertedStart:g("9:00 am","h:mm a"),endHour:17,endMinute:0,convertedEnd:g("5:00 pm","h:mm a"),overnight:!1,workingDay:!0,label:this.$Labels.MA_Sunday},monday:{startHour:9,startMinute:0,convertedStart:g("9:00 am","h:mm a"),endHour:17,endMinute:0,convertedEnd:g("5:00 pm","h:mm a"),overnight:!1,workingDay:!0,label:this.$Labels.MA_Monday},tuesday:{startHour:9,startMinute:0,convertedStart:g("9:00 am","h:mm a"),endHour:17,endMinute:0,convertedEnd:g("5:00 pm","h:mm a"),overnight:!1,workingDay:!0,label:this.$Labels.MA_Tuesday},wednesday:{startHour:9,startMinute:0,convertedStart:g("9:00 am","h:mm a"),endHour:17,endMinute:0,convertedEnd:g("5:00 pm","h:mm a"),overnight:!1,workingDay:!0,label:this.$Labels.MA_Wednesday},thursday:{startHour:9,startMinute:0,convertedStart:g("9:00 am","h:mm a"),endHour:17,endMinute:0,convertedEnd:g("5:00 pm","h:mm a"),overnight:!1,workingDay:!0,label:this.$Labels.MA_Thursday},friday:{startHour:9,startMinute:0,convertedStart:g("9:00 am","h:mm a"),endHour:17,endMinute:0,convertedEnd:g("5:00 pm","h:mm a"),overnight:!1,workingDay:!0,label:this.$Labels.MA_Friday},saturday:{startHour:9,startMinute:0,convertedStart:g("9:00 am","h:mm a"),endHour:17,endMinute:0,convertedEnd:g("5:00 pm","h:mm a"),overnight:!1,workingDay:!0,label:this.$Labels.MA_Saturday}},hasOverNightWorkingHours:!1,breakInformation:{enabled:!1,endHour:12,endMinute:0,startHour:11,startMinute:0,convertedStart:g("11:00 am","h:mm a"),convertedEnd:g("12:00 pm","h:mm a"),startInvalid:!1,endInvalid:!1}}},computed:{routeSettings(){return{transportationMode:this.transportationMode,optimizationType:this.optimizationType,startLocation:this.startLocation,endLocation:this.endLocation,routeType:this.routeType,stopDuration:this.stopDuration,enableDuplicateStops:this.enableDuplicateStops,enableCurrentLocationTime:this.enableCurrentLocationTime,workingHours:this.workingHours,breakInformation:this.breakInformation}}},watch:{routeSettings(t){this.$emit("update-route-settings",t)}},created(){this.parseRouteSettings(),this.buildTimeOptions(),this.buildDurationOptions(),this.buildDriveProfiles()},methods:{parseRouteSettings(){const{userSettings:t={}}=window,{RouteDefaults:e={}}=t;if(this.transportationMode=e.mode||"driving",this.optimizationType=e.optimizationType||"fastest shift completion",this.startLocation={label:e.startLocationLabel||"",value:e.startLocationId||""},this.endLocation={label:e.endLocationLabel||"",value:e.endLocationId||""},this.enableDuplicateStops="true"===String(e.enabledDuplicateStops),this.routeType=e.type||"Standard",t.workingHours)Object.keys(t.workingHours).forEach((e=>{const s=t.workingHours[e],i=this.workingHours[e],a=g(`${s.startHour}:${s.startMinute}`,"H:m");i.convertedStart=g(a,"h:mm a"),i.startHour=Number(a.format("H")),i.startMinute=Number(a.format("m"));const l=g(`${s.endHour}:${s.endMinute}`,"H:m");i.convertedEnd=g(l,"h:mm a"),i.endHour=Number(l.format("H")),i.endMinute=Number(l.format("m")),l.isBefore(a)&&(i.overnight=!0,this.hasOverNightWorkingHours=!0),i.workingDay=!0===s.workingDay}));else{const t=e.start||"9:00 am",s=e.end||"5:00 pm",i=g(t,"h:mm a"),a=g(s,"h:mm a");Object.keys(this.workingHours).forEach((e=>{const l=this.workingHours[e];l.startHour=Number(i.format("H")),l.startMinute=Number(i.format("m")),l.convertedStart=t,l.endHour=Number(a.format("H")),l.endMinute=Number(a.format("m")),l.convertedEnd=s,l.overnight=!1,l.workingDay=!0}))}if(t.floatingBreak){const{floatingBreak:e}=t;this.breakInformation.enabled=!1!==e.enabled,this.breakInformation.startMinute=e.startMinute,this.breakInformation.startHour=e.startHour,this.breakInformation.endMinute=e.endMinute,this.breakInformation.endHour=e.endHour;const s=g(`${e.startHour}:${e.startMinute}`,"H:m");this.breakInformation.convertedStart=g(s,"h:mm a");const i=g(`${e.endHour}:${e.endMinute}`,"H:m");this.breakInformation.convertedEnd=g(i,"h:mm a")}this.stopDuration=e.duration||"0 hr, 30 min";const s=void 0===e.enableCurrentLocationTime||e.enableCurrentLocationTime;this.enableCurrentLocationTime="true"===String(s)},buildDurationOptions(){let t=5;for(;t<360;){const e=Math.floor(t/60),s=t%60,i=(0,h.N4)(this.$Labels.Settings_Time_Duration_Label,[e,s]);this.durationOptions.push({label:i,id:i}),t+=5}},buildTimeOptions(t){t=t||30;const e=window.moment().startOf("day"),s=e.day();for(this.showDuration&&this.timeOptions.push({id:"Set start time...",label:"N/A"});e.day()===s;)this.timeOptions.push({id:e.format("h:mm a"),label:e.format("h:mm a")}),e.add(t,"m")},buildDriveProfiles(){(0,p.wX)("maps.RemoteFunctions.processAJAXRequest",[{ajaxResource:"RouteCalendarAJAXResources",action:"getDriveProfiles"}]).then((t=>{const{success:e=!1,data:s={}}=t;if(e){const{driveProfiles:t=[]}=s;t.forEach((t=>{this.transportationModes.push({label:t.Name,value:t.Id})}))}else console.warn("error getting drive profiles",t);let i=this.transportationMode;0===this.transportationModes.filter((t=>t.value===i)).length&&(i="driving"),this.transportationMode=i}))},toggleSearchLocations(t){this.showSearchLocationsModal=t},locationSearch:(t="")=>new Promise(((e,s)=>{v.Z.searchFavorites(t).then((t=>{const{results:s=[]}=t;e(s)})).catch((t=>{s(new Error(t))}))})),searchLocations(t){this.locationToUpdate=t,this.toggleSearchLocations(!0)},updateSearchValue(t){"start"===this.locationToUpdate?this.startLocation={label:t.label,value:t.id}:this.endLocation={label:t.label,value:t.id}},updateBreak(t,e){this.breakInformation.startInvalid=!1,this.breakInformation.endInvalid=!1;const s=g(`${this.breakInformation.startHour}:${this.breakInformation.startMinute}`,"H:m"),i=g(`${this.breakInformation.endHour}:${this.breakInformation.endMinute}`,"H:m"),a=g(t,"h:mm a",!0);a.isValid()?"start"===e?(a.isAfter(i)&&(this.breakInformation.startInvalid=!0),this.breakInformation.startHour=Number(a.format("H")),this.breakInformation.startMinute=Number(a.format("m")),this.breakInformation.convertedStart=a):"end"===e&&(a.isBefore(s)&&(this.breakInformation.endInvalid=!0),this.breakInformation.endHour=Number(a.format("H")),this.breakInformation.endMinute=Number(a.format("m")),this.breakInformation.convertedEnd=a):this.rebuildBreakTime(e)},rebuildBreakTime(t){let e;if("start"===t){const t=`${this.breakInformation.startHour}:${this.breakInformation.startMinute}`;e=g(t,"H:m").format("h:mm a")}else{const t=`${this.breakInformation.endHour}:${this.breakInformation.endMinute}`;e=g(t,"H:m").format("h:mm a")}this.$nextTick((()=>{"start"===t?this.breakInformation.convertedStart=e:this.breakInformation.convertedEnd=e}))},selectTime(t,e,s){const i=this.workingHours[e];"start"===s?(i.startHour=Number(t.format("H")),i.startMinute=Number(t.format("m")),i.convertedStart=t):(i.endHour=Number(t.format("H")),i.endMinute=Number(t.format("m")),i.convertedEnd=t);const a=g(`${i.startHour}:${i.startMinute}`,"H:m");g(`${i.endHour}:${i.endMinute}`,"H:m").isBefore(a)?(i.overnight=!0,this.hasOverNightWorkingHours=!0):(i.overnight=!1,this.checkOverNightStatus())},checkOverNightStatus(){const t=Object.keys(this.workingHours);let e=!1;for(let s=0;s<t.length;s++){const i=t[s];if(this.workingHours[i].overnight){e=!0;break}}this.hasOverNightWorkingHours=e},getSelectReadOnlyValue(t,e,s,i){const a=e?e.filter((e=>e[s]===t)):[];return a[0]?a[0][i]:null}}},y=(0,u.Z)(f,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"ma-section-title ma-section-title margin-16-0-0"},[t._v("\n        "+t._s(t.$Labels.MA_ROUTES_AND_SCHEDULE)+"\n    ")]),t._v(" "),t._m(0),t._v(" "),i("div",{staticClass:"pad-0-16-8",attrs:{id:"Routing-Settings"}},[t.$store.state.defaultSettings.defaultTransportationMode.overridable?i("MobileSelect",{attrs:{options:t.transportationModes,doDetach:!0,hasNoneOption:!1,label:t.$Labels.MA_Default_Transportation_Mode,keyString:"value",valueString:"label"},model:{value:t.transportationMode,callback:function(e){t.transportationMode=e},expression:"transportationMode"}}):i("div",{staticClass:"slds-form-element"},[i("label",{staticClass:"slds-form-element__label"},[t._v(t._s(t.$Labels.MA_Default_Transportation_Mode))]),t._v(" "),i("input",{staticClass:"slds-input",attrs:{readonly:""},domProps:{value:t.getSelectReadOnlyValue(t.transportationMode,t.transportationModes,"value","label")}})]),t._v(" "),t.$store.state.defaultSettings.optimizationMethod.overridable?i("MobileSelect",{attrs:{options:t.optimizationTypes,doDetach:!0,hasNoneOption:!1,label:t.$Labels.MA_Optimization_Method,keyString:"value",valueString:"label"},model:{value:t.optimizationType,callback:function(e){t.optimizationType=e},expression:"optimizationType"}}):i("div",{staticClass:"slds-form-element"},[i("label",{staticClass:"slds-form-element__label"},[t._v(t._s(t.$Labels.MA_Optimization_Method))]),t._v(" "),i("input",{staticClass:"slds-input",attrs:{readonly:""},domProps:{value:t.getSelectReadOnlyValue(t.optimizationType,t.optimizationTypes,"value","label")}})]),t._v(" "),i("div",{staticClass:"slds-form-element"},[i("label",{staticClass:"slds-form-element__label"},[t._v(t._s(t.$Labels.MA_Default_Start_Location))]),t._v(" "),i("div",{staticClass:"slds-form-element__control slds-input-has-icon slds-input-has-icon_right",on:{click:function(e){t.$store.state.defaultSettings.defaultStartLocation.overridable&&t.searchLocations("start")}}},[t.$store.state.defaultSettings.defaultStartLocation.overridable?[i("MAInput",{staticClass:"slds-input-has-icon slds-input-has-icon_right",attrs:{placeholder:t.$Labels.MA_Search_Fav_Loc,type:"text"},model:{value:t.startLocation.label,callback:function(e){t.$set(t.startLocation,"label",e)},expression:"startLocation.label"}}),t._v(" "),i("MAIcon",{attrs:{src:s(2181),iconClass:["slds-icon","slds-input__icon","slds-input__icon_left","slds-icon-text-default"]}})]:i("input",{directives:[{name:"model",rawName:"v-model",value:t.startLocation.label,expression:"startLocation.label"}],staticClass:"slds-input",attrs:{readonly:""},domProps:{value:t.startLocation.label},on:{input:function(e){e.target.composing||t.$set(t.startLocation,"label",e.target.value)}}})],2)]),t._v(" "),i("div",{staticClass:"slds-form-element"},[i("label",{staticClass:"slds-form-element__label"},[t._v(t._s(t.$Labels.MA_Default_End_Location))]),t._v(" "),i("div",{staticClass:"slds-form-element__control slds-input-has-icon slds-input-has-icon_right",on:{click:function(e){t.$store.state.defaultSettings.defaultEndLocation.overridable&&t.searchLocations("end")}}},[t.$store.state.defaultSettings.defaultEndLocation.overridable?[i("MAInput",{staticClass:"slds-input-has-icon slds-input-has-icon_right",attrs:{placeholder:t.$Labels.MA_Search_Fav_Loc,type:"text"},model:{value:t.endLocation.label,callback:function(e){t.$set(t.endLocation,"label",e)},expression:"endLocation.label"}}),t._v(" "),i("MAIcon",{attrs:{src:s(2181),iconClass:["slds-icon","slds-input__icon","slds-input__icon_left","slds-icon-text-default"]}})]:i("input",{directives:[{name:"model",rawName:"v-model",value:t.endLocation.label,expression:"endLocation.label"}],staticClass:"slds-input",attrs:{readonly:""},domProps:{value:t.endLocation.label},on:{input:function(e){e.target.composing||t.$set(t.endLocation,"label",e.target.value)}}})],2)]),t._v(" "),t.$store.state.defaultSettings.routeType.overridable?i("MobileSelect",{attrs:{options:t.routeTypes,doDetach:!0,hasNoneOption:!1,label:t.$Labels.MA_Label_Default_Route_Type,keyString:"value",valueString:"label"},model:{value:t.routeType,callback:function(e){t.routeType=e},expression:"routeType"}}):i("div",{staticClass:"slds-form-element"},[i("label",{staticClass:"slds-form-element__label"},[t._v(t._s(t.$Labels.MA_Label_Default_Route_Type))]),t._v(" "),i("input",{staticClass:"slds-input",attrs:{readonly:""},domProps:{value:t.getSelectReadOnlyValue(t.routeType,t.routeTypes,"value","label")}})]),t._v(" "),t.$store.state.defaultSettings.stopEventDuration.overridable?i("MobileSelect",{attrs:{options:t.durationOptions,doDetach:!0,hasNoneOption:!1,label:t.$Labels.MA_Default_Event_Duration,keyString:"id",valueString:"label"},model:{value:t.stopDuration,callback:function(e){t.stopDuration=e},expression:"stopDuration"}}):i("div",{staticClass:"slds-form-element"},[i("label",{staticClass:"slds-form-element__label"},[t._v(t._s(t.$Labels.MA_Default_Event_Duration))]),t._v(" "),i("input",{staticClass:"slds-input",attrs:{readonly:""},domProps:{value:t.getSelectReadOnlyValue(t.stopDuration,t.durationOptions,"label","id")}})]),t._v(" "),i("div",{staticClass:"ma-form-control-wrap"},[i("label",{staticClass:"slds-grid slds-grid_vertical-align-center ma-input-label ma-checkbox"},[i("div",{staticClass:"slds-col ma-checkbox-label slds-p-right_small"},[t._v("\n                    "+t._s(t.$Labels.MA_Settings_Allow_Duplicate_Stops)+"\n                ")]),t._v(" "),i("div",{staticClass:"layer-toggle"},[t.$store.state.defaultSettings.enableDuplicateStops.overridable?i("MobileToggle",{model:{value:t.enableDuplicateStops,callback:function(e){t.enableDuplicateStops=e},expression:"enableDuplicateStops"}}):[t.enableDuplicateStops?i("MAIcon",{staticClass:"slds-icon_container slds-current-color",class:{"slds-icon-utility-check":t.enableDuplicateStops},attrs:{title:t.enableDuplicateStops,iconClass:["slds-icon","slds-icon_x-small","slds-icon-text-default"],assistiveText:"True",src:s(2083)}}):i("MAIcon",{staticClass:"slds-icon_container slds-current-color",class:{"slds-icon-utility-steps":!t.enableDuplicateStops},attrs:{title:t.enableDuplicateStops,iconClass:["slds-icon","slds-icon_x-small","slds-icon-text-default"],assistiveText:"False",src:s(2929)}})]],2)])]),t._v(" "),i("div",{staticClass:"ma-form-control-wrap"},[i("label",{staticClass:"slds-grid slds-grid_vertical-align-center ma-input-label ma-checkbox"},[i("div",{staticClass:"ma-checkbox-label slds-col slds-p-right_small"},[t._v("\n                    "+t._s(t.$Labels.MA_Settings_Schedule_On_Time_And_Location)+"\n                ")]),t._v(" "),i("div",{staticClass:"layer-toggle"},[t.$store.state.defaultSettings.currentTimeAndLoc.overridable?i("MobileToggle",{model:{value:t.enableCurrentLocationTime,callback:function(e){t.enableCurrentLocationTime=e},expression:"enableCurrentLocationTime"}}):[t.enableCurrentLocationTime?i("MAIcon",{staticClass:"slds-icon_container slds-current-color",class:{"slds-icon-utility-check":t.enableCurrentLocationTime},attrs:{title:t.enableCurrentLocationTime,iconClass:["slds-icon","slds-icon_x-small","slds-icon-text-default"],assistiveText:"True",src:s(2083)}}):i("MAIcon",{staticClass:"slds-icon_container slds-current-color",class:{"slds-icon-utility-steps":!t.enableCurrentLocationTime},attrs:{title:t.enableCurrentLocationTime,iconClass:["slds-icon","slds-icon_x-small","slds-icon-text-default"],assistiveText:"False",src:s(2929)}})]],2)])])],1),t._v(" "),i("div",{staticClass:"ma-section-title ma-section-title margin-16-0-0"},[t._v("\n        "+t._s(t.$Labels.MA_Shift_Times)+"\n    ")]),t._v(" "),t.hasOverNightWorkingHours?i("div",{staticClass:"ma-message-notification slds-inline_icon_text slds-grid slds-box slds-theme_shade slds-m-around_small"},[t._m(1),t._v(" "),t._m(2)]):t._e(),t._v(" "),t._l(t.workingHours,(function(e,a){return i("div",{key:a,staticClass:"pad-0-16-8 working-hours-wrapper"},[i("div",{staticStyle:{"text-transform":"capitalize"}},[t._v(t._s(e.label))]),t._v(" "),i("div",{staticClass:"slds-grid slds-gutters"},[i("div",{staticStyle:{width:"165px",display:"none"}},[i("MobileToggle",{attrs:{isDisabled:!0,label:e.label},model:{value:e.workingDay,callback:function(s){t.$set(e,"workingDay",s)},expression:"dayInfo.workingDay"}})],1),t._v(" "),i("div",{staticClass:"slds-col slds-size_1-of-3 slds-medium-size_4-of-12 slds-large-size_3-of-12"},[t.$store.state.defaultSettings.schedule[a].overridable?i("MATimePicker",{staticClass:"timePicker",attrs:{date:e.convertedStart,title:"Start Time"},on:{change:function(e){return t.selectTime(e,a,"start")}}}):i("div",{staticClass:"slds-form-element__control slds-input-has-icon slds-input-has-icon_right search-full-width"},[i("input",{staticClass:"slds-input",attrs:{type:"text",placeholder:t.$moment(e.convertedStart).format("h:mm a"),readonly:""}}),t._v(" "),i("MAIcon",{attrs:{src:s(3469),iconClass:["slds-icon","slds-input__icon","slds-input__icon_left","slds-icon-text-default"]}})],1)],1),t._v(" "),i("div",{staticClass:"slds-col slds-size_1-of-3 slds-medium-size_4-of-12 slds-large-size_3-of-12"},[t.$store.state.defaultSettings.schedule[a].overridable?i("MATimePicker",{staticClass:"timePicker",attrs:{date:e.convertedEnd,title:"Start Time"},on:{change:function(e){return t.selectTime(e,a,"end")}}}):i("div",{staticClass:"slds-form-element__control slds-input-has-icon slds-input-has-icon_right search-full-width"},[i("input",{staticClass:"slds-input",attrs:{type:"text",placeholder:t.$moment(e.convertedEnd).format("h:mm a"),readonly:""}}),t._v(" "),i("MAIcon",{attrs:{src:s(3469),iconClass:["slds-icon","slds-input__icon","slds-input__icon_left","slds-icon-text-default"]}})],1)],1)]),t._v(" "),e.overnight?i("div",[t._v("* These working hours carry into the next day.")]):t._e()])})),t._v(" "),i("div",{staticClass:"slds-section slds-is-open"},[i("h3",{staticClass:"slds-section__title slds-theme_shade"},[i("span",{staticClass:"slds-truncate slds-p-horizontal_small"},[t._v(t._s(t.$Labels.MA_Break_Information))])]),t._v(" "),i("div",{staticClass:"slds-p-left_small slds-p-top_small"},[t.$store.state.defaultSettings.includeBreak.overridable?i("MobileToggle",{attrs:{label:t.$Labels.MA_Include_Break},model:{value:t.breakInformation.enabled,callback:function(e){t.$set(t.breakInformation,"enabled",e)},expression:"breakInformation.enabled"}}):[t.breakInformation.enabled?i("MAIcon",{staticClass:"slds-icon_container slds-current-color",class:{"slds-icon-utility-check":t.breakInformation.enabled},attrs:{title:t.breakInformation.enabled,iconClass:["slds-icon","slds-icon_x-small","slds-icon-text-default"],assistiveText:"True",src:s(2083)}}):i("MAIcon",{staticClass:"slds-icon_container slds-current-color",class:{"slds-icon-utility-steps":!t.breakInformation.enabled},attrs:{title:t.breakInformation.enabled,iconClass:["slds-icon","slds-icon_x-small","slds-icon-text-default"],assistiveText:"False",src:s(2929)}})]],2),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.breakInformation.enabled,expression:"breakInformation.enabled"}],staticClass:"pad-0-16-8 working-hours-wrapper"},[i("div",{staticClass:"slds-grid slds-gutters slds-p-top_small"},[i("div",{staticClass:"slds-col slds-size_1-of-3 slds-medium-size_4-of-12 slds-large-size_3-of-12"},[t.$store.state.defaultSettings.shiftBreakHours.overridable?i("MATimePicker",{staticClass:"timePicker",attrs:{date:t.breakInformation.convertedStart,title:"Start Time"},on:{change:function(e){return t.updateBreak(e,"start")}}}):i("div",{staticClass:"slds-form-element__control slds-input-has-icon slds-input-has-icon_right search-full-width"},[i("input",{staticClass:"slds-input",attrs:{type:"text",placeholder:t.$moment(t.breakInformation.convertedStart).format("h:mm a"),readonly:""}}),t._v(" "),i("MAIcon",{attrs:{src:s(3469),iconClass:["slds-icon","slds-input__icon","slds-input__icon_left","slds-icon-text-default"]}})],1)],1),t._v(" "),i("div",{staticClass:"slds-col slds-size_1-of-3 slds-medium-size_4-of-12 slds-large-size_3-of-12"},[t.$store.state.defaultSettings.shiftBreakHours.overridable?i("MATimePicker",{staticClass:"timePicker",attrs:{date:t.breakInformation.convertedEnd,title:"End Time"},on:{change:function(e){return t.updateBreak(e,"end")}}}):i("div",{staticClass:"slds-form-element__control slds-input-has-icon slds-input-has-icon_right search-full-width"},[i("input",{staticClass:"slds-input",attrs:{type:"text",placeholder:t.$moment(t.breakInformation.convertedEnd).format("h:mm a"),readonly:""}}),t._v(" "),i("MAIcon",{attrs:{src:s(3469),iconClass:["slds-icon","slds-input__icon","slds-input__icon_left","slds-icon-text-default"]}})],1)],1)]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.breakInformation.endInvalid||t.breakInformation.startInvalid,expression:"breakInformation.endInvalid || breakInformation.startInvalid"}],staticStyle:{color:"#c23934"}},[t._v("\n                Start time must be after end time\n            ")])])]),t._v(" "),t.showSearchLocationsModal?i("MobileSearch",{attrs:{searchFunction:t.locationSearch,searchKey:"Id",searchLabel:"Name"},on:{"close-search-modal":function(e){return t.toggleSearchLocations(!1)},result:t.updateSearchValue}}):t._e()],2)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"hidden"},[e("select",{attrs:{id:"DriveProfile"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",{staticClass:"ma-icon ma-icon-info",staticStyle:{"font-size":"26px",width:"26px","line-height":"1",height:"26px","padding-right":"8px"}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"slds-col slds-align-middle"},[s("p",[t._v("You have working hours that carry into the next day. Please double-check that times do not overlap for different days as scheduling issues may occur.")])])}],!1,null,"f1430788",null).exports;var S=s(3557);const{moment:M,MA:{isUserLoggedIn:x}}=window,C={components:{GeneralSettings:m,RoutesScheduleSettings:y,MASpinner:i.Z,ConfirmModal:S.Z},props:{whatOS:{type:String,default:""}},data:()=>({generalSettings:{},routeSettings:{},showConfirmModal:!1,isLoading:!1,defaultGeneralSettings:{proximitySettings:{DefaultProximityType:"Circle",circleRadius:"50",circleRadiusUnits:"MILES",radius:"50",travelDistanceRadius:"50",travelDistanceRadiusUnits:"MILES",travelTimeRadiusMinutes:"0",travelTimeRadiusHours:"1"},distanceUnit:"mi",mobilePlotLimit:1e3,recallMobileSaveState:!1,invertProximity:!1,mapItProximity:!1,handleMobileMaps:null},defaultRouteSettings:{transportationMode:"driving",optimizationType:"fastest shift completion",startLocation:{label:"",value:""},endLocation:{label:"",value:""},enableDuplicateStops:!1,enableCurrentLocationTime:!0,routeType:"Standard",routeStart:"9:00 am",routeEnd:"5:00 pm",stopDuration:"0 hr, 30 min",unit:"mi"}}),methods:{...(0,l.mapMutations)("mainNavBar",{mainNavBar__returnToPreviousTab:"returnToPreviousTab",mainNavBar__toggleSubView:"toggleSubView"}),close(){this.$emit("close")},updateGeneralSettings(t){this.generalSettings=t},updateRouteSettings(t){this.routeSettings=t},toggleConfirmModal(t){this.showConfirmModal=t},saveSettings(t=!1){this.isLoading=!0;const e=this.buildSettings(t),s={ajaxResource:"UserAJAXResources",removeMobileState:!this.generalSettings.recallMobileSaveState,action:"store_ma_settings",id:this.$User.Id,jsonstring:JSON.stringify(e),DefaultProximityRadius:this.generalSettings.proximitySettings.radius,PreferredTypeOfMeasurement:this.generalSettings.proximitySettings.unit};if(-1===this.validateBreakTimes(t))return window.MAToastMessages.showError({message:"Error saving settings. Your start time must be after your end time.",closeButton:!0,timeOut:5e3}),void(this.isLoading=!1);(new a.Z).setAction(this.$Remoting.processAJAXRequest).setErrorHandler(((t,e)=>{this.isLoading=!1,console.warn(t),window.MAToastMessages.showError({message:x(t,e,!1)||"Error saving settings...",closeButton:!0,timeOut:0})})).invoke([s],(t=>{this.isLoading=!1,t&&t.success?t.error?window.MAToastMessages.showError({message:"Error saving settings...",closeButton:!0,timeOut:5e3}):(this.updateGlobalSettingsAfterSave(e),this.close(),this.$nextTick((()=>{this.mainNavBar__toggleSubView({doShow:!1,subView:"settings"}),this.mainNavBar__returnToPreviousTab()})),window.MAToastMessages.showSuccess({message:this.$Labels.MA_Success})):window.MAToastMessages.showError({message:"Error saving settings...",closeButton:!0,timeOut:5e3})}),{escape:!1,buffer:!1})},validateBreakTimes(t=!1){const{routeSettings:e}=this;let s=0;if(t)s=0;else{const{breakInformation:t={}}=e;if(t.enabled){const e=M(`${t.startHour}:${t.startMinute}`,"H:m"),i=M(`${t.endHour}:${t.endMinute}`,"H:m");e.isAfter(i)&&(s=-1)}}return s},buildSettings(t=!1){let{generalSettings:e,routeSettings:s}=this;t&&(e=this.defaultGeneralSettings,s=this.defaultRouteSettings);const i={MapItProximityOn:e.mapItProximity,InvertProximity:e.invertProximity,mobilePlotLimit:e.mobilePlotLimit,recallMobileSaveState:e.recallMobileSaveState,handleMobileMaps:e.handleMobileMaps},{PlotOnLoadQueries:a=[]}=window.userSettings;i.PlotOnLoadQueries=a,i.defaultProximitySettings=e.proximitySettings;const{startLocation:l={},endLocation:n={},workingHours:o={},breakInformation:r={}}=s;if(i.RouteDefaults={mode:s.transportationMode,optimizationType:s.optimizationType,driveProfile:s.transportationMode,unit:e.distanceUnit,startLocationId:l.value,startLocationLabel:l.label,endLocationId:n.value,endLocationLabel:n.label,type:s.routeType,duration:s.stopDuration,displayTrafficTime:!0,enabledDuplicateStops:s.enableDuplicateStops,enableCurrentLocationTime:s.enableCurrentLocationTime,enableDraggableWaypoints:!1},window.userSettings&&window.userSettings.floatingBreak){const{floatingBreak:t={}}=window.userSettings;i.floatingBreak={endHour:t.endHour,endMinute:t.endMinute,startHour:t.startHour,startMinute:t.startMinute}}if(t){const t={};["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].forEach((e=>{t[e]={startHour:9,startMinute:0,endHour:17,endMinute:0,overnight:!1,workingDay:!0}})),i.workingHours=t}else{const t=Object.keys(o),e={};t.forEach((t=>{const s=o[t];e[t]={startHour:Number(s.startHour),startMinute:Number(s.startMinute),endHour:Number(s.endHour),endMinute:Number(s.endMinute),overnight:s.overnight,workingDay:!0===s.workingDay}})),i.workingHours=e}t||!r.enabled?i.floatingBreak=null:r.enabled&&(i.floatingBreak={endHour:r.endHour,endMinute:r.endMinute,startHour:r.startHour,startMinute:r.startMinute});const{userSettings:d={}}=window;return d.ListViewColumns&&(i.ListViewColumns={},i.ListViewColumns=d.ListViewColumns||{},i.PageSizeDefault=d.PageSizeDefault||"50"),i},updateGlobalSettingsAfterSave(t){window.userSettings={...window.userSettings,...t}},resetSettings(){this.toggleConfirmModal(!0)}}},L=(0,u.Z)(C,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"view-panel in slds-scope",attrs:{id:"advancedSettingsWrap"}},[s("MASpinner",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}]}),t._v(" "),s("div",{staticClass:"nav-drawer-inner flex-vertical"},[s("div",{staticClass:"advanced-settings-header slds-grid slds-grid_vertical-align-center slds-p-around_medium"},[s("div",[s("button",{staticClass:"slds-button pull-left slds-button_neutral",on:{click:t.close}},[t._v("\n                    "+t._s(t._f("decode")(t.$Labels.MA_Cancel))+"\n                ")])]),t._v(" "),s("div",{staticClass:"slds-col slds-text-heading_medium slds-text-align_center slds-p-horizontal_xx-small"},[t._v("\n                "+t._s(t._f("decode")(t.$Labels.MA_ADVANCED_SETTINGS))+"\n            ")]),t._v(" "),s("div",[s("button",{staticClass:"slds-button pull-right slds-button_brand",on:{click:function(e){return t.saveSettings(!1)}}},[t._v("\n                    "+t._s(t._f("decode")(t.$Labels.MA_Save))+"\n                ")])])]),t._v(" "),s("div",{staticClass:"flex-grow-1 momentum-scrolling-y slds-scrollable"},[s("GeneralSettings",{attrs:{whatOS:t.whatOS},on:{"update-general-settings":t.updateGeneralSettings}}),t._v(" "),s("RoutesScheduleSettings",{on:{"update-route-settings":t.updateRouteSettings}}),t._v(" "),s("div",{staticClass:"pad-16"},[s("button",{staticClass:"slds-button slds-button_neutral",on:{click:t.resetSettings}},[t._v("\n                    "+t._s(t._f("decode")(t.$Labels.MA_Reset_Settings))+"\n                ")])])],1)]),t._v(" "),t.showConfirmModal?s("ConfirmModal",{on:{close:t.toggleConfirmModal,confirm:function(e){return t.saveSettings(!0)}}}):t._e()],1)}),[],!1,null,"57dd3fcb",null).exports},7395:(t,e,s)=>{"use strict";s.d(e,{Z:()=>a});const i={components:{MAModal:s(4141).Z},props:{h24:{type:Boolean,default:!1},interval:{type:Object,default:()=>({h:1,m:1})},date:{type:Object,required:!0},timeFormat:{type:String,default:"h:mm a"},title:{type:String,default:"Time"},showNextDayToggle:{type:Boolean,default:!1},isNextDay:{type:Boolean,default:!1}},data:()=>({hours:[],minutes:[],ampmList:["am","pm"],openModal:!1,currentHour:"",currentMinute:"",ampm:"",toggleNextDay:!1}),computed:{timeString(){return this.date.format(this.timeFormat)}},methods:{close(){this.openModal=!1},doOpenModal(){this.openModal=!0,this.updateCurrentTime(),this.build()},build(){this.buildHours(),this.buildMinutes(),this.$nextTick((()=>{this.scrollActiveIntoView()})),this.toggleNextDay=this.isNextDay||!1},buildHours(){this.hours=[];const t=this.interval.h,e=this.h24?23:12;for(let s=this.h24?0:1;s<=e;s+=t){let t=String(s);s<10&&(t=`0${s}`),this.hours.push(t)}},buildMinutes(){this.minutes=[];const t=this.interval.m;for(let e=0;e<=59;e+=t){let t=String(e);e<10&&(t=`0${e}`),this.minutes.push(t)}},updateCurrentTime(){const t=this.h24?"HH":"hh";this.currentHour=this.date.format(t),this.currentMinute=this.date.format("mm"),this.h24||(this.ampm=this.date.format("a"))},scrollActiveIntoView(){document.querySelectorAll(".timePicker-item.selected ").forEach((t=>{t.scrollIntoView({block:"center",inline:"center"})}))},updateHours(t){this.currentHour=t},updateMinutes(t){this.currentMinute=t},updateAmPm(t){this.ampm=t},saveTime(){const t=this.date.clone();let e=this.currentHour;this.h24||"pm"!==this.ampm?this.h24||"am"!==this.ampm||"12"!==this.currentHour||(e=0):e="12"!==this.currentHour?parseFloat(this.currentHour)+12:this.currentHour,t.set({hour:e,minute:this.currentMinute}),this.toggleNextDay&&!this.isNextDay&&t.add(1,"day"),!this.toggleNextDay&&this.isNextDay&&t.subtract(1,"day"),this.$emit("change",t),this.close()}}},a=(0,s(1900).Z)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{on:{click:t.doOpenModal}},[t._v("\n        "+t._s(t._f("decode")(t.timeString))+"\n    ")]),t._v(" "),t.openModal?s("MAModal",{staticClass:"time-modal",attrs:{doDetach:!0,title:t.title},on:{close:t.close}},[s("div",{attrs:{slot:"content"},slot:"content"},[s("div",{staticClass:"ma-time-wrapper slds-grid slds-grid_vertical-align-center"},[s("div",{staticClass:"ma-time-col"},t._l(t.hours,(function(e,i){return s("button",{key:i,staticClass:"timePicker-item",class:{selected:t.currentHour===e},on:{click:function(s){return t.updateHours(e)}}},[t._v("\n                        "+t._s(e)+"\n                    ")])})),0),t._v(" "),s("div",{staticClass:"ma-time-col"},t._l(t.minutes,(function(e,i){return s("button",{key:i,staticClass:"timePicker-item",class:{selected:t.currentMinute===e},on:{click:function(s){return t.updateMinutes(e)}}},[t._v("\n                        "+t._s(e)+"\n                    ")])})),0),t._v(" "),t.h24?t._e():s("div",{staticClass:"ma-time-col"},t._l(t.ampmList,(function(e,i){return s("button",{key:i,staticClass:"timePicker-item",class:{selected:e===t.ampm},on:{click:function(s){return t.updateAmPm(e)}}},[t._v("\n                        "+t._s(e)+"\n                    ")])})),0)]),t._v(" "),t.showNextDayToggle?s("div",{staticClass:"slds-border_top"},[s("div",{staticClass:"slds-p-around_medium slds-grid"},[s("div",{staticClass:"slds-form-element slds-col_bump-left"},[s("div",{staticClass:"slds-form-element__control"},[s("div",{staticClass:"slds-checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.toggleNextDay,expression:"toggleNextDay"}],attrs:{id:"nextDayToggle",type:"checkbox"},domProps:{checked:Array.isArray(t.toggleNextDay)?t._i(t.toggleNextDay,null)>-1:t.toggleNextDay},on:{change:function(e){var s=t.toggleNextDay,i=e.target,a=!!i.checked;if(Array.isArray(s)){var l=t._i(s,null);i.checked?l<0&&(t.toggleNextDay=s.concat([null])):l>-1&&(t.toggleNextDay=s.slice(0,l).concat(s.slice(l+1)))}else t.toggleNextDay=a}}}),t._v(" "),s("label",{staticClass:"slds-checkbox__label",attrs:{for:"nextDayToggle"}},[s("span",{staticClass:"slds-checkbox_faux"}),t._v(" "),s("span",{staticClass:"slds-form-element__label"},[t._v("Next Day")])])])])])])]):t._e()]),t._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("button",{staticClass:"slds-button slds-button_neutral",on:{click:t.close}},[t._v("\n                "+t._s(t.$Labels.MA_Cancel)+"\n            ")]),t._v(" "),s("button",{staticClass:"slds-button slds-button_brand",on:{click:t.saveTime}},[t._v("\n                "+t._s(t.$Labels.MA_Done)+"\n            ")])])]):t._e()],1)}),[],!1,null,"c0f0ae1a",null).exports},7579:(t,e,s)=>{"use strict";s.d(e,{Z:()=>a});const i={name:"MASelect",props:{label:{type:String,default:""},options:{type:Object|Array,required:!0},keyString:{type:String,default:"key"},valueString:{type:String,default:"value"},hasNoneOption:{type:Boolean,default:!0},value:{type:String|Number,default:""},default:{type:String|Number,default:""},isRequired:{type:Boolean,default:!1},isInvalid:{type:Boolean,default:!1},placeholder:{type:String,default:""},isMultiSelect:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data(){return{defaultValue:this.default}},computed:{showLabel(){return this.label}},watch:{value(){const t={};t[this.keyString]=this.value,t[this.valueString]=this.getSelectedValue(),this.$emit("change",t)}},methods:{decodeHtml(t){if(!t)return t;const e=window.document.createElement("textarea");return e.innerHTML=t,e.value},getKey(t){return"string"==typeof t||"number"==typeof t?t:t[this.keyString]},getValue(t){return"string"==typeof t||"number"==typeof t?t:t[this.valueString]},isSelected(t){let e=!1;return e=Array.isArray(this.value)?this.value.includes(this.getKey(t)):this.getKey(t)===this.value,e},change(t){t||(t=null);let e=[];for(let s=0;s<t.length;s++){const i=t[s];e.push(i.value)}if(1===e.length){const[t]=e;e=t}this.$emit("input",e)},getSelectedValue(){if(!this.options||!this.options.length)return"";const t=this.options.find((t=>this.getKey(t)===this.value));return t?this.decodeHtml(this.getValue(t)):null},remove(){this.$emit("input",""),this.doHide()}}},a=(0,s(1900).Z)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"slds-form-element",class:{"slds-has-error":t.isInvalid}},[t.showLabel?s("label",{staticClass:"slds-form-element__label"},[t.isRequired?s("abbr",{staticClass:"slds-required",attrs:{title:"required"}},[t._v("*")]):t._e(),t._v("\n        "+t._s(t.decodeHtml(t.label))+"\n    ")]):t._e(),t._v(" "),s("div",{staticClass:"slds-is-relative"},[s("select",t._b({staticClass:"slds-select",staticStyle:{overflow:"auto"},attrs:{placeholder:t.placeholder,disabled:t.disabled},on:{change:function(e){return t.change(e.target.selectedOptions)}}},"select",{multiple:t.isMultiSelect},!1),[t.hasNoneOption?s("option",{attrs:{value:""}},[t._v("\n                -- None --\n            ")]):t._e(),t._v(" "),t._l(t.options,(function(e,i){return s("option",{key:i,domProps:{value:t.getKey(e),selected:t.isSelected(e)}},[t._v("\n                "+t._s(t.getValue(e))+"\n            ")])}))],2),t._v(" "),t._m(0)]),t._v(" "),t.isInvalid?s("div",{staticClass:"slds-form-element__help"},[t._t("errors",(function(){return[t._v("This field is required.")]}))],2):t._e()])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"select-icon"},[e("span",{staticClass:"ma-icon ma-icon-down"})])}],!1,null,null,null).exports},3557:(t,e,s)=>{"use strict";s.d(e,{Z:()=>a});const i={components:{MAModal:s(4141).Z},data:()=>({}),methods:{close(){this.$emit("close",!1)},confirm(){this.$emit("confirm"),this.close()}}},a=(0,s(1900).Z)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("MAModal",{attrs:{doDetach:!0,closeLabel:t.$Labels.MA_Close,title:"Maps"},on:{close:t.close}},[s("div",{attrs:{slot:"content"},slot:"content"},[t._v("\n        "+t._s(t._f("decode")(t.$Labels.MA_Are_You_Sure))+"\n    ")]),t._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("button",{staticClass:"slds-button slds-button_neutral",on:{click:t.close}},[t._v("\n            "+t._s(t._f("decode")(t.$Labels.MA_Cancel))+"\n        ")]),t._v(" "),s("button",{staticClass:"slds-button slds-button_brand",on:{click:t.confirm}},[t._v("\n            "+t._s(t._f("decode")(t.$Labels.MA_Yes))+"\n        ")])])])}),[],!1,null,null,null).exports},7806:(t,e,s)=>{"use strict";s.d(e,{Z:()=>n});var i=s(4141);const{getProperty:a}=window,l={components:{MAModal:i.Z},props:{searchFunction:{type:Function,required:!0},searchKey:{type:String,required:!0},searchLabel:{type:String,required:!0},minimumSearchLength:{type:Number,required:!1,default:2}},data:()=>({searchResults:[],styleObject:{position:"relative",padding:0,background:"#fff",border:"1px solid #dddbda","border-radius":".25rem","background-clip":"padding-box","box-shadow":"0 2px 2px 0 rgba(0,0,0,.1)"},searchTerm:"",isLoading:!1,searchTimeout:null}),computed:{showEmptyState(){const t=0===this.searchResults.length,e=this.searchTerm.length<=this.minimumSearchLength;return e||t||e}},watch:{searchTerm(t){t.length>this.minimumSearchLength&&this.debounceSearch(t)}},mounted(){this.$nextTick((()=>{this.$refs.mobileSearchInput.focus()}))},methods:{returnResult(t){this.$emit("result",t),this.close()},close(){this.$emit("close-search-modal")},clearInput(){this.returnResult({id:"",label:""})},debounceSearch(t){clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout((()=>{this.isLoading=!0,this.searchResults=[],this.searchFunction(t).then((t=>{this.processResults(t)})).catch((t=>{console.warn(t)})).finally((()=>{this.isLoading=!1}))}),250)},processResults(t){t.forEach((t=>{this.searchResults.push({label:a(t,this.searchLabel,!1),id:a(t,this.searchKey,!1),result:t})}))}}},n=(0,s(1900).Z)(l,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("MAModal",{staticClass:"slds-modal_large",attrs:{doDetach:!0,title:t.$Labels.MA_Search,closeLabel:t.$Labels.MA_Close},on:{close:t.close}},[s("div",{attrs:{slot:"content"},slot:"content"},[s("div",{staticClass:"ma-form-control has-inset-icon--right"},[s("div",{staticClass:"slds-form-element"},[s("div",{staticClass:"slds-form-element__control slds-input-has-icon slds-input-has-icon_right"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],staticClass:"slds-input__icon-group slds-input__icon-group_right"},[s("div",{staticClass:"slds-spinner slds-spinner_brand slds-spinner_x-small slds-input__spinner",staticStyle:{right:"5px"},attrs:{role:"status"}},[s("span",{staticClass:"slds-assistive-text"},[t._v("Loading")]),t._v(" "),s("div",{staticClass:"slds-spinner__dot-a"}),t._v(" "),s("div",{staticClass:"slds-spinner__dot-b"})])]),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading,expression:"!isLoading"}],staticClass:"slds-icon slds-input__icon slds-input__icon_left slds-icon-text-default ma-icon ma-icon-search"}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchTerm,expression:"searchTerm"}],ref:"mobileSearchInput",staticClass:"slds-input",attrs:{placeholder:t.$Labels.MA_Search+"...",type:"text"},domProps:{value:t.searchTerm},on:{input:function(e){e.target.composing||(t.searchTerm=e.target.value)}}})])])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showEmptyState,expression:"showEmptyState"}],staticClass:"search-empty-state"},[s("div",{staticClass:"text-center"},[s("span",{staticClass:"ma-icon ma-icon-info ma-icon--large"})]),t._v(" "),s("div",[s("p",{staticClass:"text-center"},[t._v(t._s(t.$Labels.Mobile_Settings_Search_Help_Text))])])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.showEmptyState,expression:"!showEmptyState"}],staticClass:"slds-m-top_medium"},t._l(t.searchResults,(function(e,i){return s("article",{key:i,staticClass:"slds-card",style:t.styleObject,on:{click:function(s){return t.returnResult(e)}}},[s("div",{staticClass:"slds-card__header slds-grid"},[s("header",{staticClass:"slds-media slds-media_center slds-has-flexi-truncate"},[s("div",{staticClass:"slds-media__body"},[s("h2",{staticClass:"slds-card__header-title"},[s("div",{staticClass:"slds-card__header-link slds-truncate"},[s("span",[t._v(t._s(t._f("decode")(e.label)))])])])])])])])})),0)]),t._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("div",{staticClass:"float-right"},[s("button",{staticClass:"slds-button slds-button_neutral",on:{click:t.close}},[t._v("\n                "+t._s(t.$Labels.MA_Cancel)+"\n            ")]),t._v(" "),s("button",{staticClass:"slds-button slds-button_brand",on:{click:t.clearInput}},[t._v("\n                "+t._s(t.$Labels.MA_Clear)+"\n            ")])])])])}),[],!1,null,null,null).exports},3294:(t,e,s)=>{"use strict";s.d(e,{Z:()=>a});const i={name:"MAInput",mixins:[s(3826).Z],props:{value:{type:[String,Number],required:!0},isRequired:{type:Boolean,default:!1},useTextArea:{type:Boolean,default:!1},disableResize:{type:Boolean,default:!1},label:{type:String,default:""},errors:{type:Array,default:()=>[]},placeholder:{type:String,default:""},type:{type:String,default:"text"},isInvalid:{type:Boolean,default:!1},isDisabled:{type:Boolean,default:!1},hasFocus:{type:Boolean,default:!1},requiredLabel:{type:String,default:"Required"}},computed:{showLabel(){return this.label},hasErrors(){return this.errors&&this.errors.length},listeners(){return{...this.$listeners,input:t=>this.$emit("input",t.target.value)}}},watch:{hasFocus(t){t&&this.focus()}},mounted(){this.hasFocus&&this.focus()},methods:{focus(){this.$refs.input.focus(),this.$refs.input.select()}}},a=(0,s(1900).Z)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"slds-form-element",class:{"slds-has-error":t.isInvalid}},[t.showLabel?s("label",{staticClass:"slds-form-element__label"},[t.isRequired?s("abbr",{staticClass:"slds-required",attrs:{title:t.requiredLabel}},[t._v("*")]):t._e(),t._v("\n        "+t._s(t.decodeHtml(t.label))+"\n        "),t._t("label")],2):t._e(),t._v(" "),s("div",{staticClass:"slds-form-element__control",staticStyle:{position:"relative"}},[t.useTextArea?s("textarea",t._g({staticClass:"slds-textarea",attrs:{disabled:t.isDisabled,placeholder:t.placeholder},domProps:{value:t.decodeHtml(t.value)}},t.listeners)):s("input",t._g({ref:"input",staticClass:"slds-input",attrs:{type:t.type,disabled:t.isDisabled,placeholder:t.placeholder},domProps:{value:t.decodeHtml(t.value)},on:{blur:function(e){return t.$emit("update:hasFocus",!1)}}},t.listeners)),t._v(" "),t._t("extendInput")],2),t._v(" "),t.isInvalid?s("div",{staticClass:"slds-form-element__help"},[t._t("errors")],2):t._e()])}),[],!1,null,"71386de2",null).exports}}]);