"use strict";(globalThis.webpackChunkmaps_desktop=globalThis.webpackChunkmaps_desktop||[]).push([[997],{2164:(e,t,s)=>{s.r(t),s.d(t,{default:()=>c});var d=s(5908),a=s(675),i=s(3589),u=s(5261),l=s(7082),o=s(9159);const r={components:{ScheduleHeader:()=>({...(0,i.Z)(),component:s.e(7797).then(s.bind(s,8879)),error:o.Z}),ScheduleBody:()=>({...(0,i.Z)(),component:s.e(7557).then(s.bind(s,7748)),error:o.Z}),ScheduleFooter:()=>({...(0,i.Z)(),component:s.e(376).then(s.bind(s,9430)),error:o.Z}),MASpinner:a.Z},data:()=>({}),computed:{...(0,d.mapState)("schedule",{schedule__isInitialized:"isInitialized"}),...(0,d.mapGetters)("schedule",{schedule__isLoading:"isLoading",schedule__queue:"queue"})},created(){this.$bus.$on("remove-schedule-route",this.schedule__removeRoute),this.$bus.$on("add-to-schedule",this.addItemsToQueue),this.schedule__updateScheduleReady()},destroyed(){this.$bus.$off("remove-schedule-route"),this.$bus.$off("add-to-schedule")},methods:{...(0,d.mapMutations)("schedule",{schedule__updateQueue:"updateQueue",schedule__updateScheduleReady:"updateScheduleReady"}),...(0,d.mapActions)("schedule",{schedule__removeRoute:"removeRoute"}),getScheduleData({saveEventsState:e=!1,shiftId:t}){this.$emit("getScheduleData",{saveEventsState:e,shiftId:t})},addItemsToQueue(e){function t(e,t){let s=!1;return s=e.isMALocation?e.placeId===t.placeId:e.relationshipId===t.relationshipId,s}this.schedule__removeRoute();const s=[];let d=!1;const a={total:0,success:!1};e.forEach((e=>{if(150===this.schedule__queue.length)return void(d=!0);if(void 0!==e.isSupported&&!e.isSupported)return void s.push({title:e.marker.title,baseObjectLabel:e.baseObjectLabel});e.LinkId__c&&(e.relationshipId=e.LinkId__c);const i=null!=e.lat&&null!=e.lng;e.spatial=i,e.showActionMenu=!1,e.excludeFromRoute=!i,i||(e.className="non-spatial-cell"),e.id=(0,u.x$)(),e.Name=e.title,e.baseObjectId=e.baseObjectId;let l="";e.marker&&(l=e.marker.address||e.marker.FormattedAddress_MA),e.Address__c=l;const{prioritySettings:{type:o="",label:r="",sfdcFieldType:c="number",sfdcFieldValue:h=0}={}}=e.marker;e.priorityValue=h,e.priority=0,e.priorityType=o,e.priorityLabel=r,e.priorityFieldType=c,e.guideWaypoint={hasWaypoint:!1,isLocked:!0},delete e.marker,delete e.supportsActivities,delete e.baseObjectLabel,this.schedule__queue.find(t.bind(this,e))||(this.schedule__updateQueue(e),a.success=!0,a.total+=1)})),s.length,a.success&&window.MAToastMessages.showSuccess({message:`${a.total} record(s) added to Schedule`}),d&&l.Z.showErrorMessage(82700,l.D.SCHEDULE)}}},c=(0,s(1900).Z)(r,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.schedule__isInitialized?s("div",{staticClass:"schedule-wrapper slds-grid slds-grid_vertical"},[s("MASpinner",{directives:[{name:"show",rawName:"v-show",value:e.schedule__isLoading,expression:"schedule__isLoading"}]}),e._v(" "),s("ScheduleHeader",{on:{getScheduleData:e.getScheduleData}}),e._v(" "),s("ScheduleBody"),e._v(" "),s("ScheduleFooter")],1):e._e()}),[],!1,null,"7946feef",null).exports}}]);