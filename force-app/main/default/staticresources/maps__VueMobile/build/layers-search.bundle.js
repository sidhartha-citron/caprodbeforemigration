(globalThis.webpackChunkmaps_desktop=globalThis.webpackChunkmaps_desktop||[]).push([[9670],{4173:(e,t,a)=>{e.exports=a.p+"images/db7d9ca69c5dbfe3c77d602857a98939.svg"},4922:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(5908),i=a(5511);const l={components:{MobileToggle:a(4549).Z},props:{layerData:{type:Object,required:!0}},data:()=>({}),computed:{...(0,s.mapGetters)("layers",{layers__getPlottedLayerById:"getPlottedLayerById"}),isPlotted:{get(){return this.layers__getPlottedLayerById(this.layerData.id).length>0},set(){this.toggleLayer()}},defaultAction(){return this.layerData.defaultAction},qid(){return this.layerData.qid},id(){return this.layerData.id},subType(){let e=this.layerData.baseObjectLabel;const t=this.layerData.type;return"datalayer"===t?e=this.$Labels.MA_Data_Layer:"favorite"===t&&(e=this.$Labels.MA_Favorite),"N/A"===e?"":e}},created(){this.processExtraPlotOptions()},methods:{...(0,s.mapMutations)("layers",{layer__updatesavedLoadingToggle:"updatesavedLoadingToggle"}),...(0,s.mapActions)("layers",{layers__getFolderData:"getFolderData"}),layerActionsClickHandler(){if(this.$bus.$emit("hide-search"),"open-folder"===this.defaultAction)this.layer__updatesavedLoadingToggle(!0),this.layers__getFolderData(this.layerData.id).catch((e=>{console.warn(e)})).finally((()=>{this.layer__updatesavedLoadingToggle(!1)}));else if(this.isPlotted){const e=`#ACTIVE_${this.id} .layer-nest-click-area`;document.querySelector(e).click()}else{const e=i.Z.getLayerActionFunction(this.layerData.type,this.defaultAction);if("javascript"===e.type)e.fn(this.layerData);else{const t=e.fn;this.$bus.$emit(t,this.layerData,(()=>{}))}}},processExtraPlotOptions(){if("marker"===this.layerData.type){this.defaultAction.indexOf("visible")>-1&&(this.layerData.visibleAreaOnly=!0);const e={clusters:"Cluster",markers:"Markers",scatter:"Scatter",heatmap:"Heatmap"},t=["clusters","markers","scatter","heatmap"].filter((e=>-1!==this.defaultAction.indexOf(e)));let a="Default";t.length>0&&(a=e[t[0]],this.layerData.renderAs=[a])}},toggleLayer(){if(this.isPlotted){const e=this.layers__getPlottedLayerById(this.layerData.id)||[];if(e.length>0){const t=e[0],{qid:a=""}=t;this.$bus.$emit("remove-layer",a)}else window.MAToastMessages.showWarning({message:"Unable to remove layer",subMessage:`Please remove the layer from the ${this.$Labels.MA_PLOT_ON_MAP} tab`,timeOut:1e4,closeButton:!0})}else this.layerActionsClickHandler();window.userSettings.recallMobileSaveState&&window.setMobileState()}}},r=(0,a(1900).Z)(l,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"layerRow",staticClass:"MAFolderTemplate"},[s("div",e._b({staticClass:"layer-item slds-grid ma-folder-item qidLocation",attrs:{nodetype:e.layerData.nodetype,type:e.layerData.type}},"div",{"data-id":e.layerData.id,"perm-create":e.layerData.create,"perm-delete":e.layerData.delete,qid:e.layerData.qid,"perm-export":e.layerData.export,"perm-modify":e.layerData.modify,"perm-read":e.layerData.read,"perm-setpermissions":e.layerData.setpermissions},!1),["folder"!==e.layerData.type?s("div",{staticClass:"slds-p-around_medium slds-grid slds-grid_vertical-align-center"},[s("MobileToggle",{model:{value:e.isPlotted,callback:function(t){e.isPlotted=t},expression:"isPlotted"}})],1):e._e(),e._v(" "),s("div",{staticClass:"layer-nest-click-area layer-item_clickable-area slds-col slds-grid slds-p-left_medium",attrs:{action:e.defaultAction},on:{click:e.layerActionsClickHandler}},["arcgisonline"===e.layerData.type?s("div",{staticClass:"layer-item_icon slds-grid slds-grid_vertical-align-center slds-align-middle slds-p-right_medium"},[s("img",{staticClass:"arcGISQueryImage",attrs:{width:"24",height:"24",src:a(4173)}})]):s("div",{staticClass:"layer-item_icon slds-grid slds-grid_vertical-align-center slds-p-right_medium ma-icon ma-icon-",attrs:{type:e.layerData.type}}),e._v(" "),s("div",{staticClass:"layer-item_text slds-col slds-align-middle slds-p-vertical_small"},[s("div",{staticClass:"ma-item-name-title basicinfo-name slds-truncate"},[e._v(e._s(e._f("decode")(e.layerData.name)))]),e._v(" "),"folder"!==e.layerData.type?s("div",{staticClass:"layer-item_subtext ma-item-name-subtitle basicinfo-type slds-truncate"},[e._v("\n                    "+e._s(e._f("decode")(e.subType))+"\n                ")]):e._e()]),e._v(" "),e._m(0)])])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"slds-p-around_medium slds-grid slds-grid_align-end slds-grid_vertical-align-center"},[t("span",{staticClass:"layer-item_chevron ma-icon ma-icon-chevronright"})])}],!1,null,"5e3c8f0e",null).exports},5692:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var s=a(675),i=a(5511),l=a(5908),r=a(4922);const d={components:{MASpinner:s.Z,LayerRow:r.Z},data:()=>({searchTerm:"",isLoading:!1,searchTimeout:null,showSearch:!1}),computed:{...(0,l.mapGetters)("layers",{layers__searchLayers:"searchLayers"}),showEmptyState(){const e=0===this.layers__searchLayers.length,t=this.searchTerm.length<=2;return t||e||t}},watch:{searchTerm(e){e.length>2&&this.debounceSearch(e)}},created(){this.$bus.$on("hide-search",this.clearSearch)},destroyed(){this.$bus.$off("show-search"),this.$bus.$off("hide-search")},methods:{...(0,l.mapMutations)("layers",{layer__udpateSearchLayers:"udpateSearchLayers"}),debounceSearch(e){clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout((()=>{this.searchLayers(e)}),250)},searchLayers(e){this.isLoading=!0,i.Z.searchLayers(e).then((e=>{this.layer__udpateSearchLayers(i.Z.buildLayerData(i.Z.excludeExternalObjectMarkerLayers(e)))})).finally((()=>{this.isLoading=!1}))},clearSearch(){this.layer__udpateSearchLayers([]),this.searchTerm="",this.$emit("hide-search")}}},c=(0,a(1900).Z)(d,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"fade"}},[a("div",{staticClass:"main-panel in slds-grid slds-grid_vertical",attrs:{id:"layersSearchWrapper"}},[a("MASpinner",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}]}),e._v(" "),a("div",{staticClass:"slds-grid slds-p-vertical_small slds-p-horizontal_medium slds-border_bottom",staticStyle:{width:"100%"}},[a("div",{staticClass:"slds-form-element__control slds-input-has-icon slds-input-has-icon_left-right slds-col"},[a("div",{staticClass:"slds-icon slds-input__icon slds-input__icon_left slds-icon-text-default ma-icon ma-icon-search"}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.searchTerm,expression:"searchTerm"}],staticClass:"slds-input ma-input clearable-input",attrs:{id:"foldersearchInput",placeholder:e._f("decode")(e.$Labels.MA_Search),type:"text"},domProps:{value:e.searchTerm},on:{input:function(t){t.target.composing||(e.searchTerm=t.target.value)}}}),e._v(" "),a("button",{staticClass:"slds-button slds-button_icon slds-input__icon slds-input__icon_right clear-input-button",staticStyle:{display:"none"},on:{click:e.clearSearch}},[a("span",{staticClass:"slds-button__icon slds-icon-text-light ma-icon ma-icon-clear"})])]),e._v(" "),a("div",[a("button",{staticClass:"slds-button slds-button_neutral hide-search slds-m-left_x-small",attrs:{id:"hideLayerSearch"},on:{click:e.clearSearch}},[e._v("\n                    "+e._s(e.$Labels.MA_Cancel)+"\n                ")])])]),e._v(" "),a("div",{staticClass:"slds-col slds-grid slds-grid_vertical-align-center slds-grid_align-center momentum-scrolling-y slds-scrollable",attrs:{id:"foldersearch-results-contents"}},[a("transition",{attrs:{name:"fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.showEmptyState,expression:"showEmptyState"}],attrs:{id:"emptyStatePositioner"}},[a("div",{staticClass:"slds-grid slds-grid_vertical slds-grid_align-center slds-grid_vertical-align-center",staticStyle:{height:"100%"}},[a("div",{staticClass:"slds-illustration slds-illustration_small slds-grid slds-grid_vertical slds-grid_align-center"},[a("svg",{staticClass:"slds-illustration__svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50",height:"150px",width:"150px"}},[a("path",{staticStyle:{fill:"#c2e8ff"},attrs:{d:"M35,19a4.012,4.012,0,0,0-4-4H5a4.012,4.012,0,0,0-4,4V45a4.012,4.012,0,0,0,4,4H31a4.012,4.012,0,0,0,4-4ZM42,1H16A6.957,6.957,0,0,0,9,8v3H35a4.012,4.012,0,0,1,4,4V41h3a6.957,6.957,0,0,0,7-7V8A6.957,6.957,0,0,0,42,1Z"}}),a("path",{staticStyle:{fill:"#fff"},attrs:{d:"M28.772,40.807,22.73,34.8A8.588,8.588,0,1,0,7.222,30.614,8.6,8.6,0,0,0,20.8,36.766l6.043,6.043a.682.682,0,0,0,.947,0l.946-.947A.784.784,0,0,0,28.772,40.807ZM9.916,29.74A5.861,5.861,0,1,1,15.777,35.6,5.88,5.88,0,0,1,9.916,29.74Z"}})]),e._v(" "),a("div",{staticClass:"slds-text-longform"},[a("div",{staticClass:"slds-text-heading_medium"},[e._v(e._s(e._f("decode")(e.$Labels.MA_SEARCH_ABOVE_FOR_AVAILABLE_LAYERS)))])])])])])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.showEmptyState,expression:"!showEmptyState"}],staticClass:"slds-grid slds-grid_vertical slds-col",staticStyle:{height:"100%",width:"100%"}},e._l(e.layers__searchLayers,(function(e){return a("LayerRow",{key:e.qid,ref:"layer-"+e.qid,refInFor:!0,attrs:{layerData:e}})})),1)],1)],1)])}),[],!1,null,"781de2d6",null).exports}}]);