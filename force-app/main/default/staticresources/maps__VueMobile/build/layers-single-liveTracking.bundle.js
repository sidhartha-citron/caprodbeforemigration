(globalThis.webpackChunkmaps_desktop=globalThis.webpackChunkmaps_desktop||[]).push([[2270],{1216:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var i=s(2423);const{MARemoting:a}=window;class n{static getLiveSummaryAndHistory(e){return new Promise(((t,s)=>{(new i.Z).setAction(a.MapAnythingIORequest).setErrorHandler(this.handleRemoteActionError.bind(this)).invoke([{method:"get",action:"devices/summary",subType:"live/client",version:"v5"},e],(e=>{if(e.success)t(e);else try{const t=JSON.parse(e.errInfo).error.message;s(t)}catch(t){s(e)}}),{escape:!1,buffer:!1})}))}static handleRemoteActionError(e,t,s){e(new Error(s.message))}static sortByProperty(e,t){return e.sort(((e,s)=>e[t]<s[t]?-1:e[t]>s[t]?1:0)),e}static getLiveConfigs(e){return new Promise((t=>{const s={speedLimitUnits:"mph",speedLimitDurationTimeUnits:"Minutes",speedLimitDuration:null,speedLimit:250,configName:"Maps Default Configuration",configId:"ma_defaultConfig",allowedTimeUnits:"Minutes",allowedTime:6e4,allowedDistanceUnits:"feet",allowedDistance:7e5};(new i.Z).setAction(a.getLiveConfigs).setErrorHandler((e=>{console.warn(e),t([s])})).invoke([e],(e=>{const{success:i=!1,data:a=[]}=e;if(i){let e=[];if("string"==typeof a)try{e=JSON.parse(a)}catch(t){e=[]}else Array.isArray(a)&&(e=a);e.length<1&&e.push(s),e.sort(((e,t)=>e.configName<t.configName?-1:e.configName>t.configName?1:0)),t(e)}else t([{speedLimitUnits:"mph",speedLimitDurationTimeUnits:"Minutes",speedLimitDuration:5,speedLimit:65,configName:"Teddy Summary Test",configId:"a3129000000AISqAAO",allowedTimeUnits:null,allowedTime:2,allowedDistanceUnits:"Feet",allowedDistance:15},{speedLimitUnits:"mph",speedLimitDurationTimeUnits:"Minutes",speedLimitDuration:1,speedLimit:5,configName:"All Live",configId:"a3129000000JSQOAA4",allowedTimeUnits:null,allowedTime:1,allowedDistanceUnits:null,allowedDistance:200}])}),{escape:!1,buffer:!1})}))}}},8249:(e,t,s)=>{"use strict";s.d(t,{Z:()=>p});var i=s(7387),a=s(1216),n=s(1023),r=s(5493);const{moment:o,getProperty:l,MASystem:d,MADevice:c,google:m,Plotting:u,MA:h}=window;class p{constructor(){const e=new window.OverlappingMarkerSpiderfier(window.MA.map,{keepSpiderfied:!0});e.addListener("spiderfy",(e=>{e.forEach((e=>{e.spiderfied=!0}))})),e.addListener("unspiderfy",(e=>{e.forEach((e=>{e.spiderfied=!1}))})),this.summaryOptions={},this.timeZone=d.User.timezoneId,this.id=(0,i.ZP)(),this.showIcons=!1,this.routeData={tileKey:null,events:[],summaryEvents:e,startVertice:null,endVertice:null}}setSummaryOptions(e){return this.summaryOptions=e,this}setTimeZone(e){this.timeZone=e}getSummaryEvents(){return this.summaryEvents}getEventTypes(){return this.eventTypes}getSummaryOptions(){return this.summaryOptions}build(){return new Promise(((e,t)=>{a.Z.getLiveSummaryAndHistory(this.summaryOptions).then((s=>{const{data:i={},success:a=!1}=s;a?this.plotLiveHistory(i).then((()=>{e()})).catch((e=>{t(e)})):t(new Error("Unable to get Live Events History"))})).catch((e=>{t(e)}))}))}updateEventTypes(){this.eventTypes=this.eventTypes.map((e=>{let t=0;return this.summaryEvents.forEach((s=>{e===s.formattedEventType&&t++})),{value:e,show:"Location Update"!==e,eventCount:t}}))}prepareSummaryEvents(e,t){const s=[];e.forEach((e=>{const t={};"Location Update"===e.eventType&&(t.formattedTime=o(e.timestamp).tz(this.timeZone).format("h:mm A"),t.timestamp=new Date(e.timestamp).getTime(),t.position={address:{address:l(e,"position.address.address",!1)||""},lat:l(e,"position.lat",!1),lng:l(e,"position.lng",!1)},t.formattedEventType="Location Update",t.eventType=l(e,"eventType",!1),s.push(t))}));let i=0;return t.events.forEach((e=>{const t={stop:"Stop",speeding:"Speeding",fastAcceleration:"Hard Acceleration",hardBrake:"Hard Braking",buttonPress:e.translation||"Button Press"},a={};a.formattedTime=o(e.start).tz(this.timeZone).format("h:mm A"),a.timestamp=new Date(e.start).getTime(),a.position={address:{address:l(e,"position.address.address",!1)||""},lat:l(e,"position.lat",!1),lng:l(e,"position.lng",!1)},a.formattedEventType=t[l(e,"eventType",!1)]||"Location Update",a.eventType=l(e,"eventType",!1)||"Location Update",a.duration=l(e,"duration",!1),a.postedSpeed=l(e,"speedLimit",!1),a.actualSpeed=l(e,"maxSpeed",!1),a.amountOverLimit=l(e,"maxSpeed",!1)-l(e,"speedLimit",!1)||void 0,"mi"===r.Z.units&&(a.postedSpeed=.621371*Number(a.postedSpeed)||void 0,a.actualSpeed=.621371*Number(a.actualSpeed)||void 0,a.amountOverLimit=.621371*Number(a.amountOverLimit)||void 0),"stop"===e.eventType?(i++,a.stopOrder=i,a.stopStartTime=e.start,a.stopEndTime=e.end):a.stopOrder=null,s.push(a)})),this.eventTypes=[...new Set(s.map((e=>e.formattedEventType)))],this.summaryEvents=a.Z.sortByProperty(s,"timestamp"),this}plotLiveHistory(e){return new Promise(((t,s)=>{const{positions:i=[],summary:a={}}=e;0===i.length?s(new Error("No events found")):(this.tileKey=e.key,this.prepareSummaryEvents(i,a),this.updateEventTypes(),this.removeDeviceHistory(),this.plotStarEndVertices(),this.plotHistoryRouterOverlay(),this.plotSummaryEvents(),t())}))}plotStarEndVertices(){const e=new c(this.summaryEvents[0]),t=new c(this.summaryEvents[this.summaryEvents.length-1]),s=new m.maps.Marker({position:e.getPosition(),icon:u.getFirstIcon(),device:e,timezoneId:this.timeZone}),i=new m.maps.Marker({position:t.getPosition(),icon:u.getLastIcon(),device:t,timezoneId:this.timeZone});s.setMap(h.map),i.setMap(h.map),this.routeData.startVertice=s,this.routeData.endVertice=i}plotHistoryRouterOverlay(){n.Z.addRouteTileOverlay(d.Organization.MAIO_URL,this.id,this.tileKey)}plotSummaryEvents(){const e=`${d.Organization.MAIO_URL}/images/marker?color=d50000`,t={stop:"&icon=markerWaypoint&text=",speeding:"&forlegend=false&icon=live_event_speeding_begin",fastAcceleration:"&forlegend=false&icon=live_event_quick_acceleration",hardBrake:"&forlegend=false&icon=live_event_hard_braking",buttonPress:"&forlegend=false&icon=live_event_touch","Location Update":"&forlegend=false&icon=LiveTrackingDot"};this.routeData.summaryEvents.getMarkers().forEach((e=>{e.setMap(null)})),this.routeData.summaryEvents.clearMarkers();const s=new m.maps.LatLngBounds;this.routeData.pathBounds=s;let i=0;this.summaryEvents.forEach((s=>{if(this.eventTypes.find((e=>e.value===s.formattedEventType)).show){i++;const a={url:this.showIcons?e+t[s.eventType]:e+t["Location Update"]};"stop"===s.eventType&&this.showIcons&&(a.url+=s.stopOrder,a.scaledSize={height:38,width:31});const n=new m.maps.Marker({position:{lat:s.position.lat,lng:s.position.lng},icon:a,map:h.map,optimized:!0,zIndex:1});this.routeData.pathBounds.extend({lat:s.position.lat,lng:s.position.lng}),s.marker=n,this.routeData.summaryEvents.addMarker(n)}})),this.routeData.startVertice&&this.routeData.pathBounds.extend(this.routeData.startVertice.getPosition()),this.routeData.endVertice&&this.routeData.pathBounds.extend(this.routeData.endVertice.getPosition()),i>0&&h.map.fitBounds(this.routeData.pathBounds)}removeDeviceHistory(){this.routeData.startVertice&&this.routeData.endVertice&&(this.routeData.startVertice.setMap(null),this.routeData.endVertice.setMap(null)),n.Z.removeTileOverlay(this.id),this.routeData.summaryEvents.getMarkers().forEach((e=>{e.setMap(null)})),this.routeData.summaryEvents.clearMarkers(),h.Map.InfoBubble.hide()}}},282:(e,t,s)=>{e.exports=s.p+"images/ed8ba1fbaec65b925d88269a11c3e1bc.svg"},1735:(e,t,s)=>{e.exports=s.p+"images/24f05122ad7dd09e1fbc1afddd56be95.svg"},8807:(e,t,s)=>{e.exports=s.p+"images/c1ff0d05ad890267caedf61d8cc601a0.svg"},1198:(e,t,s)=>{e.exports=s.p+"images/504e3795899003efda266c2da5840003.svg"},9170:(e,t,s)=>{e.exports=s.p+"images/63e41cd6ee1f9791ac08b25e6558c7a6.svg"},7888:(e,t,s)=>{e.exports=s.p+"images/ef48e5870a61042590fd0d8b4823b189.svg"},7579:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const i={name:"MASelect",props:{label:{type:String,default:""},options:{type:Object|Array,required:!0},keyString:{type:String,default:"key"},valueString:{type:String,default:"value"},hasNoneOption:{type:Boolean,default:!0},value:{type:String|Number,default:""},default:{type:String|Number,default:""},isRequired:{type:Boolean,default:!1},isInvalid:{type:Boolean,default:!1},placeholder:{type:String,default:""},isMultiSelect:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data(){return{defaultValue:this.default}},computed:{showLabel(){return this.label}},watch:{value(){const e={};e[this.keyString]=this.value,e[this.valueString]=this.getSelectedValue(),this.$emit("change",e)}},methods:{decodeHtml(e){if(!e)return e;const t=window.document.createElement("textarea");return t.innerHTML=e,t.value},getKey(e){return"string"==typeof e||"number"==typeof e?e:e[this.keyString]},getValue(e){return"string"==typeof e||"number"==typeof e?e:e[this.valueString]},isSelected(e){let t=!1;return t=Array.isArray(this.value)?this.value.includes(this.getKey(e)):this.getKey(e)===this.value,t},change(e){e||(e=null);let t=[];for(let s=0;s<e.length;s++){const i=e[s];t.push(i.value)}if(1===t.length){const[e]=t;t=e}this.$emit("input",t)},getSelectedValue(){if(!this.options||!this.options.length)return"";const e=this.options.find((e=>this.getKey(e)===this.value));return e?this.decodeHtml(this.getValue(e)):null},remove(){this.$emit("input",""),this.doHide()}}},a=(0,s(1900).Z)(i,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"slds-form-element",class:{"slds-has-error":e.isInvalid}},[e.showLabel?s("label",{staticClass:"slds-form-element__label"},[e.isRequired?s("abbr",{staticClass:"slds-required",attrs:{title:"required"}},[e._v("*")]):e._e(),e._v("\n        "+e._s(e.decodeHtml(e.label))+"\n    ")]):e._e(),e._v(" "),s("div",{staticClass:"slds-is-relative"},[s("select",e._b({staticClass:"slds-select",staticStyle:{overflow:"auto"},attrs:{placeholder:e.placeholder,disabled:e.disabled},on:{change:function(t){return e.change(t.target.selectedOptions)}}},"select",{multiple:e.isMultiSelect},!1),[e.hasNoneOption?s("option",{attrs:{value:""}},[e._v("\n                -- None --\n            ")]):e._e(),e._v(" "),e._l(e.options,(function(t,i){return s("option",{key:i,domProps:{value:e.getKey(t),selected:e.isSelected(t)}},[e._v("\n                "+e._s(e.getValue(t))+"\n            ")])}))],2),e._v(" "),e._m(0)]),e._v(" "),e.isInvalid?s("div",{staticClass:"slds-form-element__help"},[e._t("errors",(function(){return[e._v("This field is required.")]}))],2):e._e()])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"select-icon"},[t("span",{staticClass:"ma-icon ma-icon-down"})])}],!1,null,null,null).exports},508:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var i=s(1216),a=s(5908),n=s(8249),r=s(7579),o=s(7806);const l={props:{qid:{type:String,required:!0}},data:()=>({eventTypes:[],showEventList:!1,hasError:!1,errorMessage:"",showDots:!0,showIcons:!1,events:[]}),computed:{...(0,a.mapGetters)("layers",{layers__liveTrackingLayers:"liveTrackingLayers"}),liveTrackingLayer(){return this.layers__liveTrackingLayers[this.qid]},numEventsDisplayed(){let e=this.events.length;return 0!==e&&this.eventTypes.forEach((t=>{t.show||(e-=t.eventCount)})),e}},created(){this.events=this.liveTrackingLayer.getSummaryEvents(),this.eventTypes=this.liveTrackingLayer.getEventTypes()},methods:{toggleFilterPopover(){},toggleEventList(){this.showEventList=!this.showEventList},showEventTooltip(){}}};var d=s(1900);const c=(0,d.Z)(l,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"slds-p-left_small slds-p-right_xx-small slds-p-vertical_xx-small",attrs:{id:"liveTrackingHistoryEventListHeader"}},[i("div",{staticClass:"slds-grid slds-grid_vertical-align-center"},[i("div",{staticClass:"slds-col"},[e._v("\n                "+e._s(e.numEventsDisplayed)+" "+e._s(e.$Labels.EVENTS)+"\n            ")]),e._v(" "),i("div",{staticClass:"slds-is-relative has-popover"},[e.eventTypes.length>0?i("button",{staticClass:"slds-button slds-button_subtle popover-trigger",on:{click:e.toggleFilterPopover}},[e._v("\n                    Filter"),i("span",{staticClass:"slds-button__icon slds-button__icon_right ma-icon ma-icon-filter"})]):e._e()]),e._v(" "),i("div",{staticClass:"slds-hint-parent slds-m-left_small"},[i("button",{staticClass:"slds-button slds-button_icon slds-button_icon-container",on:{click:e.toggleEventList}},[e.showEventList?i("span",{staticClass:"slds-button__icon slds-button__icon_hint ma-icon ma-icon-contract-alt"}):i("span",{staticClass:"slds-button__icon slds-button__icon_hint ma-icon ma-icon-expand-alt"})])])])]),e._v(" "),e.showEventList?i("div",{attrs:{id:"liveTrackingHistoryEventListBody"}},[e.hasError?i("div",[i("div",{staticClass:"events-list-error"},[e._m(0),e._v(" "),i("div",[e._v("\n                    "+e._s(e.errorMessage)+"\n                ")])])]):e._e(),e._v(" "),e._l(e.events,(function(t,a){return e.eventTypes.find((function(e){return e.value===t.formattedEventType})).show?i("div",{key:a,staticClass:"live-tracking-history-list-item slds-grid slds-grid_vertical-align-center",on:{click:function(s){return e.showEventTooltip(t)}}},[i("div",{staticClass:"live-tracking-history-list-item_icon"},[e.showIcons&&["speeding"].includes(t.eventType)?i("img",{attrs:{src:s(8807)}}):e._e(),e._v(" "),e.showIcons&&["hardBrake"].includes(t.eventType)?i("img",{attrs:{src:s(282)}}):e._e(),e._v(" "),e.showIcons&&["fastAcceleration"].includes(t.eventType)?i("img",{attrs:{src:s(1735)}}):e._e(),e._v(" "),e.showIcons&&["buttonPress"].includes(t.eventType)?i("img",{attrs:{src:s(1198)}}):e._e(),e._v(" "),e.showIcons&&["stop"].includes(t.eventType)?i("img",{attrs:{src:s(9170)}}):e._e(),e._v(" "),e.showDots||e.showIcons&&["Location Update"].includes(t.eventType)?i("img",{attrs:{src:s(7888)}}):e._e(),e._v(" "),e.showIcons&&t.stopOrder?i("span",{staticClass:"live-tracking-history-list-item_icon-stop-association-number"},[e._v("\n                    "+e._s(t.stopOrder)+"\n                ")]):e._e()]),e._v(" "),i("div",{staticClass:"slds-col slds-p-right_medium"},[i("div",[e._v(e._s(t.formattedEventType||t.stopAssociationTitle))])]),e._v(" "),i("div",{staticClass:"slds-text-body_small slds-text-color_weak"},[e._v("\n                "+e._s(t.formattedTime)+"\n            ")])]):e._e()}))],2):e._e()])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("span",{staticClass:"ma-icon ma-icon-error"})])}],!1,null,null,null).exports,{$:m,moment:u}=window,h={components:{MobileSelect:r.Z,MobileSearch:o.Z,DateSelectionModal:()=>s.e(9822).then(s.bind(s,314)),LiveTrackingEventList:c},props:{layerData:{type:Object,required:!0}},data:()=>({liveConfigs:[],liveConfig:"",config:{},showSearch:!1,searchResult:null,assetName:"",assedId:"",showDateModal:!1,dateString:"",formattedDate:"",date:null,timeZoneList:[],timeZoneId:"",startTime:"",endTime:"",selectedColor:""}),computed:{layerId(){return this.layerData.layerId},qid(){return this.layerData.qid},record(){return this.layerData.record},device(){return this.record.device},...(0,a.mapGetters)("layers",{layers__liveTrackingLayers:"liveTrackingLayers"}),summaryOptions(){return{deviceid:this.assedId,from:1e3*u.tz(`${this.formattedDate} ${this.startTime}`,"YYYY-MM-DD HH:mm a",this.timeZoneId).unix(),to:1e3*u.tz(`${this.formattedDate} ${this.endTime}`,"YYYY-MM-DD HH:mm a",this.timeZoneId).unix(),stoppriority:"distance",speedlimitduration:this.getSelectedConfigValue("speedLimitDuration"),speedlimitabove:this.getSelectedConfigValue("speedLimit"),allowedmins:this.getSelectedConfigValue("allowedTime"),allowedfeet:this.getSelectedConfigValue("allowedDistance"),history:!0,color:this.layerData.color,opacity:1,snap:!0}}},created(){i.Z.getLiveConfigs(this.layerId).then((e=>{this.liveConfigs=e,this.config=this.layerData.config||{},this.liveConfig=this.config.configId,this.assetName=this.layerData.name,this.assedId=this.layerData.selectedDeviceId,this.date=this.layerData.date.clone(),this.dateString=this.date.format(this.$User.dateFormat.toUpperCase()),this.formattedDate=this.date.format("YYYY-MM-DD"),this.buildTimeZones(),this.timeZoneId=this.layerData.timeZone,this.startTime=this.layerData.startTime,this.endTime=this.layerData.endTime}))},methods:{...(0,a.mapMutations)("layers",{layers__updateLayerInfo:"updateLayerInfo"}),toggleSearch(e){this.showSearch=e},toggleDateModal(e){this.showDateModal=e},setDate(e){this.date.set({date:e.get("date"),month:e.get("month"),year:e.get("year")}),this.dateString=this.date.format(this.$User.dateFormat.toUpperCase()),this.formattedDate=this.date.format("YYYY-MM-DD")},buildTimeZones(){const e=window.getProperty(window.MASystem,"Organization.timeZoneList",!1);this.timeZoneId=this.$User.timezoneId,Array.isArray(e)?this.timeZoneList=e:(this.timeZoneId="GMT",this.timeZoneList=[{label:"(GMT+00:00) Greenwich Mean Time (GMT)",value:"GMT"}])},updateSearchValue(e){this.assetName=e.label,this.searchResult=e.result,this.assedId=e.id},assetSearch(e=""){return new Promise(((t,s)=>{e&&""!==e||s(new Error("Missing Required Param: searchTerm"));const i=m(`#PlottedQueriesTable .PlottedRowUnit[qid="${this.layerData.liveLayerQid}"]`);if(i){const s=i.data()||{},{records:a={}}=s,n=Object.keys(a),r=6,o=[];for(let t=0;t<n.length&&o.length!==r;t++){const s=a[n[t]],i=s.tooltip1;if((s.isVisible||s.isClustered)&&-1!==i.toLowerCase().indexOf(e.toLowerCase())){const{device:e={}}=s;o.push({label:i,deviceId:e.deviceId,device:e,record:s})}}t(o)}else s(new Error("Search not available for this layer: layer not found"))}))},applyChanges(){this.updateLayerSettings();const e=this.layers__liveTrackingLayers[this.qid];e&&e.removeDeviceHistory(),this.layers__liveTrackingLayers[this.qid]=null;const t=new n.Z;t.setSummaryOptions(this.summaryOptions),t.setTimeZone(this.timeZoneId),t.build().then((()=>{this.layers__liveTrackingLayers[this.qid]=t})).catch((e=>{console.warn(e)}))},updateLayerSettings(){const e={...this.layerData,config:this.liveConfigs.find((e=>e.configId===this.liveConfig)),date:this.date,startTime:this.startTime,endTime:this.endTime,name:this.assetName,selectedDeviceId:this.assedId,timeZone:this.timeZoneId};this.layers__updateLayerInfo(e)},getSelectedConfigValue(e){const t=this.liveConfigs.find((e=>e.configId===this.liveConfig));let s;return t&&(s=t[e],s&&("allowedDistance"===e&&"meters"===t.allowedDistanceUnits&&(s/=.3048),"allowedTime"===e&&"hours"===t.allowedTimeUnits&&(s*=60),"speedLimit"===e&&"kph"===t.speedLimitUnits&&(s*=.62137119),"speedLimitDuration"===e&&"hours"===t.speedLimitDurationTimeUnits&&(s*=60))),s}}},p=(0,d.Z)(h,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"slds-p-around_small"},[s("MobileSelect",{attrs:{options:e.liveConfigs,doDetach:!0,isRequired:!0,hasNoneOption:!1,label:e.$Labels.SUMMARY_CONFIGURATION,keyString:"configId",valueString:"configName"},model:{value:e.liveConfig,callback:function(t){e.liveConfig=t},expression:"liveConfig"}}),e._v(" "),s("div",{staticClass:"slds-form-element"},[s("label",{staticClass:"slds-form-element__label"},[e._v("\n                "+e._s(e.$Labels.ASSET)+"\n            ")]),e._v(" "),s("div",{staticClass:"slds-form-element__control",staticStyle:{position:"relative"},on:{click:function(t){return e.toggleSearch(!0)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.assetName,expression:"assetName"}],staticClass:"slds-input",staticStyle:{background:"white",cursor:"pointer"},attrs:{type:"text",placeholder:"",disabled:""},domProps:{value:e.assetName},on:{input:function(t){t.target.composing||(e.assetName=t.target.value)}}})])]),e._v(" "),s("div",{staticClass:"ma-form-control-wrap",on:{click:function(t){return e.toggleDateModal(!0)}}},[s("label",{staticClass:"ma-input-label"},[e._v(e._s(e.$Labels.MA_Date))]),e._v(" "),s("div",{staticClass:"ma-form-control icon-right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.dateString,expression:"dateString"}],staticClass:"ma-datepicker live-input ma-input date-input",attrs:{type:"text",placeholder:e.$Labels.MA_Select_A_Date,disabled:""},domProps:{value:e.dateString},on:{input:function(t){t.target.composing||(e.dateString=t.target.value)}}}),e._v(" "),s("i",{staticClass:"ma-icon ma-icon-event icon-right"})])]),e._v(" "),s("MobileSelect",{attrs:{options:e.timeZoneList,doDetach:!0,isRequired:!0,hasNoneOption:!1,label:e.$Labels.TIMEZONE,keyString:"value",valueString:"label"},model:{value:e.timeZoneId,callback:function(t){e.timeZoneId=t},expression:"timeZoneId"}}),e._v(" "),s("div",{staticClass:"ma-form-control-wrap"},[s("label",{staticClass:"ma-input-label"},[e._v(e._s(e.$Labels.MA_Start_Time))]),e._v(" "),s("div",{staticClass:"ma-form-control icon-right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.startTime,expression:"startTime"}],staticClass:"live-starttime time-input ma-input live-starttime",attrs:{type:"time"},domProps:{value:e.startTime},on:{input:function(t){t.target.composing||(e.startTime=t.target.value)}}}),e._v(" "),s("i",{staticClass:"ma-icon ma-icon-clock icon-right"})])]),e._v(" "),s("div",{staticClass:"ma-form-control-wrap"},[s("label",{staticClass:"ma-input-label"},[e._v(e._s(e.$Labels.MA_End_Time))]),e._v(" "),s("div",{staticClass:"ma-form-control icon-right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.endTime,expression:"endTime"}],staticClass:"live-endtime time-input ma-input live-endtim",attrs:{type:"time"},domProps:{value:e.endTime},on:{input:function(t){t.target.composing||(e.endTime=t.target.value)}}}),e._v(" "),s("i",{staticClass:"ma-icon ma-icon-clock icon-right"})])]),e._v(" "),s("button",{staticClass:"apply-changes-button slds-m-top_small slds-button slds-button_neutral",on:{click:e.applyChanges}},[e._v("\n            "+e._s(e.$Labels.APPLY_CHANGES)+"\n        ")]),e._v(" "),s("LiveTrackingEventList",{attrs:{qid:e.qid}})],1),e._v(" "),e.showSearch?s("MobileSearch",{attrs:{searchFunction:e.assetSearch,minimumSearchLength:1,searchKey:"deviceId",searchLabel:"label"},on:{"close-search-modal":function(t){return e.toggleSearch(!1)},result:e.updateSearchValue}}):e._e(),e._v(" "),e.showDateModal?s("DateSelectionModal",{attrs:{date:e.date},on:{close:function(t){return e.toggleDateModal(!1)},update:e.setDate}}):e._e()],1)}),[],!1,null,null,null).exports},7806:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var i=s(4141);const{getProperty:a}=window,n={components:{MAModal:i.Z},props:{searchFunction:{type:Function,required:!0},searchKey:{type:String,required:!0},searchLabel:{type:String,required:!0},minimumSearchLength:{type:Number,required:!1,default:2}},data:()=>({searchResults:[],styleObject:{position:"relative",padding:0,background:"#fff",border:"1px solid #dddbda","border-radius":".25rem","background-clip":"padding-box","box-shadow":"0 2px 2px 0 rgba(0,0,0,.1)"},searchTerm:"",isLoading:!1,searchTimeout:null}),computed:{showEmptyState(){const e=0===this.searchResults.length,t=this.searchTerm.length<=this.minimumSearchLength;return t||e||t}},watch:{searchTerm(e){e.length>this.minimumSearchLength&&this.debounceSearch(e)}},mounted(){this.$nextTick((()=>{this.$refs.mobileSearchInput.focus()}))},methods:{returnResult(e){this.$emit("result",e),this.close()},close(){this.$emit("close-search-modal")},clearInput(){this.returnResult({id:"",label:""})},debounceSearch(e){clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout((()=>{this.isLoading=!0,this.searchResults=[],this.searchFunction(e).then((e=>{this.processResults(e)})).catch((e=>{console.warn(e)})).finally((()=>{this.isLoading=!1}))}),250)},processResults(e){e.forEach((e=>{this.searchResults.push({label:a(e,this.searchLabel,!1),id:a(e,this.searchKey,!1),result:e})}))}}},r=(0,s(1900).Z)(n,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("MAModal",{staticClass:"slds-modal_large",attrs:{doDetach:!0,title:e.$Labels.MA_Search,closeLabel:e.$Labels.MA_Close},on:{close:e.close}},[s("div",{attrs:{slot:"content"},slot:"content"},[s("div",{staticClass:"ma-form-control has-inset-icon--right"},[s("div",{staticClass:"slds-form-element"},[s("div",{staticClass:"slds-form-element__control slds-input-has-icon slds-input-has-icon_right"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}],staticClass:"slds-input__icon-group slds-input__icon-group_right"},[s("div",{staticClass:"slds-spinner slds-spinner_brand slds-spinner_x-small slds-input__spinner",staticStyle:{right:"5px"},attrs:{role:"status"}},[s("span",{staticClass:"slds-assistive-text"},[e._v("Loading")]),e._v(" "),s("div",{staticClass:"slds-spinner__dot-a"}),e._v(" "),s("div",{staticClass:"slds-spinner__dot-b"})])]),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:!e.isLoading,expression:"!isLoading"}],staticClass:"slds-icon slds-input__icon slds-input__icon_left slds-icon-text-default ma-icon ma-icon-search"}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchTerm,expression:"searchTerm"}],ref:"mobileSearchInput",staticClass:"slds-input",attrs:{placeholder:e.$Labels.MA_Search+"...",type:"text"},domProps:{value:e.searchTerm},on:{input:function(t){t.target.composing||(e.searchTerm=t.target.value)}}})])])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.showEmptyState,expression:"showEmptyState"}],staticClass:"search-empty-state"},[s("div",{staticClass:"text-center"},[s("span",{staticClass:"ma-icon ma-icon-info ma-icon--large"})]),e._v(" "),s("div",[s("p",{staticClass:"text-center"},[e._v(e._s(e.$Labels.Mobile_Settings_Search_Help_Text))])])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.showEmptyState,expression:"!showEmptyState"}],staticClass:"slds-m-top_medium"},e._l(e.searchResults,(function(t,i){return s("article",{key:i,staticClass:"slds-card",style:e.styleObject,on:{click:function(s){return e.returnResult(t)}}},[s("div",{staticClass:"slds-card__header slds-grid"},[s("header",{staticClass:"slds-media slds-media_center slds-has-flexi-truncate"},[s("div",{staticClass:"slds-media__body"},[s("h2",{staticClass:"slds-card__header-title"},[s("div",{staticClass:"slds-card__header-link slds-truncate"},[s("span",[e._v(e._s(e._f("decode")(t.label)))])])])])])])])})),0)]),e._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("div",{staticClass:"float-right"},[s("button",{staticClass:"slds-button slds-button_neutral",on:{click:e.close}},[e._v("\n                "+e._s(e.$Labels.MA_Cancel)+"\n            ")]),e._v(" "),s("button",{staticClass:"slds-button slds-button_brand",on:{click:e.clearInput}},[e._v("\n                "+e._s(e.$Labels.MA_Clear)+"\n            ")])])])])}),[],!1,null,null,null).exports}}]);