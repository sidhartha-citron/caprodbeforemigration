"use strict";(globalThis.webpackChunkmaps_desktop=globalThis.webpackChunkmaps_desktop||[]).push([[1711],{5268:(e,o,t)=>{t.r(o),t.d(o,{default:()=>l});var a=t(5908);const{google:s,MA:n}=window,i={components:{PolygonDrawingContainer:()=>t.e(2171).then(t.bind(t,4116)),CreateRecordFromMap:()=>t.e(1634).then(t.bind(t,624))},props:{mapLoaded:{type:Boolean,default:!1}},data:()=>({disabled:!1,longPress:null,showLongPressSheet:!1,drawPolygon:null}),computed:{...(0,a.mapGetters)("mainNavBar",{mainNavBar__activeTab:"activeTab"})},created(){function e(e,o){const t=this;t.length=o,t.map=e,t.timeoutId=null,s.maps.event.addListener(e,"mousedown",(e=>{t.onMouseDown(e)})),s.maps.event.addListener(e,"mouseup",(e=>{t.onMouseUp(e)})),s.maps.event.addListener(e,"drag",(e=>{t.onMapDrag(e)}))}this.$bus.$on("disable-long-press",this.toggleLongPress),e.prototype.onMouseUp=()=>{const e=this.longPress;clearTimeout(e.timeoutId),setTimeout((()=>{document.addEventListener("click",this.closeActionSheet)}),100)},e.prototype.onMouseDown=e=>{const o=this.longPress;clearTimeout(o.timeoutId);const{map:t}=o,a=e;o.timeoutId=setTimeout((()=>{document.removeEventListener("click",this.closeActionSheet),s.maps.event.trigger(t,"longpress",a)}),o.length)},e.prototype.onMapDrag=()=>{const e=this.longPress;clearTimeout(e.timeoutId)};const o=setInterval((()=>{this.mapLoaded&&(clearInterval(o),this.longPress=new e(n.map,500),s.maps.event.addListener(n.map,"longpress",this.handleLongPress))}),500)},methods:{...(0,a.mapMutations)("mainNavBar",{mainNavBar__updateActiveTab:"updateActiveTab"}),openMobileClick2Create(){this.$bus.$emit("show-marker-tooltip",!1),this.mainNavBar__updateActiveTab("createRecordFromMap")},openDrawingMode(){this.initDrawingMode()},closeActionSheet(){this.showLongPressSheet=!1},handleLongPress(){this.disabled?console.warn("longpress event temporarily disabled"):this.showLongPressSheet=!0},toggleLongPress(e){this.disabled=e},initDrawingMode(){this.drawPolygon=new n.Map.DrawPolygon({done:()=>{this.closeDrawingMode()}}),this.mainNavBar__updateActiveTab("drawingTools")},cancelPolygon(){this.drawPolygon.remove()},finishPolygon(){null!==this.drawPolygon.polygon&&this.drawPolygon.finishDrawing()},rollbackPolygon(){this.drawPolygon.rollback()},closeDrawingMode(){this.drawPolygon=null,this.mainNavBar__updateActiveTab("")}}},l=(0,t(1900).Z)(i,(function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",[t("div",{staticClass:"ma-action-sheet-wrap",class:{in:e.showLongPressSheet},attrs:{id:"longPressActionSheet"}},[t("div",{staticClass:"ma-action-sheet",class:{in:e.showLongPressSheet}},[t("div",{staticClass:"ma-action-sheet-item actionbutton",on:{click:e.openMobileClick2Create}},[t("span",{staticClass:"ma-icon ma-icon-Maps"}),e._v(e._s(e.$Labels.MA_DROP_A_PIN)+"\n            ")]),e._v(" "),t("div",{staticClass:"ma-action-sheet-item actionbutton",on:{click:e.openDrawingMode}},[t("span",{staticClass:"ma-icon ma-icon-polygon"}),e._v(e._s(e.$Labels.NavBar_Draw_A_Polygon)+"\n            ")]),e._v(" "),t("div",{staticClass:"ma-action-sheet-item actionbutton",on:{click:e.closeActionSheet}},[e._v("\n                "+e._s(e.$Labels.MA_Close)+"\n            ")])]),e._v(" "),e.showLongPressSheet?t("div",{staticClass:"action-sheet-mask",class:{in:e.showLongPressSheet},on:{click:e.closeActionSheet}}):e._e()]),e._v(" "),"drawingTools"===e.mainNavBar__activeTab?t("PolygonDrawingContainer",{on:{cancel:e.cancelPolygon,done:e.finishPolygon,rollback:e.rollbackPolygon}}):e._e(),e._v(" "),"createRecordFromMap"===e.mainNavBar__activeTab?t("CreateRecordFromMap"):e._e()],1)}),[],!1,null,"6e498f48",null).exports}}]);