(globalThis.webpackChunkmaps_desktop=globalThis.webpackChunkmaps_desktop||[]).push([[683],{758:(e,t,s)=>{e.exports=s.p+"images/d61e60332b10a8fa7cd62815ef896afd.svg"},7414:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(5261);const{$:i}=window,l={props:{layerData:{type:Object,required:!0},isLoading:{type:Boolean,default:!1}},data:()=>({totalMarkers:0,visibleMarkers:0,legendRowSelections:{},legendRowTimeout:null,showAllLegendData:!1}),computed:{computedTotalRecords(){return(0,a.N4)(this.$Labels.MA_Total_Records,[this.totalMarkers])},computedRecordsCreatedVisible(){return(0,a.N4)(this.$Labels.MA_Records_Created_Visible,[this.totalMarkers,this.visibleMarkers])},layerType(){return this.layerData.type},legendInfo:{get(){let e={};return e=this.plottedInfo.legendInfo||{},e},set(e){this.plottedInfo.legendInfo=e}},legendImages(){return this.plottedInfo.imgInfo||[]},layerQID(){return this.layerData.qid},plottedLayer(){let e;return"marker"===this.layerType&&(e=i(`#PlottedQueriesTable .savedQuery[qid="${this.layerQID}"]`)),e},plottedInfo(){return this.plottedLayer.data()||{}},legendShowText(){let e=this.$Labels.MA_Show_All;return this.showAllLegendData&&(e=this.$Labels.MA_Show_Less),e}},created(){this.build()},methods:{formatLabel:(e,t)=>(0,a.N4)(e,t),build(){this.updateLegend()},toggleVisibleLegend(){this.showAllLegendData=!this.showAllLegendData},updateLegend(){let e=0,t=0;const s=Object.keys(this.legendInfo)||[];for(let a=0;a<s.length;a++){const i=s[a],l=this.legendInfo[i];e+=l.totalmarkers,t+=l.count}this.visibleMarkers=t,this.totalMarkers=e},getIconColor(e){const t=i.parseHTML(e);return i(t).css("color")},toggleRow(e){clearTimeout(this.legendRowTimeout),this.legendRowTimeout=null,this.legendRowSelections[e.legendId]=e.active,this.legendRowTimeout=setTimeout((()=>{const e={plottedQuery:this.plottedLayer,rows:this.legendRowSelections};window.Plotting.toggleLegendRow(e,(()=>{window.Plotting.updateQueryInfo(this.plottedLayer,(()=>{this.legendRowSelections={},this.build(),this.$emit("toggleLoading",!1),this.plottedLayer.removeClass("loading"),this.plottedLayer.find(".queryLoader").hide(),this.plottedLayer.find(".queryIcon ").show()}))}))}),250)}}},o=(0,s(1900).Z)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"layers-individual-filter-wrap"},[a("div",{staticClass:"ma-section-title ma-section-title",staticStyle:{padding:"18px 16px 16px"}},[a("span",{staticClass:"legend-title"},[e._v(e._s(e._f("decode")(e.$Labels.MA_MARKER_LEGEND)))]),e._v(" "),a("span",{staticClass:"legend-moreless-text",staticStyle:{position:"absolute",right:"0px",top:"2px",height:"45px","line-height":"45px",padding:"0 15px"},on:{click:e.toggleVisibleLegend}},[a("span",{staticClass:"moreless-text"},[e._v(e._s(e._f("decode")(e.legendShowText)))])])]),e._v(" "),a("div",{staticClass:"pad-16-16-8 background--white"},[a("div",{staticClass:"margin-0 text--dark-blue legendField"},[a("div",{staticClass:"ma-item-name-subtitle plottinginfo-wrapper",staticStyle:{"font-size":"16px"}},[a("div",{staticClass:"status"},[e._v(e._s(e._f("decode")(e.computedTotalRecords)))]),e._v(" "),a("div",{staticClass:"status"},[e._v(e._s(e._f("decode")(e.computedRecordsCreatedVisible)))])])])]),e._v(" "),a("div",{staticClass:"legend-wrap background--white"},e._l(e.legendInfo,(function(t,i,l){return a("div",{directives:[{name:"show",rawName:"v-show",value:t.totalmarkers>0||e.showAllLegendData,expression:"row.totalmarkers > 0 || showAllLegendData"}],key:i,staticClass:"legend-item legend-row ma-form-control-wrap ma-checkbox-wrap flex-horizontal",attrs:{"data-id":i,uid:l}},[a("div",{staticClass:"flex-grow-1"},[a("label",{staticClass:"ma-checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.active,expression:"row.active"}],staticClass:"legend-checkbox",attrs:{id:"legend-checkbox13","data-rule":l,uid:l,checked:"checked",name:"checkbox",type:"checkbox"},domProps:{checked:Array.isArray(t.active)?e._i(t.active,null)>-1:t.active},on:{change:[function(s){var a=t.active,i=s.target,l=!!i.checked;if(Array.isArray(a)){var o=e._i(a,null);i.checked?o<0&&e.$set(t,"active",a.concat([null])):o>-1&&e.$set(t,"active",a.slice(0,o).concat(a.slice(o+1)))}else e.$set(t,"active",l)},function(s){return e.toggleRow(t)}]}}),e._v(" "),a("span",{staticClass:"ma-checkbox-faux"}),e._v(" "),a("span",{staticClass:"ma-checkbox-label"},[e._v(e._s(e._f("decode")(t.label)))])])]),e._v(" "),a("div",{staticClass:"legend-count"},[a("span",{staticClass:"visiblemarkers"},[e._v(e._s(e._f("decode")(e.formatLabel(e.$Labels.Mobile_Legend_Count,[t.count,t.totalmarkers]))))])]),e._v(" "),a("div",{staticClass:"legend-marker"},[t.icon.indexOf("/images/marker")>-1||t.icon.indexOf("servlet.FileDownload")>-1||t.icon.indexOf("sfc/servlet.shepherd/version/download/")>-1||t.icon.indexOf("/sfc/servlet.shepherd/document/download/")>-1?a("img",{staticClass:"legend-image",staticStyle:{height:"20px","max-width":"30px"},attrs:{src:t.icon}}):-1!==t.icon.indexOf("ion-ios-infinite")?a("span",{style:{"font-size":"18px",color:e.getIconColor(t.icon)}},[e._v("âˆž")]):-1!==t.icon.indexOf("glyphicon-comment")?a("span",{staticClass:"slds-icon-utility-prompt",style:{"font-size":"16px",fill:e.getIconColor(t.icon)}},[a("MAIcon",{attrs:{slot:"extendInput",src:s(758)},slot:"extendInput"})],1):a("span",[e._v(e._s(e._f("decode")(t.icon)))])])])})),0)])}),[],!1,null,"177ece6c",null).exports}}]);