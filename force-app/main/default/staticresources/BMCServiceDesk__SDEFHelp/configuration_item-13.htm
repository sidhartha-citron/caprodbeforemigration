

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta name="GENERATOR" content="Quadralay WebWorks Publisher 2003 for FrameMaker 8.6.6587.0" />
    <meta name="TEMPLATEBASE" content="BMC_WebWorksHelp_52407" />
    <meta name="LASTUPDATED" content="12/10/14 12:27:04" />
    <title>Troubleshooting the CMDB 2.0 upgrade process</title>
    <link rel="StyleSheet" href="Remedy.css" type="text/css" />
    <link rel="StyleSheet" href="catalog.css" type="text/css" />
<script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
  <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
  <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>

  <script type="text/javascript" language="JavaScript1.2">
   <!--
    // Set reference to top level help frame
    //
    var  WWHFrame = WWHGetWWHFrame("");
   // -->
  </script>

    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <style type="text/css">
<!--
.style7 {
	color: #FF0000;
	font-weight: bold;
}
-->
    </style>
</head>

  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">

    
    

    <blockquote>
<script type="text/javascript" language="JavaScript1.2">
   WWHFrame.WWHHelp.mRemedyTitle = "Troubleshooting the CMDB 2.0 upgrade process";
   WWHFrame.WWHHelp.fRemedyShowTitle();
</script><a name="wp1017605"> </a><p class="pBody">This section provides information about troubleshooting errors that you might get while you are upgrading to CMDB 2.0.</p>
<a name="wp1017606"> </a><p class="pBody">The following topics are provided:</p>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp1017610"> </a><div class="pSmartList2"><li><a href="javascript:WWHClickedPopup('BMC_Remedyforce_help', 'configuration_item-13.htm#wp1017616');" onMouseOver="WWHShowPopup('BMC_Remedyforce_help', 'configuration_item-13.htm#wp1017616', (document.all||document.getElementById||document.layers)?event:null);" onMouseOut="WWHHidePopup();">Aborting scanning of CMDB 1.0 </a></li></div>
<a name="wp1020230"> </a><div class="pSmartList2"><li><a href="javascript:WWHClickedPopup('BMC_Remedyforce_help', 'configuration_item-13.htm#wp1020635');" onMouseOver="WWHShowPopup('BMC_Remedyforce_help', 'configuration_item-13.htm#wp1020635', (document.all||document.getElementById||document.layers)?event:null);" onMouseOut="WWHHidePopup();">Viewing the status of the CMDB data migration job </a></li></div>
<a name="wp1017614"> </a><div class="pSmartList2"><li><a href="javascript:WWHClickedPopup('BMC_Remedyforce_help', 'configuration_item-13.htm#wp1017626');" onMouseOver="WWHShowPopup('BMC_Remedyforce_help', 'configuration_item-13.htm#wp1017626', (document.all||document.getElementById||document.layers)?event:null);" onMouseOut="WWHHidePopup();">Configuring batch size of the CMDB 2.0 upgrade Apex jobs </a></li></div>
</ul></div>
</ul></div>
<a name="wp1017616"> </a><h4 class="pHeading3">
Aborting scanning of CMDB 1.0
</h4>
<a name="wp1017617"> </a><p class="pBody">If you do not see scanning progress on the screen, check the status of the job on the Apex Jobs page (<b class="cBold">Setup &gt; Jobs &gt; Apex Jobs</b>). Depending on the platform availability, the process might take a while to complete. If scanning your CMDB is taking a long time, you might want to abort the scan.</p>
<a name="wp1017618"> </a><p style="text-decoration: none" class="pStepIntro">
To abort scanning of CMDB 1.0
</p>

<div class="pSmartList1"><ol type="1" class="pSmartList1">
<a name="wp1017619"> </a><div class="pSmartList1"><li>Navigate to <b class="cBold">Setup &gt; Monitoring &gt; Apex Jobs</b>.</li></div>
<a name="wp1017620"> </a><p class="pIndented1">
If you have enabled the improved Setup user interface in your Salesforce organization, navigate to <b class="cBold">Setup &gt; Jobs &gt; Apex Jobs</b>. 
</p>
<a name="wp1017622"> </a><p class="pIndented1">
For more information about the improved Setup user interface, see <a href="http://help.salesforce.com/apex/HTViewHelpDoc?id=admin_setup_improved.htm&amp;language=en_US" target="_window">http://help.salesforce.com/apex/HTViewHelpDoc?id=admin_setup_improved.htm&amp;language=en_US</a>.
</p>
<a name="wp1017623"> </a><div class="pSmartList1"><li>In the <b class="cBold">Apex Class</b> column, click <b class="cBold">CMDB_ScannerBatchJob</b>.</li></div>
<a name="wp1020633"> </a><div class="pSmartList1"><li>In the <b class="cBold">Status</b> column, if the status of the job is Queued or Preparing, in the <b class="cBold">Action</b> column, click <b class="cBold">Abort</b>.</li></div>
</ol></div>
<a name="wp1020635"> </a><h4 class="pHeading3">
Viewing the status of the CMDB data migration job
</h4>
<a name="wp1020636"> </a><p class="pBody">You can view the status of the CMDB data migration job (CMDBMigrator) on the Apex Jobs page. If required, you can also abort the job from this page.</p>
<a name="wp1020383"> </a><p style="text-decoration: none" class="pStepIntro">
To view the status of the CMDB data migration job
</p>

<div class="pSmartList1"><ol type="1" class="pSmartList1">
<a name="wp1020056"> </a><div class="pSmartList1"><li>Navigate to <b class="cBold">Setup &gt; Monitoring &gt; Apex Jobs</b>.</li></div>
<a name="wp1020057"> </a><p class="pIndented1">
If you have enabled the improved Setup user interface in your Salesforce organization, navigate to <b class="cBold">Setup &gt; Jobs &gt; Apex Jobs</b>. 
</p>
<a name="wp1020059"> </a><p class="pIndented1">
For more information about the improved Setup user interface, see <a href="http://help.salesforce.com/apex/HTViewHelpDoc?id=admin_setup_improved.htm&amp;language=en_US" target="_window">http://help.salesforce.com/apex/HTViewHelpDoc?id=admin_setup_improved.htm&amp;language=en_US</a>.
</p>
<a name="wp1020060"> </a><div class="pSmartList1"><li>In the <b class="cBold">Apex Class</b> column, click <b class="cBold">CMDBMigrator</b>.</li></div>
<a name="wp1020158"> </a><div class="pSmartList1"><li>In the <b class="cBold">Status</b> column, view the status of the CMDBMigrator<b class="cBold"> </b>job.</li></div>
<hr size="2" class="NoteRule"/><a name="wp1020401"> </a><p class="pNote"><span style="color: #003366"> Note: </span> If the CMDBMigrator<b class="cBold"> </b>job status is Completed and the <em class="cEmphasis">Apex heap size too large </em>message is displayed in the <b class="cBold">Status Details</b> column, you can restart the migration process.</p><hr size="2" class="NoteRule"/><a name="wp1020425"> </a><div class="pSmartList1"><li><em class="cEmphasis">(Optional)</em> To abort the CMDB data migration job, in the <b class="cBold">Action</b> column for the CMDBMigrator job, click <b class="cBold">Abort</b>.</li></div>
</ol></div>
<a name="wp1017626"> </a><h4 class="pHeading3">
Configuring batch size of the CMDB 2.0 upgrade Apex jobs
</h4>
<a name="wp1017627"> </a><p class="pBody">In the upgrade to CMDB 2.0 process, while migrating to CMDB 2.0 or deleting CMDB 1.0 data, you might get either of the following errors:</p>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp1017628"> </a><div class="pSmartList2"><li>Apex CPU time limit exceeded</li></div>
<a name="wp1017629"> </a><div class="pSmartList2"><li>Too many SOQL queries</li></div>
</ul></div>
</ul></div>
<a name="wp1017630"> </a><p class="pBody">These errors are shown when the batch size of the Apex job that is scheduled for these procedures is large. The batch size of an Apex job is specified in a custom setting. The following table provides a list of custom settings that control the batch size of these Apex jobs.</p>
<a name="wp1017669"> </a><p class="pBodyRelative"></p>
<div align="left">
<table border="1" cellpadding="3" id="wp1017634table1017631">
  <caption><a name="wp1017634"> </a><p class="pBody">Table&#160;13-2:&#160;&#160;Custom settings that control batch size of the CMDB 2.0 upgrade Apex jobs</p>
</caption>
  <tr align="left" valign="top">    <th><a name="wp1017640"> </a><div class="pCellHeading">
Custom setting
</div>
</th>
    <th><a name="wp1017642"> </a><div class="pCellHeading">
Default value
</div>
</th>
    <th><a name="wp1017644"> </a><div class="pCellHeading">
Description
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td><a name="wp1017646"> </a><div class="pCellBody">
CMDBMigrateBatchSize
</div>
</td>
    <td><a name="wp1017648"> </a><div class="pCellBody">
500
</div>
</td>
    <td><a name="wp1017650"> </a><div class="pCellBody">
Number of records that are migrated in a batch
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td><a name="wp1017652"> </a><div class="pCellBody">
CMDB_Migration_MaxErrorRecords
</div>
</td>
    <td><a name="wp1017654"> </a><div class="pCellBody">
1000
</div>
</td>
    <td><a name="wp1017656"> </a><div class="pCellBody">
Number of errors that are ignored while data is migrated to CMDB 2.0
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td><a name="wp1017658"> </a><div class="pCellBody">
CMDBCleanupBatchSize
</div>
</td>
    <td><a name="wp1017660"> </a><div class="pCellBody">
1000
</div>
</td>
    <td><a name="wp1017662"> </a><div class="pCellBody">
Number of CMDB 1.0 records that are deleted in a batch
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td><a name="wp1017664"> </a><div class="pCellBody">
Cleanup_MaxErrorRecords
</div>
</td>
    <td><a name="wp1017666"> </a><div class="pCellBody">
1000
</div>
</td>
    <td><a name="wp1017668"> </a><div class="pCellBody">
Number of errors that are ignored while CMDB 1.0 records are deleted
</div>
</td>
</tr>
</table>
</div>
<p class="pBodyRelative">
</p>

<a name="wp1017670"> </a><p class="pBody">These custom settings are not available by default. You must create these custom settings and assign the required values.</p>
<a name="wp1017671"> </a><p style="text-decoration: none" class="pStepIntro">
To configure batch size of a CMDB 2.0 Upgrade Apex job
</p>

<div class="pSmartList1"><ol type="1" class="pSmartList1">
<a name="wp1017672"> </a><div class="pSmartList1"><li>Click the <b class="cBold">Remedyforce Administration</b> tab.</li></div>
<a name="wp1017673"> </a><div class="pSmartList1"><li>On the Home page, click the <b class="cBold">Application Settings</b> tile, and from the menu, select <b class="cBold">Custom Setting</b>.</li></div>
<a name="wp1017674"> </a><p class="pIndented1">
Alternatively, navigate to <b class="cBold">Setup &gt; Develop &gt; Custom Settings</b>.
</p>
<a name="wp1017675"> </a><div class="pSmartList1"><li>In the <b class="cBold">Action</b> column for <b class="cBold">Remedyforce Settings</b>, click <b class="cBold">Manage</b>.</li></div>
<a name="wp1017676"> </a><div class="pSmartList1"><li>On the Custom Setting Remedyforce Settings page, click <b class="cBold">New</b>.</li></div>
<a name="wp1017680"> </a><div class="pSmartList1"><li>In the <b class="cBold">Name</b> field, type the name of the custom setting (for example, Cleanup_MaxErrorRecords). See <a href="javascript:WWHClickedPopup('BMC_Remedyforce_help', 'configuration_item-13.htm#wp1017634');" onMouseOver="WWHShowPopup('BMC_Remedyforce_help', 'configuration_item-13.htm#wp1017634', (document.all||document.getElementById||document.layers)?event:null);" onMouseOut="WWHHidePopup();">Table&#160;13-2</a> for possible custom-setting names.</li></div>
<a name="wp1020010"> </a><p class="pIndented1">
Leave the <b class="cBold">Sequence Id</b> field blank.
</p>
<a name="wp1020011"> </a><div class="pSmartList1"><li>In the <b class="cBold">value</b> field, enter the appropriate value for the custom setting.</li></div>
<a name="wp1020012"> </a><div class="pSmartList1"><li>Click <b class="cBold">Save</b>.</li></div>
</ol></div>



  <script type="text/javascript" language="JavaScript1.2">
   <!--
    // Clear related topics
    //
    WWHClearRelatedTopics();

   // -->
  </script>
    </blockquote>

    
<hr class="REM"/>

<table align="center" border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td width="577" align="center"><p class="copyright"><span class="copyright style7">This help was last updated for version 20.14.02.021.038 of BMC Remedyforce. You must use this help for information about working on the BMC Remedyforce Home tab only. To access an updated version of  the online help, go to the <a href="http://docs.bmc.com" target="_blank">http://docs.bmc.com</a> and search for your version of BMC Remedyforce.</span>

 </p>
      <p class="copyright">&#169; Copyright  2010-2014
 BMC Software, Inc. All rights reserved.<br/>
        
        Please contact your BMC Remedyforce system administrator if you require support.<br/>
        
        For questions or comments about the documentation, email us at <a href="mailto:doc_feedback@bmc.com">doc_feedback@bmc.com</a>.
        
      </p></td>
  </tr>
</table>



<script type="text/javascript" language="JavaScript1.2">
   <!--
    document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
   // -->
  </script>

  </body>
</html>
