(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{205:function(e,t,s){var o=s(232);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals),(0,s(32).default)("b06fc1c8",o,!0,{})},210:function(e,t,s){"use strict";var o=s(194),n=s(4),i=s(101),a=s(108),r=s(18),l=s(104),c=s(71),d=s(5),u=Math.min,m=[].push,h=!d((function(){RegExp(4294967295,"y")}));s(105)("split",2,(function(e,t,s,d){var _;return _="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,t){var n=String(this);if(void 0===e&&0===t)return[];if(!o(e))return s.call(n,e,t);for(var i,a,r,l=[],d=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),u=0,h=void 0===t?4294967295:t>>>0,_=new RegExp(e.source,d+"g");(i=c.call(_,n))&&!((a=_.lastIndex)>u&&(l.push(n.slice(u,i.index)),i.length>1&&i.index<n.length&&m.apply(l,i.slice(1)),r=i[0].length,u=a,l.length>=h));)_.lastIndex===i.index&&_.lastIndex++;return u===n.length?!r&&_.test("")||l.push(""):l.push(n.slice(u)),l.length>h?l.slice(0,h):l}:"0".split(void 0,0).length?function(e,t){return void 0===e&&0===t?[]:s.call(this,e,t)}:s,[function(s,o){var n=e(this),i=null==s?void 0:s[t];return void 0!==i?i.call(s,n,o):_.call(String(n),s,o)},function(e,t){var o=d(_,e,this,t,_!==s);if(o.done)return o.value;var c=n(e),m=String(this),b=i(c,RegExp),f=c.unicode,p=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(h?"y":"g"),v=new b(h?c:"^(?:"+c.source+")",p),A=void 0===t?4294967295:t>>>0;if(0===A)return[];if(0===m.length)return null===l(v,m)?[m]:[];for(var g=0,S=0,I=[];S<m.length;){v.lastIndex=h?S:0;var L,y=l(v,h?m:m.slice(S));if(null===y||(L=u(r(v.lastIndex+(h?0:S)),m.length))===g)S=a(m,S,f);else{if(I.push(m.slice(g,S)),I.length===A)return I;for(var w=1;w<=y.length-1;w++)if(I.push(y[w]),I.length===A)return I;S=g=L}}return I.push(m.slice(g)),I}]}))},212:function(e,t,s){"use strict";s(63),s(227);var o=s(195),n=(0,s(229).detect)(),i="ie"===n.name&&"11.0.0"===n.version,a={name:"MAActionMenu",directives:{"click-outside":o.a},props:{forceRight:{type:Boolean,default:!1},forceLeft:{type:Boolean,default:!1},doShowSync:{type:Boolean,default:!1},listenForManualHideEvent:{type:Boolean,default:!1},hideOnMouseout:{type:Boolean,default:!1},isToggleValid:{type:Function,default:null},bindTo:{type:HTMLElement,default:null},bindToMousePosition:{type:Boolean,default:!1,validate:function(e){return e&&null!=(void 0).bindTo||!e}},bindToCoords:{type:Object,default:null,validate:function(e){return e.x&&e.y}},isDisabled:{type:Boolean,default:!1},showMoreLabel:{type:String,default:"Show More"}},data:function(){return{doShow:this.doShowSync,isDirty:!1,dropdownLeft:!0,dropdownRight:!1,container:null}},computed:{doShowAnchor:function(){return!(this.bindTo||this.bindToMousePosition||this.bindToCoords)},clickOutsideOptions:function(){return{active:this.doShow,handler:this.doHide}}},watch:{doShow:function(e){this.$emit("update:doShowSync",e)},doShowSync:function(e){e!==this.doShow&&this.toggleMenu()}},created:function(){this.listenForManualHideEvent&&this.$bus.$on("ma-hide-action-menu",this.doHide),this.bindTo&&this.bindTo.addEventListener("click",this.toggleMenu)},beforeDestroy:function(){this.$bus.$off("ma-hide-action-menu",this.doHide),this.bindTo&&this.bindTo.removeEventListener("click",this.toggleMenu),this.destroy()},methods:{toggleMenu:function(e){this.isDisabled||e&&this.isToggleValid&&!this.isToggleValid(e,this.doShow)||e&&this.$refs.menu&&(this.$refs.menu===e.target||this.$refs.menu.contains(e.target))||(this.doShow=!this.doShow,this.doShow?(window.addEventListener("scroll",this.doHide,!0),window.addEventListener("resize",this.doHide),this.$nextTick(this.showMenu.bind(this,e)),this.$emit("bindToClick",e)):this.destroy())},showMenu:function(e){var t=this;this.forceLeft||this.forceRight||(this.dropdownLeft=!0,this.dropdownRight=!1,this.$nextTick((function(){t.detach(e),t.$nextTick(t.adjustForClipping)})))},detach:function(e){if(this.$refs.menu){var t,s;if(e&&this.bindToMousePosition)t=e.clientY,s=e.clientX;else if(this.bindToCoords)t=this.bindToCoords.y,s=this.bindToCoords.x;else{var o=this.$refs.anchor.getBoundingClientRect();t=o.top+this.$refs.anchor.clientHeight,s=o.left}this.$refs.menu.style.top="".concat(t,"px"),this.$refs.menu.style.left="".concat(s,"px"),this.$refs.menu.style.position="fixed",this.container=document.createElement("div"),this.container.className="slds-scope ".concat(this.$el.className),this.container.appendChild(this.$refs.menu),document.body.appendChild(this.container),this.$emit("detached",this.container),window.addEventListener("scroll",this.doHide,!0)}},adjustForClipping:function(){var e=this.$refs.menu;if(null!=e){var t=e.clientWidth,s=e.clientHeight,o=e.getBoundingClientRect().x,n=e.getBoundingClientRect().y,i=o+t>document.documentElement.clientWidth,a=n+s>document.documentElement.clientHeight;i&&(this.$refs.menu.style.left="auto"),a&&(this.$refs.menu.style.top="auto",this.$refs.menu.style.bottom="0"),this.dropdownRight=i,this.dropdownLeft=!i}},destroy:function(){this.doShow=!1,window.removeEventListener("scroll",this.doHide,!0),window.removeEventListener("resize",this.doHide),this.container&&(this.container.remove(),this.container=null),this.$emit("hide")},doHide:function(e){var t=this;setTimeout((function(){!t.doShow||t.$refs.menu&&(t.$refs.menu===e.target||t.bindTo&&t.bindTo.contains(e.target))||t.destroy()}),i?50:0)},mouseover:function(e){this.$emit("mouseover",e)},mouseout:function(e){!this.hideOnMouseout||"mouseout"!==e.type||this.$refs.menu.contains(e.toElement||e.relatedTarget)?this.$emit("mouseout",e):this.destroy()}}},r=(s(231),s(9)),l=Object(r.a)(a,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"click-outside",rawName:"v-click-outside:[clickOutsideOptions]",arg:e.clickOutsideOptions}],staticClass:"slds-dropdown-trigger slds-dropdown-trigger_click slds-is-open",on:{click:e.toggleMenu}},[e.doShowAnchor?s("div",{ref:"anchor"},[e._t("button",(function(){return[s("button",{staticClass:"slds-button slds-button_icon slds-button_icon-border-filled slds-button_icon-x-small",attrs:{title:e.showMoreLabel}},[s("span",{staticClass:"slds-button__icon ma-icon ma-icon-more"})])]}))],2):e._e(),e._v(" "),e.doShow?s("div",{ref:"menu",staticClass:"slds-dropdown slds-dropdown_actions",class:{"slds-dropdown_right":e.dropdownRight||e.forceRight,"slds-dropdown_left":e.dropdownLeft||e.forceLeft},on:{mouseover:e.mouseover,mouseout:e.mouseout}},[s("ul",{staticClass:"slds-dropdown__list",attrs:{role:"menu"}},[e._t("default",(function(){return[e._v("--- menu items go here ---")]}))],2)]):e._e()])}),[],!1,null,"8df96254",null);t.a=l.exports},213:function(e,t,s){"use strict";var o={name:"MAActionMenuitem",props:{label:{type:String,required:!0}}},n=s(9),i=Object(n.a)(o,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",e._g({staticClass:"slds-dropdown__item",attrs:{role:"presentation"}},e.$listeners),[s("a",{attrs:{role:"menuitem",tabindex:"0"}},[s("span",{staticClass:"slds-truncate",attrs:{title:e.label}},[e._t("default",(function(){return[e._v(e._s(e._f("decode")(e.label)))]}))],2)])])}),[],!1,null,null,null);t.a=i.exports},227:function(e,t,s){"use strict";s(228)("anchor",(function(e){return function(t){return e(this,"a","name",t)}}))},228:function(e,t,s){var o=s(3),n=s(5),i=s(23),a=/"/g,r=function(e,t,s,o){var n=String(i(e)),r="<"+t;return""!==s&&(r+=" "+s+'="'+String(o).replace(a,"&quot;")+'"'),r+">"+n+"</"+t+">"};e.exports=function(e,t){var s={};s[e]=t(r),o(o.P+o.F*n((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3})),"String",s)}},229:function(e,t,s){(function(t){function o(e){var t=a([["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/],["Search Bot",/(nuhk)|(Googlebot)|(Yammybot)|(Openbot)|(Slurp)|(MSNBot)|(Ask Jeeves\/Teoma)|(ia_archiver)/]]).filter((function(t){return t.rule&&t.rule.test(e)}))[0];return t?t.name:null}function n(){return"undefined"==typeof navigator&&void 0!==t?{name:"node",version:t.version.slice(1),os:s(230).type().toLowerCase()}:null}function i(e){var t=a([["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["vivaldi",/Vivaldi\/([0-9\.]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)$/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\ ([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/]]);if(!e)return null;var s=t.map((function(t){var s=t.rule.exec(e),o=s&&s[1].split(/[._]/).slice(0,3);return o&&o.length<3&&(o=o.concat(1==o.length?[0,0]:[0])),s&&{name:t.name,version:o.join(".")}})).filter(Boolean)[0]||null;return s&&(s.os=o(e)),/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/i.test(e)&&((s=s||{}).bot=!0),s}function a(e){return e.map((function(e){return{name:e[0],rule:e[1]}}))}e.exports={detect:function(){return n()||("undefined"!=typeof navigator?i(navigator.userAgent):null)},detectOS:o,getNodeVersion:n,parseUserAgent:i}}).call(this,s(106))},230:function(e,t){t.endianness=function(){return"LE"},t.hostname=function(){return"undefined"!=typeof location?location.hostname:""},t.loadavg=function(){return[]},t.uptime=function(){return 0},t.freemem=function(){return Number.MAX_VALUE},t.totalmem=function(){return Number.MAX_VALUE},t.cpus=function(){return[]},t.type=function(){return"Browser"},t.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},t.networkInterfaces=t.getNetworkInterfaces=function(){return{}},t.arch=function(){return"javascript"},t.platform=function(){return"browser"},t.tmpdir=t.tmpDir=function(){return"/tmp"},t.EOL="\n",t.homedir=function(){return"/"}},231:function(e,t,s){"use strict";s(205)},232:function(e,t,s){(e.exports=s(31)(!1)).push([e.i,".slds-dropdown[data-v-8df96254]{z-index:10000}.slds-dropdown[data-v-8df96254] .slds-dropdown__header{font-size:.875rem;font-weight:700;padding:.5rem .75rem}\n",""])},250:function(e,t,s){var o=s(466);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals),(0,s(32).default)("ec6d7fde",o,!0,{})},251:function(e,t,s){var o=s(469);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals),(0,s(32).default)("1a6f1f70",o,!0,{})},252:function(e,t,s){var o=s(471);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals),(0,s(32).default)("000a15e2",o,!0,{})},253:function(e,t,s){var o=s(473);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals),(0,s(32).default)("3ff04ff4",o,!0,{})},254:function(e,t,s){var o=s(475);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals),(0,s(32).default)("647251db",o,!0,{})},465:function(e,t,s){"use strict";s(250)},466:function(e,t,s){(e.exports=s(31)(!1)).push([e.i,".slds-scope .slds-tabs_default .slds-card[data-v-4396eac0]{background:#fff;border:1px solid #dddbda;box-shadow:0 2px 2px 0 rgba(0,0,0,0.1)}.slds-scope .slds-card .slds-card__header[data-v-4396eac0]{background:#f3f2f2}\n",""])},467:function(e,t,s){"use strict";var o=s(4),n=s(18),i=s(108),a=s(104);s(105)("match",1,(function(e,t,s,r){return[function(s){var o=e(this),n=null==s?void 0:s[t];return void 0!==n?n.call(s,o):new RegExp(s)[t](String(o))},function(e){var t=r(s,e,this);if(t.done)return t.value;var l=o(e),c=String(this);if(!l.global)return a(l,c);var d=l.unicode;l.lastIndex=0;for(var u,m=[],h=0;null!==(u=a(l,c));){var _=String(u[0]);m[h]=_,""===_&&(l.lastIndex=i(c,n(l.lastIndex),d)),h++}return 0===h?null:m}]}))},468:function(e,t,s){"use strict";s(251)},469:function(e,t,s){(e.exports=s(31)(!1)).push([e.i,".generate-token-modal[data-v-103b45b9] .slds-modal{background-color:rgba(43,40,38,0.6)}@media screen and (min-width: 48em){.generate-token-modal[data-v-103b45b9] .slds-modal .slds-modal__container{width:25%}}\n",""])},470:function(e,t,s){"use strict";s(252)},471:function(e,t,s){(e.exports=s(31)(!1)).push([e.i,"[data-v-864cfa74] .ma-wrapper .slds-notify_container{top:25%;position:fixed;display:flex;justify-content:center}[data-v-864cfa74] .ma-wrapper .slds-notify_container .slds-notify{max-width:60%}\n",""])},472:function(e,t,s){"use strict";s(253)},473:function(e,t,s){(e.exports=s(31)(!1)).push([e.i,".slds-badge[data-v-6feb5190]{display:inline-block}\n",""])},474:function(e,t,s){"use strict";s(254)},475:function(e,t,s){(e.exports=s(31)(!1)).push([e.i,".slds-table[data-v-2c4e3f51]{border-radius:4px}.slds-table.rounded-table[data-v-2c4e3f51]{overflow:hidden}.slds-table.rounded-table tr>th[data-v-2c4e3f51]:first-child{border-top-left-radius:4px}.slds-table.rounded-table tr>th[data-v-2c4e3f51]:last-child{border-top-right-radius:4px}\n",""])},618:function(e,t,s){"use strict";s.r(t);var o=s(61),n=s(66),i=s(67),a=(s(210),s(170),s(62)),r=s(168),l={props:{record:{type:Object,required:!0},objectNames:{type:Object,required:!0},layerNames:{type:Object,required:!0}},data:function(){return{Labels:window.MASystem.Labels}},computed:{objectName:function(){return this.objectNames[this.record.ObjectName__c]},layerName:function(){return this.layerNames[this.record.LayerID__c]}},methods:{resetSync:function(){this.$emit("reset-sync",this.record.Id)},testSync:function(){this.$emit("test-sync",this.record.Id)},editRecord:function(){this.$emit("edit-record",Object.assign({},this.record))},deleteRecord:function(){this.$emit("delete-record",this.record.Id)}}},c=(s(465),s(9)),d=Object(c.a)(l,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("article",{staticClass:"slds-card slds-container_medium slds-m-bottom_medium"},[s("div",{staticClass:"slds-card__header slds-p-around_x-small"},[s("div",{staticClass:"slds-grid slds-grid_align-spread slds-grid_vertical-align-center"},[s("div",{staticClass:"slds-col slds-text-heading_small slds-p-left_x-small"},[e._v("\n                "+e._s(e.record.Name)+"\n            ")]),e._v(" "),s("div",{staticClass:"slds-grid slds-grid_vertical-align-center slds-p-right_x-small"},[s("div",{staticClass:"slds-m-right_xx-small"},[s("button",{staticClass:"slds-button slds-button_icon slds-button_icon-container",on:{click:e.deleteRecord}},[s("span",{staticClass:"slds-button__icon ma-icon ma-icon-delete"})])]),e._v(" "),s("button",{staticClass:"slds-button slds-button_neutral slds-m-around_xx-small",on:{click:e.resetSync}},[e._v("\n                    "+e._s(e.Labels.ArcGIS_ResetSync)+"\n                ")]),e._v(" "),s("button",{staticClass:"slds-button slds-button_neutral slds-m-around_xx-small",on:{click:e.testSync}},[e._v("\n                    "+e._s(e.Labels.ArcGIS_TestSync)+"\n                ")]),e._v(" "),s("button",{staticClass:"slds-button slds-button_neutral slds-m-around_xx-small",on:{click:e.editRecord}},[e._v("\n                    "+e._s(e.Labels.ArcGIS_Edit)+"\n                ")])])])]),e._v(" "),s("div",{staticClass:"slds-card__body slds-card__body_inner slds-m-around_xx-small"},[s("div",{staticClass:"slds-grid slds-gutters"},[s("div",{staticClass:"slds-col"},[s("div",{staticClass:"slds-form-element slds-m-bottom_small"},[s("label",{staticClass:"slds-form-element__label",attrs:{for:"select-01"}},[e._v(e._s(e.Labels.ArcGIS_Object))]),e._v(" "),s("div",{staticClass:"slds-form-element__control"},[s("input",{staticClass:"slds-input",attrs:{id:"objectName",type:"text",readonly:""},domProps:{value:e.objectName}})])]),e._v(" "),s("div",{staticClass:"slds-form-element slds-m-bottom_small"},[s("label",{staticClass:"slds-form-element__label",attrs:{for:"select-01"}},[e._v(e._s(e.Labels.ArcGIS_FeatureID))]),e._v(" "),s("div",{staticClass:"slds-form-element__control"},[s("input",{staticClass:"slds-input",attrs:{id:"featureIdFieldName",type:"text",readonly:""},domProps:{value:e.record.FeatureIDFieldName__c}})])]),e._v(" "),s("div",{staticClass:"slds-form-element slds-m-bottom_small"},[s("label",{staticClass:"slds-form-element__label",attrs:{for:"select-01"}},[e._v(e._s(e.Labels.ArcGIS_LastPushed))]),e._v(" "),s("div",{staticClass:"slds-form-element__control"},[s("input",{staticClass:"slds-input",attrs:{id:"lastPushedFieldName",type:"text",readonly:""},domProps:{value:e.record.LastPushedFieldName__c}})])]),e._v(" "),s("div",{staticClass:"slds-form-element slds-m-bottom_medium"},[s("label",{staticClass:"slds-form-element__label",attrs:{for:"select-01"}},[e._v(e._s(e.Labels.ArcGIS_Updated))]),e._v(" "),s("div",{staticClass:"slds-form-element__control"},[s("input",{staticClass:"slds-input",attrs:{id:"isUpdatedFieldName",type:"text",readonly:""},domProps:{value:e.record.IsUpdatedFieldName__c}})])]),e._v(" "),s("div",{staticClass:"slds-form-element slds-m-bottom_medium"},[s("label",{staticClass:"slds-form-element__label",attrs:{for:"select-01"}},[e._v(e._s(e.Labels.ArcGIS_Log))]),e._v(" "),s("div",{staticClass:"slds-form-element__control"},[s("input",{staticClass:"slds-input",attrs:{id:"enableLog",type:"text",readonly:""},domProps:{value:e.record.EnableLog__c?e.Labels.ArcGIS_Enabled:e.Labels.ArcGIS_Disabled}})])])]),e._v(" "),s("div",{staticClass:"slds-col"},[s("div",{staticClass:"slds-form-element slds-m-bottom_small"},[s("label",{staticClass:"slds-form-element__label",attrs:{for:"select-01"}},[e._v(e._s(e.Labels.ArcGIS_Layer))]),e._v(" "),s("div",{staticClass:"slds-form-element__control"},[s("input",{staticClass:"slds-input",attrs:{id:"layerName",type:"text",readonly:""},domProps:{value:e.layerName}})])]),e._v(" "),s("div",{staticClass:"slds-form-element slds-m-bottom_small"},[s("label",{staticClass:"slds-form-element__label",attrs:{for:"select-01"}},[e._v(e._s(e.Labels.ArcGIS_Template))]),e._v(" "),s("div",{staticClass:"slds-form-element__control"},[s("input",{staticClass:"slds-input",attrs:{id:"templateName",type:"text",readonly:""},domProps:{value:e.record.TemplateName__c}})])]),e._v(" "),s("div",{staticClass:"slds-form-element slds-m-bottom_small"},[s("label",{staticClass:"slds-form-element__label",attrs:{for:"select-01"}},[e._v(e._s(e.Labels.ArcGIS_FeatureLayerURL))]),e._v(" "),s("div",{staticClass:"slds-form-element__control"},[s("input",{staticClass:"slds-input",attrs:{id:"featureLayerUrl",type:"text",readonly:""},domProps:{value:e.record.FeatureLayerURL__c}})])]),e._v(" "),s("div",{staticClass:"slds-form-element slds-m-bottom_small"},[s("label",{staticClass:"slds-form-element__label",attrs:{for:"select-01"}},[e._v(e._s(e.Labels.ArcGIS_AuthenticationToken))]),e._v(" "),s("div",{staticClass:"slds-form-element__control"},[s("input",{staticClass:"slds-input",attrs:{id:"token",type:"text",readonly:""},domProps:{value:e.record.Token__c}})])])])])])])}),[],!1,null,"4396eac0",null).exports,u=(s(45),s(190),s(467),s(99),s(167)),m=s(169),h=s(166),_=window.MARemoting,b={components:{MAModal:u.a,MAInput:m.a,MAToast:h.a},props:{tokenServicesUrl:{type:String,required:!0}},data:function(){return{Labels:window.MASystem.Labels,title:"".concat(window.MASystem.Labels.ArcGIS_RequestForPermission,": ").concat(this.tokenServicesUrl.replace(/^(https?:\/\/[^/?]+).*$/,"$1")),username:null,password:null,toast:null}},computed:{isToastVisible:function(){return null!=this.toast}},methods:{cancel:function(){this.$emit("close-generateToken")},validateInput:function(){return this.username&&this.password},generateToken:function(){var e=this;if(this.validateInput()){var t={ajaxResource:"MAArcGISAPI",action:"generateToken",tokenServicesURL:this.tokenServicesUrl,username:this.username,password:this.password};(new a.a).setAction(_.processAJAXRequest).setErrorHandler(this.handleRemoteActionError.bind(this)).invoke([t],(function(t){t.success?e.$emit("close-generateToken",t.token):"You are not authorized to access this information"===t.error?e.toast=e.Labels.ArcGIS_FailedToGenerateTokenInvalidCredentials:e.toast=e.Labels.ArcGIS_FailedToGenerateTokenContactAdministrator}),{escape:!1,buffer:!1})}else this.toast=this.Labels.ArcGIS_MissingRequiredFields},clearToast:function(){this.toast=null},handleRemoteActionError:function(e,t){console.log("TODO: handleRemoteActionError",t)}}},f=(s(468),Object(c.a)(b,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("MAModal",{staticClass:"generate-token-modal",attrs:{title:e.title,doDetach:!0},on:{close:e.cancel}},[s("div",{attrs:{slot:"content"},slot:"content"},[e.isToastVisible?s("MAToast",{attrs:{msg:e.toast},on:{close:e.clearToast}}):e._e(),e._v(" "),s("div",{staticClass:"slds-grid slds-gutters"},[s("div",{staticClass:"slds-col"},[s("MAInput",{staticClass:"slds-form-element slds-m-bottom_small",attrs:{isRequired:!0,label:e.Labels.ArcGIS_Username},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),e._v(" "),s("MAInput",{staticClass:"slds-form-element slds-m-bottom_large",attrs:{isRequired:!0,label:e.Labels.ArcGIS_Password,type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)])],1),e._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("button",{staticClass:"slds-button slds-button_neutral",on:{click:e.cancel}},[e._v("\n                "+e._s(e.Labels.ArcGIS_Cancel)+"\n            ")]),e._v(" "),s("button",{staticClass:"slds-button slds-button_brand",on:{click:e.generateToken}},[e._v("\n                "+e._s(e.Labels.ArcGIS_GenerateToken)+"\n            ")])])])],1)}),[],!1,null,"103b45b9",null).exports),p=s(163),v=s(173),A=window.MARemoting,g={components:{MAModal:u.a,MAInput:m.a,MAPicklist:p.a,MACheckbox:v.a,MAToast:h.a,GenerateToken:f},props:{objects:{type:[Array,String],required:!0},layerNames:{type:Object,required:!0},layerUrls:{type:Object,required:!0},templateNames:{type:Object,required:!0},recordToEdit:{type:Object,default:null}},data:function(){return{Labels:window.MASystem.Labels,record:{Id:null,Name:null,ObjectName__c:null,FeatureIDFieldName__c:null,LastPushedFieldName__c:null,IsUpdatedFieldName__c:null,LayerID__c:null,TemplateName__c:null,FeatureLayerURL__c:null,Token__c:null,EnableLog__c:!0},doubleFields:[],datetimeFields:[],booleanFields:[],isTokenBasedSecurity:!1,tokenServicesUrl:null,isGenerateTokenVisible:!1,toast:null}},computed:{title:function(){return this.recordToEdit?this.Labels.ArcGIS_EditArcGISObject:this.Labels.ArcGIS_NewArcGISObject},saveAction:function(){return"".concat(this.recordToEdit?"update":"create","BatchPushSetting")},layers:function(){var e=this;return Object.keys(this.templateNames).length>0&&this.record.ObjectName__c?Object.keys(this.templateNames[this.record.ObjectName__c]).map((function(t){return{id:t,name:e.layerNames[t]}})):[]},templates:function(){return Object.keys(this.templateNames).length>0&&this.record.ObjectName__c&&this.record.LayerID__c?this.templateNames[this.record.ObjectName__c][this.record.LayerID__c]:[]},isToastVisible:function(){return null!=this.toast}},watch:{recordToEdit:{handler:function(e){e&&(this.record=e,this.getFields(this.record.ObjectName__c))}},"record.LayerID__c":{handler:function(e){this.layerUrls[e].indexOf("/rest/")>-1&&(this.record.FeatureLayerURL__c=this.layerUrls[e])}},"record.FeatureLayerURL__c":{handler:function(e){var t=this;if(this.isTokenBasedSecurity=!1,e){var s=e.match(/^(https?:\/\/[^ \t]+\/rest)\/services\/[^/ \t]+\/FeatureServer\/[0-9]+$/);if(s){var o={ajaxResource:"MAArcGISAPI",action:"get",requestURL:"".concat(s[1],"/info?f=json")};(new a.a).setAction(A.processAJAXRequest).setErrorHandler(this.handleRemoteActionError.bind(this)).invoke([o],(function(e){if(e.success){var s=e.data;t.isTokenBasedSecurity=s.authInfo.isTokenBasedSecurity,t.tokenServicesUrl=s.authInfo.tokenServicesUrl.replace(/\/+$/,"")}}),{escape:!1,buffer:!1})}}}}},created:function(){this.init()},methods:{init:function(){this.recordToEdit&&(this.record=this.recordToEdit,this.getFields(this.record.ObjectName__c))},getFields:function(e){var t=this;if(this.doubleFields.length=0,this.datetimeFields.length=0,this.booleanFields.length=0,e){var s={ajaxResource:"MAArcGISAPI",action:"getFields",objectName:e};(new a.a).setAction(A.processAJAXRequest).setErrorHandler(this.handleRemoteActionError.bind(this)).invoke([s],(function(e){e.success&&Object.keys(e.fields).forEach((function(s){switch(e.fields[s].toUpperCase()){case"DOUBLE":t.doubleFields.push(s);break;case"DATETIME":t.datetimeFields.push(s);break;case"BOOLEAN":t.booleanFields.push(s)}}))}),{escape:!1,buffer:!1}),this.doubleFields.sort(),this.datetimeFields.sort(),this.booleanFields.sort()}},onSelectObject:function(){this.getFields(this.record.ObjectName__c),this.record.FeatureIDFieldName__c=null,this.record.LastPushedFieldName__c=null,this.record.IsUpdatedFieldName__c=null,this.record.LayerID__c=null,this.record.TemplateName__c=null,this.record.FeatureLayerURL__c=null,this.record.Token__c=null},generateToken:function(){this.record.FeatureLayerURL__c?this.isTokenBasedSecurity&&(this.isGenerateTokenVisible=!0):this.toast=this.Labels.ArcGIS_MissingFeatureLayerURL},closeGenerateToken:function(e){this.isGenerateTokenVisible=!1,e&&(this.record.Token__c=e)},cancel:function(){this.$emit("close-editor")},validateInput:function(){return this.record.ObjectName__c&&this.record.FeatureIDFieldName__c&&this.record.LastPushedFieldName__c&&this.record.IsUpdatedFieldName__c&&this.record.LayerID__c&&this.record.TemplateName__c&&this.record.FeatureLayerURL__c},save:function(){var e=this;if(this.validateInput()){var t={ajaxResource:"MAArcGISAPI",action:this.saveAction,record:JSON.stringify(this.record)};(new a.a).setAction(A.processAJAXRequest).setErrorHandler(this.handleRemoteActionError.bind(this)).invoke([t],(function(t){t.success?e.$emit("close-editor",!0):e.toast=e.Labels.ArcGIS_FailedToSaveData}),{escape:!1,buffer:!1})}else this.toast=this.Labels.ArcGIS_MissingRequiredFields},clearToast:function(){this.toast=null},handleRemoteActionError:function(e,t){console.log("TODO: handleRemoteActionError",t)}}},S=Object(c.a)(g,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("MAModal",{attrs:{title:e.title,doDetach:!0},on:{close:e.cancel}},[s("div",{attrs:{slot:"content"},slot:"content"},[e.isToastVisible?s("MAToast",{attrs:{msg:e.toast},on:{close:e.clearToast}}):e._e(),e._v(" "),s("div",{staticClass:"slds-grid slds-wrap slds-container_medium slds-m-bottom_large"},[s("div",{staticClass:"slds-has-flexi-truncate slds-p-horizontal_medium slds-size_1-of-2"},[s("MAInput",{staticClass:"slds-form-element slds-m-bottom_small",attrs:{isRequired:!0,label:e.Labels.ArcGIS_SettingName},model:{value:e.record.Name,callback:function(t){e.$set(e.record,"Name",t)},expression:"record.Name"}})],1),e._v(" "),s("div",{staticClass:"slds-has-flexi-truncate slds-p-horizontal_medium slds-size_1-of-2"},[s("MAPicklist",{staticClass:"slds-m-bottom_small",attrs:{options:e.objects,isDisabled:0==e.objects.length,isRequired:!0,hasNoneOption:!1,doDetach:!0,label:e.Labels.ArcGIS_Object,placeholder:e.Labels.MA_Select_an_Option,keyString:"path",valueString:"label"},on:{input:e.onSelectObject},model:{value:e.record.ObjectName__c,callback:function(t){e.$set(e.record,"ObjectName__c",t)},expression:"record.ObjectName__c"}})],1),e._v(" "),s("div",{staticClass:"slds-has-flexi-truncate slds-p-horizontal_medium slds-size_1-of-2"},[s("MAPicklist",{staticClass:"slds-m-bottom_small",attrs:{options:e.doubleFields,isDisabled:0==e.doubleFields.length,isRequired:!0,hasNoneOption:!1,doDetach:!0,label:e.Labels.ArcGIS_FeatureID,placeholder:e.Labels.MA_Select_an_Option},model:{value:e.record.FeatureIDFieldName__c,callback:function(t){e.$set(e.record,"FeatureIDFieldName__c",t)},expression:"record.FeatureIDFieldName__c"}})],1),e._v(" "),s("div",{staticClass:"slds-has-flexi-truncate slds-p-horizontal_medium slds-size_1-of-2"},[s("MAPicklist",{staticClass:"slds-m-bottom_small",attrs:{options:e.datetimeFields,isDisabled:0==e.datetimeFields.length,isRequired:!0,hasNoneOption:!1,doDetach:!0,label:e.Labels.ArcGIS_LastPushed,placeholder:e.Labels.MA_Select_an_Option},model:{value:e.record.LastPushedFieldName__c,callback:function(t){e.$set(e.record,"LastPushedFieldName__c",t)},expression:"record.LastPushedFieldName__c"}})],1),e._v(" "),s("div",{staticClass:"slds-has-flexi-truncate slds-p-horizontal_medium slds-size_1-of-2"},[s("MAPicklist",{staticClass:"slds-m-bottom_small",attrs:{options:e.booleanFields,isDisabled:0==e.booleanFields.length,isRequired:!0,hasNoneOption:!1,doDetach:!0,label:e.Labels.ArcGIS_Updated,placeholder:e.Labels.MA_Select_an_Option},model:{value:e.record.IsUpdatedFieldName__c,callback:function(t){e.$set(e.record,"IsUpdatedFieldName__c",t)},expression:"record.IsUpdatedFieldName__c"}})],1),e._v(" "),s("div",{staticClass:"slds-has-flexi-truncate slds-p-horizontal_medium slds-size_1-of-2"},[s("MAPicklist",{staticClass:"slds-m-bottom_small",attrs:{options:e.layers,isDisabled:0==e.layers.length,isRequired:!0,hasNoneOption:!1,doDetach:!0,label:e.Labels.ArcGIS_Layer,placeholder:e.Labels.MA_Select_an_Option,keyString:"id",valueString:"name"},model:{value:e.record.LayerID__c,callback:function(t){e.$set(e.record,"LayerID__c",t)},expression:"record.LayerID__c"}})],1),e._v(" "),s("div",{staticClass:"slds-has-flexi-truncate slds-p-horizontal_medium slds-size_1-of-2"},[s("MAPicklist",{staticClass:"slds-m-bottom_small",attrs:{options:e.templates,isDisabled:0==e.templates.length,isRequired:!0,hasNoneOption:!1,doDetach:!0,label:e.Labels.ArcGIS_Template,placeholder:e.Labels.MA_Select_an_Option},model:{value:e.record.TemplateName__c,callback:function(t){e.$set(e.record,"TemplateName__c",t)},expression:"record.TemplateName__c"}})],1),e._v(" "),s("div",{staticClass:"slds-has-flexi-truncate slds-p-horizontal_medium slds-size_1-of-2"},[s("MAInput",{staticClass:"slds-m-bottom_small",attrs:{isDisabled:null==e.record.LayerID__c,isRequired:!0,label:e.Labels.ArcGIS_FeatureLayerURL},model:{value:e.record.FeatureLayerURL__c,callback:function(t){e.$set(e.record,"FeatureLayerURL__c",t)},expression:"record.FeatureLayerURL__c"}})],1),e._v(" "),s("div",{staticClass:"slds-has-flexi-truncate slds-p-horizontal_medium slds-size_1-of-2"},[s("div",{staticClass:"slds-grid slds-grid_vertical-align-end slds-gutters"},[s("div",{staticClass:"slds-col"},[s("MAInput",{staticClass:"slds-m-bottom_small",attrs:{isRequired:!1,isDisabled:!e.isTokenBasedSecurity,label:e.Labels.ArcGIS_AuthenticationToken},model:{value:e.record.Token__c,callback:function(t){e.$set(e.record,"Token__c",t)},expression:"record.Token__c"}})],1),e._v(" "),s("div",{staticClass:"slds-col"},[s("button",{staticClass:"slds-button slds-m-bottom_small slds-button_neutral",attrs:{disabled:!e.isTokenBasedSecurity},on:{click:e.generateToken}},[e._v("\n                                "+e._s(e.Labels.ArcGIS_Generate)+"\n                            ")]),e._v(" "),e.isGenerateTokenVisible?s("GenerateToken",{attrs:{tokenServicesUrl:e.tokenServicesUrl},on:{"close-generateToken":e.closeGenerateToken}}):e._e()],1)])]),e._v(" "),s("div",{staticClass:"slds-has-flexi-truncate slds-p-horizontal_medium slds-size_1-of-2"},[s("MACheckbox",{staticClass:"slds-m-top_large",attrs:{title:e.Labels.ArcGIS_EnableLog},model:{value:e.record.EnableLog__c,callback:function(t){e.$set(e.record,"EnableLog__c",t)},expression:"record.EnableLog__c"}})],1)])],1),e._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("button",{staticClass:"slds-button slds-button_neutral",on:{click:e.cancel}},[e._v("\n                "+e._s(e.Labels.ArcGIS_Cancel)+"\n            ")]),e._v(" "),s("button",{staticClass:"slds-button slds-button_brand",on:{click:e.save}},[e._v("\n                "+e._s(e.Labels.ArcGIS_Save)+"\n            ")])])])],1)}),[],!1,null,null,null).exports,I=window.MARemoting,L={components:{MAToast:h.a,MAModal:u.a,ArcGISObject:d,EditArcGISObject:S},data:function(){return{Labels:window.MASystem.Labels,objects:[],objectNames:{},layerNames:{},layerUrls:{},templateNames:{},isEditorVisible:!1,record:null,records:[],confirm:{title:null,message:null,button:null,ok:null,cancel:null},toast:{message:null,state:null}}},computed:{isConfirmVisible:function(){return null!=this.confirm.title},isToastVisible:function(){return null!=this.toast.message}},created:function(){this.init()},methods:{init:function(){this.loadLayers(),this.loadSettingRecords()},loadLayers:function(){var e=this;this.objects.length=0,this.objectNames={},this.layerNames={},this.layerUrls={},this.templateNames={},(new a.a).setAction(I.processAJAXRequest).setErrorHandler(this.handleRemoteActionError.bind(this)).invoke([{ajaxResource:"MAArcGISAPI",action:"getLayers"}],(function(t){if(t.success){var s=[],o=[],n=[];Object(r.b)(t.records,"sma__").forEach((function(t){var i=t.Id,a=t.Name;e.$set(e.layerNames,i,a),e.$set(e.layerUrls,i,JSON.parse(t.Options__c).baseURL),s.push("".concat(a,"\n").concat(i)),t.ArcGISWebMapC2C__c&&JSON.parse(t.ArcGISWebMapC2C__c).forEach((function(t){if(t.active&&t.salesforceObject.path){var s=t.salesforceObject,a=t.templateName;o.indexOf(s.path)<0&&(o.push(s.path),n.push("".concat(s.label,"\n").concat(s.path)),e.$set(e.templateNames,s.path,{})),e.templateNames[s.path][i]||e.$set(e.templateNames[s.path],i,[]),e.templateNames[s.path][i].push(a)}}))})),n.sort().forEach((function(t){var s=t.split("\n"),o=s[1],n=s[0];e.objects.push({path:o,label:n}),e.$set(e.objectNames,o,n)}))}}),{escape:!1,buffer:!1})},loadSettingRecords:function(){var e=this;this.records.length=0,(new a.a).setAction(I.processAJAXRequest).setErrorHandler(this.handleRemoteActionError.bind(this)).invoke([{ajaxResource:"MAArcGISAPI",action:"getBatchPushSettings"}],(function(t){t.success&&Object(r.b)(t.records,"sma__").forEach((function(t){t=Object.assign({Token__c:null},t),e.records.push(t)}))}),{escape:!1,buffer:!1})},createRecord:function(){this.record=null,this.isEditorVisible=!0},confirmResetSync:function(e){var t=this;this.confirm={title:this.Labels.ArcGIS_ResetSync,message:this.Labels.ArcGIS_ResetSyncConfirm,button:this.Labels.ArcGIS_ResetSync,ok:function(){t.confirm.title=null,t.resetSync(e)},cancel:function(){t.confirm.title=null}}},resetSync:function(e){var t=this;this.records.forEach((function(s){if(s.Id===e){var o={ajaxResource:"MAArcGISAPI",action:"resetBatchPushLastPushed",settingId:e};return(new a.a).setAction(I.processAJAXRequest).setErrorHandler(t.handleRemoteActionError.bind(t)).invoke([o],(function(e){e.success?t.toast={message:t.Labels.ArcGIS_SucceededToResetSync,state:"success"}:t.toast={message:t.Labels.ArcGIS_FailedToResetSync,state:"error"}}),{escape:!1,buffer:!1}),!1}return!0}))},testSync:function(e){var t=this;this.records.forEach((function(s){if(s.Id===e){var o={ajaxResource:"MAArcGISAPI",action:"testBatchPushSetting",settingId:e};return(new a.a).setAction(I.processAJAXRequest).setErrorHandler(t.handleRemoteActionError.bind(t)).invoke([o],(function(e){e.success?t.toast={message:t.Labels.ArcGIS_SucceededToTestSync,state:"success"}:t.toast={message:"".concat(t.Labels.ArcGIS_FailedToTestSync,' <a href="/').concat(e.object,'">').concat(e.error,"</a>"),state:"error"}}),{escape:!1,buffer:!1}),!1}return!0}))},editRecord:function(e){this.record=e,this.isEditorVisible=!0},closeEditor:function(e){this.record=null,this.isEditorVisible=!1,e&&(this.loadSettingRecords(),this.$emit("refresh"))},confirmDeleteRecord:function(e){var t=this;this.confirm={title:this.Labels.ArcGIS_DeleteArcGISObject,message:this.Labels.ArcGIS_DeleteArcGISObjectConfirm,button:this.Labels.MA_Delete,ok:function(){t.confirm.title=null,t.deleteRecord(e)},cancel:function(){t.confirm.title=null}}},deleteRecord:function(e){var t=this;this.records.forEach((function(s,o){if(s.Id===e){var n={ajaxResource:"MAArcGISAPI",action:"deleteBatchPushSetting",settingId:e};return(new a.a).setAction(I.processAJAXRequest).setErrorHandler(t.handleRemoteActionError.bind(t)).invoke([n],(function(e){e.success?(t.records.splice(o,1),t.$emit("refresh")):t.toast={message:t.Labels.ArcGIS_FailedToDeleteData,state:"error"}}),{escape:!1,buffer:!1}),!1}return!0}))},clearToast:function(){this.toast.message=null},handleRemoteActionError:function(e,t){console.log("TODO: handleRemoteActionError",t)}}},y=(s(470),Object(c.a)(L,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.isToastVisible?s("MAToast",{attrs:{msg:e.toast.message,state:e.toast.state},on:{close:e.clearToast}}):e._e(),e._v(" "),e.isEditorVisible?s("EditArcGISObject",{attrs:{objects:e.objects,layerNames:e.layerNames,layerUrls:e.layerUrls,templateNames:e.templateNames,recordToEdit:e.record},on:{"close-editor":e.closeEditor}}):e._e(),e._v(" "),s("div",{staticClass:"slds-grid slds-container_medium"},[s("button",{staticClass:"slds-button slds-button_brand slds-m-bottom_medium slds-shrink-none",on:{click:e.createRecord}},[s("span",{staticClass:"slds-button__icon slds-button__icon_left ma-icon ma-icon-add"}),e._v(e._s(e.Labels.MA_Add_New)+"\n        ")]),e._v(" "),s("div",{staticClass:"slds-m-left_small slds-m-top_x-small"},[e._v("\n            "+e._s(e.Labels.ArcGIS_AddNewArcGISObjectDescription)+"\n        ")])]),e._v(" "),e._l(e.records,(function(t,o){return s("ArcGISObject",{key:o,attrs:{record:t,objectNames:e.objectNames,layerNames:e.layerNames},on:{"reset-sync":e.confirmResetSync,"test-sync":e.testSync,"edit-record":e.editRecord,"delete-record":e.confirmDeleteRecord}})})),e._v(" "),e.isConfirmVisible?s("MAModal",{attrs:{title:e.confirm.title},on:{close:e.confirm.cancel}},[s("div",{attrs:{slot:"content"},slot:"content"},[s("div",{staticClass:"slds-grid slds-gutters"},[e._v("\n                "+e._s(e.confirm.message)+"\n            ")])]),e._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("button",{staticClass:"slds-button slds-button_neutral",on:{click:e.confirm.cancel}},[e._v("\n                "+e._s(e.Labels.MA_Cancel)+"\n            ")]),e._v(" "),s("button",{staticClass:"slds-button slds-button_brand",on:{click:e.confirm.ok}},[e._v("\n                "+e._s(e.confirm.button)+"\n            ")])])]):e._e()],2)}),[],!1,null,"864cfa74",null).exports),w=s(212),C=s(213),k={components:{MAActionMenu:w.a,MAActionMenuItem:C.a},props:{record:{type:Object,required:!0},settingNames:{type:Object,required:!0}},data:function(){return{Labels:window.MASystem.Labels}},computed:{recordInfo:function(){return JSON.parse(this.record.CronJobDetail.Name.substring(16))},settingName:function(){return this.settingNames[this.recordInfo.settingId]},nextFireTime:function(){return new Date(this.record.NextFireTime).toLocaleString().replace(", "," &bull; ")}},methods:{runJob:function(){this.$emit("run-job",this.recordInfo.settingId)},editRecord:function(){var e={jobId:this.record.Id,jobName:this.recordInfo.jobName,settingId:this.recordInfo.settingId,repeats:this.recordInfo.repeats};this.$emit("edit-record",e)},deleteRecord:function(){this.$emit("delete-record",this.record.Id)},handleRemoteActionError:function(e,t){console.log("TODO: handleRemoteActionError",t)}}},T=(s(472),Object(c.a)(k,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("tr",[s("td",[s("div",{staticClass:"slds-truncate"},[e._v("\n            "+e._s(e.recordInfo.jobName)+"\n        ")])]),e._v(" "),s("td",[s("div",{staticClass:"slds-truncate"},[e._v("\n            "+e._s(e.settingName)+"\n        ")])]),e._v(" "),s("td",[s("div",{staticClass:"slds-badge slds-badge_inverse"},[e._v("\n            "+e._s(e.record.State)+"\n        ")])]),e._v(" "),s("td",[s("div",{staticClass:"slds-truncate"},[e._v("\n            "+e._s(e.nextFireTime)+"\n        ")])]),e._v(" "),s("td",[s("div",{staticClass:"slds-truncate"},[e._v("\n            "+e._s(e.record.CreatedBy.Name)+"\n        ")])]),e._v(" "),s("td",[s("MAActionMenu",{attrs:{doDetach:!0}},[s("button",{directives:[{name:"show",rawName:"v-show",value:!e.showEditMode,expression:"!showEditMode"}],staticClass:"slds-button slds-button_icon slds-button_icon-border-filled slds-button_icon-x-small",attrs:{slot:"button"},slot:"button"},[s("span",{staticClass:"slds-button__icon ma-icon ma-icon-down"})]),e._v(" "),s("MAActionMenuItem",{attrs:{label:e.Labels.ArcGIS_Run},on:{click:e.runJob}}),e._v(" "),s("MAActionMenuItem",{attrs:{label:e.Labels.ArcGIS_Edit},on:{click:e.editRecord}}),e._v(" "),s("MAActionMenuItem",{attrs:{label:e.Labels.ArcGIS_Delete},on:{click:e.deleteRecord}})],1)],1)])}),[],!1,null,"6feb5190",null).exports),M=s(437),R=window.MARemoting,N={components:{MAModal:u.a,MARadioGroup:M.a,MAInput:m.a,MAPicklist:p.a,MAToast:h.a},props:{recordToEdit:{type:Object,default:null},settings:{type:Array,default:null}},data:function(){return{Labels:window.MASystem.Labels,record:{jobId:null,jobName:null,settingId:null,repeats:null},recurring:!0,options:{recurring:[{label:window.MASystem.Labels.ArcGIS_JustOnce,value:!1},{label:window.MASystem.Labels.ArcGIS_Recurring,value:!0}],repeats:[{key:"15m",value:window.MASystem.Labels.ArcGIS_Every15Minutes},{key:"30m",value:window.MASystem.Labels.ArcGIS_Every30Minutes},{key:"1h",value:window.MASystem.Labels.ArcGIS_Hourly},{key:"1d",value:window.MASystem.Labels.ArcGIS_Daily},{key:"1w",value:window.MASystem.Labels.ArcGIS_Weekly}]},toast:null}},computed:{title:function(){return this.recordToEdit?this.Labels.ArcGIS_EditBatch:this.Labels.ArcGIS_NewBatch},action:function(){return this.recurring?this.Labels.ArcGIS_ScheduleBatch:this.Labels.ArcGIS_RunOneTimeBatch},isToastVisible:function(){return null!=this.toast}},created:function(){this.init()},methods:{init:function(){this.recordToEdit&&(this.record=this.recordToEdit)},cancel:function(){this.$emit("close-editor")},validateInput:function(){return this.record.settingId&&(!this.recurring||this.record.jobName&&this.record.repeats)},runJob:function(e,t,s){var o={ajaxResource:"MAArcGISAPI",action:"runBatchPush",settingId:e};(new a.a).setAction(R.processAJAXRequest).setErrorHandler(this.handleRemoteActionError.bind(this)).invoke([o],(function(e){e.success?t():s()}),{escape:!1,buffer:!1})},createJob:function(e,t,s){var o={ajaxResource:"MAArcGISAPI",action:"createBatchPushJob",record:JSON.stringify(e)};(new a.a).setAction(R.processAJAXRequest).setErrorHandler(this.handleRemoteActionError.bind(this)).invoke([o],(function(e){e.success?t():s()}),{escape:!1,buffer:!1})},deleteJob:function(e,t,s){var o={ajaxResource:"MAArcGISAPI",action:"deleteBatchPushJob",jobId:e};(new a.a).setAction(R.processAJAXRequest).setErrorHandler(this.handleRemoteActionError.bind(this)).invoke([o],(function(e){e.success?t():s()}),{escape:!1,buffer:!1})},schedule:function(){var e=this;this.validateInput()?this.recurring?this.recordToEdit?this.deleteJob(this.record.jobId,(function(){e.createJob(e.record,(function(){e.$emit("close-editor",{saved:!0,toast:{message:e.Labels.ArcGIS_BatchScheduled,state:"success"}})}),(function(){e.toast=e.Labels.ArcGIS_FailedToScheduleBatch}))}),(function(){e.toast=e.Labels.ArcGIS_FailedToDeleteBatch})):this.createJob(this.record,(function(){e.$emit("close-editor",{saved:!0,toast:{message:e.Labels.ArcGIS_BatchScheduled,state:"success"}})}),(function(){e.toast=e.Labels.ArcGIS_FailedToScheduleBatch})):this.runJob(this.record.settingId,(function(){e.$emit("close-editor",{saved:!0,toast:{message:e.Labels.ArcGIS_BatchStarted,state:"success"}})}),(function(){e.toast=e.Labels.ArcGIS_FailedToRunBatch})):this.toast=this.Labels.ArcGIS_MissingRequiredFields},clearToast:function(){this.toast=null},handleRemoteActionError:function(e,t){console.log("TODO: handleRemoteActionError",t)}}},x=Object(c.a)(N,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("MAModal",{attrs:{title:e.title},on:{close:e.cancel}},[s("div",{attrs:{slot:"content"},slot:"content"},[e.isToastVisible?s("MAToast",{attrs:{msg:e.toast},on:{close:e.clearToast}}):e._e(),e._v(" "),s("div",{staticClass:"slds-col"},[s("MARadioGroup",{staticClass:"slds-form-element slds-m-bottom_medium",attrs:{options:e.options.recurring,isRequired:!1,label:e.Labels.ArcGIS_RunThisBatch},model:{value:e.recurring,callback:function(t){e.recurring=t},expression:"recurring"}}),e._v(" "),s("MAInput",{staticClass:"slds-form-element slds-m-bottom_medium",attrs:{isRequired:e.recurring,isDisabled:!e.recurring,label:e.Labels.ArcGIS_BatchName},model:{value:e.record.jobName,callback:function(t){e.$set(e.record,"jobName",t)},expression:"record.jobName"}}),e._v(" "),s("MAPicklist",{staticClass:"slds-m-bottom_medium",attrs:{options:e.settings,hasNoneOption:!1,isRequired:!0,doDetach:!0,label:e.Labels.ArcGIS_ArcGISObject,keyString:"id",valueString:"name"},model:{value:e.record.settingId,callback:function(t){e.$set(e.record,"settingId",t)},expression:"record.settingId"}}),e._v(" "),s("MAPicklist",{attrs:{options:e.options.repeats,hasNoneOption:!1,isRequired:e.recurring,isDisabled:!e.recurring,doDetach:!0,label:e.Labels.ArcGIS_Repeats,keyString:"key",valueString:"value"},model:{value:e.record.repeats,callback:function(t){e.$set(e.record,"repeats",t)},expression:"record.repeats"}})],1)],1),e._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("button",{staticClass:"slds-button slds-button_neutral",on:{click:e.cancel}},[e._v("\n                "+e._s(e.Labels.ArcGIS_Cancel)+"\n            ")]),e._v(" "),s("button",{staticClass:"slds-button slds-button_brand",on:{click:e.schedule}},[e._v("\n                "+e._s(e.action)+"\n            ")])])])],1)}),[],!1,null,null,null).exports,E=window.MARemoting,G={components:{MAToast:h.a,MAModal:u.a,BatchSetting:T,EditBatchSetting:x},data:function(){return{Labels:window.MASystem.Labels,isEditorVisible:!1,record:null,records:[],settings:[],settingNames:{},logs:[],confirm:{title:null,message:null,button:null,ok:null,cancel:null},toast:{message:null,state:null}}},computed:{isConfirmVisible:function(){return null!=this.confirm.title},isToastVisible:function(){return null!=this.toast.message}},created:function(){this.init(),this.$bus.$on("refresh",this.loadSettings)},methods:{init:function(){this.loadJobRecords(),this.loadSettings()},loadJobRecords:function(){var e=this;this.records.length=0,(new a.a).setAction(E.processAJAXRequest).setErrorHandler(this.handleRemoteActionError.bind(this)).invoke([{ajaxResource:"MAArcGISAPI",action:"getBatchPushJobs"}],(function(t){t.success&&Object(r.b)(t.jobs,"sma__").forEach((function(t){var s=Object.assign({},t.record),o=new Date(s.NextFireTime)-(new Date).getTime();t.childRecords.length>0&&t.childRecords.forEach((function(e){var t=new Date(e.NextFireTime)-(new Date).getTime();t<o&&(o=t,s.NextFireTime=e.NextFireTime)})),e.records.push(s)}))}),{escape:!1,buffer:!1})},loadSettings:function(){var e=this;this.settingNames={},this.settings.length=0,(new a.a).setAction(E.processAJAXRequest).setErrorHandler(this.handleRemoteActionError.bind(this)).invoke([{ajaxResource:"MAArcGISAPI",action:"getBatchPushSettings"}],(function(t){if(t.success){var s=[];Object(r.b)(t.records,"sma__").forEach((function(t){e.$set(e.settingNames,t.Id,t.Name),s.push("".concat(t.Name,"\n").concat(t.Id))})),s.sort().forEach((function(t){var s=t.split("\n");e.settings.push({id:s[1],name:s[0]})}))}}),{escape:!1,buffer:!1})},createRecord:function(){this.records.length>=10?this.toast={message:this.Labels.ArcGIS_MaxBatchesReached.replace("#",10),state:"warning"}:(this.record=null,this.isEditorVisible=!0)},editRecord:function(e){this.record=e,this.isEditorVisible=!0},closeEditor:function(e){this.record=null,this.isEditorVisible=!1,e&&(e.saved&&this.loadJobRecords(),e.toast&&(this.toast=e.toast))},confirmDeleteRecord:function(e){var t=this;this.confirm={title:this.Labels.ArcGIS_DeleteBatchSetting,message:this.Labels.ArcGIS_DeleteBatchSettingConfirm,button:this.Labels.ArcGIS_Delete,ok:function(){t.confirm.title=null,t.deleteRecord(e)},cancel:function(){t.confirm.title=null}}},deleteRecord:function(e){var t=this;this.records.forEach((function(s,o){if(s.Id===e){var n={ajaxResource:"MAArcGISAPI",action:"deleteBatchPushJob",jobId:e};return(new a.a).setAction(E.processAJAXRequest).setErrorHandler(t.handleRemoteActionError.bind(t)).invoke([n],(function(e){e.success?t.records.splice(o,1):t.toast={message:t.Labels.ArcGIS_FailedToDeleteData,state:"error"}}),{escape:!1,buffer:!1}),!1}return!0}))},runJob:function(e){var t=this,s={ajaxResource:"MAArcGISAPI",action:"runBatchPush",settingId:e};(new a.a).setAction(E.processAJAXRequest).setErrorHandler(this.handleRemoteActionError.bind(this)).invoke([s],(function(e){e.success?t.toast={message:t.Labels.ArcGIS_BatchStarted,state:"success"}:t.toast={message:t.Labels.ArcGIS_FailedToRunBatch,state:"error"}}),{escape:!1,buffer:!1})},confirmDeleteLogs:function(){var e=this;this.confirm={title:this.Labels.ArcGIS_DeleteLogs,message:this.Labels.ArcGIS_DeleteLogsConfirm,button:this.Labels.ArcGIS_Delete,ok:function(){e.confirm.title=null,e.deleteLogs()},cancel:function(){e.confirm.title=null}}},deleteLogs:function(){var e=this;(new a.a).setAction(E.processAJAXRequest).setErrorHandler(this.handleRemoteActionError.bind(this)).invoke([{ajaxResource:"MAArcGISAPI",action:"deleteBatchPushLogs"}],(function(t){t.success||(e.toast={message:e.Labels.ArcGIS_FailedToDeleteLogs,state:"error"})}),{escape:!1,buffer:!1})},clearToast:function(){this.toast.message=null},handleRemoteActionError:function(e,t){console.log("TODO: handleRemoteActionError",t)}}},O=(s(474),Object(c.a)(G,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.isToastVisible?s("MAToast",{attrs:{msg:e.toast.message,state:e.toast.state},on:{close:e.clearToast}}):e._e(),e._v(" "),e.isEditorVisible?s("EditBatchSetting",{attrs:{settings:e.settings,recordToEdit:e.record},on:{"close-editor":e.closeEditor}}):e._e(),e._v(" "),s("div",{staticClass:"slds-col slds-scrollable"},[s("div",{staticClass:"slds-grid slds-grid_align-spread slds-m-bottom_medium"},[s("div",{staticClass:"slds-col"},[s("button",{staticClass:"slds-button slds-button_brand slds-grid_align-center",on:{click:e.createRecord}},[s("span",{staticClass:"slds-button__icon slds-button__icon_left ma-icon ma-icon-add"}),e._v(e._s(e.Labels.ArcGIS_AddNew)+"\n                ")])]),e._v(" "),s("div",{staticClass:"slds-col slds-button-group",attrs:{role:"group"}},[s("button",{staticClass:"slds-button slds-button_neutral",on:{click:e.init}},[s("span",{staticClass:"slds-button__icon slds-button__icon_left ma-icon ma-icon-refresh"}),e._v(e._s(e.Labels.ArcGIS_Refresh)+"\n                ")]),e._v(" "),s("button",{staticClass:"slds-button slds-button_neutral",on:{click:e.confirmDeleteLogs}},[e._v("\n                    "+e._s(e.Labels.ArcGIS_DeleteLogs)+"\n                ")])])]),e._v(" "),s("table",{staticClass:"slds-table slds-table_bordered slds-table_cell-buffer rounded-table slds-border_left slds-border_right"},[s("thead",[s("tr",{staticClass:"slds-text-title_caps"},[s("th",{attrs:{scope:"col"}},[s("div",{staticClass:"slds-truncate"},[e._v("\n                            "+e._s(e.Labels.ArcGIS_BatchName)+"\n                        ")])]),e._v(" "),s("th",{attrs:{scope:"col"}},[s("div",{staticClass:"slds-truncate"},[e._v("\n                            "+e._s(e.Labels.ArcGIS_ArcGISObject)+"\n                        ")])]),e._v(" "),s("th",{attrs:{scope:"col"}},[s("div",{staticClass:"slds-truncate"},[e._v("\n                            "+e._s(e.Labels.ArcGIS_Status)+"\n                        ")])]),e._v(" "),s("th",{attrs:{scope:"col"}},[s("div",{staticClass:"slds-truncate"},[e._v("\n                            "+e._s(e.Labels.ArcGIS_NextScheduledRun)+"\n                        ")])]),e._v(" "),s("th",{attrs:{scope:"col"}},[s("div",{staticClass:"slds-truncate"},[e._v("\n                            "+e._s(e.Labels.ArcGIS_CreatedBy)+"\n                        ")])]),e._v(" "),e._m(0)])]),e._v(" "),s("tbody",e._l(e.records,(function(t,o){return s("BatchSetting",{key:o,attrs:{record:t,settingNames:e.settingNames},on:{"run-job":e.runJob,"edit-record":e.editRecord,"delete-record":e.confirmDeleteRecord}})})),1)])]),e._v(" "),e.isConfirmVisible?s("MAModal",{attrs:{title:e.confirm.title},on:{close:e.confirm.cancel}},[s("div",{attrs:{slot:"content"},slot:"content"},[s("div",{staticClass:"slds-grid slds-gutters slds-p-around_medium"},[e._v("\n                "+e._s(e.confirm.message)+"\n            ")])]),e._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("button",{staticClass:"slds-button slds-button_neutral",on:{click:e.confirm.cancel}},[e._v("\n                "+e._s(e.Labels.ArcGIS_Cancel)+"\n            ")]),e._v(" "),s("button",{staticClass:"slds-button slds-button_brand",on:{click:e.confirm.ok}},[e._v("\n                "+e._s(e.confirm.button)+"\n            ")])])]):e._e()],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("th",{attrs:{scope:"col"}},[t("div",{staticClass:"slds-truncate"})])}],!1,null,"2c4e3f51",null).exports),j=window.MASystem,F={components:{MATabs:n.a,MATab:i.a,ArcGISObjects:y,BatchSettings:O},data:function(){return{Labels:j.Labels}},methods:{getTabId:function(){return Object(o.d)()},refresh:function(){this.$bus.$emit("refresh")},handleRemoteActionError:function(e,t){console.log("TODO: handleRemoteActionError",t)}}},$=Object(c.a)(F,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("MATabs",{staticClass:"slds-m-bottom_medium"},[t("MATab",{staticClass:"slds-m-around_medium",attrs:{id:this.getTabId(),title:this.Labels.ArcGIS_ArcGISObject}},[t("ArcGISObjects",{on:{refresh:this.refresh}})],1),this._v(" "),t("MATab",{staticClass:"slds-m-around_medium",attrs:{id:this.getTabId(),title:this.Labels.MA_Batch_Settings}},[t("BatchSettings")],1)],1)],1)}),[],!1,null,null,null);t.default=$.exports}}]);