(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{421:function(t,e,r){var n=r(574);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals),(0,r(32).default)("35bc48f7",n,!0,{})},422:function(t,e,r){var n=r(576);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals),(0,r(32).default)("7a27ffb2",n,!0,{})},573:function(t,e,r){"use strict";r(421)},574:function(t,e,r){(t.exports=r(31)(!1)).push([t.i,"button.ma-new-custom-event.slds-button_neutral{margin:0 auto}button.ma-new-custom-event.slds-button_neutral .ma-icon{margin-top:8px}.custom-event-button-positioner{padding:12px}.custom-event-button-positioner .slds-button{width:100%}table.custom-events-mapping-table{width:auto}table.custom-events-mapping-table thead tr th{padding:0 12px 4px;font-size:0.75rem;line-height:1.25;color:#706e6b;text-transform:uppercase;letter-spacing:0.0625rem;font-weight:normal}table.custom-events-mapping-table thead tr th:first-child{padding-left:0}table.custom-events-mapping-table thead tr th:last-child{padding-right:0}table.custom-events-mapping-table thead tr th.events-enabled-column{width:70px}table.custom-events-mapping-table thead tr th.events-form-input-column{width:250px}table.custom-events-mapping-table thead tr th.events-primary-column{width:82px}table.custom-events-mapping-table tbody tr td{padding:4px 12px}table.custom-events-mapping-table tbody tr td:first-child{padding-left:0}table.custom-events-mapping-table tbody tr td:last-child{padding-right:0}table.custom-events-mapping-table tbody tr td.events-enabled-column{width:70px}table.custom-events-mapping-table tbody tr td.events-form-input-column{width:250px}table.custom-events-mapping-table tbody tr td.events-primary-column{width:82px}\n",""])},575:function(t,e,r){"use strict";r(422)},576:function(t,e,r){(t.exports=r(31)(!1)).push([t.i,".events-tab-content[data-v-37b9bfdc] .slds-notify_container{position:absolute}.events-tab-content[data-v-37b9bfdc] .slds-vertical-tabs__nav{overflow-y:auto;overflow-x:hidden}\n",""])},621:function(t,e,r){"use strict";r.r(e),r(33),r(97),r(171);var n=r(61),s=r(168),o=(r(164),r(62));function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,r){r&&a(t,r)}(t,0,[{key:"handleRemoteActionError",value:function(t){Error("Remote action exception: ".concat(t))}},{key:"getTerritoryAuthorization",value:function(){var t=this;return new Promise((function(e,r){(new o.a).setAction("sma.MATerritoryRemoteFunctions.getTerritoryAuthorizationInfo").setErrorHandler(t.handleRemoteActionError.bind(t,r)).invoke([],(function(t){t?e(t):r(new Error({status:"error",message:"error loading settings"}))}),{buffer:!1})}))}},{key:"revokeTerritoryAuthorization",value:function(){var t=this;return new Promise((function(e,r){(new o.a).setAction("sma.MATerritoryRemoteFunctions.revokeTerritoryAuthorization").setErrorHandler(t.handleRemoteActionError.bind(t,r)).invoke([],(function(t){t?e(t):r(new Error({status:"error",message:"error loading settings"}))}),{buffer:!1})}))}}]),t}(),u=r(64),l=r(607),d=window.MAToastMessages,c={components:{MASpinner:u.a,MASetupAssistantItem:l.a},data:function(){return{authUrl:"",authExists:!1,authorizedTerritoryUser:"",isLoading:!1}},computed:{isAuthorized:{get:function(){return this.authExists},set:function(t){this.authExists=t,this.authExists||(this.authorizedTerritoryUser="")}}},created:function(){this.loadAuthorizationInformation()},methods:{authorize:function(){var t=this;window.open(this.authUrl),this.isLoading=!0,setTimeout((function(){t.loadAuthorizationInformation()}),5e3)},deauthorize:function(){var t=this;this.isLoading=!0,i.revokeTerritoryAuthorization().then((function(e){e.success?(d.showSuccess({message:"Deauthorization Successful."}),t.loadAuthorizationInformation()):d.showError({message:t.$Labels.MA_Error,subMessage:"Unauthorization request failed.",timeOut:0,extendedTimeOut:0,closeButton:!0})})).finally((function(){t.isLoading=!1}))},loadAuthorizationInformation:function(){var t=this;this.isLoading=!0,i.getTerritoryAuthorization().then((function(e){t.isAuthorized=e.authExists,t.authUrl=e.authUrl,t.isAuthorized&&(t.authorizedTerritoryUser=e.data.user.username),t.isLoading=!1}))}}},h=r(9);function m(t,e,r,n,s,o,a){try{var i=t[o](a),u=i.value}catch(t){return void r(t)}i.done?e(u):Promise.resolve(u).then(n,s)}var v={components:{TerritoryAuth:Object(h.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.isLoading?r("MASpinner"):t._e(),t._v(" "),r("div",{staticClass:"slds-section slds-is-open"},[r("div",{staticClass:"slds-section__content"},[r("ol",{staticClass:"slds-setup-assistant"},[r("MASetupAssistantItem",{attrs:{stepProgress:!1}},[r("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n                        Territory IO Authorization\n                    ")]),t._v(" "),r("div",{attrs:{slot:"description"},slot:"description"},[t._v("\n                        Authorize to enable MapAnything's Territory Management. This allows MapAnything access to the necessary data needed for territory aggregation.\n                    ")]),t._v(" "),r("div",{attrs:{slot:"additional-content"},slot:"additional-content"},[t.isAuthorized?r("div",{staticClass:"slds-grid slds-grid_vertical-align-end slds-grid_vertical",attrs:{id:"currentAuthInfo"}},[r("div",[r("button",{staticClass:"slds-button slds-button_text-destructive",attrs:{id:"deauthorizeTerritoryUser"},on:{click:t.deauthorize}},[t._v("\n                                    Deauthorize\n                                ")])]),t._v(" "),r("div",{staticClass:"slds-text-align_right slds-text-color_weak slds-p-top_medium"},[r("div",[t._v("\n                                    Current Authorization User\n                                ")]),t._v(" "),r("div",{staticClass:"slds-m-bottom_small",attrs:{id:"currentAuthName"}},[t._v("\n                                    "+t._s(t.authorizedTerritoryUser)+"\n                                ")])])]):r("div",[r("div",{attrs:{id:"authorizeTerritory"}},[r("button",{staticClass:"slds-button slds-button_neutral",attrs:{id:"authorizeTerritoryIO"},on:{click:t.authorize}},[t._v("\n                                    Authorize\n                                ")])])])])])],1)])])],1)}),[],!1,null,null,null).exports},data:function(){return{isLoading:!1,territoryLayers:[],count:0}},mounted:function(){this.getTerritoryInfo()},methods:{getTerritoryInfo:function(){var t=this;return function(t){return function(){var e=this,r=arguments;return new Promise((function(n,s){var o=t.apply(e,r);function a(t){m(o,n,s,a,i,"next",t)}function i(t){m(o,n,s,a,i,"throw",t)}a(void 0)}))}}(regeneratorRuntime.mark((function e(){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(n.c)("sma.MATerritoryRemoteFunctions.getLayerCount",[]);case 2:(r=e.sent).success&&(Object(s.b)(r.territoryLayers,"sma__"),o=t.cleanResponse(r.territoryLayers),t.territoryLayers=o,t.count=r.layerCount);case 4:case"end":return e.stop()}}),e)})))()},cleanResponse:function(t){var e=this,r=[];return t.forEach((function(t){var n={Name:t.Name,CreatedBy:t.CreatedBy.Name,Folder:e.getFolderName(t)};r.push(n)})),r},getFolderName:function(t){return t.Folder__r?t.Folder__r.Name:t.User__r?"".concat(t.User__r.Name,"'s Personal Folder"):"Corporate Folder"}}},p=(r(573),r(575),Object(h.a)(v,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("TerritoryAuth"),t._v(" "),r("div",{staticClass:"slds-m-bottom_small"},[t._v("\n        Total Number of Territory layers: "+t._s(t.count)+"\n    ")]),t._v(" "),r("table",{staticClass:"slds-table slds-table_cell-buffer slds-table_bordered"},[t._m(0),t._v(" "),r("tbody",t._l(t.territoryLayers,(function(e){return r("tr",{key:e.Id,staticClass:"slds-hint-parent"},[r("th",{attrs:{"data-label":"Opportunity Name",scope:"row"}},[r("div",{staticClass:"slds-truncate",attrs:{title:e.Name}},[t._v("\n                        "+t._s(e.Name)+"\n                    ")])]),t._v(" "),r("td",{attrs:{"data-label":"Account Name"}},[r("div",{staticClass:"slds-truncate",attrs:{title:e.CreatedBy}},[t._v("\n                        "+t._s(e.CreatedBy)+"\n                    ")])]),t._v(" "),r("td",{attrs:{"data-label":"Close Date"}},[r("div",{staticClass:"slds-truncate",attrs:{title:e.Folder}},[t._v("\n                        "+t._s(e.Folder)+"\n                    ")])])])})),0)])],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",{staticClass:"slds-line-height_reset"},[e("th",{attrs:{scope:"col"}},[e("div",{staticClass:"slds-truncate",attrs:{title:"Opportunity Name"}},[this._v("\n                        Territory Name\n                    ")])]),this._v(" "),e("th",{attrs:{scope:"col"}},[e("div",{staticClass:"slds-truncate",attrs:{title:"Account Name"}},[this._v("\n                        Created By\n                    ")])]),this._v(" "),e("th",{attrs:{scope:"col"}},[e("div",{staticClass:"slds-truncate",attrs:{title:"Close Date"}},[this._v("\n                        Folder\n                    ")])])])])}],!1,null,"37b9bfdc",null));e.default=p.exports}}]);