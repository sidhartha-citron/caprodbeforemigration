!function(){window;window._walkmeWebpackJP&&(window._walkmeWebpackJP=window._walkmeWebpackJP||[]).push([[22],{1158:function(t,e,r){var n=_walkmeInternals.ctx,a=n.get("PlatformDI"),i=n.get("Consts");n.register("TutorialsManager").asCtor(r(1289).TutorialsManager).dependencies("Lib, Consts, PermalinkManager"),n.register("WalkthrusModule").asCtor(r(1290)).dependencies("Lib, DataFixer, SiteConfigManager, WalkthrusContainer, SettingsValuesRetriever, Logger, Consts, ArrayUtils, CommonEvents, CommonUtils, WalkthruRedirectService, TimerManager, PositionHelper, BalloonsContainer, CurrentWalkthruData, WalkthruStatePersister, PlayGuidGenerator, AuditSourceManager, UiUtils, FramesetsUtils, StepRetriever, FeaturesManager, InputGenerator, StepUtils, ComplexHtmlElementsProvider, LibDestroyer,BalloonDrawerProvider, LocationMatcher, DefaultPlaceHolderConfigsCreator, WalkthruSafeStartHandler"),n.register("StepRetriever").asCtor(r(1291)).dependencies("WalkthrusContainer"),n.register("WalkthruOnBeforeUnloadHandler").asCtor(r(1292)).dependencies("Logger, WalkthrusModule, TimerManager, CrossDomainManager, FeaturesManager, FlowStack, WindowBeforeUnloadHandler"),n.register("WalkthrusContainer").asCtor(r(1293)),n.register("CurrentWalkthruData").asCtor(r(1294)).dependencies("WalkthrusContainer, Consts"),n.register("CurrentStepUI").asCtor(r(1295)).dependencies("CurrentWalkthruData, StepUtils"),n.register("WalkthruStatePersister").asCtor(r(1296)).dependencies("Consts, InteractionManager, WalkthrusContainer, CommonUtils, CurrentWalkthruData, WalkthruBranchData, CommonEvents"),n.register("WalkthruStateRestorer").asCtor(r(1297)).dependencies("WalkthruStepsLoader, WalkthrusContainer, CurrentWalkthruData, InteractionManager, TimerManager, WalkthrusModule, Logger, SettingsValuesRetriever, CommonEvents, WalkthruStatePersister, WalkthruBranchPlayer, Consts, WalkthruBranchData, LibDestroyer, UserGuidContainer"),n.register("WalkthruStepsLoader").asCtor(r(1298)).dependencies("DataFixer, CommonUtils, StepUtils,SiteConfigManager, WalkthrusContainer"),n.register("WalkthruBranchPlayer").asCtor(r(1299)).dependencies("Logger, StepRetriever, WalkthrusModule, WalkthrusContainer, Lib, TimerManager, CommonEvents, Consts, CurrentWalkthruData, WalkthruStatePersister, ArrayUtils, WalkthruBranchData, CommonUtils"),n.register("WalkthruApi").asCtor(r(1300)).dependencies("WalkthrusContainer, SiteConfigManager, Consts, WalkMeVisibilityChecker, CommonEvents,SettingsValuesRetriever, LabelsContainer, Logger").asSingleton(),n.register("WalkthruLegacyExternalApi").asCtor(r(1301)).dependencies("WalkthrusModule, CurrentWalkthruData, WalkthrusContainer, WalkthruBranchPlayer, Logger"),n.register("WalkthruBranchData").asCtor(r(1302)),n.register("WalkthruBalloonButtonsEventsBinder").asCtor(r(1303)).dependencies("CurrentWalkthruData, Consts, WalkthrusModule, CommonEvents, WalkthruBranchPlayer, BalloonsContainer, LibDestroyer, FeaturesManager, BalloonButtonsEventsBinder"),n.register("WalkthruBalloonNotifier").asCtor(r(1304)).dependencies("BalloonUtils, Consts, UiUtils, TimerManager, Lib, CdnServer, BalloonButtonsEventsBinder,TopContainerProvider, CurrentStepUI, HostData, FramesetsUtils"),n.register("WalkthruPopupNotificationsService").asCtor(r(1305)).dependencies("PopupNotificationsService, WalkthruBalloonNotifier"),n.register("StepUtils").asCtor(r(1306)).dependencies("Consts"),n.register("WalkthruSurveyActivator").asCtor(r(1307)).dependencies("DeployableSurveyActivator, AuditStepsManager, StorageKeysConfigurations"),n.register("WalkthruSafeStartHandler").asCtor(r(1308)).dependencies("Consts, AuditStepsManager, WalkthruRedirectService, CurrentWalkthruData, WalkthruStatePersister, AuditSafeStartManager"),n.register("WalkthrusSiteConfigDataMigrator").asCtor(r(1309)).dependencies("WalkthrusContainer, WalkthrusModule, DataFixer"),n.register("DataFileWalkthruDataAppender").asCtor(r(1310)).dependencies("WalkthrusContainer, WalkthrusSiteConfigDataMigrator, DeployableTypes, DataFileDataLoader, LibInitializer, TutorialsManager"),n.register("EndUserWalkthruDataConverter").asCtor(r(1311)).dependencies("Consts, StepUtils, DeployablesManagerFactory, CommonUtils, ClientOrServerStorageManager, EndUserDataConverter"),n.register("WalkthrusDestroyer").asCtor(r(1312)).dependencies("WalkthrusModule, TriggersManager, WalkthruBalloonNotifier, WmInternals, Consts, AuditSourceProvider"),n.register("WalkthruJawsAccessibilityUtil").asCtor(r(1313)).dependencies("StepUtils, JawsAccessibilityUtil"),n.register("WalkthruEventDataAppender").asCtor(r(1314)).dependencies("CurrentWalkthruData"),n.register("WalkthruEventsInitializer").asCtor(r(1315)).dependencies("ApiEventRaisersContainer, WalkthruEventDataAppender"),n.register("WalkthruStartFailureHandler").asCtor(r(1316)).dependencies("CommonEvents, AuditSourceProvider, SettingsValuesRetriever, WalkthrusModule"),n.register("WalkthruActionsFactory").asCtor(r(1317)).dependencies("ActionsFactory, Lib, ClientOrServerStorageManager, Consts, ClientStorageManager, CommonEvents, WalkthruRedirectService, StepRetriever, WalkthrusContainer, CurrentWalkthruData, WalkthruStatePersister, WalkthrusModule, WalkthruBranchPlayer, DebuggerManager, TimerManager, Logger, ConditionCheckerFactory, CrossDomainManager, WalkthruStepsLoader, CommonUtils, JsonUtils"),n.register("WalkthruRedirectService").asCtor(r(1318)).dependencies("RedirectService, TimerManager, WalkthruStatePersister"),n.register("TriggersManager").asCtor(r(1319)).dependencies("TimerManager,FramesetsUtils,StepUtils,Logger,FeaturesManager,SiteConfigManager,ConditionTreeTraverser,CommonEvents,Consts,ClickTriggersListCreator,WalkthrusModule,CurrentWalkthruData,WalkthruStatePersister,WalkthruBranchPlayer,LibDestroyer,EventBinder,HostData,ConditionCheckerFactory, SettingsValuesRetriever, WalkthruOnBeforeUnloadHandler, BackButtonUtils"),n.register("BackButtonUtils").asCtor(r(1320)).dependencies("WalkthrusModule, Consts, CurrentWalkthruData, StepUtils"),n.register("PlayManager").asCtor(r(1321)).dependencies("FeaturesManager, Consts, WalkthrusModule, WalkthrusContainer, Logger"),n.register("BBCodeWalkthruActivator").asCtor(r(1322)).dependencies("InitiatorTypeToAppTypeMapper, CommonEvents, WalkthruStepsLoader, BBCodeDeployables, Consts"),n.register("BBCodeWalkthruSurveyActivator").asCtor(r(1323)).dependencies("CurrentWalkthruData, BBCodeDeployables, RunningDeployablesStopper, InitiatorTypeToAppTypeMapper,Consts"),n.register("WalkthruPopupStepElementFinderExtension").asCtor(r(1324)).dependencies("StepUtils, PopupStepElementProvider"),n.register("WalkthruActionStepElementFinderExtension").asCtor(r(1325)).dependencies("StepUtils, PopupStepElementProvider"),n.register("WalkthrusModuleInitializer").asCtor(r(1326)).dependencies("Lib, WalkthruOnBeforeUnloadHandler, DataFileWalkthruDataAppender, EndUserWalkthruDataConverter,AnchorTagsFixer, BBCodeWalkthruActivator, WalkthrusModule, RunningDeployablesStopper,BBCodeWalkthruSurveyActivator, WalkthrusDestroyer, DeployableTypes,WalkthruRunningState, WalkthruActionsFactory, WalkthruJawsAccessibilityUtil, WalkthruStateRestorer,DeployablesRestorer, WalkthruPopupStepElementFinderExtension, WalkthruActionStepElementFinderExtension,ElementFinderExtensionsProvider, WalkthruConditionFunctions, WalkthruConditionEvaluator,OwnershipManagerProvider, Consts, WalkthruOwnershipManager,WmInternals, WalkthruAutoStartHelper"),n.register("WalkthruOwnershipManager").asCtor(r(1327)).dependencies("CrossDomainManager, Consts, WalkthrusModule, WalkthruPassOwnershipDeterminator, WalkthrusContainer,CurrentWalkthruData, WalkthruStatePersister, StepRetriever, WalkMeInfo, WalkthruStateRestorer, Logger, PassOwnershipNextStepProvider, FeaturesManager, TimerManager, PreExecutionPassOwnershipWrapper, ClientStorageManager"),n.register("PassOwnershipNextStepProvider").asCtor(r(1328)).dependencies("ClientStorageManager, Consts, WalkthrusContainer, UserGuidContainer"),n.register("WalkthruPassOwnershipDeterminator").asCtor(r(1329)).dependencies("Consts"),a.register([i.PLATFORM.Web,i.PLATFORM.MobileWeb,i.PLATFORM.Desktop],function(){n.register("WalkthruAutoStartHelper").asCtor(r(1330)).dependencies("DeployableTypes, WalkthrusContainer, WalkthrusModule, WalkthruPersistenceDataRetriever, Consts")}),n.register("WalkthruPersistenceDataRetriever").asCtor(r(1331)).dependencies("WalkthruStatePersister, Consts, CurrentWalkthruData"),n.register("WalkthruRunningState").asCtor(r(1332)).dependencies("WalkthruPersistenceDataRetriever, WalkthrusModule, Consts"),n.register("AnchorTagsFixer").asCtor(r(1333)).dependencies("HostData, WalkthruOnBeforeUnloadHandler"),n.register("WalkthruConditionEvaluator").asCtor(r(1334)).dependencies("CurrentWalkthruData, StepRetriever, ConditionEvaluator"),n.register("WalkthruConditionFunctions").asCtor(r(1335)).dependencies("Lib, ExternalConditionsHandlers, WalkthrusContainer, StepRetriever, WalkthrusModule, CurrentWalkthruData, Consts"),n.register("AuditWtsManager").asCtor(r(1336)).dependencies("DeployableTypes, EventSender, ReportInitiatorMapper"),n.register("AuditStepsManager").asCtor(r(1337)).dependencies("Logger,Consts,CommonUtils,EventSender, AuditSafeStartManager, StepActionToEventSenderStepActionNameMapper, SettingsValuesRetriever, StepActionToEventSenderActionAppTypeMapper, CommonEvents, PlayGuidGenerator"),n.register("WalkthruActionClickedEventBinder").asCtor(r(1338)).dependencies("ActionClickedEventBinder, Consts, SharedConsts, AuditStepsManager"),n.register("WalkthruStepShowerButtonsCalculator").asCtor(r(1339)).dependencies("ArrayUtils, SharedConsts"),n.register("WalkthruStepShower").asCtor(r(1340)).dependencies("Logger, Lib, JsonUtils, DataFixer, ComplexHtmlElementsProvider, PositionHelper,BalloonDrawerProvider, SiteConfigManager, BalloonsContainer, WalkthruStepShowerButtonsCalculator, DefaultPlaceHolderConfigsCreator, SharedConsts"),t.exports={init:function(){var t=n.get("IsInEditor"),e=n.get("AuditSourceProvider");n.get("WalkthrusModuleInitializer")[t.get()&&!e.isInPreviewMode()?"postDataFileLoaded":"init"]()}}},1289:function(t,e,r){"use strict";r.r(e),r.d(e,"TutorialsManager",function(){return o});var a,n=r(0),i=r(29),o=(a=i.DeployablesManager,Object(n.__extends)(s,a),s.prototype.activateById=function(t,e){WalkMeAPI.startWalkthruById({id:t,fromStep:0,playInitiator:e})},s.prototype.autoStartEnabled=function(){return!this.permalinkManager.isTrainingInStartingMode()},s);function s(t,e,r){var n=a.call(this,{deployables:[],lib:t,type:e.DEPLOYABLE_TYPE.Tutorial})||this;return n.permalinkManager=r,n._name="Walkthru",n}},1290:function(t,e,r){(function(ft){t.exports=function(R,r,w,L,O,U,M,n,b,D,o,B,H,F,G,K,u,g,T,t,V,Y,j,Q,X,z,J,s,q,h){var Z=this;Z.setTutorials=function(t){a={};for(var e=0;e<t.length;e++)t[e].Steps&&r.fixSteps(t[e],w.get());L.setWalkthrus(t)},Z.isTutorialPackageHidden=function(t){var e=$.tutorialRunSettingsMap[t.TutorialId];return!!e&&e.isPackageHidden},Z.canShowTutorial=function(t){if(0==t.IsVisible)return!1;for(var e=p(t,l.URL),r=!1,n=0;n<e.length;n++)if(c(t,e[n])){r=!0;break}if(0<e.length&&!r)return!1;if(1==O.getSettingsValue(t.Settings,"DOCTEnabled",0)){var a=O.getSettingsValue(t.Settings,"DOCT","");if(""!=a)try{var i=_walkmeInternals.ctx.get("ConditionCheckerFactory").createOld({trackUIChange:!0,featureName:"Walk-Thru Segmenation",elementName:t.Name}).getCurrentEvaluationValueAndStopEvaluating(a);if(b.deprecatedRaiseEvent(M.EVENTS.Walkthrus.WtConditionEvaluated,t),!i)return b.deprecatedRaiseEvent(M.EVENTS.Walkthrus.CannotShowWt,t),!1}catch(t){}}if(function(t){return 0<p(t,l.FIRST_STEP_MUST_EXIST).length}(t)){if(0==t.Steps.length)return!1;var o=t.Steps[0];return U.customerLog('First Step Condition for "'+(o.StepTitle||o.StepText)+', Walk-Thru "'+t.Name+'"'),R.findElement(o)}return b.deprecatedRaiseEvent(M.EVENTS.Walkthrus.CanShowWt,t),!0},Z.stopTutorial=function(t,e,r){b.deprecatedRaiseEvent(M.EVENTS.Walkthrus.WalkthruStopped,G.getCurrentStep()),S(),r||z.releaseBalloons();G.state=M.WALKTHRU_STATE.NOT_RUNNING,T.removeOverlay();var n=G.currentStep;G.currentStep=-1,t||K.storeStateInCookie();_walkmeInternals.ctx.get("CrossDomainManager")&&_walkmeInternals.ctx.get("CrossDomainManager").get().enabled()&&_walkmeInternals.ctx.get("CrossDomainManager").get().reset();if(!e){A(G.getCurrentWalkthru(),n,M.SURVEY_START_EVENTS.WalkThruExited)}},Z.startNewTutorial=function(l,p,c,d){var S=L.getWalkthruByIndex(l);return _walkmeInternals.ctx.get("WalkthruStepsLoader").afterStepsLoaded(S&&S.TutorialId,function(){return function(){try{U.customerLog("startNewTutorial : Index = "+l+". From Step = "+p+" testMode: "+c),T.fixFlash(),f(l);var t=!1;if(_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator=d,p=D.defaultValue(p,0),c=D.defaultValue(c,!1),_walkmeInternals.ctx.get("FlowsPlayer").abort(),!c){if(G.state!=M.WALKTHRU_STATE.WAITING_FOR_OWNERSHIP&&!_walkmeInternals.ctx.get("WalkthruOwnershipManager").walkthruStarted(l,p))return!0;v(!0,!0),_walkmeInternals.ctx.get("CrossDomainManager").get().enabled()||W(),_walkmeInternals.ctx.get("WalkthruBalloonNotifier").closePopup()}b.deprecatedRaiseEvent(M.EVENTS.Walkthrus.WalkthruStarted,S);var e=[],r=p,n=0==(p=_walkmeInternals.ctx.get("PlayManager").findFirstStep(l,p,e));if(0<p&&!c){var a=g.get();a==M.SOURCES.play||a==M.SOURCES.preview?E(l,r,p,M.STEP_STATUS.SkippedStartedFromBiggerStep):(t=!0,N(l,0,p,M.STEP_STATUS.SkippedStartedFromBiggerStep))}else 0==p&&0<(p=I(l))&&!c&&(t=!0,N(l,0,p,M.STEP_STATUS.SkippedByTutorialCondition));if(!k(l,!1)&&p<0){if(c)return!1;_walkmeInternals.ctx.get("AuditStepsManager").createPlayGuidIfNeeded(S.TutorialId);var i={tutorialIndex:l,wt:S,checkStepExistsTrace:e};if(!_walkmeInternals.ctx.get("DeployableSafeStartExecuter").handleSafeStart(h,S,i)){for(var o=0;o<e.length;o++)_walkmeInternals.ctx.get("AuditStepsManager").auditStep(S,S.Steps[e[o].stepIndex],e[o].stepStatus),E(l,e[o].stepIndex,e[o].stepIndex+1,e[o].stepStatus);var s=e[e.length-1].stepIndex,u=S;_walkmeInternals.ctx.get("WalkthruStartFailureHandler").handle(u,s),v()}}else{if(c)return!0;_(l,p,n,t?_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID:void 0,d,r)}}catch(t){return U.error(t),!1}return b.deprecatedRaiseEvent("WtHasGuid",S,{playGuid:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),b.raiseEvent(M.EVENTS.Walkthrus.WalkthruGuidGenerated,{playGuid:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),!0}()})},Z.tutorialFinished=x,Z.executeTutorialNextStep=it,Z.postWelcomeStep=gt,Z.executeCurrentStep=ht,Z.executePreviousStep=function(){G.state=M.WALKTHRU_STATE.RUNNING,z.releaseBalloons(function(){Z.stepWasCompleted(!1),G.currentStep=G.lastBackButtonStepIndex-1,Z.executeTutorialNextStep()})},Z.getAction=nt,Z.getSiteConfigByTutorialId=function(t){var e;e=$.tutorialRunSettingsMap[t]?$.tutorialRunSettingsMap[t].siteConfig:w.get();return e},Z.isTutorialIdsExist=function(t){var e=n.map(t,L.getWalkthruIndexByWalkthruId),r=n.inArray(-1,e);return null==r||-1==r},Z.isStepTrigger=at,Z.terminateTutorial=function(){G.stepPlayStack=[],z.releaseBalloons(),S(),b.raiseEvent("WalkthruAborted")},Z.checkTutorialSkipFirstStepCondition=I,Z.fillMissingStepAudits=N,Z.getNextStepIncludingSplit=st,Z.releaseEvents=lt,Z.stepWasCompleted=ct,Z.getPlayConditionMode=St,Z.checkPlayStepCondition=function(t){var e=O.getSettingsValue(t.Settings,"skipStepCond","");if(0<e.length)try{return!_walkmeInternals.ctx.get("ConditionEvaluator").evaluate(e)}catch(t){return!0}{if(1!=O.getSettingsValue(t.Settings,"PSCTEnabled",0))return!Q.isActionStep(t)||"never"!=O.getSettingsValue(t.Settings,"whenToFire","");var r=O.getSettingsValue(t.Settings,"PSCT","");if(""==r)return!0;try{var n=_walkmeInternals.ctx.get("ConditionTreeEvaluator").evaluate(r);return b.deprecatedRaiseEvent(M.EVENTS.Walkthrus.StepHasPlayCondition,t,{playGUID:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),n}catch(t){return!1}}},Z.executeTutorialStep=ut,Z.checkIfStepExistsWithSkippables=Tt,Z.isStepPlayable=function(t,e){return Tt(t,e,void 0,void 0,void 0,M.CHECK_STEP_MODE.Normal)==e},Z.checkTutorialRedirectCondition=k,Z.loadTutorial=_,Z.releaseBalloonsTimeouts=S,Z.resetState=v,Z.cleanCurrentStepResources=function(){if(!i)return;for(var t=i.length-1;0<=t;t--)i[t].cleanResources();i=[]},Z.addCurrentStepResource=function(t){i.push(t)},Z.setMember=tt,Z.removeCrossUsersState=W,Z.getMatchedSurvey=P,Z.getWalkthruSurveyFrequency=y;var $={tutorialRunSettingsMap:{},dontContinueTutorial:!1,executeTutorialNextStepNotFinished:!1},l={URL:0,FIRST_STEP_MUST_EXIST:1,AUTO_START:2,REDIRECT:3,SKIP_FIRST_STEP:4},e="PSCTMode";function tt(t,e){$[t]=e}var m="stepCheck",a={},C=[],et=!1,rt=0,i=[];function nt(t){if(null!=a[t.Id])return a[t.Id];var e=O.getSettingsValue(t.Settings,"action",null);return e?(a[t.Id]=_walkmeInternals.ctx.get("ActionsFactory").get(e.actionType,e.arguments,M.STEP_PLAY_INITIATOR_ENUM.STEP,t),a[t.Id]):(U.customerLog("No action core. aborting..."),null)}function f(t){var e=L.getWalkthruByIndex(t);if($.tutorialRunSettingsMap[e.TutorialId]){var r=$.tutorialRunSettingsMap[e.TutorialId].siteConfig;r&&w.set(r)}}function at(t,e){if("number"==typeof t)return t==e;for(var r=t.split(","),n=0;n<r.length;n++)if(e+""==r[n])return!0;return!1}function E(t,e,r,n){for(var a=e;a<r;a++)if(n!=M.STEP_STATUS.SkippedByActionStep){var i=L.getWalkthruByIndex(t);b.deprecatedRaiseEvent(M.EVENTS.Walkthrus.NewSkippedStep,i.Steps[a])}}function p(t,e){var r=Array();if(!t.Conditions)return r;for(var n=0;n<t.Conditions.length;n++)t.Conditions[n].Type==e&&(null!=t.Conditions[n].IsEnabled&&1!=t.Conditions[n].IsEnabled||r.push(t.Conditions[n]));return r}function c(t,e){switch(e.Type){case l.URL:return!!s.isLocationMatchString(e.Content);default:U.error(new Error("Invalid condition type: "+e.Type))}}function I(t){for(var e=p(L.getWalkthruByIndex(t),l.SKIP_FIRST_STEP),r=0;r<e.length;r++){var n=e[r];if(s.isLocationMatchString(n.Content)){var a=n.ExtraData,i=a?a-1:1;return U.customerLog("The walk-thru has a skip step condition ("+n.Content+") which is true. Skipping to: "+i),i}}return 0}function k(t,e){var r,n,a,i=p(L.getWalkthruByIndex(t),l.REDIRECT);return 0!=i.length&&(r=i[0],n=e,a=r.Content,n?o.redirect(a):o.canRedirect(a))}function _(t,e,r,n,a,i){try{_walkmeInternals.ctx.get("WalkmeVisibleReporter").report(),G.stepAppearanceIndex=0;var o=L.getWalkthruByIndex(t);b.deprecatedRaiseEvent(M.EVENTS.Walkthrus.WalkthruLoaded,o),f(t),_walkmeInternals.ctx.get("ContentsManager").removeContent(),n=D.defaultValue(n,u.generateNewPlayGuid(o.TutorialId)),r=D.defaultValue(r,!0),e=D.defaultValue(e,0);var s=null==i?e:i;0===e&&(e=I(t)),d(t,e,n,a,[],[],[]);try{a=a||{type:M.STEP_PLAY_INITIATOR_ENUM.NONE},_walkmeInternals.ctx.get("AuditWtsManager").auditWalkthruStart(o,a,s,e,n)}catch(t){U.error(t)}g.get()!=M.SOURCES.play&&_walkmeInternals.ctx.get("WalkMeGoalsManager").startWatchingDeployable(o,n),gt(t)}catch(t){U.error(t)}}function d(t,e,r,n,a,i,o){S(),z.releaseBalloons(),G.state=M.WALKTHRU_STATE.RUNNING,G.currentWalkthru=t,G.currentStep=e-1,G.stepPlayHistory=a,G.stepPlayStack=i,G.stepCompletedHistory=o,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID=r,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator=n,K.storeStateInCookie()}function S(){B.stopTimeoutsArray("playTimeouts"),$.executeTutorialNextStepNotFinished=!1}function A(t,e,r){if(t&&t.Settings.survey){var n=t.Settings.survey.surveyId,a=y(t.Settings.survey,r);if(a){var i={objectId:t.Id,type:M.STEP_PLAY_INITIATOR_ENUM.WALKTHRU};_walkmeInternals.ctx.get("WalkthruSurveyActivator").activateSurvey(t,r,i,n,a,void 0,e)}}}function v(t,e){G.currentWalkthru=-1,G.state=M.WALKTHRU_STATE.NOT_RUNNING,G.currentStep=-1,G.splitPointStack=[],G.stepPlayHistory=[],G.stepPlayStack=[],G.stepCompletedHistory=[],G.lastBackButtonStepIndex=-1,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID="",$.executeTutorialNextStepNotFinished=!1,a={},$.dontContinueTutorial=!1,et=!1,t||(_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator=null),e||K.storeStateInCookie()}function W(){for(var t=_walkmeInternals.ctx.get("UserGuidContainer").getAllUserGuids(),e=0;e<t.length;e++){var r=t[e];_walkmeInternals.ctx.get("ClientStorageManager").removeData(M.STORAGE_KEYS.WALKTHRU_PERSISTENCE_DATA,r)}}function y(t,e){var r=P(t,e);return r&&(r.repeat||"visit")}function P(t,e){if(t.startCondition==e||t.startCondition==M.SURVEY_START_EVENTS.Both)return t}function N(t,e,r,n){for(var a=e;a<r;a++){var i=L.getWalkthruByIndex(t);_walkmeInternals.ctx.get("AuditStepsManager").auditStep(i,i.Steps[a],n)}}function x(t){z.releaseBalloons(),G.state=M.WALKTHRU_STATE.NOT_RUNNING,K.storeStateInCookie();var e=0<G.splitPointStack.length?G.splitPointStack.pop():null,r={hadSplit:!!e,finishAfterRefresh:!!t},n=G.getCurrentWalkthru();if(b.deprecatedRaiseEvent(M.EVENTS.Walkthrus.WalkthruCompleted,n,r),T.removeOverlay(),_walkmeInternals.ctx.get("TodoListManager").updateDeployableCompleted(n.TutorialId,M.DEPLOYABLE_TYPE.Tutorial),A(n,G.currentStep,M.SURVEY_START_EVENTS.WalkThruCompleted),e){var a=L.getWalkthruByIndex(e.tutorialIndex);b.deprecatedRaiseEvent("switchToWalkthru",a.Id),b.deprecatedRaiseEvent("BackFromBranch",a),d(e.tutorialIndex,e.stepIndex,e.playGuid,e.playInitiator,e.stepPlayHistory,e.stepPlayStack,e.stepCompletedHistory),R.executeTutorialNextStep()}else G.stepPlayStack=[],_walkmeInternals.ctx.get("CrossDomainManager").get().loseOwnership()}function it(){U.customerLog("executeTutorialNextStep - Waiting for all frames to load before executing.",3),t.waitForFramesToLoad().then(ot)}function ot(){if($.executeTutorialNextStepNotFinished)U.customerLog("executeTutorialNextStepNotFinished - skipping this executeTutorialNextStep",5);else{if(et)return et=!1,U.customerLog("executeTutorialNextStep: waiting for other window",5),U.customerLog("Waiting for other window..."),void function n(){_walkmeInternals.ctx.get("ClientStorageManager").refreshGetData();B.playSetTimeout(function(){var t=_walkmeInternals.ctx.get("ClientStorageManager"),e=t.keysConfig.walkthru.waitForOtherWindow,r=t.getData(e.key,void 0,G.getCurrentWalkthru().userGuid);1==r?(U.customerLog("Other window finished. Resuming walk-thru here."),t.saveData(e.key,0,e.expiry,G.getCurrentWalkthru().userGuid),_walkmeInternals.ctx.get("WalkthruStateRestorer").restoreCrossUsersState()):n()},500)}();if($.dontContinueTutorial)U.customerLog("executeTutorialNextStep: not executing, dontContinueTutorial=true",5);else if(G.getCurrentWalkthru().Steps.length-1!=G.currentStep){$.executeTutorialNextStepNotFinished=!0;var t,e=null==(t=st())?0:t.Delay;U.customerLog(D.formatString("Next step including split is: {0} seconds",e),5,M.LOG_FEATURES.BALLOON),B.playSetTimeout(function(){function t(){$.executeTutorialNextStepNotFinished=!1,ht()}G.currentStep++,_walkmeInternals.ctx.get("WalkthruStepsLoader").afterStepsLoaded(G.getCurrentWalkthru().Id,function(){0<G.currentStep&&!at(G.getPreviousStep().End,M.WALKTHRU_STEP_TRIGGER.NOTHING)?z.releaseBalloons(t):t()})},1e3*e)}else x()}}function st(){return function t(e,r,n){var a=L.getWalkthruByIndex(e);{if(a.Steps.length>r+1){var i=a.Steps[r+1];return i.TutorialIndex=e,i}var o=G.splitPointStack;if(o.length>n){var s=o[o.length-1-n];return t(s.tutorialIndex,s.stepIndex-1,n+1)}return null}}(G.currentWalkthru,G.currentStep,0)}function ut(a){function t(t){U.customerLog(t,5,M.LOG_FEATURES.BALLOON)}var e=D.getTimer(t),i={};rt!=a.Id&&G.stepAppearanceIndex++,a.playNumber=G.stepAppearanceIndex,rt=a.Id,b.raiseEvent(M.EVENTS.Walkthrus.StepExecuting,{playNum:G.stepAppearanceIndex});var r=L.getWalkthruByIndex(G.currentWalkthru),n=D.formatString("Processing step # {0} . Step title: {1}. Walkthru: {2}",a.StepIndex+1,a.StepTitle,r.Name);if(U.customerLog(n),b.deprecatedRaiseEvent(M.EVENTS.Walkthrus.StepStarted,a),Y.isFeatureEnabled("highPerf")||_walkmeInternals.ctx.get("AnchorTagsFixer").fixAnchorTagsOnBeforeUnload(),G.state!=M.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT&&G.state!=M.WALKTHRU_STATE.WAITING_FOR_ELEMENT&&G.state!=M.WALKTHRU_STATE.WAITING_FOR_CONDITION){var o=Q.isActionStep(a)?M.STEP_STATUS.Shown:M.STEP_STATUS.SupposedToShow;_walkmeInternals.ctx.get("AuditStepsManager").auditStep(G.getCurrentWalkthru(),a,o)}var s=St(a),u=Z.checkPlayStepCondition(a);if(!u&&(s==M.playConditionModes.PLAY_CONDITION||s==M.playConditionModes.BOTH&&G.state!=M.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT))return U.customerLog("Play step condition is false. Skipping step."),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(G.getCurrentWalkthru(),a,M.STEP_STATUS.SkippedByCondition),b.deprecatedRaiseEvent(M.EVENTS.Walkthrus.StepSkipped,a),void it();if(dt(a)){var l=Tt(G.currentWalkthru,a.StepIndex,0,1,void 0,M.CHECK_STEP_MODE.Normal);if(-1==l)return U.customerLog("Keep looking for element after popup."),b.deprecatedRaiseEvent(M.EVENTS.Walkthrus.LookingForStepElement,a,{playGUID:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),G.state=M.WALKTHRU_STATE.WAITING_FOR_ELEMENT,B.playSetTimeout(function(){ht()},500),void K.storeStateInCookie();if(-2==l||-5==l){var p="Play condition isn't met, skipping the popup.";return-5==l&&(p="Loop detecetd"),U.customerLog(p),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(G.getCurrentWalkthru(),a,M.STEP_STATUS.SkippedNotFound),b.deprecatedRaiseEvent(M.EVENTS.Walkthrus.StepSkipped,a),void it()}}var c,d,S,g,T=void 0;if(u||G.state!=M.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT){var h={},f=D.getTimer(t);U.customerLog("Step - Play Condition"),T=R.findElement(a,null,h,void 0,void 0,{type:M.ELEMENT_OWNER_TYPE_NAMES.STEP,id:a.Id,stickyType:a.Settings.sticky,owner:{type:M.ELEMENT_OWNER_TYPE_NAMES.WT,id:G.getCurrentWalkthru().Id}}),i.FETime=f("Done looking for sticky step named "+(a.StepTitle||a.StepText)+" with id "+rt),a.Score=h.score}else U.customerLog("Sticky PlayCondition isn't met."),T=!1;if(T){if(T&&!0!==T){U.customerLog("Element found:"),U.customerLog(T);var E,I=X.getComplexHtmlElements(a,T);I&&(T=I.elements,E=I.parentElement)}b.deprecatedRaiseEvent(M.EVENTS.Walkthrus.StepElementFound,a),b.raiseEvent("BeforeNewStepShown");var k=0<G.stepPlayStack.length?G.stepPlayStack[G.stepPlayStack.length-1]:null,_=k?V.getStepById(k).StepIndex:null;if(g=a.Id,G.stepPlayHistory.push(g),(0<G.stepPlayStack.length?G.stepPlayStack[G.stepPlayStack.length-1]:null)!=g&&G.stepPlayStack.push(g),O.getSettingsValue(a.Settings,"fake",!1))return U.customerLog("This is a fake step. Continue to next step."),K.storeStateInCookie(),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(G.getCurrentWalkthru(),a,M.STEP_STATUS.FakeFound),b.deprecatedRaiseEvent(M.EVENTS.Walkthrus.FakeStep,a),void it();if(G.state=M.WALKTHRU_STATE.RUNNING,Q.isActionStep(a))return void B.playSetTimeout(function(){nt(a).doAction(),b.deprecatedRaiseEvent(M.EVENTS.Walkthrus.StepPerforming,a)},100);var A={type:M.ELEMENT_OWNER_TYPE_NAMES.step,id:a.Id,owner:{type:M.ELEMENT_OWNER_TYPE_NAMES.WT,id:G.getCurrentWalkthru().Id}},m=_walkmeInternals.ctx.get("TriggersManager").handle(T,a,G.currentStep,G.currentWalkthru,_,A),C=m.executeNextStep,v=m.clearElementEventsFuncs,W=m.buttons;O.getSettingsValue(a.Settings,"waitOtherWindow",!1)&&(et=!0),i.logicTime=e("Finished pre-balloon logic");var y=a.StepTitle,P=a.StepText;(S=a).DesignTemplateId||S.DesignTemplatePlaceholderConfigs&&0!=S.DesignTemplatePlaceholderConfigs.length||(a.DesignTemplatePlaceholderConfigs=q.createPlaceHolderConfigs(ft.get("SharedConsts").templateEntityType.balloon,a.StepTitle,a.StepText));var N=_walkmeInternals.ctx.create("Balloon",{element:T,parentElement:E,forceEmbedBalloonInIframe:!1,positionHelper:H,dontShowIoBalloon:!Y.isFeatureEnabled("multSpot")&&function(t){var e=t,r=G.stepPlayHistory;if(1<r.length){var n=L.getWalkthruByIndex(G.currentWalkthru);e=V.getStepById(r[r.length-2],n)}return at(t.End,M.WALKTHRU_STEP_TRIGGER.NOTHING)||at(e.End,M.WALKTHRU_STEP_TRIGGER.NOTHING)}(a),isFirstStep:function(){var t=G.stepPlayHistory;if(t.length<2)return!0;for(var e=0;e<t.length-1;e++){var r=L.getWalkthruByIndex(G.currentWalkthru),n=V.getStepById(t[e],r);if(!D.isDefined(n.Settings.action))return!1}return!0}(),stepSettings:a.Settings,visibilityFilter:H.getVisibleFilterKey(a),text:{title:y,content:P,subText:function(){var t=w.get().StepsInfoText,e=pt(),r=e.totalVisibleSteps,n=e.passedVisibleSteps;t=Y.isFeatureEnabled("floatingsubtext")?(t=t.replace("{0}",M.SUBTEXT_CURRENT_START+n+M.SUBTEXT_CURRENT_END)).replace("{1}",M.SUBTEXT_TOTAL_START+r+M.SUBTEXT_TOTAL_END):(t=t.replace("{0}",n)).replace("{1}",r);return t}()},end:a.End,position:a.Position,buttons:{next:W.nextButton,done:W.doneButton,back:0<=W.backButtonStepIndex},data:{balloonEntityId:a.Id,containerEntityId:a.TutorialId,type:a.Type},configuration:a.Configuration,logger:U,drawer:J.getBalloonDrawer(a.Configuration,a),siteConfig:w.get(),bindButtonsFunc:_walkmeInternals.ctx.get("WalkthruBalloonButtonsEventsBinder").addButtonEventsToBalloon,placeholderConfigurations:a.DesignTemplatePlaceholderConfigs,placeholderVariableValues:pt(),initiatorData:{initiator:a,type:M.STEP_PLAY_INITIATOR_ENUM.STEP}});if(N.onDestroy(function(){lt(T,elementEvents)}),N.setReleaseEvents(v),F.add(N),K.storeStateInCookie(),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(G.getCurrentWalkthru(),a,M.STEP_STATUS.Shown),Y.isFeatureEnabled("jawsAccessibility")){var x=y||P;y&&P&&(x+=". "+P),x&&T.attr("alt",x)}N.Show(!0,function(t,e){var r;wmjQuery.extend(!0,i,t),r={balloonDiv:e,step:a},b.raiseEvent(M.EVENTS.Walkthrus.ShowStepBalloon,r);var n={Element:T,Balloon:e};b.deprecatedRaiseEvent(M.EVENTS.Walkthrus.StepShown,a,n),b.deprecatedRaiseEvent(M.EVENTS.Walkthrus.StepPerforming,a,n),N.SetTimeoutOn(function(){!function(){switch(G.state){case M.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT:case M.WALKTHRU_STATE.WAITING_FOR_NEXT_BUTTON_CLICK:case M.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE:return!0;default:return!1}}()||(D.getSettingsValue(G.getCurrentStep().Settings,"sticky",0)?(U.customerLog("Sticky - keep looking for element.",5),z.releaseBalloons(),G.state=M.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT,ht()):G.getCurrentStep().IsSkippable?(tt("dontContinueTutorial",!1),U.customerLog("Skippable - continue to next step."),it()):G.state!=M.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE&&(U.customerLog("Stopping walk-thru."),z.releaseBalloons(),G.state=M.WALKTHRU_STATE.PAUSED,b.raiseEvent("WalkthruAborted"),b.raiseEvent("WalkthruStopped")))}),C&&(ct(),it())}),O.getSettingsValue(a.Settings,"isSelfExecuting",!1)&&(c=a,d=T,B.libSetTimeout(function(){var t;switch((t=c.End.split(/,/))[0]==M.WALKTHRU_STEP_TRIGGER.NEXT_BUTTON&&1<t.length?D.getInt(t[1]):D.getInt(t[0])){case M.WALKTHRU_STEP_TRIGGER.CLICK:U.customerLog("Self Executed Step - Trigger: Click",3),j.click(d);break;case M.WALKTHRU_STEP_TRIGGER.HOVER:U.customerLog("Self Executed Step - Trigger: Hover",3),j.hover(d);break;case M.WALKTHRU_STEP_TRIGGER.KEY_PRESSED:U.customerLog("Self Executed Step - Trigger: Text Input",3),j.text(d,c.Settings.selfExecuteText,void 0,void 0,c);break;case M.WALKTHRU_STEP_TRIGGER.SELECT_VALUE:var e=c.Settings.complexHtml&&c.Settings.complexHtml.val;e?(j.select(d,e),U.customerLog("Self Executed Step - Trigger: Select Value",3)):U.customerLog("SKIPPED Self Executed Step - Trigger: Select Any - not supported",3);break;default:U.customerLog("SKIPPED Self Executed Step - Trigger not supprted",3),$.dontContinueTutorial=!1,it()}},1e3*c.Settings.reactionTime||M.DEFAULT_REACTION_TIME))}else U.customerLog("Element not found."),b.deprecatedRaiseEvent(M.EVENTS.Walkthrus.StepElementNotFound,a,{playGUID:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),G.state==M.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT?(U.customerLog("Step was sticky. Keep looking for the element."),b.deprecatedRaiseEvent(M.EVENTS.Walkthrus.WaitingForStickyStep,a),G.state=M.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT,B.playSetTimeout(function(){ht()},500),K.storeStateInCookie()):a.IsSkippable||O.getSettingsValue(a.Settings,"skipNotExists",!1)?(Q.isActionStep(a)?(U.customerLog("Action step isn't valid. Skipping to next step."),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(G.getCurrentWalkthru(),a,M.STEP_STATUS.NonValidActionStep)):(U.customerLog("Skippable step. Skip to next step."),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(G.getCurrentWalkthru(),a,M.STEP_STATUS.SkippedNotFound)),b.deprecatedRaiseEvent(M.EVENTS.Walkthrus.StepSkipped,a),it()):(U.customerLog("Keep looking for the element."),b.deprecatedRaiseEvent(M.EVENTS.Walkthrus.LookingForStepElement,a,{playGUID:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),G.state=M.WALKTHRU_STATE.WAITING_FOR_ELEMENT,B.playSetTimeout(function(){ht()},500),K.storeStateInCookie())}function lt(t,e){for(var r=0;r<e.length;r++)t.unbind(e[r]+".mt");return!1}function pt(){for(var t,e=L.getWalkthruByIndex(G.currentWalkthru).Steps,r=0,n=0,a=0;a<e.length;a++)(t=e[a]).Type==M.STEP_TYPE.Action||parseInt(O.getSettingsValue(t.Settings,"isInvisible",0))||parseInt(O.getSettingsValue(t.Settings,"fake",0))||(r++,a<=G.currentStep&&n++);return{totalVisibleSteps:r,passedVisibleSteps:n}}function ct(t){t=D.defaultValue(t,!0);var e,r=G.getCurrentStep();b.deprecatedRaiseEvent(M.EVENTS.Walkthrus.StepCompleted,r),e=r,G.stepCompletedHistory.push(e.Id),t?(_walkmeInternals.ctx.get("AuditStepsManager").auditStep(G.getCurrentWalkthru(),r,M.STEP_STATUS.Performed),function(t){if(O.getSettingsValue(t.Settings,"resumeOtherWindow",!1)){var e=_walkmeInternals.ctx.get("ClientStorageManager"),r=e.keysConfig.walkthru.waitForOtherWindow;e.saveData(r.key,1,r.expiry,G.getCurrentWalkthru().userGuid)}}(r)):_walkmeInternals.ctx.get("AuditStepsManager").auditStep(G.getCurrentWalkthru(),r,M.STEP_STATUS.MovedBack)}function dt(t){return t.Type==M.STEP_TYPE.Popup&&1==O.getSettingsValue(t.Settings,"popup-play-condition",0)}function St(t){return O.getSettingsValue(t.Settings,e,M.playConditionModes.PLAY_CONDITION)}function gt(t){-1==G.currentStep&&k(t,!0)||it()}function Tt(h,f,E,I,k,_,A){return _walkmeInternals.ctx.get("ElementFinder").wrapSession(function(){function t(t,e){return function(t){if(!C||0==C.length)return;for(var e=[],r=void 0,n=!1;0<C.length;){if((r=C.pop()).id==t){n=!0;break}e.push(r)}if(0<e.length)for(;0<e.length;)C.push(e.pop())}(e),U.customerLog("returned checking "+f+" ("+r.Id+") result: "+t,5,m),t}var e=L.getWalkthruByIndex(h),r=e.Steps[f];I=D.defaultValue(I,1),E=D.defaultValue(E,0);var n,a,i=function(t){for(var e=0;e<C.length;e++){if(C[e].id==t)return!0}return!1}(r.Id);if(U.customerLog("Checking if step index "+f+" ("+r.Id+") can be played. looped: "+i+" on mode:"+_,5,m),n=r,a=_,C.push({id:n.Id,mode:a}),i)return t(-5,r.Id);var o=!0;St(r)!=M.playConditionModes.STICKY_CONDITION&&(o=Z.checkPlayStepCondition(r));var s,u,l,p=O.getSettingsValue(r.Settings,"fake",!1),c=O.getSettingsValue(r.Settings,"skipNotExists",!1)||r.IsSkippable||!o||p;if(s=f,l=o,u=c?l?M.STEP_STATUS.SkippedNotFound:M.STEP_STATUS.SkippedByCondition:M.STEP_STATUS.SupposedToShow,k&&k.push({stepIndex:s,stepStatus:u}),o&&!p&&U.customerLog("Step - Find Element "+(A||"")),o&&!p&&R.findElement(r,void 0,void 0,void 0,void 0,{type:M.ELEMENT_OWNER_TYPE_NAMES.step,id:r.Id,stickyType:r.Settings.sticky,owner:{type:M.ELEMENT_OWNER_TYPE_NAMES.WT,id:e.Id}}))return Q.isActionStep(r)?t(function(t){var e=nt(t);if(e.getGoToData){var r=e.getGoToData(),n=Tt(r.tutorialIndex,r.stepIndex,E,I,k,M.CHECK_STEP_MODE.Normal);if(n<0)return n}else if("stopWt"==e.type)return-2;return t.StepIndex}(r),r.Id):Q.isPopupStep(r)?t(function(t){if(!dt(t)||1!=I)return t.StepIndex;if(L.getWalkthruByIndex(h).Steps.length>t.StepIndex){var e=Tt(h,t.StepIndex+1,E,I,k,M.CHECK_STEP_MODE.Normal);return e<0?e:t.StepIndex}}(r),r.Id):t(f,r.Id);var d=f+I;if(c){var S;if(d<0)return t(-2,r.Id);if(d!=e.Steps.length)return U.customerLog("Checking if step "+f+" ("+r.Id+") can be played. Skipping to: "+d,5,m),t(S=Tt(h,d,E,I,k,M.CHECK_STEP_MODE.Normal),r.Id);var g=G.splitPointStack;if(g.length>E){var T=g[g.length-1-E];return S=Tt(T.tutorialIndex,T.stepIndex,E+1,I,k,M.CHECK_STEP_MODE.Normal),U.customerLog("Checking if step "+f+" ("+r.Id+") can be played. reached last step",5,m),t(S,r.Id)}return t(-2,r.Id)}return t(-1,r.Id)})}function ht(){var t=G.getCurrentStep();_walkmeInternals.ctx.get("ElementFinder").wrapSession(function(){ut(t)})}_walkmeInternals.ctx.get("WmInternals").on(M.EVENTS.Flows.BeforeFlowStarted,function(){W()})}}).call(this,r(2))},1291:function(t,e){t.exports=function(i){function n(t,e){var r=i.getWalkthruIndexByWalkthruId(t);if(-1<r){var n=a(e,i.getWalkthruByIndex(r));if(n)return n}return null}function a(t,e){if(e)return o(t,e);for(var r=i.getWalkthrus(),n=0;n<r.length;n++){var a=o(t,r[n]);if(a)return a}return null}function o(t,e){for(var r=e.Steps,n=0;n<r.length;n++)if(r[n].Id==t)return r[n];return null}this.getStepByWalkthruAndStepIds=n,this.getStepById=a,this.getStepIndex=function(t,e){var r=n(e,t);return r?r.StepIndex:-1}}},1292:function(t,e){t.exports=function(t,e,r,n,a,i,o){this.register=function(){o.register(u)};var s=!(this.setIgnoreNextBeforeUnload=function(t){s=t});function u(){i.isEmpty()&&(t.customerLog("onbeforeunload called",1),s?s=!1:(e.setMember("dontContinueTutorial",!0),r.pauseAllTimeouts(),n.get().enabled()?n.get().loseOwnership(!1,!0):a.isFeatureEnabled("noUnload")&&r.setWalkmeTimeout(function(){e.setMember("dontContinueTutorial",!1),r.resumeAllTimeouts()},3e3)))}}},1293:function(t,e){t.exports=function(){var t=this;t.getWalkthrus=function(){return n},t.setWalkthrus=function(t){n=t},t.getWalkthruByIndex=a,t.getWalkthruById=function(t){for(var e=0;e<n.length;e++)if(n[e].TutorialId==t)return n[e];return null},t.getWalkthruIndexByWalkthruId=function(t){for(var e=-1,r=0;r<n.length;r++)if(n[r].TutorialId==t){e=r;break}return e},t.getStepByIndex=function(t,e){var r=a(t);if(r&&r.Steps[e])return r.Steps[e]};var n=[];function a(t){return n[t]}}},1294:function(t,e){t.exports=function(t,e){var r=this;function n(){return t.getWalkthruByIndex(r.currentWalkthru)}function a(t){var e=n();return e&&e.Steps&&e.Steps[t]}r.currentWalkthru=-1,r.currentStep=-1,r.stepAppearanceIndex=0,r.splitPointStack=[],r.stepPlayHistory=[],r.stepPlayStack=[],r.stepCompletedHistory=[],r.lastBackButtonStepIndex=-1,r.getCurrentWalkthru=n,r.getCurrentStep=function(){return a(r.currentStep)},r.getPreviousStep=function(){return a(r.currentStep-1)},r.getNextStep=function(){return a(r.currentStep+1)},r.getStep=a,r.state=e.WALKTHRU_STATE.NOT_RUNNING}},1295:function(t,e){t.exports=function(r,n){this.shouldKeepOverlay=function(){var t=r.getCurrentStep();return n.isSpotlightStep(t)&&function(t){return n.isPopupStep(t)&&function(){var t=r.getPreviousStep(),e=r.getNextStep();return n.isPopupStep(t)||n.isPopupStep(e)}()}(t)}}},1296:function(t,e){t.exports=function(c,d,a,i,S,g,T){this.storeStateInCookie=function(){var t=void 0,e=void 0,r=void 0,n=void 0,a=S.getCurrentWalkthru(),i=a?a.TutorialId:-1,o=_walkmeInternals.ctx.get("UserGuidContainer").getUserGuid(),s=d.getCurrentInteractionGuid();S.state==c.WALKTHRU_STATE.RUNNING||S.state==c.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE?(t=S.currentStep+1,a.Steps.length<=S.currentStep+1&&(e=1)):S.state==c.WALKTHRU_STATE.WAITING_FOR_SPLIT?(t=S.currentStep,r=g.splitTutorialIds,n=g.splitStartFromStepId):t=S.currentStep;var u=function(t,e,r,n,a,i){var o={};return o[h.CURRENT_TUTORIAL_COOKIE_NAME]=t,o[h.CURRENT_STATE_COOKIE_NAME]=S.state,o[h.CURRENT_STEP_COOKIE_NAME]=e,o[h.CURRENT_STEP_PLAY_NUMBER_COOKIE_NAME]=S.stepAppearanceIndex,o[h.CURRENT_PLAY_GUID_COOKIE_NAME]=_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID,o[h.CURRENT_PLAY_INITIATOR_COOKIE_NAME]=_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator,o[h.SPLIT_POINT_COOKIE_NAME]=S.splitPointStack,o[h.TUTORIAL_FINISHED_COOKIE_NAME]=r,o[h.STEP_PLAY_HISTORY_COOKIE_NAME]=S.stepPlayHistory,o[h.SPLIT_TUTORIAL_IDS_COOKIE_NAME]=n,o[h.SPLIT_START_FROM_STEP_COOKIE_NAME]=a,o[h.INTERACTION_GUID_COOKIE_NAME]=i,T.raiseEvent("SavingPersistenceData",o),o}(i,t,e,r,n,s),l=_walkmeInternals.ctx.get("ClientStorageManager"),p=l.keysConfig.walkthru.persistenceData;l.saveData(p.key,u,p.expiry,o)},this.getPersistenceData=function(t){var e=s(t),r=o(e,-1),n={state:i.getInt(e[h.CURRENT_STATE_COOKIE_NAME],c.WALKTHRU_STATE.NOT_RUNNING),step:i.getInt(e[h.CURRENT_STEP_COOKIE_NAME],-1),playNum:e[h.CURRENT_STEP_PLAY_NUMBER_COOKIE_NAME]||S.stepAppearanceIndex,tutotrialGUID:e[h.CURRENT_PLAY_GUID_COOKIE_NAME],playInitiator:e[h.CURRENT_PLAY_INITIATOR_COOKIE_NAME],splitPointStack:i.defaultValue(e[h.SPLIT_POINT_COOKIE_NAME],[]),isTutorialFinished:i.defaultValue(e[h.TUTORIAL_FINISHED_COOKIE_NAME],0),stepPlayHistory:i.defaultValue(e[h.STEP_PLAY_HISTORY_COOKIE_NAME],[]),stepCompletedHistory:i.defaultValue(e[h.STEP_COMPLETED_HISTORY_COOKIE_NAME],[]),tutorial:a.getWalkthruIndexByWalkthruId(r),splitTutorialIds:i.defaultValue(e[h.SPLIT_TUTORIAL_IDS_COOKIE_NAME],[]),splitStartFromStepId:i.defaultValue(e[h.SPLIT_START_FROM_STEP_COOKIE_NAME],[]),interactionGuid:e[h.INTERACTION_GUID_COOKIE_NAME]};return T.raiseEvent("GettingPersistenceData",{persistenceData:e,current:n}),n},this.getRunningWalkthruId=function(t){return o(s(t))};var h=c.WALKTHRU_PERSISTANCE_DATA_FIELDS;function o(t,e){return i.getInt(t[h.CURRENT_TUTORIAL_COOKIE_NAME],e)}function s(t){return _walkmeInternals.ctx.get("ClientStorageManager").getData(c.STORAGE_KEYS.WALKTHRU_PERSISTENCE_DATA,{},t)}}},1297:function(t,e){t.exports=function(r,o,s,u,l,p,c,d,S,g,T,h,f,E,a){function t(t){c.customerLog("Restoring cross user state",5);var e=a.getAllUserGuids();if(!e.length)return t&&t(),!1;for(var r=0;r<e.length;r++){var n=e[r];if(i(n,t))return n}return!1}function i(a,i){var t=g.getRunningWalkthruId(a);function e(){var t=function(t){var e=g.getPersistenceData(t),r=o.getStepByIndex(e.tutorial,e.step);r&&(e.isTutorialFinished||e.state!=h.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT&&e.state!=h.WALKTHRU_STATE.WAITING_FOR_NEXT_BUTTON_CLICK||d.getSettingsValue(r.Settings,"sticky",0)||r.IsSkippable||(c.customerLog("page change happened while waiting for element - pausing walkthru",2),e.state=h.WALKTHRU_STATE.PAUSED));return e}(a);s.stepAppearanceIndex=t.playNum,s.splitPointStack=t.splitPointStack,s.stepPlayHistory=t.stepPlayHistory,s.currentWalkthru=t.tutorial,s.currentStep=t.step,s.stepCompletedHistory=t.stepCompletedHistory,s.state=t.state,S.raiseEvent("RestoringStateFromCookie",t),u.setCurrentInteractionGuid(t.interactionGuid),t.tutotrialGUID&&(_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID=t.tutotrialGUID),_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator=t.playInitiator;var e=o.getStepByIndex(s.currentWalkthru,s.currentStep);function r(){l.playSetTimeout(function(){p.executeCurrentStep()},1e3*e.Delay)}if(s.state==h.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE||s.state==h.WALKTHRU_STATE.PASSING_OWNERSHIP&&e){s.currentStep--;var n=o.getStepByIndex(s.currentWalkthru,s.currentStep);n&&(n.playNumber=s.stepAppearanceIndex),p.stepWasCompleted(!0),s.currentStep++}if(c.customerLog("isTutorialFinished: "+t.isTutorialFinished,5),1!=t.isTutorialFinished||s.state!=h.WALKTHRU_STATE.RUNNING&&s.state!=h.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE&&s.state!=h.WALKTHRU_STATE.PASSING_OWNERSHIP)if(c.customerLog("Continue from cookie: currentTutorial: "+s.currentWalkthru+" -- currentState: "+s.state+" -- currentStep: "+s.currentStep+" -- currentPlayGUID: "+_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID+" -- currentUserGUID: "+a,5),!e||s.state!=h.WALKTHRU_STATE.RUNNING&&s.state!=h.WALKTHRU_STATE.WAITING_FOR_ELEMENT&&s.state!=h.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT&&s.state!=h.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE&&s.state!=h.WALKTHRU_STATE.WAITING_FOR_CONDITION&&s.state!=h.WALKTHRU_STATE.PASSING_OWNERSHIP)if(e&&s.state==h.WALKTHRU_STATE.WAITING_FOR_REDIRECT)p.loadTutorial(s.currentWalkthru,0,!1,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator);else if(e&&s.state==h.WALKTHRU_STATE.WAITING_FOR_OWNERSHIP)p.startNewTutorial(s.currentWalkthru,s.currentStep,!1,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator);else if(!e||s.state!=h.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT&&s.state!=h.WALKTHRU_STATE.WAITING_FOR_NEXT_BUTTON_CLICK)if(s.state==h.WALKTHRU_STATE.WAITING_FOR_SPLIT)f.splitTutorialIds=t.splitTutorialIds,f.splitStartFromStepId=t.splitStartFromStepId,T.resumeSplit();else{if(s.state!=h.WALKTHRU_STATE.PAUSED)return p.resetState(),c.customerLog("Invalid cookie data. Not running tutorial. (userGuid : "+a+")",5),i&&i(!1),!1;c.customerLog("Tutorial was paused while restoring state from cookie. This can happen for several reasons when SPA is configured: A trigger for a balloon or wait for conditions has not been fullfilled. Alterntively an autostart is defined with sonar on an element that causes SPA page change. Please define the autostart without sonar.",1),E.releaseBalloons(),p.releaseBalloonsTimeouts(),p.resetState(),S.raiseEvent("WalkthruAborted")}else d.getSettingsValue(e.Settings,"sticky",0)?(c.customerLog("Sticky - keep looking for element",5),s.state=h.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT,r()):e.IsSkippable&&(s.getCurrentWalkthru().Steps.length==s.currentStep+1?p.tutorialFinished():(s.currentStep++,s.state=h.WALKTHRU_STATE.RUNNING,r()));else r();else p.tutorialFinished(!0);return i&&i(!0),!0}t?r.afterStepsLoaded(t,e):e()}this.restore=t,this.restoreCrossUsersState=t,this.restoreStateFromCookie=i}},1298:function(e,t,r){(function(t,g){e.exports=function(s,u,l,p,c){var r=this;r.LoadStepsForWT=function(t){return r.afterStepsLoaded(t,function(){})},r.afterStepsLoaded=function(e,t){if(a[e])return a[e].then(t,t);var i=c.getWalkthrus(),o=function(t){for(var e=c.getWalkthrus(),r=0;r<e.length;r++)if(e[r].TutorialId==t)return r;return-1}(e);return i[o]&&0==i[o].Steps.length?(a[e]=new g(function(a,t){n.load(e).then(function(t){var e,r,n;0==i[o].Steps.length?(e=o,r=t,(n=c.getWalkthrus())[e].Steps=r,s.fixSteps(n[e],p.get()),function(t,e){for(var r=[],n=0;n<t.length;n++){var a=t[n];if(l.isBranchStep(a)){var i=a.Settings.action.arguments.wtId;r.push(d(i))}r=r.concat(S(a))}u.executeParallel({functionsToExecute:r,successCallback:e})}(t,a)):a()},t)}).then(t,t),!0):t()};var n,a={};function d(e){return function(t){a[e]?t():r.afterStepsLoaded(e,t)}}function S(t){var e=[];if(t.LinkedTutorialIds)for(var r=t.LinkedTutorialIds.split(";"),n=0;n<r.length;n++)r[n]&&e.push(d(r[n]));return e}n=t.create("NoPublishStepsLoader",{jsonpCallbackPrefix:"steps",fileNamePrefix:"wt"})}}).call(this,r(2),r(13))},1299:function(t,e){t.exports=function(i,o,s,u,l,p,c,d,S,g,T,h,f){function E(a){_walkmeInternals.ctx.get("ElementFinder").wrapSession(function(){try{var e,t;a=a||1e3;var r=0;if(1==h.splitTutorialIds.length){if(t=h.splitTutorialIds[0],null!=h.splitStartFromStepId){var n=o.getStepIndex(h.splitStartFromStepId,t);-1!=n&&(r=n),i.customerLog(f.formatString("Resuming split, walkthru id: {0}, step index: {1}",t,r))}}else t=function(t){try{i.customerLog("Multiple branch: Going through all walk-thrus.");var e=function(t){var e=T.map(t,function(t){var e,r,n=(e=t.TutorialId,(r=u.getWalkthruById(e))?r.Name:"");i.customerLog("Check walk-thru: "+t.TutorialId+" ("+n+")");var a=l.findElement(t);return a?i.customerLog("First step found."):i.customerLog("First step not found."),{step:t,element:a}});return e=T.filter(e,function(t){return t.element}),T.map(e,function(t){return t.step})}(function(t){return T.map(t,function(t){return u.getWalkthruById(t).Steps[0]})}(t));if(1==e.length)return e[0].TutorialId;if(!(1<e.length))return null;i.customerLog("can't decide which tutorial to play",5),i.customerLog(e.length+" walk-thrus match. Cannot choose which walk-thru to start.")}catch(t){i.error(t)}}(h.splitTutorialIds);t?(c.deprecatedRaiseEvent("switchToWalkthru",t),e=u.getWalkthruIndexByWalkthruId(t),p.playSetTimeout(function(){var t={type:d.STEP_PLAY_INITIATOR_ENUM.BRANCHING,objectId:S.getCurrentStep().Id,appType:d.EVENT_SENDER_EVENT_APPS.Step};s.loadTutorial(e,r,!1,void 0,t)},a),g.storeStateInCookie()):(i.customerLog("Try again in 1000ms."),p.playSetTimeout(function(){E()},1e3))}catch(t){i.error(t)}})}this.makeSplit=function(t,e,r,n,a){S.state=d.WALKTHRU_STATE.WAITING_FOR_SPLIT,1!=r&&function(t){S.getCurrentWalkthru().Steps.length<=S.currentStep+1||S.splitPointStack.push({tutorialIndex:S.currentWalkthru,stepIndex:null!=t?t:S.currentStep+1,playGuid:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID,playInitiator:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator,stepPlayHistory:S.stepPlayHistory,stepCompletedHistory:S.stepCompletedHistory,stepPlayStack:S.stepPlayStack})}(e);h.splitTutorialIds=t,h.splitStartFromStepId=n,g.storeStateInCookie(),s.stepWasCompleted(),E(a)},this.resumeSplit=E}},1300:function(t,e,r){(function(e){function f(t){return(f="function"==typeof e&&"symbol"==typeof e.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof e&&t.constructor===e&&t!==e.prototype?"symbol":typeof t})(t)}t.exports=function(o,u,s,i,l,p,c,t){var d=this;d.getWalkthrus=function(t){try{for(var e=o.getWalkthrus(),r=new Array,n=0;n<e.length;n++){var a=e[n].CustomField1;a=a&&(a=(a=(a=a.replace(/&quot;/gi,'"')).replace(/&apos;/gi,"'")).replace(/&#39;/gi,"'")).replace(/&amp;/gi,"&");var i={Index:n,Name:e[n].Name,Id:e[n].TutorialId,Visible:e[n].IsVisible,CustomField1:a,Description:e[n].Description,Keywords:e[n].Keywords};t&&(i.ConditionsPassed=_walkMe.canShowTutorial(e[n]),i.isPackageHidden=_walkMe.isTutorialPackageHidden(e[n]),null==e[n].Keywords?i.Keywords=[]:i.Keywords=e[n].Keywords),r.push(i)}return r}catch(t){S("walkMeAPI - error running getWalkthrus.",3)}},d.getWalkthrusLabels=function(t){try{var e=function(){var t=p.getSettingsValue(u.get().Settings,"labels",null);return t&&1==t.useLabels?c.get():null}();if(null==e)return null;for(var r=this.getWalkthrus(t),n=function(t,e){for(var r=[],n=0;n<t.length;n++)for(var a=t[n].LinkedTutorials,i=0;i<a.length;i++)r.push(a[i]);var o=[];for(n=0;n<e.length;n++)h(e[n].Id,r)||o.push(e[n]);return o}(e,r),a=u.get(),i=[],o=0;o<e.length;o++){var s={Name:e[o].Name,Id:e[o].Id,Walkthrus:T(r,e[o].LinkedTutorials,e[o].Id)};i.push(s)}return{unlabeledWalkthrus:n,labels:i,unlabeledFirst:a.Settings.labels&&1==a.Settings.labels.unlabeldOnTop}}catch(t){S("walkMeAPI - error running getWalkthrusLabels.",3)}},d.startWalkthruById=function(t,e){try{"object"!=f(t)&&(t={id:t,fromStep:e});var r=t.id,n=t.fromStep,a=t.playInitiator;if(r<0||"number"!=typeof r)return!1;var i=g(r);return!(i<0)&&(a=a||{type:s.STEP_PLAY_INITIATOR_ENUM.API},d.startWalkthruByIndex({index:i,fromStep:n,playInitiator:a}))}catch(t){S("walkMeAPI - error running startWalkthruById.",3)}},d.startWalkthruByIndex=function(t,e){try{if(!i.isWalkMeVisible())return!1;"object"!=f(t)&&(t={index:t,fromStep:e});var r=t.index,n=t.fromStep,a=t.playInitiator;return!(r<0||"number"!=typeof r)&&(function(t){l.raiseEvent(s.EVENTS.ApiWasCalled,{initiator:t})}(a=a||{type:s.STEP_PLAY_INITIATOR_ENUM.API}),_walkMe.startNewTutorial(r,n,!1,a))}catch(t){S("walkMeAPI - error running startWalkthruByIndex.",3)}},d.canStartWalkthru=function(t,e){try{if(!i.isWalkMeVisible())return!1;if(t<0||"number"!=typeof t)return!1;var r=g(t);return!(r<0)&&_walkMe.startNewTutorial(r,e,!0,s.STEP_PLAY_INITIATOR_ENUM.API)}catch(t){S("walkMeAPI - error running canStartWalkthru.",3)}},d.setWalkthruVisibility=function(t,e){try{var r=o.getWalkthrus(),n=g(t);return!(n<0)&&(r[n].IsVisible=e,!0)}catch(t){S("walkMeAPI - error running setWalkthruVisibility.",3)}},d.stopWalkthru=function(){try{_walkMe.stopTutorial()}catch(t){S("walkMeAPI - error running stopWalkthru.",3)}};var S=t.wrapCustomerLog("walkmeAPI");function g(t){for(var e=o.getWalkthrus(),r=0;r<e.length;r++)if(e[r].TutorialId==t)return r;return-1}function T(t,e,r){for(var n=[],a=0;a<t.length;a++)if(h(t[a].Id,e)){var i=mtjQuery.extend(!0,{},t[a]);i.labelId=r,n.push(i)}return n}function h(t,e){for(var r=0;r<e.length;r++)if(e[r]==t)return!0;return!1}}}).call(this,r(52))},1301:function(t,e){t.exports=function(a,t,e,r,i){var n=this;n.setTutorials=a.setTutorials,n.isTutorialPackageHidden=a.isTutorialPackageHidden,n.canShowTutorial=a.canShowTutorial,n.stopTutorial=a.stopTutorial,n.startNewTutorial=a.startNewTutorial,n.tutorialFinished=a.tutorialFinished,n.executeTutorialNextStep=a.executeTutorialNextStep,n.postWelcomeStep=a.postWelcomeStep,n.executeCurrentStep=a.executeCurrentStep,n.getCurrentTutorial=t.getCurrentWalkthru,n.getTutorials=e.getWalkthrus,n.setTutorialsForEditor=function(t,e){try{for(var r=_walkmeInternals.ctx.get("JsonUtils").secureEvalJSON(t),n=0;n<r.length;n++)r[n].userGuid=e;a.setTutorials(r)}catch(t){i.error(t)}},n.getState=function(){return t.state},n.forceSplit=function(){r.makeSplit.apply(null,arguments)},n.runTutorialsActionConditions={}}},1302:function(t,e){t.exports=function(){this.splitTutorialIds=[],this.splitStartFromStepId}},1303:function(t,e){t.exports=function(n,a,i,o,e,s,r,u,l){function p(t){mtjQuery(".walkme-action-close, .walkme-action-cancel",t).click(function(t){!function(t){var e={ClickEvent:t};o.raiseEvent("UserStoppedWalkthru",e);var r=-1==n.currentStep;r||_walkmeInternals.ctx.get("AuditStepsManager").auditStep(n.getCurrentWalkthru(),n.getCurrentStep(),a.STEP_STATUS.Exited);i.stopTutorial(r),o.raiseEvent("UserStoppedWalkthruAfterStop",e)}(t)})}function c(t){t.durationHandler&&(t.durationHandler.clear(),t.durationHandler=null)}function d(t){for(var e,r=s.getAll(),n=0;n<r.length;n++)r[n].releaseEvents(t)&&(e=!0);return e}function S(t){return!(t.Type!=a.STEP_TYPE.Popup||!t.LinkedTutorialIds||!i.isTutorialIdsExist(t.LinkedTutorialIds.split(";")))&&(e.makeSplit(t.LinkedTutorialIds.split(";")),!0)}this.addButtonEventsToBalloon=function(t,e){(function(t){mtjQuery(".walkme-action-next, .walkme-action-start",t).click(function(){!function(){o.raiseEvent("NextButtonClicked");var t=n.getCurrentStep();o.deprecatedRaiseEvent(a.EVENTS.Walkthrus.StepTriggered,t),c(t),d()||(n.state=a.WALKTHRU_STATE.RUNNING,r.releaseBalloons(function(){S(t)||(i.stepWasCompleted(),i.executeTutorialNextStep())}))}()}),mtjQuery(".walkme-action-back",t).click(function(){o.raiseEvent("BackButtonClicked"),c(n.getCurrentStep()),n.stepPlayStack.pop(),function(){if(u.isFeatureEnabled("backButtonAlways"))return!0;return!d(n.lastBackButtonStepIndex-1)}()&&i.executePreviousStep()}),mtjQuery(".walkme-action-done",t).click(function(){!function(){o.raiseEvent("DoneButtonClicked");var t=n.getCurrentStep();if(o.deprecatedRaiseEvent(a.EVENTS.Walkthrus.StepTriggered,t),c(t),!S(t)){d()||(i.stepWasCompleted(),i.tutorialFinished())}}()})})(t),p(t),l.addButtonEventsToBalloon(t,e)},this.attachBalloonXButtonClickEvent=p}},1304:function(t,e){t.exports=function(c,p,d,S,g,T,h,f,e,E,I){var k,_;this.showFailPopup=function(t,e,r,n){n+="<div style='float: right'>",n+=function(t,e,r,n){(n=c.fixConfiguration(n)).ButtonBorderColor=n.ButtonBorderColor||"#6c84a6";var a="rtl"==t.Direction?"right":"left";c.fixGradientColorsInConfiguration(n,"ButtonBgColor"),c.fixGradientColorsInConfiguration(n,"ButtonBgColor2");var i=n.ButtonBgColor,o=n.ButtonBgColor2,s=n.ButtonShadowWidth,u=n.BalloonButtonRadius,l=i!=o,p="CSS-RESET "+(l?"background:-moz-linear-gradient(top, "+i+", "+o+");background:-webkit-gradient(linear, left top, left bottom, color-stop(0%,"+i+"), color-stop(100%,"+o+"));background:-webkit-linear-gradient(top, "+i+" 0%,"+o+" 100%);background:-o-linear-gradient(top, "+i+" 0%,"+o+" 100%);background:-ms-linear-gradient(top, "+i+" 0%,"+o+" 100%);background:linear-gradient(to bottom, "+i+" 0%,"+o+' 100%);filter: progid:DXImageTransform.Microsoft.gradient( startColorstr="'+i+'", endColorstr="'+o+'",GradientType=0 );':"background-color:"+i+";")+"border: 1px solid "+n.ButtonBorderColor+";color:"+n.ButtonTextColor+"; cursor: pointer; display: inline-block; float: none; font-size: 14px; font-weight: normal;font-family: Arial; margin-"+a+": 6px; padding: 2px 14px; text-align: center; text-decoration: none; position: static;overflow: visible;-moz-box-shadow: 0 0 "+s+"px rgba(0, 0, 0, 0.4);-webkit-box-shadow: 0 0 "+s+"px rgba(0, 0, 0, 0.4); box-shadow: 0 0 "+s+"px rgba(0, 0, 0, 0.4); -moz-border-radius:"+u+"px;-webkit-border-radius:"+u+"px;border-radius:"+u+"px;";i!=o&&E.isIE()&&(p+="border-radius: 0px;");l&&CommonUtils.isGradientUsingFilter(p)&&(p+="background: url("+T.get()+"/player/resources/images/spacer.gif) repeat;");return p=p.replace(/CSS-RESET/g,A),"<button class='"+e+"' type='button' style='"+p+"'>"+r+"</button>"}(t,"walkme-custom-first-step-not-available-ok-button mt-custom-first-step-not-available-ok-button CUSTOM-TUTORIAL-ID","OK",e),function(t,e,r,n,a,i,o){var s='<div class="mt-to-destroy walkme-custom-popup mt-custom-popup walkme-custom-popup-'+r+" mt-custom-popup-"+r+' CUSTOM-TUTORIAL-ID mt-to-destroy" id="walkme-popup-body" style="CSS-RESET width:'+a+'px">'+n+"</div>";s=(s=s.replace(/CSS-RESET/g,A)).replace(/CUSTOM-TUTORIAL-ID/g,"walkme-custom-walkthru-"+i);var u=f.getTopContainer();u.append(s),(k=mtjQuery("#walkme-popup-body",u)).css({position:"fixed","z-index":p.POPUP_BALLOON_Z_INDEX,padding:"8px 12px 12px 12px","font-family":"Arial"}),c.setStyleForBalloon(k,e,!1);var l=0;mtjQuery.each(mtjQuery("[width], [style*=width]",k),function(t,e){mtjQuery(e).width()>l&&(l=mtjQuery(e).width())}),k.width()<l&&k.css("width",l+"px");g.centerElementInPage(k,!1),_=S.playSetInterval(function(){g.centerElementInPage(k,!0)},1e3),E.isQuirksMode()||I.shouldHandlePageAsFramesets()||d.displayOverlay(2147483630,!0);k.fadeIn("slow"),h.addButtonEventsToBalloon(k,{objectId:i,type:p.STEP_PLAY_INITIATOR_ENUM.WALKTHRU}),o&&o(k)}(0,e,"first-step-not-available",n+="</div>",420,r.Id,a)},this.closePopup=r;var A="display: block; padding: 0; margin: 0;\tvertical-align: baseline; border-collapse: inherit; background: none; border-spacing: 1px 1px; line-height: normal; border: none none; height: auto; text-indent: inherit;  font-family: Arial; letter-spacing: normal; text-align: left; text-transform: none; font-weight: normal; outline: invert none medium; width: auto;  border-top: none; border-right: none; border-bottom: none; border-left: none; direction: ltr; position: static; top: auto; left: auto;";function r(t){_&&_.clear(),e.shouldKeepOverlay()||d.removeOverlay(),d.destroyDivWithIframes(k,t),k=null}function a(t){mtjQuery(".walkme-custom-first-step-not-available-ok-button",t).click(function(){r()})}}},1305:function(t,e){t.exports=function(o,s){this.showFailedToStartPopup=function(t,e,r){if(function(t){return"v3"==t.BalloonSettings.BalloonVersion||"vm1"==t.BalloonSettings.BalloonVersion}(t))return o.showFailedToStartPopup(t,e,r.Settings.bbcode_v,r.Id);var n=t.BalloonSettings,a={balloonSettings:n,alertText:e,isOldBalloon:!0,bbCodeVersion:r.Settings.bbcode_v,balloonEntityId:r.Id},i=o.createHtmlForNotAvailablePopup(a);s.showFailPopup(t,n,r,i)}}},1306:function(t,e){t.exports=function(e){this.isActionStep=function(t){return t.Type&&t.Type==e.STEP_TYPE.Action},this.isBranchStep=function(t){return t.Type&&t.Type==e.STEP_TYPE.Action&&t.Settings&&t.Settings.action&&t.Settings.action.actionType==e.STEP_ACTION.Branch},this.isPopupStep=function(t){return t&&t.Type&&t.Type==e.STEP_TYPE.Popup},this.isSpotlightStep=function(t){return t&&t.Settings&&(1==t.Settings.fadeBackground||"True"==t.Settings.fadeBackground||1==t.Settings.fadeBackground)}}},1307:function(t,e){t.exports=function(l,p,c){this.activateSurvey=function(t,e,r,n,a,i,o){var s=c.walkthruSurveyActivator.surveyRepeat.key+t.TutorialId,u={tutorialId:t.Id,eventSource:e,callback:i,stepIndex:o,lastStepIndex:t.Steps.length-1,surveyPlayGUID:p._currentPlayGUID};l.activateSurvey(n,s,a,r,u)}}},1308:function(t,e){t.exports=function(r,n,a,i,o,s){var t=this;function u(t,e){var r=e.wt;null!=r.Id&&n.safeStartAudit(t,r)}t.auditSafeStartStatus=u,t.redirect=function(t,e){i.currentStep=0,i.state=r.WALKTHRU_STATE.WAITING_FOR_REDIRECT,i.currentWalkthru=e.tutorialIndex,o.storeStateInCookie(),a.redirect(t)},t.auditStayButtonClicked=function(t){u(r.SAFESTART_ACTION.StayClicked,t)},t.auditSafeStartDisabled=function(t){var e={tutorialId:t.wt.TutorialId,tutorialName:t.wt.Name,playGuid:n._currentPlayGUID,playInitiator:n._currentPlayInitiator,status:r.SAFESTART_ACTION.ErrorShown};s.send(e)},t.auditSafeStartFirstStatus=function(t,e){u(t,e),function(t){for(var e=0;e<t.checkStepExistsTrace.length;e++)n.auditStep(t.wt,t.wt.Steps[t.checkStepExistsTrace[e].stepIndex],t.checkStepExistsTrace[e].stepStatus)}(e)}}},1309:function(t,e){t.exports=function(a,i,o){this.migrateSiteConfigData=function(t){for(var e=a.getWalkthrus(),r={},n=0;n<e.length;n++)o.fixSteps(e[n],t),r[e[n].TutorialId]={siteConfig:t,isPackageHidden:_walkmeInternals.ctx.get("LibInitializer").isNextDataPackageIsHidden()};i.setMember("tutorialRunSettingsMap",r)}}},1310:function(t,e){t.exports=function(r,n,a,t,i,o){var e=this;e.register=function(){t.registerDataAppender(e)},e.append=function(t,e){i.isNewLanguage()&&r.setWalkthrus([]);(function(t){var e=r.getWalkthrus();e=e.concat(t),r.setWalkthrus(e),i.isNewLanguage()&&o.setDeployables(r.getWalkthrus())})(e[a.Tutorial]),n.migrateSiteConfigData(t.SiteConfig)}}},1311:function(t,e){t.exports=function(g,T,h,f,E,t){var e=this;e.register=function(){t.registerConverter(e)},e.convert=function(t,e){for(var r=h.get(0).getAll(),n={},a=0;a<r.length;a++)for(var i=r[a].Steps,o=0;o<i.length;o++){var s=i[o];if(T.isActionStep(s)){var u=f.getSettingsValue(s.Settings,"action",null);if(u&&"setWalkMeData"==u.actionType){var l=u.arguments,p=l.dataKey;if(t[p]){var c=l.dataDuration;if(c>=g.ONE_DAY_SECONDS)if(n[p])c>n[p].Expiry&&(n[p].Expiry=c);else{var d=t[p];if(void 0!==d){var S={Value:d,Expiry:c};n[p]=S}}}}}}for(var p in n)n.hasOwnProperty(p)&&E.saveData(p,n[p].Value,parseInt(n[p].Expiry),e)}}},1312:function(t,e){t.exports=function(r,n,a,t,e){function i(t,e){e.isDuringLanguageChange?r.stopTutorial(void 0,!0,!0):(e.isDestroyingAll&&(r.setMember("tutorialRunSettingsMap",{}),r.setMember("executeTutorialNextStepNotFinished",!1)),a.closePopup(),n.releaseAllEventBindings(),r.cleanCurrentStepResources())}this.init=function(){t.on(e.EVENTS.CallReleaseElementsFromBalloons,i)}}},1313:function(t,e){t.exports=function(n,t){var a,e=this;function r(t,e,r){n.isPopupStep(e)&&(a=document.activeElement,r.Balloon.find(".walkme-custom-balloon-title").focus())}function i(t,e){n.isPopupStep(e)&&a&&(a.focus(),a=null)}e.register=function(){t.register(e)},e.bindEvents=function(){_walkmeInternals.bind("NewStepShown",r),_walkmeInternals.bind("StepCompleted",i),_walkmeInternals.bind("TutorialStopped",i)}}},1314:function(t,e){t.exports=function(n){this.append=function(t){var e=n.getCurrentWalkthru();if(e){t.WalkthruId=e.TutorialId;var r=n.getCurrentStep();r&&(t.StepIndex=r.StepIndex)}}}},1315:function(t,e){t.exports=function(t,r){this.init=function(){wmjQuery.each(t.get(),function(t,e){e.addAppender(r)})}}},1316:function(t,e){t.exports=function(i,o,s,u){this.handle=function(t,e){if(o.isInPlayMode()){var r={step:t.Steps[e],tutorial:t};i.raiseEvent("WalkthruFailedToStart",r)}else{var n=u.getSiteConfigByTutorialId(t.Id),a=s.getSettingsValue(t.Settings,"cantPlayAlert",n.TutorialCantPlayText);_walkmeInternals.ctx.get("WalkthruPopupNotificationsService").showFailedToStartPopup(n,a,t)}}}},1317:function(t,e){t.exports=function(n,t,r,i,a,o,s,u,l,p,c,d,S,g,e,T,h,f,E,I,k){this.register=function(){n.addActions(_)};var _={playWt:function(r,n,a){function t(){try{var t=r.playWtFromBeginning?0:u.getStepIndex(r.StepId,r.wtId);if(-1==t){var e=I.formatString("Step with id: {0} was not found in walkthru with id {1}",r.StepId,r.wtId);T.customerLog(e)}else WalkMeAPI.startWalkthruById({id:parseInt(r.wtId),fromStep:t,playInitiator:{type:n,objectId:a.Id}})}catch(t){e=I.formatString("Failed starting walkthru with id {0}, starting from step {1}. Exception is: {2}",r.wtId,r.StepId,k.toJSON(t));T.customerLog(e)}}this.isValid=function(){return!0},this.Type=i.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){E.afterStepsLoaded(r.wtId,t)}},redirect:function(e){this.isValid=function(){return!0},this.Type=i.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){d.stepWasCompleted();var t=e.redirectUrl;s.redirect(t)||(d.stepWasCompleted(),d.executeTutorialNextStep())}},refresh:function(){this.isValid=function(){return!0},this.doAction=function(){d.stepWasCompleted(),c.storeStateInCookie(),e.libSetTimeout(function(){location.reload(!0)},200)},this.Type=i.DEPLOYABLE_ACTION_TYPES.Action},branchWt:function(r,t,n){this.Type=i.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return t=r.wtId,!!l.getWalkthruById(t);var t},this.doAction=function(){var t,e=r.wtId;1==r.returnToWt?(t=u.getStepIndex(r.StepId,n.TutorialId),S.makeSplit([e],t,!1,r.startingStepId)):S.makeSplit([e],t,!0,r.startingStepId)},this.getGoToData=function(){return{tutorialIndex:l.getWalkthruIndexByWalkthruId(r.wtId),stepIndex:0}}},stopWt:function(){this.type="stopWt",this.Type=i.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return!0},this.doAction=function(){d.stepWasCompleted(),t.stopTutorial()}},playStep:function(r,t,n){this.Type=i.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return t=r.StepId,e=n.TutorialId,-1!=u.getStepIndex(t,e);var t,e},this.doAction=function(){var t=r.StepId,e=u.getStepIndex(t,n.TutorialId);d.stepWasCompleted(),p.currentStep<e&&d.fillMissingStepAudits(p.currentWalkthru,p.currentStep+1,e,i.STEP_STATUS.SkippedByActionStep),p.currentStep=e,d.executeCurrentStep()},this.getGoToData=function(){var t=r.StepId,e=u.getStepIndex(t,n.TutorialId);return{tutorialIndex:l.getWalkthruIndexByWalkthruId(n.TutorialId),stepIndex:e}}},openPlayerMenu:function(t,e,r){this.isValid=function(){return null!=window.WalkMePlayerAPI},this.Type=i.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){try{d.stepWasCompleted(),n.get("openMenu",t,e,r).doAction()}catch(t){T.error(t,"Failed opening player menu")}d.executeTutorialNextStep()}},waitForCond:function(a){this.Type=i.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return!0},this.doAction=function(){p.state=i.WALKTHRU_STATE.WAITING_FOR_CONDITION,c.storeStateInCookie();var e=p.getCurrentStep(),t={evaluationPollingIntervalMs:500,featureName:A,elementName:"Wait for condition step: "+e.StepTitle},r=h.createOld(t),n=a.condition;r.onValueChanged(function(t){g.isDebuggerOnWindow()&&o.deprecatedRaiseEvent(i.EVENTS.ActionConditionEvaluated,e),t&&(d.stepWasCompleted(),d.executeTutorialNextStep())}),r.evaluateAsync(n),d.addCurrentStepResource(r)}},delay:function(t){this.isValid=function(){return!0},this.doAction=function(){return c.storeStateInCookie(),e.playSetTimeout(function(){d.stepWasCompleted(),d.executeTutorialNextStep()},1e3*t.duration),!0},this.Type=i.DEPLOYABLE_ACTION_TYPES.Action},passOwnership:function(t,e,r){this.isValid=function(){return!0},this.Type=i.DEPLOYABLE_ACTION_TYPES.Action;var n={stepId:r.Id,tutorialId:r.TutorialId};this.doAction=function(){var t=a.keysConfig.passOwnership.newWindowTime;if(a.saveData(t.key,(new Date).getTime(),t.expiry),!f.get().enabled())return T.customerLog("Reached pass ownership step but the feature is not supported, the next step will not be executed."),void d.tutorialFinished();f.get().determineOwnership(n)}},setWalkMeData:function(e){this.isValid=function(){return!0},this.doAction=function(){var t=Math.min(e.dataDuration,i.COOKIE_LIFE_2_YEARS);r.saveData(e.dataKey,e.dataValue,t),d.stepWasCompleted(),d.executeTutorialNextStep()},this.Type=i.DEPLOYABLE_ACTION_TYPES.Action}},A="superstep"}},1318:function(t,e){t.exports=function(r,n,a){var i;this.redirect=function(t,e){return!!r.canRedirect(t,e)&&(a.storeStateInCookie(),i=n.libSetTimeout(function(){r.redirect(t)},200),!r.isUrlDifferentFromCurrentOnlyInHash(t))},this.canRedirect=function(t,e){return r.canRedirect(t,e)&&!r.isUrlDifferentFromCurrentOnlyInHash(t)},this.clearRedirectTimer=function(){i&&i.clear()}}},1319:function(t,e){t.exports=function(k,i,t,_,A,e,m,C,v,W,y,P,o,N,s,n,u,x,R,l,w){var L=this;L.getDelay=function(){var t=e.get();return t.Settings.keyPressedNextStepDelay?t.Settings.keyPressedNextStepDelay:r};var r=2e3,a=[];function O(t,n,e,r,a){var i=void 0;a&&(i=function(t){var e,r=n.Settings.complexHtml;return(e="option"==t.target.tagName.toLowerCase()?t.target:t.target.options[t.target.selectedIndex]).value==r.val||e.text==r.txt});var o={change:i};r.push(U(t,n,["change"],e,1e3,o))}function U(t,e,n,a,i,r){P.state=v.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT;for(var o=M(function(t,e){_.customerLog("Step event triggered.");var r=-1!==wmjQuery.inArray("click",n);return D(a,i,r,t,e),!0}),s=0;s<n.length;s++){var u=function(e){return function(t){e&&!e(t)||o(t)}}(r&&r[n[s]]);b(t,n[s]+".mt",u)}return function(t){return o(null,t)}}function M(n){var a=!1;return function(t,e){var r;return a||(r=n(t,e),a=!0),r}}function b(t,e,r){n.bind(t,e,r),a.push({element:t,eventName:e})}function D(t,e,r,n,a){s.releaseBalloons(),r&&(i.shouldHandlePageAsFramesets()&&i.checkIfAnyFrameIsUnloaded(e),null!=n&&l.setIgnoreNextBeforeUnload(function(t){if(u.isIE()){var e=!1;if("a"==t[0].nodeName.toLowerCase())e=t;else{var r=t.parents("a");0<r.length&&(e=mtjQuery(r[0]))}if(e&&e.attr("href")&&0==e.attr("href").indexOf("javascript:"))return!0}return!1}(mtjQuery(n.target)))),P.state=v.WALKTHRU_STATE.RUNNING,o.storeStateInCookie(),y.stepWasCompleted(null==a),null!=a&&(P.currentStep=a),t&&null==a?y.tutorialFinished():k.playSetTimeout(function(){y.executeTutorialNextStep()},e)}L.handle=function(t,e,r,n,a,i){var o=P.getStep(r),s=!1,u=!!o.LinkedTutorialIds,l=[];if(u){var p=o.LinkedTutorialIds.split(";");y.isTutorialIdsExist(p)?(_.customerLog("This is a branched step. Branched walk-thru's: "+o.LinkedTutorialIds),l.push(function(t,e,r){P.state=v.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT,y.releaseEvents(t,e);for(var n=M(function(){_.customerLog("Clicked the branched walk-thru."),y.releaseEvents(t,e),N.makeSplit(r)}),a=M(function(){y.releaseEvents(t,e)}),i=0;i<e.length;i++)b(t,e[i]+".mt",n);return function(){return a()}}(t,["click","mousedown"],p))):(_.customerLog("Branch walk-thru id, not found: "+o.LinkedTutorialIds),u=!1)}var c,d=!1,S=!1,g=y.getNextStepIncludingSplit(),T=null==g;if(y.isStepTrigger(o.End,v.WALKTHRU_STEP_TRIGGER.NEXT_BUTTON)&&(P.state=v.WALKTHRU_STATE.WAITING_FOR_NEXT_BUTTON_CLICK,T?S=!0:(g.IsSkippable||R.getSettingsValue(g.Settings,"skipNotExists",!1)||y.getPlayConditionMode(g)!=v.playConditionModes.STICKY_CONDITION&&!y.checkPlayStepCondition(g)||R.getSettingsValue(g.Settings,"fake",!1))&&-2==y.checkIfStepExistsWithSkippables(g.TutorialIndex,g.StepIndex,void 0,void 0,void 0,v.CHECK_STEP_MODE.Normal)?S=!0:d=!0),y.isStepTrigger(o.End,v.WALKTHRU_STEP_TRIGGER.NOTHING))T||(s=!0);else if(y.isStepTrigger(o.End,v.WALKTHRU_STEP_TRIGGER.HOVER))c=["mouseenter"],l.push(U(t,e,c,T,500));else if(y.isStepTrigger(o.End,v.WALKTHRU_STEP_TRIGGER.CLICK)&&!u)c=W.get(),l.push(U(t,e,c,T,1e3));else if(y.isStepTrigger(o.End,v.WALKTHRU_STEP_TRIGGER.KEY_PRESSED)){var h=L.getDelay(e);c=["keydown","paste","change"];var f={};if(A.isFeatureEnabled("wmAccessibility")){f.keydown=function(t){return 9!=t.which&&16!=t.which}}l.push(U(t,e,c,T,h,f))}else y.isStepTrigger(o.End,v.WALKTHRU_STEP_TRIGGER.PAGE_CHANGED)?(P.state=v.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE,y.setMember("dontContinueTutorial",!0)):y.isStepTrigger(o.End,v.WALKTHRU_STEP_TRIGGER.DURATION)?o.durationHandler=k.playSetTimeout(function(){y.stepWasCompleted(),y.executeTutorialNextStep()},1e3*o.Duration):y.isStepTrigger(o.End,v.WALKTHRU_STEP_TRIGGER.SELECT_ANY)?O(t,e,T,l,!1):y.isStepTrigger(o.End,v.WALKTHRU_STEP_TRIGGER.SELECT_VALUE)?O(t,e,T,l,!0):y.isStepTrigger(o.End,v.WALKTHRU_STEP_TRIGGER.SWIPE)&&(c=["swipe"],l.push(U(t,e,c,T,500)));if(o.Settings.additionalTriggers){C.deprecatedRaiseEvent(v.EVENTS.Walkthrus.StepAdditionalTriggerSet,o);var E={elementName:e.StepTitle||e.StepText,evaluationPollingIntervalMs:500,onlyPollConditionFunctions:!0,ownerChain:i},I=x.createOld(E);I.onValueChanged(function(t){if(C.deprecatedRaiseEvent(v.EVENTS.Walkthrus.StepAdditionalTriggersInitialized,o),t){y.setMember("dontContinueTutorial",!1),o.durationHandler&&(o.durationHandler.clear(),o.durationHandler=null);var e=m.containsFuncName(o.Settings.additionalTriggers,["ElementClicked"]);D(T,1e3,e)}}),I.evaluateAsync(o.Settings.additionalTriggers),y.addCurrentStepResource(I)}return{executeNextStep:s,clearElementEventsFuncs:l,buttons:{nextButton:d,doneButton:S,backButtonStepIndex:w.handleStepIndex(o,a,n)}}},L.releaseAllEventBindings=function(){for(var t=0;t<a.length;t++)try{var e=a[t].element,r=a[t].eventName;n.unbind(e,r)}catch(t){}a.length=0},function(){}.apply(null,arguments)}},1320:function(t,e){t.exports=function(i,o,s,u){this.handleStepIndex=function(t,e,r){var n;if(0<t.StepIndex&&i.isStepTrigger(t.End,o.WALKTHRU_STEP_TRIGGER.NEXT_BUTTON)&&!function(t){if(null==t)return!1;var e=s.getStep(t);return u.isActionStep(e)}(e)){if(0<=(n=i.checkIfStepExistsWithSkippables(r,t.StepIndex-1,0,-1,void 0,o.CHECK_STEP_MODE.Normal))){var a=s.getStep(n);i.isStepTrigger(a.End,o.WALKTHRU_STEP_TRIGGER.NEXT_BUTTON)||(n=-1)}s.lastBackButtonStepIndex=n}return n}}},1321:function(t,e){t.exports=function(t,n,a){this.findFirstStep=function(t,e,r){return e=e||0,a.checkIfStepExistsWithSkippables(t,e,void 0,void 0,r,n.CHECK_STEP_MODE.Normal)},function(){}.apply(null,arguments)}},1322:function(t,e){t.exports=function(n,a,i,t,e){function r(t,e){var r=n.mapBbcodeInitiator(e);a.deprecatedRaiseEvent("switchToWalkthru",t),i.afterStepsLoaded(t,function(){WalkMeAPI.startWalkthruById({id:t,fromStep:0,playInitiator:r})})}this.register=function(){t.add({linkSelector:".walkme-action-start-wt",idDataKey:"data-walkthru-id",clickEvent:e.EVENTS.BBCodeStartActionClicked.Walkthru,activator:r})}}},1323:function(t,e){t.exports=function(i,t,o,s,u){function e(t,e){if(-1==t&&i.getCurrentWalkthru()){o.stop();var r=u.SURVEY_START_EVENTS.BbCodeClicked,n=i.getCurrentWalkthru(),a=n.Settings.survey&&n.Settings.survey.surveyId;_walkmeInternals.ctx.get("WalkthruSurveyActivator").activateSurvey(n,r,s.mapBbcodeInitiator(e),a,"always")}}this.register=function(){t.add({linkSelector:".walkme-action-start-survey",idDataKey:"data-survey-id",clickEvent:u.EVENTS.BBCodeStartActionClicked.Survey,activator:e})}}},1324:function(t,e){t.exports=function(e,t){this.isEnabled=function(t){return e.isPopupStep(t)},this.findElement=function(){return t.get()}}},1325:function(t,e){t.exports=function(e){this.isEnabled=function(t){return e.isActionStep(t)},this.findElement=function(t){return _walkmeInternals.ctx.get("WalkthrusModule").getAction(t).isValid()}}},1326:function(t,e,r){(function(w){t.exports=function(t,e,r,n,a,i,o,s,u,l,p,c,d,S,g,T,h,f,E,I,k,_,A,m,C,v){var W,y,P,N;function x(){R(y)}function R(t){wmjQuery.each(t,function(t,e){e.register()})}this.init=function(){R(W),C.one(A.EVENTS.DATA_FILES_LOADED,x)},this.postDataFileLoaded=x,P=w.get("AutoStartHelper"),N=w.get("AutoStartTypes"),W=[r],(y=[n,e,i,u,d,S,I,k,w.get("WalkthruActionClickedEventBinder")]).push({register:function(){_walkmeInternals.ctx.get("DeployablesManagerFactory").add(A.DEPLOYABLE_TYPE.Tutorial,_walkmeInternals.ctx.get("TutorialsManager"))}}),y.push({register:function(){a.fixAnchorTagsOnBeforeUnload()}}),y.push({register:function(){s.addStopper({stop:function(){o.stopTutorial(!1,!0)}})}}),y.push({register:function(){l.init()}}),y.push({register:function(){_walkmeInternals.ctx.get("TutorialsManager").setDeployables(_walkmeInternals.ctx.get("WalkthrusContainer").getWalkthrus())}}),y.push({register:function(){N.addDeployable(p.Tutorial,c,p.BusinessSolution)}}),y.push({register:function(){E.register(h),E.register(f)}}),y.push({register:function(){T.addRestorer("wt",g,!0)}}),y.push({register:function(){_walkmeInternals.ctx.get("WalkthruEventsInitializer").init()}}),y.push({register:function(){wmjQuery.extend(t,_walkmeInternals.ctx.get("WalkthruLegacyExternalApi")),window.WalkMeAPI&&wmjQuery.extend(window.WalkMeAPI,_walkmeInternals.ctx.get("WalkthruApi"))}}),y.push({register:function(){_.addOwnershipManager(A.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru,m,!0)}}),y.push({register:function(){P.addAutoStartHelper(v,p.Tutorial)}})}}).call(this,r(2))},1327:function(t,e){t.exports=function(n,a,i,o,s,u,l,p,c,d,t,e,r,S,g,T){var h,f=this;function E(t){var e=g.getCurrent()==a.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru,r=e?g.getCurrentStepData():function(){var t=T.getData(a.PASS_OWNERSHIP.PASS_OWNERSHIP_COOKIE,void 0,c.getUserGuid());if(t)return{walkthruId:t.tutorialId,step:p.getStepByWalkthruAndStepIds(t.tutorialId,t.stepId)}}(),n=o.evaluateOwnership(r.step,r.walkthruId,e);return e||t||function(t){switch(t){case a.PASS_OWNERSHIP.EvaluateOwnership.Owner:i.stepWasCompleted(),i.executeTutorialNextStep();break;case a.PASS_OWNERSHIP.EvaluateOwnership.NotOwner:!function(){u.state!=a.WALKTHRU_STATE.PASSING_OWNERSHIP&&u.currentStep++;u.state=a.WALKTHRU_STATE.PASSING_OWNERSHIP,l.storeStateInCookie()}()}}(n),n}f.walkthruStarted=function(t,e){return g.wrap(a.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru,function(t,e){var r=s.getWalkthruByIndex(t);return{walkthruId:r.Id,step:r.Steps[e]}}(t,e),function(){return function(t,e){var r=n.get().optimizedDetermineOwnership();r||(u.state=a.WALKTHRU_STATE.WAITING_FOR_OWNERSHIP,u.currentWalkthru=t,u.currentStep=e,l.storeStateInCookie(),i.terminateTutorial(),u.state=a.WALKTHRU_STATE.NOT_RUNNING,n.get().reset());return r}(t,e)})},f.evaluateOwnership=function(t,e){if(e)return g.wrap(a.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru,e,function(){return E(t)});return E(t)},f.evaluateOwnershipByPeeking=function(){return(r.isFeatureEnabled("po_peek")||r.isFeatureEnabled("passOwnership"))&&o.isPassOwnershipStep(e.peekNextCookieStep())},f.gainedOwnership=function(t,e,r){h("walkthru is gaining ownership with state "+u.state,3),r&&function(t,e){t?(_walkmeInternals.ctx.get("WalkthrusModule").setMember("dontContinueTutorial",!1),S.resumeTimeoutsArray("playTimeouts")):(h("ownership granted to: "+e,3),d.restoreStateFromCookie(c.getUserGuid()))}(t,e)},f.lostOwnership=function(){_walkmeInternals.ctx.get("WalkthrusModule").terminateTutorial()},h=t.wrapCustomerLog(a.PASS_OWNERSHIP.LOG_FEATURE)}},1328:function(t,e){t.exports=function(i,o,s,u){this.peekNextCookieStep=function(t){try{t=t||0;var e=i.getData(o.STORAGE_KEYS.WALKTHRU_PERSISTENCE_DATA,{},u.getAllUserGuids()[0]),r=e[o.WALKTHRU_PERSISTANCE_DATA_FIELDS.CURRENT_TUTORIAL_COOKIE_NAME],n=s.getWalkthruById(r),a=e[o.WALKTHRU_PERSISTANCE_DATA_FIELDS.CURRENT_STEP_COOKIE_NAME];return n.Steps[a+t]}catch(t){return null}}}},1329:function(t,e){t.exports=function(n){function a(t){return t&&t.Settings&&t.Settings.action&&t.Settings.action.actionType==n.STEP_ACTION.PassOwnership}this.isPassOwnershipStep=a,this.evaluateOwnership=function(t,e,r){return r&&!a(t)?n.PASS_OWNERSHIP.EvaluateOwnership.CantBeDetermined:function(t,e){{if(null===t)return _walkmeInternals.ctx.get("WalkthruStepsLoader").LoadStepsForWT(e),!1;try{return _makeTutorial.evaluateConditionTree(t.Settings.action.arguments.condition)}catch(t){return!0}}}(t,e)?n.PASS_OWNERSHIP.EvaluateOwnership.Owner:n.PASS_OWNERSHIP.EvaluateOwnership.NotOwner}}},1330:function(t,e){t.exports=function(n,s,u,l,p){var c,d;this.clearCache=function(){c=void 0,d=void 0},this.checkShouldAutoStart=function(t,e,r){return t!=n.Tutorial||function(t,e){var r=s.getWalkthruIndexByWalkthruId(t.Id),n=u.checkTutorialSkipFirstStepCondition(r),a=u.checkTutorialRedirectCondition(r,!1),i=t.IsWelcomeStep,o=function(){c=c||l.get();return c}();return!(o.state==p.WALKTHRU_STATE.RUNNING&&o.step==n)&&function(t,e){return null==d?d=t.state==p.WALKTHRU_STATE.PAUSED||t.state==p.WALKTHRU_STATE.NOT_RUNNING||!e&&u.checkIfStepExistsWithSkippables(t.tutorial,t.step,void 0,void 0,void 0,p.CHECK_STEP_MODE.Sandbox,"- Engagement")<0:d}(o,e)&&(a&&i||u.checkIfStepExistsWithSkippables(r,n,void 0,void 0,void 0,p.CHECK_STEP_MODE.Sandbox,"- Check if Exists with Skippables")>=n&&!a)}(e,r)}}},1331:function(t,e){t.exports=function(e,r,n){this.get=function(){var t=e.getPersistenceData();n.state==r.WALKTHRU_STATE.PAUSED&&(t.state=n.state);return t}}},1332:function(t,e){t.exports=function(e,r,n){this.isRunning=function(){var t=e.get();return!(t.state==n.WALKTHRU_STATE.PAUSED||t.state==n.WALKTHRU_STATE.NOT_RUNNING||r.checkIfStepExistsWithSkippables(t.tutorial,t.step,void 0,void 0,void 0,n.CHECK_STEP_MODE.Sandbox,"- Engagement")<0)?wmjQuery.when():wmjQuery.Deferred().reject()}}},1333:function(t,e){t.exports=function(r,n){this.fixAnchorTagsOnBeforeUnload=function(){if(r.isIE()){var t=mtjQuery("a[href^='javascript:']"),e="click.walkme.ignoreUnload";t.off(e),t.on(e,function(){n.setIgnoreNextBeforeUnload(!0)})}}}},1334:function(t,e){t.exports=function(a,i,t){function e(t){t=parseInt(t);for(var e=a.stepPlayHistory,r=0;r<e.length;r++){var n=i.getStepById(e[r]);if(n&&n.StepIndex==t)return!0}return!1}this.register=function(){t.addSupportedFunction("isStepPlayed",e)}}},1335:function(t,e){t.exports=function(s,r,u,l,o,i,p){this.register=function(){wmjQuery.each(t,function(t,e){r.register(t,e.handler,e.params)})};var t={};function n(t,e){for(var r=parseInt(e.funcArgs.StepId),n=i.stepPlayHistory,a=0;a<n.length;a++)if(n[a]==r)return void t.setValue(!0);t.setValue(!1)}function e(t,e){E(n,t,e)}function a(t,e){for(var r=parseInt(e.funcArgs.StepId,10),n=0;n<i.stepCompletedHistory.length;n++)if(i.stepCompletedHistory[n]==r)return void t.setValue(!0);t.setValue(!1)}function c(t,e){E(a,t,e)}function d(t,e){var r=parseInt(e.funcArgs.StepId),n=parseInt(e.funcArgs.TutorialId),a=u.getWalkthruById(n),i=l.getStepIndex(r,n);if(a&&-1<i){var o=a.Steps[i];t.setValue(!1!==s.findElement(o,!1))}else t.setValue(!1)}function S(t,e){E(d,t,e)}function g(t,e){var r=parseInt(e.funcArgs.StepId),n=parseInt(e.funcArgs.TutorialId),a=u.getWalkthruIndexByWalkthruId(n),i=l.getStepIndex(r,n);if(-1<i&&-1<a&&0<=o.checkIfStepExistsWithSkippables(a,i,void 0,void 0,void 0,p.CHECK_STEP_MODE.Sandbox))return void t.setValue(!0);t.setValue(!1)}function T(t,e){E(g,t,e)}function h(t,e){var r=parseInt(e.funcArgs.StepId),n=parseInt(e.funcArgs.TutorialId),a=u.getWalkthruById(n),i=l.getStepIndex(r,n);if(a&&-1<i){var o=a.Steps[i];t.setValue(!1!==s.findElement(o,!0))}else t.setValue(!1)}function f(t,e){E(h,t,e)}function E(t,e,r){t(e,r),e.setValue(!e.getValue())}t.StepPlayed={handler:n},t.StepNotPlayed={handler:e},t.StepCompleted={handler:a},t.StepNotCompleted={handler:c},t.StepExists={handler:d,params:{editorPreview:!0}},t.StepNotExists={handler:S,params:{editorPreview:!0}},t.StepCanPlay={handler:g},t.StepCannotPlay={handler:T},t.StepIsVisible={handler:h,params:{editorPreview:!0}},t.StepIsNotVisible={handler:f,params:{editorPreview:!0}}}},1336:function(t,e){t.exports=function(o,s,u){this.auditWalkthruStart=function(t,e,r,n,a){var i=t.Steps;s.postEvent(s.EVENT_TYPES.Play,{type:s.getEventAppByDeployable(o.Tutorial),oId:t.TutorialId,oName:t.Name,pId:a||-1,pInit:u.map(e),oRequestedSubObject:i[r].Id,oActualSubObject:i[n].Id})},function(){}.apply(null,arguments)}},1337:function(t,e){t.exports=function(a,i,o,s,n,u,l,p,c,e){var d,S=this;S.safeStartAudit=function(t,e){try{var r={tutorialId:e.TutorialId,tutorialName:e.Name,playGuid:S._currentPlayGUID,playInitiator:S._currentPlayInitiator,status:t};n.send(r)}catch(t){a.error(t)}},S.auditStep=function(e,r,n){!function(t,e){if(t!=i.STEP_STATUS.SkippedByActionStep){var r=t==i.STEP_STATUS.SkippedStartedFromBiggerStep?i.EVENTS.Walkthrus.NewSkippedStep:i.EVENTS.Walkthrus.CheckNewStep;c.deprecatedRaiseEvent(r,e)}}(n,r);var t=e.Steps.length;if(r.TutorialId<0)return void d(o.formatString("Audit steps manager - Step with id {0} has negative tutorial id ({1})",r.Id,r.TutorialId),3);try{try{return function(t,e,r,n){var a=l.getSettingsValue(t.Settings,"action","");return s.postEvent(s.EVENT_TYPES.Play,{type:s.EVENT_APPS.Step,oId:t.Id,oName:t.StepTitle||"",aType:function(t){return t?u.map(t.actionType):""}(a),aAppType:function(t){return t?p.map(t.actionType):""}(a),oType:t.Type,indx:t.StepIndex+1,owId:e.TutorialId,owName:e.Name,owType:s.EVENT_APPS.Walkthru,total:r,status:n,pId:S._currentPlayGUID})}(r,e,t,n)}catch(t){return a.error(t,"Failed auditStep: stepId="+r.Id+", wtId="+e.TutorialId+", status="+n+", pId="+S._currentPlayGUID),!0}}catch(t){return a.error(t),t}},this._currentPlayGUID="",this._currentPlayInitiator=null,this.createPlayGuidIfNeeded=function(t){null!=S._currentPlayGUID&&0!=S._currentPlayGUID.length||(S._currentPlayGUID=e.generateNewPlayGuid(t))},function(){d=a.wrapCustomerLog(i.LOG_FEATURES.AUDIT_STEPS)}.apply(null,arguments)}},1338:function(t,e){t.exports=function(t,e,r,n){this.register=function(){t.add(r.ENTITY_TYPE.step,e.EVENT_SENDER_EVENT_APPS.Step,function(){return n._currentPlayGUID})}}},1339:function(t,e){t.exports=function(n,a){this.calculate=function(t,e){var r=void 0;r=t.Type===a.stepType.Simple?function(t){return function(t){return-1<wmjQuery.inArray(a.stepTrigger.Button.toString(),t.split(","))}(t.End)?{next:!0}:{}}(t):function(t){var e=t.Settings&&t.Settings.popupStepButtons||[],r={};return n.foreach(e,function(t){var e=i[t.action];r[e]=!0}),r}(t);e&&wmjQuery.extend(r,function(t){var e={};0<t.passedVisibleSteps&&(e.back=!0);t.passedVisibleSteps<t.totalVisibleSteps&&(e.next=!0);void 0!==t.passedVisibleSteps&&t.passedVisibleSteps===t.totalVisibleSteps&&(e.done=!0);return e}(e));return r};var t,i={};t=a.POPUP_BUTTON_ACTIONS,i[t.NextDone]="next",i[t.Start]="start",i[t.Back]="back",i[t.Cancel]="cancel"}},1340:function(t,e,r){(function(k){t.exports=function(u,l,p,c,d,S,g,T,h,f,E,I){this.showStep=function(t,e,r){var n=p.secureEvalJSON(t);c.fixStep(n,0,T.get());var a=l.findElement(n);if(u.customerLog("element:",5),u.customerLog(a,5),!a)return!1;var i,o=d.getComplexHtmlElements(n,a);o&&(a=o.elements,i=o.parentElement);!function(t){return!(t.DesignTemplateId||t.DesignTemplatePlaceholderConfigs&&0!==t.DesignTemplatePlaceholderConfigs.length)}(n)||(n.DesignTemplatePlaceholderConfigs=E.createPlaceHolderConfigs(I.templateEntityType.balloon,n.StepTitle,n.StepText));var s=k.create("Balloon",{element:a,parentElement:i,forceEmbedBalloonInIframe:e,positionHelper:S,stepSettings:n.Settings,visibilityFilter:S.getVisibleFilterKey(n),text:{title:n.StepTitle,content:n.StepText,subText:function(t){if(!t||!t.hasOwnProperty("passedVisibleSteps"))return"";var e=T.get().StepsInfoText;return e?e=(e=e.replace("{0}",t.passedVisibleSteps)).replace("{1}",t.totalVisibleSteps):""}(r)},position:n.Position,data:{stepId:n.Id,type:n.Type},buttons:f.calculate(n,r),configuration:n.Configuration,logger:u,drawer:g.getBalloonDrawer(n.Configuration,n),isViewStep:!0,siteConfig:T.get(),bindButtonsFunc:k.get("BalloonButtonsEventsBinder").attachBalloonXButtonClickEvent,placeholderConfigurations:n.DesignTemplatePlaceholderConfigs});return h.add(s),s.Show(!0,function(){s.SetTimeoutOn()}),s}}}).call(this,r(2))}}])}();