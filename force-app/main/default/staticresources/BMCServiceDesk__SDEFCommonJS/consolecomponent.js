var NONPRINT="Â¬";var NEW_SEPARATOR_PREFIX=String.fromCharCode(182)+String.fromCharCode(2365)+String.fromCharCode(1240);var NONPRINT_NEW=NEW_SEPARATOR_PREFIX+NONPRINT;var focusOnSearchFilterbox;var isColumnReordered=false;var hasActivityFeedPermission;var isLoggedInUserAdmin;var isColumnCustomisationWindowOpen=false;var isMultiPageLayoutEnabledForCurrentModule=false;var winY=250;var sequence=1;var columnMap=[];var columsSortingMax=5;var maxHeight;var maxWidth;var mapKeys;var userPref={};if(_ServerVariables&&_ServerVariables.InitRecords&&_ServerVariables.InitRecords.result){_ServerVariables.InitRecords.result=JSON.parse((Ext.htmlDecode(_ServerVariables.InitRecords.result)))}if(_ServerVariables&&_ServerVariables.userPref){userPref=JSON.parse((Ext.htmlDecode(_ServerVariables.userPref)))}function getUrlParameter(d){d=d.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c="[\\?&]"+d+"=([^&#]*)";var b=new RegExp(c);var a=b.exec(window.location.href);if(a==null){return""}else{return a[1]}}Ext.override(Ext.selection.CheckboxModel,{onRowMouseDown:function(b,a,g,d,h){var f=this,c=h.getTarget("."+Ext.baseCSSPrefix+"grid-row-checker"),j;if(!f.allowRightMouseSelection(h)){return}if(f.checkOnly&&!c){return}if(c){j=f.getSelectionMode();if(j!=="SINGLE"){f.setSelectionMode("SIMPLE")}f.selectWithEvent(a,h);f.setSelectionMode(j)}else{f.selectWithEvent(a,h)}},onLastFocusChanged:function(b,a){this.fireEvent("focuschange",this,b,a)}});if(typeof(console)=="undefined"||console==null){console={};console.log=function(){}}if(isServiceCloudConsole!="true"&&isRFConsoleDetailForm!="true"){GridState={PageSize:0,TotalPages:0,CurrentPage:1,TotalRecords:0,ViewFilterID:"",SortBy:"Name",SortDirection:"DESC",SearchStr:"",Start:0,End:0,Limit_Exceeds:0};if(_ServerVariables.ObjectName!="My_Dashboard"){GridState.PageSize=_ServerVariables.DefaultPageSize;GridState.CurrentPage=1;GridState.TotalRecords=_ServerVariables.InitRecords.ResultSize;GridState.Limit_Exceeds=_ServerVariables.InitRecords.BeyondMaxLimit;GridState.TotalPages=Math.ceil(GridState.TotalRecords/GridState.PageSize);GridState.SearchStr=getUrlParameter("searchstr");GridState.Start=(GridState.CurrentPage*GridState.PageSize)-(GridState.PageSize-1);GridState.End=GridState.CurrentPage*GridState.PageSize;if(GridState.End>GridState.TotalRecords){GridState.End=GridState.TotalRecords}}}var IsCheckboxSelection=false;var pageUrl=document.location.href.split("apex/");var refreshTimer=12345;var btickerAndListviewPanel="";var waitTabMsgBar="";var isRFConsoleList=false;var isRFChatAllowed=false;var mainPanel;var ObjectPrefixMap=new Array();var ObjectIDMap={};var ListViewPicklist;var agentStatusPicklist;if(typeof(isServiceRequest)=="undefined"){var isServiceRequest=false}if(typeof(currentWindowContext)=="undefined"){var currentWindowContext=this}function createMainPanel(a){var b=Ext.get("console_content");mainPanel=Ext.create("Ext.Panel",{width:"100%",height:a.height,border:false,width:a.width,split:true,layout:{type:"border"},renderTo:b})}function dynamicSortLayoutTypes(e,c){if(e.isDefault){return -1}else{if(c.isDefault){return 1}}var d=e.layoutName.toUpperCase();var f=c.layoutName.toUpperCase();if(d<f){return -1}if(d>f){return 1}return 0}function bindEvent(c,a,b){if(c.addEventListener){c.addEventListener(a,b,false)}else{if(c.attachEvent){c.attachEvent("on"+a,b)}}}function calculateNewImageSize(c,a){maxWidth=Math.floor(parent.window.innerWidth>0?parent.window.innerWidth*0.9:900);maxHeight=Math.floor(parent.window.innerHeight>0?parent.window.innerHeight*0.8:500);if(c&&c<maxWidth){maxWidth=c}else{if(c>0&&a>0&&a>maxHeight){var b=Math.ceil(maxHeight*c/a);var d=a;if(b>maxWidth){d=maxWidth*a/c;b=d*c/a;maxWidth=Math.ceil(b);maxHeight=Math.ceil(d)}}}if(a&&a<maxHeight){maxHeight=a}else{if(a>0&&c>0){var d=Math.ceil(maxWidth*a/c);var b=c;if(d>maxHeight){b=maxHeight*c/a;d=b*a/c;maxHeight=Math.ceil(d);maxWidth=Math.ceil(b)}}}}function showpopup(c){calculateNewImageSize(c.width,c.height);var b=(parent.window.innerHeight-maxHeight-66)>0?(parent.window.innerHeight-maxHeight-66)/2:0;var d='<div style="margin-top: '+b+'px" ><img src="'+c.src+'" width="'+maxWidth+'px" height="'+maxHeight+'px"/></div>';var a=new parent.Ext.Window({id:"imagePreview",width:parent.window.innerWidth,height:parent.window.innerHeight,header:false,border:false,html:d,bodyStyle:"border:none; background-color:rgba(0,0,0,.8);text-align:center;",autoScroll:true,floating:{shadow:false},style:"padding: 0; border: 0 transparent; background-color:transparent; ",modal:true,constrain:false,renderTo:parent.Ext.getBody(),resizable:false,layout:"fit",autoShow:true,tbar:Ext.create("Ext.toolbar.Toolbar",{renderTo:Ext.getBody(),style:" border: 0 transparent;",baseCls:"bmc-toolbar",border:false,layout:{type:"hbox"},items:[{xtype:"toolbar",border:false,baseCls:"bmc-toolbar",flex:1,style:"border: 0 transparent;",items:["->",{text:"X",xtype:"button",border:false,baseCls:"image-close",disabledCls:"image-close-disabled",focusCls:"image-close-focus",overCls:"image-close-over",pressedCls:"image-close-pressed",listeners:{click:function(){this.up(".window").close();window.parent.document.body.style.overflow="scroll"}}}]}]})});window.parent.document.body.style.overflow="hidden"}bindEvent(window,"message",function(a){if(a.data!=null&&a.data.title=="imagePriview"&&a.data.src){showpopup(a.data)}});Ext.onReady(function(){removeConflictingCSS();Ext.QuickTips.init();if(typeof(isRfConsole)!="undefined"&&isRfConsole!="undefined"&&isRfConsole){isRFConsoleList=isRfConsole}else{isRFConsoleList=false}if(typeof(isRFChatEnabled)!="undefined"&&isRFChatEnabled!="undefined"&&isRFChatEnabled&&isRFConsoleList){isRFChatAllowed=isRFChatEnabled}else{isRFChatAllowed=false}var d=getRenderSize();var e=Ext.get("console_content");var c=d.height;var f=d.width;if(isRFConsoleList){if(calledFromConsoleListViewPage==false){if(MultiPageLayout.isEnabled){MultiPageLayout.isEnabledForIN=isMultiPageLayoutEnabledForModule("in");MultiPageLayout.isEnabledForTS=isMultiPageLayoutEnabledForModule("ts");MultiPageLayout.isEnabledForCR=isMultiPageLayoutEnabledForModule("cr");for(var a in MultiPageLayout.details){var g=MultiPageLayout.details[a];if(g.length>2){g.sort(dynamicSortLayoutTypes)}}}getActionItemIndexMap();getObjectPrefixMap();if(objectNameParam!=null&&objectNameParam!="undefined"&&objectNameParam.trim()!=""){if(!_RFServerValues.incViewState&&!_RFServerValues.tsViewState&&!_RFServerValues.prViewState&&!_RFServerValues.crViewState&&!_RFServerValues.rmViewState){loadeOnlyRecord=true}}setTimeout(function(){FetchBroadcast({broadcastInfo:"true"})},1000)}if(loadeOnlyRecord){createTabPanelWithoutItem(c,f);if(recordId!=null&&typeof(recordId)!="undefined"&&recordId!=""){setTimeout(function(){var n=_ServerVariables.ObjectName;document.cookie="apex__LastRFConsoleView="+n+";path=/;SameSite=None;Secure;expires="+getRFCookieExpiry().toUTCString();if(objectNameParam!=null&&objectNameParam!="undefined"&&objectNameParam.trim()!=""){n=objectNameParam}currentWindowContext.addTab(recordId,"New",n)},1000)}}else{if(isOnlyConsoleDashboardEnabled){currentWindowContext.pinnedObject();currentWindowContext.viewModuleList();createTabPanelWithoutItem(c,f);currentWindowContext.loaddashboard(false)}else{createMainPanel(d);if(calledFromConsoleListViewPage==false){createTabPanel(c,f)}var m=getSingleConsoleListviewPanel(c,f);mainPanel.add(m);var b=true;if(_ServerVariables.ObjectName=="Incident__c"&&getUrlParameter("searchstr")!=""){b=false}if(recordId!=null&&typeof(recordId)!="undefined"&&recordId!=""&&b){setTimeout(function(){var n=_ServerVariables.ObjectName;document.cookie="apex__LastRFConsoleView="+n+";path=/;SameSite=None;Secure;expires="+getRFCookieExpiry().toUTCString();if(objectNameParam!=null&&objectNameParam!="undefined"&&objectNameParam.trim()!=""){n=objectNameParam}if(isCloneRequest=="true"){currentWindowContext.addTab(recordId,"",n,true)}else{currentWindowContext.addTab(recordId,"New",n,false)}},3000)}}}if(!isOnlyConsoleDashboardEnabled){resetAutoRefresh()}applyCustomIncidentHighlightsColor()}else{createMainPanel(d);if(isServiceCloudConsole!="true"&&isRFConsoleDetailForm!="true"){var j=getBtickerAndListviewPanel(c,f);mainPanel.add(j)}var h=getDViewPanel(c,f);mainPanel.add(h);mainPanel.doLayout()}if(!isRFConsoleList){if(isRFConsoleDetailForm!="true"){getObjectPrefixMap()}if(isServiceCloudConsole=="true"||isRFConsoleDetailForm=="true"){if(recordId!=null&&recordId!=""){if(recordId=="new"){recordId=null}LoadRecord_Abs(recordId)}else{LoadRecord_Abs(null,"")}setTimeout(function(){FetchBroadcast({broadcastInfo:"false",richTextInfo:getModulesForRtf()})},1000)}else{setTimeout(function(){resizePanels()},500);setTimeout(function(){resizeOnSidebarCollapse()},500);Ext.getCmp("NorthPanel").splitter.getEl().dom.title=_ServerLabels.Maximize;if(recordId!=null&&recordId!=""){if(recordId=="new"){recordId=null}LoadRecord_Abs(recordId)}else{setTimeout(function(){CollapseDetailPanel()},100)}setTimeout(function(){FetchBroadcast({broadcastInfo:"true",richTextInfo:"sr,in,ts,pr,cr,rm,br"})},5000);resetAutoRefresh()}}else{if(!loadeOnlyRecord){var k=setInterval(function(){if(document.readyState=="complete"){resizePanels();if(_ServerVariables.ObjectName!="My_Dashboard"){alignSearchFilterBox()}clearInterval(k)}},300);setTimeout(function(){resizeOnSidebarCollapse()},500)}}setSFHeader();changeFonSizetForRTLDirection();setTimeout(function(){fetchAddtionalData()},2000)});function changeFonSizetForRTLDirection(){if(document.getElementsByTagName("html")[0].getAttribute("dir")=="rtl"){Ext.getCmp("ListViewNewButton").btnInnerEl.setStyle("font-size","14px");Ext.getCmp("ListViewDeleteButton").btnInnerEl.setStyle("font-size","14px");Ext.getCmp("ListViewChangeOwnerButton").btnInnerEl.setStyle("font-size","14px");Ext.getCmp("linktobroadcostButton").btnInnerEl.setStyle("font-size","14px");Ext.getCmp("masseditButton").btnInnerEl.setStyle("font-size","14px")}}function collisionRedirect(a){var b=window.open(changeCollisionsPageURL+"&CurrentChangeID="+a.id,"ChangeCollisions","status = 1,height = 600, width = 1100,left=150,top=50, resizable = 1,scrollbars=yes");if(b.focus){b.focus()}return false}function getSingleConsoleListviewPanel(a,b){var c;if(_ServerVariables.ObjectName!="My_Dashboard"){c=getGridView()}else{c=getDashboardView(a,b)}btickerAndListviewPanel=Ext.create("Ext.Panel",{xtype:"panel",region:"center",border:false,height:a,width:b,preventHeader:true,id:"NorthPanel",title:_ServerVariables.ObjectName!="My_Dashboard"?_ServerVariables.ObjectMetadata.LabelPlural:SingleConsolePage.Labels.MyDashboard,layout:{type:"anchor"},items:[c]});btickerAndListviewPanel.add(c);return btickerAndListviewPanel}function getBtickerAndListviewPanel(a,b){var c=getGridView();btickerAndListviewPanel=Ext.create("Ext.Panel",{xtype:"panel",region:"north",height:a,width:b,preventHeader:true,id:"NorthPanel",title:_ServerVariables.ObjectMetadata.LabelPlural,collapseDirection:Ext.Component.DIRECTION_BOTTOM,listeners:{collapse:function(){Ext.getCmp("NorthPanel").splitter.getEl().dom.title=_ServerLabels.Restore},expand:function(){Ext.getCmp("NorthPanel").splitter.getEl().dom.title=_ServerLabels.Maximize}},layout:{type:"anchor"},collapsible:true,split:true,collapseMode:"header",items:[c]});return btickerAndListviewPanel}function getDViewPanel(b,c){var a=getDetailViewPanel_Abs();var d=Ext.create("Ext.Panel",{xtype:"panel",region:"center",border:false,layout:{type:"anchor"},width:c,items:a,collapseDirection:Ext.Component.DIRECTION_BOTTOM,animCollapse:true});return d}function CollapseDetailPanel(){var c=Ext.getCmp("NorthPanel");var a=c.splitter.getEl();a.hide();var b=getRenderSize();c.setHeight(b.height);c.isResized=false}function showBroadcast(){var b=broadcastPage+"?fromSS=true&fromconsole=true&fromRFconsole=false";var a;if(Ext.isIE||Ext.isSafari){a=305}else{a=300}broadcastWindow=new Ext.Window({height:a,title:broadcastLabel,width:650,pageX:12,pageY:100,resizable:false,modal:true,constrain:true,viewConfig:{forceFit:true},html:'<iframe src ="'+b+'" style="width:100%;height:100%;border:none"/>'});broadcastWindow.show()}function onBounceHandler(a){if(!Ext.isIE){a.behavior="scroll";a.direction="right";a.direction="left"}}function isCJKChar(c){var b=/[\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf]/;var a=b.test(c);return(a)}var originalSearchStr="";function SearchClicked(f,c){var d=document.getElementById("SearchField");var g=false;if(f){d.value="";if(typeof(GridState.ViewFilterID)!="undefined"&&GridState.ViewFilterID!=null){ListViewPicklist.setValue(GridState.ViewFilterID)}}if(c&&typeof(clearAllActiveFilters)=="function"){g=clearAllActiveFilters();if(isMultiColumnSortingEnabled){updateUserPrefJson()}if(typeof(ChangeFilterIcon)=="function"){ChangeFilterIcon()}}var b=d.value;b=b.trim();originalSearchStr=b;var e=RemoveReserveCharactersForSOSL(b);if(e.length<2&&!f&&!isCJKChar(e)&&!c){var h=new currentWindowContext.Ext.Window({modal:false,closeAction:false,closable:false,cls:"warningCls",header:false,frameHeader:false,frame:false,shadow:false,border:false,draggable:false,resizable:false,floatable:false,id:"searchWrngMsg",html:'<div class="d-notification d-notification_warning d-notification_content"> <div class="d-notification__icon d-icon-left-exclamation_circle"></div> <div class="d-notification__supporting-text"> <h3 class="d-notification__title">'+_ServerLabels.Warning+'</h3> <p class="d-notification__item">'+_ServerLabels.InsufficientSearchChars+'</p> </div> <a href="#" onclick="Ext.getCmp(\'searchWrngMsg\').close();" class="d-notification__close d-icon-left-cross" d-ripple></a> </div>'});h.show();setTimeout(function(){h.close()},9000);h.alignTo(currentWindowContext.Ext.get("rf-ticker"),"t-b",[0,0]);return}var a=ValidateReserveCharactersForSOSL(b);if(a!=null&&a!=undefined&&a!="undefined"){b=a}if((b!=GridState.SearchStr&&!c)||g){GridState.SearchStr=b;GetPageRecords_Remote()}}function getDetailViewPanel_Abs(){if(typeof(getDetailViewPanel)!="undefined"){return getDetailViewPanel()}return Ext.create("Ext.Panel",{border:false,width:"100%",height:100,anchor:"0 0",html:'<b>Detail view here</b><br/><iframe src="about:blank" height="100%" width="100%" ></iframe>'})}function ChangeListViewFilter(b,d){GridState.ViewFilterID=b;GridState.CurrentPage=1;var c=document.getElementById("SearchField");c.value="";GridState.SearchStr="";focusOnSearchFilterbox=false;var a=_ServerVariables.ObjectName;if(isServiceRequest&&isRFConsoleList){a+="_SR"}document.cookie="apex__"+a+"_ListFilterID="+b+";path=/;SameSite=None;Secure;expires="+getRFCookieExpiry().toUTCString();if(typeof(clearAllActiveFilters)=="function"){clearAllActiveFilters()}if(isMultiColumnSortingEnabled){FilterJSON=getFilterJSONbyFilterId(GridState.ViewFilterID);if(FilterJSON){applyStoredFilters()}}GetPageRecords_Remote();if(currentWindowContext.isConsoleMetricBarEnabled&&!d){currentWindowContext.selectedCard="";currentWindowContext.setActiveCard("undefined")}}function ChangeListViewPageRecords(b){GridState.PageSize=b;GridState.CurrentPage=1;var a=_ServerVariables.ObjectName;if(isServiceRequest&&isRFConsoleList){a=a+"_SR"}document.cookie="apex__"+a+"_ListPageSize="+b+";path=/;SameSite=None;Secure;expires="+getRFCookieExpiry().toUTCString();GetPageRecords_Remote()}function encodeDecodeValuesOnFirstPageRender(e){var m=null;var f=null;for(var g=0;g<e.length;g++){f=e[g];var k=false;for(var d in _ServerVariables.ColumnsMap){k=false;m=_ServerVariables.ColumnsMap[d];var c=f[d];if(c){if(m.type.toLowerCase()=="date"){var b=Ext.Date.parse(c,"c");if(typeof(b)!="undefined"&&b!=null){f[d]=Ext.Date.format(b,"time")}}else{if(m.type.toLowerCase()=="datetime"){var b=Ext.Date.parse(c,"c");if(typeof(b)!="undefined"&&b!=null){var j=b.getTimezoneOffset();var a=b.getTime();if(_ServerVariables.InitRecords.offsetMap.hasOwnProperty(a)){var h=new Date(a+_ServerVariables.InitRecords.offsetMap[a]+j*60000);f[d]=Ext.Date.format(h,"time")}}}else{if(m.type.toLowerCase()=="textarea"||m.type.toLowerCase()=="string"){if(m.isHTMLFormatted){if(!m.isCalculated){k=true;f[d]=stripOffHTML(c)}}else{c=decodeSpecialChar(c);c=replaceSFJsonEncodeChar(c);f[d]=(c)}}}}c=f[d];if(typeof(c)=="string"&&!k){if(!(m.isHTMLFormatted&&m.isCalculated)){f[d]=Ext.htmlEncode(c)}}}else{if(m&&m.type&&m.type.toLowerCase()=="reference"){if(d&&f[d.split(".")[0]]){var c=f[d.split(".")[0]][d.split(".")[1]];if(c){f[d.split(".")[0]][d.split(".")[1]]=Ext.htmlEncode(c)}}}}}}if(GridState.SortBy==undefined||GridState.SortBy==null||GridState.SortBy==""){GridState.SortBy="Name";GridState.SortDirection="DESC"}return e}function openRecordTab(g,f,d,c,e){var b=!IsCheckboxSelection;IsCheckboxSelection=false;if(!b){return}if(isRFConsoleList){var h=_ServerVariables.ObjectName;if(_ServerVariables.ObjectName!=null&&_ServerVariables.ObjectName!=""&&typeof(_ServerVariables.ObjectName)!="undefined"&&_ServerVariables.ObjectName=="Incident__c"){if(d!=""&&d!=null&&typeof(d)!="undefined"&&(d==true||d=="true")){currentWindowContext.addTab(g,f,currentWindowContext.isIncidentFromChat?"Incident__c":h,false,"","","ServiceRequest")}else{currentWindowContext.addTab(g,f,currentWindowContext.isIncidentFromChat?"Incident__c":h,false,"","","Incident",c,e)}}else{currentWindowContext.addTab(g,f,currentWindowContext.isIncidentFromChat?"Incident__c":h,"","","","",c,e)}currentWindowContext.isIncidentFromChat=false}else{if(_ServerVariables.ObjectName!=null&&_ServerVariables.ObjectName!=""&&typeof(_ServerVariables.ObjectName)!="undefined"&&_ServerVariables.ObjectName=="Incident__c"){LoadRecord_Abs(g,f,d)}else{LoadRecord_Abs(g,f)}var a=Ext.each(Ext.query(".x-men"),function(j){j.className=j.className.replace(" x-men","")})}}function changeNameToLink(c,d,b){var a="";if(isRFConsoleList&&MultiPageLayout.isEnabled&&isMultiPageLayoutEnabledForCurrentModule&&(_ServerVariables.ObjectName)&&typeof(_ServerVariables.ObjectName)!="undefined"&&(_ServerVariables.ObjectName=="Incident__c"||_ServerVariables.ObjectName=="Task__c"||_ServerVariables.ObjectName=="Change_Request__c")){if(typeof(b.raw[CurrentNamespacePrefix+"RF_FKLayout__r"][CurrentNamespacePrefix+"LayoutKey__c"])!="undefined"&&typeof(b.raw[CurrentNamespacePrefix+"RF_FKLayout__c"])!="undefined"){a=b.raw[CurrentNamespacePrefix+"RF_FKLayout__r"][CurrentNamespacePrefix+"LayoutKey__c"]+NONPRINT+b.raw[CurrentNamespacePrefix+"RF_FKLayout__c"];if(typeof(b.raw[CurrentNamespacePrefix+"RF_FKLayout__r"]["Name"])){MultiPageLayout.layoutNameMap[b.data.id]=b.raw[CurrentNamespacePrefix+"RF_FKLayout__r"]["Name"]}}}if((_ServerVariables.ObjectName)&&typeof(_ServerVariables.ObjectName)!="undefined"&&_ServerVariables.ObjectName=="Incident__c"){return Ext.String.format('<a id="'+b.data.Id+"\" href=\"#\" class=\"bmc-grid-name-cell\" onclick=\"openRecordTab('{1}','{0}','{2}','{3}','{4}')\">{0}</a>",c,b.data.Id,b.get(CurrentNamespacePrefix+"isServiceRequest__c"),a)}else{if((_ServerVariables.ObjectName)&&typeof(_ServerVariables.ObjectName)!="undefined"&&(_ServerVariables.ObjectName=="Task__c"||_ServerVariables.ObjectName=="Change_Request__c")){return Ext.String.format('<a id="'+b.data.Id+"\" href=\"#\" class=\"bmc-grid-name-cell\" onclick=\"openRecordTab('{1}','{0}','','{2}','{3}')\">{0}</a>",c,b.data.Id,a)}else{return Ext.String.format('<a id="'+b.data.Id+'" href="#" class="bmc-grid-name-cell" onclick="openRecordTab(\'{1}\',\'{0}\')">{0}</a>',c,b.data.Id)}}}function renderHasAttachments(b,c,a){if(b&&b!="null"&&b!=""&&b!="0"){return Ext.String.format('<a href="#" class="bmc-grid-name-cell"  style="display:inherit;text-decoration: none;width:15px;"><span   onmouseover="showAttachmentTooltip(this,event,\''+a.data.Id+"','"+a.data.Name+'\')" id="'+a.data.Id+'_clip" class="d-icon-paperclip attachment-icon" style="font-size:15px;"/></a>',b,a.data.Id)}else{return""}}function renderCollisionPopup(b,c,a){if(b!="null"&&b.indexOf("/apex/"+CurrentNamespacePrefix+"ConsoleRedirect")!=-1){if(_ServerVariables.ObjectName!=null&&_ServerVariables.ObjectName!=""&&typeof(_ServerVariables.ObjectName)!="undefined"&&_ServerVariables.ObjectName=="Change_Request__c"){return Ext.String.format('<a href="#" class="bmc-grid-name-cell" onclick="return collisionRedirect('+a.data.Id+');"><img  src="/resource/'+CurrentNamespacePrefix+'SDEFStyles/SDEFbuttons/status-16-warning-ro.png" /></a>',b,a.data.Id)}}}function changeNumberFormatUserLocale(c,d,a){var e=_ServerVariables.localeDecimalSeparator;var b=_ServerVariables.enableLocaleNumberFormat;if(c&&b){c=c.toString();if(c!=""){c=c.replace(".",e)}}return c}function returnLabel(a,b){if(!isRFHotkeysDisabled){if(b=="N"){return a+" (Ctrl+Alt+N)"}else{if(b=="S"){return a+" (Ctrl+Alt+S)"}else{if(b=="A"){return a+" (Ctrl+Alt+A)"}else{if(b=="T"){return a+" (Ctrl+Alt+T)"}else{if(b=="0"){return a+" (Ctrl+Alt+0)"}}}}}}else{return a}}var url=document.URL;function openEditView(c){var a="/apex/"+nsprifix+"ApprovalWindow?closetab=true";var b="/ui/list/FilterEditPage?id="+c.name+"&retURL="+a+"&cancelURL="+a;window.open(b)}function getDashboardView(a,b){createChatStatusWindow();try{if(currentWindowContext.isConsoleMetricBarEnabled&&!currentWindowContext.consoleMetricCardLoded){currentWindowContext.activeListViewId="undefined"}}catch(c){}return{id:"ConsoleDashboard",closable:false,height:a-60,width:b,preventHeader:true,html:'<iframe src ="'+consoleDashboardPageURL+'" style="width:100%;height:100%;border:none" id="dashboardframe" name="dashboardframe" scrolling="yes"/>',title:SingleConsolePage.Labels.MyDashboard,tooltip:SingleConsolePage.Labels.MyDashboard,recordValue:"ConsoleDashboard"}}function createChatStatusWindow(){var a=new Array();var k="";var c="";var n=_ServerVariables.ChatStatusOptions;var e="";if(isRFChatAllowed){for(s in _ServerVariables.ChatStatusOptions){if(s!="ChatStatus"){a.push({id:s,name:n[s]})}else{e=n[s]}}c=e;for(it in _ServerVariables.ChatStatusOptions){if(it!="ChatStatus"&&it==e){e=n[it];break}}}var d=e;var m=false;if(isRFChatAllowed){var o=document.getElementById("staffChatStatus");o.style.height="";o.style.display="block";var j=document.createElement("a");j.setAttribute("class","chat-icon");j.setAttribute("style","float:left;");var h=document.createElement("a");h.setAttribute("class","down-arrow");h.setAttribute("id","chatStatusArrowIcon");h.setAttribute("title",_ServerLabels.ChatStatus);h.setAttribute("style","float:right;");var b=document.createElement("div");b.setAttribute("class","chatStatusTitle");b.setAttribute("id","chatStatusTitle");var g=document.createTextNode(d);b.appendChild(j);b.appendChild(g);b.appendChild(h);o.appendChild(b);if(c.toLowerCase()=="available"){updateBackground("chatStatusTitleGreen")}else{if(c.toLowerCase()=="busy"){updateBackground("chatStatusTitleRed")}else{if(c.toLowerCase()=="offline"){updateBackground("chatStatusTitleGrey")}}}makeAgentAvailable(c);var f=Ext.create("Ext.menu.Menu",{floating:true,cls:"menu",width:"123px",id:"statusMenu",items:[{text:a[1].name,id:a[1].id,cls:"menuRedItemIcon"},{text:a[0].name,id:a[0].id,cls:"menuGreyItemIcon"},{text:a[2].name,id:a[2].id,cls:"menuGreenItemIcon"}],listeners:{mouseleave:{element:"el",fn:function(){m=false}},beforeshow:function(){d=document.getElementById("chatStatusTitle").firstChild.nextSibling.nodeValue},click:function(p,q){var r=q.getId();if(d==r){return}var t=document.getElementById("chatWindow");if(t&&t.style.display=="block"&&d.toLowerCase()=="busy"){Ext.Msg.baseCls="bmc-message";Ext.Msg.show({msg:staffStatusChangeWarning,buttons:Ext.Msg.OK,buttonText:{ok:oklbl},title:remedyforceChatLabel,width:500,icon:Ext.Msg.WARNING})}else{if(r.toLowerCase()=="offline"){updateBackground("chatStatusTitleGrey")}else{if(r.toLowerCase()=="available"){updateBackground("chatStatusTitleGreen")}else{if(r.toLowerCase()=="busy"){updateBackground("chatStatusTitleRed")}}}replacetextNode(r);makeAgentAvailable(r)}},afterrender:function(p){Ext.get(this.id).set({title:_ServerLabels.ChatStatusHelpText})}}});Ext.get("staffChatStatus").on("click",function(p,q){if(m){f.hide();m=!m}else{p.stopEvent();f.show();m=!m;f.alignTo(Ext.get("staffChatStatus"))}})}}function getGridView(F){try{if(_ServerVariables&&currentWindowContext.isConsoleMetricBarEnabled&&!currentWindowContext.consoleMetricCardLoded){if(_ServerVariables.InitRecords.FilterId){currentWindowContext.activeListViewId=_ServerVariables.InitRecords.FilterId}}}catch(Q){}var P="";if(typeof(clearAllActiveFilters)=="function"){clearAllActiveFilters()}if((_ServerVariables.ObjectName=="Incident__c"&&GridState.SearchStr!="")){P=getUrlParameter("searchstr")}var b=[];var g=[];var E=_ServerVariables.ColumnsMap;var G=_ServerVariables.ColumnsOrderedList;var u=G[G.length-1];var K=new Array();var S="";var j=_ServerVariables.ListViewOptions;var z=getRenderSize();for(l in _ServerVariables.ListViewOptions){K.push({filterid:l,name:j[l]})}S=_ServerVariables.InitRecords.InitFilterID;GridState.ViewFilterID=S;var I=Ext.create("Ext.data.Store",{fields:["filterid","name"],data:K,sorters:[{property:"name",transform:function(e){return e.toLowerCase()}}]});var f=false;var v=false;var x=false;var w=false;if(_ServerVariables&&_ServerVariables.ObjectName!=null&&_ServerVariables.ObjectName=="Projected_Service_Outage__c"){f=true;v=true;x=true;w=true}ListViewPicklist=Ext.create("Ext.form.ComboBox",{store:I,id:"ListViewId",queryMode:"local",displayField:"name",hidden:x,getDisplayValue:function(){if(this.displayTplData!=null&&this.displayTplData.length>0){return Ext.String.htmlDecode(this.displayTplData[0].name)}},valueField:"filterid",editable:false,forceSelection:true,typeAhead:true,width:(z&&z.width)?parseInt(z.width*0.22):300,triggerCls:"d-icon-triangle_down",cls:"ComboBoxClass",listConfig:{getInnerTpl:function(){var e="/apex/"+nsprifix+"ApprovalWindow?closetab=true";var T="";if(calledFromConsoleListViewPage&&userLanguage&&userLanguage=="iw"){T='<div id="ListName-{filterid}"><div style="text-align:right;width:95%">{name}</div><div style="position: absolute;top:4px;left:20px;" id="ListIcon-{filterid}"><a id="ListEditlink-{filterid}" name="{filterid}" <tpl if="filterid!=\'CreateNewView\'">onclick="openEditView(this);"</tpl> target="_blank" style="cursor:pointer;text-decoration:none;"><span <tpl if="filterid==\'CreateNewView\'">class="d-icon-plus"<tpl else>class="d-icon-pencil"</tpl> style="font-size:14px;color:black;" alt="'+Editlabel+'" title="'+Editlabel+'"/></a></div><div>'}else{T='<div id="ListName-{filterid}"><div style="display:table-cell;width:95%">{name}</div><div style="display:table-cell;" id="ListIcon-{filterid}"><a id="ListEditlink-{filterid}" name="{filterid}" <tpl if="filterid!=\'CreateNewView\'">onclick="openEditView(this);"</tpl> target="_blank" style="cursor:pointer;text-decoration:none;"><span <tpl if="filterid==\'CreateNewView\'">class="d-icon-plus"<tpl else>class="d-icon-pencil"</tpl> style="font-size:14px;color:black;" alt="'+Editlabel+'" title="'+Editlabel+'"/></a></div><div>'}return T}},listeners:{render:function(e){Ext.get(this.id).set({title:_ServerLabels.ConsoleSelectView})},afterrender:function(){if(P!=""){this.setValue("")}else{this.setValue(S)}ListViewPicklist.store.insert(ListViewPicklist.store.totalCount+1,[{name:CreatenewviewLabel,filterid:"CreateNewView"}])},change:function(W,V,T,U){if(V=="CreateNewView"){ListViewPicklist.setValue(T);var e="/apex/"+nsprifix+"ApprovalWindow?closetab=true";if(currentWindowContext.ObjectIDMap[_ServerVariables.ObjectName]&&currentWindowContext.ObjectIDMap[_ServerVariables.ObjectName]!="null"){window.open("/ui/list/FilterEditPage?ftype="+currentWindowContext.ObjectIDMap[_ServerVariables.ObjectName]+"&retURL="+e+"&cancelURL="+e,"_blank")}else{alert(ListViewError)}}},select:function(V,e,T){var U=e[0].get("filterid");if(U!=null&&U!="CreateNewView"){ChangeListViewFilter(U)}else{if(P!=""){ChangeListViewFilter(U)}}}}});createChatStatusWindow();var R=[{value:10,label:"10"},{value:25,label:"25"},{value:50,label:"50"},{value:100,label:"100"},{value:200,label:"200"}];var k=document.getElementsByTagName("html")[0].getAttribute("dir");for(var O=0;O<G.length;O++){var d=G[O];var C=E[d];var J=true;if(C.type.toLowerCase()=="multipicklist"||(typeof(C.isSortable)!="undefined"&&C.isSortable!=true)){J=false}var p=C.type.toLowerCase().trim();if(p=="datetime"){b.push({type:"date",dateFormat:"time",name:d});g.push({header:C.label,type:"date",flex:1,sortable:J,renderer:Ext.util.Format.dateRenderer(_ServerVariables.ExtUserDateFormat),dataIndex:d,cls:k=="rtl"?"column-header-rtl":""})}else{if(p=="date"){b.push({type:"date",dateFormat:"time",name:d});g.push({header:C.label,type:"date",flex:1,sortable:J,renderer:Ext.util.Format.dateRenderer(_ServerVariables.ExtUserDateOnlyFormat),dataIndex:d,cls:k=="rtl"?"column-header-rtl":""})}else{if(p=="boolean"){b.push(d);var N=('<tpl for="."><img  src="'+imageHelp+'/SDEFicons/checkbox_<tpl if="'+d+'==true">checked</tpl><tpl if="'+d+'==false">unchecked</tpl>.gif" ></tpl>');g.push({text:C.label,xtype:"templatecolumn",tpl:N,dataIndex:d,cls:k=="rtl"?"column-header-rtl":"",sortable:true,flex:0.5})}else{if(d=="Name"||d=="name"){b.push(d);g.push({header:C.label,flex:0.9,dataIndex:d,cls:k=="rtl"?"column-header-rtl":"",sortable:J,tooltipType:"title",tooltip:C.label,renderer:changeNameToLink})}else{if(d==CurrentNamespacePrefix+"Collision__c"){b.push(d);var N=('<tpl for="."></tpl>');g.push({text:C.label,xtype:"templatecolumn",tpl:N,dataIndex:d,cls:k=="rtl"?"column-header-rtl":"",sortable:J,menuDisabled:C.menuDisabled,flex:0.5,renderer:renderCollisionPopup})}else{if(d==CurrentNamespacePrefix+"RF_Attachments__c"){b.push(d);var N=('<tpl for="."></tpl>');g.push({text:'<img width="15" height="15" src="/resource/'+CurrentNamespacePrefix+'SDEFStyles/SDEFicons/paperclip.svg" />',xtype:"templatecolumn",tpl:N,dataIndex:d,cls:k=="rtl"?"column-header-rtl":"",sortable:J,menuDisabled:true,minWidth:k=="rtl"?75:50,flex:0.2,maxWidth:75,tooltipType:"title",tooltip:C.label,renderer:renderHasAttachments})}else{if(p=="percent"||p=="currency"||p=="double"){b.push(d);g.push({header:C.label,flex:0.9,dataIndex:d,cls:k=="rtl"?"column-header-rtl":"",sortable:J,tooltipType:"title",tooltip:C.label,renderer:changeNumberFormatUserLocale})}else{if(p!="hidden"){b.push(d);g.push({header:((d==CurrentNamespacePrefix+"New_Incident__c"||d=="New_Incident__c")&&(_ServerVariables.ObjectName&&_ServerVariables.ObjectName=="Incident__c")&&isRFConsoleList&&isSegregationEnabled&&isServiceRequestTab())?newServiceRequestLabel:C.label,flex:p=="textarea"?3:1,dataIndex:d,cls:k=="rtl"?"column-header-rtl":"",sortable:J,menuDisabled:C.menuDisabled,tooltipType:"title",tooltip:((d==CurrentNamespacePrefix+"New_Incident__c"||d=="New_Incident__c")&&(_ServerVariables.ObjectName&&_ServerVariables.ObjectName=="Incident__c")&&isRFConsoleList&&isSegregationEnabled&&isServiceRequestTab())?newServiceRequestLabel:C.label})}}}}}}}}}if(isMultiColumnSortingEnabled){initializeColumnHeaders(g)}b.push("Id");if(_ServerVariables.ObjectName!=null&&_ServerVariables.ObjectName!=""&&typeof(_ServerVariables.ObjectName)!="undefined"&&_ServerVariables.ObjectName=="Incident__c"){b.push(CurrentNamespacePrefix+"isServiceRequest__c")}var L=_ServerVariables.InitRecords.result;if(!F){L=encodeDecodeValuesOnFirstPageRender(L)}normalizeReferenceData(L);ListViewStore=Ext.create("Ext.data.JsonStore",{fields:b,data:L,proxy:{type:"memory",reader:{idProperty:"Id",type:"json"}}});GridState.PageSize=_ServerVariables.DefaultPageSize;GridState.TotalRecords=_ServerVariables.InitRecords.ResultSize;GridState.Limit_Exceeds=_ServerVariables.InitRecords.BeyondMaxLimit;GridState.TotalPages=Math.ceil(GridState.TotalRecords/GridState.PageSize);GridState.CurrentPage=1;GridState.Start=(GridState.CurrentPage*GridState.PageSize)-(GridState.PageSize-1);GridState.End=GridState.CurrentPage*GridState.PageSize;if(GridState.End>GridState.TotalRecords){GridState.End=GridState.TotalRecords}pagingBar=getPagingToolbar();if(GridState.Limit_Exceeds==false){if(GridState.TotalRecords>9999){pagingBar.displayMsg=_ServerLabels.Records+" "+GridState.Start+" - "+GridState.End+" "+_ServerLabels.LabelOf+" "+GridState.TotalRecords+"+ "}else{pagingBar.displayMsg=_ServerLabels.Records+" "+GridState.Start+" - "+GridState.End+" "+_ServerLabels.LabelOf+" "+GridState.TotalRecords}}else{pagingBar.displayMsg=_ServerLabels.Records+" "+GridState.Start+" - "+GridState.End+" "+_ServerLabels.LabelOf+" "+maxLimitOfRecord}var n;var c=true;if(_ServerVariables.ObjectName=="Incident__c"&&_ServerVariables.ObjectName!=null&&isRFConsoleList){c=false}var H=true;if(Ext.isChrome||Ext.isSafari){H=false}if(navigator.userAgent.toLowerCase().indexOf("firefox")>-1){H=false}var o=0;if(Ext.isIE9){o=27}else{o=10}if(userLanguage=="iw"){g.reverse()}var h=getCurrentModuleName();if(isRFConsoleList){isMultiPageLayoutEnabledForCurrentModule=isMultiPageLayoutEnabledForModule(h)}var m=function(){if(!loadMultiplePageLayoutMenu(h)){LoadRecord_Abs(null,"")}};var t=new Ext.Component({html:'<span class="searchtext-input-wrapper"><a title="'+_ServerLabels.Search+'"class="rf-icon-search" onclick="SearchFieldHandler();" ></a> <input type="text" id="SearchField" class="searchfield-input" autocomplete="off" size="20" placeholder="'+_ServerLabels.Search+'" /><a title="'+_ServerLabels.Reset+'"  class="rf-icon-cross" ></a></span>'});ListViewGrid=Ext.create("Ext.grid.Panel",{anchor:isRFConsoleList?"0 0":"0 -30",id:"listViewGridPanelId",cls:isMultiColumnSortingEnabled?"rf-multi-col-sort-grid":"",dockedItems:[pagingBar,{xtype:"toolbar",dock:"top",height:40,cls:"bmc-grid-tbar",enableOverflow:true,menuTriggerCls:"bmc-tbar-overflow",items:[{xtype:"button",baseCls:"bmc-btn-primary",disabledCls:"bmc-btn-primary-disabled",focusCls:"bmc-btn-primary-focus",overCls:"bmc-btn-primary-over",pressedCls:"bmc-btn-primary-pressed",text:_ServerLabels.New,menu:getPageLayoutMenu(h),arrowCls:"d-icon-angle_down",tooltip:returnLabel(_ServerLabels.New,"N"),id:"ListViewNewButton",disabled:!_ServerVariables.ObjectMetadata.isCreateable,handler:m},{xtype:"tbspacer",width:1},{xtype:"button",text:_ServerLabels.Delete,baseCls:"bmc-btn-small",disabledCls:"bmc-btn-disabled",focusCls:"bmc-btn-focus",overCls:"bmc-btn-over",pressedCls:"bmc-btn-pressed",tooltip:_ServerLabels.Delete,disabled:true,id:"ListViewDeleteButton",handler:function(){var T=ListViewGrid.getSelectionModel().getSelection();var e=_ServerLabels.DeleteConfirmMessage;Ext.Msg.defaultButton="no";if(T.length>1){e=_ServerLabels.MultipleDeleteConfirmMessage}currentWindowContext.Ext.Msg.baseCls="bmc-message";currentWindowContext.Ext.Msg.show({title:_ServerLabels.Delete,msg:e,buttons:Ext.Msg.YESNO,buttonText:{yes:currentWindowContext.SingleConsolePage.Labels.Yes,no:currentWindowContext.SingleConsolePage.Labels.No},icon:Ext.MessageBox.WARNING,fn:function(W){if(W=="yes"){var X=ListViewGrid.getSelectionModel().getSelection();var U=[];for(var V=0;V<X.length;V++){U.push(X[V].data.Id)}DeleteRecords_Remote(U)}}})}},{xtype:"tbspacer",width:0},{xtype:"button",id:"ListViewChangeOwnerButton",baseCls:"bmc-btn-small",disabledCls:"bmc-btn-disabled",focusCls:"bmc-btn-focus",overCls:"bmc-btn-over",pressedCls:"bmc-btn-pressed",text:_ServerLabels.ChangeOwner,tooltip:_ServerLabels.ChangeOwner,disabled:true,hidden:f,menu:getChangeOwnerMenu(),arrowCls:"d-icon-angle_down",handler:function(){var e=Ext.getCmp("changeOwnerMenu");if(k=="rtl"&&e!=undefined){e.items.get(0).textEl.setStyle("font-size","14px");e.items.get(0).textEl.setStyle("margin-right","5px");e.items.get(1).textEl.setStyle("font-size","14px");e.items.get(1).textEl.setStyle("margin-right","5px")}if(!isIncObject()){openChangeOwnerWindow()}}},{xtype:"tbspacer",width:0},{xtype:"button",baseCls:"bmc-btn-small",disabledCls:"bmc-btn-disabled",focusCls:"bmc-btn-focus",overCls:"bmc-btn-over",pressedCls:"bmc-btn-pressed",text:_ServerLabels.linktoBroadcast,tooltip:_ServerLabels.linktoBroadcast,disabled:true,id:"linktobroadcostButton",hidden:c,handler:function(){showLinktoBroadcast()}},{xtype:"tbspacer",width:0,hidden:c},{xtype:"button",text:_ServerLabels.Update,baseCls:"bmc-btn-small",disabledCls:"bmc-btn-disabled",focusCls:"bmc-btn-focus",overCls:"bmc-btn-over",pressedCls:"bmc-btn-pressed",tooltip:_ServerLabels.updatetooltip,disabled:true,hidden:v,id:"masseditButton",handler:function(){openRecordsUpdateWindow()}},{xtype:"tbspacer",width:0,hidden:H},{xtype:"tbseparator",width:0,hidden:w},{xtype:"tbspacer",width:0},ListViewPicklist,{xtype:"tbfill"},t,{xtype:"tbspacer",width:0},{xtype:"button",scale:"small",iconCls:"rf-clear-filter-icon",baseCls:"bmc-btn-search",width:22,id:"clearallfilter",disabled:true,tooltip:_ServerLabels.HasNoFilters,tooltipType:"title",overflowText:_ServerLabels.HasNoFilters,style:{align:"left"},handler:function(){SearchClicked(false,true);Ext.fly("SearchFilter").hide();focusOnSearchFilterbox=false}},{xtype:"tbspacer",width:0,hidden:(!(isConsoleCustomizationEnabled&&isRFConsoleList)||Ext.isIE8||Ext.isIE9||Ext.isIE10)},{xtype:"tbseparator",hidden:(!(isConsoleCustomizationEnabled&&isRFConsoleList)||Ext.isIE8||Ext.isIE9||Ext.isIE10||isServiceCloudConsole=="true")},{xtype:"tbspacer",width:0,hidden:(!(isConsoleCustomizationEnabled&&isRFConsoleList)||Ext.isIE8||Ext.isIE9||Ext.isIE10||isServiceCloudConsole=="true")},{xtype:"button",tooltip:_ServerLabels.CMDBListCustomizationSelect,iconCls:"d-icon-lines",border:false,overflowText:Ext.util.Format.ellipsis(_ServerLabels.SelectAndOrderColumns,25),handler:function(U,W){var T=currentWindowContext.TabPanel.activeTab;var V=currentWindowContext.TabPanel.items.findIndex("id",T.id);if(V!="0"){winY=W.getY()+200}else{winY=W.getY()+10}checkColumnConfig()},autoEl:{style:{border:"0px",padding:"0px !important",background:"none !important","padding-top":"8px !important","font-size":"17px !important"},},hidden:(!(isConsoleCustomizationEnabled&&isRFConsoleList)||Ext.isIE8||Ext.isIE9||Ext.isIE10||isServiceCloudConsole=="true")},{xtype:"tbspacer",width:0},"-",{xtype:"tbspacer",width:0},{xtype:"label",html:'<span class="d-icon-question_circle" style="font-size:19px;color:black;cursor:pointer" title="'+_ServerLabels.Help+'" id="helpConsoleList" onclick="OpenHelppage(\'ConsoleListView\');"></span>'},{xtype:"tbspacer",width:o}]}],border:false,selModel:Ext.create("Ext.selection.CheckboxModel",{checkOnly:true,headerChkBoxEnabled:true,listeners:{beforeselect:function(T,e,U){IsCheckboxSelection=true;if(typeof HideActiveFilterComponent=="function"){HideActiveFilterComponent()}return beforeSelectFn(T,e)},beforedeselect:function(T,e,U){IsCheckboxSelection=true;if(typeof HideActiveFilterComponent=="function"){HideActiveFilterComponent()}}}}),store:ListViewStore,autoScroll:true,columns:g,enableColumnHide:false,autoExpandColumn:u,enableColumnMove:false,viewConfig:{emptyText:'<span class="emptyTextCls">'+_ServerLabels.NoRecordFoundMsg+"</span>",stripeRows:false,getRowClass:function(e,V,U,T){return applyRowStyling(e)},listeners:{beforerefresh:function(e,T){toggleSelectAllCheckbox(true)}}},listeners:{render:function(){checkRecordUpdateButtonSetting()},afterrender:function(){A();if(typeof LoadFilterComponent=="function"){LoadFilterComponent(_ServerVariables.ObjectName)}RenderSearchComponent();if(isMultiColumnSortingEnabled){clearAllActiveFilters();FilterJSON=getFilterJSONbyFilterId(GridState.ViewFilterID);if(FilterJSON){applyStoredFilters()}}},itemclick:function(aa,U,W,Y,e){if(attachmentTooltip){onClickTooltipCheck=true}try{if(((e.target.nodeName=="IMG")&&(e.target.parentElement.nodeName=="A"))||(e.target.nodeName=="A"&&U.data.Id!=e.target.id)){return false}}catch(V){}var X=!IsCheckboxSelection;IsCheckboxSelection=false;if(!X){return}if(isRFConsoleList){if(_ServerVariables.ObjectName!=null&&_ServerVariables.ObjectName!=""&&typeof(_ServerVariables.ObjectName)!="undefined"&&(_ServerVariables.ObjectName=="Incident__c"||_ServerVariables.ObjectName=="Task__c"||_ServerVariables.ObjectName=="Change_Request__c")){var Z="";var T="";if(MultiPageLayout.isEnabled&&isMultiPageLayoutEnabledForCurrentModule&&typeof(U.raw[CurrentNamespacePrefix+"RF_FKLayout__r"][CurrentNamespacePrefix+"LayoutKey__c"])!="undefined"&&typeof(U.raw[CurrentNamespacePrefix+"RF_FKLayout__c"])!="undefined"){Z=U.raw[CurrentNamespacePrefix+"RF_FKLayout__r"][CurrentNamespacePrefix+"LayoutKey__c"]+NONPRINT+U.raw[CurrentNamespacePrefix+"RF_FKLayout__c"];if(typeof(U.raw[CurrentNamespacePrefix+"RF_FKLayout__r"][CurrentNamespacePrefix+"LayoutKey__c"])!="undefined"){T=U.raw[CurrentNamespacePrefix+"RF_FKLayout__r"]["Name"]}}if(_ServerVariables.ObjectName=="Incident__c"){openRecordTab(U.data.Id,U.data.Name,U.get(CurrentNamespacePrefix+"isServiceRequest__c"),Z,T)}else{openRecordTab(U.data.Id,U.data.Name,"",Z,T)}}else{openRecordTab(U.data.Id,U.data.Name)}}else{if(_ServerVariables.ObjectName!=null&&_ServerVariables.ObjectName!=""&&typeof(_ServerVariables.ObjectName)!="undefined"&&_ServerVariables.ObjectName=="Incident__c"){LoadRecord_Abs(U.data.Id,U.data.Name,U.get(CurrentNamespacePrefix+"isServiceRequest__c"))}else{LoadRecord_Abs(U.data.Id,U.data.Name)}}var ab=Ext.each(Ext.query(".x-men"),function(ac){ac.className=ac.className.replace(" x-men","")})},selectionchange:function(U,T){var X=Ext.getCmp("ListViewDeleteButton");var V=Ext.getCmp("linktobroadcostButton");var W=Ext.getCmp("ListViewChangeOwnerButton");var e=Ext.getCmp("masseditButton");if(T.length>0){if(_ServerVariables.ObjectName=="Incident__c"&&_ServerVariables.ObjectName!=null&&_ServerVariables.ObjectMetadata.isUpdateable){V.enable()}if(_ServerVariables.ObjectMetadata.isDeletable){X.enable()}if(_ServerVariables.ObjectMetadata.isUpdateable){W.enable();e.enable()}}else{e.disable();X.disable();W.disable();V.disable()}resetAutoRefresh()},sortchange:function(T,U,V,e){if(typeof HideActiveFilterComponent=="function"){HideActiveFilterComponent()}if(isMultiColumnSortingEnabled){y(T,U,V,e)}else{GridState.SortBy=U.dataIndex;GridState.SortDirection=V;GetPageRecords_Remote()}},columnresize:function(Z,Y){if(isColumnReordered!=true){var e="";for(var V=0;V<ListViewGrid.columns.length;V++){if(ListViewGrid.columns[V].dataIndex!=""){if(ListViewGrid.columns[V].width==undefined){e+="N"}else{e+=parseInt(ListViewGrid.columns[V].width)}if(V!=ListViewGrid.columns.length-1){e+="."}}}var X=_ServerVariables.ObjectName;if(isServiceRequest&&isRFConsoleList){X+="_SR"}var T=checkIsIEBrowser();var U=checkISMSEdge();if(T==true||U==true){document.cookie=X+"_GridState="+e+";path=/;SameSite=None;Secure;expires="+getRFCookieExpiry().toUTCString()}else{document.cookie=X+"_GridState="+e+";path=/apex/RemedyforceConsole;SameSite=None;Secure;expires="+getRFCookieExpiry().toUTCString()}}if(userLanguage=="iw"){var aa=document.getElementById("listViewGridPanelId-body");if(aa!=null){var W=aa.getElementsByTagName("div")[0];if(W){setTimeout(D(W,W.scrollLeft),70)}}}},columnmove:function(){isColumnReordered=true}}});ListViewGrid.headerCt.on("headertriggerclick",function(V,W,X,U,T){if(typeof HeaderTriggerClickHandler=="function"){HeaderTriggerClickHandler(V,W,X,U,T)}return false});function y(Z,T,ae,ac){var Y=(event.ctrlKey||event.metaKey);var ai=T.getIndex();if(Y){if(!columnMap[ai]){if(Object.keys(columnMap).length==columsSortingMax){showLodingMask=false;ListViewStore.sorters.clear();ShowMessageBoxByType(_ServerLabels.lblInformation,_ServerLabels.MaximumColumnSortLimit,"INFO");GetPageRecords_Remote();showLodingMask=true;return}var e={order:ae,tabSequence:sequence,apiName:T.dataIndex};columnMap[ai]=e;sequence++;if(ae=="ASC"){Z.getHeaderAtIndex(ai).setText(Z.getHeaderAtIndex(ai).text+'&nbsp;<div class="triangle-up"></div>')}else{Z.getHeaderAtIndex(ai).setText(Z.getHeaderAtIndex(ai).text+'&nbsp;<div class="triangle-down"></div>')}if(Object.keys(columnMap).length==2){mapKeys=Object.keys(columnMap);for(var U=0;U<mapKeys.length;U++){var X=Z.getHeaderAtIndex(mapKeys[U]).text;var ah=columnMap[mapKeys[U]].order;if(ah=="ASC"){Z.getHeaderAtIndex(mapKeys[U]).setText(X+'<sub class="circle-filled" title="" onmouseover="showSortInfoTooltip(this)" onmouseout="hideSortInfoTooltip()">'+columnMap[mapKeys[U]].tabSequence+"</sub>")}else{Z.getHeaderAtIndex(mapKeys[U]).setText(X+'<sub class="circle-filled" title="" onmouseover="showSortInfoTooltip(this)" onmouseout="hideSortInfoTooltip()">'+columnMap[mapKeys[U]].tabSequence+"</sub>")}}}else{if(Object.keys(columnMap).length>2){if(ae=="ASC"){Z.getHeaderAtIndex(ai).setText(Z.getHeaderAtIndex(ai).text+'<sub class="circle-filled" title="" onmouseover="showSortInfoTooltip(this)" onmouseout="hideSortInfoTooltip()">'+e.tabSequence+"</sub>")}else{Z.getHeaderAtIndex(ai).setText(Z.getHeaderAtIndex(ai).text+'<sub class="circle-filled" title="" onmouseover="showSortInfoTooltip(this)" onmouseout="hideSortInfoTooltip()">'+e.tabSequence+"</sub>")}}}}else{if(columnMap[ai].order=="ASC"){var e=columnMap[ai];e.order="DESC";var X=Z.getHeaderAtIndex(ai).text;Z.getHeaderAtIndex(ai).setText(X.replace("triangle-up","triangle-down"));columnMap[ai]=e}else{if(columnMap[ai].order=="DESC"){if(Object.keys(columnMap).length==1){sequence=1;r(Z);var e={order:"ASC",tabSequence:sequence,apiName:T.dataIndex};columnMap[ai]=e;Z.getHeaderAtIndex(ai).setText(Z.getHeaderAtIndex(ai).text+'&nbsp;<div class="triangle-up"></div>');sequence=2}else{var W=columnMap[ai].tabSequence;var X=Z.getHeaderAtIndex(ai).text;var ab=X.indexOf('&nbsp;<div class="triangle-');X=X.substring(0,ab);Z.getHeaderAtIndex(ai).setText(X);delete columnMap[ai];sequence--;if(Object.keys(columnMap).length==1){mapKeys=Object.keys(columnMap);for(var U=0;U<mapKeys.length;U++){var X=Z.getHeaderAtIndex(mapKeys[U]).text;var ag='<sub class="circle-filled" title="" onmouseover="showSortInfoTooltip(this)" onmouseout="hideSortInfoTooltip()">'+columnMap[mapKeys[U]].tabSequence+"</sub>";X=X.replace(ag,"");columnMap[mapKeys[U]].tabSequence=1;Z.getHeaderAtIndex(mapKeys[U]).setText(X)}}else{mapKeys=Object.keys(columnMap);for(var U=0;U<mapKeys.length;U++){if(columnMap[mapKeys[U]].tabSequence>W){var X=Z.getHeaderAtIndex(mapKeys[U]).text;var ag='<sub class="circle-filled" title="" onmouseover="showSortInfoTooltip(this)" onmouseout="hideSortInfoTooltip()">'+columnMap[mapKeys[U]].tabSequence+"</sub>";columnMap[mapKeys[U]].tabSequence=columnMap[mapKeys[U]].tabSequence-1;var V='<sub class="circle-filled" title="" onmouseover="showSortInfoTooltip(this)" onmouseout="hideSortInfoTooltip()">'+columnMap[mapKeys[U]].tabSequence+"</sub>";X=X.replace(ag,V);Z.getHeaderAtIndex(mapKeys[U]).setText(X)}}}}}}}}else{showMultiSortTipInfo(T,_ServerLabels.MultiColumnSortInfo);if(columnMap[ai]){if(columnMap[ai].order=="DESC"){sequence=1;r(Z);var e={order:"ASC",tabSequence:sequence,apiName:T.dataIndex};columnMap[ai]=e;Z.getHeaderAtIndex(ai).setText(Z.getHeaderAtIndex(ai).text+'&nbsp;<div class="triangle-up"></div>');sequence=2}else{r(Z);var e={order:"DESC",tabSequence:1,apiName:T.dataIndex};columnMap[ai]=e;Z.getHeaderAtIndex(ai).setText(Z.getHeaderAtIndex(ai).text+'&nbsp;<div class="triangle-down"></div>');sequence=2}}else{sequence=1;r(Z);var e={order:ae,tabSequence:sequence,apiName:T.dataIndex};columnMap[ai]=e;if(ae=="ASC"){Z.getHeaderAtIndex(ai).setText(Z.getHeaderAtIndex(ai).text+'&nbsp;<div class="triangle-up"></div>')}else{Z.getHeaderAtIndex(ai).setText(Z.getHeaderAtIndex(ai).text+'&nbsp;<div class="triangle-down"></div>')}sequence++}}var aa=[];mapKeys=Object.keys(columnMap);for(var U=0;U<mapKeys.length;U++){aa[columnMap[mapKeys[U]].tabSequence]=columnMap[mapKeys[U]]}mapKeys=new Array();mapKeys=Object.keys(aa);mapKeys.sort();var af="",ad="";for(var U=0;U<mapKeys.length;U++){af+=aa[mapKeys[U]].apiName+NONPRINT_NEW;ad+=aa[mapKeys[U]].order+NONPRINT_NEW}if(af==""&&ad==""){GridState.SortBy="Name"+NONPRINT_NEW;GridState.SortDirection="DESC"+NONPRINT_NEW}else{GridState.SortBy=af;GridState.SortDirection=ad}GetPageRecords_Remote();ListViewStore.sorters.clear();setSortingCircleTipData(aa)}function r(U){mapKeys=Object.keys(columnMap);for(var T=0;T<mapKeys.length;T++){var e=U.getHeaderAtIndex(mapKeys[T]).text;var V=e.indexOf('&nbsp;<div class="triangle-');e=e.substring(0,V);U.getHeaderAtIndex(mapKeys[T]).setText(e)}columnMap=[]}function D(T,e){if(T){if(typeof e=="undefined"||e===0){e=1}else{e=e-1}T.scrollLeft=e}}function A(){var e=document.getElementById("listViewGridPanelId-body");if(userLanguage=="iw"&&e!=null&&e!=undefined){e.dir="ltr"}else{return}}ListViewGrid.child("[dock=bottom]").add(["->",{text:_ServerLabels.RecordsPerPage,xtype:"label"},Ext.create("Ext.form.ComboBox",{store:Ext.create("Ext.data.Store",{fields:["value","label"],data:R}),queryMode:"local",displayField:"label",valueField:"value",margin:"4 15 4 8",editable:false,forceSelection:true,typeAhead:true,width:60,listeners:{afterrender:function(){this.setValue(_ServerVariables.DefaultPageSize)},change:function(V,U,e,T){if(typeof(e)!="undefined"&&e!=null){ChangeListViewPageRecords(U)}}}})]);ListViewGrid.waitMask=new Ext.LoadMask(ListViewGrid,{floating:{shadow:false},msgCls:"d-loader-container",msg:'<ul class="d-loading"><li class="d-loading__stick d-loading__stick_1"></li><li class="d-loading__stick d-loading__stick_2"></li><li class="d-loading__stick d-loading__stick_3"></li><li class="d-loading__stick d-loading__stick_4"></li><li class="d-loading__stick d-loading__stick_5"></li><li class="d-loading__stick d-loading__stick_6"></li><li class="d-loading__stick d-loading__stick_7"></li><li class="d-loading__stick d-loading__stick_8"></li><li class="d-loading__stick d-loading__stick_9"></li><li class="d-loading__stick d-loading__stick_10"></li><li class="d-loading__stick d-loading__stick_11"></li><li class="d-loading__stick d-loading__stick_12"></li></ul><div>'+_ServerLabels.PleaseWaitMsg+"</div>"});ListViewGrid.showWaitMask=function(){this.waitMask.show()};ListViewGrid.hideWaitMask=function(){this.waitMask.hide()};var M=_ServerVariables.ObjectName;if(isRFConsoleList&&isServiceRequestTab()){M+="_SR"}var B=currentWindowContext.Ext.util.Cookies.get(M+"_GridState");if(B!=null){var q=B.split(".");for(var O=0;O<ListViewGrid.columns.length;O++){if(q[O]!=null&&q[O]!=undefined){if(q[O]!="N"){var a=parseInt(q[O]);if(!isNaN(a)){if(a>2000){a=500}ListViewGrid.columns[O].width=a;ListViewGrid.columns[O].flex=0}}}}}return ListViewGrid}function setSortingCircleTipData(b){circleTooltipArray=[];for(var a=0;a<=columsSortingMax;a++){if(b[a]&&colApiHeaderMap[b[a].apiName]){tipData={sequence:b[a].tabSequence,label:colApiHeaderMap[b[a].apiName],order:b[a].order};circleTooltipArray.push(tipData)}}}var circleTooltip,circleTooltipArray=[],colApiHeaderMap=[];function showSortInfoTooltip(d){var c=_ServerLabels.SortedBy,f="",a=[];a.ASC=_ServerLabels.Ascending;a.DESC=_ServerLabels.Descending;var e='<div> <div class="rf-sort-circle-hd"><span class="rf-att-floatleft">'+c+"</span></div>";e+='<table style="background:#ffffff;" width="100%" border="0">';for(var b=0;b<circleTooltipArray.length;b++){f=circleTooltipArray[b];thenByText=_ServerLabels.ThenBy;if(b==(circleTooltipArray.length-1)){thenByText=""}e+='<tr class="rf-att-row"> <td valign="top" class="rf-sort-circle-col"><span>'+f.sequence+'. </span><span class="rf-sort-circle-lbl">'+f.label+'</span><td class="rf-sort-circle-col">'+a[f.order]+'</td><td class="rf-sort-circle-col">'+thenByText+"</td></tr>"}e+='</table><div style="height:5px;" /></div>';circleTooltip=Ext.create("Ext.tip.ToolTip",{target:d,anchor:"top",shadow:false,autoHide:false,cls:"rf-sort-circle-tip",html:e});circleTooltip.show()}function hideSortInfoTooltip(){circleTooltip.destroy()}function initializeColumnHeaders(d){var m=[];for(var f=0;f<d.length;f++){m[d[f].dataIndex]=f+1;if(d[f].header){colApiHeaderMap[d[f].dataIndex]=d[f].header}else{colApiHeaderMap[d[f].dataIndex]=d[f].text}}if(isRFConsoleList&&userPref&&userPref!="{}"){var b=_ServerVariables.ObjectName;if(isServiceRequest){b+="_SR"}columnMap=[];e=[];sequence=1;if(userPref[b]&&userPref[b]["Sort"]&&userPref[b]["Sort"]["All"]&&d.length>0){var h=userPref[b]["Sort"]["All"];var e=[];var c={};for(var g=1;g<=columsSortingMax;g++){if(h[g]){if(m[h[g].apiname]){columnMap[m[h[g].apiname]]={order:h[g].order,tabSequence:g,apiName:h[g].apiname};e[h[g].apiname]={tabSequence:g,order:h[g].order}}else{columnMap=[];e=[];sequence=1;userPref[b]["Sort"]=new Object;break}c={sequence:g,label:colApiHeaderMap[h[g].apiname],order:h[g].order};circleTooltipArray.push(c)}else{break}}if(Object.keys(e).length==1){var a="";for(var f=0;f<d.length;f++){if(d[f].header){a=d[f].header}else{a=d[f].text}if(e[d[f].dataIndex]){if(e[d[f].dataIndex].order=="ASC"){d[f].header=a+'&nbsp;<div class="triangle-up"></div>'}else{d[f].header=a+'&nbsp;<div class="triangle-down"></div>'}break}}sequence=Object.keys(e).length+1}else{if(Object.keys(e).length>1){var a="";for(var f=0;f<d.length;f++){if(d[f].header){a=d[f].header}else{a=d[f].text}if(e[d[f].dataIndex]){if(e[d[f].dataIndex].order=="ASC"){d[f].header=a+'&nbsp;<div class="triangle-up"></div><sub class="circle-filled" title="" onmouseover="showSortInfoTooltip(this)" onmouseout="hideSortInfoTooltip()">'+e[d[f].dataIndex].tabSequence+"</sub>"}else{d[f].header=a+'&nbsp;<div class="triangle-down"></div><sub class="circle-filled" title="" onmouseover="showSortInfoTooltip(this)" onmouseout="hideSortInfoTooltip()">'+e[d[f].dataIndex].tabSequence+"</sub>"}}}sequence=Object.keys(e).length+1}}}FilterJSON=getFilterJSONbyFilterId(GridState.ViewFilterID);if(e){var k=[];mapKeys=Object.keys(e);for(var g=0;g<mapKeys.length;g++){k[e[mapKeys[g]].tabSequence]={apiName:mapKeys[g],order:e[mapKeys[g]].order}}mapKeys=new Array();mapKeys=Object.keys(k);mapKeys.sort();var n="";for(var g=0;g<mapKeys.length;g++){if(k[mapKeys[g]].order=="DESC"){n+=k[mapKeys[g]].apiName+" "+k[mapKeys[g]].order+" Nulls Last,"}else{n+=k[mapKeys[g]].apiName+" "+k[mapKeys[g]].order+","}}GridState.SortBy=n.substring(0,n.length-1);GridState.SortDirection=""}}}Ext.fly(document.body).on("click",function(a){if(!Ext.fly(a.getTarget()).findParent("div#SearchFilter")){if(Ext.get("SearchFilter").isVisible()&&focusOnSearchFilterbox==false){Ext.fly("SearchFilter").hide()}}});function isServiceRequestTab(){var a=Ext.util.Cookies.get("apex__isSRLastRFConsoleView");var c=Ext.util.Cookies.get("apex__EnableMultipleListViews");var d=currentWindowContext.pinnedObject();var b=false;if(calledFromConsoleListViewPage&&isServiceRequest){b=true}else{if(!calledFromConsoleListViewPage&&isServiceRequest&&(d||c)){b=true}else{if(!calledFromConsoleListViewPage&&!c&&!d&&(isServiceRequest||a=="true")){b=true}}}return b}function ShowHideMassUpdateButton(a){if(isRecordUpdateEnabled.indexOf(a)!=-1){document.getElementById("masseditButton").style.visibility="visible"}else{document.getElementById("masseditButton").style.visibility="hidden";document.getElementById("masseditButton").style.display="none"}}function checkRecordUpdateButtonSetting(){if(document.getElementById("masseditButton")!="undefined"&&document.getElementById("masseditButton")!=null){if(_ServerVariables.ObjectName=="Incident__c"){if(isRFConsoleList){if(isSegregationEnabled&&isServiceRequestTab()){ShowHideMassUpdateButton("segsr")}else{ShowHideMassUpdateButton("inc")}}else{ShowHideMassUpdateButton("inc")}}else{if(_ServerVariables.ObjectName=="Task__c"){ShowHideMassUpdateButton("tsk")}else{if(_ServerVariables.ObjectName=="Problem__c"){ShowHideMassUpdateButton("prb")}else{if(_ServerVariables.ObjectName=="Release__c"){ShowHideMassUpdateButton("rel")}else{if(_ServerVariables.ObjectName=="Broadcasts__c"){ShowHideMassUpdateButton("brd")}else{if(_ServerVariables.ObjectName=="Change_Request__c"){ShowHideMassUpdateButton("chg")}}}}}}}}function alignSearchFilterBox(){Ext.fly("SearchFilter").alignTo("SearchField","bl",[-22,2])}function LoadRecord_Abs(b,d,c,h){if(isRFConsoleList){var g=_ServerVariables.ObjectName;if(_ServerVariables.ObjectName!=null&&_ServerVariables.ObjectName!=""&&typeof(_ServerVariables.ObjectName)!="undefined"&&_ServerVariables.ObjectName=="Incident__c"){if(c!=""&&c!=null&&typeof(c)!="undefined"&&(c==true||c=="true")||isServiceRequest){currentWindowContext.addTab(b,d,g,false,"","","ServiceRequest")}else{currentWindowContext.addTab(b,d,g,false,"","","Incident",h)}}else{if(typeof(_ServerVariables.ObjectName)!="undefined"&&(_ServerVariables.ObjectName=="Task__c"||_ServerVariables.ObjectName=="Change_Request__c")){currentWindowContext.addTab(b,d,g,false,"","","",h)}else{currentWindowContext.addTab(b,d,g)}}}else{var f=Ext.getCmp("NorthPanel");if(typeof(f)!="undefined"&&f.isResized!=true){var e=getRenderSize();f.setHeight(e.height/2);f.isResized=true;var a=f.splitter.getEl();a.show()}if(typeof(LoadRecord)!="undefined"){return LoadRecord(b)}}console.log("Loading record... Abstract called");console.log(b)}function normalizeReferenceData(c){var b=[];var h=_ServerVariables.ColumnsOrderedList;for(var g=0;g<h.length;g++){var e=h[g];if(e.indexOf(".")!=-1){var a=e.split(".");b.push({name:e,outerProp:a[0],innerProp:a[1]})}}for(var g=0;g<c.length;g++){for(var d=0;d<b.length;d++){var f=b[d];if(c[g][f.outerProp]==null){c[g][f.outerProp]={};c[g][f.outerProp][f.innerProp]=null}}}}function RemoveReserveCharactersForSOSL(c){var b=new Array("?","&","|","!","{","}","[","]","(",")","^","~","*",":","\\",'"',"+","-","'");for(var a=0;a<b.length;a++){c=c.split(b[a]).join("")}return c}function ValidateReserveCharactersForSOSL(c){var b=new Array("\\","?","&","|","!","{","}","[","]","(",")","^","~","*",":",'"',"+","-");for(var a=0;a<b.length;a++){c=c.split(b[a]).join("\\"+b[a])}return c}function stripOffHTML(a){return a.replace(/(<([^>]+)>)/ig,"")}function decodeValuesForRemoteAction(e){var k=null;var f=null;for(var g=0;g<e.length;g++){f=e[g];for(var d in _ServerVariables.ColumnsMap){k=_ServerVariables.ColumnsMap[d];var c=f[d];if(c){if(k.type.toLowerCase()=="textarea"&&k.isHTMLFormatted){f[d]=Ext.htmlDecode(c)}else{if(k.type.toLowerCase()=="date"){b=new Date(c);if(typeof(b)!="undefined"&&b!=null){var j=b.getTimezoneOffset();b=new Date(c+j*60000)}f[d]=Ext.Date.format(b,"time")}else{if(k.type.toLowerCase()=="datetime"){var b=new Date(c);if(typeof(b)!="undefined"&&b!=null){var j=b.getTimezoneOffset();var a=b.getTime();if(_ServerVariables.InitRecords.offsetMap.hasOwnProperty(a)){var h=new Date(a+_ServerVariables.InitRecords.offsetMap[a]+j*60000);f[d]=Ext.Date.format(h,"time")}}}}}if(k.isHTMLFormatted&&k.isCalculated){f[d]=Ext.htmlDecode(c)}}}}}function LoadResultsIntoGrid(d){var b=d.result;_ServerVariables.InitRecords.offsetMap=d.offsetMap;decodeValuesForRemoteAction(b);normalizeReferenceData(b);ListViewStore.loadRawData(b);var a=_ServerVariables.ObjectName;if(isServiceRequest&&isRFConsoleList){a+="_SR"}var c=Ext.util.Cookies.get("apex__"+a+"_ListFilterID");if(typeof(c)!="undefined"&&c!=null&&c!=""){ListViewDefaultValue=c}else{ListViewDefaultValue=_ServerVariables.InitRecords.InitFilterID}if(currentWindowContext.isConsoleMetricBarEnabled&&d.FilterId){ListViewDefaultValue=d.FilterId}GridState.ViewFilterID=ListViewDefaultValue;GridState.PageSize=d.PageSize;GridState.CurrentPage=d.PageNumber;GridState.TotalRecords=d.ResultSize;GridState.Limit_Exceeds=d.BeyondMaxLimit;GridState.TotalPages=Math.ceil(GridState.TotalRecords/GridState.PageSize);GridState.Start=(GridState.CurrentPage*GridState.PageSize)-(GridState.PageSize-1);GridState.End=GridState.CurrentPage*GridState.PageSize;if(GridState.End>GridState.TotalRecords){GridState.End=GridState.TotalRecords}if(GridState.Limit_Exceeds==false){if(GridState.TotalRecords>9999){pagingBar.displayMsg=_ServerLabels.Records+" "+GridState.Start+" - "+GridState.End+" "+_ServerLabels.LabelOf+" "+GridState.TotalRecords+"+ "}else{pagingBar.displayMsg=_ServerLabels.Records+" "+GridState.Start+" - "+GridState.End+" "+_ServerLabels.LabelOf+" "+GridState.TotalRecords}}else{pagingBar.displayMsg=_ServerLabels.Records+" "+GridState.Start+" - "+GridState.End+" "+_ServerLabels.LabelOf+" "+maxLimitOfRecord}ListViewPicklist.setValue(GridState.ViewFilterID);pagingBar.onLoad();ListViewGrid.hideWaitMask()}var showLodingMask=true;function GetPageRecords_Remote(){alreadySelectedRecordId="";resetAutoRefresh();if(showLodingMask&&Ext.getCmp("NorthPanel")!=null&&typeof(Ext.getCmp("NorthPanel"))!="undefined"&&Ext.getCmp("NorthPanel")!="undefined"){ListViewGrid.showWaitMask()}var h=_ServerVariables.ColumnsOrderedList;var g="";for(var q=0;q<h.length;q++){var b=h[q];if(b.toLowerCase()!="id"&&b.toLowerCase()!="name"){g+=b+" , "}}if(_ServerVariables.ObjectName!=null&&_ServerVariables.ObjectName!=""&&typeof(_ServerVariables.ObjectName)!="undefined"&&_ServerVariables.ObjectName=="Incident__c"){g+=" Id, Name , "+CurrentNamespacePrefix+"isServiceRequest__c"}else{g+=" Id, Name"}var t=GridState.ViewFilterID;if(typeof(t)=="undefined"){t=null}var a=LoadResultsIntoGrid;var y=GridState.PageSize;var x=GridState.CurrentPage;if(x<=0){x=1}var m=GridState.SortBy;var p=GridState.SortDirection;var j=GridState.SearchStr;try{if(window.parent.callerNumber!="undefined"&&window.parent.callerNumber!=null&&window.parent.callerNumber!=""){j=window.parent.callerNumber}}catch(u){console.log(""+u.message)}var r=_ServerVariables.ObjectName;var w=_ServerVariables.TrimColumns;var f=document.getElementById("search-filter-checkbox").checked;SearchWithFilter={};if(typeof(FilterJSON)!="undefined"&&FilterJSON!=null){SearchWithFilter.FilterCriteria=FilterJSON}if(j!=""){var v=j+NONPRINT+originalSearchStr;SearchWithFilter.SearchString=v;SearchWithFilter=JSON.stringify(SearchWithFilter);console.log("SearchWithFilter "+SearchWithFilter);callRemoteAction(_RemotingActions.GetPageRecordsForSearch,r+":"+isServiceRequest+":"+isRFConsoleList,g,t,x,y,m,p,SearchWithFilter,w,f,function(e,k){if(k.status){a(e)}else{if(k.type==="exception"){console.log(k.message);ListViewGrid.hideWaitMask()}}},{escape:true})}else{if(typeof(SearchWithFilter.FilterCriteria)!="undefined"&&SearchWithFilter.FilterCriteria!=null){j=JSON.stringify(SearchWithFilter)}callRemoteAction(_RemotingActions.GetPageRecords,r+":"+isServiceRequest+":"+isRFConsoleList,g,t,x,y,m,p,j,w,function(e,k){if(k.status){a(e)}else{if(k.type==="exception"){console.log(k.message);ListViewGrid.hideWaitMask()}}},{escape:true})}if(isMultiColumnSortingEnabled){if(FilterJSON.saveFilterJSON){delete FilterJSON.saveFilterJSON}if(m&&m.indexOf(NONPRINT_NEW)!=-1){var c="";var n=p.split(NONPRINT_NEW);var d=m.split(NONPRINT_NEW);for(var o=0;o<d.length-1;o++){if(n[o]=="DESC"){c+=d[o]+" "+n[o]+" nulls last,"}else{c+=d[o]+" "+n[o]+","}}GridState.SortBy=c.substring(0,c.length-1)+" ";GridState.SortDirection=""}}}function DeleteRecords_Remote(a){ListViewGrid.showWaitMask();callRemoteAction(_RemotingActions.DeleteRecords,a,function(b,c){ListViewGrid.hideWaitMask();if(typeof(b.ExceptionMessage)!="undefined"||b.ExceptionMessage!=null){Ext.Msg.baseCls="bmc-notiltle-msg";Ext.Msg.show({msg:b.ExceptionMessage,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}GetPageRecords_Remote();if(Ext.Array.contains(a,recordId)){CollapseDetailPanel()}},{escape:true})}function toggleSFHeader(){var b=document.getElementById("divToggleView");var a=document.getElementById("AppBodyHeader");if(a==null||typeof(a)=="undefined"||a=="undefined"){b.style.display="none";return}if(b.className=="HideSFheader"){b.className="ShowSFheader";b.title=Maximize;a.style.display="block";if(Ext.util.Cookies.get("RF_hideSFheader")!=null){document.cookie="RF_hideSFheader=;path=/;SameSite=None;Secure;expires="+getRFCookieExpiry().toUTCString()}}else{b.className="HideSFheader";b.title=Restore;a.style.display="none";document.cookie="RF_hideSFheader=1;path=/;SameSite=None;Secure;expires="+getRFCookieExpiry().toUTCString()}resizePanels()}function setSFHeader(){if(typeof(isLightningMode)!="undefined"&&isLightningMode){var c=document.getElementById("divToggleView");if(c){c.style.display="none"}}else{var b=Ext.util.Cookies.get("RF_hideSFheader");if(b!=null&&b!=""){var c=document.getElementById("divToggleView");var a=document.getElementById("AppBodyHeader");if(c){c.className="HideSFheader";c.title=Restore}if(a){a.style.display="none"}}}}function onSFHeaderResize(b){var a=currentWindowContext.document.getElementById("AppBodyHeader");if(typeof(a)!="undefined"&&a!=null&&a.style.display=="none"){if(typeof(mainPanel)!="undefined"){mainPanel.setSize(b.width,b.height+50);mainPanel.doLayout()}if(typeof(TabPanel)!="undefined"){if(Ext.isChrome){TabPanel.setSize(b.width,b.height+92)}else{TabPanel.setSize(b.width,b.height+80)}TabPanel.updateLayout()}}}function movePrevious(){GridState.CurrentPage--;GetPageRecords_Remote()}function moveNext(){GridState.CurrentPage++;GetPageRecords_Remote()}function moveFirst(){GridState.CurrentPage=1;GetPageRecords_Remote()}function moveLast(){GridState.CurrentPage=GridState.TotalPages;GetPageRecords_Remote()}function doRefresh(){if(_ServerVariables.ObjectName!="My_Dashboard"){GetPageRecords_Remote()}}function resetAutoRefresh(){clearTimeout(refreshTimer);if(!_ServerVariables.ConsoleListRefreshMinutes){_ServerVariables.ConsoleListRefreshMinutes=5}var b=_ServerVariables.ConsoleListRefreshMinutes*1000*60;var a=Date.now()+b;if(currentWindowContext.globalListRefreshTimeStamp&&Math.abs(currentWindowContext.globalListRefreshTimeStamp-a)<=2000){b=b+3000;currentWindowContext.globalListRefreshTimeStamp=a+3000}else{currentWindowContext.globalListRefreshTimeStamp=a}refreshTimer=setTimeout(function(){doRefresh()},b)}function getPagingToolbar(){var a=new Ext.PagingToolbar({id:"pagingToolbarId",dock:"bottom",padding:"0 0 0 10",moveNext:moveNext,movePrevious:movePrevious,moveFirst:moveFirst,moveLast:moveLast,doRefresh:doRefresh,displayInfo:true,emptyMsg:_ServerLabels.NoRecordFoundMsg,refreshText:_ServerLabels.PageRefresh,nextText:_ServerLabels.PageNext,firstText:_ServerLabels.PageFirst,lastText:_ServerLabels.PageLast,prevText:_ServerLabels.PagePrevious,beforePageText:_ServerLabels.Page,afterPageText:_ServerLabels.Of,inputItemWidth:23,cls:"PagingToolbarClass",listeners:{beforechange:function(e,c,b){var d=a.child("#inputItem").getActionEl().dom.value;if(d>GridState.TotalPages){d=GridState.TotalPages}if(d<=0){d=1}GridState.CurrentPage=parseInt(d);GetPageRecords_Remote()},afterrender:function(b){b.items.get(2).el.setStyle("margin","0px 15px 0px 5px");b.items.get(6).el.setStyle("margin","0px 5px 0px 15px");b.child("#first").el.setStyle("margin-right","15px");b.child("#last").el.setStyle("margin-left","15px")}},getPageData:function(){var b={currentPage:GridState.CurrentPage,pageCount:GridState.TotalPages,total:GridState.TotalRecords};return b}});a.bindStore(ListViewStore,false);a.child("#first").setIconCls("d-icon-angles_left");a.child("#prev").setIconCls("d-icon-angle_left");a.child("#next").setIconCls("d-icon-angle_right");a.child("#last").setIconCls("d-icon-angles_right");a.child("#refresh").setIconCls("d-icon-restart");a.child("#first").setWidth(15);a.child("#prev").setWidth(15);a.child("#next").setWidth(15);a.child("#last").setWidth(15);a.child("#refresh").setWidth(30);a.child("#refresh").addCls("bmc-btn-refresh");return a}function FetchBroadcast(a){if(typeof broadcastIntervalId==="undefined"){loadBroadcast(a);if(a.broadcastInfo=="true"){broadcastIntervalId=setInterval(function(){loadBroadcast(a)},300000)}}}function loadBroadcast(a){callRemoteAction(_RemotingActions.getAdditionalInfo,a,createTicker,null)}var isRTFEnabledIncidentPage="";var isRTFEnabledTaskPage="";var isRTFEnabledChangePage="";var isRTFEnabledProblemPage="";var isRTFEnabledReleasePage="";var isRTFEnabledBroadcastPage="";var isRTFEnabledSRPage="";function createTicker(b,f){if(isRFConsoleList){createTickerSConsole(b,f)}else{var h=document.getElementById("tickerDIv");if(b.isRTFEnabledIncidentPage){isRTFEnabledIncidentPage=b.isRTFEnabledIncidentPage}if(b.isRTFEnabledTaskPage){isRTFEnabledTaskPage=b.isRTFEnabledTaskPage}if(b.isRTFEnabledChangePage){isRTFEnabledChangePage=b.isRTFEnabledChangePage}if(b.isRTFEnabledProblemPage){isRTFEnabledProblemPage=b.isRTFEnabledProblemPage}if(b.isRTFEnabledReleasePage){isRTFEnabledReleasePage=b.isRTFEnabledReleasePage}if(b.isRTFEnabledBroadcastPage){isRTFEnabledBroadcastPage=b.isRTFEnabledBroadcastPage}if(b.isRTFEnabledSRPage){isRTFEnabledSRPage=b.isRTFEnabledSRPage}if(typeof(h)!="undefined"&&h!=null&&h!=""&&h!="undefined"){var e;var c=h.getElementsByTagName("MARQUEE");if(c.length>0){e=c[0]}else{e=document.createElement("marquee")}var a=document.getElementById("rf-ticker");e.setAttribute("scrollamount",b.TickerSpeed);if(a){e.setAttribute("width",a.clientWidth-180)}e.setAttribute("direction","left");e.setAttribute("behavior","scroll");e.setAttribute("id","broadcast-ticker");e.setAttribute("class","broadcast-ticker");var d=document.createTextNode(decodeSpecialChar(decodeURIComponent(b.BroadcastMessage)));e.appendChild(d);e.onBounce=onBounceHandler(e);if(Ext.isGecko){e.setAttribute("onmouseover","this.setAttribute('scrollamount', 0, 0);");e.setAttribute("onmouseout","this.setAttribute('scrollamount', 6, 0);")}else{e.setAttribute("onmouseover","this.stop();");e.setAttribute("onmouseout","this.start();")}h.appendChild(e);var g=window.location.hash=!!window.MSInputMethodContext;if(typeof datastream!=="undefined"&&datastream!==null){if(!Ext.isIE&&!Ext.isChrome&&!Ext.isSafari&&!g){datastream.behavior="alternate"}datastream.setAttribute("width",document.getElementById("broadcastdiv").clientWidth-100)}}}}var currentIndex;var broadcastScrollStarted=false;var currentBroadcastData={};var nextBroadcastData={};function createTickerSConsole(g,n){isRTFEnabledIncidentPage=g.isRTFEnabledIncidentPage;isRTFEnabledTaskPage=g.isRTFEnabledTaskPage;isRTFEnabledChangePage=g.isRTFEnabledChangePage;isRTFEnabledProblemPage=g.isRTFEnabledProblemPage;isRTFEnabledReleasePage=g.isRTFEnabledReleasePage;isRTFEnabledBroadcastPage=g.isRTFEnabledBroadcastPage;if(g.ScrollType=="MESSAGE"){nextBroadcastData.broadCastList=JSON.parse(RemedyForceHTMLProcessor.htmlDecoder(g.BroadcastList));nextBroadcastData.nextBroadcastMessageInterval=g.BroadcastInterval!=null?g.BroadcastInterval:"10";nextBroadcastData.totalBrodcasts=nextBroadcastData.broadCastList.length;if(!broadcastScrollStarted||!currentBroadcastData.totalBrodcasts){broadcastScrollStarted=true;startMessageScroll()}var b=document.getElementById("BroadcastMessage");if(b){b.addEventListener("transitionend",animationEndFunc);b.addEventListener("webkitTransitionEnd",animationEndFunc);b.addEventListener("oTransitionEnd",animationEndFunc);b.addEventListener("MSTransitionEnd",animationEndFunc)}document.getElementById("messageScrollContainer").style.display="";document.getElementById("broadcast-ticker-parentd").style.display="none";document.getElementById("textScrollContainer").style.display="none"}else{document.getElementById("messageScrollContainer").style.display="none";document.getElementById("broadcast-ticker-parentd").style.display="";document.getElementById("textScrollContainer").style.display="";var j=String.fromCharCode(160)+String.fromCharCode(160)+String.fromCharCode(160)+String.fromCharCode(160)+String.fromCharCode(160)+String.fromCharCode(160);var d=decodeURIComponent(g.BroadcastMessage);d=decodeSpecialChar(d);var u=document.getElementById("broadcast-ticker");var f=document.getElementById("broadcast-ticker-parentd");if(f){var m=document.createElement("marquee");var q=g.TickerSpeed;m.setAttribute("scrollamount",q);m.setAttribute("direction","left");m.setAttribute("behavior","scroll");m.setAttribute("id","broadcast-ticker");m.setAttribute("class","broadcast-ticker");if(Ext.isGecko){m.setAttribute("onmouseover","this.setAttribute('scrollamount', 0, 0);");m.setAttribute("onmouseout","this.setAttribute('scrollamount', "+q+", 0);")}else{m.setAttribute("onmouseover","this.stop();");m.setAttribute("onmouseout","this.start();")}var r=f.childNodes.length;for(var p=0;p<r;p++){f.removeChild(f.childNodes[p])}if(userLanguage=="iw"){var e=document.createElement("div");e.setAttribute("class","broadcast-rtl-container");var v=String(d).split(j);var a;for(a=0;a<v.length;a++){var o=document.createElement("div");o.classList.add("broadcast-msg-rtl");var t=v[a]+j;var k=document.createTextNode(t);o.appendChild(k);e.appendChild(o)}m.appendChild(e)}else{var c=document.createTextNode(d);m.appendChild(c);m.classList.add("broadcast-msg-ltr")}f.appendChild(m);m.onbounce=onBounceHandler(m);var h=window.location.hash=!!window.MSInputMethodContext;if(!Ext.isIE&&!Ext.isChrome&&!Ext.isSafari&&!h){m.behavior="alternate"}}}}function startMessageScroll(){currentBroadcastData=JSON.parse(JSON.stringify(nextBroadcastData));if(currentBroadcastData.totalBrodcasts>0){document.getElementById("BroadcastPageNumber").style.display="";currentIndex=-1;showNextMessage()}else{document.getElementById("BroadcastPageNumber").style.display="none"}}var isIE11=window.location.hash=!!window.MSInputMethodContext;function showNextMessage(){currentIndex++;if(currentIndex>currentBroadcastData.totalBrodcasts-1){currentIndex=0;if(nextBroadcastData.totalBrodcasts){currentBroadcastData=JSON.parse(JSON.stringify(nextBroadcastData))}}document.getElementById("BRCurrentPage").textContent=(currentIndex+1);document.getElementById("BRTotalPages").textContent=currentBroadcastData.totalBrodcasts;var a=document.getElementById("BroadcastMessage");if(a){a.textContent=currentBroadcastData.broadCastList[currentIndex]}if(currentBroadcastData.totalBrodcasts!=1&&!isIE11){setTimeout(function(){if(a){a.classList.remove("fadein");a.classList.add("fadeout")}},currentBroadcastData.nextBroadcastMessageInterval*1000)}else{setTimeout(function(){showNextMessage()},currentBroadcastData.nextBroadcastMessageInterval*1000)}}function animationEndFunc(){var a=document.getElementById("BroadcastMessage");if(a&&a.classList.contains("fadeout")){a.classList.remove("fadeout");a.classList.add("fadein");showNextMessage()}}var onFirstLoad=0;var isSideBarCollapsed=false;function getRenderSize(){var c={};if(isServiceCloudConsole=="true"||isRFConsoleDetailForm=="true"){return getServiceCloudConsoleRenderSize()}var g=Ext.get("console_content");var k=0;k=280;var a=200;var m=400;try{a=currentWindowContext.Ext.get("sidebarDiv").getViewSize().width;m=currentWindowContext.Ext.get("sidebarDiv").getViewSize().height}catch(h){console.log("salesforce sidebar not displayed");if(currentWindowContext.Ext.get("sidebarDiv")==null){k=40}}if(a<150){k=70}if(typeof(isLightningMode)!="undefined"&&!isLightningMode){if(typeof(isSFSidebarEnabled)!="undefined"&&!isSFSidebarEnabled){a=0;m=0;k=0}}if(m>(currentWindowContext.Ext.getBody().getViewSize().height*0.75)){c.height=m}else{c.height=currentWindowContext.Ext.getBody().getViewSize().height*0.75}c.width=currentWindowContext.Ext.getBody().getViewSize().width-k;c.height=c.height<400?400:c.height;if(isRFConsoleList){var d=currentWindowContext.Ext.getBody().getViewSize().height-282;if(currentWindowContext.Ext.get("sidebarDiv")==null){if(typeof(isLightningMode)!="undefined"&&isLightningMode){d=currentWindowContext.Ext.getBody().getViewSize().height-116}else{d=currentWindowContext.Ext.getBody().getViewSize().height-256}}var b=screen.height;var f=currentWindowContext.document.getElementById("tabs");var q=f.offsetHeight;var p=currentWindowContext.document.getElementById("tabContainer");var o=currentWindowContext.document.getElementById("handlebarContainer");var j=document.getElementById("rf-ticker");if(p!=null){var n=p.clientWidth-a;if(p.clientWidth<=0){c.width=(f.offsetWidth)-2;if(typeof(calledFromConsoleListViewPage)!="undefined"&&!calledFromConsoleListViewPage){if(m==0&&onFirstLoad!=1){c.width+=180}else{if(m>0&&onFirstLoad==1){c.width=((f.offsetWidth)-2)-180}}}f.style.width=(c.width+2)+"px";j.style.width=(c.width+2)+"px"}else{if(typeof(calledFromConsoleListViewPage)!="undefined"){if((onFirstLoad==1&&m==0)||(o==null)){c.width=n-22;f.style.width=(n-20)+"px";j.style.width=(n-20)+"px";if(Ext.isIE7){j.style.width=(n-35)+"px"}}else{c.width=n-36;f.style.width=(n-34)+"px";j.style.width=(n-34)+"px";if(Ext.isIE7){j.style.width=(n-49)+"px"}}}}c.width=c.width<600?563:c.width}else{if(typeof(isLightningMode)!="undefined"&&isLightningMode){f.style.width=(c.width+2)+"px";j.style.width=(c.width+2)+"px"}}if(m==0&&q>d){if(onFirstLoad==1){c.height=q+12;isSideBarCollapsed=true}else{c.height=q+25}}else{if(m>700||(m>500&&b<800)){c.height=m;if(isSideBarCollapsed){c.height=q+25}}else{if(Ext.isIE7||Ext.isIE8){c.height=d+58}else{if(Ext.isIE9){c.height=d+68}else{if(currentWindowContext.Ext.get("sidebarDiv")==null){c.height=d+70}}}}}if(typeof(calledFromConsoleListViewPage)!="undefined"&&calledFromConsoleListViewPage){if(m==0&&(p&&p.clientWidth<=0)){c.height-=93}else{if(m==0){c.height+=12}}}if(m==0){onFirstLoad=1}else{onFirstLoad=0}}return c}function resizeServiceCloudConsole(a){resizePanels()}function getServiceCloudConsoleRenderSize(){var c={};c.height=currentWindowContext.Ext.getBody().getViewSize().height;if(isServiceCloudConsole=="true"){var a=currentWindowContext.Ext.getBody().getViewSize().width;var b=screen.width;if(a>=b-300){c.width=a-15}else{c.width=b-150}c.height=c.height-20}else{if(Ext.isIE8){c.width=currentWindowContext.Ext.getBody().getViewSize().width-15}else{c.width=currentWindowContext.Ext.getBody().getViewSize().width}}return c}function resizePanels(){var c=getRenderSize();if(!isRFConsoleList){mainPanel.setSize(c.width,c.height);var e=Ext.getCmp("NorthPanel");if(typeof(e)!="undefined"&&e.isResized==true){e.setHeight(c.height/2);var a=e.splitter.getEl();a.show()}else{if(typeof(e)!="undefined"){e.setHeight(c.height)}}var b=document.getElementById("broadcast-ticker");if(b!=undefined&&b!=null){b.setAttribute("width",document.getElementById("broadcastdiv").clientWidth-100)}}else{if(typeof(mainPanel)!="undefined"){mainPanel.setSize(c.width,c.height-60)}var d=Ext.getCmp("ConsoleDashboard");if(d){d.setSize(c.width,c.height-60)}if(typeof(TabPanel)!="undefined"){TabPanel.setSize(c.width,c.height-25);TabPanel.updateLayout()}onSFHeaderResize(c)}}Ext.EventManager.onWindowResize(function(){resizePanels();if(typeof(resizeActivityFeed)=="function"){resizeActivityFeed()}if(_ServerVariables.ObjectName!="My_Dashboard"){alignSearchFilterBox()}var a=Ext.getCmp("listViewColumnCustomizationWindow");if(a){a.setY(winY,false)}});var printBtnHandlerWindow;var PrintBtnHandler=function(c,d){var a=pageUrl[0]+recordId+"/p";var b="resizable=1,scrollbars=1,toolbar=1,menubar=1,status=1,location=1";printBtnHandlerWindow=window.open(a,"Print_"+recordId,b);if(printBtnHandlerWindow.focus){printBtnHandlerWindow.focus()}};var printPdfBtnHandlerWindow;var PrintPdfBtnHandler=function(b,c){var d="/apex/PrintObjectDetailPDF?id="+recordId;var a="resizable=1,scrollbars=1,toolbar=1,menubar=1,status=1,location=1";printPdfBtnHandlerWindow=window.open(d,"PDFPrint_"+recordId,a);if(printPdfBtnHandlerWindow.focus){printPdfBtnHandlerWindow.focus()}};var AttachBtnHandlerWindow;var addAttachBtnHandler=function(b,c){var d=950;var e=450;if(recordId=="null"||recordId==null){recordId=""}var a="status = 1,height = "+e+", width = "+d+",left="+screenLeft(d)+",top="+screenTop(e)+", resizable = 1,scrollbars=yes";AttachBtnHandlerWindow=window.open("/apex/StaffAttachment?parentId="+recordId+"&AttRefGeneratorId="+AttRefGeneratorId,"attachment",a);if(AttachBtnHandlerWindow.focus){AttachBtnHandlerWindow.focus()}};var sideDivWidth=200;function resizeOnSidebarCollapse(){if(!isSFSidebarEnabled){return}try{var a=currentWindowContext.Ext.get("sidebarDiv").getViewSize().width;if(sideDivWidth!=a){sideDivWidth=a;resizePanels()}}catch(b){sideDivWidth=0}setTimeout(resizeOnSidebarCollapse,1000)}function assignOwnerfields(a,c,g,d){var b=null,j=null,f=null;if(typeof(g)!="undefined"&&g!=null&&g!=""){j=g}if(typeof(a)!="undefined"&&a!=null&&a!=""){f=a}if(j==null&&f==null){alert("ERROR -- Owner not found ")}var h=ListViewGrid.getSelectionModel().getSelection();var k=[];for(var e=0;e<h.length;e++){k.push(h[e].data.Id)}ChangeOwnerOfRecords_Remote(k,j,f)}function ChangeOwnerOfRecords_Remote(c,b,a){ListViewGrid.showWaitMask();callRemoteAction(_RemotingActions.ChangeOwnerStaffNQueue,_ServerVariables.ObjectName,c,b,a,function(d,e){ListViewGrid.hideWaitMask();if(e.status){if(typeof(d.ExceptionMessage)!="undefined"||d.ExceptionMessage!=null){Ext.Msg.baseCls="bmc-message";Ext.Msg.show({msg:d.ExceptionMessage,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}else{ShowInlineSaveMessage()}GetPageRecords_Remote()}else{if(typeof(e.message)!="undefined"&&e.message!=null){Ext.Msg.baseCls="bmc-message";Ext.Msg.show({msg:e.message,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}}if(Ext.Array.contains(c,recordId)){if(typeof(RefreshDetailPanel)!="undefined"){RefreshDetailPanel()}}},{escape:true})}function removeConflictingCSS(){var b=document.getElementsByTagName("link");for(var a=0;a<b.length;a++){if(b[a].href!=null&&typeof(b[a].href)!="undefined"&&(b[a].href.toLowerCase().indexOf("/ie8/elements.css")>=0||b[a].href.toLowerCase().indexOf("/ie7/elements.css")>=0)){b[a].href="/empty.css"}}}function getselectedIds(){var b=ListViewGrid.getSelectionModel().getSelection();selectedrec_Ids=[];for(var a=0;a<b.length;a++){selectedrec_Ids.push(b[a].data.Id)}return selectedrec_Ids}function OpenHelppage(a){if(a=="ConsoleListView"){if(isRFConsoleList){filename="Rf_console_overview"}else{if(_ServerVariables.ObjectName=="Incident__c"){filename="incident_console_list";if(isNewContextpage()&&wikiUrlIncidentConsoleList!=null&&typeof(wikiUrlIncidentConsoleList)!=undefined&&wikiUrlIncidentConsoleList!=""){window.open(wikiUrlIncidentConsoleList,false,"width="+screen.width+",height="+screen.height+",resizable = 1,scrollbars=yes,status=1,top=0,left=0",false)}else{window.open(helpResource+"/"+filename+".htm",false,"width="+screen.width+",height="+screen.height+",resizable = 1,scrollbars=no,status=1,top=0,left=0",false)}return null}else{if(_ServerVariables.ObjectName=="Task__c"){filename="task_console_list";if(isNewContextpage()&&wikiUrlTaskConsoleList!=null&&typeof(wikiUrlTaskConsoleList)!=undefined&&wikiUrlTaskConsoleList!=""){window.open(wikiUrlTaskConsoleList,false,"width="+screen.width+",height="+screen.height+",resizable = 1,scrollbars=yes,status=1,top=0,left=0",false)}else{window.open(helpResource+"/"+filename+".htm",false,"width="+screen.width+",height="+screen.height+",resizable = 1,scrollbars=no,status=1,top=0,left=0",false)}return null}}}}else{if(_ServerVariables.ObjectName=="Incident__c"){filename="creating_incident_std"}else{if(_ServerVariables.ObjectName=="Task__c"){filename="creating_tasks_std"}else{if(_ServerVariables.ObjectName=="Problem__c"){filename="creating_problem_std"}else{if(_ServerVariables.ObjectName=="Change_Request__c"){filename="creating_change_std"}else{if(_ServerVariables.ObjectName=="Release__c"){filename="creating_release_std"}else{if(_ServerVariables.ObjectName=="Broadcasts__c"){filename="creating_broadcast_std"}}}}}}}if(isNewContextpage()&&wikiUrl!=null&&wikiUrl!=undefined&&wikiUrl!=""){window.open(wikiUrl,false,"width="+screen.width+",height="+screen.height+",resizable = 1,scrollbars=yes,status=1,top=0,left=0",false)}else{window.open(helpResource+"/"+filename+".htm",false,"width="+screen.width+",height="+screen.height+",resizable = 1,scrollbars=no,status=1,top=0,left=0",false)}}Ext.button.Button.prototype.tooltipType="title";Ext.toolbar.Paging.prototype.old_getPagingItems=Ext.toolbar.Paging.prototype.getPagingItems;Ext.toolbar.Paging.prototype.getPagingItems=function(){var b=this;var d=b.old_getPagingItems();for(var a=0;a<d.length;a++){var c=d[a];if(typeof(c)=="object"){c.tooltipType="title"}}return d};function getValueMap__Remote(f,e,d){circleTooltipArray=[];alreadySelectedRecordId="";currentWindowContext.startTabWaitMsgBar();var b=f;if(!currentWindowContext.pinnedObject()&&e){if(isServiceRequest&&isRFConsoleList){document.cookie="apex__isSRLastRFConsoleView=true;path=/;SameSite=None;Secure;expires="+getRFCookieExpiry().toUTCString();b=f+"_SR"}else{document.cookie="apex__isSRLastRFConsoleView=false;path=/;SameSite=None;Secure;expires="+getRFCookieExpiry().toUTCString()}}else{if(isServiceRequest&&isRFConsoleList){b=f+"_SR"}}var c=Ext.util.Cookies.get("apex__"+b+"_ListFilterID");if(d){c=d}c=(c==null||c=="null"||!c)?"":c;var a=Ext.util.Cookies.get("apex__"+b+"_ListPageSize");a=(a==null||a=="null"||!a)?"":a;callRemoteAction(_RemotingActions.getValuesMap,f+":"+isServiceRequest+":"+isRFConsoleList+":"+a,c,function(h,m){if(m.type==="exception"){alert(m.message);currentWindowContext.stopTabWaitMsgBar()}else{currentWindowContext.stopTabWaitMsgBar();_ServerVariables=h;if(_ServerVariables.ObjectName!="My_Dashboard"){for(var j in _ServerVariables.ColumnsMap){var g=_ServerVariables.ColumnsMap[j];if(g.label){g.label=decodeSpecialChar(g.label)}}for(var k in _ServerVariables.ListViewOptions){_ServerVariables.ListViewOptions[k]=decodeSpecialChar(_ServerVariables.ListViewOptions[k])}decodeValuesForRemoteAction(_ServerVariables.InitRecords.result);if(isMultiColumnSortingEnabled){userPref=decodeSpecialChar(_ServerVariables.userPref);userPref=JSON.parse(Ext.htmlDecode(userPref))}}removeGridViewpanel(true);if(e){document.cookie="apex__LastRFConsoleView="+f+";path=/;SameSite=None;Secure;expires="+getRFCookieExpiry().toUTCString()}}changeFonSizetForRTLDirection();if(typeof LoadFilterComponent=="function"){LoadFilterComponent(_ServerVariables.ObjectName)}},{escape:true})}function removeGridViewpanel(c){var a=Ext.getCmp("listViewGridPanelId");if(typeof(Ext.getCmp("pagingToolbarId"))!="undefined"){a.removeDocked(Ext.getCmp("pagingToolbarId"),true)}GridState.SearchStr="";btickerAndListviewPanel.remove(a,true);var f=Ext.getCmp("ConsoleDashboard");if(f){btickerAndListviewPanel.remove(f,true)}if(_ServerVariables.ObjectName!="My_Dashboard"){btickerAndListviewPanel.add(getGridView(c))}else{var d=getRenderSize();var b=d.height;var e=d.width;btickerAndListviewPanel.add(getDashboardView(b,e))}btickerAndListviewPanel.doLayout()}Ext.define("Override.tab.Bar",{override:"Ext.tab.Bar",initComponent:function(){this.callParent();this.layout.overflowHandler.scrollIncrement=this.layout.scrollIncrement}});function createTabPanelWithoutItem(a,b){Ext.tip.QuickTipManager.init();var c=a-30;TabPanel=Ext.create("Ext.tab.Panel",{renderTo:"tabs",resizeTabs:true,enableTabScroll:true,width:"auto",border:false,cls:"rf-main-tabpanel",style:"overflow:hidden",defaults:{autoScroll:true,hideMode:"offsets"},plain:true,minHeight:c,tabBar:{layout:{scrollIncrement:100},height:30,defaults:{height:29}}})}function createTabPanel(a,b){Ext.tip.QuickTipManager.init();currentWindowContext.pinnedObject();currentWindowContext.viewModuleList();var d=currentWindowContext.getListTabLabel();var c=a-30;TabPanel=Ext.create("Ext.tab.Panel",{renderTo:"tabs",resizeTabs:true,enableTabScroll:true,width:"auto",border:false,cls:"rf-main-tabpanel",style:"overflow:hidden",defaults:{autoScroll:true,hideMode:"offsets"},plain:true,minHeight:c,listeners:{tabchange:function(f,e){currentWindowContext.clearAllSelection();if(currentWindowContext.isConsoleMetricBarEnabled){currentWindowContext.setActiveCard("undefined","",e.id)}}},tabBar:{layout:{scrollIncrement:100},height:30,defaults:{height:29}},items:[{title:d,id:"firstTab",border:false,tooltip:returnLabel(d,"0"),items:mainPanel,closable:false,tabConfig:{style:{borderRadius:0},margin:"0 0 0 0"}}]});waitTabMsgBar=new Ext.LoadMask(TabPanel,{floating:{shadow:false},msgCls:"d-loader-container",msg:'<ul class="d-loading"><li class="d-loading__stick d-loading__stick_1"></li><li class="d-loading__stick d-loading__stick_2"></li><li class="d-loading__stick d-loading__stick_3"></li><li class="d-loading__stick d-loading__stick_4"></li><li class="d-loading__stick d-loading__stick_5"></li><li class="d-loading__stick d-loading__stick_6"></li><li class="d-loading__stick d-loading__stick_7"></li><li class="d-loading__stick d-loading__stick_8"></li><li class="d-loading__stick d-loading__stick_9"></li><li class="d-loading__stick d-loading__stick_10"></li><li class="d-loading__stick d-loading__stick_11"></li><li class="d-loading__stick d-loading__stick_12"></li></ul><div>'+_ServerLabels.PleaseWaitMsg+"</div>"})}function getObjectPrefixMap(){callRemoteAction(_RemotingActions.getObjectPrefixMap,function(a,b){if(b.type==="exception"){alert(b.message)}else{generateObjPreFixMap(a)}},{escape:false})}function generateObjPreFixMap(b){var d=b.prefixList;for(var c=0;c<d.length;c++){ObjectPrefixMap[c]=new Array(2);var a=d[c];var e=a.split(":");ObjectPrefixMap[c][0]=e[0];ObjectPrefixMap[c][1]=e[1];if(e[1].toLowerCase()=="change_request__c"||e[1].toLowerCase()=="incident__c"||e[1].toLowerCase()=="release__c"||e[1].toLowerCase()=="problem__c"||e[1].toLowerCase()=="task__c"||e[1].toLowerCase()=="broadcasts__c"){ObjectIDMap[e[1]]=e[2]}}}function getActionItemIndexMap(){callRemoteAction(_RemotingActions.ActionItemIndexValues,function(a,b){if(b.type==="exception"){alert(b.message)}},{escape:false})}function showLinktoBroadcast(){var b=broadcastPage+"?fromSS=true&fromconsole=true&linktobroadcast=true&calledFromConsoleListViewPage="+calledFromConsoleListViewPage+"&isServiceRequest="+isServiceRequest;var a;if(Ext.isIE||Ext.isSafari){a=547+30}else{a=542+30}broadcastWindow=new currentWindowContext.Ext.Window({height:a,title:broadcastLabel,width:650,pageX:350,pageY:0,resizable:false,modal:true,constrain:true,animate:true,cls:"broadcastWindow",bodyStyle:"padding-top: 25px; padding-bottom:5px; background:#FFFFFF;",style:"padding: 0; border-width: 0;background:#FFFFFF;",border:false,closable:false,tools:[{type:"rfclose",width:30,height:30,minWidth:30,handler:function(e,d,c){broadcastWindow.close()}}],viewConfig:{forceFit:true},html:'<iframe src ="'+b+'" style="width:100%;height:100%;border:none" id="broadcastframe" name="broadcastframe"/>'});broadcastWindow.show();broadcastWindow.center()}function checkIsIEBrowser(){var b=window.navigator.userAgent;var a=b.indexOf("MSIE ");if(a>0||!!navigator.userAgent.match(/Trident.*rv\:11\./)){return true}else{return false}}function checkISMSEdge(){if(navigator.userAgent!=""&&navigator.userAgent.indexOf("Edge/")>0){return true}else{return false}}function makeAgentAvailable(a){if(isRFChatAllowed){clearInterval(currentWindowContext.agentAvailability);callRemoteAction(_RFRemotingActions.makeAgentAvailable,a,function(b,c){if(a=="1"||a.toLowerCase()=="available"||a.toLowerCase()=="busy"){currentWindowContext.agentAvailability=setInterval(function(){currentWindowContext.checkAgentAvailability()},4000)}},{escape:true})}}function replacetextNode(b){var c=_ServerVariables.ChatStatusOptions;for(it in _ServerVariables.ChatStatusOptions){if(it!="ChatStatus"&&it==b){b=c[it];break}}var d=document.getElementById("chatStatusTitle");var a=d.firstChild.nextSibling;a.replaceData(0,13,b)}function updateBackground(a){document.getElementById("staffChatStatus").className=a;document.getElementById("chatStatusTitle").className=a}function formatSeconds(b){var e=function(f){return(f<10?"0"+f:f)};var d=Math.floor(b/3600);var a=Math.floor((b/3600)%1*60);var c=Math.floor((b/60)%1*60);return e(d)+":"+e(a)+":"+e(c)}function closebar(){var a=document.getElementById("topbar");if(a!=null&&typeof(a)!="undefined"){a.setAttribute("style","display:none")}}function recordLockedIcons(a){if(a!=""){window.Ext.getCmp("LockRecordIcon").setVisible(true);window.Ext.getCmp("LockRecordLbl").setVisible(true)}if(recordLock!=null&&typeof(recordLock)!="undefined"){if(recordLock=="Explicit"){window.Ext.getCmp("LockRecord").setVisible(false);window.Ext.getCmp("UnlockRecordIcon").setVisible(false);if(a==""){window.Ext.getCmp("UnlockRecord").setVisible(true);window.Ext.getCmp("LockRecordIcon").setVisible(true)}else{window.Ext.getCmp("UnlockRecord").setVisible(false)}}else{if(recordLock=="Implicit"&&a==""){window.Ext.getCmp("LockRecordIcon").setVisible(false);window.Ext.getCmp("LockRecordLbl").setVisible(false)}}}}function recordUnlockedIcons(){if(recordLock!=null&&typeof(recordLock)!="undefined"&&recordLock=="Explicit"){window.Ext.getCmp("LockRecord").setVisible(true);window.Ext.getCmp("LockRecordIcon").setVisible(false);window.Ext.getCmp("LockRecordLbl").setVisible(false);window.Ext.getCmp("UnlockRecord").setVisible(false);window.Ext.getCmp("UnlockRecordIcon").setVisible(true)}}var timeout;var finalTimeout;function disableAllrecordLockIcons(){clearTimeout(timeout);clearTimeout(finalTimeout);window.Ext.getCmp("UnlockRecordIcon").setVisible(false);window.Ext.getCmp("LockRecordIcon").setVisible(false);window.Ext.getCmp("LockRecordLbl").setVisible(false);window.Ext.getCmp("LockRecord").setVisible(false);window.Ext.getCmp("UnlockRecord").setVisible(false);closebar()}var startX=210;var startY=55;function showContinueLockingMsg(){function b(){var e=document.getElementById("topbar");var f,d,c;f=document.getElementById("detailViewChildPanelId").clientWidth;d=600;if(f&&d){c=parseInt(((f-d)/2))}e.setAttribute("style","display:block;visibility:visible;");e.sP=function(g,h){this.style.left=c+"px";this.style.top=h+"px"};e.x=startX;e.y=startY;return e}var a=b();window.stayTopLeft=function(){var c=pageYOffset;a.y+=(c+startY-a.y)/8;a.sP(a.x,a.y)};stayTopLeft();timer()}var timerInterval;function timer(){var c=5*60;var a=document.getElementById("time");var b="";clearInterval(timerInterval);timerInterval=setInterval(function(){d()},1000);var d=function(){if(c>=0){b=formatSeconds(c);if(a.hasChildNodes()){a.removeChild(a.firstChild);a.removeChild(a.lastChild)}var f=document.createTextNode(readContinueMessage1+" ");var e=document.createElement("b");e.appendChild(document.createTextNode(b));a.appendChild(f);a.appendChild(e);c--}}}var showReadOnlyMsg;var delimiter="##";var resultFailure="failure";var warningTime=(5*60*1000);function getRecordLockedValue(b){var a=[recordId,_ServerVariables.ObjectName,b];if(recordLock!=null&&typeof(recordLock)!="undefined"&&recordLock!="Off"){callRemoteAction(_RemotingActions.getRecordLockedValue,a,function(c,d){if(d.status){if(c!=null&&c!=""&&c.toUpperCase()!=resultFailure.toUpperCase()){if(b=="recordLock"){timeout=setTimeout("showContinueLockingMsg()",(1000*60*lockDuration)-warningTime);finalTimeout=setTimeout("releaseLocking()",(1000*60*lockDuration));recordLockedIcons("");lastModifiedByLocking=c}else{if(b=="clearLock"){clearTimeout(timeout);clearTimeout(finalTimeout);recordUnlockedIcons()}else{if(b=="UpdateLastModified"){lastModifiedByLocking=c}}}}}},{escape:false})}}function releaseLocking(){clearTimeout(timeout);clearTimeout(finalTimeout);closebar();recordUnlockedIcons()}function continueLockingRecord(a){closebar();clearTimeout(timeout);clearTimeout(finalTimeout);getRecordLockedValue("recordLock");if(recordLock!=null&&typeof(recordLock)!="undefined"&&recordLock=="Explicit"){window.Ext.getCmp("UnlockRecord").setVisible(true)}}function lockRecordAfterSave(){if(!saveFromQuickClose&&(isNewRecordLock&&recordId!=null)){if(recordLock!=null&&typeof(recordLock)!="undefined"&&recordLock!="Off"){if(recordLock=="Implicit"){clearTimeout(timeout);clearTimeout(finalTimeout);getRecordLockedValue("recordLock")}else{if(recordLock=="Explicit"){var a=window.Ext.getCmp("UnlockRecord").isVisible();if(!a){clearTimeout(timeout);clearTimeout(finalTimeout);recordUnlockedIcons()}}}}}else{if(saveFromQuickClose){clearTimeout(timeout);clearTimeout(finalTimeout)}}}function enableRecordReadModeMsg(a){var d=a.indexOf("true");if(d>-1){recordLockedIcons("recordReadModeTrue");var c=a.split(delimiter);var b=_ServerLabels.recordReadOnlyMessage1+" "+c[1]+" "+_ServerLabels.recordReadOnlyMessage2;showReadOnlyMsg(b);if(_ServerVariables.ObjectName=="Incident__c"){IncidentPageinReadMode()}else{if(_ServerVariables.ObjectName=="Task__c"){TaskPageinReadMode()}else{if(_ServerVariables.ObjectName=="Problem__c"){ProblemConsolePageinReadMode()}else{if(_ServerVariables.ObjectName=="Change_Request__c"){ChangeReqConsolePageinReadMode()}else{if(_ServerVariables.ObjectName=="Release__c"){ReleaseConsolePageinReadMode()}else{if(_ServerVariables.ObjectName=="Broadcasts__c"){BroadcastConsolePageinReadMode()}}}}}}}}function decodeSpecialChar(a){if(a){a=a.replace(/&amp;#62;/g,">");a=a.replace(/&amp;#60;/g,"<");a=a.replace(/&gt;/g,">");a=a.replace(/&lt;/g,"<");a=a.replace(/&nbsp;/g,"\u00a0");a=a.replace(/&#39;/g,"'");a=a.replace(/&amp;/g,"&");a=a.replace(/&quot;/g,'"')}return a}function replaceSFJsonEncodeChar(a){if(a){a=a.replace(/\\\\/g,"/~/~").replace(/\\n/g,"\n").replace(/\/~\/~/g,"\\").replace(/\\u003C/g,"<").replace(/\\u003E/g,">").replace(/\\\//g,"/").replace(/\\\\/g,"\\").replace(/\\'/g,"'").replace(/\\"/g,'"')}return a}function getChangeOwnerMenu(){if(isIncObject()&&isServiceCloudConsole!="true"){return Ext.create("Ext.menu.Menu",{id:"changeOwnerMenu",baseCls:"bmc-menu",shadow:false,items:[{text:_ServerLabels.AssignToMeLabel,handler:function(){var b=Ext.getCmp("listViewGridPanelId");var c=b.getSelectionModel().getSelection();var a=[];if(c.length>0){for(i=0;i<c.length;i++){a.push(c[i].data.Id)}AssignRecordsToUser(a)}},baseCls:"bmc-menu-item",overCls:"bmc-menu-item-over"},{text:_ServerLabels.AssignToOthersLabel,handler:function(){openChangeOwnerWindow()},baseCls:"bmc-menu-item",overCls:"bmc-menu-item-over"}]})}else{return""}}function getPageLayoutMenuItems(c,b){var e=[];var f=MultiPageLayout.details[b];for(count=0;count<f.length;count++){var a=f[count].layoutName;if(a.length>30){a=a.substring(0,30)+"..."}var d="";if(count==0){d='<span class="defaultLayoutCls">('+_ServerLabels.DefaultLabel+")</span>"}e[count]={text:'<span class="new-btn-layout-name">'+d+a+"</span>",baseCls:"bmc-menu-item",overCls:"bmc-menu-item-over",optionId:f[count].layoutKey+String.fromCharCode(172)+f[count].layoutDetailId,tooltip:Ext.util.Format.htmlDecode(f[count].layoutName),tooltipType:"title",handler:c};if(f[count].isDefault&&typeof MultiPageLayout!="undefined"){MultiPageLayout["defaultLayout"+b.toUpperCase()]=f[count].layoutKey}}return e}function loadMultiplePageLayoutMenu(a){return isRFConsoleList&&isMultiPageLayoutEnabledForCurrentModule&&MultiPageLayout.details[a].length>1}function getPageLayoutMenu(a){if(loadMultiplePageLayoutMenu(a)){var b=function(c,d){LoadRecord_Abs(null,"","",this.optionId)};return Ext.create("Ext.menu.Menu",{id:"pageLayoutMenuItems",baseCls:"bmc-menu",shadow:false,items:getPageLayoutMenuItems(b,a),maxHeight:"310",listeners:{mouseleave:{element:"el",fn:function(){Ext.getCmp("pageLayoutMenuItems").hide()}}}})}else{return""}}function isMultiPageLayoutEnabledForModule(a){var b=false;if(a!=undefined&&a!=null&&MultiPageLayout.isEnabled!=undefined&&MultiPageLayout.isEnabled!=null&&MultiPageLayout.isEnabled&&MultiPageLayout.details[a]!==undefined&&MultiPageLayout.details[a]!==null&&MultiPageLayout.details[a].length>0){b=true}return b}function getModulesForRtf(){var a=getCurrentModuleName();if(a){return a}else{return"sr,in,ts,pr,cr,rm,br"}}function getCurrentModuleName(){var a=null;switch(_ServerVariables.ObjectName){case"Incident__c":if(isServiceRequest==true){a="sr"}else{a="in"}break;case"Change_Request__c":a="cr";break;case"Task__c":a="ts";break;case"Problem__c":a="pr";break;case"Release__c":a="rm";break;case"Broadcasts__c":a="br";break}return a}function isIncObject(){var a=_ServerVariables.ObjectName;if(typeof(isRfConsole)!="undefined"&&isRfConsole!="undefined"&&isRfConsole!=null&&isRfConsole&&typeof(a)!="undefined"&&a!="undefined"&&a!=null&&a.trim()!=""&&a=="Incident__c"){return true}else{return false}}function openRecordsUpdateWindow(){if(currentWindowContext.updateWindow&&!currentWindowContext.updateWindow.closed){currentWindowContext.isUpdateWindowOpen=true}else{currentWindowContext.isUpdateWindowOpen=false}currentWindowContext.updateWindow=window.open("/apex/consoleMassUpdate?modulename="+_ServerVariables.ObjectName+"&isServiceRequest="+isServiceRequest,"massUpdate","location=1,status=1,scrollbars=1,resizable=1,width=440,height=326,top=300, left=500");if(currentWindowContext.isUpdateWindowOpen){if(checkISMSEdge()){var a=window.open("","temp","width=10,height=10,left=1300,top=600,location=0,menubar=0,resizable=0,scrollbars=0,status=0,titlebar=0,toolbar=0");setTimeout(function(){currentWindowContext.updateWindow.focus();a.close()},300)}else{currentWindowContext.updateWindow.focus()}}else{currentWindowContext.updateWindow.focus()}}function openChangeOwnerWindow(){var c=parseInt((screen.availWidth/2)-(1000/2));var b=parseInt((screen.availHeight/2)-(600/2));if(currentWindowContext.changeOwnerWindow&&!currentWindowContext.changeOwnerWindow.closed){currentWindowContext.isChangeOwnerWindowOpen=true}else{currentWindowContext.isChangeOwnerWindowOpen=false}currentWindowContext.changeOwnerWindow=window.open("/apex/SuggestionPage?ownerType=OWNER&parentObjectName="+_ServerVariables.ObjectName+"&fromInciOwnerLkup=true&changeOwner=true","changeOwner","status = 1,height =600, width = 1000,left="+c+",top="+b+", resizable = 1,scrollbars=yes");if(currentWindowContext.isChangeOwnerWindowOpen){if(checkISMSEdge()){var a=window.open("","temp","width=10,height=10,left=1300,top=600,location=0,menubar=0,resizable=0,scrollbars=0,status=0,titlebar=0,toolbar=0");setTimeout(function(){currentWindowContext.changeOwnerWindow.focus();a.close()},300)}else{currentWindowContext.changeOwnerWindow.focus()}}else{currentWindowContext.changeOwnerWindow.focus()}}function hideSmartViewbtn(){if((typeof(isSmartViewEnabled)!="undefined"&&isSmartViewEnabled!=null&&isSmartViewEnabled==""&&!isSmartViewEnabled)||Ext.isIE8||Ext.isIE9||Ext.isIE10||isServiceCloudConsole=="true"){return true}else{return false}}var ChangeVisibilityVar;function ShowInlineSaveMessage(){CloseSavePopUp();var b=document.getElementById("SaveMessageDiv");if(b!=null&&b!="undefined"){var g,d,c;var f=0;if(currentWindowContext.Ext.get("sidebarDiv")!=null){f=currentWindowContext.Ext.get("sidebarDiv").getViewSize().width}if(isRFConsoleList!=true){g=document.getElementById("bodyCell").clientWidth}else{g=document.getElementById("tabs").clientWidth}b.style.display="table";d=b.clientWidth;if(g!=null&&g!="undefined"&&d!=null&&d!="undefined"){c=parseInt(f+(g/2)-(d/2)-35)}var a=currentWindowContext.TabPanel.activeTab;var e=currentWindowContext.TabPanel.items.findIndex("id",a.id);if(e!="0"&&f>0){c=parseInt((g-d-f)/2)}b.setAttribute("style","left: "+c+"px;");b.classList.add("Save-Message-Div");ChangeVisibilityVar=setTimeout(function(){CloseSavePopUp()},3000)}}function CloseSavePopUp(){clearTimeout(ChangeVisibilityVar);document.getElementById("SaveMessageDiv").setAttribute("style","display:none;")}function AssignRecordsToUser(b){if(isRFConsoleList==true){ListViewGrid.showWaitMask();var c="";var a=new Object();a.isFromListView="true";callRemoteAction(_RemotingActions.AssignRecordsToUser,c,b,a,function(d,e){ListViewGrid.hideWaitMask();if(e.status){if(typeof(d.Result)!="undefined"){if(d.Result=="SUCCESS"){GetPageRecords_Remote();ShowInlineSaveMessage()}else{if(d.Result=="ERROR"){Ext.Msg.baseCls="bmc-message";Ext.Msg.show({msg:d.ExceptionMessage,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}}}}else{if(e.type==="exception"){console.log(e.message)}}},{escape:true})}}var consoleViewConfigurationWindow;function checkColumnConfig(){callRemoteAction(_RemotingActions.isPageAccessible,"ConsoleViewConfiguration",function(a,b){if(b.type==="exception"){alert(b.message)}else{if(a.hasAccess==true){showColumnConfig()}else{if(a.isAdmin==true){showInfoMessage(_ServerLabels.ClickAndDragToReorder+' <a href="https://docs.bmc.com/docs/pages/viewpage.action?spaceKey=remforce201701&title=Performing+minimum+post-upgrade+procedures+for+20.17.01" target="_blank">'+_ServerLabels.here+"</a>")}else{showInfoMessage(_ServerLabels.NonAdminInsufficentAccessOnFeature)}}}},{escape:true})}function showColumnConfig(){if(consoleViewConfigurationWindow==undefined||consoleViewConfigurationWindow.isDestroyed==true){var a=ConsoleViewConfiguration+"?modulename="+_ServerVariables.ObjectName+"&isServiceRequest="+isServiceRequest;currentWindowContext.consoleViewConfigurationWindow=new currentWindowContext.Ext.Window({id:"listViewColumnCustomizationWindow",height:420,width:650,y:winY,resizable:false,modal:true,constrain:true,border:false,header:false,frame:false,bodyBorder:false,closable:false,draggable:false,cls:"listViewColumnCustomization",viewConfig:{forceFit:true,bodyBorder:false,},html:'<iframe src ="'+a+'" style="width:100%;height:100%;border:none"/>',floating:{shadow:false}})}currentWindowContext.consoleViewConfigurationWindow.show()}function closeColumnConfigWindow(){currentWindowContext.consoleViewConfigurationWindow.close()}function saveColumnConfigWindow(){circleTooltipArray=[];var f=TabPanel.getActiveTab().title;var c,a=false;c=currentWindowContext.fetchObjNameFromTabTitle(f);if(f==SingleConsolePage.Labels.viewServiceRequestsOnly){a=true}if(c==_ServerVariables.ObjectName&&a==isServiceRequest){getValueMap__Remote(_ServerVariables.ObjectName,false)}else{for(var b=0;b<frames.length;b++){try{if(frames[b].name=="consolelistviewframe"&&frames[b].objectNameParam==c&&frames[b].isServiceRequest==a){frames[b].getValueMap__Remote(c,false);break}}catch(d){console.log(d)}}}currentWindowContext.consoleViewConfigurationWindow.close()}function applyCustomIncidentHighlightsColor(){try{if(isRFConsoleList){var e="";var a;if(typeof(_ServerVariables.ConsoleHighlightsEnabled)!="undefined"&&_ServerVariables.ConsoleHighlightsEnabled&&typeof(_ServerVariables.ConsoleHighlightsColor)!="undefined"&&_ServerVariables.ConsoleHighlightsColor){a=_ServerVariables.ConsoleHighlightsColor;e=".bmc-grid-row-bold .x-grid-cell-inner,.bmc-grid-row-bold .bmc-grid-name-cell{color: "+a+" !important;}"}if(typeof(_ServerVariables.ConsoleHighlightsForActionsEnabled)!="undefined"&&_ServerVariables.ConsoleHighlightsForActionsEnabled&&typeof(_ServerVariables.ConsoleHighlightsForActionsColor)!="undefined"&&_ServerVariables.ConsoleHighlightsForActionsColor){a=_ServerVariables.ConsoleHighlightsForActionsColor;e+=".bmc-grid-row-bold-newaction .x-grid-cell-inner,.bmc-grid-row-bold-newaction .bmc-grid-name-cell{color: "+a+" !important;}"}if(e!=""){var c=document.getElementsByTagName("head").item(0);var b=document.createElement("style");b.type="text/css";if(b.styleSheet){b.styleSheet.cssText=e}else{b.appendChild(document.createTextNode(e))}c.appendChild(b)}}}catch(d){console.log(d)}}function checkSmartViewAccess(a){if(hasActivityFeedPermission!=undefined){if(hasActivityFeedPermission==true){makeActivityFeedVisible()}else{showSmartViewsError(isLoggedInUserAdmin)}}else{callRemoteAction(_RemotingActions.isPageAccessible,"Deepview",function(b,c){if(c.type==="exception"){console.log(c.message);showInfoMessage(c.message);stopWaitMsgBar()}else{if(b.hasAccess==true){if(a==true){makeActivityFeedVisible()}else{loadContentsInSmartViews()}hasActivityFeedPermission=true}else{hasActivityFeedPermission=false;isLoggedInUserAdmin=b.isAdmin;showSmartViewsError(isLoggedInUserAdmin)}}},{escape:true})}}function showSmartViewsError(a){if(a==true){showInfoMessage(_ServerLabels.ClickAndDragToReorder+' <a href="https://docs.bmc.com/docs/pages/viewpage.action?spaceKey=remforce201701&title=Performing+minimum+post-upgrade+procedures+for+20.17.01" target="_blank">'+_ServerLabels.here+"</a>")}else{showInfoMessage(_ServerLabels.NonAdminInsufficentAccessOnFeature)}}function showInfoMessage(b){var a=b;Ext.Msg.baseCls="bmc-message";Ext.MessageBox.show({msg:a,title:_ServerLabels.lblInformation,width:300,height:"auto",buttons:Ext.MessageBox.OK,icon:Ext.Msg.ERROR})}function disableRow(b){try{var a="";if(isRFConsoleList&&MultiPageLayout.isEnabled&&isMultiPageLayoutEnabledForCurrentModule&&(_ServerVariables.ObjectName)&&typeof(_ServerVariables.ObjectName)!="undefined"&&(_ServerVariables.ObjectName=="Incident__c"||_ServerVariables.ObjectName=="Task__c"||_ServerVariables.ObjectName=="Change_Request__c")){if(typeof(b.raw[CurrentNamespacePrefix+"RF_FKLayout__r"][CurrentNamespacePrefix+"LayoutKey__c"])!="undefined"&&typeof(b.raw[CurrentNamespacePrefix+"RF_FKLayout__c"])!="undefined"){a=b.raw[CurrentNamespacePrefix+"RF_FKLayout__r"][CurrentNamespacePrefix+"LayoutKey__c"]+NONPRINT+b.raw[CurrentNamespacePrefix+"RF_FKLayout__c"]}}if(MultiPageLayout.isEnabled&&MultiPageLayout.ConsoleLayoutAccessValidation&&!b.get(CurrentNamespacePrefix+"isServiceRequest__c")&&!currentWindowContext.hasLayoutAccess(_ServerVariables.ObjectName,a,b.data.id,false)){toggleSelectAllCheckbox(false);return"disabledRow"}else{return""}}catch(c){console.log(c);return""}}function toggleSelectAllCheckbox(b){var a=Ext.getCmp("listViewGridPanelId");var c=document.getElementsByClassName("x-column-header-checkbox");if(c&&c.length==1){if(b){a.selModel.headerChkBoxEnabled=true;c[0].classList.remove("disabledCheckbox")}else{a.selModel.headerChkBoxEnabled=false;c[0].classList.add("disabledCheckbox")}}}function highlightNewUpdatedRecords(e){try{if(isRFConsoleList&&typeof(_ServerVariables.ObjectName)!="undefined"&&_ServerVariables.ObjectName!=null&&_ServerVariables.ObjectName!=""&&_ServerVariables.ObjectName=="Incident__c"){var j=CurrentNamespacePrefix+"New_Incident__c",d=CurrentNamespacePrefix+"Is_New_Record__c",k=CurrentNamespacePrefix+"FKOpenBy__c";_MONITOR=CurrentNamespacePrefix+"IncidentActionMonitor__r";_STATE=CurrentNamespacePrefix+"state__c";if(typeof(_ServerVariables.ConsoleHighlightsEnabled)!="undefined"&&_ServerVariables.ConsoleHighlightsEnabled!=null&&_ServerVariables.ConsoleHighlightsEnabled){if((typeof(e.get(j))!="undefined"&&e.get(j).indexOf("<img src")>=0)||(typeof(e.raw[d])!="undefined"&&e.raw[d]==true)){return"bmc-grid-row-bold"}}if(typeof(_ServerVariables.ConsoleHighlightsForActionsEnabled)!="undefined"&&_ServerVariables.ConsoleHighlightsForActionsEnabled!=null&&_ServerVariables.ConsoleHighlightsForActionsEnabled&&typeof(e.raw[_STATE])!="undefined"&&e.raw[_STATE]){var h="";if(_ServerVariables.isStaffQueueEnabled&&typeof(e.raw[k])!="undefined"){h=e.raw[k]}else{if(!_ServerVariables.isStaffQueueEnabled&&typeof(e.raw.OwnerId)!="undefined"&&e.raw.OwnerId.indexOf("005")>=0){h=e.raw.OwnerId}}if(h&&h==currentUserId){var b=null;var g=null;var m=null;var a=null;if(typeof(e.raw.LastModifiedDate)!="undefined"){g=getDateObj(e.raw.LastModifiedDate)}if(typeof(e.raw.LastModifiedById)!="undefined"){b=e.raw.LastModifiedById}if(typeof(e.raw[_MONITOR])!="undefined"){var f=null;if(typeof(e.raw[_MONITOR]["records"])!="undefined"&&e.raw[_MONITOR]["records"].length>0){f=e.raw[_MONITOR]["records"][0]}else{if(e.raw[_MONITOR].length>0){f=e.raw[_MONITOR][0]}}if(f){if(typeof(f.LastModifiedDate)!="undefined"){a=getDateObj(f.LastModifiedDate)}if(typeof(f.LastModifiedById)!="undefined"){m=f.LastModifiedById}}}if(a>g){if(currentUserId!=m){return"bmc-grid-row-bold-newaction"}}else{if(currentUserId!=b){return"bmc-grid-row-bold-newaction"}}}}}}catch(c){console.log(c);return""}}function applyRowStyling(a){return disableRow(a)+" "+highlightNewUpdatedRecords(a)}function beforeSelectFn(c,b){try{var a="";if(isRFConsoleList&&MultiPageLayout.isEnabled&&isMultiPageLayoutEnabledForCurrentModule&&MultiPageLayout.ConsoleLayoutAccessValidation){var g=typeof(c.bulkChange)=="undefined"?false:c.bulkChange;if(g&&!c.headerChkBoxEnabled){return false}else{if(typeof(_ServerVariables.ObjectName)!="undefined"&&((_ServerVariables.ObjectName=="Incident__c"&&!b.get(CurrentNamespacePrefix+"isServiceRequest__c"))||_ServerVariables.ObjectName=="Task__c"||_ServerVariables.ObjectName=="Change_Request__c")){var f=b.raw[CurrentNamespacePrefix+"RF_FKLayout__r"][CurrentNamespacePrefix+"LayoutKey__c"];var d=b.raw[CurrentNamespacePrefix+"RF_FKLayout__c"];if(typeof(f)!="undefined"&&typeof(d)!="undefined"){a=f+NONPRINT+d}if(!currentWindowContext.hasLayoutAccess(_ServerVariables.ObjectName,a,b.data.id,false)){return false}}}}}catch(e){console.log(e)}return true}function getDateObj(b){var a;if(typeof(b)=="string"){if(b.indexOf("+")>0){a=new Date(b)}else{a=new Date(parseInt(b))}}else{a=new Date(b)}return a}function getRFCookieExpiry(){var a=new Date();a.setYear(a.getFullYear()+10);return a}function isLoggedInUserChanged(){var b=typeof currentUserId!="undefined"?currentUserId:(typeof parent.currentUserId!="undefined"?parent.currentUserId:"");var a=Ext.util.Cookies.get("rf__CurrentUserId");if(a&&typeof a==="string"&&a.length>=15&&a.substring(0,15)!=b.substring(0,15)){Ext.MessageBox.show({msg:_ServerLabels.sessionExpiredMsg,width:300,buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR});ListViewGrid.hideWaitMask();if(typeof stopTabWaitMsgBar==="function"){stopTabWaitMsgBar()}return true}return false}function callRemoteAction(){if(isLoggedInUserChanged()){return}if(null===arguments||0===arguments.length){console.log("Incorrect Parameters list");return}var c=arguments[arguments.length-1];var e=arguments[arguments.length-2];var b=[].slice.call(arguments);var a=[].slice.call(arguments);b.pop();b.pop();function d(){if(isLoggedInUserChanged()){return}Visualforce.remoting.Manager.invokeAction.apply($VFRM.Manager,a)}b.push(function(f,h){if(hasSessionExpired(h)){var g=document.getElementById("blankIframeId");if(!g){g=document.createElement("iframe");g.id="blankIframeId";g.style.display="none";document.getElementById("console_content").appendChild(g)}g.src="/apex/"+CurrentNamespacePrefix+"TimeOutPage";g.addEventListener("load",function(){var j=Visualforce.remoting.Manager.providers;var k=Visualforce.remoting.last;k.refresh();d()})}else{e(f,h)}});if(c!==null){b.push(c)}Visualforce.remoting.Manager.invokeAction.apply($VFRM.Manager,b)}function hasSessionExpired(a){return(a.type=="exception"&&(a.message.indexOf("Logged in?")!=-1||(a.statusCode&&a.statusCode===402)))}function RenderSearchComponent(){var b=document.getElementById("SearchField");clearBtn=b.nextSibling;b.onkeyup=function(c){clearBtn.style.visibility=(this.value.length)?"visible":"hidden";if(!focusOnSearchFilterbox){document.getElementById("search-filter-ViewName").textContent=Ext.getCmp("ListViewId").rawValue;alignSearchFilterBox();if(_ServerVariables.ObjectName!="Projected_Service_Outage__c"){Ext.fly("SearchFilter").show()}focusOnSearchFilterbox=true}if(c.keyCode===13){SearchClicked();Ext.fly("SearchFilter").hide()}if(this.value==""){b.value="";focusOnSearchFilterbox=false;SearchClicked(true);Ext.fly("SearchFilter").hide()}};b.onfocus=function(){if(b.value!=""){document.getElementById("search-filter-ViewName").textContent=Ext.getCmp("ListViewId").rawValue;alignSearchFilterBox();if(_ServerVariables.ObjectName!="Projected_Service_Outage__c"){Ext.fly("SearchFilter").show()}focusOnSearchFilterbox=true}};b.onblur=function(){focusOnSearchFilterbox=false};clearBtn.onclick=function(){b.value="";this.style.visibility="hidden";SearchClicked(true);Ext.fly("SearchFilter").hide();focusOnSearchFilterbox=false};var a=document.getElementById("clearallfilter");if(a){a.style.opacity="0.5"}}function SearchFieldHandler(){SearchClicked(false);Ext.fly("SearchFilter").hide()}var readAccessClassIds="",readAccessRBAClassIds="";function fetchAddtionalData(){Visualforce.remoting.Manager.invokeAction(_RemotingActions.getAdditionalData,null,function(a,b){if(b.type==="exception"){alert(b.message)}else{readAccessClassIds=a.ReadAccessCMDBClassesIds;readAccessRBAClassIds=a.ReadAccessCMDBRBAClassesIds}},{escape:false})}function showMultiSortTipInfo(a,b){var c=Ext.create("Ext.tip.ToolTip",{id:"multisortTipId",target:a.getEl(),anchor:"top",anchorSize:0,shadow:false,autoHide:false,cls:"rf-crtl-multisort-info",html:b});c.show();window.setTimeout(function(){c.destroy()},1000)}function updateUserPrefJson(){var c=_ServerVariables.ObjectName;if(isServiceRequest){c+="_SR"}var a={};var b={};b[GridState.ViewFilterID]=FilterJSON;a.FilterCriteria=b;if(Object.keys(userPref).length==0){userPref[c]=a}else{if(userPref[c]){if(userPref[c]["FilterCriteria"]){userPref[c]["FilterCriteria"][GridState.ViewFilterID]=FilterJSON}else{userPref[c]=a}}else{userPref[c]=a}}}function getFilterJSONbyFilterId(d){var b={};if(userPref){var a=userPref;var e=_ServerVariables.ObjectName;if(isServiceRequest){e+="_SR"}if(a[e]&&a[e]["FilterCriteria"]){if(d){var c=a[e]["FilterCriteria"];if(c&&c[d]){b=c[d]}else{b={}}}else{b={}}}}return b}function ShowMessageBoxByType(c,d,b){Ext.Msg.baseCls="bmc-message";var a="";if(b=="INFO"){a=Ext.Msg.INFO}else{if(b=="ERROR"){a=Ext.Msg.ERROR}}Ext.MessageBox.show({msg:d,title:c,height:"auto",buttons:Ext.MessageBox.OK,icon:a})};