Ext.onReady(function(){var SelectedObject;var isIEBrowser=false;var isIE11=window.location.hash=!!window.MSInputMethodContext;if(Ext.isIE||isIE11){isIEBrowser=true}eval(CustomObjectsList);var queueAndUserAssignmentLabel=new Ext.form.Label({id:"queueAndUserAssignmentLbl",text:queueAndUserAssignmentLbl});var enableQueueAndUserAssignmentCheckbox=new Ext.form.Checkbox({id:"enableQueueAndUserAssignment",cls:"checkboxClass",boxLabel:enableQueueAndUserAssignmentLbl,checked:propEnableQueueAndUserAssignment,height:50,handler:function(){propEnableQueueAndUserAssignment=this.getValue();showHideStaffAutoAssignmentBtn()}});var scheduleQueueStaffAssignmentLabel=new Ext.form.Label({id:"scheduleQueueStaffAssignmentLabel",text:AutoAssignmentService});var scheduleQueueStaffAssignmentSubHeader=new Ext.form.Label({id:"scheduleQueueStaffAssignmentSubHeader",text:AutoAssignmentServiceSubHeader});var autoAssignmentServiceButton=new Ext.Button({id:"autoAssignmentServiceButton",name:"autoAssignmentServiceButton",text:"",minWidth:100,style:"marginTop: 5px; marginLeft: 25px;",handler:function(){if(isSchedulerRunning=="true"){Ext.getCmp("autoAssignmentServiceButton").setText(StopLbl);stopSchedulerActions()}else{Ext.getCmp("autoAssignmentServiceButton").setText(StartLbl);startSchedulerActions()}}});var qStaffLblButtonAssignmentPanel=new Ext.Panel({id:"qStaffLblButtonAssignmentPanelId",layout:"table",border:false,autoWidth:true,items:[scheduleQueueStaffAssignmentSubHeader,autoAssignmentServiceButton]});if(isSchedulerRunning=="true"){Ext.getCmp("autoAssignmentServiceButton").setText(StopLbl)}else{Ext.getCmp("autoAssignmentServiceButton").setText(StartLbl)}var autoAssignmentLabel=new Ext.form.Label({id:"AutoAssignmentLabel",text:AutoAssignmentLbl});var configStaffAutoAssignmentBtn=new Ext.Button({text:configureStaffAutoAssignmentLbl,id:"configStaffAutoAssignmentBtnId",style:"marginLeft: 25px; marginTop: 5px;",handler:openStaffAutoAssignTab});var qStaffAssignmentPanel=new Ext.Panel({id:"qStaffAssignmentPanelId",layout:"hbox",border:false,autoWidth:true,items:[enableQueueAndUserAssignmentCheckbox,configStaffAutoAssignmentBtn]});var autoAssignmentPanel=new Ext.Panel({id:"AutoAssignmentPanel",border:false,bodyStyle:"margin-top: 10px;",autoWidth:true,items:[autoAssignmentLabel]});var EmailConversationPanel=new Ext.Panel({id:"mainHeaderPanelId",border:false,tbar:[{scale:"medium",iconCls:"saveCls",id:"save",tooltipType:"title",tooltip:saveLbl,id:"saveBtn",handler:AutoAssignmnentSave}],autoWidth:true,renderTo:"Header"});var headerPanel=new Ext.Panel({id:"headerPanelId",border:false,autoWidth:true,bodyStyle:"margin-left: 15px;margin-top: 15px;",items:[queueAndUserAssignmentLabel,qStaffAssignmentPanel,scheduleQueueStaffAssignmentLabel,qStaffLblButtonAssignmentPanel,autoAssignmentPanel],renderTo:"headerPanel"});var objectstore=new Ext.data.ArrayStore({id:"objectstore",fields:[{name:"comboId"},{name:"comboName"}]});AvailableStatusStore=new Ext.data.ArrayStore({data:AvailableStatus,fields:["value","text"]});SelectedStatusStore=new Ext.data.ArrayStore({data:SelectedStatustodisplay,fields:["value","text"]});var CustomObjDesc=new Ext.form.Label({id:"CustomObjDesc",text:forLbl});var SelectObjCombo=new Ext.form.ComboBox({id:"SelectObjCombo",fieldLabel:"",selectOnFocus:true,editable:false,triggerAction:"all",store:objectstore,width:190,height:50,valueField:"comboId",displayField:"comboName",mode:"local",value:selectedCustomObject});objectstore.loadData(CustomObjectsListData);SelectObjCombo.on("select",function(){SelectedObject=SelectObjCombo.getValue();GetStatus(SelectedObject)});var CustomObjNamePanel=new Ext.Panel({id:"CustomObjNamePanel",border:false,layout:"table",height:43,renderTo:"Combobox",items:[CustomObjDesc,SelectObjCombo]});var msgLabel=new Ext.form.Label({id:"msgLabel",renderTo:"Msgid",text:autoAssignMsgLbl});var CustomObjAvailableFields=new Ext.form.Label({id:"CustomObjAvailableFields",style:"padding-left:10px;",text:avaliableStatusValuesLbl});var CustomObjSelectedFields=new Ext.form.Label({id:"CustomObjSelectedFields",style:"padding-left:100px;",cls:"clsInputBoldLabelTDI",text:selectedStatusValuesLbl});var CustomObjFieldsSelectionLabels=new Ext.Panel({id:"CustomObjFieldsSelectionLabels",border:false,renderTo:"MultipicklistLabels",layout:"table",items:[CustomObjAvailableFields,CustomObjSelectedFields]});var AutoAssignMultiPicklist=new Ext.form.FormPanel({id:"AutoAssignMultiPicklist",width:550,height:200,border:false,renderTo:"Multipicklist",style:"padding-right:15px;padding-left:10px;",layout:"column",items:[{xtype:"itemselector",id:"itemselectorDiv",name:"itemselector",fieldLabel:"ItemSelector",drawLeftIcon:true,drawRightIcon:true,drawUpIcon:false,drawDownIcon:false,width:430,iconLeft:"b_darrow_L_disable_custom.gif",iconRight:"b_darrow_R_disable_custom.gif",imagePath:SDEFStylesPath+"/SDEFbuttons/",multiselects:[{id:"AvailLabelStatusList",legend:false,width:198,height:144,store:AvailableStatusStore,displayField:"text",valueField:"value",listeners:{click:function(c){document.getElementById("iconRightId").src=SDEFStylesPath+"/SDEFbuttons/b_darrow_R_new.gif";document.getElementById("iconLeftId").src=SDEFStylesPath+"/SDEFbuttons/b_darrow_L_disable_custom.gif"}}},{id:"selectedFieldList",legend:false,width:198,height:144,store:SelectedStatusStore,displayField:"text",valueField:"value",listeners:{click:function(c){var index=0;for(var i=0;i<c.store.data.length;i++){if(c.store.getAt(i).get("value")==c.getValue()){index=i;break}}if(index==0){document.getElementById("iconRightId").src=SDEFStylesPath+"/SDEFbuttons/b_darrow_R_disable_custom.gif";document.getElementById("iconLeftId").src=SDEFStylesPath+"/SDEFbuttons/b_darrow_L_new.gif"}else{if(index==c.store.data.length-1){document.getElementById("iconRightId").src=SDEFStylesPath+"/SDEFbuttons/b_darrow_R_disable_custom.gif";document.getElementById("iconLeftId").src=SDEFStylesPath+"/SDEFbuttons/b_darrow_L_new.gif"}else{document.getElementById("iconRightId").src=SDEFStylesPath+"/SDEFbuttons/b_darrow_R_disable_custom.gif";document.getElementById("iconLeftId").src=SDEFStylesPath+"/SDEFbuttons/b_darrow_L_new.gif"}}}}}]}]});waitMsg=new Ext.Window({height:100,width:200,resizable:false,closable:false,header:false,frame:false,shadow:false,modal:true,items:[{xtype:"panel",height:100,width:200,bodyStyle:"background-color:transparent;border:none;",html:'<div align="center"><img src="'+WaitImg+'"/></div>'}]});showHideStaffAutoAssignmentBtn()});function setData(){AvailableStatusStore.loadData(AvailableStatus);SelectedStatusStore.loadData(SelectedStatustodisplay)}function AutoAssignmnentSave(){waitMsg.show();SelectedStatus="";if(Ext.getCmp("selectedFieldList")){var a=Ext.getCmp("selectedFieldList").store;var b=a.data.length;var d=0;while(b>d){var c=a.getAt(d);d++;if(b==d){SelectedStatus=SelectedStatus+c.get("value")}else{SelectedStatus=SelectedStatus+c.get("value")+";"}}save(SelectedStatus,propEnableQueueAndUserAssignment)}}function isComplete(a){if(a=="success"){a=SuccessMsg}else{a=ErrorMsg}showMessage(a)}function showMessage(a){waitMsg.hide();Ext.MessageBox.show({title:RecordAssignmentLbl,msg:a,buttons:Ext.MessageBox.OK})}function openStaffAutoAssignTab(){parent.addNewTab("IncidentLayoutCM",staffAutoAssignmentLbl,"AdminManageAutoAssignment?Objectname=Incident")}function showHideStaffAutoAssignmentBtn(){if(Ext.getCmp("configStaffAutoAssignmentBtnId")!=undefined){if(propEnableQueueAndUserAssignment){Ext.getCmp("configStaffAutoAssignmentBtnId").getEl().show()}else{Ext.getCmp("configStaffAutoAssignmentBtnId").getEl().hide()}}}function updateStatus(){if(isSchedulerRunning=="true"){Ext.getCmp("autoAssignmentServiceButton").setText(StopLbl)}else{Ext.getCmp("autoAssignmentServiceButton").setText(StartLbl)}};