var ShowIncidentChatterPosts=false;var chatterGroupsData=null;var IncidentChatterPostsGridStore=null;var classForCheckbox="checkboxClass";function getInternetExplorerVersion(){var c=-1;if(navigator.appName=="Microsoft Internet Explorer"){var a=navigator.userAgent;var b=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(b.exec(a)!=null){c=parseFloat(RegExp.$1)}}return c}var ver=getInternetExplorerVersion();if(ver>-1){if(ver>=8){classForCheckbox="checkboxClass1"}}function getIncidentChatterPostsData(){if(!ShowIncidentChatterPosts){return""}var c="";var a=IncidentChatterPostsGridStore.getRange();var d=[];for(var b=0;b<a.length;b++){d[b]=a[b].data}c=Ext.encode([{enabled:IncidentChatterPostsGridData.enabled,data:d}]);return c}Ext.onReady(function(){if(ShowIncidentChatterPosts){GroupBoxKeyPressed=function(g,f){if(g.keyCode==Ext.EventObject.BACKSPACE||g.keyCode==Ext.EventObject.DELETE){var h=IncidentChatterPostsGridStore.getById(f);h.beginEdit();h.set("groupid","");h.set("groupname","");h.endEdit()}};showChatterGroupsWindow=function(h){var g=new Ext.data.JsonStore({autoLoad:true,idProperty:"Id",fields:[{name:"Id"},{name:"Name"}],data:chatterGroupsData});var f=new Ext.grid.GridPanel({store:g,hideHeaders:true,autoScroll:true,viewConfig:{forceFit:true},columns:[{id:"groupid",header:"",hidden:true,hideable:false,dataIndex:"Id"},{header:Labels.ChatterGroup,width:300,id:"groupname",dataIndex:"Name"}],stripeRows:true,autoExpandColumn:"groupname",height:260,title:""});var i=new Ext.Window({height:300,width:500,title:Labels.PCG_SelectChatterGroup,items:f});f.getSelectionModel().on("selectionchange",function(j,m,k){record=j.getSelected();if(typeof(record)!="undefined"){var l=IncidentChatterPostsGridStore.getById(h);l.beginEdit();l.set("groupid",record.get("Id"));l.set("groupname",record.get("Name"));l.endEdit();i.close()}});i.show()};IncidentChatterPostsGridStore=new Ext.data.JsonStore({autoLoad:true,root:"data",idProperty:"priorityid",fields:[{name:"priorityid"},{name:"priorityname"},{name:"impact"},{name:"urgency"},{name:"groupid"},{name:"groupname"}],data:IncidentChatterPostsGridData});var d=new Ext.XTemplate('<tpl for=".">','<table style="width: 99%"><tr>','<td width="270px"><input style="width: 98%" readonly="readonly" onkeypress="return GroupBoxKeyPressed(event,\'{priorityid}\')" class= "clsInputTextBox" type="text" value="{groupname}" /></td>','<td width="22px"><img src="'+sdef_styles_path+'/SDEFbuttons/b_pick.gif" onclick="showChatterGroupsWindow(\'{priorityid}\');" style="width: 20px; height: 20px;" /></td>',"</tr></table>","</tpl>").compile();function b(k,h,f,l,j,g){var i='<div style="padding-top:4px">'+k+"</div>";if(k<6){i='<img src="'+sdef_styles_path+"/SDEFimages/priority"+k+'-16.gif" style="width: 16px; height: 16px; padding-top:3px" />'}return i}var e=new Ext.grid.GridPanel({id:"IncidentChatterPostsGrid",store:IncidentChatterPostsGridStore,columns:[{id:"priorityid",header:"",hidden:true,hideable:false,dataIndex:"priorityid"},{id:"groupid",header:"",hidden:true,hideable:false,dataIndex:"groupid"},{header:Labels.PriorityWindowHeaderSearchPage,width:80,align:"right",dataIndex:"priorityname",hideable:false,renderer:b},{header:Labels.ImpactWindowHeaderSearchPage,width:80,hidden:true,hideable:false,dataIndex:"impact"},{header:Labels.UrgencyWindowHeaderSearchPage,width:80,hidden:true,hideable:false,dataIndex:"urgency"},new Ext.grid.TemplateColumn({header:Labels.ChatterGroup,tpl:d,hideable:false,width:280,dataIndex:"groupname",id:"groupname"})],stripeRows:true,autoExpandColumn:"groupname",height:500,width:600,title:""});var a=new Ext.form.Checkbox({id:"IncidentChatterPostsChk",cls:classForCheckbox,boxLabel:Labels.PCG_EnableFeature,checked:IncidentChatterPostsGridData.enabled,handler:function(){IncidentChatterPostsGridData.enabled=this.getValue()}});var c=new Ext.Panel({id:"IncidentChatterPostsPanel",border:false,renderTo:"contentDiv",items:[a,e]})}});function Save(){saveToServer(getIncidentChatterPostsData())};