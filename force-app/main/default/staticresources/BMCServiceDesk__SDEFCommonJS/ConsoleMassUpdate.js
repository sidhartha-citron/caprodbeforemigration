var isApplyClicked=false;function changeInputtype(e){clearData();isApplyClicked=false;var g="";if(fieldDetails){g=fieldDetails.split(endchar)}var c=g.length;if(e.value=="Select"){selectedType=e.value;document.getElementById(inputTxtId).style.display="block";document.getElementById(inputTxtAreaId).style.display="none";document.getElementById("lookUp").style.display="none";document.getElementById("closeimgId").style.display="none";document.getElementById("massupdatePage:massUpdateForm:selectRd").style.visibility="hidden";document.getElementById("selectLst").style.display="none";document.getElementById(datetimeinputId).style.display="none";document.getElementById(dateTimePopupImgId).style.display="none";document.getElementById(inputDateId).style.display="none";document.getElementById(datePopupImgId).style.display="none";document.getElementById(inputsecretId).style.display="none";document.getElementById("rchtxtdiv").style.display="none"}for(var b=0;b<c;b++){var f=g[b].split(seperator);if(f[0]==e.value){var a=f[1];selectedType=a;displayLabel=f[2];fAPIName=f[0];if(a=="text"||a=="phone"||a=="currency"||a=="percent"||a=="email"||a=="number"){var d=document.getElementById(inputTxtId);d.style.display="block";d.disabled=false;document.getElementById(inputTxtAreaId).style.display="none";document.getElementById("lookUp").style.display="none";document.getElementById("closeimgId").style.display="none";document.getElementById("massupdatePage:massUpdateForm:selectRd").style.visibility="hidden";document.getElementById("selectLst").style.display="none";document.getElementById(datetimeinputId).style.display="none";document.getElementById(dateTimePopupImgId).style.display="none";document.getElementById(inputDateId).style.display="none";document.getElementById(datePopupImgId).style.display="none";document.getElementById(inputsecretId).style.display="none";document.getElementById("rchtxtdiv").style.display="none"}else{if(a=="encryptedtext"){document.getElementById(inputTxtId).style.display="none";document.getElementById(inputTxtAreaId).style.display="none";document.getElementById("lookUp").style.display="none";document.getElementById("closeimgId").style.display="none";document.getElementById("massupdatePage:massUpdateForm:selectRd").style.visibility="hidden";document.getElementById("selectLst").style.display="none";document.getElementById(datetimeinputId).style.display="none";document.getElementById(dateTimePopupImgId).style.display="none";document.getElementById(inputDateId).style.display="none";document.getElementById(inputsecretId).style.display="block";document.getElementById(datePopupImgId).style.display="none";document.getElementById("rchtxtdiv").style.display="none"}else{if(a=="textarea"){document.getElementById(inputTxtId).style.display="none";document.getElementById(inputTxtAreaId).style.display="block";document.getElementById("lookUp").style.display="none";document.getElementById("closeimgId").style.display="none";document.getElementById("massupdatePage:massUpdateForm:selectRd").style.visibility="hidden";document.getElementById("selectLst").style.display="none";document.getElementById(datetimeinputId).style.display="none";document.getElementById(dateTimePopupImgId).style.display="none";document.getElementById(inputDateId).style.display="none";document.getElementById(inputsecretId).style.display="none";document.getElementById(datePopupImgId).style.display="none";document.getElementById("rchtxtdiv").style.display="none"}else{if(a=="richtextarea"){document.getElementById(inputTxtId).style.display="none";document.getElementById(inputTxtAreaId).style.display="none";document.getElementById("lookUp").style.display="none";document.getElementById("closeimgId").style.display="none";document.getElementById("massupdatePage:massUpdateForm:selectRd").style.visibility="hidden";document.getElementById("selectLst").style.display="none";document.getElementById(datetimeinputId).style.display="none";document.getElementById(dateTimePopupImgId).style.display="none";document.getElementById(inputDateId).style.display="none";document.getElementById(inputsecretId).style.display="none";document.getElementById(datePopupImgId).style.display="none";document.getElementById("rchtxtdiv").style.display="block"}else{if(a=="boolean"){document.getElementById(inputTxtId).style.display="none";document.getElementById(inputTxtAreaId).style.display="none";document.getElementById("lookUp").style.display="none";document.getElementById("closeimgId").style.display="none";document.getElementById("massupdatePage:massUpdateForm:selectRd").style.visibility="visible";document.getElementById("massupdatePage:massUpdateForm:selectRd").style.display="block";document.getElementById(datetimeinputId).style.display="none";document.getElementById(dateTimePopupImgId).style.display="none";document.getElementById(inputDateId).style.display="none";document.getElementById(inputsecretId).style.display="none";document.getElementById(datePopupImgId).style.display="none";document.getElementById("selectLst").style.display="none";document.getElementById("rchtxtdiv").style.display="none"}else{if(a=="picklist"){setPickListOptions(fAPIName);document.getElementById(inputTxtId).style.display="none";document.getElementById(inputTxtAreaId).style.display="none";document.getElementById("lookUp").style.display="none";document.getElementById("closeimgId").style.display="none";document.getElementById("massupdatePage:massUpdateForm:selectRd").style.visibility="hidden";document.getElementById("massupdatePage:massUpdateForm:selectRd").style.display="none";document.getElementById("selectLst").style.display="block";document.getElementById(datetimeinputId).style.display="none";document.getElementById(inputsecretId).style.display="none";document.getElementById(dateTimePopupImgId).style.display="none";document.getElementById(inputDateId).style.display="none";document.getElementById(datePopupImgId).style.display="none";document.getElementById("rchtxtdiv").style.display="none"}else{if(a=="reference"){lookupObj=f[3];document.getElementById(inputTxtId).style.display="inline";document.getElementById(inputTxtId).disabled=true;document.getElementById(inputTxtAreaId).style.display="none";document.getElementById("lookUp").style.display="inline";document.getElementById("closeimgId").style.display="inline";document.getElementById("massupdatePage:massUpdateForm:selectRd").style.visibility="hidden";document.getElementById("selectLst").style.display="none";document.getElementById(datetimeinputId).style.display="none";document.getElementById(inputsecretId).style.display="none";document.getElementById(dateTimePopupImgId).style.display="none";document.getElementById(inputDateId).style.display="none";document.getElementById(datePopupImgId).style.display="none";document.getElementById("rchtxtdiv").style.display="none"}else{if(a=="datetime"){document.getElementById(inputTxtId).style.display="none";document.getElementById(inputTxtAreaId).style.display="none";document.getElementById("lookUp").style.display="none";document.getElementById("closeimgId").style.display="none";document.getElementById("massupdatePage:massUpdateForm:selectRd").style.visibility="hidden";document.getElementById("selectLst").style.display="none";document.getElementById(datetimeinputId).style.display="inline";document.getElementById(inputsecretId).style.display="none";document.getElementById(dateTimePopupImgId).style.display="inline";document.getElementById(inputDateId).style.display="none";document.getElementById(datePopupImgId).style.display="none";document.getElementById("rchtxtdiv").style.display="none"}else{if(a=="date"){document.getElementById(inputTxtId).style.display="none";document.getElementById(inputTxtAreaId).style.display="none";document.getElementById("lookUp").style.display="none";document.getElementById("closeimgId").style.display="none";document.getElementById("massupdatePage:massUpdateForm:selectRd").style.visibility="hidden";document.getElementById("selectLst").style.display="none";document.getElementById(datetimeinputId).style.display="none";document.getElementById(inputsecretId).style.display="none";document.getElementById(dateTimePopupImgId).style.display="none";document.getElementById(inputDateId).style.display="inline";document.getElementById(datePopupImgId).style.display="inline";document.getElementById("rchtxtdiv").style.display="none"}}}}}}}}}self.resizeTo(435,(a=="richtextarea")?485:(a=="textarea")?425:386)}}}function clearvalue(){document.getElementById(inputTxtId).value="";document.getElementById(fieldValueId).value=""}function setPickListOptions(a){var c=picklistData.split(endchar);var h=c.length;for(var e=0;e<h;e++){var b=c[e].split(seperator);if(b[0]==a){var f=document.getElementById("selectLst");if(f!=null){f.length=0;for(var d=1;d<b.length;d=d+2){var g=document.createElement("option");if(b[d]!=""){g.text=b[d+1];g.value=b[d];f.add(g,null)}}}break}}}var isCalledFromOkbtn=false;function formupdatedata(){var d;updateDataStr="";errorFlag=0;if(typeof(selectedType)=="undefined"||selectedType=="undefined"||selectedType=="Select"){errorFlag=1;Ext.MessageBox.show({width:250,title:MassUpdate,msg:ErrorMsgTemplateS,buttons:Ext.MessageBox.OK})}else{if(selectedType=="textarea"){d=document.getElementById(inputTxtAreaId).value}else{if(selectedType=="text"||selectedType=="phone"||selectedType=="currency"||selectedType=="percent"||selectedType=="email"||selectedType=="number"){d=document.getElementById(inputTxtId).value}else{if(selectedType=="picklist"){d=document.getElementById("selectLst").value}else{if(selectedType=="reference"){d=document.getElementById(fieldValueId).value}else{if(selectedType=="encryptedtext"){d=document.getElementById(inputsecretId).value}else{if(selectedType=="boolean"){var h=document.getElementsByName(selectRdId);for(var e=0;e<h.length;e++){if(h[e].checked){d=h[e].value}}}else{if(selectedType=="datetime"){d=document.getElementById(datetimeinputId).value}else{if(selectedType=="date"){d=document.getElementById(inputDateId).value}}}}}}}}if(d!=null&&d!=""){document.getElementById(fieldValueId).value=d}else{if(selectedType=="richtextarea"){d=""}else{errorFlag=1;Ext.MessageBox.show({width:250,title:MassUpdate,msg:EnterValueMsg,buttons:Ext.MessageBox.OK})}}}if(selectedType=="number"){if(isNaN(d)){errorFlag=1;Ext.MessageBox.show({width:250,title:MassUpdate,msg:InvalidNumbermsg,buttons:Ext.MessageBox.OK})}}else{if(selectedType=="email"){var a=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;if(!d.match(a)){errorFlag=1;Ext.MessageBox.show({width:250,title:MassUpdate,msg:InvalidEmailAddressmsg,buttons:Ext.MessageBox.OK})}}else{if(selectedType=="percent"){if(isNaN(d)||d<0||d>100){errorFlag=1;Ext.MessageBox.show({width:250,title:MassUpdate,msg:InvalidPercentmsg,buttons:Ext.MessageBox.OK})}}else{if(selectedType=="currency"){var c=/^-?\d+(\.\d+)?$/;if(!d.match(c)){errorFlag=1;Ext.MessageBox.show({width:250,msg:InvalidCurrencymsg,title:MassUpdate,buttons:Ext.MessageBox.OK})}}else{if(selectedType=="phone"){var g=/^[-]?\d*?\d*$/;if(!d.match(g)){errorFlag=1;Ext.MessageBox.show({width:250,title:MassUpdate,msg:InvalidPhonemsg,buttons:Ext.MessageBox.OK})}}}}}}if(errorFlag==0){showWaitbox();isApplyClicked=true;if(updateDataStr!=null&&updateDataStr!=""){updateDataStr=updateDataStr+fAPIName+seperator+d+seperator+selectedType}else{updateDataStr=fAPIName+seperator+d+seperator+selectedType}var b;var f=window.opener;if(f!=null&&typeof(f)!="undefined"){b=f.window.getselectedIds()}updateRecords(b,updateDataStr)}}function callupdatefuntion(){if(isApplyClicked==true){closeWindow()}else{isCalledFromOkbtn=true;formupdatedata()}}function oncompletefunction(b){if(b!=null&&b!=""){if(b==updateMsg){hideWaitbox();Ext.MessageBox.show({width:300,height:150,msg:b,title:MassUpdate,buttons:Ext.MessageBox.OK,fn:function(){if(isCalledFromOkbtn==true){isCalledFromOkbtn=false;closeWindow()}}})}else{if(b==EnterValueMsg){hideWaitbox();isApplyClicked=false;Ext.MessageBox.show({width:250,title:MassUpdate,msg:EnterValueMsg,buttons:Ext.MessageBox.OK})}else{hideWaitbox();var a=new Ext.Window({layout:{type:"vbox",align:"stretch"},width:405,height:150,title:MassUpdate,modal:true,closable:true,resizable:false,autoScroll:true,items:[{xtype:"label",style:"padding:0 5px;",html:NotUpdatedMsg},{xtype:"label",style:"width:318;padding:0 5px;margin-top:8px;background-color: #FFFFFF;margin-left:5px;",html:b},{xtype:"tbspacer",height:"5px"}],buttonAlign:"center",buttons:[{text:"Close",height:"22px",handler:function(){a.close();if(isCalledFromOkbtn==true){isCalledFromOkbtn=false;closeWindow()}}}]}).show()}}}else{hideWaitbox();if(isCalledFromOkbtn==true){isCalledFromOkbtn=false;closeWindow()}}}function closeWindow(){updateDataStr="";var a=window.opener;if(a!=null&&typeof(a)!="undefined"){a.window.GetPageRecords_Remote()}window.close()}function clearData(){document.getElementById(inputTxtId).value="";document.getElementById(inputTxtAreaId).value="";document.getElementById("lookUp").value="";document.getElementById("massupdatePage:massUpdateForm:selectRd").value="";document.getElementById("selectLst").value="";document.getElementById(fieldValueId).value="";document.getElementById(datetimeinputId).value="";document.getElementById(inputDateId).value="";document.getElementById("rchtxtdiv").style.display="none"}function changelookupValues(b,a){if(b!=""&&b!=null){document.getElementById(fieldValueId).value=b;document.getElementById(inputTxtId).value=a}}function assignOwnerfields(b,a,c,d){if(c!=""&&c!=null){document.getElementById(fieldValueId).value=c;document.getElementById(inputTxtId).value=d}else{if(b!=null&&b!=""){document.getElementById(fieldValueId).value=b;document.getElementById(inputTxtId).value=a}}}function openlookuppopup(){var f=fAPIName;var c;var d="";var b;if(f.indexOf("Status__c")>-1||f.indexOf("FKClient__c")>-1||f.indexOf("FKCategory__c")>-1||f.indexOf("FKStaff__c")>-1||f.indexOf("FKOpenBy__c")>-1||lookupObj.indexOf("Category__c")>-1){if(f.indexOf("Status__c")>-1){b="Status__c";d="active_custom";if(parentObj=="Incident__c"){c="status_in"}else{if(parentObj=="Change_Request__c"){c="status_ca"}else{if(parentObj=="Problem__c"){c="status_pr"}else{if(parentObj=="Task__c"){c="status_ta"}else{if(parentObj=="Release__c"){c="status_rm"}else{if(parentObj=="Broadcasts__c"){c="status_br"}}}}}}}if(f.indexOf("FKClient__c")>-1){var b="User";c="active_standard"}if(f.indexOf("FKStaff__c")>-1||f.indexOf("FKOpenBy__c")>-1){var b="User";d="active_standard";c="staffusers"}popupId="";if(lookupObj.indexOf("Category__c")>-1){b="Category__c";d="active_custom";if(parentObj=="Incident__c"&&isServiceRequest.toUpperCase()!="TRUE"){c="cat_in";popupId="incident"}else{if(parentObj=="Incident__c"&&isServiceRequest.toUpperCase()=="TRUE"){c="cat_sr";popupId="incident"}else{if(parentObj=="Change_Request__c"){c="cat_cr";popupId="changerequest"}else{if(parentObj=="Problem__c"){c="cat_pr";popupId="problem"}else{if(parentObj=="Task__c"){c="cat_ta";popupId="task"}else{if(parentObj=="Release__c"){c="cat_rm";popupId="release"}else{if(parentObj=="Broadcasts__c"){c="cat_br";popupId="broadcasts"}}}}}}}}if(Ext.isSafari){var e=new Object;e.changelookupValues=changelookupValues;var a="dialogWidth:800 px;dialogHeight:480;scrollbars:yes;dialogLeft:100;dialogTop:50;status:1;resizable:no;";if(lookupObj=="Category__c"){window.showModalDialog("/apex/StdLayoutCategoryTree?popupId="+popupId+"&objectName="+parentObj+"&isCalledFromConsole=true&state=true&isCustomLookup=false&serviceRequest="+isServiceRequest.toLowerCase()+"&stdForm=false&standardLayout=true&frm=changelookupValues&filterId="+c+"&addlFilterId="+d,e,a)}else{window.showModalDialog("/apex/SearchAndLink?&parentName="+parentObj+"&childName="+b+"&isCalledFromConsole=true&isCustomLookup=false&txt=changelookupValues&filterId="+c+"&addlFilterId="+d,e,a)}}else{if(lookupObj=="Category__c"){window.open("/apex/StdLayoutCategoryTree?popupId="+popupId+"&objectName="+parentObj+"&isCalledFromConsole=true&state=true&isCustomLookup=false&serviceRequest="+isServiceRequest.toLowerCase()+"&stdForm=false&standardLayout=true&frm=changelookupValues&filterId="+c+"&addlFilterId="+d,"_blank","status = 1,height =480, width = 800,left= 100,top=50, resizable = 0,scrollbars=no")}else{window.open("/apex/SearchAndLink?&parentName="+parentObj+"&childName="+b+"&isCalledFromConsole=true&isCustomLookup=false&txt=changelookupValues&filterId="+c+"&addlFilterId="+d,"_blank","status = 1,height =480, width = 800,left= 100,top=50, resizable = 0,scrollbars=no")}}}else{if(f.indexOf("Template__c")>-1){if(parentObj=="Incident__c"){c="temp_in_active"}else{if(parentObj=="Change_Request__c"){c="temp_cr_active"}else{if(parentObj=="Task__c"){c="temp_ta_active"}else{if(parentObj=="Release__c"){c="temp_rm_active"}}}}if(Ext.isSafari){var e=new Object;e.changelookupValues=changelookupValues;var a="dialogWidth:800 px;dialogHeight:480;scrollbars:yes;dialogLeft:100;dialogTop:50;status:1;resizable:no;";window.showModalDialog("/apex/SearchAndLink?&parentName="+parentObj+"&childName=SYSTemplate__c&isCalledFromConsole=true&isCustomLookup=false&txt=changelookupValues&filterId="+c,e,a)}else{window.open("/apex/SearchAndLink?&parentName="+parentObj+"&childName=SYSTemplate__c&isCalledFromConsole=true&isCustomLookup=false&txt=changelookupValues&filterId="+c,"_blank","status = 1,height =480, width = 800,left= 100,top=50, resizable = 0,scrollbars=no")}}else{if(lookupObj=="Group"){if(Ext.isSafari){var e=new Object;e.assignOwnerfields=assignOwnerfields;var a="dialogWidth:1000 px;dialogHeight:600;scrollbars:yes;dialogLeft:100;dialogTop:50;status:1;resizable:no;";window.showModalDialog("/apex/SuggestionPage?ownerType=OWNER&parentObjectName="+parentObj+"&fromInciOwnerLkup=true&changeOwner=true",e,a)}else{window.open("/apex/SuggestionPage?ownerType=OWNER&parentObjectName="+parentObj+"&fromInciOwnerLkup=true&changeOwner=true","_blank","status = 1,height =600, width = 1000,left= 100,top=50, resizable = 0,scrollbars=yes")}}else{if(Ext.isSafari){var e=new Object;e.changelookupValues=changelookupValues;var a="dialogWidth:800 px;dialogHeight:480;scrollbars:yes;dialogLeft:100;dialogTop:50;status:1;resizable:no;";window.showModalDialog("/apex/SearchAndLink?&parentName="+parentObj+"&childName="+lookupObj+"&isCalledFromConsole=true&isCustomLookup=false&txt=changelookupValues",e,a)}else{if(parentObj=="Incident__c"&&lookupObj=="BMC_BaseElement__c"){c="active_be"}window.open("/apex/SearchAndLink?&parentName="+parentObj+"&childName="+lookupObj+"&isCalledFromConsole=true&isCustomLookup=false&txt=changelookupValues&filterId="+c,"_blank","status = 1,height =480, width = 800,left= 100,top=50, resizable = 0,scrollbars=no")}}}}};