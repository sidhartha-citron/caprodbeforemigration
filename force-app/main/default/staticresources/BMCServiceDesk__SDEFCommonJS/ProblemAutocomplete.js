function findIt(c,i,f,j){isAutocomplete=false;var e=document.getElementById(c);var h=document.getElementById(i);j=window.event||j;var d=j.keyCode;if(d==13){selectId=0;SelectValue(e,i);return}var a=escSpeChars(f.value);var b=""+f.id;var g=Ext.isIE8?817:815;if(b.indexOf("Impact")!=-1){list=impactData;if(Ext.isIE7){h.style.top=62+"px";h.style.left=83+"px";e.style.width=130+"px"}if(isDormantSection){h.style.left=g+"px"}}else{if(b.indexOf("Urgency")!=-1){list=urgencyData;if(Ext.isIE7){h.style.top=86+"px";h.style.left=83+"px";e.style.width=130+"px"}if(isDormantSection){h.style.left=g+"px"}}else{if(i.indexOf("Category")!=-1){if(f.value!=""&&f.value!=null){fetchCategoryData(c,i,f,d)}else{e.style.height="0px";document.getElementById(i).style.visibility="hidden"}if(Ext.isIE7){h.style.top=151+"px";h.style.left=91+"px";e.style.width=195+"px"}}}}if(i.indexOf("Category")==-1){findAutoCompleteSelectOptions(c,i,f,d)}}function findAutoCompleteSelectOptions(b,m,l,j){var k=document.getElementById(b);var h=list.length;k.options.length=0;if(l.value.length>0){var c=new RegExp("^"+l.value,"i");var g=null;var e=0;var d="";for(var f=0;f<h;f++){var a=list[f];if(c.test(a.val)){document.getElementById(m).style.visibility="visible";g=document.createElement("option");g.setAttribute("value",a.val);g.setAttribute("id",a.id);g.setAttribute("class","clsOption");g.appendChild(document.createTextNode(a.val));k.appendChild(g);e++}}if(k.options.length>0){if(Ext.isIE7){k.style.height=(e*15)+4+"px"}else{if(Ext.isIE8){k.style.height=(e*13)+2+"px"}else{k.style.height=(e*13)+4+"px"}}}else{k.style.height="0px";document.getElementById(m).style.visibility="hidden"}}else{document.getElementById(m).style.visibility="hidden"}if(k.selectedIndex==-1&&e>selectId){k.selectedIndex=selectId}else{k.selectedIndex=0}switch(j){case 38:if(selectId>0){k.selectedIndex=selectId-1}selectId--;break;case 40:if(selectId<k.options.length-1){k.selectedIndex++;selectId++}else{k.selectedIndex=selectId}break;case 13:selectId=0;SelectValue(k,m);break}}function disableDiv(a){if(isAutocomplete){return}document.getElementById(a).style.visibility="hidden"}function findClients(d,m,l,n){var k=document.getElementById(d);n=window.event||n;iKeyCodeEvt=n.keyCode;selectIdForAutoCom=d;divIdForAutoCom=m;fieldForAutoCom=l;eventFoeAutoCom=n;var e;var h=escSpeChars(l.value);if(l.value.length>=2){if(iKeyCodeEvt==13){selectClientId=0;SelectValue(k,m);return}var b=""+l.id;if(b.indexOf("firstname")!=-1){e="f"}else{if(b.indexOf("lastname")!=-1){e="l"}else{if(b.indexOf("username")!=-1){e="u"}}}if(list!="[]"&&list!=""){var c=new RegExp("^"+h,"i");var f=false;var j=list.length;for(var g=0;g<j;g++){var a=list[g];if(c.test(a[e])){f=true;break}}if(f){findClientOption();f=false}else{document.getElementById(m).style.visibility="hidden";fetchClientData(e,l.value)}}else{document.getElementById(m).style.visibility="hidden";fetchClientData(e,l.value)}}else{document.getElementById(m).style.visibility="hidden"}}function findClientOption(){sel=selectIdForAutoCom;divId=divIdForAutoCom;field=fieldForAutoCom;evt=eventFoeAutoCom;isAutocomplete=false;var o=document.getElementById(sel);var h=document.getElementById(divId);if(iKeyCodeEvt==13){selectClientId=0;SelectValue(o,divId);return}var j;var b="";var c=""+field.id;var e=escSpeChars(field.value);if(c.indexOf("firstname")!=-1){j="f"}else{if(c.indexOf("lastname")!=-1){j="l"}else{if(c.indexOf("username")!=-1){j="u"}}}var n=list.length;o.options.length=0;if(field.value.length>0){var f=new RegExp("^"+e,"i");var l=null;var m=0;var g="";var d=0;for(var k=0;k<n;k++){var a=list[k];if(f.test(a[j])){document.getElementById(divId).style.visibility="visible";l=document.createElement("option");l.setAttribute("value",a[j]);l.setAttribute("id",a.i);if(j=="l"){l.setAttribute("title",a.l+", "+a.f+" - "+a.u);l.appendChild(document.createTextNode(a.l+", "+a.f+" - "+a.u));if(Ext.isIE7){h.style.top=77+"px";h.style.left=91+"px"}}else{if(j=="f"){l.setAttribute("title",a.f+", "+a.l+" - "+a.u);l.appendChild(document.createTextNode(a.f+" "+a.l+" - "+a.u));if(Ext.isIE7){h.style.top=100+"px";h.style.left=91+"px"}}else{if(j=="u"){l.setAttribute("title",a.u+", "+a.l+" - "+a.f);l.appendChild(document.createTextNode(a.u+" - "+a.l+", "+a.f));if(Ext.isIE7){h.style.top=125+"px";h.style.left=91+"px"}}}}o.appendChild(l);b=a.u+" - "+a.l+", "+a.f;if(d<b.length){d=b.length}m++}}if(o.options.length>0){d=(d*6)+20;if(Ext.isIE){o.style.height=(m*13)+2+"px";if(Ext.isIE7){o.style.height=(m*15)+4+"px"}if(d<204){o.style.width=204+"px"}else{o.style.width=d+"px"}}else{o.style.height=(m*13)+5+"px";if(d<204){o.style.width=204+"px"}else{o.style.width=d+"px"}}}else{o.style.height="0px";d=0;document.getElementById(divId).style.visibility="hidden"}}else{d=0;document.getElementById(divId).style.visibility="hidden"}if((o.selectedIndex==-1||o.selectedIndex==0)&&m>selectClientId){o.selectedIndex=selectClientId}else{o.selectedIndex=0}switch(iKeyCodeEvt){case 38:if(selectClientId>0){o.selectedIndex=selectClientId-1}selectClientId--;break;case 40:if(selectClientId<o.options.length-1){o.selectedIndex++;selectClientId++}else{o.selectedIndex=selectClientId}break;case 13:selectClientId=0;SelectValue(o,divId);break}}function fetchClientData(clientFor,searchString){var con=new Ext.data.Connection();con.request({url:"apex/ClientDataPage",method:"POST",params:{clientFor:clientFor,startString:searchString},callback:function(opts,success,response){if(success){var dq=Ext.DomQuery;var xml=response.responseXML;var node=dq.selectNode("data",xml);if(list!=null&&node.firstChild!=null){list=eval("("+node.firstChild.nodeValue+")");findClientOption()}return}}})}function SelectValue(c,d){var b=c.selectedIndex;var g="";if(b>-1){g=c.options[b];if(d.indexOf("Impact")!=-1){document.getElementById(impId).value=g.value;document.getElementById(ProblemPageComp.ComponentVars.ImpactID).value=g.id;FetchPriorityHTTP()}else{if(d.indexOf("Urgency")!=-1){document.getElementById(urgId).value=g.value;document.getElementById(ProblemPageComp.ComponentVars.UrgencyID).value=g.id;FetchPriorityHTTP()}else{if(d.indexOf("Category")!=-1){document.getElementById(catIdVal).value=g.value;var a=list.length;for(var f=0;f<a;f++){var e=list[f];if(e.id==g.id){document.getElementById(ProblemPageComp.ComponentVars.CategoryID).value=g.id;document.getElementById(ProblemPageComp.ComponentVars.CategoryFKUrgency).value=e.u;FetchUrgencyHTTP();break}}}else{if(d.indexOf("ClientLN")!=-1||d.indexOf("ClientFN")!=-1||d.indexOf("ClientUN")!=-1){var a=list.length;for(var f=0;f<a;f++){var e=list[f];if(e.i==g.id){document.getElementById(clLname).value=e.l;document.getElementById(clFname).value=e.f;document.getElementById(clUname).value=e.u;document.getElementById(ProblemPageComp.ComponentVars.UserID).value=g.id;FetchUrgencyHTTP();break}}}}}}isAutocomplete=true}document.getElementById(d).style.visibility="hidden"};