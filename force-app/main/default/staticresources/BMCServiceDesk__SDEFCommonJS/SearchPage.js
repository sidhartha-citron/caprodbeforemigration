var isCmdbFilterChanged=false;var waitMessage="";var MetadataArr={};var isQueueLinkClicked=false;var isQueueMembersFetched=false;var functionCalled=true;var activeWindowFlag=true;var EF;var SLTGridClass="";var ServiceTargetHelpLink;var SLTMenuBarClass="";var viewport;var queueLabel="";var isExecuting=false;var defaultfocus=true;var priorityArray=new Array();priorityArray[1]="priority1-16.gif";priorityArray[2]="priority2-16.gif";priorityArray[3]="priority3-16.gif";priorityArray[4]="priority4-16.gif";priorityArray[5]="priority5-16.gif";priorityArray[6]="priority6-16.gif";var isOnlyQueueList=false,isStaffViewChangeDisabled=false,hideQueueMembersGird=true,selectedCIFilter=null,FilterObjectId="",qmGrid,qMembersStr="[]",qmGridHeader,qMemType,qMemName,qMemStore;var waitingMask;var changeToolTip;document.onclick=activateSerachpageWindow;Ext.ns("Ext.ux");Ext.ux.PanelCollapsedTitle=(function(){var a="x-panel-header-rotated";var c=!!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1");var b=function(){var h=((this.region=="east")||(this.region=="west"));var i="overflow: visible; padding: 0; border: none; background: none;";if(h&&c){this.collapsedHeader=this.ownerCt.layout[this.region].getCollapsedEl().createChild({tag:"div",style:"height: 100%; overflow: hidden;"});var g="http://www.w3.org/2000/svg";var f=document.createElementNS(g,"svg");this.collapsedHeader.dom.appendChild(f);f.setAttribute("width","100%");f.setAttribute("height","100%");var l=document.createElementNS(g,"text");l.setAttribute("x",6);l.setAttribute("y",1);l.setAttribute("transform","rotate(90 6 1)");l.setAttribute("class","x-panel-header "+a);f.appendChild(l);this.collapsedHeaderText=document.createTextNode(this.title);l.appendChild(this.collapsedHeaderText);var e=Ext.fly(l).getStyle("color");l.setAttribute("style",i+";fill: "+e+";")}else{var d="position: relative;";if(h){d+="white-space: nowrap; writing-mode: tb-rl; top: 1px; left: 3px;"}else{d+="top: 2px;";i+="padding-left: 4px; margin-right: 18px;"}this.collapsedHeader=this.ownerCt.layout[this.region].getCollapsedEl().createChild({tag:"div",style:i,cls:"x-panel-header "+a,html:'<span style="'+d+'">'+this.title+"</span>"});this.collapsedHeaderText=this.collapsedHeader.first()}if(this.collapsedIconCls){this.setCollapsedIconClass(this.collapsedIconCls)}};this.init=function(e){if(e.collapsible){var d=((e.region=="east")||(e.region=="west"));e.setTitle=Ext.Panel.prototype.setTitle.createSequence(function(f){if(this.rendered&&this.collapsedHeaderText){if(this.collapsedHeaderText.dom){RemedyForceHTMLProcessor.clearHTML(this.collapsedHeaderText.dom);this.collapsedHeaderText.dom.appendChild(document.createTextNode(f))}else{if(this.collapsedHeaderText.replaceData){this.collapsedHeaderText.nodeValue=f}}}});e.setCollapsedIconClass=function(g){var f=this.collapsedIconCls;this.collapsedIconCls=g;if(this.rendered&&this.collapsedHeader){var i=this.collapsedHeader,h=i.child("img.x-panel-inline-icon");if(h){if(this.collapsedIconCls){Ext.fly(h).replaceClass(f,this.collapsedIconCls)}else{Ext.fly(h).remove()}}else{if(this.collapsedIconCls){Ext.DomHelper.insertBefore(i.dom.firstChild,{tag:"img",src:Ext.BLANK_IMAGE_URL,cls:"x-panel-inline-icon "+this.collapsedIconCls,style:d?"display: block; margin: 1px 2px;":"margin-top: 2px; margin-right: 4px"})}}}};e.on("render",function(){if(this.ownerCt.rendered&&this.ownerCt.layout.hasLayout){b.call(e)}else{this.ownerCt.on("afterlayout",b,e,{single:true})}},e)}};return this})();Ext.menu.MenuNav=Ext.extend(Ext.KeyNav,function(){function a(d,c){if(!c.tryActivate(c.items.indexOf(c.activeItem)-1,-1)){c.tryActivate(c.items.length-1,-1)}}function b(d,c){if(!c.tryActivate(c.items.indexOf(c.activeItem)+1,1)){c.tryActivate(0,1)}}return{constructor:function(c){Ext.menu.MenuNav.superclass.constructor.call(this,c.el);this.scope=this.menu=c},doRelay:function(f,d){var c=f.getKey();if(!this.menu.activeItem&&f.isNavKeyPress()&&c!=f.SPACE&&c!=f.RETURN){this.menu.tryActivate(0,1);return false}return d.call(this.scope||this,f,this.menu)},tab:function(d,c){d.stopEvent();if(d.shiftKey){a(d,c)}else{b(d,c)}},up:a,down:b,right:function(f,c){var d=c.activeItem;if(d){return true;c.activeItem.expandMenu(true)}},left:function(f,c){var d=c.activeItem;if(d){return true}c.hide();if(c.parentMenu&&c.parentMenu.activeItem){c.parentMenu.activeItem.activate()}},enter:function(d,c){if(c.activeItem){d.stopPropagation();c.activeItem.onClick(d);c.fireEvent("click",this,c.activeItem);return true}}}}());function addtabWithProgressJS(g,b){var f=pageName;var a=g;var h=b;var d=windowTitle+" #"+h;var i=getStandardLayout();if(popUpId=="SYSBRInformation"||popUpId=="Template"||popUpId=="SSTemplate"||popUpId=="Model"){if(!i){window.parent.addTab(f+"?id="+objectId+"&columnField="+columnField+"&direction="+direction,h,h)}else{window.parent.addTab(f+"?standardLayout=true&id="+objectId+"&columnField="+columnField+"&direction="+direction,h,h)}}else{if(popUpId=="Task"){var l=isUserPermitted("new");var c=isUserPermitted("delete");var e=isUserPermitted("update");window.parent.addTab(f+"?id="+objectId+"&columnField="+columnField+"&direction="+direction+"&isCreateable="+l+"&isDeletable="+c+"&isUpdateable="+e,"#"+h,"#"+h)}else{window.parent.addTab(f+"?id="+objectId+"&columnField="+columnField+"&direction="+direction,"#"+h,"#"+h)}}}function shState(e,c,a,f,d,b){return""+e=="true"?labelOpened:labelClosed}function shDefStatus(e,c,a,f,d,b){return""+e=="true"?labelYes:labelNo}function shBooleanData(e,c,a,f,d,b){return""+e=="true"?labelTrue:labelFalse}function addToolTip(f,a,b,g,d,c){var e=""+f;a.attr='title="'+f+'"';return f}function modBrInfo(e,c,a,f,d,b){if(e.toLowerCase()=="brinboundemail__c"){e="Mail Listen"}if(e.indexOf("__c")!=-1){e=e.substring(0,e.indexOf("__c"))}if(e.indexOf("__C")!=-1){e=e.substring(0,e.indexOf("__C"))}return""+e}var deletedIds;function getSelectedIds(){var b="";var a=grid.getSelectionModel().getSelections();for(j=0;j<a.length;j++){b=b+a[j].get(cols[0])+","}if(b!=null&&b!=""){b=b.substring(0,b.length-1)}deletedIds=b.split(",");return b}function validateSelection(){return true}function shNew(a){if(popUpId=="SLT"&&parent.agreementTypePicklist){targetType=parent.agreementTypePicklist.value}activeWindowFlag=false;setObjId("")}function activeObj(){if(idList!=null){activeObject(idList)}}function inActiveObj(){if(idList!=null){inActiveObject(idList)}}var uq=null;var srchUserorQueueHandler=function(b,a){if(a){uq=b.inputValue}};var FilterOnCI=function(b,a){if(a){selectedCIFilter=b.inputValue;isCIRadioChecked=a}};function doApply(){if(selectedCIFilter==labelAll){CIRefresh(isCIRadioChecked);return}var b=getUrlParameter("standardLayout");var c=getUrlParameter("id");var e=getObjName();if(uq!=null){var f="";if(isLookup){f="&isLookup="+isLookup}if(isSuggestExpert=="true"||isSuggestExpert==true){if(uq==queueLabel&&!firstTime){if(typeof(window.parent.setSelectedModuleName)!="undefined"){window.parent.setSelectedModuleName("queue")}if(qFor.indexOf("Incident__c")!=-1){if(b=="true"||b==true){window.location="/apex/SearchPage?id="+c+"&objName="+e+"&popupFor=Assignto&standardLayout=true&standardLayoutCategory=true&popupId=Queue&additional_columns=Queue.Name,QueueId&filterObjectId="+parentCategoryName+"&isSuggestExpert=true&isQueurorUser=true&filterClause="+escape("sobjectType='"+qFor+"'")+"&queueFor="+qFor+f}else{window.location="/apex/SearchPage?popupId=Queue&additional_columns=Queue.Name,QueueId&filterObjectId="+parentCategoryName+"&isSuggestExpert=true&isQueurorUser=true&filterClause="+escape("sobjectType='"+qFor+"'")+"&queueFor="+qFor+f}}else{if(b=="true"||b==true){window.location="/apex/SearchPage?id="+c+"&objName="+e+"&popupFor=Assignto&standardLayout=true&standardLayoutCategory=true&popupId=Queue&filterObjectId="+parentCategoryName+"&isSuggestExpert=true&isQueurorUser=true&filterClause="+escape("sobjectType='"+qFor+"'")+"&queueFor="+qFor+f}else{window.location="/apex/SearchPage?popupId=Queue&filterObjectId="+parentCategoryName+"&isSuggestExpert=true&isQueurorUser=true&filterClause="+escape("sobjectType='"+qFor+"'")+"&queueFor="+qFor+f}}}else{if(typeof(window.parent.setSelectedModuleName)!="undefined"){window.parent.setSelectedModuleName("staff")}if(qFor.indexOf("Incident__c")!=-1){if(b=="true"||b==true){window.location="/apex/SearchPage?id="+c+"&objName="+e+"&popupFor=Assignto&standardLayout=true&standardLayoutCategory=true&popupId=SuggestedStaff&isQueurorUser=true&isSuggestExpert=true&additional_columns=FKUser__r.firstname,FKUser__r.lastname,FKUser__r.phone,FKUser__r.extension,FKUser__r.email,FKUser__r.ProfileId,FKUser__r.Profile.Name,QueueName__c,QueueId__c,FKUser__r.Id&categoryId="+parentCategoryName+"&queueFor="+queueFor+"&filterClause="+escape("FKUser__r.IsStaffUser__c%3Dtrue")+f}else{window.location="/apex/SearchPage?popupId=SuggestedStaff&isQueurorUser=true&isSuggestExpert=true&additional_columns=FKUser__r.firstname,FKUser__r.lastname,FKUser__r.phone,FKUser__r.extension,FKUser__r.email,FKUser__r.ProfileId,FKUser__r.Profile.Name,QueueName__c,QueueId__c,FKUser__r.Id&categoryId="+parentCategoryName+"&queueFor="+queueFor+"&filterClause="+escape("FKUser__r.IsStaffUser__c%3Dtrue")+f}}else{if(b=="true"||b==true){window.location="/apex/SearchPage?id="+c+"&objName="+e+"&popupFor=Assignto&standardLayout=true&standardLayoutCategory=true&popupId=SuggestedStaff&isQueurorUser=true&isSuggestExpert=true&categoryId="+parentCategoryName+"&queueFor="+queueFor+"&filterClause="+escape("FKUser__r.IsStaffUser__c%3Dtrue")+f}else{window.location="/apex/SearchPage?popupId=SuggestedStaff&isQueurorUser=true&isSuggestExpert=true&categoryId="+parentCategoryName+"&queueFor="+queueFor+"&filterClause="+escape("FKUser__r.IsStaffUser__c%3Dtrue")+f}}}}else{var a=getUrlParameter("isFromSLT");var g="";var d="";if(a==true||a=="true"&&moduleId!="ownerid"){g="&idNameForPopUp=true";d="&isFromSLT=true"}if(uq==queueLabel&&!firstTime){if(b=="true"||b==true){window.location="/apex/SearchPage?id="+c+"&objName="+e+"&popupFor=Assignto&standardLayout=true&popupId=Queue&filterObjectId=&isQueurorUser=true&filterClause="+escape("sobjectType='"+qFor+"'")+"&queueFor="+qFor+f}else{if(moduleId=="ownerid"&&moduleName=="BMC_BASEELEMENT__c"){window.location="/apex/SearchPage?moduleId=ownerid&isLookup=true&popupId=Queue&isLookup=true&isQueurorUser=true&queueFor="+moduleName+"&moduleName="+moduleName}if(moduleId!="ownerid"&&moduleName!="BMC_BASEELEMENT__c"){window.location="/apex/SearchPage?popupId=Queue&filterObjectId=&isQueurorUser=true&filterClause="+escape("sobjectType='"+qFor+"'")+"&queueFor="+qFor+f+g+d}}}else{if(moduleId=="ownerid"&&moduleName=="BMC_BASEELEMENT__c"){window.location="/apex/SearchPage?moduleId=ownerid&isLookup=true&popupId=Client&isQueurorUser=true&queueFor=BMC_BASEELEMENT__c&filterClause=IsStaffUser__c%253Dtrue&moduleName="+moduleName}else{window.location="/apex/SearchPage?popupId=Client&isQueurorUser=true&queueFor="+queueFor+"&filterClause="+escape("IsStaffUser__c%3Dtrue")+f+g+d}}}firstTime=false;uq=null}else{if(selectedCIFilter!=null&&pageSource=="BMC_BaseElement"){if(b=="true"||b==true){if(isCalledFromConsole=="true"){window.location="SearchPage?popupId=BMC_BaseElement&isCalledFromConsole=true&isLookup=true&standardLayout=true&filterObjectId="+FilterObjectId+"&isFilterObject=true&parentName=Incident__c&isRadioChecked=true&selectedCIFilter="+selectedCIFilter+"&accountId="+accountId+"&incidentId="+incidentId+"&incCiId="+incCiId+"&incServiceId="+incServiceId+"&moduleId="+moduleId+"&moduleName="+moduleName+"&PrimaryLinkCI="+isPrimaryCI}else{window.location="SearchPage?popupId=BMC_BaseElement&isCalledFromConsole=false&isLookup=true&standardLayout=true&filterObjectId="+FilterObjectId+"&isFilterObject=true&parentName=Incident__c&isRadioChecked=true&selectedCIFilter="+selectedCIFilter+"&accountId="+accountId+"&incidentId="+incidentId+"&incCiId="+incCiId+"&incServiceId="+incServiceId+"&moduleId="+moduleId+"&moduleName="+moduleName+"&PrimaryLinkCI="+isPrimaryCI}}else{if(isCalledFromConsole=="true"){window.location="SearchPage?popupId=BMC_BaseElement&isCalledFromConsole=true&isLookup=true&filterObjectId="+FilterObjectId+"&isFilterObject=true&parentName=Incident__c&isRadioChecked=true&selectedCIFilter="+selectedCIFilter+"&accountId="+accountId+"&incidentId="+incidentId+"&incCiId="+incCiId+"&incServiceId="+incServiceId+"&moduleId="+moduleId+"&moduleName="+moduleName+"&PrimaryLinkCI="+isPrimaryCI}else{window.location="SearchPage?popupId=BMC_BaseElement&isCalledFromConsole=false&isLookup=true&filterObjectId="+FilterObjectId+"&isFilterObject=true&parentName=Incident__c&isRadioChecked=true&selectedCIFilter="+selectedCIFilter+"&accountId="+accountId+"&incidentId="+incidentId+"&incCiId="+incCiId+"&incServiceId="+incServiceId+"&moduleId="+moduleId+"&moduleName="+moduleName+"&PrimaryLinkCI="+isPrimaryCI}}}else{createCookie();pageSearch();if(!isLookup){callCount=0;parseLimit=Ext.util.Cookies.get(cookieName);autoRefresh()}}}}function getValidData(a){if(a==null||a==""){return"-"}return a}function getColsIdxForHeader(a){for(i1=0;i1<colsHdrs.length;i1++){if(colsHdrs[i1]==a){return i1}}}var shMineHandler=function(b,a){document.getElementById("shMine").value=a};var srchInaHandler=function(b,a){setOptions("inactiveOption",b,a)};var srchMarkAsDeleteHandler=function(b,a){setOptions("markAsDeletedOption",b,a)};var srchStatusFilterHandler=function(b,a){setOptions("statusFilter",b,a)};var srchServiceRequestHandler=function(b,a){setOptions("incidentOption",b,a)};var srchCategoryFilterHandler=function(b,a){setOptions("categoryOption",b,a)};var srchStaHandler=function(b,a){setOptions("stateOption",b,a)};var remedyAccHandler=function(b,a){document.getElementById("remedyAccOption").value=a};var NextBtnHandler=function(a,b){if(hasNext){doNext()}};var PreviousBtnHandler=function(a,b){if(hasPrevious){doPrevious()}};function getParam(g,f){var e="";if(g.indexOf("?")>-1){var d=g.substr(g.indexOf("?")+1);var a=d.split("&");for(var c=0;c<a.length;c++){var b=a[c].split("=");if(b[0]==f){e=b[1];break}}}return unescape(e)}function setOptions(a,c,b){if(a=="categoryOption"){if(b){document.getElementById(a).value=c.inputValue}}else{if(b){document.getElementById(a).value=document.getElementById(a).value+c.inputValue+","}else{document.getElementById(a).value=","+document.getElementById(a).value;while(document.getElementById(a).value.indexOf(","+c.inputValue+",")!=-1){document.getElementById(a).value=document.getElementById(a).value.replace(","+c.inputValue+",",",")}while(document.getElementById(a).value.indexOf(",,")!=-1){document.getElementById(a).value=document.getElementById(a).value.replace(",,",",")}}}}function changeGrouping(){var c=Ext.getCmp("groupoptions");var a=c.getValue();if(a!=selectedfield){selectedfield=a;if(a=="queueid"){selectedfield="queue_name"}for(j=0;cols.length>j;j++){if(cols[j]!=null&&cols[j]!=""&&cols[j]!="null"&&cols[j].match("__r_")!=null){cols[j]=cols[j].replace("__r_","__r.")}else{if(cols[j]=="Owner_userName"){cols[j]="Owner.userName"}else{if(cols[j].toLowerCase()=="parent_name"){cols[j]="parent.name"}else{if(cols[j].toLowerCase()=="cmdbclasstype__c"){if(colsHdrs[j].indexOf(lblCMDBCIClass)==-1){colsHdrs[j]=colsHdrs[j]+" ("+lblCMDBCIClass+")"}}}}}grid.getColumnModel().setColumnHeader(j,colsHdrs[j])}var b=selectedfield;if(b!=null&&b!=""&&b.match("__r_")!=null){b=b.replace("__r_","__r.")}else{if(b=="Owner_userName"){b="Owner.userName"}}order="ASC";doGrouping();pageRefresh()}}function AppplyCMDBClassFilter(){var c=Ext.getCmp("showCMDBClassFilters");var a=c.getValue();if(a!=selectedCMDBClassFilter){selectedCMDBClassFilter=a;isApplyCMDBClassFilter=true;isCmdbFilterChanged=true;var b=Ext.getCmp("maindatagrid");b.store.groupField="";selectedfield="";showWaitMsgBar();pageRefreshCMDBFilter(a)}}function doGrouping(){var a=Ext.getCmp("maindatagrid");a.store.groupField=selectedfield;a.store.groupDir=getGroupDir(selectedfield);if(typeof(a.store.sortInfo)=="undefined"||a.store.sortInfo==null){a.store.sortInfo={field:"",direction:""}}a.store.sortInfo.field=selectedfield;a.store.sortInfo.direction=order;columnField=sortColumn;if(a!=null){if(selectedfield!=null&&selectedfield!=""){a.getStore().sortInfo.field=sortColumn;a.getStore().sortInfo.direction=order}else{a.getStore().sortInfo=null}}a.store.groupField=selectedfield;if(selectedfield=="queue_name"){selectedfield="queueid"}isCmdbFilterChanged=false}function getGroupDir(a){if(a=="Abstract__c"||a=="IsCustomClass__c"||a=="Exposure__c"){return"DESC"}else{return"ASC"}}function extInit(){loadingData();var d=new Date();var g=d.getTime();Nwlatency=g-serverendtime;Ext.override(Ext.data.Store,{sortData:function(m,n){n=n||"ASC";var i=this.fields.get(m).sortType;if(i!=null){var l=function(p,o){var r=i(p.data[m]),q=i(o.data[m]);if(typeof(r.toLowerCase)=="function"){r=r.toLowerCase();q=q.toLowerCase()}return r>q?1:(r<q?-1:0)}}this.data.sort(n,l);if(this.snapshot&&this.snapshot!=this.data){this.snapshot.sort(n,l)}}});var b=labelServerTime;var f=endtime-starttime;lookupdata="";lookupdata+=b;f=f+vservertime;lookupdata+=f;lookupdata+="<br>";lookupdata+=labelLatency;lookupdata+=Nwlatency;lookupdata+="<br>";var h=document.getElementById("grid");RemedyForceHTMLProcessor.clearHTML(h);h.appendChild(document.createTextNode(""));renderMenuBar();renderGrid();renderQueueMembers();renderAdvSearch();if(document.getElementById("deleteId")!=null&&typeof document.getElementById("deleteId")!="undefined"){if(popUpId=="SLT"||popUpId=="Suggested_Owner"){Ext.getCmp("deleteId").setDisabled(true);Ext.getCmp("deleteId").setIconClass("bmcDeleteSLTDisable")}else{Ext.getCmp("deleteId").setDisabled(true);Ext.getCmp("deleteId").setIconClass("bmcDeleteDisable")}}if(document.getElementById("copyId")!=null&&typeof document.getElementById("copyId")!="undefined"){Ext.getCmp("copyId").setDisabled(true);Ext.getCmp("copyId").setIconClass("bmcCopyDisable")}if(document.getElementById("btnSRMActions")!=null&&typeof document.getElementById("btnSRMActions")!="undefined"){if(isUserPermitted("new")){if(popUpId=="SRM_RequestDefinition"){Ext.getCmp("btnSRMActions").setDisabled(false);Ext.getCmp("btnSRMActions").setIconClass("bmcAction1")}}else{Ext.getCmp("btnSRMActions").setDisabled(true);Ext.getCmp("btnSRMActions").setIconClass("bmcAction")}}if(Ext.getCmp("txtSrch")!=null&&defaultfocus){Ext.getCmp("txtSrch").focus(true)}if(typeof(Ext.getCmp("prevId"))!="undefined"){Ext.getCmp("prevId").setDisabled(getNextPrevState(true))}if(typeof(Ext.getCmp("nextId"))!="undefined"){Ext.getCmp("nextId").setDisabled(getNextPrevState(false))}Ext.getCmp("waitMsgId").hide();var a=new Date();var e=a.getTime();var c=e-g;lookupdata+=labelPageLoad;lookupdata+=c;document.getElementById("lookupdataval").value=lookupdata;if(resultSet.length==0&&!isSearchHasDone){pageRefresh()}if(isOnlyQueueList=="true"||popUpId=="Document"||isStaffViewChangeDisabled=="true"||(isFromFulfillment!=undefined&&isFromFulfillment!="undefined"&&isFromFulfillment=="true")){Ext.getCmp("btnView").setDisabled(true)}}function renderMenuBar(){Ext.QuickTips.init();var a=Ext.extend(Ext.Panel,{renderTo:"grid",border:false,defaults:{bodyStyle:"padding:0px;margin:0px;zoom:0px;"}});if(requestType!=null&&requestType=="service"){for(j=tbarOptions.length-1;j>0;j--){if(j<=17){tbarOptions.splice(j,1)}}tbarOptions[0]={xtype:"tbspacer",height:32}}mnuBar=new a({border:true,bodyStyle:"padding:0px;margin:0px;zoom:0px;",cls:"mnuBarCls",tbar:tbarOptions,id:"mnuBarId"});if(getCopyDisabled()&&Ext.getCmp("copyId")!=null){Ext.getCmp("copyId").disabled=true;Ext.getCmp("copyId").setIconClass("bmcCopyDisable")}if(document.getElementById("GroupByLabelId")!=null&&document.getElementById("GroupByLabelId")!="undefined"){document.getElementById("GroupByLabelId").title=groupByLabelTooltip}if(document.getElementById("ShowAllCILabel")!=null&&document.getElementById("ShowAllCILabel")!="undefined"){document.getElementById("ShowAllCILabel").title=showAllCITooltip}}function renderAdvSearch(){if(viewport!=null){if(popUpId=="Normalization_Exception"){reconfigureGrid(grid.store)}return}viewport=new Ext.Viewport({layout:"border",cls:"viewportSearchCls",items:[{region:"center",margins:"35 0 0 0",layout:"fit",items:[grid]},{id:"queueMemberGrid",region:"south",collapsible:true,collapsed:true,layout:"fit",title:qmGridHeader,items:[qmGrid],height:qmGridHeight,hidden:hideQueueMembersGird,floatable:false,cmargins:{top:0,right:0,bottom:0,left:0},plugins:new Ext.ux.collapsedPanelTitlePlugin()}]});var a=Ext.getCmp("queueMemberGrid");a.on("expand",function(){if(isOnlyQueueList=="true"||popUpId=="Queue"){var c=grid.getSelectionModel();var b=c.getSelected();if(b==null||b=="undefined"||typeof(b)=="undefined"){c.selectFirstRow()}}})}function loadingData(){var a=new Ext.Window({id:"waitMsgId",height:100,width:200,resizable:false,closable:false,header:false,frame:false,shadow:false,items:[{xtype:"panel",height:100,modal:false,width:200,bodyStyle:"background-color:transparent;border:none;",html:'<div align="center"><img src="'+getSDEFExtJSResPath()+'/resources/images/default/shared/blue-loading.gif"/></div>'}]});a.show()}function chkForChangeBeforeDelete(){var d;var c;var b=getUrlParameter("isFromRule");if(popUpId=="SLT"||b=="true"){d=window.parent.parent.idArray[selectedId];c=window.parent.parent.changeArray[d]}else{if(popUpId=="Suggested_Owner"){d=window.parent.parent.idArray[selectedId];c=window.parent.parent.changeArray[d]}else{d=window.parent.idArray[selectedId];c=window.parent.changeArray[d]}}var a=false;if(c!=null&&typeof(c)!="undefined"&&c!=-1){Ext.Msg.show({title:labelcloseWindow,msg:labelcloseWindowLabel,buttons:Ext.Msg.YESNO,fn:function(e){if(e=="yes"){deleteObj();if(popUpId=="Suggested_Owner"){window.parent.parent.changeArray[d]=null}else{window.parent.changeArray[d]=null}}},icon:Ext.MessageBox.WARNING})}else{deleteObj()}}function afterDelete(){window.parent.handleDelet(selectedId)}function deleteOwnerCriteria(){if(popUpId=="Suggested_Owner"){window.parent.grid.hide();window.parent.grid_staff.hide()}}function afterMultiDelete(){window.parent.handleMultiDelet(deletedIds)}function showRecord(b){isQueueLinkClicked=true;if(IsServiceTargetPopup()){return}activeWindowFlag=false;var c=grid.getSelectionModel().getSelected();var a=c.get("additional_info__c");if(c!=null){setObjId(c.get(idFld),c.get(nameFld),a,b)}}function setObjIdJS(m,F,c,g,f,L){setIdSet();popUpId=c;var p=false;var o=g;var h;var v="Search";var u="Search";var d=getStandardLayout();var J=getPopupFor();var l=getObjName();if((o=="")||(o==null)){if(popUpId=="Normalization_Exception"){var i=grid.getSelectionModel().getSelected();var H,s="Pending";var b=i.get("Pending_Count__c");var K=i.get("Id");if(typeof(L)!="undefined"&&L=="approved_count__c"){s="Approved";b=i.get("Approved_Count__c");if(typeof(MetadataArr[K])!="undefined"&&MetadataArr[K]!=b){p=true}MetadataArr[K]=b}if(s=="Approved"){H=lblApproved}else{H=lblPending}u=ExceptionHeader+": "+H+" ("+b+")";h="AdminNormalizationTransactions";window.parent.addTab(h+"?status="+s+"&MetadataId="+K+"&masterId="+K+s,ExceptionHeader,u,p)}else{if(popUpId=="Template"&&tempParentName=="chatterListner"){window.parent.setTemplateID(m,F);window.parent.closePopupRF()}else{if(popUpId=="Template"){var y=grid.getSelectionModel().getSelected();var w=y.get("hasrecurrence__c");if(w!=null&&typeof(w)!="undefined"&&w!="undefined"&&w==labelYes){Ext.MessageBox.show({msg:recurringeTemplateWarning,width:450,buttons:Ext.MessageBox.YESNO,icon:Ext.MessageBox.QUESTION,fn:function(M){if(M=="yes"){if(idNameForPopUp){var N=m+""+EF+""+selectedName;window.parent.setPopUpVar(N)}else{window.parent.setPopUpVar(m,f)}if(moduleId!=null&&moduleId!=""){window.parent.setPopUpValue(id,selectedName)}if(typeof(window.parent.closePopup1)=="function"){window.parent.closePopup1()}else{window.parent.closePopup()}}}});return}}else{if(popUpId=="Client"&&tempParentName=="chatterListner"){window.parent.setClientID(m,F);window.parent.closePopupRF()}}}}if(idNameForPopUp){var x=m+""+EF+""+F;window.parent.setPopUpVar(x)}else{if(isAssignTo&&(!(d)||d==null||d=="")){performAssignTo(grid.getSelectionModel().getSelected());return}if(isCalledFromSHD=="true"&&popUpId=="Organization"){window.opener.setPopUpVar(m,F,f)}else{window.parent.setPopUpVar(m,f)}if((d)&&(J=="incidentsforclient"||J=="incidentsforcategory")){mywindow1=window.open("/"+m,null,"status=1,height=1000,width=1000,resizable=0");mywindow1.opener.close()}else{if((d)&&J=="Assignto"){if(popUpId=="Queue"){setAssignedToSuggestedStaffNext(m,l)}else{if(popUpId=="Client"){window.opener.setAssignedToStaffNext(m)}else{if(popUpId=="SuggestedStaff"){setAssignedToSuggestedStaffNext(m,l)}}}}else{if((d)&&J=="QueueAssignment"){if(popUpId=="Queue"){window.opener.queueId=m;window.opener.setQueueId(m);if(isQueueMembersFetched){window.close()}}else{if(popUpId=="Client"){window.opener.staffId=m;window.opener.setStaffId(m);window.close()}}}else{if((d)&&popUpId=="Profile"){window.opener.populateProfileNames(F);window.close()}else{if((d)&&popUpId=="Action"&&functionCalled==true){addToHistory(m)}else{if((d)&&popUpId=="BMC_BaseElement"&&functionCalled==true){var q=m;if(tempParentName=="Incident__c"){if(isPrimaryCI!=null&&isPrimaryCI!=""&&isPrimaryCI=="true"){if(isCalledFromConsole=="true"){window.parent.setPrimaryCI(q,F);window.parent.reloadIncidentform()}else{linkPrimaryCIIncident(q)}}else{linkCIIncident(q)}}if(tempParentName=="Change_Request__c"){linkCIChange(m)}if(tempParentName=="Problem__c"){linkCIProblem(m)}if(tempParentName=="Task__c"){linkCITask(m)}if(tempParentName=="Release__c"){linkCIRelease(m)}}else{if((d)&&popUpId=="Problem"&&tempParentName=="Change_Request__c"&&functionCalled==true){linkProblemToChange(m)}else{if((d)&&popUpId=="Change"&&tempParentName=="Incident__c"&&functionCalled==true){linkCRtToInc(m)}else{if((d)&&popUpId=="Change"&&tempParentName=="Problem__c"&&functionCalled==true){linkChangeToProblem(m)}else{if((d)&&popUpId=="Incident"&&tempParentName=="Change_Request__c"&&functionCalled==true){linkIncidentToChange(m)}else{if((d)&&popUpId=="Incident"&&tempParentName=="Problem__c"&&functionCalled==true){linkIncidentToProblem(m)}else{if((d)&&popUpId=="Problem"&&tempParentName=="Incident__c"&&functionCalled==true){linkProblemToIncident(m)}else{if((d)&&popUpId=="Problem"&&tempParentName=="Release__c"&&functionCalled==true){linkProblemToRelease(m)}else{if((d)&&popUpId=="Change"&&tempParentName=="Release__c"&&functionCalled==true){linkChangeToRelease(m)}else{if((d)&&popUpId=="Incident"&&tempParentName=="Release__c"&&functionCalled==true){linkIncidentToRelease(m)}else{if((d)&&popUpId=="Release"&&tempParentName=="Problem__c"&&functionCalled==true){linkReleaseToProblem(m)}else{if((d)&&popUpId=="Release"&&tempParentName=="Incident__c"&&functionCalled==true){linkReleaseToIncident(m)}else{if((d)&&popUpId=="Release"&&tempParentName=="Change_Request__c"&&functionCalled==true){linkReleaseToChange(m)}else{if((d)&&popUpId=="KnowledgeArticle"&&tempParentName=="Change_Request__c"&&functionCalled==true){linkKnowledgeArticleToChange(m)}else{if((d)&&popUpId=="KnowledgeArticle"&&tempParentName=="Problem__c"&&functionCalled==true){linkKnowledgeArticleToProblem(m)}else{if(broadcastLink){linkBroadcastInc(m)}}}}}}}}}}}}}}}}}}}}}functionCalled=false}var E=getUrlParameter("isFromCMDB");var e=getUrlParameter("ifFromModelMapping");var z=getUrlParameter("isFromSearchFilter");if(isOnBehalfOf=="true"&&isStdPage=="true"&&popUpId=="Client"){var G=grid.getSelectionModel().getSelected();f=G.get("additional_info__c");window.opener.setPopUpVar1(m,f);return}else{if(isStdPage&&popUpId=="Client"){window.parent.setPopUpVar(m,f)}else{if(isStdPage){window.opener.lookupPick2(frmFld,textFld+"_lkid",textFld,m,F,false)}else{if(moduleId!=null&&moduleId!=""&&(E==undefined||E=="undefined"||E=="")&&(e==undefined||e=="undefined"||e=="")&&(z==undefined||z=="undefined"||z=="")){window.parent.setPopUpValue(m,F);if(popUpId=="Model"){window.parent.applyModelAttribute(m)}}}}}if(typeof(window.parent.closePopup1)=="function"){window.parent.closePopup1()}else{var n=getUrlParameter("isFromModel")}if(n=="true"){window.parent.closeExtPopup()}else{if(E!=undefined&&E!="undefined"&&E=="true"){window.opener.setPopUpValue(m,F);window.close()}else{if(e!=undefined&&e!="undefined"&&e=="true"){window.opener.document.getElementById("thePage:modelForm:inputTxt").value=F;window.opener.document.getElementById("referenceID").value=m;window.opener.lookupSelectedValue=F;window.opener.lookupSelectedId=m;window.close()}else{if(z!=undefined&&z!="undefined"&&z=="true"){window.close()}else{if(window.parent.closePopupRF!=undefined){window.parent.closePopupRF()}else{window.parent.closePopupForLightningNow()}}}}}}else{var h=getPopupDetails(popUpId,1);var v=getPopupDetails(popUpId,2);var u=getPopupDetails(popUpId,3);if(m==""){if(popUpId=="SLT"){SID=getSlaID();targetType=window.parent.agreementTypePicklist.value;if(targetType){u=getPopupDetails(popUpId,3)}var C=h+"?title="+encodeURIComponent(u)+"&SlaId="+SID;if(u==operationalTarget){openiframepopup(C,560,699,u)}else{openiframepopup(C,500,699,u)}}else{if((popUpId=="Incident")||(popUpId=="Task")||(popUpId=="Broadcast")){if(popUpId=="Task"){var D=isUserPermitted("new");var a=isUserPermitted("delete");var A=isUserPermitted("update");window.parent.addTab(h+"?title="+encodeURIComponent(u)+"&isCreateable="+D+"&isDeletable="+a+"&isUpdateable="+A,u,u)}else{window.parent.addTab(h+"?title="+encodeURIComponent(u),u,u)}}else{if(d){if(popUpId=="NormalizationRule"){u=lblNewRule}var B=getUrlParameter("isFromRule");if(B==true||B=="true"){window.parent.LoadNewRule()}else{window.parent.addTab(h+"?standardLayout=true&title="+encodeURIComponent(u),u,u)}}else{if(popUpId=="Suggested_Owner"){window.parent.parent.addTab(h+"?title="+encodeURIComponent(u),u,u)}else{window.parent.addTab(h+"?title="+encodeURIComponent(u),u,u)}}}}}else{if((popUpId=="Incident")||(popUpId=="Task")||(popUpId=="SYSBRInformation")||(popUpId=="FAQ")||(popUpId=="SSFAQ")||(popUpId=="Template")||(popUpId=="SSTemplate")||(popUpId=="Change")||(popUpId=="Problem")||(popUpId=="ChangeAssessment")||(popUpId=="Model")){windowTitle=u;objectId=m;addtabWithProgressJS("",F)}else{if((popUpId=="Broadcast")||(popUpId=="Client")||(popUpId=="StandardDescription")){objectId=m;if(d){window.parent.addTab(h+"?id="+objectId+"&columnField="+columnField+"&direction="+direction+"&standardLayout=true",u,u)}else{window.parent.addTab(h+"?id="+objectId+"&columnField="+columnField+"&direction="+direction,u,u)}}else{objectId=m;var B=getUrlParameter("isFromRule");if(popUpId=="SLT"){targetType=window.parent.agreementTypePicklist.value;if(targetType){u=getPopupDetails(popUpId,3)}ServiceTargetheading=u+" - "+F;if(u==operationalTarget){openiframepopup(h+"?id="+objectId+"&columnField="+columnField+"&direction="+direction,560,699,ServiceTargetheading)}else{openiframepopup(h+"?id="+objectId+"&columnField="+columnField+"&direction="+direction,500,699,ServiceTargetheading)}}else{if(B==true||B=="true"){window.parent.LoadNRule(m)}else{if(popUpId=="Suggested_Owner"){window.parent.parent.addTab(h+"?id="+objectId+"&columnField="+columnField+"&direction="+direction,F,u)}else{if(popUpId=="NormalizationRule"){var I;if(grid!=undefined){I=grid.getSelectionModel().getSelected()}var l,r;if(I!=null&&typeof(I)!="undefined"&&typeof(objectId)!="undefined"&&objectId!=null){l=I.get("FKNormalization_Metadata__r_Object_Name__c");r=I.get("FKNormalization_Metadata__r_Field_Name__c");u=l+" ("+lblRuleField+": "+r+")"}window.parent.addTab(h+"?id="+objectId+"&columnField="+columnField+"&direction="+direction,F,u)}else{window.parent.addTab(h+"?id="+objectId+"&columnField="+columnField+"&direction="+direction,F,u)}}}}}}}}}function setArrCols(c){var b;for(b=0;b<colsHdrs.length;b++){var d=colsWidth[b].substring(colsWidth[b].indexOf("=")+1);if(b==0){c[b]={id:cols[b],header:colsHdrs[b],width:10,sortable:false,dataIndex:cols[b],hideable:false,hidden:true}}else{if(popUpId=="SLA"&&cols[b].toLowerCase()=="toallaccounts__c"){c[b]={id:cols[b],header:colsHdrs[b],width:10,sortable:false,dataIndex:cols[b],hideable:false,hidden:true}}else{if(popUpId=="SLA"&&cols[b].toLowerCase()=="accountcount__c"){c[b]={id:cols[b],header:colsHdrs[b],width:10,sortable:false,dataIndex:cols[b],hideable:false,hidden:true}}else{if(popUpId=="SLT"&&cols[b].toLowerCase()=="businessdays__c"){c[b]={id:cols[b],header:colsHdrs[b],width:10,sortable:false,dataIndex:cols[b],hideable:false,hidden:true}}else{if(popUpId=="CMDB_Class"&&cols[b].toLowerCase()=="classid__c"){c[b]={id:cols[b],header:colsHdrs[b],width:10,sortable:false,dataIndex:cols[b],hideable:false,hidden:true}}else{if(popUpId=="CMDB_Class"&&cols[b].toLowerCase()=="classname__c"){c[b]={id:cols[b],header:colsHdrs[b],width:10,sortable:false,dataIndex:cols[b],hideable:false,hidden:true}}else{if(popUpId=="CMDB_Class"&&cols[b].toLowerCase()=="cmdbclasstype__c"){c[b]={id:cols[b],header:colsHdrs[b]+" ("+lblCMDBCIClass+")",width:parseInt(d)+parseInt(20),sortable:false,dataIndex:cols[b],hideable:false,hidden:false,renderer:colRenderer}}else{if(popUpId=="CMDB_Class"&&cols[b].toLowerCase()=="fkcmdb_class__c"){c[b]={id:cols[b],header:colsHdrs[b],width:10,sortable:false,dataIndex:cols[b],hideable:false,hidden:true}}else{if(popUpId=="CMDB_Class"&&cols[b].toLowerCase()=="fkcmdb_class__r_class__c"){c[b]={id:cols[b],header:colsHdrs[b],width:10,sortable:false,dataIndex:cols[b],hideable:false,hidden:true}}else{if(popUpId=="CMDB_Class"&&cols[b].toLowerCase()=="advancedrulelogic__c"){c[b]={id:cols[b],header:colsHdrs[b],width:10,sortable:false,dataIndex:cols[b],hideable:false,hidden:true}}else{if(popUpId.toLowerCase()==="reconciliation"&&cols[b].toLowerCase()==="fkcmdb_class__r_fkcmdb_class__c"){c[b]={id:cols[b],header:colsHdrs[b],width:10,sortable:false,dataIndex:cols[b],hideable:false,hidden:true}}else{if(popUpId.toLowerCase()==="reconciliation"&&cols[b].toLowerCase()==="fkcmdb_class__r_classid__c"){c[b]={id:cols[b],header:colsHdrs[b],width:10,sortable:false,dataIndex:cols[b],hideable:false,hidden:true}}else{if(popUpId.toLowerCase()==="reconciliation"&&cols[b].toLowerCase()==="fkcmdb_class__r_advancedrulelogic__c"){c[b]={id:cols[b],header:colsHdrs[b],width:10,sortable:false,dataIndex:cols[b],hideable:false,hidden:true}}else{if(popUpId.toLowerCase()==="reconciliation"&&cols[b].toLowerCase()==="fkcmdb_class__r_fkcmdb_class__r_class__c"){c[b]={id:cols[b],header:colsHdrs[b],width:10,sortable:false,dataIndex:cols[b],hideable:false,hidden:true}}else{if(popUpId.toLowerCase()==="reconciliation"&&cols[b].toLowerCase()==="lastmodifiedby_name"){c[b]={id:cols[b],header:labelLastModifiedBy,width:100,sortable:false,dataIndex:cols[b]}}else{if(cols[b].toLowerCase()=="queueid"){c[b]={id:cols[b],header:colsHdrs[b],width:10,sortable:false,dataIndex:cols[b],hideable:false,hidden:true}}else{if((popUpId=="Category"||popUpId=="SSCategory"||popUpId=="Category__c")&&cols[b].toLowerCase()=="fkurgency__c"){c[b]={id:cols[b],header:colsHdrs[b],width:10,sortable:false,dataIndex:cols[b],hideable:false,hidden:true}}else{if((popUpId=="Category"||popUpId=="SSCategory"||popUpId=="Category__c")&&cols[b].toLowerCase()=="children__c"){c[b]={id:cols[b],header:colsHdrs[b],width:10,sortable:false,dataIndex:cols[b],hideable:false,hidden:true}}else{if(popUpId=="Category"&&requestType!=null&&requestType=="service"&&(cols[b].toLowerCase()=="fkparentcategory__r_name"||cols[b].toLowerCase()=="children__c")){c[b]={id:cols[b],header:colsHdrs[b],width:10,sortable:false,dataIndex:cols[b],hideable:false,hidden:true}}else{if(b==1&&popUpId!="Normalization_Exception"){if(cols[b].toLowerCase()=="service_target_title__c"){c[b]={id:cols[b],header:labelTitle,autoWidth:true,width:parseInt(d),sortable:false,dataIndex:cols[b],renderer:addLink}}else{c[b]={id:cols[b],header:colsHdrs[b],autoWidth:true,width:parseInt(d),sortable:false,dataIndex:cols[b],renderer:addLink}}}else{if(cols[b].toLowerCase()=="pending_count__c"&&popUpId=="Normalization_Exception"){var a=false;if(statusfilterOption==",Approved,"){a=true}c[b]={id:cols[b],header:colsHdrs[b],autoWidth:true,width:parseInt(d),sortable:false,dataIndex:cols[b],renderer:addLink,hidden:a}}else{if(cols[b].toLowerCase()=="approved_count__c"&&popUpId=="Normalization_Exception"){var a=false;if(statusfilterOption==",Pending,"){a=true}c[b]={id:cols[b],header:colsHdrs[b],autoWidth:true,width:parseInt(d),sortable:false,dataIndex:cols[b],renderer:addLink,hidden:a}}else{if(cols[b].toLowerCase()=="fknormalization_metadata__c"&&popUpId=="Normalization_Exception"){c[b]={id:cols[b],header:colsHdrs[b],autoWidth:true,width:parseInt(d),sortable:false,dataIndex:cols[b],hidden:true}}else{if((cols[b].toLowerCase()=="normalized_with_model__c"||cols[b].toLowerCase()=="fkmodel__r_name")&&popUpId=="Model"){c[b]={id:cols[b],header:colsHdrs[b],autoWidth:true,width:parseInt(d),sortable:false,dataIndex:cols[b],renderer:addLink}}else{if(cols[b].toLowerCase()=="fkmodel__c"&&popUpId=="Model"){c[b]={id:cols[b],header:colsHdrs[b],autoWidth:true,width:parseInt(d),sortable:false,dataIndex:cols[b],hidden:true}}else{if(cols[b].toLowerCase()=="queue_name"){imgPath=getSSThemesPath()+"/SSDefaultTheme/SDEFicons/status-16-information.png";colsHdrs[b]=colsHdrs[b]+'  <img style="width:13px;height:13px" title="'+lblIntegratedUIInfo+'" id="file-info-icon"  src="'+imgPath+'"/>';c[b]={id:cols[b],header:colsHdrs[b],autoWidth:true,width:parseInt(d),sortable:false,dataIndex:cols[b],renderer:addLink}}else{if(b==colsHdrs.length-1){if(popUpId=="Broadcast"||moduleId=="FKBroadcast__c"){c[b]={header:colsHdrs[b],autoWidth:false,sortable:false,dataIndex:cols[b],renderer:colRenderer,hidden:true}}else{if(cols[b].toLowerCase()=="additional_info__c"){c[b]={id:cols[b],header:colsHdrs[b],autoWidth:true,width:10,sortable:false,dataIndex:cols[b],hidden:true}}else{c[b]={header:colsHdrs[b],autoWidth:true,sortable:false,dataIndex:cols[b],renderer:colRenderer}}}if(IsServiceTargetPopup()){c[b].autoWidth=false;c[b].width=parseInt(d)}if(cols[b]=="priorityDuration__c"){durationflag=1}}else{if(popUpId=="Broadcast"||moduleId=="FKBroadcast__c"&&b==colsHdrs.length-2){c[b]={header:colsHdrs[b],autoWidth:true,sortable:false,dataIndex:cols[b],renderer:colRenderer}}else{if(cols[b].toLowerCase()=="target_type__c"){c[b]={header:labelType,autoWidth:true,sortable:false,dataIndex:cols[b],renderer:colRenderer}}else{c[b]={header:colsHdrs[b],width:parseInt(d),sortable:false,dataIndex:cols[b],renderer:colRenderer}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}if(cols[b].toLowerCase()=="defaultstatus__c"){c[b]={header:colsHdrs[b],width:parseInt(d),sortable:false,dataIndex:cols[b],renderer:shDefStatus}}if(colsHdrs[b]=="Order Number"){if(cols[b].toLowerCase()=="ordernumber__c"){c[b]={header:colsHdrs[b],width:parseInt(d),sortable:false,dataIndex:cols[b],renderer:colRenderer,hidden:true};if(isLookup=="true"){sortColumn=cols[b]}}}if(colsHdrs[b]=="FAQ Number"){if(cols[b].toLowerCase()=="name"){c[b]={header:colsHdrs[b],width:parseInt(d),sortable:false,dataIndex:cols[b],renderer:colRenderer,hidden:true}}}if(cols[b].toLowerCase()=="agreementtype__c"&&isLookup=="true"){c[b]={header:colsHdrs[b],width:parseInt(d),sortable:false,dataIndex:cols[b],renderer:colRenderer,hidden:true}}if((cols[b].toLowerCase()=="fkbmc_baseelement__r_name"||cols[b].toLowerCase()=="fkbmc_baseelement__c")&&(popUpId=="BMC_BusinessService"||moduleId.toLowerCase()=="fkbusinessservice__c")){c[b]={header:colsHdrs[b],width:parseInt(d),sortable:false,dataIndex:cols[b],renderer:colRenderer,hidden:true}}if(cols[b].toLowerCase()=="account_name__c"&&popUpId=="Client"){c[b]={header:colsHdrs[b],width:parseInt(d),sortable:false,dataIndex:cols[b],renderer:colRenderer,hidden:true}}}}function GridSelectionChanged(a,c,b){}function renderGridJS(b){var a;var s;var e;var d;columnField=sortColumn;if(popUpId.toUpperCase()=="SLT"){SLTGridClass="SLTGrid"}else{SLTGridClass="CommonGrid"}if(grid!=null){if(!notSortableFields.match("<<"+sortColumn+">>")){columnField=sortColumn;if(columnField!=null&&columnField!=""&&columnField!="null"&&columnField.match("__r_")!=null){columnField=sortColumn.replace("__r_","__r.")}else{if(popUpId=="Organization"&&columnField.match("_name")!=null){columnField=sortColumn.replace("_name",".name")}else{if(columnField=="Owner_userName"){columnField="Owner.userName"}else{if(columnField.toLowerCase()=="profile_name"){columnField="profile.name"}}}}direction=order}if(popUpId=="BMC_BaseElement"&&isApplyCMDBClassFilter==true&&isCmdbFilterChanged==true){var p=new Ext.data.GroupingStore({reader:new Ext.data.ArrayReader({},cols),data:resultSet,groupField:""});reconfigureGrid(p);var o=getForceFitValue();grid.view=new Ext.grid.GroupingView({forceFit:o,scrollOffset:o?0:50,emptyText:NoRecordFoundMsg,groupTextTpl:"{text} ({[values.rs.length]} {[values.rs.length > 1 ? labelItems : labelItem]})"});grid.view.init(grid);grid.view.render()}grid.store.loadData(resultSet);if(typeof(Ext.getCmp("prevId"))!="undefined"){Ext.getCmp("prevId").setDisabled(getNextPrevState(true))}Ext.getCmp("nextId").setDisabled(getNextPrevState(false));return}var u=new Ext.data.GroupingStore({reader:new Ext.data.ArrayReader({},cols),data:resultSet,groupField:""});u.loadData(resultSet);document.title=showPopupHeader;var n=true;if(IsServiceTargetPopup()){n=true}var m=getForceFitValue();grid=new Ext.grid.GridPanel({store:u,border:false,id:"maindatagrid",height:500,columnLines:true,cls:SLTGridClass,columns:arrCols,stripeRows:true,enableHdMenu:false,listeners:{rowclick:function(i,y,v){var x=this.getStore().getAt(y);var l=x.get("queueid");if(popUpId=="Suggested_Owner"){window.parent.getSuggestedOwnerBySuggestion(l)}if(isOnlyQueueList=="true"||popUpId=="Queue"){isQueueMembersFetched=false;if(v.target.parentElement!=null&&v.target.parentElement!=undefined&&v.target.parentElement.nodeName=="TD"){fetchQMData(x)}else{if(v.target.parentElement!=null&&v.target.parentElement!=undefined&&v.target.parentElement.nodeName=="DIV"){window.close()}}return}}},view:new Ext.grid.GroupingView({forceFit:m,scrollOffset:m?0:50,emptyText:NoRecordFoundMsg,groupTextTpl:"{text} ({[values.rs.length]} {[values.rs.length > 1 ? labelItems : labelItem]})"}),selModel:new Ext.grid.RowSelectionModel({singleSelect:forcmdbcls()}),bbar:{displayInfo:true,buttonAlign:"center",height:30,id:"paginationBar",items:getBbarOptions()}});grid.getSelectionModel().on("selectionchange",GridSelectionChanged);var r="";var q="";if(popUpId=="Action"&&isNewUI==true){q="width:8px;height:8px";if(order=="DESC"){r=getSDFStylesResPath()+"/SDEFicons/arrow-down.png"}else{r=getSDFStylesResPath()+"/SDEFicons/arrow-up.png"}}else{q="width:13px;height:13px";if(order=="DESC"){r=getSDFStylesResPath()+"/SDEFimages/arrow_sort_descending.gif"}else{r=getSDFStylesResPath()+"/SDEFimages/arrow_sort_ascending.gif"}}var w=grid.getColumnModel().getColumnHeader(1);if(!isGroupByDisabled&&!notSortableFields.match("<<"+w+">>")){w=w+'<img style="'+q+'" src="'+r+'"/>';grid.getColumnModel().setColumnHeader(1,w)}grid.render("grid");if(!(popUpId=="Action"&&isNewUI==true)){grid.getBottomToolbar().hide()}grid.on("rowclick",function(l,E,C){if(IsServiceTargetPopup()){return}if(popUpId=="Category"&&typeof(window.parent.selectedCatSingleClk)!="undefined"&&typeof(window.parent.selectedCatSingleClk)=="function"){var x=l.store.getAt(E);window.parent.selectedCatSingleClk(l,E,x.get(idFld));return}var x=l.store.getAt(E);var v=x.get(idFld);var y=x.get(nameFld);if(popUpId=="Action"){checksequence(x.get(cols[0]))}else{if(popUpId=="Status"){checkstatussequence(x.get(cols[0]))}else{if(isOnlyQueueList=="true"||popUpId=="Queue"){return}else{if(document.getElementById("deleteId")!=null){if(isUserPermitted("delete")){if(popUpId=="SLT"||popUpId=="Suggested_Owner"){Ext.getCmp("deleteId").setDisabled(false);Ext.getCmp("deleteId").setIconClass("bmcDeleteSLT")}else{Ext.getCmp("deleteId").setDisabled(false);Ext.getCmp("deleteId").setIconClass("bmcDelete")}}}}}}if(document.getElementById("editId")!=null){if(popUpId=="SLT"||popUpId=="Suggested_Owner"){if(isUserPermitted("edit")){Ext.getCmp("editId").setDisabled(false);Ext.getCmp("editId").setIconClass("bmcEditSLT")}else{Ext.getCmp("editId").setDisabled(true);Ext.getCmp("editId").setIconClass("bmcEditSLTDisable")}}else{Ext.getCmp("editId").setDisabled(false);Ext.getCmp("editId").setIconClass("bmcEdit")}}selectedId=v;if(b){a=l.getSelectionModel().getSelections();if(a.length>1){Ext.getCmp("editId").setDisabled(true);if(document.getElementById("copyId")!=null&&typeof document.getElementById("copyId")!="undefined"){Ext.getCmp("copyId").setDisabled(true)}}else{if(isUserPermitted("copy")){Ext.getCmp("editId").setDisabled(false);if(document.getElementById("copyId")!=null&&typeof document.getElementById("copyId")!="undefined"){Ext.getCmp("copyId").setDisabled(false)}}}e=true;idList="";s=new Array(a.length);d=s[A];for(var A=0;A<a.length;A++){idList=idList+a[A].get(cols[0])+",";s[A]=a[A].get(cols[index]);if(A==0){d=s[A]}}for(var A=0;A<s.length;A++){for(var z=0;z<s.length;z++){if(s[A]!=s[z]){e=false;break}}}if(e==false){Ext.getCmp("activeId").setDisabled(false);Ext.getCmp("InactiveId").setDisabled(false)}else{if(e==true){if(d=="true"){Ext.getCmp("activeId").setDisabled(true);Ext.getCmp("InactiveId").setDisabled(false)}else{Ext.getCmp("activeId").setDisabled(false);Ext.getCmp("InactiveId").setDisabled(true)}}}}else{if(document.getElementById("copyId")!=null&&typeof document.getElementById("copyId")!="undefined"){if(isUserPermitted("copy")){Ext.getCmp("copyId").setDisabled(false);Ext.getCmp("copyId").setIconClass("bmcCopy")}}}if(isLookup=="true"){if(isAssignTo){performAssignTo(x);return}if(popUpId!="Template"){var B=x.get("additional_info__c");if(idNameForPopUp){var D=v+""+EF+""+y;window.parent.setPopUpVar(D)}else{if(popUpId=="Action"&&typeof(window.opener)!="undefined"&&window.opener.location.pathname.indexOf("SIContainerPage")>-1){window.onCompleteFunction=window.opener.onPopupComplete}window.parent.setPopUpVar(v,B)}if(moduleId!=null&&moduleId!=""){window.parent.setPopUpValue(v,y)}if(popUpId=="Action"&&typeof(window.opener)!="undefined"&&window.opener.location.pathname.indexOf("SIContainerPage")>-1){window.close()}else{window.parent.closePopup()}}}else{document.getElementById("selectedSOId").value=v;l.getView().focusEl.focus()}});grid.on("rowdblclick",function(i,v){if(IsServiceTargetPopup()||popUpId=="Normalization_Exception"){return}if(popUpId=="Client"&&typeof(window.parent.populateSelectedUser)!="undefined"&&typeof(window.parent.populateSelectedUser)=="function"){window.parent.populateSelectedUser(i,v)}if(popUpId=="Category"&&typeof(window.parent.selectedCatDBClk)!="undefined"&&typeof(window.parent.selectedCatDBClk)=="function"){var l=i.store.getAt(v);window.parent.selectedCatDBClk(i,v,l.get(idFld));return}var l=i.store.getAt(v);setObjId(l.get(idFld),l.get(nameFld))});grid.on("keypress",function(l){if(IsServiceTargetPopup()){return}if(l.getKey()==l.RETURN||l.getKey()==l.ENTER){var i=grid.getSelectionModel().getSelections();for(j=0;j<i.length;j++){setObjId(i[j].get(idFld),i[j].get(nameFld))}}});grid.on("headerclick",function(i,B,A){if(!isGroupByDisabled&&!notSortableFields.match(i.getColumnModel().getColumnHeader(B))){var x=Ext.getCmp("groupoptions");var G=x.getValue();var D="";var E="";if(G==null||G==""){for(j=0;colsHdrs.length>j;j++){if(cols[j].toLowerCase()=="service_target_title__c"){colsHdrs[j]=labelTitle}else{if(cols[j].toLowerCase()=="target_type__c"){colsHdrs[j]=labelType}else{if(cols[j].toLowerCase()=="cmdbclasstype__c"){colsHdrs[j]=lblCMDBClassType}}}i.getColumnModel().setColumnHeader(j,i.getColumnModel().getColumnHeader(j));if(arrCols[j]&&arrCols[j].hidden!=true){var z="";var C="";if(popUpId=="Action"&&isNewUI==true){z='<img style="width:8px;height:8px" src="'+getSDFStylesResPath()+'/SDEFicons/arrow-up.png"/>';C='<img style="width:8px;height:8px" src="'+getSDFStylesResPath()+'/SDEFicons/arrow-down.png"/>'}else{z='<img style="width:13px;height:13px" src="'+getSDFStylesResPath()+'/SDEFimages/arrow_sort_ascending.gif"/>';C='<img style="width:13px;height:13px" src="'+getSDFStylesResPath()+'/SDEFimages/arrow_sort_descending.gif"/>'}var l=i.getColumnModel().getColumnHeader(j);var y=i.getColumnModel().getColumnHeader(B);if(y!=null&&y!=""&&y.indexOf(" ("+lblCMDBCIClass+")")>=0){y=y.replace(" ("+lblCMDBCIClass+")","")}if((y!=null&&y!=""&&y.indexOf(z)>=0)||(l!=null&&l!=""&&l.indexOf(z)>=0)){l=l.replace(z,"");y=y.replace(z,"")}if((y!=null&&y!=""&&y.indexOf(C)>=0)||(l!=null&&l!=""&&l.indexOf(C)>=0)){l=l.replace(C,"");y=y.replace(C,"")}if(y==colsHdrs[j]&&notSortableFields.match(colsHdrs[j])==null){if(popUpId=="Action"&&isNewUI==true){E="width:8px;height:8px";if(order=="DESC"){D=getSDFStylesResPath()+"/SDEFicons/arrow-up.png"}else{D=getSDFStylesResPath()+"/SDEFicons/arrow-down.png"}}else{E="width:13px;height:13px";if(order=="DESC"){D=getSDFStylesResPath()+"/SDEFimages/arrow_sort_ascending.gif"}else{D=getSDFStylesResPath()+"/SDEFimages/arrow_sort_descending.gif"}}var F=colsHdrs[j];if(y!=null&&y!=""&&y.indexOf("CMDB Class Type")>=0){F=F+" ("+lblCMDBCIClass+')<img style="width:13px;height:13px" src="'+D+'"/>'}else{F=F+'<img style="'+E+'" src="'+D+'"/>'}sortColumn=cols[j];if(cols[j]!=null&&cols[j]!=""&&cols[j]!="null"&&cols[j].match("__r_")!=null){cols[j]=cols[j].replace("__r_","__r.")}else{if(cols[j]=="Owner_userName"){cols[j]="Owner.userName"}else{if(cols[j].toLowerCase()=="parent_name"){cols[j]="parent.name"}else{if(cols[j].toLowerCase()=="profile_name"){cols[j]="profile.name"}else{if(cols[j]=="Owner_Name"){cols[j]="Owner.Name"}}}}}if(order=="ASC"){order="DESC"}else{order="ASC"}i.getColumnModel().setColumnHeader(B,F);handleColClickWithoutGrp(cols[j],order);columnField=cols[j];direction=order}else{i.getColumnModel().setColumnHeader(j,l)}}}}}});grid.on("resize",function(i,v,l){Ext.getCmp("maindatagrid").removeClass(SLTGridClass);if(firstTime||(requestType!=null&&requestType=="service")){firstTime=false}else{if(isOnlyQueueList!="true"&&popUpId!="Queue"){handleResize(""+i.getInnerHeight())}}});var f=grid.getColumnModel().getColumnCount(true);var h=0;while(f>h){var g=grid.getView().getHeaderCell(h);g.id="GRID-HD"+h;g.firstChild.id="GRID-HD-INNER-"+h;h++}var c=0;Ext.select(".x-form-trigger").each(function(i){i.dom.id="FORM-TRIGGER-BTN-"+c++});if(popUpId=="Action"){document.title=Actions}if(popUpId=="Profile"){document.title=ProfileSelect}}function getBbarOptions(){var a=new Array(13);a[0]={xtype:"box",cls:"d-icon-angle_left",id:"prevId",disabled:true,listeners:{render:function(b){b.el.on("click",PreviousBtnHandler)}}};a[1]={xtype:"tbspacer",width:10};a[2]={text:lblPreviousPagination,xtype:"label",id:"prevIdText",listeners:{render:function(b){b.el.on("click",PreviousBtnHandler)}}};a[3]={xtype:"tbspacer",width:10};a[4]="-";a[5]={xtype:"tbspacer",width:10};a[6]={text:lblNextPagination,xtype:"label",id:"nextIdText",listeners:{render:function(b){b.el.on("click",NextBtnHandler)}}};a[7]={xtype:"tbspacer",width:10};a[8]={xtype:"box",id:"nextId",cls:"d-icon-angle_right",listeners:{render:function(b){b.el.on("click",NextBtnHandler)}}};a[9]={xtype:"tbspacer",width:10};a[10]="-";a[11]={xtype:"tbspacer",width:10};a[12]={xtype:"box",id:"refreshbtnBCM",cls:"d-icon-restart",listeners:{render:function(b){b.el.on("click",pageRefresh)}}};return a}function activateSerachpageWindow(){if(popUpId!="SuggestedStaff"&&popUpId!="Suggested_Owner"){if(window.parent!=null&&window.parent.activateWindow!=undefined){if(activeWindowFlag==true&&!isLookup){window.parent.activateWindow(getWID())}}activeWindowFlag=true}}function getForceFitValue(){var c=true;if(isLookup&&PopupId.toLowerCase()=="bmc_baseelement"){var a=window.innerWidth;var b=0;var d=0;for(b=0;b<arrCols.length;b++){if(typeof(arrCols[b].width)!="undefined"&&arrCols[b].width!=null&&!isNaN(arrCols[b].width)){d=d+arrCols[b].width}}if(d>a){c=false}}return c}var callCount=0;function autoRefresh(){if(parseLimit!=0&&parseLimit!=null&&parseLimit!=""){if(parseLimit==1&&callCount!=0){defaultfocus=false;pageRefresh()}else{parseLimit=1}callCount=callCount+1;t=setTimeout("autoRefresh();",Ext.util.Cookies.get(cookieName)*60000)}}function createCookie(){if(document.getElementById("refreshTimeID")!=null&&typeof(document.getElementById("refreshTimeID"))!="undefined"&&document.getElementById("refreshTimeID").value==""){document.getElementById("refreshTimeID").value=0}if(document.getElementById("refreshTimeID")!=null&&typeof(document.getElementById("refreshTimeID"))!="undefined"){var a=new Date();a.setYear(a.getFullYear()+10);document.cookie=cookieName+"="+document.getElementById("refreshTimeID").value+";path=/;SameSite=None;Secure;expires="+a.toUTCString()}}function addRefreshMenu(d,a,c){if(!isLookup){intervalTime=Ext.util.Cookies.get(cookieName);if(intervalTime==""||intervalTime==null){intervalTime=DEFAULT_INTERVAL}var b={text:refresheveryLabel+' <input id="refreshTimeID" name="refreshTimeID" value="'+intervalTime+'" class="autoRefreshTextBox" type="text" onkeypress="javascript: return validateText(event);"  maxlength="3" onchange="setTextvalue(this.value);"/> '+minuteslabel,style:"cursor:text",hideOnClick:false};d[a++]="-";d[a++]=b;d[a++]={text:refreshedlabel+" "+c,canActivate:false,hideOnClick:false,style:"cursor:text"}}}function validateText(c){var b;if(Ext.isIE){b=c.keyCode}else{b=c.charCode}var d=new RegExp("[^0-9\0]");if(d.test(String.fromCharCode(b))){return false}var a=document.getElementById("refreshTimeID");try{a.focus()}catch(f){}return true}function setTextvalue(c){var a=document.getElementById("refreshTimeID");a.value=c;try{a.focus()}catch(b){}}function renderQueueMembers(){var a=new Ext.grid.ColumnModel({header:true,columns:[{dataIndex:"id",hidden:true},{dataIndex:"name",header:qMemName,sortable:true},{dataIndex:"type",header:qMemType,sortable:true}]});if(qMemStore==null){qMemStore=new Ext.data.SimpleStore({fields:["id","name","type"],autoLoad:false,autoDestroy:true,data:qMembersStr})}if(qmGrid==null){qmGrid=new Ext.grid.GridPanel({store:qMemStore,border:false,id:"qMembersGrid",width:650,height:200,columnLines:true,cm:a,stripeRows:true,enableHdMenu:false,enableColumnMove:false,viewConfig:{forceFit:true,scrollOffset:0}})}}function loadQMdata(){qMemStore.removeAll(true);qMemStore.loadData(qMembersStr);isQueueMembersFetched=true;if(Ext.getCmp("queueMemberGrid").collapsed){Ext.getCmp("queueMemberGrid").expand()}qmGrid.getView().refresh();hideWaitbox();if(isQueueLinkClicked){window.close()}}function fetchQMData(c){var b=c.get("queue_name");Ext.getCmp("queueMemberGrid").setTitle(qmGridHeader+"  "+b);if(c!=null&&c!="undefined"&&typeof(c)!="undefined"){var a=c.get("queueid");setTimeout(function(){showWaitbox()},100);loadQueueMembers(a)}}function clearQMdata(){if(isOnlyQueueList=="true"||popUpId=="Queue"){if(qmGrid!=null&&qmGrid!="undefined"&&typeof(qmGrid)!="undefined"){qmGrid.store.removeAll(true);qmGrid.getView().refresh();Ext.getCmp("queueMemberGrid").collapse();Ext.getCmp("queueMemberGrid").setTitle(qmGridHeader)}}}function performAssignTo(e){var c;if(popUpId=="Client"){c=e.get("IsOutOfOffice__c")}if(popUpId=="SuggestedStaff"){c=e.get("FKUser__r_IsOutOfOffice__c")}var d="true";var b="false";var f=e.get(idFld);var a=e.get("additional_info__c");if(!isExecuting){if(c==d){isExecuting=true;Ext.MessageBox.show({msg:outOfOfficeConfirmationMsg,width:450,buttons:Ext.MessageBox.YESNO,icon:Ext.MessageBox.QUESTION,fn:function(g){if(g=="yes"){window.parent.setPopUpVar(f,a);window.parent.closePopup()}isExecuting=false}})}else{if(c==b){window.parent.setPopUpVar(f,a);window.parent.closePopup()}}}}function isCJKChar(c){var b=/[\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf]/;var a=b.test(c);return(a)}function getWaitbox(){waitMessage=new Ext.LoadMask(Ext.getBody(),{msg:queueWaitMsg})}function showWaitbox(){waitMessage.show()}function hideWaitbox(){waitMessage.hide()}function forcmdbcls(){if(popUpId=="CMDB_Class"){return true}else{return false}}function IsTooltipEnabled(a,c,b){if(popUpId=="CMDB_Class"){return true}else{return false}}function showToolTip(a,g,c,f,b){var e=a.target;if(e==null){e=a.srcElement}var d="";if(b=="CMDBClassType"){d=getCMDBClassTypeToolTip(a,g,c,f)}if(d==""||d=="undefined"||typeof(d)=="undefined"){return false}changeToolTip=new Ext.ToolTip({target:e.id,anchor:"left",width:b=365,shadow:false,trackMouse:true,bodyStyle:"font: 8pt Tahoma, Verdana, Arial; color:black;width:2%;border-color:black;",dismissDelay:60000,html:d});if(!Ext.isIE){if(typeof(a.x)!="undefined"&&typeof(a.y)!="undefined"){changeToolTip.targetXY=[a.x,a.y]}else{if(typeof(a.clientX)!="undefined"&&typeof(a.clientY)!="undefined"){changeToolTip.targetXY=[a.clientX,a.clientY]}}changeToolTip.show()}else{if(typeof(a.clientX)!="undefined"&&typeof(a.clientY)!="undefined"){changeToolTip.targetXY=[a.clientX,a.clientY]}changeToolTip.show()}}function getCMDBClassTypeToolTip(h,s,r,d){var l;var m="";s=s;colIndex=r;if(s==false&&colIndex==false){return}if(s>=0&&colIndex>=0){try{var c=Ext.getCmp("maindatagrid");if(typeof(c.getColumnModel().getDataIndex)!="undefined"&&c.getColumnModel().getDataIndex!=null&&typeof(c.getColumnModel().getDataIndex(colIndex))=="undefined"){return""}if(c==null&&c.store==null&&c.store.getCount()<0){return""}l=c.store.getAt(s);if(l==null){return""}var n=false;var g;var p="";if(popUpId.toLowerCase()=="reconciliation"){g=l.get("FKCMDB_Class__r_ClassID__c");p=l.get("FKCMDB_Class__r_CMDBClassType__c")}else{g=l.get("ClassID__c");p=l.get("CMDBClassType__c")}if(p!=null&&p!=""){var a=p.indexOf("(");if(a>0){var o=p.substring(lblCMDBAssetClass.length+2,p.length);a=-1;a=o.indexOf(")");if(a>0){var u=o.substring(0,o.length-1);p=u;n=true}}}if(((c.getColumnModel().getDataIndex(colIndex)!="CMDBClassType__c")&&(c.getColumnModel().getDataIndex(colIndex)!="FKCMDB_Class__r_CMDBClassType__c"))||(n==false)){return""}strCMDBAMRule=objCMDBTooltip[g];var b="";if(strCMDBAMRule!=null&&strCMDBAMRule!=""){if(strCMDBAMRule.indexOf(" AND ")>0){var i=strCMDBAMRule.split(" AND ");if(i!=null){for(k=0;k<i.length;k++){var f=i[k];if(f!=null&&typeof(f)!="undefined"&&f!=""){if(k==0){b=f}else{b=b+" AND <br> "+f}}}}strCMDBAMRule=b}else{strCMDBAMRule=strCMDBAMRule}}if(g!=""&&g!="-"&&(typeof(strCMDBAMRule)!="undefined")&&strCMDBAMRule!=null&&strCMDBAMRule!=""){m='<table class="ttipTable" cellpadding=4 cellspacing=3 border=0 width="350" style="table-layout:auto"><tr><td class="ttipHeader1" colspan="2" width="100%">'+lblRuleBasedAsset+'</td><tr align="center"><td colspan="2">&nbsp;</td></tr><tr><td class="ttipHeader2" width="40%">'+lblBasedonCIClass+':</td><td class="ttipLabel" width="70%">'+p+'</td></tr><tr><td class="ttipHeader2" width="40%" >'+lblCMDBAMRule+':</td><td class="ttipLabel" width="70%">'+strCMDBAMRule+"</td></tr></table>"}else{if(g!=""&&g!="-"&&p!=null&&p!=""){m='<table class="ttipTable" cellpadding=4 cellspacing=3 border=0 width="350" style="table-layout:auto"><tr><td class="ttipHeader1" colspan="2" width="100%">'+lblRuleBasedAsset+'</td><tr align="center"><td colspan="2">&nbsp;</td></tr><tr><td class="ttipHeader2" width="40%">'+lblBasedonCIClass+':</td><td class="ttipLabel" width="70%">'+p+'</td></tr><tr><td class="ttipHeader2" width="40%" >'+lblCMDBAMRule+':</td><td class="ttipLabel" width="70%">'+lblNoClassRulesDefined+"</td></tr></table>"}else{return""}}}catch(q){}}return m}function hideToolTip(){if(changeToolTip!=null){changeToolTip.hide()}}function showNormalizedRecord(){isQueueLinkClicked=true;if(IsServiceTargetPopup()){return}activeWindowFlag=false;var b="";var c=grid.getSelectionModel().getSelected();var a=c.get("additional_info__c");if(c!=null){b=c.get("Normalized_With_Model__c");if(b==null){b=c.get("FKModel__r_Name")}setObjId(c.get("FKModel__c"),b,a)}}function reconfigureGrid(b){var c=grid.getView();if(popUpId=="BMC_BaseElement"&&isApplyCMDBClassFilter==true&&isCmdbFilterChanged==true&&typeof(grid)!="undefined"&&grid!=null){c.forceFit=false}var a=new Ext.grid.ColumnModel({columns:arrCols});grid.reconfigure(b,a)}function hideWaitMsgBar(){if(typeof(waitingMask)!="undefined"&&waitingMask!=null&&waitingMask!=""){waitingMask.hide()}}function showWaitMsgBar(){waitingMask=new Ext.LoadMask(Ext.getBody(),{msg:pleaseWaitMsg});if(typeof(waitingMask)!="undefined"&&waitingMask!=null&&waitingMask!=""){waitingMask.show()}};