var onCompleteFunction;var popUpWindow;var lookupValues=[];var activeAllWindowFlag=true;var tabOutImg;var BE_InstanceID;var idNameForPopUp=false;var customActionHeaderLabel="";var gsPopUpWindow;var acpopUpWindow;var toggle=1;var b_height=0;var b_width=0;var p_width=100;var thewidth;var position=[];var NONPRINT="�";Ext.ux.collapsedPanelTitlePlugin=function(){this.init=function(c){if(c.collapsible){var b=c.region;var a="x-collapsed-header-text";if((b=="north")||(b=="south")){c.on("render",function(){var d=c.ownerCt;d.on("afterlayout",function(){if(d.layout[b].collapsedEl){c.collapsedTitleEl=d.layout[b].collapsedEl.createChild({tag:"span",cls:a,html:c.title});c.setTitle=Ext.Panel.prototype.setTitle.createSequence(function(e){RemedyForceHTMLProcessor.setText(c.collapsedTitleEl.dom,e)})}},false,{single:true});c.on("collapse",function(){if(d.layout[b].collapsedEl&&!c.collapsedTitleEl){c.collapsedTitleEl=d.layout[b].collapsedEl.createChild({tag:"span",cls:a,html:c.title});c.setTitle=Ext.Panel.prototype.setTitle.createSequence(function(e){RemedyForceHTMLProcessor.setText(c.collapsedTitleEl.dom,e)})}},false,{single:true})})}}}};function openPopupforKM(c,e,a,f,d){var b=checkCustomPage();gsPopUpWindow=new Ext.Window({height:f,width:d,title:a,x:10,y:5,modal:true,id:"mypopup1",resizable:false,bodyStyle:"background-color:#FFFFFF;",constrain:true,viewConfig:{forceFit:true},cls:b.popUpWindowClassName,frame:b.isFrame,html:'<iframe id="popupWindowFrameId" frameborder="0" src ="/apex/'+c+'" style="width:100%;height:100%;border:none"/>',tools:[{id:"help",qtip:labelTooltipHelp,handler:function(){OpenHelppage("IncidentGS","module","form")}},{id:"maximize",qtip:labelTooltipMaximize,handler:function(){if(toggle==1){toggle=0;if(Ext.isIE){thewidth=document.body.offsetWidth}else{thewidth=window.innerWidth}b_height=gsPopUpWindow.getHeight();b_width=gsPopUpWindow.getWidth();position=gsPopUpWindow.getPosition(true);gsPopUpWindow.setPosition(0,0);gsPopUpWindow.setWidth(thewidth);this.removeClass("x-tool-maximize");this.addClass("x-tool-restore");this.dom.qtip=labelTooltipRestore}else{toggle=1;gsPopUpWindow.setPosition(position[0],position[1]);gsPopUpWindow.setHeight(b_height);gsPopUpWindow.setWidth(b_width);this.removeClass("x-tool-restore");this.addClass("x-tool-maximize");this.dom.qtip=labelTooltipMaximize}}},{id:"close",qtip:labelTooltipClose,handler:parent.closeWin}]});gsPopUpWindow.show()}function htmlDecode(a){return RemedyForceHTMLProcessor.htmlDecoder(a)}function closeGSPopup(){if(gsPopUpWindow!=null&&gsPopUpWindow!=undefined){gsPopUpWindow.close()}}function getClientHeightForList(){var a=getWindowHeight();var b=40;var g=20;var f=(5*2);var d=36;var c=36;var e=20;var h=(a-b-g-f-d-c-e);return h}function hidePopupWindow(){if(popUpWindow!=null&&popUpWindow!=undefined){popUpWindow.hide();if(typeof(onCompleteFunction)=="function"){onCompleteFunction()}}}function reloadSI(){if(window.frames.SIIframeID!=undefined){if(typeof(window.frames.SIIframeID.tabReload)=="function"){window.frames.SIIframeID.tabReload(window.frames.SIIframeID.childObject)}}}function getWindowHeight(){var b=0,a=0;if(typeof(window.innerHeight)=="number"&&window.innerHeight>0){a=window.innerHeight}else{if(document.documentElement&&(document.documentElement.clientHeight)&&document.documentElement.clientHeight>0){a=document.documentElement.clientHeight}else{if(document.body&&(document.body.clientHeight)&&document.body.clientHeight>0){a=document.body.clientHeight}}}if(a==0){a=760}return a}function setPopUpVar(b,a){if(b!=null&&b!=""&&onCompleteFunction!=null){onCompleteFunction(b,a)}}function openPopup(c,f,a,b,e,d){if(e==true){idNameForPopUp=e}if(d==null){d=false}return openPopupTitle(c,f,a,b,"",d)}function openPopupTitle(e,g,a,d,c,f){onCompleteFunction=g;var b=checkCustomPage();if(a!=null&&d!=null){if(f){popUpWindow=new Ext.Window({height:a,width:d,x:10,y:5,modal:true,resizable:false,constrain:true,cls:b.popUpWindowClassName,frame:b.isFrame,viewConfig:{forceFit:true},html:'<iframe frameborder="0" src ="/apex/'+e+'" style="width:100%;height:100%;border:none"/>',tools:[{id:"lookuppm",handler:function(){var h="";for(var i=0;i<=3;i++){if(window.frames[i]!="undefined"){if(window.frames[i].document.getElementById("lookupdataval")!=null){h=window.frames[i].document.getElementById("lookupdataval").value}}if(h!=""){break}}var j=new Ext.QuickTip({target:this,title:"",anchor:"right",width:200,shadow:"sides",bodyStyle:"font: 8pt Tahoma, Verdana, Arial; color:black;width:2%;border-color:black;",dismissDelay:1500000,html:h});j.show()},hidden:false}]});popUpWindow.show()}else{popUpWindow=new Ext.Window({height:a,width:d,x:10,y:5,modal:true,resizable:false,constrain:true,cls:b.popUpWindowClassName,frame:b.isFrame,viewConfig:{forceFit:true},html:'<iframe frameborder="0" src ="/apex/'+e+'" style="width:100%;height:100%;border:none"/>'});popUpWindow.show()}}else{popUpWindow=new Ext.Window({height:570,width:670,x:10,y:5,modal:true,resizable:false,constrain:true,cls:b.popUpWindowClassName,frame:b.isFrame,viewConfig:{forceFit:true},html:'<iframe frameborder="0" src ="/apex/'+e+'" style="width:100%;height:100%;border:none"/>',tools:[{id:"lookuppm",handler:function(){var h="";for(var i=0;i<=3;i++){if(window.frames[i]!="undefined"){if(window.frames[i].document.getElementById("lookupdataval")!=null){h=window.frames[i].document.getElementById("lookupdataval").value}}if(h!=""){break}}var j=new Ext.QuickTip({target:this,title:"",anchor:"right",width:200,shadow:"sides",bodyStyle:"font: 8pt Tahoma, Verdana, Arial; color:black;width:2%;border-color:black;",dismissDelay:1500000,html:h});j.show()},hidden:(window.parent.parent.showPerformanceIcon==null||window.parent.parent.showPerformanceIcon=="undefined")?false:(window.parent.parent.showPerformanceIcon!=null&&window.parent.parent.showPerformanceIcon!="undefined"&&window.parent.parent.showPerformanceIcon.toLowerCase()=="true")?false:true}]});popUpWindow.show()}}function openPopupForServiceTarget(b,a){if(!inProgress){ServiceTargetHelpLink=service_target_help_link;openPopupWithTitle(b,null,a,460,670)}}function openiframepopup(e,a,d,c){var b=checkCustomPage();popUpWindow=new parent.Ext.Window({id:"popupWindowId1",height:a,width:d,x:10,y:5,title:Ext.util.Format.ellipsis(c,80),modal:true,resizable:false,constrain:true,cls:b.popUpWindowClassName,frame:b.isFrame,viewConfig:{forceFit:true},html:'<iframe frameborder="0" src ="/apex/'+e+'" style="width:100%;height:100%;border:none"/>',tools:[{id:"help",qtip:labelTooltipHelp,handler:function(){OpenHelppage("ServiceTarget","module","form")}},{id:"close",qtip:labelTooltipClose,handler:parent.closeWin}]});popUpWindow.show();popUpWindow.center()}function closeWin(c,a,b){b.close()}function openPopupWithTitle(i,e,k,a,d,l){if(k==null||k==""){k=""}if(a==null||a==""){a=550}if(d==null||d==""){d=670}onCompleteFunction=e;if(l){popUpWindow=new Ext.Window({height:a,width:d,title:k,x:10,y:5,modal:true,resizable:false,frame:false,border:false,cls:"portletPopup",constrain:true,viewConfig:{forceFit:true},html:'<iframe frameborder="0" scrolling="no" src ="/apex/'+i+'" style="width:100%;height:100%;border:none;"/>'})}else{var c=false;if((i.indexOf("ComposeEmailPage")==-1)&&(i.indexOf("MultiDocumentAttachmentPage")==-1)){c=true}if((i.indexOf("SLAMilestonePage")!=-1)){c=false}if(typeof(ServiceTargetHelpLink)!="undefined"&&ServiceTargetHelpLink!=null){c=false}var g=checkCustomPage();var j=i.split("?");var f="";var b=true;if(j[0].indexOf("MultiDocumentAttachmentPage")==-1){f=g.popUpWindowClassName;b=g.isFrame}var h="background-color:#FFFFFF;";if(i.indexOf("ComposeEmailPage")!=-1){h="background-color:#EFF3F5;"}popUpWindow=new Ext.Window({height:a,width:d,title:k,x:10,y:5,modal:true,resizable:false,bodyStyle:h,constrain:true,viewConfig:{forceFit:true},cls:f,frame:b,html:'<iframe frameborder="0" src ="/apex/'+i+'" style="width:100%;height:100%;border:none"/>',tools:[{id:"help",handler:function(){OpenHelpUrl(i)},qtip:(typeof(labelTooltipHelp)!="undefined"&&labelTooltipHelp!="undefined"&&labelTooltipHelp!=null)?labelTooltipHelp:"",hidden:c},{id:"close",qtip:(typeof(labelTooltipClose)!="undefined"&&labelTooltipClose!="undefined"&&labelTooltipClose!=null)?labelTooltipClose:"",handler:parent.closeWin}]})}popUpWindow.show()}function getEmailWinHt(){var a=0;if(Ext.isIE7){a=670}else{if(Ext.isIE){a=667}else{a=658}}return a}function getEmailWinWidth(){var a=0;if(Ext.isIE7){a=622}else{if(Ext.isIE){a=620}else{a=617}}return a}function openHierarchyPopup(c,e,a,d,b){onCompleteFunction=e;popUpWindow=new Ext.Window({height:a,width:d,x:10,y:5,modal:true,resizable:false,constrain:true,viewConfig:{forceFit:true},html:'<iframe frameborder="0" src ="/apex/'+c+'" style="width:100%;height:100%;background:#FFFFFF;border:none"/>'});popUpWindow.show();setTooltipOnWindowClose(popUpWindow,b)}function openHierarchyPopupWithTitle(d,f,b,a,e,c){if(b==null||b==""){b=""}onCompleteFunction=f;popUpWindow=new Ext.Window({height:a,width:e,x:10,y:5,title:b,modal:true,resizable:false,constrain:true,viewConfig:{forceFit:true},html:'<iframe frameborder="0" src ="/apex/'+d+'" style="width:100%;height:100%;border:none"/>'});popUpWindow.show();setTooltipOnWindowClose(popUpWindow,c)}function openPopup1(a,b){onCompleteFunction=b;popUpWindow=new Ext.Window({height:400,width:529,x:10,y:5,resizable:false,modal:true,constrain:true,viewConfig:{forceFit:true},html:'<iframe frameborder="0" src ="/apex/'+a+'" style="width:100%;height:100%;border:none"/>'});popUpWindow.show()}function closePopup(){if(popUpWindow!=null&&popUpWindow!=undefined){popUpWindow.close()}}function changePopUpTitle(a){if(popUpWindow!=null&&popUpWindow!="undefined"){popUpWindow.setTitle(a)}}function openPage(c,b,a){window.parent.addTab(c,b,a)}function openPageForTemplate(c,d,b,a){onCompleteFunction=d;window.parent.addTab(c,b,a)}function openModalDialog(b,c){var a=window.showModalDialog(b,"modalId","dialogWidth=600px; dialogHeight=600px; resizable=yes");if(c!=null&&(a!=null&&a!="")){c(a)}else{return a}}function openLookup(a,b){return openModalDialog("/apex/SearchPage?popupId="+a,b)}function openQueueLookup(a,b){return openModalDialog("/apex/QueueListPage?sObjectType="+a,b)}function openAssignTo(a,b){openLookup(a,b)}function getValue(a){return document.getElementById(a)}function updateTitle(a,b){window.parent.changeTitle(a,b);window.parent.refreshList()}function enableMenus(c){var d=c.length;var a;for(var b=0;b<d;b++){a+=c[b]+"-";Ext.getCmp(c[b]).enable()}}function disableMenus(b){var c=b.length;for(var a=0;a<c;a++){Ext.getCmp(b[a]).disable()}}function enableButtons(c){var b=c.length;for(var a=0;a<b;a++){Ext.getCmp(c[a]).setDisabled(true)}}function disableButtons(c){var b=c.length;for(var a=0;a<b;a++){Ext.getCmp(c[a]).setDisabled(true)}}var onCompleteFunctionList=[];var popupWindowList=[];function openMultiplePopup(b,d,a,c,e){onCompleteFunctionList.push(d);popUpWindow=new Ext.Window({title:e,height:a,width:c,x:10,y:5,modal:true,resizable:false,constrain:true,viewConfig:{forceFit:true},html:'<iframe src ="/apex/'+b+'" style="width:100%;height:100%;border:none"/>'});popupWindowList.push(popUpWindow);popUpWindow.show()}function closeAndRetunValue(b){if(b!=null&&b!=""&&onCompleteFunctionList!=null&&onCompleteFunctionList.length>0){var a=onCompleteFunctionList.length;a=a-1;var c=onCompleteFunctionList[a];onCompleteFunctionList.remove(c);c(b)}}function closeForMultiplePopup(){var b=popupWindowList.length;b=b-1;var a=popupWindowList[b];popupWindowList.remove(a);a.close()}function urlCheck(b){var a=new RegExp();a.compile("^[A-Za-z]+://[A-Za-z0-9-_]+\\.[A-Za-z0-9-_%&?/.=+{}]+$");if(!a.test(b)){return false}return true}function httpUrlCheck(b){var a=new RegExp();a.compile("^[hH][tT][tT][pP][sS]?://[A-Za-z0-9-_]+\\.[A-Za-z0-9-_%&?/.=+{}]+$");if(!a.test(b)){return false}return true}function httpIntranetUrlCheck(b){var a=new RegExp();a.compile("^[hH][tT][tT][pP][sS]?://[A-Za-z0-9-_]+[A-Za-z0-9-_%&?/.=+{}:]+$");if(!a.test(b)){return false}return true}function detachElemEvent(){var d=Ext.DomQuery.select("input");for(var c=0;c<d.length;c++){if(d[c].detachEvent){d[c].detachEvent("onchange",handleChange)}else{if(d[c].removeEventListener){d[c].removeEventListener("change",handleChange,false)}}}var b=Ext.DomQuery.select("textarea");for(var c=0;c<b.length;c++){if(b[c].detachEvent){b[c].detachEvent("onchange",handleChange)}else{if(b[c].removeEventListener){b[c].removeEventListener("change",handleChange,false)}}}var a=Ext.DomQuery.select('input[type="button"]');for(var c=0;c<a.length;c++){if(a[c].detachEvent){a[c].detachEvent("onfocus",handleChange)}else{if(a[c].removeEventListener){a[c].removeEventListener("focus",handleChange,false)}}}}function handleElemEvent(){detachElemEvent();var e=Ext.DomQuery.select("input");for(var d=0;d<e.length;d++){if(e[d].attachEvent){e[d].attachEvent("onchange",handleChange)}else{if(e[d].addEventListener){e[d].addEventListener("change",handleChange,false)}}}var b=Ext.DomQuery.select("textarea");for(var d=0;d<b.length;d++){if(b[d].attachEvent){b[d].attachEvent("onchange",handleChange)}else{if(b[d].addEventListener){b[d].addEventListener("change",handleChange,false)}}}var a=Ext.DomQuery.select('input[type="button"]');for(var d=0;d<a.length;d++){if(a[d].attachEvent){a[d].attachEvent("onfocus",handleChange)}else{if(a[d].addEventListener){a[d].addEventListener("click",handleChange,false)}}}var c=Ext.DomQuery.select('input[type="text"]');for(var d=0;d<c.length;d++){if(c[d].attachEvent){c[d].attachEvent("onfocus",setLookUpValue)}else{if(c[d].addEventListener){c[d].addEventListener("focus",setLookUpValue,false)}}}}function setLookUpValue(b){if(b!=null){var a=b.target;if(a!=null){var c=a.id;lookupValues[c]=a.value}}}function converdisabletoreadonly(){var e=document.getElementsByClassName("clsPanelInputTextboxReadOnly");var d=document.getElementsByClassName("clsInputTextAreaPgWoSidePanelReadOnly");var c=document.getElementsByClassName("clsPanelInputTextAreaReadOnly");var a=document.getElementsByClassName("clsIdInputTextBoxReadOnly ");for(var b=0;b<e.length;b++){e[b].disabled=false;e[b].readOnly=true}for(var b=0;b<d.length;b++){d[b].disabled=false;d[b].readOnly=true}for(var b=0;b<c.length;b++){c[b].disabled=false;c[b].readOnly=true}for(var b=0;b<a.length;b++){a[b].disabled=false;a[b].readOnly=true}}function SIComp(a){document.getElementById("SIIframeID").style.display="none";document.getElementById("SIIframeID").src=a;document.getElementById("onDemandSITableId").style.display="none";document.getElementById("SIIframeID").style.display="block"}function removeSI(a){document.getElementById("SIIframeID").src="";document.getElementById("SIIframeID").style.display="none";document.getElementById("onDemandSITableId").style.display="block";document.getElementById("noSIAvailTD").style.display="none";document.getElementById("configureSIId").checked=false;document.getElementById("getSIUrl").onclick=function(){SIComp(a)};document.getElementById("linkSIAvailTD").style.display="block"}var pickListArray=[];var pickListData=[];var pickListComboStore;function populatePickListCombo(c){var a=0;for(var b=0;b<pickListData.length;b++){if(pickListData[b][2].toUpperCase()==c.toUpperCase()){pickListArray[a]=pickListData[b];a=a+1}}pickListComboStore.loadData(pickListArray)}function createSICookie(c,b){var a=new Date();a.setYear(a.getFullYear()+10);document.cookie=c+"="+b+";expires="+a.toUTCString()+";path=/;SameSite=None;Secure"}function clearSICookie(b){var a=new Date();a.setYear(a.getFullYear()+10);document.cookie=b+"=false;expires="+a.toUTCString()+";path=/;SameSite=None;Secure"}function displaySI(c,a){var b=Ext.util.Cookies.get(c);if(b=="true"){SIComp(a);return true}else{return false}}function FetchUrgencyHTTPJS(l,i,j,k,c,d,g,o,q,a,e,n){var r=document.getElementById(a);var f=new Ext.data.Connection(),m=l,b,p,h="";if(document.getElementById(i)!=null&&document.getElementById(i)!=""){h=document.getElementById(i).value}if(j!=null){clid=document.getElementById(j).value}else{clid=null}if(n!=null){contactid=document.getElementById(n).value}else{contactid=null}iid=document.getElementById(k).value;if(c!=null&&document.getElementById(c)!=null){bid=document.getElementById(c).value}else{bid=null}if(a!=null){b=document.getElementById(a).value}else{b=null}if(q!=null){p=document.getElementById(q).value}else{p=null}f.request({url:"FetchUrgencyData",method:"POST",params:{id:m,fkcat:h,fkcl:clid,fkb:bid,fkcontact:contactid,fki:iid,fetchUrgency:true},callback:function(v,x,s){if(x){var w=Ext.DomQuery,t=s.responseXML,u=w.selectNode("urgencyname",t);if(document.getElementById(d)!=null&&u.firstChild!=null){document.getElementById(d).value=u.firstChild.nodeValue}u=w.selectNode("urgencyid",t);if(document.getElementById(g)!=null&&u.firstChild!=null){document.getElementById(g).value=u.firstChild.nodeValue}u=w.selectNode("priorityname",t);if(document.getElementById(o)!=null&&u.firstChild!=null){document.getElementById(o).value=u.firstChild.nodeValue}if(e!=null&&document.getElementById(e)!=null){if(u.firstChild!=null){document.getElementById(e).value=decodeURIComponent(u.firstChild.nodeValue)}else{document.getElementById(e).value=""}}u=w.selectNode("priorityid",t);if(document.getElementById(q)!=null&&u.firstChild!=null){document.getElementById(q).value=decodeURIComponent(u.firstChild.nodeValue);var y=decodeURIComponent(u.firstChild.nodeValue);if(p!=null&&p!=""&&p!=y){if(r!=null){setIsPriorityChanged("true")}}else{if(r!=null){setIsPriorityChanged("false")}}}if(u.firstChild==null&&e!=null){document.getElementById(q).value="";document.getElementById(e).value="";document.getElementById(o).value=""}return}}})}function openCategoryLookup(a){if(a!=null){if(a[0]!=null||a[0]!=""){if(a[0]=="OpenCategoryPage"){parent.openPopupWithTitle("CategoryPage?popupId=Category&isPopup=true",openCategoryPage,"",680,670,false)}else{if(a[0]=="OpenCategoryPageFromRequestDef"){parent.openPopupWithTitle("CategoryPage?popupId=Category&isPopup=true&isForReqDef=true",openCategoryPage,"",680,670,false)}else{if(a[0]!=null||a[0]!=""){var b;if(a[3]!=null&&a[3]!=""){b=a[3]}categoryName=a[0];setCatData(b,categoryName,a[4])}if(a[1]!=null&&a[1]!=""&&a[1]!="undefined"){setDescriptionNext(a[1])}if(a[2]!=null&&a[2]!=""&&a[2]!="undefined"){setResolutionNext(a[2])}}}}}}function FetchPriorityHTTPJS(h,c,b,e,i,d){var a=new Ext.data.Connection();var g;if(e!=null){g=document.getElementById(e).value}var f=document.getElementById(i);a.request({url:"FetchPriorityPage",method:"POST",params:{fki:h,fku:c,fetchPriority:true},callback:function(m,o,j){if(o){var n=Ext.DomQuery;var k=j.responseXML;var l=n.selectNode("priorityname",k);if(document.getElementById(b)!=null&&l.firstChild!=null){document.getElementById(b).value=decodeURIComponent(l.firstChild.nodeValue)}else{document.getElementById(b).value=""}if(d!=null&&document.getElementById(d)!=null){if(l.firstChild!=null){document.getElementById(d).value=decodeURIComponent(l.firstChild.nodeValue)}else{document.getElementById(d).value=""}}l=n.selectNode("priorityid",k);if(document.getElementById(e)!=null&&l.firstChild!=null){document.getElementById(e).value=decodeURIComponent(l.firstChild.nodeValue);var p=decodeURIComponent(l.firstChild.nodeValue);if(g!=null&&g!=""&&g!=p){if(f!=null){setIsPriorityChanged("true")}}else{if(f!=null){setIsPriorityChanged("false")}}}else{document.getElementById(e).value=""}if(l.firstChild==null&&d!=null){document.getElementById(e).value="";document.getElementById(d).value="";document.getElementById(b).value=""}return}}})}function activateWindow(){if(window.parent.activateWindow!=undefined){if(activeAllWindowFlag==true){window.parent.activateWindow(getWID())}}activeAllWindowFlag=true}function callFetchUrgencyHTTPJS(a,b,d,c){if(a==""&&b==""){return false}else{if(a==""&&b!=""&&c!=""){return true}else{if(a!=""&&b==""&&d!=""){return true}else{if(a!=""&&b!=""){if(c!=""||d!=""){return true}else{return false}}}}}return false}function showDataCommon(d,c,b,a){if(isAutocomplete){return}if(taboutFlag!=true){if(typeof(c)!="undefined"&&(typeof(b)!="undefined"&&b!=null)){if(typeof(a)!="undefined"&&a!=null){showalldata(d,c,b,a)}else{showalldata(d,c,b)}}else{if(typeof(c)!="undefined"&&(typeof(b)=="undefined"||b==null)){showalldata(d,c)}else{showalldata(d)}}}else{if(typeof(c)!="undefined"&&c!=""&&c!=null){c()}}}Ext.Container.prototype.bufferResize=false;function viewTextEditor(f,a,d,b,c,e){var g;if(f.parentNode.previousSibling.previousSibling!=null){g=f.parentNode.previousSibling.previousSibling.childNodes[1].childNodes[2].id}else{g=f.parentNode.previousSibling.childNodes[0].childNodes[1].id}showTextEditor(Ext.isIE?f.parentNode.previousSibling.childNodes[0].childNodes[1].id:g,a,d,b,c);if(e!=null&&e!="undefined"&&e){Ext.getCmp("formTextId").el.dom.setAttribute("readOnly",true);Ext.getCmp("formTextId").addClass("disabledTextEditor");Ext.getCmp("formTextId").blur()}}function showTextEditor(g,f,j,i,d,h,b,c){if(h==null||h=="undefined"){h=450}if(b==null||b=="undefined"){b=580}var a=new Ext.form.FormPanel({baseCls:"x-plain",labelWidth:55,layout:{type:"vbox",align:"stretch"},defaults:{xtype:"textfield"},items:[{xtype:"textarea",id:"formTextId",fieldLabel:"Message text",hideLabel:true,border:false,enableKeyEvents:true,name:"msg",flex:1,listeners:{keyup:function(k,l){var m=k.getValue();if(m.length>j){k.setValue(m.substr(0,j))}}}}]});var e=new Ext.Window({title:f,id:"windowId",width:b,height:h,minWidth:300,minHeight:200,layout:"fit",modal:true,plain:true,cls:"TextEditorWindowCls",buttonAlign:"left",items:a,defaultButton:"formTextId",buttons:[{text:i,width:60,cls:"windowBtnCls",handler:function(){if(g!=null&&g!="undefined"){document.getElementById(g).focus();document.getElementById(g).value=Ext.getCmp("formTextId").getValue();if(typeof(c)!="undefined"&&c!=""&&c!=null&&typeof(c)=="function"){c()}}else{if(approvalComments!=null&&approvalComments!="undefined"){var k=Ext.getCmp("formTextId").getValue();approvalComments(k,c)}}e.close()}},{text:d,width:60,cls:"windowBtnCls",handler:function(){e.close()}}]});e.show();if(g!=null&&g!="undefined"){Ext.getCmp("formTextId").focus();Ext.getCmp("formTextId").setValue(document.getElementById(g).value)}}function validateLength(a,b){var c=document.getElementById(a).value;if(c.length>b){document.getElementById(a).value=c.substr(0,b)}}function waitbox(a){if(parseInt(a)>0){setTimeout("waitMsg.hide()",a)}waitMsg=new Ext.Window({height:100,width:200,resizable:false,closable:false,header:false,frame:false,modal:true,shadow:false,items:[{xtype:"panel",height:100,width:200,bodyStyle:"background-color:transparent;border:none;",html:'<div align="center"><img src="'+tabOutImg+'"/></div>'}]});waitMsg.show()}function escSpeChars(a){a=replaceAll(a,"\\","�");a=replaceAll(a,"�","\\");a=replaceAll(a,"?","�");a=replaceAll(a,"�","\\?");a=replaceAll(a,"^","�");a=replaceAll(a,"�","\\^");a=replaceAll(a,"$","�");a=replaceAll(a,"�","\\$");a=replaceAll(a,"(","�");a=replaceAll(a,"�","\\(");a=replaceAll(a,")","�");a=replaceAll(a,"�","\\)");a=replaceAll(a,"[","�");a=replaceAll(a,"�","\\[");a=replaceAll(a,"]","�");a=replaceAll(a,"�","\\]");a=replaceAll(a,"{","�");a=replaceAll(a,"�","\\}");a=replaceAll(a,"*","�");a=replaceAll(a,"�","\\*");a=replaceAll(a,"+","�");a=replaceAll(a,"�","\\+");a=replaceAll(a,"|","�");a=replaceAll(a,"�","\\|");return a}function replaceAll(e,c,d){var a=e;var b=a.indexOf(c);while(b!=-1){a=a.replace(c,d);b=a.indexOf(c)}return a}function isBrowserWindowMaximized(){if(Ext.isIE){if(screen.width-window.parent.document.body.clientWidth==4){return true}}else{if(Ext.isSafari){if(screen.width-window.parent.document.body.clientWidth==0){return true}}else{if(screen.width-window.outerWidth==-8){return true}}}return false}var inputHTMLElement;function openLookupPopup(e,g,a,j,f,h){if(h==null||typeof(h)=="undefined"||h==""){h="SearchPage"}if(a=="Incident__c"&&g=="FKBMC_BaseElement__c"&&(j==null||typeof(j)=="undefined"||j=="")){if(h=="SearchPage"){var k=document.getElementById(IncidentPageComp.ComponentVars.UserID);f="filterObjectId="+getUserID()+"&isFilterObject=true&parentName=Incident__c&isRadioChecked=false&accountId="+getAccountID()+"&incidentId="+getIncidentID()+"&incCiId="+getCIelemID()+"&incServiceId="+getServiceElemID()+"&selectedCIFilter="+LinkedToClient}else{f="filterObjectId="+f+"&isFilterObject=true"}j="BMC_BaseElement__c_id_name"}var b=e.previousSibling.previousSibling;if(typeof(j)!="undefined"&&j!=null&&j!=""&&j.indexOf("Broadcasts__c_id_name")!=-1){openPopup(h+"?moduleId="+g+"&isLookup=true&popupId=null&moduleName="+a,setBroadcastNext)}else{if(j=="BMC_BaseElement__c_id_name"){openPopup(h+"?moduleId="+g+"&isLookup=true&popupId=BMC_BaseElement&moduleName="+a+"&isFilterObject=true&"+f,null)}else{if(j=="BMC_BusinessService__c_id_instance_name__c"&&a=="Incident__c"){if(h=="SearchPage"){openPopup(h+"?moduleId="+g+"&isLookup=true&popupId=BMC_BusinessService&moduleName="+a+"&isFilterObject=true&filterClause="+f+"&additional_columns=fkbmc_baseelement__c,instance_name__c",setServiceRelatedFields)}else{openPopup(h+"?moduleId="+g+"&isLookup=true&popupId=BMC_BusinessService&moduleName="+a+"&isFilterObject=true&ssFilterClause="+f,null)}}else{if(j=="BMC_BusinessService__c_id_instance_name__c__xx_1"&&a=="Incident__c"){if(h=="SearchPage"){openPopup(h+"?moduleId="+g+"&isLookup=true&popupId=BMC_BusinessService&moduleName="+a+"&isFilterObject=true&filterClause="+f+"&additional_columns=fkbmc_baseelement__c,instance_name__c",setServiceOfferingRelatedValues)}else{openPopup(h+"?moduleId="+g+"&isLookup=true&popupId=BMC_BusinessService&moduleName="+a+"&isFilterObject=true&ssFilterClause="+f,null)}}else{if(j=="SRM_RequestDefinition__c_id_servicerequesttitle__c"&&a=="Incident__c"){var c=document.getElementById(IncidentPageComp.ComponentVars.CategoryID).value;var i=document.getElementById(IncidentPageComp.ComponentVars.CategoryIDName).value;var d=document.getElementById(IncidentPageComp.ComponentVars.UserID).value;if(i!=null&&i!=""){openPopup("SearchPage?isLookup=true&popupId=SRM_RequestDefinition&moduleId="+g+"&moduleName="+a+"&clientIdforSrm="+d+"&catIdForSrd="+c,setSelectedSRD)}else{openPopup("SearchPage?isLookup=true&popupId=SRM_RequestDefinition&moduleId="+g+"&moduleName="+a+"&clientIdforSrm="+d,setSelectedSRD)}}else{if(g=="FKOpenBy__c"&&a=="Incident__c"){openPopup(h+"?moduleId="+g+"&isLookup=true&popupId=null&filterClause="+escape("IsStaffUser__c=true")+"&moduleName="+a,null)}else{if(g=="FKStaff__c"&&a=="Change_Request__c"){openPopup(h+"?moduleId="+g+"&isLookup=true&popupId=null&filterClause="+escape("IsStaffUser__c=true")+"&moduleName="+a,null)}else{if(g=="FKStaff__c"&&a=="Problem__c"){openPopup(h+"?moduleId="+g+"&isLookup=true&popupId=null&filterClause="+escape("IsStaffUser__c=true")+"&moduleName="+a,null)}else{if(g=="FKOpenBy__c"&&a=="Task__c"){openPopup(h+"?moduleId="+g+"&isLookup=true&popupId=null&filterClause="+escape("IsStaffUser__c=true")+"&moduleName="+a,null)}else{openPopup(h+"?moduleId="+g+"&isLookup=true&popupId=null&moduleName="+a,null)}}}}}}}}}setPopUpValueID(b.id)}function openLookupPopup1(e,f,c,g,b,a){var d=e.previousSibling.previousSibling;if(a==null||typeof(a)=="undefined"||a==""){a="SearchPage"}if(g=="Broadcasts__c_id_name"){openPopup(a+"?moduleId="+f+"&InstanceID="+BE_InstanceID+"&isLookup=true&popupId=null&moduleName="+c,setBroadcastNext)}else{if(g=="BMC_BaseElement__c_id_name"){openPopup(a+"?moduleId="+f+"&InstanceID="+BE_InstanceID+"&isLookup=true&popupId=BMC_BaseElement&moduleName="+c+"&isFilterObject=true&"+b,null)}else{if(g=="BMC_BusinessService__c_id_instance_name__c"){openPopup(a+"?moduleId="+f+"&InstanceID="+BE_InstanceID+"&isLookup=true&popupId=BMC_BusinessService&moduleName="+c+"&isFilterObject=true&"+b,null)}else{if((c.toUpperCase()=="BMC_BUSINESSSERVICE__C")&&(f.toUpperCase()=="SERVICE_PROVIDER__C")){openPopup(a+"?moduleId="+f+"&InstanceID="+BE_InstanceID+"&isLookup=true&popupId=null&moduleName="+c+"&SPFlag=true",null)}else{if((c.toUpperCase()=="BMC_BUSINESSSERVICE__C")&&(f.toUpperCase()=="VENDOR__C")){openPopup(a+"?moduleId="+f+"&InstanceID="+BE_InstanceID+"&isLookup=true&popupId=null&moduleName="+c+"&VENDORFlag=true",null)}else{if((c.toUpperCase()=="BMC_BUSINESSSERVICE__C")&&(f.toUpperCase()=="SERVICE_OWNER__C")){openPopup(a+"?moduleId="+f+"&InstanceID="+BE_InstanceID+"&isLookup=true&filterClause=IsStaffUser__c=true&popupId=null&moduleName="+c,null)}else{if(c.toUpperCase()=="SERVICELEVELAGREEMENT__C"&&(f.toUpperCase()!="FKAGREEMENTOWNER__C")&&(f.toUpperCase()!="FKSUPPORTHOURS__C")){openPopup(a+"?moduleId="+f+"&isLookup=true&popupId=null&moduleName="+c,null)}else{if(c.toUpperCase()=="SERVICELEVELAGREEMENT__C"&&(f.toUpperCase()=="FKAGREEMENTOWNER__C")){openPopup(a+"?moduleId="+f+"&isLookup=true&filterClause=IsStaffUser__c=true&popupId=null&moduleName="+c,null)}else{if(c.toUpperCase()=="SERVICELEVELAGREEMENT__C"&&(f.toUpperCase()=="FKSUPPORTHOURS__C")){openPopup(a+"?moduleId="+f+"&InstanceID="+BE_InstanceID+"&isLookup=true&popupId=null&&useSOQLForSearch=true&moduleName="+c,null)}else{openPopup(a+"?moduleId="+f+"&InstanceID="+BE_InstanceID+"&isLookup=true&popupId=null&moduleName="+c,null)}}}}}}}}}setPopUpValueID(d.id)}function setPopUpValue(a,b){if(a!=null&&a!=""&&a!="undefined"){if(inputHTMLElement!=null&&inputHTMLElement!=""&&inputHTMLElement!="undefined"){inputHTMLElement.value=a;inputHTMLElement.previousSibling.value=a;inputHTMLElement.previousSibling.previousSibling.previousSibling.value=htmlDecode(b)}}}function setPopUpValueID(a){if(a!=null&&a!=""){inputHTMLElement=document.getElementById(a)}}function checkCustomPage(){var a={popUpWindowClassName:"",isFrame:true};if(typeof isCustomPage!="undefined"||typeof window.parent.isCustomPage!="undefined"){a={popUpWindowClassName:"popUpWindowClass",isFrame:false}}return a}function setDatePickerPosition(c,a){if(c=="date"||c=="datetime"){var b=document.getElementById("datePicker");if(b!=null&&typeof b!="undefined"){b.style.top=(a.clientY+10)+"px";b.style.left=a.clientX+"px"}}}function setTooltipOnWindowClose(b,a){var c=Ext.getCmp(b);new Ext.ToolTip({target:b.tools.close,trackMouse:true,anchor:"top",anchorOffset:10,html:a})}var openInVar="";var customActionJsonString="";var urlStringVar="";var custionActionObj="";function customActionHandler(a){openInVar=a.openIn;custionActionObj=a;getCustomActionURL(a.id)}function openUrl(){if(openInVar.indexOf("Remedyforce")!=-1){window.parent.parent.addNewTab(custionActionObj.id,customActionHeaderLabel,"NavigatorPage?title="+custionActionObj.encodedText+"&isCustomActionLink=true&target="+urlStringVar)}else{if(openInVar.toLowerCase().indexOf("window")!=-1){var a="resizable=1,scrollbars=1,fullscreen=1,toolbar=1,menubar=1,status=1,location=1";window.open(urlStringVar,"",a)}else{window.open(urlStringVar)}}}function enableCustomActionJS(b){var a=customActionJsonString;if(b!=null&&b!=""&&b!="null"&&a!=null&&typeof(a)!="undefined"){for(ind=0;ind<a.length;ind++){Ext.getCmp(a[ind].id).setDisabled(false)}}}function resetReferenceFields(a){if(a!=null&&typeof(a)!="undefined"){if(a.value==null||a.value==""){var b=a.nextSibling.nextSibling;b.value="";b.nextSibling.nextSibling.previousSibling.value=b.value;a.previousSibling.previousSibling.value=""}}}function checkLoseChanges(a){Ext.Msg.show({title:labelcloseWindow1,msg:labelcloseWindowLabel1,buttons:Ext.Msg.YESNO,fn:function(b){if(b=="yes"){if(document.getElementById("nextId").disabled!=true||document.getElementById("prevId").disabled!=true){a()}return true}},icon:Ext.MessageBox.WARNING});return false}function validateSpinnerField(c,b){var d=c.getValue();d=d.toString();var a=d.substring(0,d.length-1);if(d>c.maxValue){c.setValue(parseInt(a))}}function hideWaitMsg(){if(typeof(waitMsg)!="undefined"&&waitMsg!=null&&waitMsg!=""){waitMsg.hide()}}function fetchCategoryData(sel,divId,field,iKeyCode,module){var con=new Ext.data.Connection();con.request({url:"apex/ClientDataPage",method:"POST",params:{startString:field.value,module:module},callback:function(opts,success,response){if(success){var dq=Ext.DomQuery;var xml=response.responseXML;var node=dq.selectNode("categorydata",xml);if(list!=null&&node.firstChild!=null){var encodedCategoryData=node.firstChild.nodeValue;encodedCategoryData=String(encodedCategoryData).replace(/\+/g,"%20");list=eval("("+decodeURIComponent(encodedCategoryData)+")");findAutoCompleteSelectOptions(sel,divId,field,iKeyCode)}return}}})}var PrintBtnHandler=function(b,c){var a="resizable=1,scrollbars=1,toolbar=1,menubar=1,status=1,location=1";window.open(print_url,"",a)};var PrintPDFBtnHandler=function(b,c){var a="resizable=1,scrollbars=1,toolbar=1,menubar=1,status=1,location=1";window.open(print_url_pdf,"",a)};function IsNewRecord(a){if(a!=null&&a!=""){return false}else{return true}}function decodeSpecialChar(a){if(a!=null&&a!=""&&a!=undefined){a=a.replace("&gt;",">","g");a=a.replace("&lt;","<","g");a=a.replace("&quot;",'"',"g");a=a.replace("&amp;","&","g")}return a}function isIE8CompatibleInIE9(){var a=false;if(navigator.userAgent!=null){if(navigator.userAgent.indexOf("MSIE 8")>-1){if(navigator.userAgent.indexOf("Trident/5")>-1){a=true}}}return a}function isIE8CompatibleInIE(){var a=false;var b=navigator.userAgent;if(b!=null){if(b.indexOf("MSIE")>-1){var c=b.indexOf("Trident/");if(c>=-1){if(b.substr(c+8,1)>4){a=true}}}}return a}function ConvertUTCtoGMT(n){var b=new Array(13);var h=new Array(7);b[0]="Jan";b[1]="Feb";b[2]="Mar";b[3]="Apr";b[4]="May";b[5]="Jun";b[6]="Jul";b[7]="Aug";b[8]="Sep";b[9]="Oct";b[10]="Nov";b[11]="Dec";h[0]="Sun";h[1]="Mon";h[2]="Tue";h[3]="Wed";h[4]="Thu";h[5]="Fri";h[6]="Sat";var e=new Date(n);var i=b[e.getMonth()];var a=e.getDate();var l=h[e.getDay()];var j=e.getYear();var g=e.getHours();if(g<=9){g="0"+g}var f=e.getMinutes();if(f<=9){f="0"+f}var c=e.getSeconds();if(c<=9){c="0"+c}var k=e.getTimezoneOffset();var d;var o;if(k<0){d=Math.floor(-k/60);o=-k%60;k="+"+d+o+""}else{d=Math.floor(k/60);o=k%60;k="-"+d+o+""}if(j<2000){j=j+1900}var m=l+" "+i+" "+a+" "+j+" "+g+":"+f+":"+c+" GMT"+k;return m}function RemoveQueryString(g,b){var f=g.indexOf("?");var d=g.substring(f+1);var h=g.substring(0,f);var e=d.split("&");var a="";for(var c=0;c<e.length;c++){if(e[c].indexOf(b)==-1){a=a+e[c]+"&"}}if(a!=""){h=h+"?"+a.substring(0,a.length-1)}return h}function openPopupforAC(c,e,a,f,d){var b=checkCustomPage();onCompleteFunction=e;acpopUpWindow=new Ext.Window({height:f,width:d,title:a,x:10,y:5,modal:true,id:"mypopup1",resizable:false,bodyStyle:"background-color:#FFFFFF;",constrain:true,viewConfig:{forceFit:true},cls:b.popUpWindowClassName,frame:b.isFrame,html:'<iframe id="popupWindowFrameId" frameborder="0" src ="/apex/'+c+'" style="width:100%;height:100%;border:none"/>',tools:[{id:"help",qtip:labelTooltipHelp,style:"padding-right: 5px;background-color:red;",handler:function(){}},{id:"maximize",style:"padding-right: 5px;background-color:red;",qtip:_ServerValues.labelTooltipMaximize,handler:function(){acpopUpWindow.setWidth(1200);acpopUpWindow.tools.maximize.hide();acpopUpWindow.tools.restore.show();acpopUpWindow.tools.restore.dom.style.display="inline";acpopUpWindow.tools.restore.dom.qtip=_ServerValues.labelTooltipRestore;acpopUpWindow.tools.maximize.dom.style.display="none";acpopUpWindow.center()}},{id:"restore",hidden:true,style:"padding-right: 5px;background-color:red;",qtip:_ServerValues.labelTooltipRestore,handler:function(){acpopUpWindow.setWidth(750);acpopUpWindow.tools.maximize.show();acpopUpWindow.tools.restore.hide();acpopUpWindow.tools.maximize.dom.style.display="inline";acpopUpWindow.tools.maximize.dom.qtip=_ServerValues.labelTooltipMaximize;acpopUpWindow.tools.restore.dom.style.display="none";acpopUpWindow.center()}},{id:"close",qtip:labelTooltipClose,handler:parent.closeWin}]});acpopUpWindow.show()}var originalInit=Ext.Button.prototype.initButtonEl;Ext.override(Ext.Button,{initButtonEl:function(a,b){b.dom.id="BTN"+this.id;originalInit.apply(this,arguments)}});var originalWindowLayout=Ext.Window.prototype.doLayout;Ext.override(Ext.Window,{doLayout:function(){try{var a=0;Ext.select(".x-tool").each(function(c){var d=c.dom.id;d=d.substring(0,6);if(d!="WINDOW"){c.dom.id="WINDOW-TOOL-"+a++}});originalWindowLayout.apply(this,arguments)}catch(b){}}});var originalPanelLayout=Ext.Panel.prototype.doLayout;Ext.override(Ext.Panel,{doLayout:function(){try{var b=0;Ext.select(".x-menu-item-text").each(function(d){d.dom.id="MENU-LIST-ITEM-"+b++});var a=0;Ext.select(".x-combo-list-item").each(function(d){d.dom.id="COMBO-LIST-ITEM-"+a++});originalPanelLayout.apply(this,arguments)}catch(c){}}});Ext.MessageBox=function(){var a=function(){};a.prototype=Ext.MessageBox;var b=function(){};b.prototype=new a();b.superclass=a.prototype;Ext.override(b,function(){return{getDialog:function(){var e=b.superclass.getDialog.apply(this,arguments);var c=0;Ext.select(".x-window-dlg .x-window-footer table.x-btn button").each(function(d){d.dom.id="MSG-BTN-"+(c++)});return e}}}());return new b()}();Ext.Msg=function(){var a=function(){};a.prototype=Ext.MessageBox;var b=function(){};b.prototype=new a();b.superclass=a.prototype;Ext.override(b,function(){return{getDialog:function(){var e=b.superclass.getDialog.apply(this,arguments);var c=0;Ext.select(".x-window-dlg .x-window-footer table.x-btn button").each(function(d){d.dom.id="MSG-BTN-"+(c++)});return e}}}());return new b()}();