function isComplete(){waitMsg.hide();if(errorMessage==null||errorMessage==""){Ext.MessageBox.show({title:msgTitle,id:"saveMsg",width:250,msg:saveMessage,buttons:Ext.MessageBox.OK})}}function Save(){waitMsg.show();saveChatterSetting(propDisableRFChatter,getIncidentChatterPostsData())}var ShowIncidentChatterPosts=false;var chatterGroupsData=null;var IncidentChatterPostsGridStore=null;var classForCheckbox="checkboxClass";function getInternetExplorerVersion(){var c=-1;if(navigator.appName=="Microsoft Internet Explorer"){var a=navigator.userAgent;var b=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(b.exec(a)!=null){c=parseFloat(RegExp.$1)}}return c}var ver=getInternetExplorerVersion();if(ver>-1){if(ver>=8){classForCheckbox="checkboxClass1"}}function getIncidentChatterPostsData(){if(!ShowIncidentChatterPosts){return""}var c="";var a=IncidentChatterPostsGridStore.getRange();var d=[];for(var b=0;b<a.length;b++){d[b]=a[b].data}c=Ext.encode([{enabled:IncidentChatterPostsGridData.enabled,data:d}]);return c}var WindowVar=null;Ext.onReady(function(){var d=Ext.extend(Ext.Panel,{id:"menuBarPanel",renderTo:"btnToolbar",defaults:{bodyStyle:"border:0px;padding:0px;margin:0px;zoom:0px;"}});new d({title:"",cls:"toolSpCls",bodyStyle:"border:0px;padding:0px;margin:0px;zoom:0px;height:0px;",tbar:[{scale:"medium",iconCls:"bmcSave",tooltipType:"title",tooltip:lblSave,id:"saveId",listeners:{click:function(){Save()}}}]});var g=new Ext.form.Checkbox({id:"EnableRFChatterChk",cls:classForCheckbox,boxLabel:chatterDisable,checked:propDisableRFChatter,handler:function(){propDisableRFChatter=this.getValue()+"";enableButtons(propDisableRFChatter)}});if(ShowIncidentChatterPosts){GroupBoxKeyPressed=function(i,h){if(i.keyCode==Ext.EventObject.BACKSPACE||i.keyCode==Ext.EventObject.DELETE){var j=IncidentChatterPostsGridStore.getById(h);j.beginEdit();j.set("groupid","");j.set("groupname","");j.endEdit()}};showChatterGroupsWindow=function(j){var i=new Ext.data.JsonStore({autoLoad:true,idProperty:"Id",fields:[{name:"Id"},{name:"Name"}],data:chatterGroupsData});var h=new Ext.grid.GridPanel({store:i,hideHeaders:true,autoScroll:true,columns:[{id:"groupid",header:"",width:0,hidden:true,hideable:false,dataIndex:"Id"},{header:Labels.ChatterGroup,width:480,id:"groupname",dataIndex:"Name"}],stripeRows:true,height:260,title:""});if(WindowVar!=null){WindowVar.close()}WindowVar=new Ext.Window({height:300,width:500,title:Labels.PCG_SelectChatterGroup,items:h});h.getSelectionModel().on("selectionchange",function(k,n,l){record=k.getSelected();if(typeof(record)!="undefined"){var m=IncidentChatterPostsGridStore.getById(j);m.beginEdit();m.set("groupid",record.get("Id"));m.set("groupname",record.get("Name"));m.endEdit();setTimeout(function(){WindowVar.close();WindowVar=null},100)}});WindowVar.show()};IncidentChatterPostsGridStore=new Ext.data.JsonStore({autoLoad:true,root:"data",idProperty:"priorityid",fields:[{name:"priorityid"},{name:"priorityname"},{name:"groupid"},{name:"groupname"}],data:IncidentChatterPostsGridData});var e=new Ext.XTemplate('<tpl for=".">','<table style="width: 99%"><tr>','<td width="270px"><input style="width: 98%; *width:158%; *height:15px;" readonly="readonly" onkeypress="return GroupBoxKeyPressed(event,\'{priorityid}\')" class= "clsInputTextBox" type="text" value="{groupname}" /></td>','<td width="22px"><img src="'+sdef_styles_path+'/SDEFbuttons/b_pick.gif" onclick="showChatterGroupsWindow(\'{priorityid}\');" style="width: 20px; height: 20px;" /></td>',"</tr></table>","</tpl>").compile();function b(m,j,h,n,l,i){var k='<div style="padding-top:4px:align:center">'+m+"</div>";if(m<6){k='<img src="'+sdef_styles_path+"/SDEFimages/priority"+m+'-16.gif" style="width: 16px; height: 16px; padding-top:3px" />'}return k}var f=new Ext.grid.GridPanel({id:"IncidentChatterPostsGrid",store:IncidentChatterPostsGridStore,enableHdMenu:false,columns:[{id:"priorityid",header:"",hidden:true,hideable:false,width:0,dataIndex:"priorityid"},{id:"groupid",header:"",hidden:true,hideable:false,width:0,dataIndex:"groupid"},{header:Labels.PriorityWindowHeaderSearchPage,width:80,align:"center",dataIndex:"priorityname",hideable:false,resizable:false,renderer:b},new Ext.grid.TemplateColumn({header:Labels.ChatterGroup,tpl:e,hideable:false,resizable:false,width:517,dataIndex:"groupname",id:"groupname"})],stripeRows:true,height:500,width:600,title:""});window.enableButtons=function(){var h=Ext.getCmp("IncidentChatterPostsChk");var i=Ext.getCmp("IncidentChatterPostsGrid");if(propDisableRFChatter=="false"||propDisableRFChatter==false){h.setDisabled(false);i.setDisabled(false)}else{h.setDisabled(true);i.setDisabled(true)}};var a=new Ext.form.Checkbox({id:"IncidentChatterPostsChk",cls:classForCheckbox,boxLabel:Labels.PCG_EnableFeature,checked:IncidentChatterPostsGridData.enabled,handler:function(){IncidentChatterPostsGridData.enabled=this.getValue()}});var c=new Ext.Panel({id:"IncidentChatterPostsPanel",border:false,renderTo:"contentDiv",items:[g,a,f]})}enableButtons()});