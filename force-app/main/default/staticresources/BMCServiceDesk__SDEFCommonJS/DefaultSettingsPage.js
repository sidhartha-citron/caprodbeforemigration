var beforeSave=false;var strvalue="";function enableDisableButtons(){if(document.getElementById(quicklink).checked){Ext.getCmp("newId").setDisabled(false)}else{Ext.getCmp("deleteId").setDisabled(true);Ext.getCmp("upBtn").setDisabled(true);Ext.getCmp("downBtn").setDisabled(true);Ext.getCmp("newId").setDisabled(true)}}function updatemsgtemplatesection(a){if(a.checked){document.getElementById(templateArea).disable=false;document.getElementById(contactUsMessageTextArea).disabled=false}else{document.getElementById(templateArea).disabled=true;document.getElementById(contactUsMessageTextArea).disabled=true}}var removeHandler=function(c,d){var b=Ext.getCmp("faqCategoryGrid").store;var e=b.getAt(selectedRowIndex).get("quickLinkName");var a=b.getAt(selectedRowIndex).get("quickLinkURL");if((e==null||e=="")&&(a==null||a=="")){c="ok";removeQuickLinkHandler(c,d)}else{Ext.Msg.show({cls:"messagePopup",title:removeQuickLinkLabel,msg:quickLinksDeleteConfirmationLabel,buttons:Ext.Msg.OKCANCEL,fn:removeQuickLinkHandler,width:300,icon:Ext.MessageBox.WARNING,frame:false})}};function setReadOnly(){var a=document.getElementById(assignValuevar);if(a!=null){a.setAttribute("readonly","readonly")}}Ext.ns("Ext.ux.grid");Ext.ux.grid.CheckColumn=function(a){Ext.apply(this,a);if(!this.id){this.id=Ext.id()}this.renderer=this.renderer.createDelegate(this)};Ext.ux.grid.CheckColumn.prototype={init:function(a){this.grid=a;this.grid.on("render",function(){var b=this.grid.getView();b.mainBody.on("mousedown",this.onMouseDown,this)},this)},onMouseDown:function(d,c){if(c.className&&c.className.indexOf("x-grid3-cc-"+this.id)!=-1){d.stopEvent();var b=this.grid.getView().findRowIndex(c);var a=this.grid.store.getAt(b);a.set(this.dataIndex,!a.data[this.dataIndex])}},renderer:function(b,c,a){c.css+=" x-grid3-check-col-td";return'<div class="x-grid3-check-col'+(b?"-on":"")+" x-grid3-cc-"+this.id+'">&#160;</div>'}};Ext.preg("checkcolumn",Ext.ux.grid.CheckColumn);Ext.grid.CheckColumn=Ext.ux.grid.CheckColumn;var SaveBtnHandler=function(g,b){objList="";beforeSave=true;var l=document.getElementById(txtSSURLvar).value;if(l!=""){l=httpIntranetUrlCheck(l);if(!l){Ext.Msg.show({msg:invalidSSURLLabel,buttons:Ext.Msg.OK});return}}var f=httpIntranetUrlCheck(document.getElementById(txturlvar).value);if(document.getElementById(enableIntranetvar).checked){if(!f){var d=invalidIntranetURLLabel;showMessage(d);return}}if(document.getElementById(assignValuevar).value==""){var d="Please select Incident Assignment to Queue";showMessage(d);return}var a=/^[0-9]+$/;var m=document.getElementById(selectDaysvariable).value;if(!(m.match(a))){var d="Incident History in Days is Invalid";showMessage(d);return}var n=Ext.getCmp("faqCategoryGrid").getStore().getModifiedRecords();var k=Ext.getCmp("faqCategoryGrid").getStore().getTotalCount();var c=Ext.getCmp("faqCategoryGrid").getStore().getCount();var i;var j=Ext.getCmp("faqCategoryGrid").store;if((n==null||n=="")&&(c>k)){objList=objList+"undefined"+PE+"undefined"+PE+"undefined"+PE+"undefined"+PE+"undefined"+EF}else{var h;var e;for(i=0;i<j.data.length;i++){h=httpIntranetUrlCheck(j.getAt(i).get("quickLinkURL"));if(!h){var d=invalidQuickLinkURLLabel;showMessage(d);return}e=j.getAt(i).get("quickLinkName");if(e.length>50){var d=SSQuickLinkNameInvalidSizeLabel;showMessage(d);return}recName=j.getAt(i).get("quickLinkNumber");recURLOrder=i+1;recQuickLinkName=j.getAt(i).get("quickLinkName");recQuickLinkURL=j.getAt(i).get("quickLinkURL");recQuickLinkPermanent=j.getAt(i).get("quickLinkPermanent");objList=objList+recName+PE+recURLOrder+PE+recQuickLinkName+PE+recQuickLinkURL+PE+recQuickLinkPermanent+EF}}updateObjList(objList);Ext.getCmp("faqCategoryGrid").getStore().commitChanges();Ext.getCmp("faqCategoryGrid").render("faqCategory-grid");waitbox(0)};var removeQuickLinkHandler=function(b,d){if(b=="ok"){var a=Ext.getCmp("faqCategoryGrid").getStore().getAt(selectedRowIndex);var c=a.get("quickLinkNumber");deleteQuickLink(c);Ext.getCmp("faqCategoryGrid").render("faqCategory-grid");Ext.getCmp("faqCategoryGrid").getStore().remove(a);Ext.getCmp("deleteId").setDisabled(true);Ext.getCmp("upBtn").setDisabled(true);Ext.getCmp("downBtn").setDisabled(true)}else{if(b=="cancel"){return}}};var ResetBtnHandler=function(a,b){reset()};var ChngBtnHandler=function(a,b){alert("In Change")};var fm=Ext.form;function UpBtnHandler(){if(Ext.getCmp("upBtn").disabled==false){var a=selectedRowIndex;var c=grid.store.getAt(a);var b=grid.store.getAt(a-1);grid.stopEditing();store.insert(a-1,c);store.insert(a,b);grid.getView().refresh();selectedRowIndex--;var d=store.data.length;if(selectedRowIndex==0||d==1){Ext.getCmp("upBtn").setDisabled(true)}else{Ext.getCmp("upBtn").setDisabled(false)}if((selectedRowIndex==(d-1))||(d==1)){Ext.getCmp("downBtn").setDisabled(true)}else{Ext.getCmp("downBtn").setDisabled(false)}}}function DownBtnHandler(){if(Ext.getCmp("downBtn").disabled==false){var a=selectedRowIndex;var c=grid.store.getAt(a);var b=grid.store.getAt(a+1);grid.stopEditing();store.insert(a,b);store.insert(a+1,c);grid.getView().refresh();selectedRowIndex++;var d=store.data.length;if(selectedRowIndex==0||d==1){Ext.getCmp("upBtn").setDisabled(true)}else{Ext.getCmp("upBtn").setDisabled(false)}if((selectedRowIndex==(d-1))||(d==1)){Ext.getCmp("downBtn").setDisabled(true)}else{Ext.getCmp("downBtn").setDisabled(false)}}}function refresh(){var c=0;while(store.data.length>c){var a=grid.getStore().getAt(c);var g=grid.getColumnModel().getDataIndex(3);var e=a.get(g);var b=0;while(typeEditor.store.data.length>b){var f=typeEditor.store.getAt(b).get("value");if(f==e){var d=typeEditor.store.getAt(b).get("name");a.set(g,d)}b++}c++}}function enableCloseIncidentDays(){if(document.getElementById(limitClosedIncidentsvar).checked){document.getElementById(selectDaysvariable).disabled=false}else{document.getElementById(selectDaysvariable).disabled=true}}function enableMobile(){document.getElementById(PortalIdvalvar).disabled=true;if(document.getElementById(enableMobileAccessvar).checked){document.getElementById(PortalIdvalvar).disabled=false}}function enableUrl(){if(document.getElementById(enableIntranetvar).checked){document.getElementById(txturlvar).disabled=false}else{document.getElementById(txturlvar).disabled=true}}function templateName(){if(document.getElementById(showcntctvar).checked){openPopup("SearchPage?popupId=Template&isLookup=true&filterClause="+escape("templateFor__c='Incident'"),openTemplateLookup,580,475)}else{return false}}function enableSearchEngine(){if(document.getElementById(enableInternetvar).checked){}else{document.getElementById(txtSearchEnginevar).disabled=true}}function enableRadio(){if(document.getElementById(closeIncidentvar).checked){enabledValue()}else{disabledValue()}}function openTemplateLookup(a){if(a!=null){if(a!=null){setTemplateNext(a)}}}function callsaveDefaults(){if(errormsg!=null&&errormsg!=""&&errormsg!="Record has been saved successfully."){showMessage(errormsg)}else{Ext.getCmp("deleteId").setDisabled(true);Ext.getCmp("upBtn").setDisabled(true);Ext.getCmp("downBtn").setDisabled(true);saveDefaults()}}function selectedValue(c){var a;for(var b=0;b<(c.options.length);b++){if(c.options[b].selected){a=c.options[b].text;break}}return a}function openQueuePopup(a){assignIncidentTOQueue(a)}function checkEmptyRow(){totalSavedRecord=Ext.getCmp("faqCategoryGrid").getStore().getTotalCount();totalRecord=Ext.getCmp("faqCategoryGrid").getStore().getCount();gridRecord=Ext.getCmp("faqCategoryGrid").store;var a;if(totalRecord>totalSavedRecord){for(count=totalRecord-1;count>=totalSavedRecord;count--){a=Ext.getCmp("faqCategoryGrid").getStore().getAt(count);if((gridRecord.getAt(count).get("quickLinkName")==null||gridRecord.getAt(count).get("quickLinkName")=="")&&(gridRecord.getAt(count).get("quickLinkURL")==null||gridRecord.getAt(count).get("quickLinkURL")=="")){Ext.getCmp("faqCategoryGrid").getStore().removeAt(count)}}}}function onReadyPanelFunction(){store=new Ext.data.SimpleStore({fields:[{name:"quickLinkNumber",type:"string"},{name:"URLOrder",type:"string"},{name:"quickLinkName",type:"string"},{name:"quickLinkURL",type:"string"},{name:"quickLinkPermanent",type:"boolean"}]});var c=new Ext.grid.CheckColumn({header:"Is Permanent ?",dataIndex:"quickLinkPermanent",id:"check",width:100});var b=new Ext.grid.ColumnModel({defaults:{sortable:true},columns:[{id:"quickLinkName",header:NameLabel,dataIndex:"quickLinkName",height:100,width:200,editor:new fm.TextField({allowBlank:true,listeners:{render:function(d){Ext.QuickTips.register({target:d.getEl(),text:UrlNameLabel});d.getEl().on("keydown",function(g,f){if(g.getKey()==13||g.getKey()==9){strvalue=f.value;replaceSpecialChars();f.value=strvalue}});d.getEl().on("change",function(g,h,f){strvalue=h.value;replaceSpecialChars();h.value=strvalue})}}})},{id:"quickLinkURL",header:URLLabel,height:100,width:600,dataIndex:"quickLinkURL",editor:new fm.TextField({allowBlank:true,listeners:{render:function(d){Ext.QuickTips.register({target:d.getEl(),text:UrlLinkLabel})}}})}]});grid=new Ext.grid.EditorGridPanel({id:"faqCategoryGrid",store:store,cm:b,stripeRows:true,plugins:c,selModel:new Ext.grid.RowSelectionModel({singleSelect:true}),height:200,width:800,autoWidth:true,viewConfig:{forceFit:true,scrollOffset:0,getEditorParent:function(){return this.mainWrap.dom}},listeners:{rowclick:function(g,h,i){selectedRowIndex=h;rowIndex=h;if(document.getElementById(quicklink).checked){Ext.getCmp("deleteId").setDisabled(false)}var f=Ext.getCmp("faqCategoryGrid").store;var k=f.getAt(selectedRowIndex).get("quickLinkName");var d=f.getAt(selectedRowIndex).get("quickLinkURL");var j=store.data.length;if(selectedRowIndex==0||j==1){Ext.getCmp("upBtn").setDisabled(true)}else{if(document.getElementById(quicklink).checked){Ext.getCmp("upBtn").setDisabled(false)}}if((selectedRowIndex==(j-1))||(j==1)){Ext.getCmp("downBtn").setDisabled(true)}else{if(document.getElementById(quicklink).checked){Ext.getCmp("downBtn").setDisabled(false)}}if((k==null||k=="")&&(d==null||d=="")){Ext.getCmp("upBtn").setDisabled(true);Ext.getCmp("downBtn").setDisabled(true)}},afteredit:function(d){}}});grid.render("faqCategory-grid");Ext.QuickTips.init();var a=Ext.extend(Ext.Panel,{renderTo:"quickBtnToolbar",defaults:{bodyStyle:"border:0px;padding:0px;margin:0px;zoom:0px;"}});new a({title:"",cls:"toolSpCls",bodyStyle:"border:0px;padding:0px;margin:0px;zoom:0px;",tbar:[{scale:"medium",iconCls:"addCls",tooltipType:"title",tooltip:newLabel,id:"newId",listeners:{mouseover:function(){this.setIconClass("addCls")},mouseout:function(){this.setIconClass("addCls")}},handler:function(){var d=grid.getStore().getCount();var e=grid.getStore().recordType;var f=new e({category:"",description:""});grid.stopEditing();store.insert(d,f);grid.startEditing(d,0)}}," ",{scale:"medium",iconCls:"deleteCls",tooltipType:"title",tooltip:deleteLabel,disabled:true,id:"deleteId",listeners:{mouseover:function(){this.setIconClass("deleteCls")},mouseout:function(){this.setIconClass("deleteCls")}},handler:removeHandler}," ",{xtype:"box",id:"upBtn",disabled:true,autoEl:{tag:"img",src:""+resourcesfilesvar+"/SDEFbuttons/b_control_up.png",title:IconUpLabel,name:"linkUp"},style:"cursor:pointer;",listeners:{render:function(d){d.getEl().on("click",function(){UpBtnHandler()});d.getEl().on("mouseover",function(){document.images.linkUp.src=""+resourcesfilesvar+"/SDEFbuttons/b_control_up_mouseover.png"});d.getEl().on("mouseout",function(){document.images.linkUp.src=""+resourcesfilesvar+"/SDEFbuttons/b_control_up.png"})}}},{xtype:"box",id:"downBtn",disabled:true,autoEl:{tag:"img",src:""+resourcesfilesvar+"/SDEFbuttons/b_control_down.png",title:IconDownLabel,name:"linkDown"},style:"cursor:pointer;",listeners:{render:function(d){d.getEl().on("click",function(){DownBtnHandler()});d.getEl().on("mouseover",function(){document.images.linkDown.src=""+resourcesfilesvar+"/SDEFbuttons/b_control_down_mouseover.png"});d.getEl().on("mouseout",function(){document.images.linkDown.src=""+resourcesfilesvar+"/SDEFbuttons/b_control_down.png"})}}}]});Ext.QuickTips.init();if(document.getElementById(quicklink).checked){Ext.getCmp("newId").setDisabled(false)}else{Ext.getCmp("newId").setDisabled(true)}var a=Ext.extend(Ext.Panel,{renderTo:"btnToolbar",defaults:{bodyStyle:"border:0px;padding:0px;margin:0px;zoom:0px;"}});new a({title:"",cls:"toolSpCls",bodyStyle:"border:0px;padding:0px;margin:0px;zoom:0px;",tbar:[{scale:"medium",iconCls:"bmcSave",tooltipType:"title",tooltip:saveLabel,id:"saveId",listeners:{mouseover:function(){this.setIconClass("bmcSaveOn")},mouseout:function(){this.setIconClass("bmcSave")}},handler:SaveBtnHandler}," ","-"," ",{scale:"medium",iconCls:"bmcRefresh",tooltipType:"title",tooltip:undoDefaultSettingPageLabel,id:"undoId",listeners:{mouseover:function(){this.setIconClass("bmcRefresh")},mouseout:function(){this.setIconClass("bmcRefresh")}},handler:ResetBtnHandler}]});enableMobile()}Ext.onReady(function(){defaultbroadcastSpeedValue=document.getElementById(broadcastSpeedValue).value;Ext.override(Ext.Slider,{getRatio:function(){var a=this.innerEl.getComputedWidth();var b=this.maxValue-this.minValue;return b==0?a:(a/b)}});createSlider(defaultbroadcastSpeedValue)});function createSlider(a){if(a.length==0){a=0}broadcastSpeedsavevar=a;broadcastSpeedsavevar=2*broadcastSpeedsavevar;mySlider=new Ext.Slider({id:"silderid",renderTo:"basic-slider",width:189,value:parseInt(a),increment:1,minValue:1,maxValue:10,plugins:new Ext.ux.SliderTip(),listeners:{change:setBroadcastSpeed}})}function setBroadcastSpeed(){if(document.getElementById("silderid")!=null&&typeof(document.getElementById("silderid"))!="undefined"&&document.getElementById("silderid").value==""){document.getElementById("silderid").value=0}if(document.getElementById("silderid")!=null&&typeof(document.getElementById("silderid"))!="undefined"){document.getElementById(broadcastSpeedValue).value=Ext.getCmp("silderid").getValue()}broadcastSpeedsavevar=document.getElementById(broadcastSpeedValue).value;broadcastSpeedsavevar=2*broadcastSpeedsavevar}function enableMyProfileFunction(){var b=document.getElementById(pheaderId);var a=document.getElementById(shwprofile);if(b!=undefined&&!b.checked){document.getElementById(shwprofile).checked=false;document.getElementById(shwBroadcast).checked=false;document.getElementById(shwprofile).disabled=true;document.getElementById(shwBroadcast).disabled=true}else{document.getElementById(shwprofile).disabled=false;if(a!=undefined&&!a.checked){document.getElementById(shwBroadcast).disabled=true}else{document.getElementById(shwBroadcast).disabled=false}}}function enableAllowUserFunction(){var a=document.getElementById(shwprofile);if(a!=undefined&&!a.checked){document.getElementById(shwBroadcast).checked=false;document.getElementById(shwBroadcast).disabled=true}else{document.getElementById(shwBroadcast).disabled=false}};