var selectedIdsToMap=new Array();var selectedIds="";function setResetSelectAllJS(a){var c=document.getElementsByTagName("input");if(c!=null){for(var b=0;b<c.length;b++){if(c[b].type=="checkbox"){if(a){c[b].checked=true;enableDisableButtons(false)}else{c[b].checked=false;enableDisableButtons(true)}}}}setIdsForLink(null)}window.onload=function(){document.getElementById("NewValueHeader").style.display="none";document.getElementById("FKCMDBClassHeader").style.display="none";document.getElementById("CreatedDateHeader").style.display="none";enableDisableButtons(true);enableNextPrevBtn()};function enableDisableButtons(a){document.getElementById("NewRule").disabled=a;document.getElementById("MapExisting").disabled=a;document.getElementById("Deletebtn").disabled=a;document.getElementById("IgnoreRule").disabled=a;if(typeof(_ObjectPermissions)!="undefined"&&_ObjectPermissions!=null&&!_ObjectPermissions.isNormExceptionDeletable){document.getElementById("Deletebtn").disabled=true}}function populateSelectedIds(g){var f="Â¬";var e=0;var a=0;var b=false;var d=document.getElementsByTagName("input");for(var c=0;c<d.length;c++){if(d[c].id=="checkedId"){e++}if(d[c].id=="checkedId"&&d[c].checked==true){b=true;a++}}if(b){enableDisableButtons(false)}else{enableDisableButtons(true)}var h=document.getElementById("selectAllcheckBox");if(a==e){h.checked=true}else{h.checked=false}setIdsForLink(g)}function setIdsForLink(a){if(a==null){var b=document.getElementsByTagName("input");for(i=0;i<b.length;i++){if(b[i].type=="checkbox"&&b[i].checked&&b[i].id!="selectAllcheckBox"&&selectedIdsToMap.indexOf(b[i].name)==-1){selectedIdsToMap.push(b[i].name)}if(b[i].type=="checkbox"&&!b[i].checked&&selectedIdsToMap.indexOf(b[i].name)>-1){selectedIdsToMap.splice(selectedIdsToMap.indexOf(b[i].name),1)}}}else{if(a.checked){if(selectedIdsToMap.indexOf(a.name)==-1){selectedIdsToMap.push(a.name)}}else{if(!a.checked){selectedIdsToMap.splice(selectedIdsToMap.indexOf(a.name),1)}}}}function MapSelectedData(c){if(selectedIdsToMap!=null){var a="";for(var b=0;b<selectedIdsToMap.length;b++){a+=selectedIdsToMap[b]+NonPrintChar}a=a.substring(0,a.length-1)}if(c=="New"){CreateNewRule(a)}else{if(c=="Existing"){MapToExistingRule(a)}else{if(c=="Delete"){deleteException(a)}else{if(c=="IgnoreRule"){generateIgnoreRule(a)}}}}}var NormAssignWindow;function MapToExistingRule(a){var c=parseInt((screen.availWidth/2)-(670/2));var b=parseInt((screen.availHeight/2)-(480/2));var d="/apex/SearchAndLink?childName="+objectName+"&searchLookUpStr="+encodeURIComponent(a)+"&isForNormalizationExcep=true&txt=dummy&fieldforWhereClause="+fieldName;NormAssignWindow=window.open(d,"NormAssign","status = 1,height =480, width = 671,left= "+c+",top="+b+", resizable = 0,scrollbars=no,location=no")}function RefreshParentWindow(){if(typeof(window.parent)!="undefined"){window.parent.refreshList();window.parent.closeTab(wid)}}function openNormRuleForExcep(c,b,a){if(typeof(NormAssignWindow)!="undefined"){NormAssignWindow.close()}if(typeof(window.parent)!="undefined"&&typeof(window.parent.parent)!="undefined"&&a!=undefined&&a==true){window.parent.parent.addNewTab("7015",NormRuleLabel,"NavigatorPage?tabName=NormalizationRule&title="+NormRuleLabel+"&isFromNormExcep=true&selectedNormName="+b+"&SelectedNormRuleID="+c+"&target="+encodeURIComponent("SearchPage?popupId=NormalizationRule&standardLayout=true&view=list&filterClause=Master_Rule__c = null"))}RefreshParentWindow()}var transMaster_id;function openModelForm(a,b,c){transMaster_id=b;var d="AdminModelPage?standardLayout=true&title=Model&isfromNormExcep=true&MdlName="+a+"&cmdb_class="+c+"&selNormId="+b;openPopup(d)}var popUpWindow;function openPopup(a){popUpWindow=new Ext.Window({height:600,width:1000,title:headerWinTab,modal:true,x:10,y:5,resizable:true,bodyStyle:"background-color:#FFFFFF;",constrain:true,viewConfig:{forceFit:true},frame:true,html:'<iframe frameborder="0" src ="/apex/'+a+'" style="width:100%;height:100%;border:none"/>'});popUpWindow.show()}function refreshAfterModelCreation(){if(popUpWindow!=undefined){popUpWindow.close()}showLoadingMask();if(transMaster_id!=undefined){updateNormTranc(transMaster_id);selectedIdsToMap=new Array()}transMaster_id=null;if(typeof(window.parent)!="undefined"){window.parent.refreshList()}}var waitMask;function showLoadingMask(){if(waitMask!=undefined){waitMask.show()}else{waitMask=new Ext.LoadMask(Ext.getBody(),{msg:LoadingTxt});waitMask.show()}}function hideLoadingMask(){if(waitMask!=undefined){waitMask.hide()}}function nextRecord(){if(hasnext){showLoadingMask();nextRec()}}function prevRecord(){if(hasPrevious){showLoadingMask();prevRec()}}function enableNextPrevBtn(){var b=document.getElementById("prevBtnId");var a=document.getElementById("nextBtnId");if(hasnext&&hasPrevious){b.disabled=false;b.style.opacity=1;a.disabled=false;a.style.opacity=1}else{if(!hasnext&&hasPrevious){a.disabled=true;a.style.opacity=0.5;b.disabled=false;b.style.opacity=1}else{if(!hasPrevious&&hasnext){b.disabled=true;b.style.opacity=0.5;a.disabled=false;a.style.opacity=1}else{if(!hasnext&&!hasPrevious){b.disabled=false;b.style.opacity=0.5;a.disabled=false;a.style.opacity=0.5}}}}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(c,d){for(var b=(d||0),a=this.length;b<a;b++){if(this[b]===c){return b}}return -1}}function searchOnEnter(a){if(a.keyCode==13){searchVariations();return false}}function searchVariations(){var a=document.getElementById("txtsearch");if(a!=null&&a!=undefined&&a.disabled==false){stringToSearch=searchString=a.value;if(waitMask!=undefined){waitMask.show()}searchString=RemoveReserveCharactersForSOSL(searchString);if(searchString.trim().length<2||searchString.trim()==lblSearch){Ext.Msg.show({msg:ValidateMinimumCharsSearchPage,buttons:Ext.Msg.OK,icon:Ext.Msg.WARNING});return}searchString=ValidateReserveCharactersForSOSL(searchString);searchMapping(searchString)}}function RemoveReserveCharactersForSOSL(c){var b=new Array("?","&","|","!","{","}","[","]","(",")","^","~","*",":","\\",'"',"+","-","'");for(var a=0;a<b.length;a++){c=c.split(b[a]).join("")}return c}function ValidateReserveCharactersForSOSL(c){var b=new Array("\\","?","&","|","!","{","}","[","]","(",")","^","~","*",":",'"',"+","-");for(var a=0;a<b.length;a++){c=c.split(b[a]).join("\\"+b[a])}return c}function resetMappingGrid(){var a=document.getElementById("txtsearch");if(a!=null&&a!=undefined&&a.disabled==false){if(waitMask!=undefined){waitMask.show()}document.getElementById("txtsearch").value=lblSearch;resetMapping()}}function handleSortButton(){document.getElementById("NewValueHeader").style.display="none";document.getElementById("CreatedDateHeader").style.display="none";document.getElementById("FKCMDBClassHeader").style.display="none";if(document.getElementById(currentSelectedSortField)!=null&&document.getElementById(currentSelectedSortField)!=""&&document.getElementById(currentSelectedSortField)!="undefined"){document.getElementById(currentSelectedSortField).style.display="inline";if(sortOrderVal=="asc"){document.getElementById(currentSelectedSortField).src=resPath+"/SDEFimages/arrow_sort_ascending.gif"}else{document.getElementById(currentSelectedSortField).src=resPath+"/SDEFimages/arrow_sort_descending.gif"}}}function sortColumn(e,c){var a=document.getElementById(c).src;currentSelectedSortField=c;if(a!=null&&a!=""&&typeof(a)!="undefined"){var d=a.toLowerCase();var b=d.indexOf("arrow_sort_descending.gif");if(b!=-1){document.getElementById(c).src=resPath+"/SDEFimages/arrow_sort_ascending.gif";sortOrderVal="asc"}else{document.getElementById(c).src=resPath+"/SDEFimages/arrow_sort_descending.gif";sortOrderVal="desc"}}else{document.getElementById(c).src=resPath+"/SDEFimages/arrow_sort_descending.gif";sortOrderVal="desc"}sortColumnfunction(e,sortOrderVal,stringToSearch)};