if(userSettingStore[0]=="TRUE"){includeLeadforclient=true}if(userSettingStore[1]=="TRUE"){includeContactforclient=true}if(userSettingStore[2]=="TRUE"){userSegrChk=true}if(userSettingStore[3]=="TRUE"){sendEmailNotificationChk=true}if(userSettingStore[4]=="TRUE"){createNewClientChk=true}function changePopUpTitle(a){if(popUpWindow!=null&&popUpWindow!="undefined"){popUpWindow.setTitle(a)}}Ext.onReady(function(){Ext.QuickTips.init();var J=new Ext.data.ArrayStore({id:"TimezoneStore",fields:[{name:"Id"},{name:"TimezoneLabel"}]});J.loadData(TimeZoneListData);var l=new Ext.data.ArrayStore({id:"LocaleStore",fields:[{name:"Id"},{name:"LocaleLabel"}]});l.loadData(LocaleListData);var t=new Ext.data.ArrayStore({id:"LanguageStore",fields:[{name:"Id"},{name:"LanguageLabel"}]});t.loadData(LanguageListData);var A=new Ext.form.Label({id:"Section Header",text:lblClientDefault,cls:"clsInputBoldLabelTDI",listeners:{render:function(i){Ext.create("Ext.tip.ToolTip",{target:i.getEl(),html:lblClientDefaultTooltip})}}});adminUserSettingPanel=new Ext.Panel({id:"AppSettingId",renderTo:"adminUserSettingDiv",tbar:generateToolbar(),border:false,items:[{border:false,id:"userSettings",cls:"clsPanelContainer"}]});var b=Ext.getCmp("userSettings");var z=ProfileData.splice(0,1)[0][1];var E=new Ext.data.ArrayStore({storeId:"ProfileStore",fields:[{name:"Id"},{name:"ProfileLabel"}]});for(var K=0;K<ProfileData.length;K++){ProfileData[K][1]=decodeSpecialChar(ProfileData[K][1])}E.loadData(ProfileData);E.sort("ProfileLabel");var q=Ext.create("Ext.form.ComboBox",{id:"defaultclientprofile",hiddenName:"ClientProfile",store:E,queryMode:"local",cls:"clsSelectList",value:existingClientProfile,displayField:"ProfileLabel",valueField:"Id",typeAhead:false,editable:false,triggerAction:"all",forceSelection:true,selectOnFocus:true,emptyText:z,renderTo:"DefaultProfile",tpl:new Ext.XTemplate('<tpl for="."><div class="x-boundlist-item">{ProfileLabel:this.ellipsify}</div></tpl>',{ellipsify:function(i){return Ext.util.Format.ellipsis(encodeSpecialChar(i),30)}})});var M=Ext.create("Ext.form.ComboBox",{id:"defaultTimezoneCombo",cls:"clsSelectList",hiddenName:"ImportTimezone",store:J,valueField:"Id",displayField:"TimezoneLabel",typeAhead:false,editable:false,queryMode:"local",value:existingTimeZone,triggerAction:"all",renderTo:"DefaultTimezone",forceSelection:true,selectOnFocus:true,tpl:new Ext.XTemplate('<tpl for="."><div data-qtip="{TimezoneLabel}" class="x-boundlist-item">{TimezoneLabel:this.ellipsify}</div></tpl>',{ellipsify:function(i){return Ext.util.Format.ellipsis(i,32)}})});var g=Ext.create("Ext.form.ComboBox",{id:"defaultLocaleCombo",cls:"clsSelectList",hiddenName:"ImportLocale",store:l,valueField:"Id",displayField:"LocaleLabel",typeAhead:false,queryMode:"local",editable:false,value:existingLocale,triggerAction:"all",forceSelection:true,selectOnFocus:true,renderTo:"DefaultLocale",tpl:new Ext.XTemplate('<tpl for="."><div class="x-boundlist-item">{LocaleLabel:this.ellipsify}</div></tpl>',{ellipsify:function(i){return Ext.util.Format.ellipsis(i,30)}})});var w=Ext.create("Ext.form.ComboBox",{id:"defaultLanguageCombo",cls:"clsSelectList",hiddenName:"ImportLanguage",store:t,valueField:"Id",displayField:"LanguageLabel",typeAhead:false,queryMode:"local",editable:false,value:existingLanguage,triggerAction:"all",forceSelection:true,selectOnFocus:true,renderTo:"DefaultLanguage",tpl:new Ext.XTemplate('<tpl for="."><div class="x-boundlist-item">{LanguageLabel:this.ellipsify}</div></tpl>',{ellipsify:function(i){return Ext.util.Format.ellipsis(i,30)}})});var y=new Ext.form.Label({id:"Clientuserlabel",text:clientUserInclude,cls:"clsInputBoldLabelTDI"});var H=new Ext.Panel({id:"clientUserPanel",border:false,cls:"clsPanel",items:[{xtype:"fieldcontainer",defaultType:"checkboxfield",items:[y,{id:"clientuserChk",boxLabel:lblUser,style:"margin-top:5px;",cls:"checkboxCls",checked:true,disabled:true},{id:"clientuserContactChk",boxLabel:lblContact,checked:includeContactforclient,cls:"checkboxCls",handler:function(){includeContactforclient=this.getValue()}},{id:"clientuserLeadChk",boxLabel:lblLead,checked:includeLeadforclient,cls:"checkboxCls",handler:function(){includeLeadforclient=this.getValue()}}]}]});if(flgLead=="false"){Ext.getCmp("clientuserLeadChk").hide()}var n=new Ext.form.Label({id:"ConfSeggLabelId",text:lblConfigurationSegregation,cls:"clsInputBoldLabelTDI"});var L=Ext.create("Ext.Button",{id:"rolePopulationBtn",xtype:"tbbutton",cls:"bgBtnGrey adminbtnCls",text:lblPopulateRoleHierarchyData,tooltip:"",tooltipType:"title",handler:function(i,Q){p(i,Q)}});var p=function(i,Q){i.disabled=true;waitbox(0);populateRoleHierarchy()};var x=Ext.create("Ext.form.Panel",{id:"segregationPanel",border:false,cls:"clsPanel",hidden:(hideSegregateUserValue=="FALSE")?true:false,items:[{xtype:"fieldcontainer",defaultType:"checkboxfield",items:[n,{id:"userSeggChk",boxLabel:lblSegregateUsers,checked:userSegrChk,style:"margin-top:5px;",cls:"checkboxCls",handler:function(){userSegrChk=this.getValue()}},L]}]});var d=function(i,Q){deleteClientImport()};var O=new Ext.Panel({id:"actionButtonPanel",title:"",width:"100%",border:false,cls:"clsPanel",items:[{id:"deleteBtn",xtype:"button",cls:"bgBtnGrey adminbtnCls",text:lblDelete,tooltip:lbltooltipDeleteImportSetting,tooltipType:"title",handler:d}]});var o=Ext.create("Ext.form.ComboBox",{id:"importProfileCombo",cls:"clsSelectList",hiddenName:"ImportProfile",store:E,emptyText:z,valueField:"Id",displayField:"ProfileLabel",typeAhead:false,queryMode:"local",editable:false,value:defaultImportProfileValue,triggerAction:"all",forceSelection:true,selectOnFocus:true,renderTo:"ImportProfile",tpl:new Ext.XTemplate('<tpl for="."><div class="x-boundlist-item">{ProfileLabel:this.ellipsify}</div></tpl>',{ellipsify:function(i){return Ext.util.Format.ellipsis(encodeSpecialChar(i),30)}})});var D=new Ext.form.TextField({name:"DomainNamevalue",height:20,id:"domainName",renderTo:"ImportDomain",cls:"clsInputTextBox",width:235,value:lblDomainNameValue,emptyText:DomainNameHelpText});var h=Ext.create("Ext.form.ComboBox",{id:"importTimezoneCombo",cls:"clsSelectList",hiddenName:"ImportTimezone",store:J,valueField:"Id",displayField:"TimezoneLabel",typeAhead:false,editable:false,queryMode:"local",value:TimezoneValue,triggerAction:"all",forceSelection:true,selectOnFocus:true,renderTo:"ImportTimeZone",tpl:new Ext.XTemplate('<tpl for="."><div data-qtip="{TimezoneLabel}" class="x-boundlist-item">{TimezoneLabel:this.ellipsify}</div></tpl>',{ellipsify:function(i){return Ext.util.Format.ellipsis(i,32)}})});var I=Ext.create("Ext.form.ComboBox",{id:"importLanguageCombo",cls:"clsSelectList",hiddenName:"ImportLanguage",store:t,valueField:"Id",displayField:"LanguageLabel",typeAhead:false,queryMode:"local",editable:false,value:LanguageValue,triggerAction:"all",forceSelection:true,selectOnFocus:true,renderTo:"ImportLanguage",tpl:new Ext.XTemplate('<tpl for="."><div class="x-boundlist-item">{LanguageLabel:this.ellipsify}</div></tpl>',{ellipsify:function(i){return Ext.util.Format.ellipsis(i,30)}})});var r=new Ext.data.ArrayStore({id:"EmailEncodeStore",fields:[{name:"Id"},{name:"EmailEncodeLabel"}]});r.loadData(EmailEncodeListData);var N=Ext.create("Ext.form.ComboBox",{id:"importEmailEncodeCombo",cls:"clsSelectList",hiddenName:"ImportEmailEncode",store:r,valueField:"Id",displayField:"EmailEncodeLabel",typeAhead:false,queryMode:"local",editable:false,value:EmailEncodingValue,triggerAction:"all",forceSelection:true,selectOnFocus:true,renderTo:"ImportEncoding",tpl:new Ext.XTemplate('<tpl for="."><div class="x-boundlist-item">{EmailEncodeLabel:this.ellipsify}</div></tpl>',{ellipsify:function(i){return Ext.util.Format.ellipsis(i,30)}})});var m=Ext.create("Ext.form.ComboBox",{id:"importLocaleCombo",cls:"clsSelectList",hiddenName:"ImportLocale",store:l,valueField:"Id",displayField:"LocaleLabel",typeAhead:false,queryMode:"local",editable:false,value:LocaleValue,triggerAction:"all",forceSelection:true,selectOnFocus:true,renderTo:"ImportLocale",tpl:new Ext.XTemplate('<tpl for="."><div class="x-boundlist-item">{LocaleLabel:this.ellipsify}</div></tpl>',{ellipsify:function(i){return Ext.util.Format.ellipsis(i,30)}})});var k=new Ext.Panel({id:"ClientAccountPanelId",border:false,layout:"table",renderTo:"ImportAccount",items:[{xtype:"textfield",name:"lookupvalue",readOnly:true,height:20,cls:"clsInputTextBox",id:"AccountLookupId",value:lbldaccountName},{xtype:"box",autoEl:{tag:"img",src:getSDFStylesResPath()+"/SDEFbuttons/b_darrow_D.gif"},name:"AccountLookupButton",id:"AccountLookupButtonId",cls:"lookupbuttontest",listeners:{render:function(i){i.getEl().on("click",function(){popupId="Organization";srchPageUrl="SearchPage?popupId="+popupId+"&isLookup=true";openPopup(srchPageUrl,findNameFieldForAccount)})}}}]});var C=new Ext.Panel({border:false,id:"TemporaryClientPanel",border:false,cls:"clsPanel",items:[TemporaryClientdataLabel,O]});var P=new Ext.Button({id:"licensebutton",name:"licensebutton",text:"",});var F=new Ext.form.Label({id:"ShowHoursLabel",text:hourslabel,margin:"5 10 0 0"});var a=new Ext.form.Label({id:"ShowMinutesLabel",text:minuteslabel,margin:"5 10 0 0"});var G=new Ext.form.Label({id:"RunSyncJob",text:RunSynchronizationJobLabel,margin:"5 15 0 0"});var u=new Ext.form.Label({id:"LicenseAssignmentLabel",cls:"clsInputBoldLabelTDI",text:PackageLicenseAssignmentLabel,margin:"0 0 0 15"});var f=new Ext.Panel({border:false,id:"LicenseAssignmentPanel",border:false,cls:"clsPanel",padding:"10 0 0 0",renderTo:"LicenseAssignmentTD",items:[u]});var c=Ext.create("Ext.form.Panel",{border:false,id:"LicenseMetricsPanel",border:false,layout:"column",renderTo:"licenseScheduleTD",cls:"clsPanel",margin:"0 0 0 15px",items:[G,{xtype:"numberfield",value:licensedefaulthourvalue,id:"licensehourfield",minValue:0,allowDecimals:false,step:1,margin:"0 5 0 5",width:50},F,{xtype:"numberfield",id:"licenseminfield",value:licensedefaultminvalue,minValue:0,maxValue:59,allowDecimals:false,maxLength:2,step:1,margin:"0 5 0 5",width:50},a,{xtype:"button",id:"licensebutton",width:100,margin:"0 0 0 5",handler:function(){if(Ext.getCmp("licensebutton").getText()==startbuttontext){Ext.getCmp("licensebutton").setText(stopbuttontext);Ext.getCmp("licensebutton").setDisabled(true);ScheduleJob()}else{Ext.getCmp("licensebutton").setText(startbuttontext);Ext.getCmp("licensebutton").setDisabled(true);StopJob()}}}]});var B=new Ext.form.Label({id:"SendEmailNotificationLabelId",text:lblSendEmailNotification,cls:"clsInputBoldLabelTDI"});var j=Ext.create("Ext.form.Panel",{id:"SendEmailNotificationPanel",border:false,cls:"clsPanel",items:[{xtype:"fieldcontainer",defaultType:"checkboxfield",items:[B,{id:"sendEmailNotificationChk",boxLabel:lblSendEmailNotificationHelpText,checked:sendEmailNotificationChk,style:"margin-top:5px;",cls:"checkboxCls",handler:function(){sendEmailNotificationChk=this.getValue()}}]}]});var s=new Ext.form.Label({id:"createNewClientLabelId",text:lblCreateNewClient,cls:"clsInputBoldLabelTDI"});var e=Ext.create("Ext.form.Panel",{id:"createNewClientPanel",border:false,cls:"clsPanel",items:[{xtype:"fieldcontainer",defaultType:"checkboxfield",items:[s,{id:"createNewClientChk",boxLabel:lblCreateNewClientHelpText,checked:createNewClientChk,style:"margin-top:5px;",cls:"checkboxCls",handler:function(){createNewClientChk=this.getValue()}}]}]});adminUserSettingPanel2=new Ext.Panel({id:"AppSettingId",renderTo:"adminUserSettingDiv2",border:false,items:[{border:false,id:"userSettings2",cls:"clsPanelContainer"}]});var v=Ext.getCmp("userSettings2");v.add([H,x,j,e,C]);if(buttontext==false){Ext.getCmp("licensebutton").setText(startbuttontext)}else{Ext.getCmp("licensebutton").setText(stopbuttontext)}});function generateToolbar(){var a=new Ext.Toolbar({border:false,height:40,margins:"0 0 0 0",autoWidth:true,items:[{scale:"medium",iconCls:"saveCls",id:"save",tooltipType:"title",tooltip:saveLbl,id:"saveBtn",handler:savehandler}]});return a}function savehandler(d,a){var c=Ext.getCmp("domainName").getValue().trim();if(c.length>0){var g=c.indexOf(".");var k=/^[a-zA-Z_0-9]+[\-|.|a-zA-Z_0-9]*[a-zA-Z_0-9]$/;if(g<0){Ext.MessageBox.show({width:250,title:"",msg:lblExtensionError,buttons:Ext.MessageBox.OK});return}if(!k.test(c)){Ext.MessageBox.show({width:250,title:"",msg:lblInvalidDomainName,buttons:Ext.MessageBox.OK});return}}waitbox(0);FormDataString="";if(includeContactforclient){FormDataString+="TRUE,"}else{FormDataString+="FALSE,"}if(includeLeadforclient){FormDataString+="TRUE,"}else{FormDataString+="FALSE,"}if(userSegrChk){FormDataString+="TRUE,"}else{FormDataString+="FALSE,"}if(sendEmailNotificationChk){FormDataString+="TRUE,"}else{FormDataString+="FALSE"}selectedProfile=Ext.getCmp("defaultclientprofile").getValue();var b=Ext.getCmp("defaultTimezoneCombo").getValue();var h=Ext.getCmp("defaultLocaleCombo").getValue();var l=Ext.getCmp("defaultLanguageCombo").getValue();var j=0;var e;var f;if(Ext.getCmp("licensehourfield").getRawValue()==""||Ext.getCmp("licensehourfield").getRawValue()==null){console.log("Hour"+Ext.getCmp("licensehourfield").getRawValue());window.parent.Ext.MessageBox.show({msg:enterTimeLabel,buttons:Ext.MessageBox.OK});waitMsg.hide();return false}else{e=Ext.getCmp("licensehourfield").getValue()}if(Ext.getCmp("licenseminfield").getRawValue()==""||Ext.getCmp("licenseminfield").getRawValue()==null){console.log("Min"+Ext.getCmp("licenseminfield").getValue());window.parent.Ext.MessageBox.show({msg:enterTimeLabel,buttons:Ext.MessageBox.OK});waitMsg.hide();return false}else{f=Ext.getCmp("licenseminfield").getValue()}if(Ext.getCmp("licensehourfield").getRawValue()==0&&Ext.getCmp("licenseminfield").getRawValue()==0){window.parent.Ext.MessageBox.show({msg:enterTimeLabel,buttons:Ext.MessageBox.OK});waitMsg.hide();return false}j=(parseInt(e)*60)+parseInt(f);var i=null;if(c!=null){i=c}i+=",,,,,,"+Ext.getCmp("importProfileCombo").getValue();i+=",,,,,,"+Ext.getCmp("importTimezoneCombo").getValue();i+=",,,,,,"+Ext.getCmp("importLocaleCombo").getValue();i+=",,,,,,"+Ext.getCmp("importLanguageCombo").getValue();i+=",,,,,,"+Ext.getCmp("importEmailEncodeCombo").getValue();i+=",,,,,,"+createNewClientChk;savemodifiedData(FormDataString,selectedProfile,i,b,h,l,j)}function waitbox(a){if(parseInt(a)>0){setTimeout("waitMsg.hide()",a)}waitMsg=new Ext.Window({height:100,width:200,resizable:false,closable:false,header:false,frame:false,modal:true,shadow:false,baseCls:"waitboxCls",items:[{xtype:"panel",height:100,width:200,border:false,bodyStyle:"background-color:transparent;border:none;",html:'<div align="center"><img src="'+tabOutImg+'"/></div>'}]});waitMsg.show()}function showMessage(a){Ext.MessageBox.show({id:"commonmsgbox",title:lblUserSettingsTitle,width:250,msg:a,buttons:Ext.MessageBox.OK})}function openPopup(a,b){onCompleteFunction=b;popUpWindow=new Ext.Window({height:550,width:670,modal:true,constrain:true,viewConfig:{forceFit:true},html:'<iframe src ="/apex/'+a+'" style="width:100%;height:100%;border:none"/>'});popUpWindow.show()}function setPopUpVar(b,a){if(b!=null&&b!=""&&onCompleteFunction!=null){onCompleteFunction(b,a)}}function findNameFieldForAccount(a){getAccountName(a)}function closePopup(){if(popUpWindow!=null&&popUpWindow!=undefined){popUpWindow.close()}}if(typeof String.prototype.trim!=="function"){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}function setDefaultEqualToImports(){Ext.getCmp("defaultclientprofile").setValue(Ext.getCmp("importProfileCombo").getValue());Ext.getCmp("defaultTimezoneCombo").setValue(Ext.getCmp("importTimezoneCombo").getValue());Ext.getCmp("defaultLocaleCombo").setValue(Ext.getCmp("importLocaleCombo").getValue());Ext.getCmp("defaultLanguageCombo").setValue(Ext.getCmp("importLanguageCombo").getValue())}function decodeSpecialChar(a){if(a!=null&&a!=""&&a!=undefined){a=a.replace(/&gt;/g,">");a=a.replace(/&lt;/g,"<");a=a.replace(/&nbsp;/g," ");a=a.replace(/&#39;/g,"'");a=a.replace(/&amp;/g,"&");a=a.replace(/&quot;/g,'"')}return a}function encodeSpecialChar(a){if(a!=null&&a!=""&&a!=undefined){a=a.replace(/>/g,"&gt;");a=a.replace(/</g,"&lt;")}return a}parent.addHelpOnPage(document.getElementById("helpDiv"),"user_settings.htm",wikiUrl);