var windowTitle,idArray,doRefresh=false,child1,child3,child5,child7,child8,groupID,impactData,urgencyData,categoryData,jsonValue="",btn1="",mod,qvTabId="",index=0,selectedNode="",selectedNodeRef="",jasonData,isQVNodeSelected,addedFolderId,folderNameVal,queryIdforCopy,sysQueryId,idForQuery,nameOfQuery,oewnerOfQuery,ownerOfPasteQuery,isQueryCut=false,isQueryCopy=false,selecteQueryText,newQueryTab=true,editQueryTab=true,linkArray=new Array(),indexArray=new Array(),errorMessge,userProfile,flagToDesableButton,QVQueryId,tabsList=new Array(),functionsList=new Array(),folderName,listViewTarget,isQueryNode=false,isFolderNode=false,nameOfFolderNode,QVWidgetViews=new Array(),sep="___",selectedQueryNode,catLogTBar,incidentTabID,nodePageReferences=new Array(),qvNameInvalid=false;function OpenBMCCommunityPage(){var a="resizable=1,scrollbars=1,fullscreen=1,toolbar=1,menubar=1,status=1,location=1";window.open("https://communities.bmc.com/docs/DOC-11298","mywindow",a)}function getSDActiveTabId(){return Ext.getCmp("tabs").getActiveTab().getId()}function getDoRefresh(){return doRefresh}function setDoRefresh(a){doRefresh=a}function setIdArray(a){idArray=a}function getIdArray(){return idArray}var myArray=new Array();function refreshProblemOnIncident(f,b,c,a){var e=document.getElementById("skyiframe"+b).contentWindow;if(typeof(e.frames["naviframe"+f])!="undefined"){var d=e.frames["naviframe"+f];if(typeof(d.renderPrbId)=="function"){d.renderPrbId(c,a);if(Ext.getCmp("navview").findById("tabs").findById(incidentTabID)!=null){Ext.getCmp("navview").findById("tabs").findById(incidentTabID).show();e.highlightWindow(f)}}else{return true}return false}else{return true}}function refreshSupportingInformation(g,b,a){b=decodeURI(b);var f=window.frames["skyiframe"+b];var e=f.frames["naviframe"+g];var d=Ext.getCmp("tabs").getActiveTab().title;var c=d.replace(/&nbsp;/g,"").trim();if(e!=null&&e!=undefined){if(typeof(e.refreshDocs)=="function"&&c==b){e.refreshDocs()}else{myArray[b]=e}}}function getParentSIIds(e,a){var d=window.frames["skyiframe"+a];var c=d.frames["naviframe"+e];if(typeof(c.SIIdsArray)=="function"){var b=new Array(c.SIIdsArray());return b.reverse()}}function refreshPortletBar(){var a=Ext.getCmp("navview");a.findById("portalContent").removeAll();a.doLayout();resetJsonString();closePopup()}function PortletBtnComplete(){var a=Ext.getCmp("navview");a.findById("portalContent").removeAll();a.doLayout();addPortletComponent()}function setTabFunctionList(b,a){tabsList.push(b);functionsList.push(a)}function getTabsList(){return tabsList}function getFunctionsList(){return functionsList}function setpageTarget(a){listViewTarget=a}function getPageTarget(){return listViewTarget}function refreshPortlet(b,a){var c=Ext.getCmp(b);if(c!=null){Ext.get(c.body.id).update('<iframe name = "skyiframe'+b+'" src ="/apex/'+a+'" style="width:100%;height:100%;border:none"/>')}}function refreshPortletByTitle(a){if(document.getElementById(a+"iFrame")!=null&&typeof(document.getElementById(a+"iFrame"))!="undefined"){document.getElementById(a+"iFrame").src=document.getElementById(a+"iFrame").src}if(a!=null&&typeof(a)=="undefined"&&a=="WorldTime"){closePopup()}}function refreshDashBoard(){if(document.getElementById("dashboardIFrame")!=null&&typeof(document.getElementById("dashboardIFrame"))!="undefined"){document.getElementById("dashboardIFrame").src=document.getElementById("dashboardIFrame").src}if(document.getElementById("defaultDashboardIFrame")!=null&&typeof(document.getElementById("defaultDashboardIFrame"))!="undefined"){document.getElementById("defaultDashboardIFrame").src=document.getElementById("defaultDashboardIFrame").src}}function setQVWidgetViews(b,a){QVWidgetViews[b]=a}function getQVWidgetViews(a){return QVWidgetViews[a]}function replaceAll(e,c,d){var a=e;var b=a.indexOf(c);while(b!=-1){a=a.replace(c,d);b=a.indexOf(c)}return a}function escapeHtmlCodes(a){a=replaceAll(a,"%25","%");a=replaceAll(a,"%23","#");a=replaceAll(a,"%26","&");a=replaceAll(a,"%22",'"');a=replaceAll(a,"%2B","+");return a}function addGroupFeedTab(b,c,a){groupID=a;if(Ext.getCmp("navview").findById("tabs").findById(a)!=null){var e='<div class="iframe-enclave"><iframe frameborder="0" id="dashboardIFrame" src ="'+pageGroupFeedPage+"?groupID="+a+'" class="tab-iframe"/></div>';var d=Ext.getCmp(a);Ext.get(d.body.id).update(e);Ext.getCmp("navview").findById("tabs").findById(a).show();return}Ext.getCmp("navview").findById("tabs").add({title:"&nbsp;&nbsp;&nbsp;&nbsp;"+c+"&nbsp;",width:"auto",id:a,domId:"GroupFeed",html:'<div class="iframe-enclave"><iframe frameborder="0" id="dashboardIFrame" src ="'+pageGroupFeedPage+"?groupID="+a+'" class="tab-iframe"/></div>',closable:true,listeners:{close:function(){linkArray[indexArray[this.id]]=null;removeTabFunction(this.id);qvTabId=""}}}).show()}function addChatterFeedTab(){var b=newsFeedVal;if(b){if(Ext.getCmp("navview").findById("tabs").findById("chatterfeed")!=null){Ext.getCmp("navview").findById("tabs").findById("chatterfeed").show();return}var a={id:"chatterfeed",domId:"chatterfeed",title:"&nbsp;&nbsp;&nbsp;"+chatterFeedLabel,closable:true,html:'<div class="iframe-enclave1" id="child5"></div><div class="iframe-enclave"><iframe frameborder="0" id="dashboardIFrame" src ="/apex/NewsFeedPage" class="tab-iframe chatterTabHeightCls"/></div>'};Ext.getCmp("tabs").add(a);Ext.getCmp("navview").findById("tabs").findById("chatterfeed").show();document.getElementById("child5").style.visibility="hidden"}else{alert("Chatter settings are not enabled....")}}function getFormAssignment(d){var a=formAssignment.split(";");var c;for(var b=1;b<a.length;b++){if(a[b]==""){continue}c=new RegExp(a[b],"ig");if(d.match(c)){d=d.replace(c,a[b]+"custom");break}}return(d)}function strContainsSpclChars(b){var a=false;if(b.indexOf("&")!=-1||b.indexOf("/")!=-1||b.indexOf("'")!=-1||b.indexOf("\\")!=-1||b.indexOf("@")!=-1||b.indexOf("<")!=-1||b.indexOf(">")!=-1||b.indexOf("%")!=-1||b.indexOf(";")!=-1||b.indexOf(":")!=-1||b.indexOf("?")!=-1||b.indexOf("#")!=-1||b.indexOf("[")!=-1||b.indexOf("]")!=-1){a=true}return a}function addNewTab(y,k,r,b){mod=k;var e=false;if(r.indexOf("&tabTitle=")!=-1&&r.indexOf("&target")!=-1){var v=r.split("&tabTitle=")[1].split("&target")[0];if(strContainsSpclChars(v)){var m=v;if(m.indexOf("&#39;")!=-1){m=m.replace("&#39;","'")}r=r.replace(v,escape(Ext.util.Format.htmlDecode(m)));e=true}}r=getFormAssignment(r);r=r.substring(0,r.indexOf("?")+1)+"tabName="+(strContainsSpclChars(k)?escape(k):k)+spChar+y+"&"+r.substring(r.indexOf("?")+1);var g=r;if(!e){g=strContainsSpclChars(k)?r:decodeURI(r)}var h=g.substring(g.indexOf("?")+1);var x=h.split("&");var q=0;var t=0;if(windowTitle==k){t=1}while(tabsList.length>q){var B=tabsList[q];B=B.split(spChar);var c=B[0];var w=B[1];var a=functionsList[q];if((e?unescape(c):c)==k){var p=0;var s;var A;var u="";while(x.length>p){if(x[p].match("=")!=-1){var z=x[p].substring(0,x[p].indexOf("="));if(z=="tabTitle"){u=x[p].substring(x[p].indexOf("=")+1);if(e){u=unescape(u)}p++;continue}if(z=="title"){A=x[p].substring(x[p].indexOf("=")+1);p++;continue}if(z=="target"||z=="amp;target"){s=x[p].substring(x[p].indexOf("=")+1);p++;continue}p++}}Ext.getCmp("navview").findById("tabs").findById(w).show();if(u!=""){a(s,u,A)}else{a(s,A,A)}t=1;break}q++}if(t==0){var n=k;if(strContainsSpclChars(k)){n=Ext.util.Format.htmlEncode(k);if(n.indexOf("'")!=-1){n=n.replace("'","&#39;")}}var f=nodePageReferences[n];if(f!=null){var h=f.substring(f.indexOf("?")+1);var x=h.split("&");var p=0;var s;var A;while(x.length>p){if(x[p].match("=")!=-1){var z=x[p].substring(0,x[p].indexOf("="));if(z=="target"){s=x[p].substring(x[p].indexOf("=")+1);p++;continue}if(z=="title"){A=x[p].substring(x[p].indexOf("=")+1);p++;continue}p++}}setpageTarget(s+spChar+A);if(typeof(b)=="undefined"||b==null||b==""){r=r.substring(0,r.indexOf("?")+1)+"useListViewTarget=true&"+r.substring(r.indexOf("?")+1)}if(s=="KnowledgeSearch"){if(r.indexOf("useListViewTarget=true")!=-1){r=r.substring(0,r.indexOf("?")+1)+"useListViewTarget=false&"+r.substring(r.indexOf("useListViewTarget=true")+23)}else{r=r.substring(0,r.indexOf("?")+1)+"useListViewTarget=false&"+r.substring(r.indexOf("?")+1)}}}if(y.match("NewsFeedPage")!=-1&&y.match("NewsFeedPage")!=null&&typeof(Ext.getCmp(y))!="undefined"&&Ext.getCmp(y)!=null){var l=Ext.getCmp(y);r="/apex/"+r;if(typeof(document.getElementById(y+"iframe"))!="undefined"&&document.getElementById(y+"iframe")!=null){document.getElementById(y+"iframe").src=r;l.show()}}else{if((linkArray[r])==null){if(qvTabId==""){qvTabId=y}var o="";if(!r.match(/\isCustomActionLink/)){o="/apex/"}var d="";if(k=="QuickView Editor"){d="QVEditor"}else{if(s!=null&&s!=""){d=s.substring(s.indexOf("=")+1,s.indexOf("%"))}}Ext.getCmp("navview").findById("tabs").add({title:" &nbsp;&nbsp; "+k,width:"auto",id:y,domId:d,html:'<div class="iframe-enclave1" id="divId'+y+'"></div><div class="sky-iframe"><iframe name = "skyiframe'+mod+'" id = "'+y+'iframe" src ="'+o+r+'" class="tab-iframe" style="width:100%;height:100%;border:none;background:white"/></div>',closable:true,listeners:{close:function(){linkArray[indexArray[this.id]]=null;removeTabFunction(this.id);qvTabId=""}}}).show();linkArray[r]=y;indexArray[linkArray[r]]=r;document.getElementById("divId"+y).style.visibility="hidden"}else{var l=Ext.getCmp(linkArray[r]+"");if(l){l.show()}}}}e=false}function setQVTabId(){linkArray[indexArray[qvTabId]]=null;removeTabFunction(qvTabId);Ext.getCmp("navview").findById("tabs").remove(qvTabId);Ext.getCmp("navview").findById("tabs").findById("mydashboard").show();qvTabId=""}Ext.ux.TabScrollerMenu=Ext.extend(Object,{pageSize:10,maxText:15,menuPrefixText:"Items",constructor:function(a){a=a||{};Ext.apply(this,a)},init:function(b){Ext.apply(b,this.tabPanelMethods);b.tabScrollerMenu=this;var a=this;b.on({render:{scope:b,single:true,fn:function(){var c=b.createScrollers.createSequence(a.createPanelsMenu,this);b.createScrollers=c}}})},createPanelsMenu:function(){var c=this.stripWrap.dom.offsetHeight;var b=this.header.dom.firstChild;Ext.fly(b).applyStyles({right:"18px"});var a=Ext.get(this.strip.dom.parentNode);a.applyStyles({"margin-right":"36px"});var d=this.header.insertFirst({cls:"x-tab-tabmenu-right"});d.setHeight(c);d.addClassOnOver("x-tab-tabmenu-over");d.on("click",this.showTabsMenu,this);this.scrollLeft.dom.qtip=labelTabScrollerLeft;this.scrollRight.dom.qtip=labelTabScrollerRight;this.scrollLeft.show=this.scrollLeft.show.createSequence(function(){d.show()});this.scrollLeft.hide=this.scrollLeft.hide.createSequence(function(){d.hide()})},getPageSize:function(){return this.pageSize},setPageSize:function(a){this.pageSize=a},getMaxText:function(){return this.maxText},setMaxText:function(a){this.maxText=a},getMenuPrefixText:function(){return this.menuPrefixText},setMenuPrefixText:function(a){this.menuPrefixText=a},tabPanelMethods:{showTabsMenu:function(c){if(!this.tabsMenu){this.tabsMenu=new Ext.menu.Menu();this.on("beforedestroy",this.tabsMenu.destroy,this.tabsMenu)}this.tabsMenu.removeAll();this.generateTabMenuItems();var b=Ext.get(c.getTarget());var a=b.getXY();a[1]+=24;this.tabsMenu.showAt(a)},generateTabMenuItems:function(){var d=this.getActiveTab();var e=this.items.getCount();var a=this.tabScrollerMenu.getPageSize();var b=0;while(e>b){var c=this.items.get(b);this.tabsMenu.add(this.autoGenMenuItem(c));b++}},autoGenMenuItem:function(c){var a=this.tabScrollerMenu.getMaxText();var b=c.title.substring(13,c.title.length);var d=Ext.util.Format.ellipsis(b,a);return{text:d,handler:this.showTabFromMenu,scope:this,disabled:c.disabled,tabToShow:c,iconCls:c.iconCls}},showTabFromMenu:function(a){this.setActiveTab(a.tabToShow)}}});initFunction=function(c){if(c.collapsible){var b=c.region;var a="x-collapsed-header-text";if((b=="east")||(b=="west")){a+="-rotated"}c.on("render",function(){var d=c.ownerCt;d.on("afterlayout",function(){c.collapsedTitleEl=d.layout[b].getCollapsedEl().createChild({tag:"div",cls:a,html:"<img src="+resSDEFStylesPath+'"/SDEFicons/icon_workspaces_bar_closed.gif" style="padding-left:8px;height:25px;width:25px;"/><div class="sky-title" style="color:white">'+c.title+"</div>"});c.setTitle=Ext.Panel.prototype.setTitle.createSequence(function(e){RemedyForceHTMLProcessor.setText(c.collapsedTitleEl.dom,e)})},false,{single:true})})}};clickFunction=function(e){if(e.leaf){if(e.text==chatterFeedLabel){addChatterFeedTab();return}var t=false;var l=Ext.util.Format.htmlDecode(e.text);if(strContainsSpclChars(l)){e.text=l;t=true}windowTitle=e.text;mod=e.text;pageRef=e.attributes.pageRef;if(e.text==incidentLabel){incidentTabID=e.id}if(windowTitle.indexOf(AlignabilityProcessModel)!=-1){windowTitle=AlignabilityProcessModel;e.text=windowTitle}var p=t?escape(e.text):e.text;pageRef=pageRef.substring(0,pageRef.indexOf("?")+1)+"tabName="+p+spChar+e.id+"&"+pageRef.substring(pageRef.indexOf("?")+1);var f=pageRef.substring(pageRef.indexOf("?")+1);var b=f.split("&");var k=0;var m=0;while(tabsList.length>k){var o=tabsList[k];o=o.split(spChar);var d=o[0];var c=o[1];var g=functionsList[k];if(d==e.text){var h=0;var a;var r;while(b.length>h){if(b[h].match("=")!=-1){var s=b[h].substring(0,b[h].indexOf("="));if(s=="title"){r=b[h].substring(b[h].indexOf("=")+1);h++;continue}if(s=="target"){a=b[h].substring(b[h].indexOf("=")+1);h++;continue}h++}}g(a,r,r);Ext.getCmp("navview").findById("tabs").findById(c).show();m=1;break}k++}if(m==0){if((linkArray[e.attributes.pageRef])==null){Ext.getCmp("navview").findById("tabs").add({title:" &nbsp;&nbsp; "+e.text,id:e.id,domId:e.attributes.domId,iframeName:"skyiframe"+mod,html:'<div class="iframe-enclave1" id="divId'+e.id+'"></div><div class="iframe-enclave"><iframe id="skyiframe'+mod+'" name="skyiframe'+mod+'" src ="/apex/'+encodeURI(pageRef)+'" class="tab-iframe"/></div>',closable:true,listeners:{beforeclose:beforeCloseTabEvent,close:function(){linkArray[indexArray[this.id]]=null;removeTabFunction(this.id)}}}).show();linkArray[e.attributes.pageRef]=e.id;indexArray[e.id]=e.attributes.pageRef;document.getElementById("divId"+e.id).style.visibility="hidden"}else{var q=Ext.getCmp(linkArray[e.attributes.pageRef]+"");if(q){q.show()}}}}else{if(e.expanded){e.collapse()}else{e.expand()}}};function beforeCloseTabEvent(b){var d=false;if(typeof(window.frames[this.iframeName])=="undefined"){return}var c;if(typeof(window.frames[this.iframeName].changeArray)!="undefined"){c=window.frames[this.iframeName].changeArray}else{if(typeof(document.getElementById(this.iframeName).contentWindow)!="undefined"){c=document.getElementById(this.iframeName).contentWindow.changeArray}else{return false}}if(c.length>0){for(var a=0;a<c.length;a++){if(c[a]==1){d=true;break}}}if(d){Ext.Msg.show({title:labelCloseTab,msg:labelCloseTabLabel,buttons:Ext.Msg.YESNO,icon:Ext.MessageBox.WARNING,fn:function(e){if(e=="yes"){var f=Ext.getCmp("navview").findById("tabs");f.un("beforeclose",beforeCloseTabEvent);linkArray[indexArray[b.id]]=null;removeTabFunction(b.id);f.remove(b);f.addListener("beforeclose",beforeCloseTabEvent,f)}}});return false}}function removeTabFunction(e){var b=0;var d=e;d=escapeHtmlCodes(d);while(tabsList.length>b){var c=tabsList[b];var a=c.split(spChar);if(a[0]==windowTitle){windowTitle=null}if(a[1]==d){tabsList.splice(b,1);functionsList.splice(b,1);break}b++}}function editDashboardHandler(){if(document.getElementById("qryPageRef").value!=""){var b=document.getElementById("qryPageRef").value;var a=b.split(sep);if(Ext.getCmp(a[0])!=null){Ext.getCmp(a[0]).show()}else{if(a.length==3){Ext.getCmp("navview").findById("tabs").add({title:" &nbsp;&nbsp; "+a[0],id:a[0],closable:true,domId:"defaultdashboard",html:'<div class="iframe-enclave1" id="child3"></div><div class="drop-target" id="child4"><iframe id="defaultDashboardIFrame" src ="/apex/'+a[2]+'?editDefaultDashboard=true" class="tab-iframe"/></div>',afterRender:function(){Ext.Panel.prototype.afterRender.apply(this,arguments);this.dropTarget=this.body.child("div.iframe-enclave1");var c=new Ext.dd.DropTarget(this.dropTarget,{ddGroup:"t2div",notifyDrop:function(d,g,f){if(f.node.attributes.pageRef==""||f.node.attributes.pageRef==null||f.node.attributes.pageRef=="DashboardPage"){Ext.Msg.alert(labelInformation,labelQVDragToDashboard)}else{document.getElementById("defaultDashboardIFrame").contentWindow.dragQV(f.node.id);document.getElementById("child3").style.visibility="hidden";return true}}});document.getElementById("child3").style.visibility="hidden"}}).show()}}}}function editHandler(){if(isQueryNode==false&&isFolderNode==true){Ext.Msg.show({title:labelEditFolder,msg:labelvalidateFolderNameSkyWalkerPage,width:250,buttons:Ext.MessageBox.OKCANCEL,value:nameOfFolderNode,prompt:true,fn:function(a,b){if(a=="ok"){if(b.length>100){Ext.Msg.alert(labelInformation,labelQVFolderLengthValidation);return}folderName=b;document.getElementById("strFolderName").value=b;if(b!=null&&b.trim()!=""){editFolderName(selectedNode);OnLoadDesableButtons()}else{document.getElementById("strFolderName").value="";editHandler()}}}})}else{if(isQueryNode==true&&isFolderNode==false){editQuery(sysQueryId)}}}function editHandlerCall(){if(document.getElementById("qryPageRef").value!=""){var c=document.getElementById("qryPageRef").value;var b=c.split(sep);var a=b[0];a=replaceAll(a,"%","§");a=replaceAll(a,"§","%25");a=replaceAll(a,"#","%23");a=replaceAll(a,"&","%26");a=replaceAll(a,"'","§");a=replaceAll(a,"§","\\'");a=replaceAll(a,'"',"%22");a=replaceAll(a,"+","%2B");if(b[2]!="DashboardPage"){b[2]=replaceAll(b[2],'"',"%22");b[2]=replaceAll(b[2],"+","%2B");addNewTab(a,labelQuickViewEditor,b[2])}}}function doNotEditFunction(){Ext.Msg.alert(labelInformation,labelSelectedQueryDeletedMessage);loadTreeAfterDeleteQuery()}function setQuickviewId(a){QVQueryId=a}function getQuiickviewId(){if(QVQueryId!=null&&QVQueryId!=""&&QVQueryId!="default dashboards"){return QVQueryId}}clickFunction1=function(c){document.getElementById("qryPageRef").value="";isQVNodeSelected="true";if(c.leaf){if(c.attributes.pageRef!=""&&c.attributes.pageRef!=null){if(c.attributes.pageRef=="DashboardPage"){OnLoadDesableButtons()}else{desableButtons();selectedNode=null;selectedNodeRef=c.attributes.pageRef;sysQueryId=c.id;setQuickviewId(c.id);isQueryNode=true;isFolderNode=false;selecteQueryText=c.text;oewnerOfQuery=c.attributes.owner;var a=document.getElementById("ownerId").value;if(c.attributes.systemValue==true){Ext.getCmp("deleteBtn").setDisabled(true);Ext.getCmp("cutBtn").setDisabled(true)}}}else{selectedNode=c.id;selectedNodeRef=null;isQueryNode=false;isFolderNode=true;nameOfFolderNode=c.text;if(c.attributes.parent=="null"||c.attributes.parent==""||c.attributes.systemValue==true){OnLoadDesableButtons()}}var b=Ext.getCmp("tabs").findById(c.id);if(b){}else{document.getElementById("qryPageRef").value=c.text+sep+c.id+sep+c.attributes.pageRef;if(c.id=="default dashboards"){editDashboardHandler()}}}else{selectedNodeRef=null;selectedNode=c.id;folderName=c.text;setQuickviewId(null);isQueryNode=false;isFolderNode=true;nameOfFolderNode=c.text;if(c.attributes.parent=="null"||c.attributes.parent==""||c.attributes.systemValue==true){OnLoadDesableButtons();if((c.attributes.parent=="null"||c.attributes.parent=="")&&c.attributes.systemValue==true){Ext.getCmp("addFldrBtn").setDisabled(false)}}else{enableButtons()}if(c.expanded){c.collapse()}else{c.expand()}}};function editTreeForQuery(){refreshTree()}function addQueryNode(a,b){refreshTree()}function setFolderId(a){addedFolderId=a}function loadTreeAfterAdd(c){var a=Ext.getCmp("QVToolbar");var b=new Ext.tree.TreeNode({text:c,id:addedFolderId,leaf:false,href:"#",expandable:true});var d=a.getSelectionModel().getSelectedNode();d.appendChild([b])}function loadTreeAfterDelete(){if(errorMessge!=""&&errorMessge=="Do not delete"){Ext.Msg.alert(labelWarning,labeldeleteFolderHavingSystemQuery)}else{var a=Ext.getCmp("QVToolbar");a.getSelectionModel().getSelectedNode().remove();OnLoadDesableButtons()}}function loadTreeAfterDeleteQuery(){var a=Ext.getCmp("QVToolbar");a.getSelectionModel().getSelectedNode().remove();OnLoadDesableButtons();var b=Ext.getCmp("tabs");if(b!=null&&typeof(b)!="undefined"){if((b.getActiveTab()).getId()=="mydashboard"){refreshDashBoard()}setDoRefresh(false)}}function loadTreeAfterPaste(a){refreshTree();idForQuery="";isQueryCut=false;isQueryCopy=false;Ext.getCmp("pasteBtn").setDisabled(true)}function showErrorMessage(){Ext.Msg.alert(labelWarning,labelQueryNameExisting);isQueryCopy=false;isQueryCut=false;refreshTree()}function desableButtons(){if(flagToDesableButton==true){Ext.getCmp("newBtn").setDisabled(true);Ext.getCmp("editBtn").setDisabled(false);Ext.getCmp("copyBtn").setDisabled(false);Ext.getCmp("pasteBtn").setDisabled(true);Ext.getCmp("deleteBtn").setDisabled(false);Ext.getCmp("cutBtn").setDisabled(false);Ext.getCmp("addFldrBtn").setDisabled(true);Ext.getCmp("deleteFldrBtn").setDisabled(true)}}function enableButtons(){if(flagToDesableButton==true){Ext.getCmp("newBtn").setDisabled(false);Ext.getCmp("editBtn").setDisabled(false);Ext.getCmp("copyBtn").setDisabled(true);if(isQueryCopy==true||isQueryCut==true){Ext.getCmp("pasteBtn").setDisabled(false)}else{Ext.getCmp("pasteBtn").setDisabled(true)}Ext.getCmp("deleteBtn").setDisabled(true);Ext.getCmp("cutBtn").setDisabled(true);Ext.getCmp("addFldrBtn").setDisabled(false);Ext.getCmp("deleteFldrBtn").setDisabled(false)}}function OnLoadDesableButtons(){Ext.getCmp("newBtn").setDisabled(true);Ext.getCmp("editBtn").setDisabled(true);Ext.getCmp("copyBtn").setDisabled(true);Ext.getCmp("pasteBtn").setDisabled(true);Ext.getCmp("deleteBtn").setDisabled(true);Ext.getCmp("cutBtn").setDisabled(true);Ext.getCmp("addFldrBtn").setDisabled(true);Ext.getCmp("deleteFldrBtn").setDisabled(true)}function addQVFolder(){if(isQVNodeSelected=="true"){if(selectedNodeRef==null){Ext.Msg.prompt(labelAddFolder,labelvalidateFolderNameSkyWalkerPage,function(a,b){if(a=="ok"){if(b.length>100){Ext.Msg.alert(labelInformation,labelQVFolderLengthValidation);return}folderNameVal=b;document.getElementById("strFolderName").value=b;if(b!=null&&b.trim()!=""){addFolder(selectedNode)}else{document.getElementById("strFolderName").value="";addQVFolder()}}})}}else{Ext.Msg.alert(labelWarning,labelvalidateSelectionOfFolderSkyWalkerPage)}}function deleteQVFolder(){if(selectedNodeRef==null){Ext.MessageBox.confirm(labelDelete,labeldeleteSelectedFolderSkyWalkerPage,function(a){if(a==="yes"){deleteFolder(selectedNode)}})}else{Ext.Msg.alert(labelWarning,labelvalidateSelectionOfFolderSkyWalkerPage)}}function newQueryHandler(){if(selectedNodeRef==null){addNewTab("QueryWizard",labelQuickViewEditor,"NavigatorPage?title="+labelNewQuickView+"&target=QVWiz?qvfldr="+selectedNode+"%26x="+(index++))}}function deleteQueryHandler(){Ext.MessageBox.confirm(labelDelete,labeldeleteSelectedQuerySkyWalkerPage,function(a){if(a==="yes"){deleteQuery(sysQueryId);setDoRefresh(true)}})}function removeQueryHandler(){}function cutQueryHandler(){queryIdforCopy=sysQueryId;isQueryCut=true;isQueryCopy=false;var a=Ext.getCmp("QVToolbar");selectedQueryNode=a.getSelectionModel().getSelectedNode();document.getElementById("queryIdforCut").value=sysQueryId;Ext.Msg.alert(labelInformation,labelvalidateQueryPasteSkyWalkerPage)}function copyQueryHandler(){queryIdforCopy=sysQueryId;isQueryCopy=true;isQueryCut=false;document.getElementById("queryIdforCopy").value=sysQueryId;document.getElementById("queryIdforCut").value="";Ext.Msg.alert(labelInformation,labelvalidateQueryPasteSkyWalkerPage)}function confirm(b){var a;if(!b){var b=window.event}if(b.button){a=(b.button==2)}if(a==true){document.getElementById("homelink").href="/ui/setup/Setup"}else{document.getElementById("homelink").href="#nogo";Ext.MessageBox.confirm(labelConfirmHomePage,labelHomeLink,function(c){if(c==="yes"){window.location="/ui/setup/Setup"}})}}function pasteQueryHandler(){if(queryIdforCopy!=null&&queryIdforCopy!=""){if(isQueryCut==false){if(qvNameInvalid){labelvalidateQueryNameSkyWalkerPage=labelReenterQVName;qvNameInvalid=false}else{labelvalidateQueryNameSkyWalkerPage=labelEnterQVname}Ext.Msg.prompt(labelAddQuery,labelvalidateQueryNameSkyWalkerPage,function(a,b){if(a=="ok"){if(b.length>80){qvNameInvalid=true;pasteQueryHandler()}else{nameOfQuery=b;document.getElementById("strQueryName").value=b;if(b!=null&&b!=""){pasteQuery(selectedNode)}}}else{isQueryCopy=false}if(a=="cancel"){qvNameInvalid=false}})}else{nameOfQuery=selecteQueryText;document.getElementById("strQueryName").value=selecteQueryText;pasteQuery(selectedNode);isQueryCut==false}}}Ext.onReady(function(){var k=function(u,v){addQVFolder()};var q=function(u,v){deleteQVFolder()};var l=function(u,v){newQueryHandler()};var c=function(u,v){deleteQueryHandler()};var a=function(u,v){copyQueryHandler()};var d=function(u,v){pasteQueryHandler()};var r=function(u,v){removeQueryHandler()};var i=function(u,v){cutQueryHandler()};var f=new Ext.ux.TabScrollerMenu({maxText:15,pageSize:5});if(typeof(UpdatePropSysStage)=="undefined"){return}var t=screen.height;UpdatePropSysStage(t);if(typeof(repeatNodePageReference)=="undefined"){return}repeatNodePageReference();catLogTBar=new Ext.Toolbar({id:"catLogToolBar",items:[{scale:"medium",iconCls:"bmcNew",hight:"20px",width:"20px",tooltipType:"title",tooltip:labelnewQuery,id:"newBtn",listeners:{mouseover:function(){this.setIconClass("bmcNewOn")},mouseout:function(){this.setIconClass("bmcNew")}},handler:l},{scale:"medium",iconCls:"bmcQueryEdit",hight:"20px",width:"20px",tooltipType:"title",tooltip:labeleditQVQuery,id:"editBtn",listeners:{mouseover:function(){this.setIconClass("bmcQueryEditOn")},mouseout:function(){this.setIconClass("bmcQueryEdit")}},handler:editHandler},{scale:"medium",iconCls:"bmcQvCutQuery",id:"cutBtn",tooltipType:"title",tooltip:labelcutQuery,listeners:{mouseover:function(){this.setIconClass("bmcQvCutQueryOn")},mouseout:function(){this.setIconClass("bmcQvCutQuery")}},handler:i},{scale:"medium",iconCls:"bmcCopy",id:"copyBtn",tooltipType:"title",tooltip:labelcopyQuery,listeners:{mouseover:function(){this.setIconClass("bmcCopyOn")},mouseout:function(){this.setIconClass("bmcCopy")}},handler:a},{scale:"medium",iconCls:"bmcQvPaste",id:"pasteBtn",tooltipType:"title",tooltip:labelpasteQuery,listeners:{mouseover:function(){this.setIconClass("bmcQvPasteOn")},mouseout:function(){this.setIconClass("bmcQvPaste")}},handler:d},{scale:"medium",iconCls:"bmcQVDeleteQuery",id:"deleteBtn",tooltipType:"title",tooltip:labeldeleteQuery,listeners:{mouseover:function(){this.setIconClass("bmcQVDeleteQueryOn")},mouseout:function(){this.setIconClass("bmcQVDeleteQuery")}},handler:c},"-",{scale:"medium",iconCls:"bmcQvAddFolder",id:"addFldrBtn",tooltipType:"title",tooltip:labelAddFolder,listeners:{mouseover:function(){this.setIconClass("bmcQvAddFolderOn")},mouseout:function(){this.setIconClass("bmcQvAddFolder")}},handler:k},{scale:"medium",iconCls:"bmcQvDeleteFolder",id:"deleteFldrBtn",tooltipType:"title",tooltip:labeldeleteFolder,listeners:{mouseover:function(){this.setIconClass("bmcQvDeleteFolderOn")},mouseout:function(){this.setIconClass("bmcQvDeleteFolder")}},handler:q}]});btn1=new Ext.Toolbar({cls:"btn1Cls",items:[{xtype:"tbtext",text:BMCVideoLinkLabel,id:"bmcCommunityLink",listeners:{render:function(u){u.getEl().on("click",function(){OpenBMCCommunityPage()})}}},"->",new Ext.Button({cls:"Add",tooltipType:"title",id:"portletAddBtn",tooltip:labelsidebarToolTip,handler:openPopUp}),new Ext.Button({cls:"pre",tooltipType:"title",id:"portletPrevBtn",tooltip:labelpreviousPortlet,handler:prePortel}),new Ext.Button({cls:"next",tooltipType:"title",id:"portletNextBtn",tooltip:labelnextPortlet,handler:nextPortel})]});new Ext.Viewport({layout:"border",id:"navview",items:[{region:"north",html:'<div class="header-div" width="100%"><table width="100%" ><tr><td align="left" width="425px" ><iframe bgcolor="#334f67;"  allowTransparency="true" frameborder="0" style="height:35px;" src ="/apex/DisplayLogo" width="100%" scrolling=NO></iframe></td><td width="600px" bgcolor="#334f67" style="height:35px;background:#334f67;overflow:hidden"><iframe bgcolor="#334f67;" frameborder="0" src ="/apex/TickerPage" width="100%"  style="height:35px;background:#334f67;overflow:hidden;overflow:auto\9;" allowTransparency="true" /></iframe></td><td width="250px" valign="top" align="right" class="homeStyle homeStyleUser">'+labelWelcome+",&nbsp;"+userName+'</td><td valign="top" width="5%" style="height:35px;" align="left" class="bgtop homeStyle"><a class="homeStyle" style="white-space:nowrap;" id="homelink" href="#nogo" onmousedown="confirm(event);">'+labelSetup+'</a><a id="helpMenuLink" class="homeStyle" style="cursor:pointer;white-space:nowrap;">'+labelHelp+'</a><a class="homeStyle" style="white-space:nowrap;" id="logoutHomeLink" href="/secur/logout.jsp">'+labelLogout+"</a></td></tr></table></div>",autoHeight:true,border:false,margins:"-3 0 3 -2"},{region:"west",collapsible:true,collapseMode:"mini",width:280,autoScroll:true,id:"navbar",useArrows:true,split:true,layout:"accordion",titleCollapse:false,activeItem:0,bodyStyle:{"background-color":"#334f67",border:"none"},footerCfg:{html:"<img src="+resSDEFStylesPath+'/SDEFimages/Salesforce_Logo.png width="280" height="67">'},footerStyle:"border-top:1px solid #cbdeeb;",items:[{title:labelWorkspaces,id:"workspaces",titleCollapse:true,hideCollapseTool:true,margins:"0 10 0 0",autoScroll:true,cls:"bmcWorkspaceTreeCls",iconCls:"bmcWorkspace",scale:"medium",useArrows:true,margins:"0 5 0 0",cmargins:"0 5 0 0",xtype:"treepanel",loader:new Ext.tree.TreeLoader(),root:new Ext.tree.AsyncTreeNode({expanded:true,children:navigatorJsonFeedRoot()}),rootVisible:false,plugins:{init:clickFunction},listeners:{click:clickFunction}},{title:labelCatalog,id:"QVToolbar",collapsible:true,titleCollapse:true,hideCollapseTool:true,margins:"0 10 0 0",autoScroll:true,cls:"bmcCatalogTreeCls",iconCls:"bmcCatalog",scale:"medium",useArrows:true,margins:"0 5 0 0",cmargins:"0 5 0 0",xtype:"treepanel",enableDD:true,ddGroup:"t2div",tbar:catLogTBar,loader:new Ext.tree.TreeLoader(),root:new Ext.tree.AsyncTreeNode({expanded:true,children:quickViewJsonFeedRoot()}),rootVisible:false,listeners:{click:clickFunction1,startdrag:function(u,v,w){child1=document.getElementById("child1");child3=document.getElementById("child3");child5=document.getElementById("child5");child7=document.getElementById("divId"+Ext.getCmp("tabs").getActiveTab().getId());child8=document.getElementById("child8");if(child1!=null){child1.style.visibility="visible"}if(child3!=null){child3.style.visibility="visible"}if(child5!=null){child5.style.visibility="visible"}if(child7!=null){child7.style.visibility="visible"}if(child8!=null){child8.style.visibility="visible"}},enddrag:function(u,v,w){clickFunction1(v);child1=document.getElementById("child1");child3=document.getElementById("child3");child5=document.getElementById("child5");child7=document.getElementById("divId"+Ext.getCmp("tabs").getActiveTab().getId());child8=document.getElementById("child8");if(child1!=null){child1.style.visibility="hidden"}if(child3!=null){child3.style.visibility="hidden"}if(child5!=null){child5.style.visibility="hidden"}if(child7!=null){child7.style.visibility="hidden"}if(child8!=null){child8.style.visibility="hidden"}},beforemovenode:function(u,y,w,x,v){if(w==x){return true}if(y.attributes.pageRef==""||y.attributes.pageRef==null){Ext.Msg.alert(labelInformation,labelQVDragToFolder);refreshTree()}else{if(y.attributes.pageRef=="DashboardPage"){Ext.Msg.alert(labelInformation,labelQVDragToFolder);refreshTree()}else{if(x.id=="dashboards"){Ext.Msg.alert(labelInformation,labelrestrictQVs);refreshTree()}else{if(x.attributes.systemValue){Ext.Msg.alert(labelInformation,labelrestrictCustomQVs);refreshTree()}else{if(y.attributes.systemValue){Ext.Msg.alert(labelInformation,labelrestrictSystemQVs);refreshTree()}else{isQueryCut=true;isQueryCopy=false;queryIdforCopy=y.id;selecteQueryText=y.text;selectedNode=x.id;document.getElementById("queryIdforCut").value=y.id;pasteQueryHandler()}}}}}}}},{title:labelConfiguration,collapsible:false,id:"ConfigurationTree",titleCollapse:true,hideCollapseTool:true,margins:"0 10 0 0",autoScroll:true,cls:"bmcConfigurationTreeCls",iconCls:"bmcConfiguration",scale:"medium",useArrows:true,margins:"0 5 0 0",cmargins:"0 5 0 0",xtype:"treepanel",loader:new Ext.tree.TreeLoader(),root:new Ext.tree.AsyncTreeNode({expanded:true,children:configurationJsonFeedRoot()}),rootVisible:false,plugins:{init:clickFunction},listeners:{click:clickFunction}}]},{region:"center",xtype:"tabpanel",id:"tabs",width:500,autoScroll:true,tabPosition:"top",cls:"centralTabPanelCls",enableTabScroll:true,autoScroll:false,plugins:[f],split:true,items:[{id:"mydashboard",domId:"mydashboard",title:"&nbsp;&nbsp;&nbsp;"+labelMyDashboardTitle,html:'<div class="iframe-enclave1" id="child1"></div><div class="drop-target" id="child2"><iframe frameborder="0" id="dashboardIFrame" name="dashboardIFrame" src ="/apex/DashboardPage" class="tab-iframe"/></div>',afterRender:function(){Ext.Panel.prototype.afterRender.apply(this,arguments);this.dropTarget=this.body.child("div.iframe-enclave1");var u=new Ext.dd.DropTarget(this.dropTarget,{ddGroup:"t2div",notifyDrop:function(v,x,w){if(w.node.attributes.pageRef==""||w.node.attributes.pageRef==null||w.node.attributes.pageRef=="DashboardPage"){Ext.Msg.alert(labelInformation,labelQVDragToDashboard)}else{document.getElementById("dashboardIFrame").contentWindow.dragQV(w.node.id);document.getElementById("child1").style.visibility="hidden";return true}}});document.getElementById("child1").style.visibility="hidden"}}],listeners:{tabchange:function(u,x){var w=trim(x.title.split(";")[x.title.split(";").length-1]);var z=myArray[w];if(z!=undefined){if(typeof(z.refreshDocs)!="function"){if(w!="Configuration Items"){z.frames.SIIframeID.refreshDocs()}else{var v=z.frames;v[0].frames.SIIframeID.refreshDocs()}delete myArray[w]}else{z.refreshDocs()}}if(x.id=="mydashboard"&&getDoRefresh()){refreshDashBoard();setDoRefresh(false)}var A=u.getTabEl(x);if(A.childNodes[0]!=null&&A.childNodes[0]!=undefined){var y=x.domId.replace(" ","_");A.childNodes[0].id=y.toUpperCase()+"_TAB_CLOSE_BTN";A.childNodes[1].childNodes[0].childNodes[0].childNodes[0].id=y.toUpperCase()+"_TAB"}}}},{region:"east",width:Ext.isIE7?282:Ext.isIE8?280:282,id:"rightbar",baseCls:"sky-widgetpanel-base",collapsible:true,collapseMode:"mini",animCollapse:Ext.isIE,animFloat:Ext.isIE,split:true,minWidth:Ext.isIE7?282:Ext.isIE8?280:282,maxWidth:Ext.isIE7?282:Ext.isIE8?280:282,margins:"-2 0 0 0",items:[{region:"north",id:"eastNorthBar",tbar:btn1,height:15,cls:"skyEastToolbarCls",bodyStyle:{"background-color":"#334f67",border:"none"}},{xtype:"portal",region:"center",bodyStyle:{"background-color":"#334f67",border:"none"},items:[{id:"portalContent",columnWidth:0.99,items:[{xtype:"panel",height:5,bodyStyle:{"background-color":"#334f67",border:"none"}},[jsonStringVal]]}]}]}],listeners:{afterlayout:function(u){u.layout.east.miniSplitEl.dom.qtip=labelTooltipCollapseSidebar;u.layout.east.getCollapsedEl();u.layout.east.miniCollapsedEl.dom.qtip=labelTooltipExpandSidebar;u.layout.west.miniSplitEl.dom.qtip=labelTooltipCollapseNavigator;u.layout.west.getCollapsedEl();u.layout.west.miniCollapsedEl.dom.qtip=labelTooltipExpandNavigator;h()}}});function h(){var u=Ext.getCmp("workspaces");u.getRootNode().cascade(function(z){if(z!=null&&z!=undefined&&z.attributes.domId!=undefined&&z.attributes.domId!=null){var y=z.attributes.domId.replace(" ","_");z.getUI().getTextEl().id=y.toUpperCase()+"_TREE_ID"}});u.getEl().dom.childNodes[0].childNodes[1].id="WORKSPACE_ACCORD";var w=Ext.getCmp("QVToolbar");w.getEl().dom.childNodes[0].childNodes[1].id="CATALOG_ACCORD";var v=Ext.getCmp("ConfigurationTree");v.getRootNode().cascade(function(z){if(z!=null&&z!=undefined&&z.attributes.domId!=undefined&&z.attributes.domId!=null){var y=z.attributes.domId.replace(" ","_");z.getUI().getTextEl().id=y.toUpperCase()+"_TREE_ID"}});v.getEl().dom.childNodes[0].childNodes[1].id="CONFIG_ACCORD";var x=0;Ext.select(".x-tool").each(function(y){y.dom.id="PANEL-TOOL-"+x++})}function e(){if(userLanguage=="ja"&&showJapaneseHelp.toLowerCase()=="true"){window.open(resSDEFHelpPath_JA+"/helpfile.htm","popUpWindow","height=700,width=800,left=10,top=10,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no,status=yes")}else{window.open(resSDEFHelpPath+"/helpfile.htm","popUpWindow","height=700,width=800,left=10,top=10,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no,status=yes")}}function b(){if(userLanguage=="ja"&&showJapaneseHelp.toLowerCase()=="true"){window.open(resSDEFStylesPath_JA+"/InstallationandConfigurationGuide.pdf","popUpWindow","height=700,width=800,left=10,top=10,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no,status=yes")}else{window.open(resInstallConfigGuidePath+"/InstallationandConfigurationGuide.pdf","popUpWindow","height=700,width=800,left=10,top=10,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no,status=yes")}}function m(){if(userLanguage=="ja"&&showJapaneseHelp.toLowerCase()=="true"){window.open(resSDEFStylesPath_JA+"/ReleaseNotes.pdf","popUpWindow","height=700,width=800,left=10,top=10,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no,status=yes")}else{var u="resizable=1,scrollbars=1,fullscreen=1,toolbar=1,menubar=1,status=1,location=1";window.open("https://communities.bmc.com/docs/DOC-31190","mywindow",u)}}function g(){var v;var u='<iframe src ="/apex/contactus" style="width:100%;height:100%;border:none"/>';if(!v){v=new Ext.Window({width:600,height:300,closable:true,closeAction:"close",layout:"fit",bodyStyle:"background-color:#d2d1d1",title:labelSSContactUs,resizable:false,html:u});v.show(this)}}function n(){var v;var u='<iframe src ="/apex/AboutUs" style="width:100%;height:100%;border:none" scrolling="no" frameborder="0"/>';if(!v){v=new Ext.Window({width:513,height:500,closable:true,closeAction:"close",layout:"fit",bodyStyle:"background-color:#d2d1d1",title:labelAboutServiceDeskExpressonForceCom,resizable:false,html:u});v.show(this)}}var s=isUserSAval;helpMenu=new Ext.menu.Menu({id:"basicMenu",items:[{text:labelService_Desk_Express_on_Force_com_Help,handler:e},{text:labelSSContactUs,handler:g,hidden:!s},"-",{text:labelAboutServiceDeskExpressonForceCom,handler:n}]});var p=null;Ext.get("helpMenuLink").on("click",function(v){var u=v.getXY();u[0]=u[0]-170;u[1]=u[1]+18;helpMenu.showAt(u);if(p==null){p=new Ext.util.DelayedTask(function(){helpMenu.hide()})}p.delay(3500)});Ext.getCmp("navview").findById("tabs").findById("mydashboard").show();if(flagToDesableButton==false){Ext.getCmp("catLogToolBar").hide()}OnLoadDesableButtons();Ext.QuickTips.init();if(document.getElementById("child8")!=null){document.getElementById("child8").style.visibility="hidden"}var o=portletHasPrevVal;var j=portletHasNextval;if(Ext.getCmp("portletNextBtn")!=null&&typeof(Ext.getCmp("portletNextBtn"))!="undefined"){Ext.getCmp("portletNextBtn").setDisabled((j=="false"))}if(Ext.getCmp("portletPrevBtn")!=null&&typeof(Ext.getCmp("portletPrevBtn"))!="undefined"){Ext.getCmp("portletPrevBtn").setDisabled((o=="false"))}if(document.getElementById("bmcCommunityLink")!=null&&document.getElementById("bmcCommunityLink")!="undefined"){document.getElementById("bmcCommunityLink").title=BMCVideoLinkLabeltooltip}});function prePortel(){backPortlet()}function nextPortel(){nextPortlet()}openPopUp=function(){var a=Ext.isIE?405:401;openPopupWithTitle("UserConfigPortlet",refreshPortletBar,labelAddSidebarContentHeader,a,460,true)};function addFolderJS(a){if(a!=""){setFolderId(a);loadTreeAfterAdd(folderNameVal)}}function editQueryJS(a){if(a!=""&&a=="1"){editHandlerCall()}else{if(a!=""&&a=="0"){doNotEditFunction()}}}function copyQueryJS(d,b,a){if(d=="true"){showErrorMessage();d="false"}else{if(isQueryCut==true){b=queryIdforCopy;loadTreeAfterPaste(nameOfQuery)}if(a=="true"){flagToDesableButton=true}else{flagToDesableButton=false}if(b!=""){var c=b.split("----");if(c[0]!==""){b=c[0];ownerOfPasteQuery=c[1];loadTreeAfterPaste(nameOfQuery)}}}}function trim(b,a){return ltrim(rtrim(b,a),a)}function ltrim(b,a){a=a||"\\s";return b.replace(new RegExp("^["+a+"]+","g"),"")}function rtrim(b,a){a=a||"\\s";return b.replace(new RegExp("["+a+"]+$","g"),"")}function CloseActiveTab(){var a=Ext.getCmp("tabs").getActiveTab();var b=Ext.getCmp("navview").findById("tabs");b.un("beforeclose",beforeCloseTabEvent);linkArray[indexArray[a.id]]=null;removeTabFunction(a.id);b.remove(a);b.addListener("beforeclose",beforeCloseTabEvent,b)};