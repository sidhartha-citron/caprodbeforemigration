var ActiveFilterId="",prevActiveFilterId="",ActiveDataIndex,elemId="";var currentColElem,prevColElem;var allActiveFilterHeaderIconElements=[];var isFlattenedCmdb=true,currentLookupId="";Ext.fly(document.body).on("click",function(f){var b=Ext.fly(f.getTarget());if(prevActiveFilterId!=undefined&&prevActiveFilterId!=null&&prevActiveFilterId!=""&&prevActiveFilterId!=ActiveFilterId){var a=Ext.get(prevActiveFilterId);if(a&&a.isVisible()){a.hide();RemovePressedFilterIcon(prevColElem)}}prevActiveFilterId="";prevColElem=null;if(ActiveFilterId!=undefined&&ActiveFilterId!=null){var g=Ext.get(ActiveFilterId);var h="div#"+ActiveFilterId;var c=f.getTarget().id;var d;if(f.getTarget()){d=f.getTarget().className}if(g&&c.indexOf("option-")==-1&&c.indexOf("-triggerEl")==-1&&c.indexOf("templatecolumn-")==-1&&!b.findParent(h)&&c.indexOf("_LookUpText")==-1&&c.indexOf("_lkimg1")==-1&&c.indexOf("_lkimg2")==-1&&(d&&d.indexOf("rfDPL-")==-1)){if(g.isVisible()){g.hide();RemovePressedFilterIcon(currentColElem)}}prevActiveFilterId=ActiveFilterId;prevColElem=currentColElem}});function HideActiveFilterComponent(){if(ActiveFilterId!=undefined&&ActiveFilterId!=null){var a=Ext.get(ActiveFilterId);if(a&&a.isVisible()){a.hide();if(currentColElem){RemovePressedFilterIcon(currentColElem)}}}}function LoadFilterComponent(b){FilterObjectName=b;getFieldDetails(b,"",isServiceRequest);currentConsole=getCurrentConsole(b);var a=Ext.getCmp("listViewGridPanelId");if(a){a.view.getEl().on("scroll",function(d,c){HideActiveFilterComponent()})}}function LoadCMDBFilterComponent(a){clearAllActiveFilters();localeDecimalSeparator=".";FilterObjectName="BMC_BaseElement__c";getFieldDetails("BMC_BaseElement__c",a.toString(),false);currentConsole=getCurrentConsole(FilterObjectName)}function updateDateIcon(){try{var f=getElementsByClassName("dateInput");if(f.length>0){var a,h;var e;for(var c=0;c<f.length;c++){a=f[c];if(a.className.indexOf("dateOnlyInput")>-1){e=true}else{e=false}h=a.getElementsByClassName("dateFormat");for(var d=0;d<h.length;d++){if(h[d]!=null&&typeof(h[d])!="undefined"){var k=h[d].childNodes;if(k!=null&&typeof(k)!="undefined"&&k.length>0){if(k.length>=2&&k[1]!=null&&typeof(k[1])!="undefined"){var l=RemedyForceHTMLProcessor.getText(k[1]);RemedyForceHTMLProcessor.clearHTML(k[1]);k[1].title=InsertLabel+": "+l;var g=document.createElement("SPAN");if(e){g.className="d-icon-calendar rfdplIconFontSize"}else{g.className="d-icon-calendar_clock_o rfdplIconFontSize"}g.id="DateIcon-"+FilterObjectName;k[1].appendChild(g);k[1].style.textDecoration="none"}if(k.length>=3&&k[2]!=null&&typeof(k[2])!="undefined"){h[d].removeChild(k[2])}if(k.length>0&&k[0]!=null&&typeof(k[0])!="undefined"){h[d].removeChild(k[0])}}}}}}}catch(b){console.log(b)}}var currentConsole="",ciId="",serviceId="",offeringId="",typeAheadDivId="autocompleteDiv",staffId="staffId";function VIPClientIcon(a){}function setMandatoryFieldValue(a,b){}function clientfields(a,b){}function getHTMLInputID(a){}function getCurrentConsole(b){var a="";if(b){b=b.toLowerCase();switch(b){case"incident__c":a="Incident";break;case"task__c":a="Task";break;case"change_request__c":a="Change Request";break;case"release__c":a="Release";break;case"problem__c":a="Problem";break;case"broadcasts__c":a="Broadcast";break;case"bmc_baseelement__c":a="CMDBLISTVIEW";break}}return a}function getFilterCondition(f,c,e,d,b){if(c=="User"||c=="AllUser"){return escape("Isactive = true ")}if(c=="Impact__c"||c=="Priority__C"||c=="Urgency__c"||c=="Category__c"||c=="Status__c"){return escape("Inactive__c = false")}if(c=="Broadcasts__c"||c=="Task__c"||c=="Incident__c"||c=="Release__c"||c=="Change_Request__c"||c=="Problem__c"){return escape("Inactive__c = false AND state__c = true")}if(c.toLowerCase()=="bmc_baseelement__c"){var a="active_be";if(d.indexOf("FKServiceOffering__c")!=-1){a="active_be¬flat_offering"}else{if(d.indexOf("FKBusinessService__c")!=-1){a="active_be¬flat_service"}}return a}if(c=="SYSTemplate__c"){return escape("Inactive__c = false and systemTemplate__c = false")}if(typeof(c)!="undefined"&&c!="User"&&c!="Account"&&c.indexOf("__c")<0){return""}}function escSpeChars(a){a=replaceAll(a,"\\","?");a=replaceAll(a,"?","\\");a=replaceAll(a,"?","?");a=replaceAll(a,"?","\\?");a=replaceAll(a,"^","?");a=replaceAll(a,"?","\\^");a=replaceAll(a,"$","?");a=replaceAll(a,"?","\\$");a=replaceAll(a,"(","?");a=replaceAll(a,"?","\\(");a=replaceAll(a,")","?");a=replaceAll(a,"?","\\)");a=replaceAll(a,"[","?");a=replaceAll(a,"?","\\[");a=replaceAll(a,"]","?");a=replaceAll(a,"?","\\]");a=replaceAll(a,"{","?");a=replaceAll(a,"?","\\}");a=replaceAll(a,"*","?");a=replaceAll(a,"?","\\*");a=replaceAll(a,"+","?");a=replaceAll(a,"?","\\+");a=replaceAll(a,"|","?");a=replaceAll(a,"?","\\|");return a}function replaceAll(e,c,d){var a=e;var b=a.indexOf(c);while(b!=-1){a=a.replace(c,d);b=a.indexOf(c)}return a}function setDivPosition(d){var c=[d.offsetLeft,d.offsetTop];var b;while(d.offsetParent!=null){var a=d.offsetParent;c[0]+=a.offsetLeft-a.scrollLeft-3;b=a.offsetTop-a.scrollTop-55;if(b<0){b=0}c[1]+=b;d=a}return c}function fetchTypeAheadData(a,f,d,g){if(d!="OwnerId"){if(currentConsole=="Incident"){if(d.toLowerCase()==(orgNamespace+"FKBMC_BaseElement__c").toLowerCase()){ciId=d+"_LookUpText"}else{if(d.toLowerCase()==(orgNamespace+"FKBusinessService__c").toLowerCase()){serviceId=d+"_LookUpText"}else{if(d.toLowerCase()==(orgNamespace+"FKServiceOffering__c").toLowerCase()){offeringId=d+"_LookUpText"}else{ciId="";serviceId="";offeringId=""}}}}else{if(currentConsole=="CMDBLISTVIEW"){currentLookupId="LookupIdBtn"+d}}if(f.toLowerCase()==(orgNamespace+"bmc_baseelement__c").toLowerCase()){f="BMC_BaseElement__c"}if(a&&a.value.length==0){var b=a.id;if(b&&b.indexOf("_LookUpText")!=-1){var c=b.replace("LookUpText","LookUpText_lkid");document.getElementById(c).value=""}}else{queryData(a,f,g,"")}}}function hideTypeAheadDiv(b,c){var a=document.getElementById(c+"_LookUpText_lkid");if(a){a.value=""}disableDiv(b)}function getFilterId(b,c,a){b=b.toLowerCase();c=c.toLowerCase();if(b==orgNamespace+"impact__c"||b==orgNamespace+"priority__C"||b==orgNamespace+"urgency__c"||b=="account"||b==orgNamespace+"category__c"){return escape("active_custom")}else{if(b==+orgNamespace+"broadcasts__c"||b==orgNamespace+"task__c"||b==orgNamespace+"incident__c"||b==orgNamespace+"release__c"||b==orgNamespace+"change_request__c"||b==orgNamespace+"problem__c"){return escape("active_custom")+"&addlFilterId=open_custom"}else{if(b==orgNamespace+"status__c"){if(c=="incident__c"){return escape("active_custom")+"&addlFilterId=status_in"}else{if(c=="task__c"){return escape("active_custom")+"&addlFilterId=status_ta"}else{if(c=="problem__c"){return escape("active_custom")+"&addlFilterId=status_pr"}else{if(c=="change_request__c"){return escape("active_custom")+"&addlFilterId=status_cr"}else{if(c=="release__c"){return escape("active_custom")+"&addlFilterId=status_rm"}else{if(c=="broadcasts__c"){return escape("active_custom")+"&addlFilterId=status_br"}}}}}}}else{if(b=="systemplate__c"){return escape("active_custom")+"&addlFilterId="+getObjectCode(FilterObjectName)}else{if(b=="user"){return escape("active_standard")}else{if(b==(orgNamespace+"bmc_baseelement__c").toLowerCase()&&a){a=a.toLowerCase();if(c=="incident__c"){if(a==(orgNamespace+"FKBusinessService__c").toLowerCase()){return escape("active_be_parent")+"&addlFilterId=flat_service"}else{if(a==(orgNamespace+"FKServiceOffering__c").toLowerCase()){return escape("active_be")+"&addlFilterId=flat_offering"}}}else{if(a==(orgNamespace+"fklocation__c").toLowerCase()){return escape("no_filter")+"&citype=location"}else{if(a.toLowerCase()==(orgNamespace+"fkbusinessservice__c").toLowerCase()){return escape("no_filter")+"&citype=subservice"}else{return escape("active_be")}}}}else{return""}}}}}}}function getObjectCode(a){if(a=="incident__c"||a=="incident"){return"temp_in"}else{if(a=="task__c"||a=="task"){return"temp_ta"}else{if(a=="problem__c"||a=="problem"){return"temp_pr"}else{if(a=="change_request__c"||a=="change request"){return"temp_cr"}else{if(a=="release__c"||a=="release"){return"temp_rm"}else{if(a=="broadcast__c"||a=="broadcast"){return"temp_br"}else{if(a=="srm_processtemplate__c"||a=="process template"){return"temp_rd"}}}}}}}}function openLookupPopUP(b,g){var e=FilterObjectName;elemId=b+"_LookUpText";var j=g;var a=parseInt((screen.availWidth/2)-(1000/2));var d=parseInt((screen.availHeight/2)-(600/2));var i=1000;var f=600;var h="width="+i+",height="+f+",status=1,resizable=1,scrollbars=no,left="+a+",top="+d;var c="";if((b.toLowerCase()=="ownerid"||b.toLowerCase()=="fkopenby__c"||b.toLowerCase()=="fkstaff__c")){c="staffusers"}else{c=getFilterId(j,e,b)}if(j.toLowerCase()==(orgNamespace+"bmc_baseelement__c").toLowerCase()){j="BMC_BaseElement__c";if(e.toLowerCase()=="incident__c"){if(b.toLowerCase()==(orgNamespace+"FKBusinessService__c").toLowerCase()){j="BMC_BusinessService__c"}else{if(b.toLowerCase()==(orgNamespace+"FKServiceOffering__c").toLowerCase()){j="BMC_BusinessService__c"}}}}if(b.toLowerCase()=="ownerid"){window.open("/apex/SuggestionPage?parentObjectName="+e+"&fromInciOwnerLkup=true&ownerType=OWNER&isFilterCmp=true","lkpopup",h)}else{if(j&&j.toLowerCase().indexOf("category__c")>-1){popupId="";addlFilterId="active_custom";if(e=="Incident__c"){popupId="incident"}else{if(e=="Change_Request__c"){popupId="changerequest"}else{if(e=="Problem__c"){popupId="problem"}else{if(e=="Task__c"){popupId="task"}else{if(e=="Release__c"){popupId="release"}else{if(e=="Broadcasts__c"){popupId="broadcasts"}}}}}}window.open("/apex/StdLayoutCategoryTree?popupId="+popupId+"&objectName="+e+"&isCalledFromConsole=true&state=true&isCustomLookup=false&serviceRequest="+isServiceRequest+"&stdForm=false&standardLayout=true&frm="+elemId+"&filterId="+c+"&addlFilterId="+addlFilterId,"lkpopup",h)}else{window.open("/apex/SearchAndLink?isFromQV=true&parentName="+e+"&childName="+j+"&isLookUp="+j+"&txt="+elemId+"&filterId="+c,"lkpopup",h)}}}function assignOwnerfieldsForFilter(a,g,c,b){try{var f=document.getElementById(elemId);var e=document.getElementById(elemId+"_lkid");if(a!=null&&a!=""){f.value=g;e.value=a}else{f.value=b;e.value=c}}catch(d){}}function setLookUpField(b,a,c){try{document.getElementById(b).value=c;if(b&&b.indexOf("_LookUpText")!=-1){var f=b.split("_LookUpText");var e=b.replace("LookUpText","LookUpText_lkid");document.getElementById(e).value=a}}catch(d){}}var PrevSelectedOperator;function showSecondCriteria(i,g,a){var b=document.getElementById(g+"_cr2DivId");if(b){var h,f;if(a=="DATE"||a=="DATETIME"){var e=pageElementIdMap[g+"d1"];if(e){h=document.getElementById(e)}var d=pageElementIdMap[g+"d2"];if(d){f=document.getElementById(d)}}else{if(a=="INTEGER"||a=="DOUBLE"||a=="PERCENT"||a=="CURRENCY"){h=document.getElementById(g+"_cr1Id")}}if(i.value=="InRange"){b.style.display="block";var c=document.getElementById(g+"_divErrorMsg2");if(c){c.style.display="block"}if(h){h.setAttribute("placeholder",FromLabel);h.value=""}if(f){f.setAttribute("placeholder",ToLabel);f.value=""}}else{b.style.display="none";var c=document.getElementById(g+"_divErrorMsg2");if(c){c.style.display="none"}if(h){h.setAttribute("placeholder","")}if(f){f.setAttribute("placeholder","")}}if(PrevSelectedOperator&&PrevSelectedOperator=="InRange"){if(h){h.value=""}}PrevSelectedOperator=i.value;var c=document.getElementById(g+"_divErrorMsg");var k=document.getElementById(g+"_divErrorMsg1");var j=document.getElementById(g+"_divErrorMsg2");if(c){RemedyForceHTMLProcessor.clearHTML(c)}if(k){RemedyForceHTMLProcessor.clearHTML(k)}if(j){RemedyForceHTMLProcessor.clearHTML(j)}}}function updateColumnIcon(a){if(currentColElem){var b=a.value;if(b!=""){currentColElem.className=currentColElem.className.replace(/\x-column-header-trigger\b/g,"headertrigger-With-Permanent-Grey-Funnel");currentColElem.className=currentColElem.className.replace(/\rf-column-header-trigger-pressed\b/g,"headertrigger-With-Permanent-Grey-Funnel")}else{currentColElem.className=currentColElem.className.replace(/\headertrigger-With-Permanent-Grey-Funnel\b/g,"x-column-header-trigger")}}}function validateAndApplyFilter(h,a){if(FilterObjectName&&FilterObjectName=="BMC_BaseElement__c"){showWaitMsgBar()}else{if(Ext.getCmp("NorthPanel")!=null&&typeof(Ext.getCmp("NorthPanel"))!="undefined"&&Ext.getCmp("NorthPanel")!="undefined"){ListViewGrid.showWaitMask()}}fltrFldName=h;if(a=="DATE"||a=="DATETIME"){var j=pageElementIdMap[h];var e;if(j){e=document.getElementById(j)}var d=pageElementIdMap[h+"d1"];var c=pageElementIdMap[h+"d2"];var b="";var f="";if(d){var i=document.getElementById(d);b=i.value}if(c){var g=document.getElementById(c);f=g.value}if(e&&((e.value=="InRange"&&(b!=""||f!=""))||(e.value!="InRange"&&b&&b!=null&&b!=""))){validateDateORDateTime(e.value,a,b,f)}else{if(FilterObjectName&&FilterObjectName=="BMC_BaseElement__c"){hideWaitMsgBar()}else{ListViewGrid.hideWaitMask()}ApplyFilter(h,a)}}else{if(FilterObjectName&&FilterObjectName=="BMC_BaseElement__c"){hideWaitMsgBar()}else{ListViewGrid.hideWaitMask()}ApplyFilter(h,a)}}function validationComplete(){var b=document.getElementById(fltrFldName+"_divErrorMsg1");var a=document.getElementById(fltrFldName+"_divErrorMsg2");RemedyForceHTMLProcessor.clearHTML(b);RemedyForceHTMLProcessor.clearHTML(a);if(FilterObjectName&&FilterObjectName=="BMC_BaseElement__c"){hideWaitMsgBar()}else{ListViewGrid.hideWaitMask()}if(dateValidationMsg&&dateValidationMsg!=null&&dateValidationMsg!=""&&dateValidationMsg=="VALID"){ApplyFilter(fltrFldName,fltrType)}else{if(dateValidationMsg&&dateValidationMsg!=null&&dateValidationMsg!=""&&dateValidationMsg=="INVALID RANGE"){a.appendChild(document.createTextNode(startEndValueErrMsg))}else{if(dateValidationMsg&&dateValidationMsg!=null&&dateValidationMsg!=""&&dateValidationMsg!="VALID"){if(dateValidationMsg.indexOf("startDate##")!=-1){b.appendChild(document.createTextNode(lblInvalidDate))}if(dateValidationMsg.indexOf("endDate##")!=-1){a.appendChild(document.createTextNode(lblInvalidDate))}}}}}function ApplyFilter(d,f){var k=true;if(f=="INTEGER"||f=="DOUBLE"||f=="PERCENT"||f=="CURRENCY"){var b=pageElementIdMap[d];var g;var t,r;if(b){g=document.getElementById(b)}var m=document.getElementById(d+"_cr1Id");var j=document.getElementById(d+"_divErrorMsg1");var u=validateData(m,f,j,g);var s=true;t=m.value;if(g&&g.value=="InRange"){var l=document.getElementById(d+"_cr2Id");var i=document.getElementById(d+"_divErrorMsg2");s=validateData(l,f,i,g);r=l.value}if(u&&s){if(g&&g.value=="InRange"&&parseFloat(r)<=parseFloat(t)){RemedyForceHTMLProcessor.clearHTML(i);i.appendChild(document.createTextNode(startEndValueErrMsg));k=false}else{k=true;if(j){RemedyForceHTMLProcessor.clearHTML(j)}if(i){RemedyForceHTMLProcessor.clearHTML(i)}}}else{k=false}}else{if(f=="DATE"||f=="DATETIME"){var b=pageElementIdMap[d];var g;if(b){g=document.getElementById(b)}var j=document.getElementById(d+"_divErrorMsg1");var q=pageElementIdMap[d+"d1"];var u=false;var s=true;if(q){m=document.getElementById(q);u=validateData(m,f,j,g)}if(g&&g.value=="InRange"){var p=pageElementIdMap[d+"d2"];if(p){var l=document.getElementById(p)}var i=document.getElementById(d+"_divErrorMsg2");s=validateData(l,f,i,g)}if(u&&s){k=true;if(j){RemedyForceHTMLProcessor.clearHTML(j)}if(i){RemedyForceHTMLProcessor.clearHTML(i)}}else{k=false}}else{if(f=="STRING"||f=="TEXTAREA"||f=="PHONE"||f=="URL"||f=="EMAIL"){var b=pageElementIdMap[d];var g;if(b){g=document.getElementById(b)}var c=document.getElementById(d+"_divErrorMsg");var o=document.getElementById(d+"_cr1Id");var k=false;k=validateData(o,f,c,g)}else{if(f=="REFERENCE"){var b=pageElementIdMap[d];var g;if(b){g=document.getElementById(b)}var c=document.getElementById(d+"_divErrorMsg");var n=document.getElementById(d+"_LookUpText");var h=document.getElementById(d+"_LookUpText_lkid");if(typeof(FilterJSON[d])!="undefined"&&FilterJSON[d]!=null){var e=FilterJSON[d];if(e){var a=e.displayvalue}}var k=false;if(g&&g.value=="Contains"&&(n.value==null||n.value=="")&&(h.value==null||h.value=="")){RemedyForceHTMLProcessor.clearHTML(c);c.appendChild(document.createTextNode(blankValueErrMsg));k=false}else{k=true;if(c){RemedyForceHTMLProcessor.clearHTML(c)}}}}}}if(k){showAppliedFilterIcon();var v=Ext.get(d+"_Id");if(v&&v.isVisible()){v.hide()}PrepareFilterJSON(d,f);if(FilterObjectName&&FilterObjectName=="BMC_BaseElement__c"){showWaitMsgBar();CMDBManagerNamespace.instance.getInstanceListStore()}else{if(isMultiColumnSortingEnabled){updateUserPrefJson();FilterJSON.saveFilterJSON="true"}GetPageRecords_Remote()}ChangeFilterIcon()}}function PrepareFilterJSON(o,c){var r={};r.type=c;var p,m,d;if(c=="REFERENCE"){var q=pageElementIdMap[o];if(q){var s=document.getElementById(q);if(s){r.operator=s.value}}p=document.getElementById(o+"_LookUpText_lkid");var m=document.getElementById(o+"_LookUpText");if(m&&m.value!=""){if(r.operator=="Contains"||r.operator=="DoesNotContain"){r.value=m.value}else{if(p&&p.value!=""&&p.value!=null&&p.value!="null"){r.value=p.value}else{if(r.operator=="NotEqualTo"){r.operator="DoesNotContain";r.value=m.value}else{r.operator="Contains";r.value=m.value}}}}else{r.value="null";p.value=""}r.displayvalue=m.value}else{if(c=="PICKLIST"){var j=o+"_pickLstChkId";var l=document.getElementsByName(j);r.operator="IN";if(l){var f="";for(var h=0,b=l.length;h<b;h++){if(l[h].checked==true&&l[h].value!="-SEPARATOR-"){if(l[h].value!="NONE"){f+=""+l[h].value+"ф"}else{f+=""+null+"ф"}}}if(f==""){f=""+null+"ф"}var e=f.lastIndexOf("ф");if(e){f=f.substring(0,e);r.value=f}}}else{if(c=="DATE"||c=="DATETIME"){var q=pageElementIdMap[o];if(q){var s=document.getElementById(q);if(s){r.operator=s.value}}var k=pageElementIdMap[o+"d1"];if(k){p=document.getElementById(k);if(typeof(r)!="undefined"&&r!=null&&typeof(r.operator)!="undefined"&&r.operator!=null&&r.operator.toLowerCase()=="inrange"){r.start=p.value}else{r.value=p.value}}var g=pageElementIdMap[o+"d2"];if(g){m=document.getElementById(g);if(m){r.end=m.value}}}else{if(c=="BOOLEAN"){var a=document.getElementById(o+"_booleanChkId");if(a){r.operator="Equals";r.value=a.value}}else{if(c=="INTEGER"||c=="DOUBLE"||c=="PERCENT"||c=="CURRENCY"){var q=pageElementIdMap[o];if(q){var s=document.getElementById(q);if(s){r.operator=s.value}}p=document.getElementById(o+"_cr1Id");if(typeof(r)!="undefined"&&r!=null&&typeof(r.operator)!="undefined"&&r.operator!=null&&r.operator.toLowerCase()=="inrange"){r.start=p.value;m=document.getElementById(o+"_cr2Id");if(m){r.end=m.value}}else{r.value=p.value}}else{p=document.getElementById(o+"_cr1Id");r.value=p.value;var q=pageElementIdMap[o];if(q){var s=document.getElementById(q);if(s){r.operator=s.value}}}}}}}FilterJSON[o]=r}function ClearFilter(b,a){if(typeof(FilterJSON[b])!="undefined"&&FilterJSON[b]!=null){delete FilterJSON[b];if(FilterObjectName&&FilterObjectName=="BMC_BaseElement__c"){showWaitMsgBar();CMDBManagerNamespace.instance.getInstanceListStore()}else{if(isMultiColumnSortingEnabled){FilterJSON.saveFilterJSON="true"}GetPageRecords_Remote()}}removeValuesAndChangeIconsOnClear(b,a);HideActiveFilterComponent();RemoveFilterIcon();ChangeFilterIcon()}function removeValuesAndChangeIconsOnClear(l,p){var m,k;if(p=="REFERENCE"){m=document.getElementById(l+"_LookUpText");k=document.getElementById(l+"_LookUpText_lkid");if(k){k.value=""}}else{if(p=="PICKLIST"){var f=l+"_pickLstChkId";var j=document.getElementsByName(f);if(j){for(var g=0,b=j.length;g<b;g++){j[g].checked=false}}var r=document.getElementById(l+"_apply");if(r){r.disabled=true}}else{if(p=="DATE"||p=="DATETIME"){var h=pageElementIdMap[l+"d1"];if(h){m=document.getElementById(h)}var e=pageElementIdMap[l+"d2"];if(e){k=document.getElementById(e);if(k){k.value=""}}var c=document.getElementById(l+"_cr2DivId");if(c){c.style.display="none"}}else{if(p=="BOOLEAN"){var a=document.getElementById(l+"_booleanChkId");if(a){a.value="all"}}else{if(p=="INTEGER"||p=="DOUBLE"||p=="PERCENT"||p=="CURRENCY"){m=document.getElementById(l+"_cr1Id");k=document.getElementById(l+"_cr2Id");if(k){k.value=""}var c=document.getElementById(l+"_cr2DivId");if(c){c.style.display="none"}}else{m=document.getElementById(l+"_cr1Id")}}}}}if(m){m.value="";m.setAttribute("placeholder","")}var n=pageElementIdMap[l];if(n){operatorEle=document.getElementById(n);if(operatorEle){operatorEle.value="Equals"}}var d=document.getElementById(l+"_divErrorMsg");if(d){RemedyForceHTMLProcessor.clearHTML(d)}var q=document.getElementById(l+"_divErrorMsg1");if(q){RemedyForceHTMLProcessor.clearHTML(q)}var o=document.getElementById(l+"_divErrorMsg2");if(o){RemedyForceHTMLProcessor.clearHTML(o)}}function clearAllActiveFilters(){var c=false;var b=Object.keys(FilterJSON);var a=0;if(typeof(b)!="undefined"&&b!=null&&b.length>0&&typeof(allActiveFilterHeaderIconElements)!="undefined"&&allActiveFilterHeaderIconElements!=null&&allActiveFilterHeaderIconElements.length>0){for(a=0;a<b.length;a++){removeValuesAndChangeIconsOnClear(b[a],FilterJSON[b[a]].type)}FilterJSON={};if(isMultiColumnSortingEnabled&&FilterObjectName&&FilterObjectName!="BMC_BaseElement__c"){FilterJSON.saveFilterJSON="true"}for(a=0;a<allActiveFilterHeaderIconElements.length;a++){if(allActiveFilterHeaderIconElements[a]){allActiveFilterHeaderIconElements[a].className="x-column-header-trigger"}}allActiveFilterHeaderIconElements=[];c=true}return c}function validateData(e,f,c,g){if(f=="INTEGER"||f=="DOUBLE"||f=="CURRENCY"||f=="PERCENT"){var b=new RegExp("^[1-9]*\\d*(\\"+localeDecimalSeparator+"\\d+)?$");var a=new RegExp("^-[1-9]*\\d*(\\"+localeDecimalSeparator+"\\d+)?$");if(((e.value==null||e.value=="")&&!(g.value.toLowerCase()=="notequalto"||g.value.toLowerCase()=="equals"))||(!e.value.match(b)&&!e.value.match(a))){RemedyForceHTMLProcessor.clearHTML(c);c.appendChild(document.createTextNode(numberErrorMsg));return false}if(e&&e.value.length>10){RemedyForceHTMLProcessor.clearHTML(c);var d=FieldLimitExceeded.replace("{0}",10);c.appendChild(document.createTextNode(d));return false}}else{if(f=="DATE"||f=="DATETIME"){if(((e.value==null||e.value=="")&&!(g.value.toLowerCase()=="notequalto"||g.value.toLowerCase()=="equals"))){RemedyForceHTMLProcessor.clearHTML(c);c.appendChild(document.createTextNode(lblInvalidDate));return false}}else{if((f=="STRING"||f=="TEXTAREA"||f=="PHONE"||f=="URL"||f=="EMAIL")&&g.value.toLowerCase()!="notequalto"&&g.value.toLowerCase()!="equals"&&(e.value==null||e.value=="")){RemedyForceHTMLProcessor.clearHTML(c);c.appendChild(document.createTextNode(blankValueErrMsg));return false}}}RemedyForceHTMLProcessor.clearHTML(c);return true}function OnCheckBoxSelect(a,g){var h=g+"_pickLstChkId";var e=document.getElementsByName(h);var d=document.getElementById(g+"_apply");if(a.checked){if(a.value=="all"){if(e){for(var c=0,f=e.length;c<f;c++){if(e[c].value!="-SEPARATOR-"){e[c].checked=true}}}}if(d){d.disabled=false}}else{var b=false;if(a.value=="all"){if(e){for(var c=0,f=e.length;c<f;c++){e[c].checked=false}}b=true}else{if(e){b=true;for(var c=0,f=e.length;c<f;c++){if(e[c].value=="all"){e[c].checked=false}if(e[c].checked==true){b=false}}}}if(b==true){if(d){d.disabled=true}}}}function CancelFilter(){if(ActiveFilterId!=undefined&&ActiveFilterId!=null){var a=Ext.get(ActiveFilterId);if(a&&a.isVisible()){a.hide()}}if(currentColElem){RemovePressedFilterIcon(currentColElem)}}function SetDefaultAsContains(b){var d=dataTypeMap[b];var c=currentColElem.className;if(d&&(d=="STRING"||d=="TEXTAREA")&&c&&c.indexOf("rf-column-header-trigger-pressed")!=-1){var a=pageElementIdMap[b];opEleObj=document.getElementById(a);if(opEleObj){opEleObj.value="Contains"}}}function EnterKeyHandler(c,b,d){c.preventDefault();if(c.keyCode===13){ApplyFilter(b,d)}var a=document.getElementById("datePicker");if((d=="DATE"||d=="DATETIME")&&a){a.style.display="none"}}function showAppliedFilterIcon(){if(currentColElem){currentColElem.className="rf-column-header-trigger-active";allActiveFilterHeaderIconElements.push(currentColElem)}}function RemoveFilterIcon(){var a=currentColElem.className;if(currentColElem){currentColElem.className="x-column-header-trigger"}delete allActiveFilterHeaderIconElements[allActiveFilterHeaderIconElements.indexOf(currentColElem)]}function showPressedFilterIcon(a){var b=a.className;if(a){if(b=="x-column-header-trigger"){a.className="rf-column-header-trigger-pressed"}if(b=="rf-column-header-trigger-active"){a.className="rf-column-header-trigger-active-pressed"}if(ActiveFilterId){PopulateExistingFilter(ActiveFilterId)}}}function RemovePressedFilterIcon(a){var b=a.className;if(a){if(b=="rf-column-header-trigger-pressed"){a.className="x-column-header-trigger"}if(b=="rf-column-header-trigger-active-pressed"){a.className="rf-column-header-trigger-active"}}}function HeaderTriggerClickHandler(c,b,g,j,h){var k=b.dataIndex;ActiveFilterId=k+"_Id";ActiveDataIndex=b.getIndex();if(ActiveFilterId.indexOf("__r.")!=-1){var d=ActiveFilterId.indexOf("__r.");ActiveFilterId=ActiveFilterId.substring(0,d)+"__c_Id"}else{if(ActiveFilterId.indexOf("Owner.Name")!=-1){var d=ActiveFilterId.indexOf(".Name");ActiveFilterId=ActiveFilterId.substring(0,d)+"Id_Id"}else{if(ActiveFilterId.indexOf("LastModifiedBy.Name")!=-1){var d=ActiveFilterId.indexOf(".Name");ActiveFilterId=ActiveFilterId.substring(0,d)+"Id_Id"}else{if(ActiveFilterId.indexOf("CreatedBy.Name")!=-1){var d=ActiveFilterId.indexOf(".Name");ActiveFilterId=ActiveFilterId.substring(0,d)+"Id_Id"}}}}var a=Ext.fly(ActiveFilterId);if(!a){k=orgNamespace+b.dataIndex;ActiveFilterId=k+"_Id";a=Ext.fly(ActiveFilterId)}currentColElem=g.target;showPressedFilterIcon(currentColElem);var i=Ext.getCmp("listViewGridPanelId");var f=c.getColumnCount(true);if(a){AlignFilterPanel(j,g,a,ActiveFilterId);if(typeof SetDefaultAsContains=="function"){SetDefaultAsContains(k)}if(!a.isVisible()){a.show()}}return false}function AlignFilterPanel(b,f,h,g){var d=0;var a=document.getElementById(g);if(ActiveDataIndex<6){var c=f.getX();if(c&&c<285){if(a){a.className="rf-filter-col-popup-toggle"}h.alignTo(b)}else{if(a){a.className="rf-filter-col-popup"}h.alignTo(b,"tr-br",[17,0])}}else{if(a){a.className="rf-filter-col-popup"}h.alignTo(b,"tr-br",[17,0])}return false}function PopulateExistingFilter(F){if(F){var k=F.indexOf("_Id");var e=F.substring(0,k);var g=FilterJSON[e];if(g){var l=g.type;var p=g.operator;var n=g.value;var a=g.displayvalue;var w,v,m,q;var C=pageElementIdMap[e];if(C){q=document.getElementById(C);if(q){q.value=p;PrevSelectedOperator=p}}if(l=="REFERENCE"){w=document.getElementById(e+"_LookUpText_lkid");var v=document.getElementById(e+"_LookUpText");if(p=="Contains"||p=="DoesNotContain"){if(n&&n!=""&&n!="null"){v.value=n}else{v.value=""}}else{if(w&&n!=""&&n!="null"){w.value=n}if(v){v.value=a}}}else{if(l=="PICKLIST"){var b=e+"_pickLstChkId";var s=document.getElementsByName(b);var d=n.split("ф");var u=d.toString();var B=false;if(s){for(var A=0;A<s.length;A++){for(var z=0;z<d.length;z++){var t=d[z];if(t==null||t=="null"){t="NONE"}if(s[A].value!="-SEPARATOR-"&&s[A].value==t){s[A].checked=true;B=true;break}else{if(u&&u.indexOf(s[A].value)==-1){s[A].checked=false}}}}if(B){var h=document.getElementById(e+"_apply");if(h){h.disabled=false}}}}else{if(l=="DATE"||l=="DATETIME"){var E=pageElementIdMap[e+"d1"];if(E){w=document.getElementById(E)}var D=pageElementIdMap[e+"d2"];if(D){v=document.getElementById(D)}var y=document.getElementById(e+"_cr2DivId");if(p&&p.toLowerCase()=="inrange"){var G=g.start;var x=g.end;w.value=G;v.value=x;if(y){y.style.display="block"}}else{w.value=n;w.setAttribute("placeholder","");if(y){y.style.display="none"}}}else{if(l=="BOOLEAN"){var f=document.getElementById(e+"_booleanChkId");if(f){f.value=n}}else{if(l=="INTEGER"||l=="DOUBLE"||l=="PERCENT"||l=="CURRENCY"){w=document.getElementById(e+"_cr1Id");var y=document.getElementById(e+"_cr2DivId");if(p&&p.toLowerCase()=="inrange"){v=document.getElementById(e+"_cr2Id");var G=g.start;var x=g.end;w.value=G;v.value=x;if(y){y.style.display="block"}}else{w.value=n;w.setAttribute("placeholder","");if(y){y.style.display="none"}}}else{w=document.getElementById(e+"_cr1Id");w.value=n}}}}}}var c=document.getElementById(e+"_divErrorMsg");var r=document.getElementById(e+"_divErrorMsg1");var o=document.getElementById(e+"_divErrorMsg2");if(c){RemedyForceHTMLProcessor.clearHTML(c)}if(r){RemedyForceHTMLProcessor.clearHTML(r)}if(o){RemedyForceHTMLProcessor.clearHTML(o)}}}function ChangeFilterIcon(){var b=Object.keys(FilterJSON);var c=Ext.getCmp("clearallfilter");var a=document.getElementById("clearallfilter");if(typeof(b)!="undefined"&&b!=null&&(b.length==0||(isMultiColumnSortingEnabled&&b[0]=="saveFilterJSON"))){if(c){c.setDisabled(true);c.setTooltip(_ServerLabels.HasNoFilters);a.style.opacity="0.5"}}else{if(c){c.setDisabled(false);c.setTooltip(_ServerLabels.ClearFilters);a.style.opacity="1"}}}function applyStoredFilters(){for(var c=0;c<ListViewGrid.headerCt.items.length;c++){if(ListViewGrid.headerCt.items.get(c)){var a="";if(ListViewGrid.headerCt.items.get(c).dataIndex.indexOf("__r.")!=-1){var b=ListViewGrid.headerCt.items.get(c).dataIndex.indexOf("__r.");a=ListViewGrid.headerCt.items.get(c).dataIndex.substring(0,b)+"__c"}else{a=ListViewGrid.headerCt.items.get(c).dataIndex}if(FilterJSON[a]){currentColElem=ListViewGrid.headerCt.items.get(c).triggerEl.dom;showAppliedFilterIcon()}}}ChangeFilterIcon()};