var isCollapsed=true;var numberOfCriterias=0;var selectFilterCombo;var changeStore;var fieldCombo;var popUpWindow,PicklistReloadInterval;var NewFilterName="";var waitMask;var oncompleteVar,inputHidden;var onCompleteFunction;var DeletedRowArray="$";var ToolTipString="";var FromApply=false;var referencedObjName;var tableLenght=0;var isI8=false;var isDataChanged=false;var operandSelected="";var staffId="";var queueId="";Ext.onReady(function(){document.cookie="tempReleaseCookie"+loggedInuserId+"cs=;path=/;SameSite=None;Secure";document.cookie="tempRequestCookie"+loggedInuserId+"cs=;path=/;SameSite=None;Secure";isI8=Ext.isIE8;waitMask=new Ext.LoadMask(Ext.getBody(),{msg:waitMsg});Ext.define("MappingModel",{extend:"Ext.data.Model",fields:[{name:"Id",type:"string"},{name:"name",type:"string"}]});var a=Ext.create("Ext.data.Store",{model:"MappingModel",data:selectedFilterStore,proxy:{type:"memory",reader:{idProperty:"Id",type:"json",root:"attributes"}}});selectFilterCombo=Ext.create("Ext.form.ComboBox",{store:a,id:"selectedFilter",typeAhead:true,queryMode:"local",editable:false,displayField:"name",valueField:"name",value:changeLabel,fieldLabel:SelFilterLabel,width:300,renderTo:"SelectedFilterDiv",listConfig:{getInnerTpl:function(){return'<div id="ListName-{Id}" title="{name}" style="width:90%;" Class="ElipseCls">{name}</div>'}},listeners:{select:function(k,e,f){isDataChanged=false;selectedFilterName=Ext.getCmp("selectedFilter").getValue();selectedFilterName=decodeValue(selectedFilterName);k.setValue(selectedFilterName);DeletedRowArray="$";ConditionLimit=ServerConditionLimit;changedJsonConditionString=CollectCriterionData();ClearTable();var h=document.getElementById("ApplyBtnId");if(selectedFilterName==releaseLabel){numberOfCriterias=0;operandSelected="";changeStore=fieldsStoreData;fieldsStoreData=releaseFieldsStoreData;if(changedJsonConditionString!=null&&changedJsonConditionString!=""){document.cookie="tempRequestCookie"+loggedInuserId+"cs="+Ext.encode(changedJsonConditionString)+";path=/;SameSite=None;Secure"}var g=Ext.util.Cookies.get("tempReleaseCookie"+loggedInuserId+"cs");if(g&&g.length==2){g=g.replace('""',"")}if(g!=null&&g!=""){populateselectedCriteria(g)}else{h.disabled=true;h.className="rf-disabled";LoadExistingData()}}else{numberOfCriterias=0;operandSelected="";fieldsStoreData=changeStore;if(changedJsonConditionString!=null&&changedJsonConditionString!=""){document.cookie="tempReleaseCookie"+loggedInuserId+"cs="+Ext.encode(changedJsonConditionString)+";path=/;SameSite=None;Secure"}var d=Ext.util.Cookies.get("tempRequestCookie"+loggedInuserId+"cs");if(d&&d.length==2){d=d.replace('""',"")}if(d!=null&&d!=""){populateselectedCriteria(d)}else{h.disabled=true;h.className="rf-disabled";LoadExistingData()}}results=""},}});var c=Ext.util.Cookies.get("apex__filterQueryChange");var b=Ext.util.Cookies.get("apex__filterQueryRelease");if(c&&c.length==2){c=c.replace('""',"")}if(b&&b.length==2){b=b.replace('""',"")}changeStore=fieldsStoreData;if(c!=null&&c!=""){Ext.getCmp("selectedFilter").setValue(changeLabel);fieldsStoreData=changeStore}else{if(b!=null&&b!=""){Ext.getCmp("selectedFilter").setValue(releaseLabel);fieldsStoreData=releaseFieldsStoreData}}compStore.text=[["=","="],["!=","!="],["LIKE","'"+like+"'"],["NOT LIKE","'"+notlike+"'"],["STARTS WITH","'"+startWith+"'"]];compStore.phone=[["=","="],["!=","!="]];compStore.currency=[["=","="],["!=","!="],[">",">"],[">=",">="],["<","<"],["<=","<="]];compStore.percent=[[">",">"],[">=",">="],["=","="],["!=","!="],["<","<"],["<=","<="]];compStore.number=[[">",">"],[">=",">="],["=","="],["!=","!="],["<","<"],["<=","<="]];compStore.booleanVar=[["=","="],["!=","!="]];compStore.email=[["=","="],["!=","!="],["LIKE","'"+like+"'"],["NOT LIKE","'"+notlike+"'"],["STARTS WITH","'"+startWith+"'"]];compStore.reference=[["=","="],["!=","!="]];compStore.dateTime=[[">",">"],[">=",">="],["=","="],["!=","!="],["<","<"],["<=","<="]];compStore.textArea=[["LIKE","'"+like+"'"],["NOT LIKE","'"+notlike+"'"],["STARTS WITH","'"+startWith+"'"]];compStore.picklist=[["=","="],["!=","!="]];compStore.none=[];LoadExistingData()});function decodeValue(a){var b=["&amp;","&lt;","&gt;","&quot;","&#39;","&nbsp;"];var c=["&","<",">",'"',"'"," "];if(a==null||a.length==0){return a}for(i=0;i<b.length;i++){i=i++;a=replaceAll(a,b[i],c[i])}return a}function escSpeChars(a){a=replaceAll(a,"\\","?");a=replaceAll(a,"?","\\");a=replaceAll(a,"?","?");a=replaceAll(a,"?","\\?");a=replaceAll(a,"^","?");a=replaceAll(a,"?","\\^");a=replaceAll(a,"$","?");a=replaceAll(a,"?","\\$");a=replaceAll(a,"(","?");a=replaceAll(a,"?","\\(");a=replaceAll(a,")","?");a=replaceAll(a,"?","\\)");a=replaceAll(a,"[","?");a=replaceAll(a,"?","\\[");a=replaceAll(a,"]","?");a=replaceAll(a,"?","\\]");a=replaceAll(a,"{","?");a=replaceAll(a,"?","\\}");a=replaceAll(a,"*","?");a=replaceAll(a,"?","\\*");a=replaceAll(a,"+","?");a=replaceAll(a,"?","\\+");a=replaceAll(a,"|","?");a=replaceAll(a,"?","\\|");return a}function replaceAll(e,c,d){var a=e;var b=a.indexOf(c);while(b!=-1){a=a.replace(c,d);b=a.indexOf(c)}return a}function ShowHideAddLink(a){var b=document.getElementById("AddLink");if(a){if(typeof(b)!="undefined"&&b!=null){b.setAttribute("style","visibility:visible;height:10px;")}}else{if(typeof(b)!="undefined"&&b!=null){b.setAttribute("style","visibility:hidden;")}}}function setComparisonOperatorStore(b,d){var c="operatorId"+d;var a=Ext.getCmp(c);if(b=="reference"){a.store.loadData(compStore.reference)}else{if(b=="datetime"){a.store.loadData(compStore.dateTime)}else{if(b=="date"){a.store.loadData(compStore.dateTime)}else{if(b=="textarea"){a.store.loadData(compStore.textArea)}else{if(b=="text"){a.store.loadData(compStore.text)}else{if(b=="phone"){a.store.loadData(compStore.phone)}else{if(b=="currency"){a.store.loadData(compStore.currency)}else{if(b=="percent"){a.store.loadData(compStore.percent)}else{if(b=="number"){a.store.loadData(compStore.number)}else{if(b=="boolean"){a.store.loadData(compStore.booleanVar)}else{if(b=="email"){a.store.loadData(compStore.email)}else{if(b=="picklist"){a.store.loadData(compStore.picklist)}}}}}}}}}}}}a.reset()}function AddRow(o){var u=document.getElementById("FilterCriteria");rowCount=tableLenght;numberOfCriterias++;if(rowCount<ConditionLimit){rowCount=rowCount+1;window.parent.resizeFilterWindow(numberOfCriterias);var w=document.createElement("TR");w.setAttribute("id","RowId"+rowCount);u.appendChild(w);var q=document.createElement("TD");q.setAttribute("valign","top");q.setAttribute("style","width:10%");w.appendChild(q);var l=document.createElement("div");l.id="ANDDivId"+rowCount;if(rowCount>1){var t=document.createTextNode(ANDLabel);l.className="AndDivCls ";l.appendChild(t)}else{var s=document.createTextNode(ForLabel);l.setAttribute("style","padding: 6px 3px 3px 3px;");l.appendChild(s)}q.appendChild(l);var h=document.createElement("TD");h.setAttribute("valign","top");h.setAttribute("style","width:20%");w.appendChild(h);var g=document.createElement("div");g.setAttribute("style","padding:3px;");var k="FieldDivOfRow"+rowCount;g.id=k;h.appendChild(g);var b=document.createElement("TD");b.setAttribute("valign","top");b.setAttribute("style","width:20%");w.appendChild(b);var f=document.createElement("div");f.setAttribute("style","padding:3px;");var r="OperatorDivOfRow"+rowCount;f.id=r;b.appendChild(f);var c=createFieldCombox(rowCount);c.render(g);var v=createcomparisonOperator(rowCount);v.render(f);var p=document.createElement("TD");p.setAttribute("valign","top");p.setAttribute("style","width:27%");w.appendChild(p);var a=document.createElement("div");a.setAttribute("style","padding:3px;");var d="OperandDivOfRow"+rowCount;a.id=d;p.appendChild(a);LoadDefaultField(rowCount);var e=document.createElement("TD");e.setAttribute("style","width:7%");e.setAttribute("valign","middle");w.appendChild(e);if(rowCount>1){var n=document.createElement("INPUT");n.type="BUTTON";n.id=rowCount;n.className="rowDltIcon ";n.title=DeleteRowLabel;n.setAttribute("onclick","DeleteThisRow(this.id);");e.appendChild(n)}tableLenght=tableLenght+1}if(rowCount>=ConditionLimit){ShowHideAddLink(false)}if(o){var m=document.getElementById("filterDiv");m.scrollTop=m.scrollHeight}}function createFieldCombox(a){var b=Ext.create("Ext.data.Store",{fields:["Name","Label","Type","SupportData","DefaultValue"],sorters:[{property:"Label",direction:"ASC"}],data:fieldsStoreData});fieldCombo=Ext.create("Ext.form.field.ComboBox",{store:b,editable:true,typeAhead:true,emptyText:labelField,queryMode:"local",displayField:"Label",forceSelection:true,valueField:"Name",id:"fieldsId"+a,disabledCls:"disabledComboTestCls",width:200,listeners:{select:function(f,e,d){if(isCollapsed==false){parent.setWinSize();isCollapsed=true}document.getElementById("ApplyBtnId").disabled=false;document.getElementById("ApplyBtnId").className="rf-btn";var c=e[0].get("Type");setComparisonOperatorStore(c.toLowerCase(),a);ShowMatchingField(e[0].get("Name"),e[0].get("Label"),e[0].get("Type"),a,e[0].get("SupportData"),e[0].get("DefaultValue"),true);isDataChanged=true;if(typeof(document.getElementById("autocompleteDiv"))!="undefined"){document.getElementById("autocompleteDiv").style.visibility="hidden"}}}});return fieldCombo}function createcomparisonOperator(a){comparisonOperator=Ext.create("Ext.form.field.ComboBox",{store:compStore.none,queryMode:"local",valueField:"comOpeValue",displayField:"comOpeName",editable:false,minWidth:105,maxWidth:130,listWidth:85,disabledCls:"disabledComboTestCls",selectOnFocus:true,height:13,id:"operatorId"+a,emptyText:labelOperator,listeners:{select:function(d,c,b){document.getElementById("ApplyBtnId").disabled=false;document.getElementById("ApplyBtnId").className="rf-btn";isDataChanged=true}}});return comparisonOperator}function LoadDefaultField(b){var a=new Ext.form.TextField({name:"txt-name",id:"Default"+b,cls:"defaultBox",readOnly:true});a.render("OperandDivOfRow"+b)}function ShowMatchingField(APIName,Label,type,rowNum,SupportingData,DefaultValue,LoadingNewRow){SupportingData=window.parent.RemedyForceHTMLProcessor.htmlDecoder(SupportingData);var OperandDivs=document.getElementById("OperandDivOfRow"+rowNum);while(OperandDivs.hasChildNodes()){OperandDivs.removeChild(OperandDivs.lastChild)}if(type=="text"||type=="phone"||type=="currency"||type=="percent"||type=="email"||type=="number"){var textF=new Ext.form.TextField({name:"txt-name",id:"TextField"+rowNum,listeners:{keyup:function(val,e,eOpts){isDataChanged=true}}});textF.render("OperandDivOfRow"+rowNum);Ext.getCmp("TextField"+rowNum).setValue(operandSelected);operandSelected=""}else{if(type=="textarea"){var input=document.createElement("TEXTAREA");input.setAttribute("name","post");input.setAttribute("maxlength",255);input.setAttribute("rows",1);input.setAttribute("style","height:21px;width:99%;resize:none");input.setAttribute("id","TextAreaField"+rowNum);input.setAttribute("onchange","isDataChanged = true;");var MainDiv=document.getElementById("OperandDivOfRow"+rowNum);MainDiv.appendChild(input);document.getElementById("TextAreaField"+rowNum).value=operandSelected;operandSelected=""}else{if(type=="reference"||type=="reference1"){APINameOfSelectedField=APIName;oncompleteVar="LookUpText"+rowNum;inputHidden="inputHidden"+rowNum;var MainDiv=document.getElementById("OperandDivOfRow"+rowNum);var inputHiddentTxt=document.createElement("input");inputHiddentTxt.setAttribute("id",inputHidden);inputHiddentTxt.setAttribute("style","display:none;");MainDiv.appendChild(inputHiddentTxt);var LookUpText=document.createElement("input");LookUpText.setAttribute("style","height:21px;width:82%");LookUpText.setAttribute("id","LookUpText"+rowNum);LookUpText.setAttribute("onchange","isDataChanged = true;");LookUpText.setAttribute("autocomplete","off");MainDiv.appendChild(LookUpText);var LookUpIcon=document.createElement("button");var LookUpIcon=document.createElement("input");LookUpIcon.setAttribute("class","filterLookupIconOn");LookUpIcon.setAttribute("type","button");LookUpIcon.setAttribute("id","LookUpIcon"+rowNum);MainDiv.appendChild(LookUpIcon);if(!LoadingNewRow){var combo=Ext.getCmp("fieldsId"+rowNum);var record=combo.getStore().findRecord("Name",APINameOfSelectedField);SupportingData=record.data.SupportData}referencedObjName=SupportingData;LookUpText.setAttribute("onkeyup","queryData(this,'"+referencedObjName+"', event, '');");LookUpIcon.setAttribute("onclick","isDataChanged = true;openLookup('"+referencedObjName+"','"+APINameOfSelectedField+"','"+oncompleteVar+"');");if(operandSelected!=null&&operandSelected!=""){operandSelected=operandSelected.split(PE);if(operandSelected.length>0){if(typeof(operandSelected[0])!="undefined"){document.getElementById("inputHidden"+rowNum).value=operandSelected[0]}if(typeof(operandSelected[1])!="undefined"){document.getElementById("LookUpText"+rowNum).value=operandSelected[1]}}}operandSelected=""}else{if(type=="datetime"||type=="date"){isCollapsed=true;var datePanel=Ext.create("Ext.toolbar.Toolbar",{width:151,items:[{xtype:"datefield",id:"DateFieldId"+rowNum,height:18,anchor:"80%",name:"from_date",format:SDEDateFormat,altFormats:"m,d,Y|m.d.Y",editable:false,listeners:{select:function(){if(this.getValue()!=""){parent.setWinSize();isCollapsed=true}},change:function(val,newValue,oldValue,eOpts){isDataChanged=true}}}]});datePanel.render("OperandDivOfRow"+rowNum);datePanel.getEl().on("click",function(){if(isCollapsed){parent.resizeFilterWindow(0);isCollapsed=false}else{if(isCollapsed==false){parent.setWinSize();isCollapsed=true}}});if(Ext.getCmp("DateFieldId"+rowNum).getValue(operandSelected)==""&&isCollapsed==false){parent.setWinSize();isCollapsed=true}Ext.getCmp("DateFieldId"+rowNum).setValue(operandSelected);operandSelected=""}else{if(type=="boolean"||type=="picklist"){APINameOfSelectedField=APIName;var picklistStr=[];if(type=="picklist"){if(!LoadingNewRow){var combo=Ext.getCmp("fieldsId"+rowNum);var record=combo.getStore().findRecord("Name",APINameOfSelectedField);SupportingData=record.data.SupportData;DefaultValue=record.data.DefaultValue}picklistStr=eval(SupportingData)}else{if(type=="boolean"){picklistStr=[{Label:noLbl,Value:"NO"},{Label:yesLbl,Value:"YES"}];DefaultValue=noLbl}}PicklistfieldStore=Ext.create("Ext.data.Store",{fields:["Label","Value"],data:picklistStr});var pickListComboBx=Ext.create("Ext.form.field.ComboBox",{id:"pickListFieldCombo"+rowNum,queryMode:"local",store:PicklistfieldStore,valueField:"Value",displayField:"Label",forceSelection:true,editable:true,listWidth:165,tpl:'<tpl for="." ><div class="x-boundlist-item">{[Ext.util.Format.htmlEncode(values.Label)]}</div></tpl>',listeners:{render:function(combo,eOpts){combo.setRawValue(DefaultValue)}}});pickListComboBx.render("OperandDivOfRow"+rowNum);Ext.getCmp("pickListFieldCombo"+rowNum).setValue(operandSelected);operandSelected=""}}}}}}function openLookup(m,e,l){var b="";var a=parseInt((screen.availWidth/2)-(1000/2));var g=parseInt((screen.availHeight/2)-(600/2));if(m.toLowerCase()==("BusinessHours").toLowerCase()){b="/apex/SearchPage?moduleId="+orgNamespace+"service_hours__c&InstanceID=&isLookup=true&popupId=null&moduleName=BMC_BASEELEMENT__c&isFromSearchFilter=true";window.open(b,"lookup","status = 1,height =600, width = 1000,left= "+a+",top="+g+", resizable = 0,scrollbars=no")}else{var f="";var c="";oncompleteVar=l;b="SearchAndLink?txt=customLookup&parentName=BMC_BaseElement__c&childName="+m+"&isLookUp="+m+"&filterId=";if(m.toLowerCase()==("BMC_BaseElement__c").toLowerCase()){f="active_be";if(e.toLowerCase()==(orgNamespace+"fkbusinessservice__c").toLowerCase()){f="no_filter&citype=subservice";c=getUrlParameter("InstanceID")}if(e.toLowerCase()==(orgNamespace+"fklocation__c").toLowerCase()){f="no_filter&citype=location";c=getUrlParameter("InstanceID")}}if(m.toLowerCase()=="Model__c".toLowerCase()){f="active_custom&className="+encodeURI(classNameValue)}if(m.toLowerCase()=="User".toLowerCase()){f="active_standard"}var h;var d=document.getElementById(l);if(typeof(d)!="undefined"&&d!=null){h=encodeURIComponent(d.value);h=h.trim();if(h!=""&&h.length<2){Ext.MessageBox.show({msg:searchErrorMsg,buttons:Ext.MessageBox.OK});return}}b+=f+"&param1="+c+"&searchLookUpStr="+h+"&isCustomLookup=false&idValstr=";var k="";lkpApiName=e;if(e=="PRIMARYCLIENT__C"||(!e.match("^primaryclient__c")&&e.match("primaryclient__c$"))){window.open(b,"lookup","status = 1,height =600, width = 1000 resizable = 0,scrollbars=no")}else{window.open(b,"lookup","status = 1,height =600, width = 1000, resizable = 0,scrollbars=no")}}}function getUrlParameter(d){d=d.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c="[\\?&]"+d+"=([^&#]*)";var b=new RegExp(c);var a=b.exec(window.location.href);if(a==null){return""}else{return a[1]}}function clientfields(d,a){var b=document.getElementById(oncompleteVar);if(b!=null&&typeof(b)!="undefined"){b.value=a;var c=document.getElementById(inputHidden);if(c!=null&&typeof(c)!="undefined"){c.value=d}}isDataChanged=true}function ClearfieldofRow(k){var f=Ext.getCmp("fieldsId"+k);var e=Ext.getCmp("operatorId"+k);if(k!=1){if(f!=null&&f!=undefined&&f!="undefined"){f.setValue("")}if(e!=null&&e!=undefined&&e!="undefined"){e.setValue("")}var a=Ext.getCmp("TextField"+k);var g=document.getElementById("TextAreaField"+k);var h=Ext.getCmp("DateFieldId"+k);var b=document.getElementById("LookUpText"+k);var c=Ext.getCmp("pickListFieldCombo"+k);if(a!=null&&a!="undefined"&&a!=undefined){a.setValue("")}else{if(h!=null&&h!="undefined"&&h!=undefined){h.setValue("")}else{if(g!=null&&g!="undefined"&&g!=undefined){g.value=""}else{if(b!=null&&b!="undefined"&&b!=undefined){b.value=""}else{if(c!=null&&c!="undefined"&&c!=undefined){c.setValue("")}}}}}}else{if(classNameValue.toLowerCase()==("BMC_BaseElement").toLowerCase()){var d=Ext.getCmp("pickListFieldCombo1");if(d==null||typeof(d)=="undefined"||d==undefined){d=Ext.getCmp("pickListFieldCombo1")}if(d!=null&&d!="undefined"&&d!=undefined){d.setValue(classNameValue)}}}}function CancelFilter(){window.parent.filterWindowOpened=false;window.parent.AdvancedFilterPopUp.close()}function Validate(){var k=document.getElementById("FilterCriteria");var b=tableLenght;var g;for(rowCount=1;rowCount<=b;rowCount++){if(DeletedRowArray.indexOf("$"+rowCount+"$")==-1){var a=Ext.getCmp("fieldsId"+rowCount);var e=Ext.getCmp("operatorId"+rowCount);if((a.getValue()!=null&&a.getValue()!=undefined&&a.getValue()!="")&&(e.getValue()!=""&&e.getValue()!=null&&e.getValue()!=undefined)){g=""}else{if((a.getValue()==null||a.getValue()==undefined||a.getValue()=="")&&(e.getValue()==""||e.getValue()==null||e.getValue()==undefined)){g=""}else{g=SpecifyOperatorMsg;break}}}}if(g==""&&!FromApply){var h=document.getElementById("NewFilterNameId");var d=Ext.getCmp("FilterNameTextId");var f="";var c="";if(h!=null&&h!=undefined&&h.value!=null){f=h.value}if(d!=null&&d!=undefined&&d.value!=null){c=d.getValue()}f=f.trim();c=c.trim();if(f==""&&c==""){g=filterNameRequired}else{if(f.length>80||c.length>80){g=nameLengthValidation}}}return g}function Apply(){FromApply=true;var b=Validate();if(b!=""){Ext.Msg.show({msg:b,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}else{selectedFilterName=Ext.getCmp("selectedFilter").getValue();JsonConditionString=CollectCriterionData();var a="";if(JsonConditionString!=null&&JsonConditionString!=""){document.cookie=selectedFilterName+loggedInuserId+"="+Ext.encode(JsonConditionString)+";path=/;SameSite=None;Secure";if(selectedFilterName==releaseLabel){document.cookie=changeLabel+loggedInuserId+"=;path=/;SameSite=None;Secure";a=releaseLabel}else{document.cookie=releaseLabel+loggedInuserId+"=;path=/;SameSite=None;Secure";a=changeLabel}}document.cookie="tempRequestCookie"+loggedInuserId+"cs=;path=/;SameSite=None;Secure";document.cookie="tempReleaseCookie"+loggedInuserId+"cs=;path=/;SameSite=None;Secure";document.cookie="FilterTooltip"+loggedInuserId+"cs="+a+": "+ToolTipString+";path=/;SameSite=None;Secure";parent.applyFilter(selectedFilterName,JsonConditionString)}}function ReloadFilterNameStore(){var selectedFilter=Ext.getCmp("selectedFilter").getStore();selectedFilter.removeAll();selectedFilterStore=eval(selectedFilterStore);selectedFilter.loadData(selectedFilterStore);if(NewFilterName!=""){selectedFilterName=NewFilterName;NewFilterName=""}else{if(AppliedFilterName!="undefined"&&AppliedFilterName!=null&&AppliedFilterName!=""){selectedFilterName=AppliedFilterName}}var SelectCombo=Ext.getCmp("selectedFilter");if(selectedFilterName!=""&&selectedFilterName.toLowerCase()!=("SystemGeneratedRecord_"+userId).toLowerCase()){SelectCombo.setValue(selectedFilterName)}else{SelectCombo.setValue("");SelectCombo.setRawValue(NoneLabel)}}function resetFilter(){selectedFilterName="";AppliedFilterName="";results="";document.getElementById("ApplyBtnId").disabled=true;document.getElementById("ApplyBtnId").className="rf-disabled";LoadExistingData();parent.resizeFilterWindow(1);numberOfCriterias=1}function CollectCriterionData(){var q=document.getElementById("FilterCriteria");var g=tableLenght;var m="";var h=1;ToolTipString="";for(rowCount=1;rowCount<=g;rowCount++){if(DeletedRowArray.indexOf("$"+rowCount+"$")==-1){var c=Ext.getCmp("fieldsId"+rowCount);var k=Ext.getCmp("operatorId"+rowCount);var d=Ext.getCmp("TextField"+rowCount);var n=document.getElementById("TextAreaField"+rowCount);var p=Ext.getCmp("DateFieldId"+rowCount);var f=document.getElementById("LookUpText"+rowCount);var e=Ext.getCmp("pickListFieldCombo"+rowCount);var o,b;if(c!=null&&c.getValue()!=null&&k!=null&&k.getValue()){var a;if(ToolTipString!=""){ToolTipString+=" "+ANDLabel+" "}a=c.getValue();m+=+h+CellSeperator+a+CellSeperator+k.getValue();ToolTipString+=c.getRawValue()+" "+k.getRawValue();if(d!=""&&d!=null&&typeof(d)!=undefined){o=d.getValue();m+=CellSeperator+o}else{if(n!=""&&n!=null&&typeof(n)!=undefined){o=n.value;m+=CellSeperator+o}else{if(f!=""&&f!=null&&typeof(f)!=undefined){var l=document.getElementById("inputHidden"+rowCount);if(l!=null&&typeof(l)!="undefined"){o=f.value;if(o!=""){m+=CellSeperator+l.value+PE+o}}}else{if(e!=""&&e!=null&&typeof(e)!=undefined){o=e.getValue();b=e.getRawValue();m+=CellSeperator+o}else{if(p!=""&&p!=null&&typeof(p)!=undefined){if(p.getValue()!=null&&p.getValue()!=""){o=Ext.Date.format(new Date(p.getValue()),SDEDateFormat)}else{o=""}m+=CellSeperator+o}}}}}if(o!=""){if(b!=null&&b!=""){ToolTipString+="  "+b+" "}else{ToolTipString+="  "+o+" "}b=""}else{ToolTipString+=" ' ' "}m=m+RowSeperator;h++}}}return m}function escapeSingleQuote(a){if(a){return a.replace(/'/g,"\\'")}else{return""}}function LoadExistingData(){if(AppliedFilterName!="undefined"&&AppliedFilterName!=null&&AppliedFilterName!=""){selectedFilterName=AppliedFilterName;AppliedFilterName=""}selectedObject=Ext.getCmp("selectedFilter").getValue();var a=Ext.util.Cookies.get(selectedObject+loggedInuserId);if(a&&a.length==2){a=a.replace('""',"")}if(a!=null&&a!=""){operandSelected="";populateselectedCriteria(a)}else{operandSelected="";ClearTable();AddRow(false);ShowHideAddLink(true)}}function populateselectedCriteria(g){ClearTable();var h=[];var m=Ext.decode(g);h=m.split(RowSeperator);var k;var d;if(h.length<=0){var f=document.getElementById("ApplyBtnId");f.disabled=true;f.className="rf-disabled"}for(var b=0;b<h.length-1;b++){AddRow(false);col=h[b].split(CellSeperator);for(j=0;j<col.length;j++){k=col[1];d=col[2];operandSelected=col[3]}var l=b+1;var e=Ext.getCmp("fieldsId"+l);var a=k;e.select(a);var c=e.getStore().findRecord("Name",a);e.fireEvent("select",e,[c]);Ext.getCmp("operatorId"+l).setValue(d)}}function ClearTable(){if(isI8){ClearTableForI8()}else{var d=document.getElementById("FilterCriteria");rowCount=d.rows.length;if(typeof(d)!="undefined"&&d!=null){for(var b=0;b<rowCount;b++){d.deleteRow(0);var a=b+1;var e=Ext.getCmp("TextField"+a);var c=Ext.getCmp("DateFieldId"+a);var f=Ext.getCmp("pickListFieldCombo"+a);if(e){e.destroy()}else{if(f){f.destroy()}else{if(c){c.destroy()}}}}}tableLenght=0}}function ClearTableForI8(){var p=document.getElementById("FilterCriteria");rowCount=tableLenght;if(typeof(p)!="undefined"&&p!=null){for(var h=0;h<rowCount;h++){p.deleteRow();var k=h+1;var a=Ext.getCmp("TextField"+k);var f=Ext.getCmp("DateFieldId"+k);var g=Ext.getCmp("pickListFieldCombo"+k);var l=Ext.getCmp("fieldsId"+k);var o=Ext.getCmp("operatorId"+k);var n=document.getElementById("FieldDivOfRow"+k);var m=document.getElementById("OperatorDivOfRow"+k);var c=document.getElementById("OperandDivOfRow"+k);var e=document.getElementById("ANDDivId"+k);var b=document.getElementById(k);var d=document.getElementById("ANDtext"+k);if(a){a.destroy()}else{if(g){g.destroy()}else{if(f){f.destroy()}}}if(l){l.destroy()}if(o){o.destroy()}if(typeof(n)!="undefined"&&n!=null){n.parentNode.removeChild(n)}if(typeof(m)!="undefined"&&m!=null){m.parentNode.removeChild(m)}if(typeof(c)!="undefined"&&c!=null){c.parentNode.removeChild(c)}if(typeof(e)!="undefined"&&e!=null){e.parentNode.removeChild(e)}if(typeof(b)!="undefined"&&b!=null){b.parentNode.removeChild(b)}tableLenght=tableLenght-1}}}function DeleteThisRow(a){a=parseInt(a);var b=document.getElementById("RowId"+a);b.setAttribute("style","display:none");DeletedRowArray+=a+"$";var c=document.getElementById("FilterCriteria");if(tableLenght==ConditionLimit){ShowHideAddLink(true)}ConditionLimit++;window.parent.resizeFilterWindow(numberOfCriterias-1);numberOfCriterias--}function showWaitMask(){waitMask.show()}function hideWaitMask(){waitMask.hide()}function setDivPosition1(){var b=document.getElementById(currentField.id);var d=b.getBoundingClientRect().top+20;var c=b.getBoundingClientRect().left;var a=document.getElementById("autocompleteDiv");if(typeof(a)!="undefined"&&a!=null){a.style.top=d+"px";a.style.left=c+"px";a.style.width="150px"}}function handleClearFilter(){if(parent.isFilterApplidCookie!=null&&parent.isFilterApplidCookie==""){resetFilter()}else{parent.deleteAllCookies()}};