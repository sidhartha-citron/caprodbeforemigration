var isDirty=false;function closeIt(){if(!isDirty){return}else{return warningMsgForCloseClient}}function setDirtyFlag(){isDirty=true}function initiateSelfClosing(){window.onbeforeunload=closeIt}window.onload=function(){initiateSelfClosing()};function initLoadData(){roleFieldStore=new Ext.data.ArrayStore({fields:["key","value"],data:roleData});fetchComboFieldStore();roleFieldCombo=new Ext.form.ComboBox({id:"roleFieldCombo",store:roleFieldStore,width:Ext.isIE7?132:136,height:Ext.isIE7?19:17,displayField:"value",renderTo:"roleCombo",valueField:"key",typeAhead:true,mode:"local",disabled:disableRole,forceSelection:true,triggerAction:"all",tpl:'<tpl for="." ><div class="x-combo-list-item" id="{value:htmlEncode}" title="{value:htmlEncode}">{value:htmlEncode}</div></tpl>',selectOnFocus:true,editable:false,value:roleFldvalue,cls:"clsClientSelectList",listeners:{select:function(d,b,c){comboFldIndex=c;document.getElementById(ClientPageComp.ComponentVars.roleListId).value=b.get("key")}}});var a=document.getElementById(ClientPageComp.ComponentVars.account_id_name);if(disableRole&&a.value!=null&&a.value!=""){showWarningMsgForFirstClient()}}function fetchComboFieldStore(){if(rolevalue!=""){var a=0;var b=rolevalue;while(roleFieldStore.data.length>a){if(roleFieldStore.getAt(a).get("key")==rolevalue){roleFldvalue=roleFieldStore.getAt(a).get("value");break}else{roleFldvalue=roleFieldStore.getAt(0).get("value")}a++}}else{if(roleFieldStore.data.length>0){roleFldvalue=roleFieldStore.getAt(0).get("value")}}}function setComboStoreJS(){setRoleOptions()}function setRoleOptions(){roleFieldStore.removeAll();Ext.getCmp("roleFieldCombo").store.loadData(roleData);if(rolevalue!=""){var a=0;while(roleFieldStore.data.length>a){if(roleFieldStore.getAt(a).get("key")==rolevalue){Ext.getCmp("roleFieldCombo").setValue(roleFieldStore.getAt(a).get("value"));break}else{Ext.getCmp("roleFieldCombo").setValue(roleFieldStore.getAt(0).get("value"))}a++}}else{Ext.getCmp("roleFieldCombo").setValue(roleFieldStore.getAt(0).get("value"))}Ext.getCmp("roleFieldCombo").setDisabled(disableRole);if(isStaffManager||(!isStaffManager&&(!isStaffUser&&!isSysAdmin))){Ext.getCmp("btnSave").setDisabled(false)}if(!isEditable){Ext.getCmp("btnSave").setDisabled(true)}setAccountRoleAsMandatory();var b=document.getElementById(ClientPageComp.ComponentVars.account_id_name);if(disableRole&&b.value!=null&&b.value!=""){showWarningMsgForFirstClient()}}function showWarningMsgForFirstClient(){alertMsg=Ext.Msg.show({msg:warningMsgForFirstClient,buttons:Ext.Msg.OK,width:400,frame:false,icon:Ext.Msg.INFO})}function showData(d,c,b,a){if(typeof(c)!="undefined"&&typeof(b)!="undefined"){if(typeof(a)!="undefined"){showalldata(d,c,b,a)}else{showalldata(d,c,b)}}else{if(typeof(c)!="undefined"&&typeof(b)=="undefined"){showalldata(d,c)}else{showalldata(d)}}}function saveUserAccountLink(){var a=document.getElementById(ClientPageComp.ComponentVars.account_id).value;if(!isPortalUser&&clientId!=null&&clientId!=""&&a!=null&&a!=""){saveUserAccount()}}function setAccountRoleAsMandatory(){role_astric=document.getElementById(ClientPageComp.ComponentVars.role_label_astric);account_astric=document.getElementById(ClientPageComp.ComponentVars.account_label_astric);if(role_astric!=null){if(isPortalUser){role_astric.style.display="inline";account_astric.style.display="inline"}else{role_astric.style.display="none";account_astric.style.display="none"}}}function getModuleName(){return"Clients"};