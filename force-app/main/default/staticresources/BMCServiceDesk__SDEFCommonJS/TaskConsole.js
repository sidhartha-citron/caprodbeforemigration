var lastModifiedByLocking="";var initialRecordState="";var taskName=TaskConsolePage.Labels.New;var LabelNew=TaskConsolePage.Labels.New_Task;var tabName=TaskConsolePage.Labels.TaskRecordPrefix+": "+TaskConsolePage.Labels.New;var recordState="";var isRecordLock="";var broadcast="";var categoryId="";var ServiceTargetStatus="";var status="";var clientId="";var desc="";var isDeleted=false;var disableActionBtn=false;var disableAgentBtn=false;var ServiceTargetsBtnHandlerWindow;var SRTaskName="";var isNeedToRefreshForm=false;var isNeedToRefreshRelatedList=false;var isFocusOnForm=true;var isFocusOnRelatedList=false;var isNeedToRefreshTaskList=false;var waitMsgBar="";var isNewTaskForm=false;var isQuickClose=false;var saveFromQuickClose=false;var isNewRecordLock=false;var screenWidth=671;var screenHeight=400;var isSaveForSingleConsole=true;var isSAVE=false;var clickedOnce=false;var SconsoletabName="";var isOptionalItemsAdded=false;var knowledgeSearchBtnHandler;var CIExplorerBtnHandler;var cloneBtnHandler;var CloseBtnHandler;var ReopenBtnHandler;var QuickCloseBtnHandler;var sendEmailBtnHandler;var addNoteHandler;var newActionHandler;var viewActionHistoryBtnHandler;var submitforapprovalHandler;function screenLeft(a){return parseInt((screen.availWidth/2)-(a/2))}function screenTop(b){if(Ext.isChrome){var a=parseInt((screen.availHeight/2)-(screenHeight/2));return(a-25)}else{return parseInt((screen.availHeight/2)-(screenHeight/2))}}var left=screenLeft(screenWidth);var top=screenTop(screenHeight);var functionArray=new Array();function pasteResolution(a,b){Visualforce.remoting.Manager.invokeAction(_RemotingActions.pasteResolution,recordId,a,function(c,d){if(d.type==="exception"){alert(d.message)}else{refreshTask()}},{escape:true})}function refreshTask(){handleSave();if(isFocusOnForm){loadTaskDetail(recordId)}else{loadTaskRelatedList(recordId);isNeedToRefreshForm=true;refreshTaskFormTimeOut()}}function setTaskData(a){functionArray[0]=a}function saveTask(a){functionArray[1]=a}function assignRFLookupFilter(a){functionArray[2]=a}function getLookupFilterQuery(a){return functionArray[2](a)}function quickClose(){if(verifyChange()){handleSave()}isQuickClose=true;functionArray[1]();saveFromQuickClose=true}function reopenTask(){if(verifyChange()){handleSave()}Visualforce.remoting.Manager.invokeAction(_RemotingActions.reopenTask,recordId,function(a,b){if(b.type==="exception"){alert(b.message);stopWaitMsgBar()}else{stopWaitMsgBar();if(isFocusOnForm){loadTaskDetail(recordId)}if(isFocusOnRelatedList){loadTaskDetail(recordId);loadTaskRelatedList(recordId)}isNeedToRefreshForm=false;isNeedToRefreshRelatedList=true;isNeedToRefreshTaskList=true;if(isServiceCloudConsole!="true"&&isRFConsoleDetailForm&&window.parent.MultiPageLayout&&window.parent.MultiPageLayout.isEnabledForTS){UndoBtnHandler()}}},{escape:true})}var openCloneRecordTabHandler=function(a){window.parent.addTab(recordId,"","Task__c",true,"","","",a)};function LoadHandlerForActionItem(){cloneBtnHandler=function(f,g){var h=window.location.hash=!!window.MSInputMethodContext;if(Ext.isIE||h){hideMenu()}if(isServiceCloudConsole=="true"){sforce.console.openPrimaryTab(null,taskConsole+"&record_id="+recordId+"&isCloneRequest=true&isServiceCloudConsole=true&ran="+new Date().getTime(),true,TaskConsolePage.Labels.New);return false}else{if(isRFConsoleDetailForm=="true"){if(previousFormLayoutId&&window.parent.MultiPageLayout&&window.parent.MultiPageLayout.isEnabledForTS){window.parent.hasFormLayoutAccessCloneMessage(openCloneRecordTabHandler,previousFormLayoutId,"ts")}else{openCloneRecordTabHandler("")}}else{if(verifyChange()){var i=cloneBtnHandler;showCloseWarning(i,null)}else{isCloneRequest="true";startWaitMsgBar();loadTaskDetail(recordId)}}}};var b;CloseBtnHandler=function(g,h){if(verifyChange()){Ext.Msg.defaultButton=1;Ext.Msg.baseCls="bmc-notiltle-msg";Ext.Msg.show({msg:TaskConsolePage.Labels.closeConfirmMsg,buttons:Ext.Msg.OK,buttonText:{ok:TaskConsolePage.Labels.ServiceTargetsOK},icon:Ext.MessageBox.INFO})}else{screenHeight=400;screenWidth=871;var j=new Object;j.setIsNeedToRefreshTaskList=setIsNeedToRefreshTaskList;j.loadTaskDetail=loadTaskDetail;j.setIsNeedToRefreshRelatedList=setIsNeedToRefreshRelatedList;j.startWaitMsgBar=startWaitMsgBar;j.refreshTask=refreshTask;j.isRFConsoleDetailForm=isRFConsoleDetailForm;var f="dialogWidth:"+screenWidth+"px;dialogHeight:"+screenHeight+"px;status;resizable;scrollbars:no;center:yes;dialogLeft:"+screenLeft(screenWidth)+"px;;dialogTop:"+screenTop(screenHeight)+"px;";var i=window.location.hash=!!window.MSInputMethodContext;if(!b||b.closed){if(window.showModalDialog&&(Ext.isIE||i)){b=window.showModalDialog("/apex/CloseTask?taskId="+recordId+"&categoryId="+categoryId+"&calledFrom=rfconsole",j,f)}else{f="width="+screenWidth+",height="+screenHeight+",status,resizable,scrollbars=yes,left="+screenLeft(screenWidth)+",top="+screenTop(screenHeight);b=window.open("/apex/CloseTask?taskId="+recordId+"&categoryId="+categoryId+"&calledFrom=rfconsole","_blank",f)}}if(b!=""&&typeof(b)!="undefined"&&b.focus){b.focus()}}};ReopenBtnHandler=function(f,g){startWaitMsgBar();reopenTask()};QuickCloseBtnHandler=function(f,g){startWaitMsgBar();quickClose()};var d;sendEmailBtnHandler=function(g,h){screenHeight=700;screenWidth=900;var f="dialogWidth:"+screenWidth+"px;dialogHeight:"+screenHeight+"px;status;resizable;scrollbars:no;center:yes;dialogLeft:"+screenLeft(screenWidth)+"px;;dialogTop:"+screenTop(screenHeight)+"px;";if(!d||d.closed){if(window.showModalDialog&&Ext.isIE){var i=new Object;i.isFocusOnRelatedList=isFocusOnRelatedList;i.loadTaskRelatedList=loadTaskRelatedList;i.startWaitMsgBar=startWaitMsgBar;i.setIsNeedToRefreshRelatedList=setIsNeedToRefreshRelatedList;d=window.showModalDialog("/apex/ComposeEmailPage?enableSelfClosing=false&recordId="+recordId+"&isNew=true&objectName=Task__c&isConsolePage=true&popupHeader="+taskName,i,f)}else{f="width="+screenWidth+",height="+screenHeight+",status,resizable,scrollbars=no,left="+screenLeft(screenWidth)+",top="+screenTop(screenHeight);d=window.open("/apex/ComposeEmailPage?enableSelfClosing=false&recordId="+recordId+"&isNew=true&objectName=Task__c&isConsolePage=true&popupHeader="+taskName,"_blank",f)}}if(d!=""&&typeof(d)!="undefined"&&d.focus){d.focus()}};var a;addNoteHandler=function(f,g){if(!a||a.closed){a=window.open("/apex/stdlayouttaskaddnotepage?id="+recordId+"&fromconsole=true","addNote","width=600,height=400,resizable = 0,scrollbars=no,status=1,top=350,left=350")}if(a.focus){a.focus()}};var c;newActionHandler=function(f,g){c=window.open("/apex/searchPage?popupId=Action&isLookup=true&objectType=TaskHistory__c&isCalledFromConsole=true&enableSelfClosing=false&standardLayout=true&parentId="+recordId+"&filterClause=appliesToTask__c%3Dtrue%20and%20system__c%3Dfalse","newAction","status = 1,height ="+screenHeight+",width ="+screenWidth+",left="+screenLeft(screenWidth)+",top="+screenTop(screenHeight)+", resizable = 0,scrollbars=no");if(c.focus){c.focus()}};var e;viewActionHistoryBtnHandler=function(f,g){screenWidth=671;screenHeight=400;c=window.open("/apex/ViewAllActions?ObjectId="+recordId+"&recordState="+recordState+"&objectName=Task&recordName="+taskName,"actionHistory","status = 1,height ="+screenHeight+",width ="+screenWidth+",left="+screenLeft(screenWidth)+",top="+screenTop(screenHeight)+", resizable = 0,scrollbars=yes");if(c.focus){c.focus()}}}var openInVar="";var customActionJsonString="";var urlStringVar="";var custionActionObj="";function customActionHandler(a){openInVar=a.openIn;custionActionObj=a;getCustomActionURL(a.id)}function openUrl(){if(openInVar.indexOf("Remedyforce")!=-1){window.parent.parent.addNewTab(custionActionObj.id,customActionHeaderLabel,"NavigatorPage?title="+custionActionObj.encodedText+"&isCustomActionLink=true&target="+urlStringVar)}else{if(openInVar.toLowerCase().indexOf("window")!=-1){var a="resizable=1,scrollbars=1,fullscreen=1,toolbar=1,menubar=1,location=1,height="+screen.height+",width="+screen.width+",top = 0,left = 0";window.open(urlStringVar,"",a)}else{window.open(urlStringVar)}}}function getCustomActionURL(customId){var incId=recordId;eval(orgNamespace).JSRemoteActions.getCustomActionURL("Task",incId,customId,function(result,event){if(event.status){if(result!=""&&result!=null){urlStringVar=result;openUrl()}}else{if(event.type==="exception"){Ext.Msg.alert("",event.message)}}},{escape:false})}function getDetailViewActionMenu(){if(ActionMenuItem=="-"){ActionMenuItem=""}var a=false;if(recordId==null||recordId==""){a=true}return Ext.create("Ext.menu.Menu",{id:"mainMenu",baseCls:"bmc-menu",shadow:false,items:ActionMenuItem})}function loadMultiPageLayoutMenu(){return isServiceCloudConsole!="true"&&isRFConsoleDetailForm&&window.parent.MultiPageLayout.isEnabledForTS&&window.parent.MultiPageLayout.details.ts.length>1}function getTaskPageLayoutMenu(){if(loadMultiPageLayoutMenu()){return Ext.create("Ext.menu.Menu",{id:"pageLayoutMenuItems",baseCls:"bmc-menu",shadow:false,items:window.parent.getPageLayoutMenuItems(TaskFromNewBtnHandler,"ts"),maxHeight:"310",listeners:{mouseleave:{element:"el",fn:function(){Ext.getCmp("pageLayoutMenuItems").hide()}}}})}else{return""}}var TaskFromNewBtnHandler=function(a,b){var c=window.location.hash=!!window.MSInputMethodContext;if(Ext.isIE||c){hideMenu()}if(isRFConsoleDetailForm=="true"){window.parent.addTab(null,"","Task__c","","","","",this.optionId)}else{if(isServiceCloudConsole=="true"){sforce.console.openPrimaryTab(null,taskConsole+"&record_id=&isServiceCloudConsole=true&ran="+new Date().getTime(),true,TaskConsolePage.Labels.New);return false}else{if(verifyChange()){var d=NewBtnhandler;showCloseWarning(d,null)}else{ServiceTargetStatus="";startWaitMsgBar();loadTaskDetail(null);disableAgentMenuItems(true);disableActionMenuItems(true)}}}};var TaskRelatedListBtnhandler;var UndoBtnHandler=function(b,c){if(verifyChange()){var a=UndoBtnHandler;showCloseWarning(a)}else{startWaitMsgBar();formLayoutId=previousFormLayoutId;if(isFocusOnForm){loadTaskDetail(recordId)}else{if(isFocusOnRelatedList){loadTaskRelatedList(recordId)}else{loadTaskDetail(null)}}}};function getDetailVeiwToolBar(){var c=function(d,e){if(!loadMultiPageLayoutMenu()){TaskFromNewBtnHandler(d,e)}};var a=function(e,f){Ext.getCmp("taskFormBtnId").toggle(true);Ext.getCmp("actionButton").setDisabled(false);Ext.getCmp("agentToolsBtnId").setDisabled(false);if(isRecordLock&&isRecordLock.indexOf("true")>-1){Ext.getCmp("saveId").setDisabled(true)}else{Ext.getCmp("saveId").setDisabled(false)}if(!_ServerVariables.ObjectMetadata.isUpdateable){Ext.getCmp("saveId").setDisabled(true)}var d=document.getElementById("relatedListFrameId");hideDiv(d);var g=document.getElementById("detailsFrameId");if(g.src==""||isNeedToRefreshForm==true){startWaitMsgBar();loadTaskDetail(recordId);isNeedToRefreshForm=false}else{showDiv(g);if(isActivityFeedEnabled==true){showActivityFeed()}if(isCISidebarEnabled==true){showRelatedCI()}resizeTaskDetailsFrameForIEEDGE()}};TaskRelatedListBtnhandler=function(e,f){Ext.getCmp("taskReleatedListBtnId").toggle(true);Ext.getCmp("actionButton").setDisabled(false);Ext.getCmp("agentToolsBtnId").setDisabled(false);if(isRecordLock&&isRecordLock.indexOf("true")>-1){Ext.getCmp("saveId").setDisabled(true)}else{Ext.getCmp("saveId").setDisabled(false)}if(!_ServerVariables.ObjectMetadata.isUpdateable){Ext.getCmp("saveId").setDisabled(true)}var g=document.getElementById("detailsFrameId");hideDiv(g);hideActivityFeed();hideRelatedCI();var d=document.getElementById("relatedListFrameId");if(d.src==""||isNeedToRefreshRelatedList==true){startWaitMsgBar();loadTaskRelatedList(recordId)}else{showDiv(d)}};var b=function(d,e){functionArray[1]();if(isRFConsoleDetailForm){isSaveForSingleConsole=true;isSAVE=true}Ext.getCmp("taskFormBtnId").toggle(true);var f=document.getElementById("detailsFrameId");showDiv(f)};return Ext.create("Ext.toolbar.Toolbar",{id:"detailViewToolbarId",items:[{xtype:"tbspacer",width:5},{id:"newId",baseCls:"bmc-btn-small",disabledCls:"bmc-btn-disabled",focusCls:"bmc-btn-focus",overCls:"bmc-btn-over",pressedCls:"bmc-btn-pressed",text:TaskConsolePage.Labels.New,menu:getTaskPageLayoutMenu(),arrowCls:"d-icon-angle_down",tooltip:returnLabel(TaskConsolePage.Labels.New,"N"),disabled:!_ServerVariables.ObjectMetadata.isCreateable,handler:c},{xtype:"tbspacer",width:5},{id:"undoId",baseCls:"bmc-btn-small",disabledCls:"bmc-btn-disabled",focusCls:"bmc-btn-focus",overCls:"bmc-btn-over",pressedCls:"bmc-btn-pressed",text:TaskConsolePage.Labels.Undo,tooltip:TaskConsolePage.Labels.Undo_Consolebtn_Tooltip,handler:UndoBtnHandler},{xtype:"tbspacer",width:5},{id:"saveId",baseCls:"bmc-btn-primary",disabledCls:"bmc-btn-primary-disabled",focusCls:"bmc-btn-primary-focus",overCls:"bmc-btn-primary-over",pressedCls:"bmc-btn-primary-pressed",text:TaskConsolePage.Labels.Save,tooltip:returnLabel(TaskConsolePage.Labels.Save,"S"),disabled:!_ServerVariables.ObjectMetadata.isUpdateable,handler:b},{xtype:"tbspacer",width:5},"-",{id:"actionButton",baseCls:"bmc-btn-dropdown",disabledCls:"bmc-btn-dropdown-disabled",focusCls:"focus",overCls:"over",pressedCls:"pressed",text:TaskConsolePage.Labels.Actions,tooltip:returnLabel(TaskConsolePage.Labels.Actions,"A"),menu:getDetailViewActionMenu()},{id:"agentToolsBtnId",baseCls:"bmc-btn-dropdown",disabledCls:"bmc-btn-dropdown-disabled",focusCls:"bmc-btn-dropdown-focus",overCls:"bmc-btn-dropdown-over",pressedCls:"bmc-btn-dropdown-pressed",text:TaskConsolePage.Labels.AgentTools,tooltip:returnLabel(TaskConsolePage.Labels.AgentTools,"T"),menu:getTaskAgentToolsBtnMenu()},{id:"taskFormBtnGroupId",xtype:"buttongroup",columns:3,border:false,frame:false,items:[{id:"taskFormBtnId",cls:"bmc-togglebar-left-btn-smart-view-disable",baseCls:"bmc-togglebar-btn-base",disabledCls:"bmc-togglebar-btn-disabled",focusCls:"bmc-togglebar-btn-focus",overCls:"bmc-togglebar-btn-over",pressedCls:"pressed",text:TaskConsolePage.Labels.TaskForm,tooltip:TaskConsolePage.Labels.TaskForm,enableToggle:true,pressed:true,disabled:((recordId==null||recordId==""||recordId=="new")?true:false),toggleGroup:"taskBtnGroup",handler:a,listeners:{toggle:{fn:function(d,e){if(e){isFocusOnForm=true}else{isFocusOnForm=false}}}}},{id:"taskReleatedListBtnId",cls:"bmc-togglebar-right-btn",baseCls:"bmc-togglebar-btn-base",disabledCls:"bmc-togglebar-btn-disabled",focusCls:"bmc-togglebar-btn-focus",overCls:"bmc-togglebar-btn-over",pressedCls:"pressed",text:TaskConsolePage.Labels.RelatedLists,tooltip:TaskConsolePage.Labels.RelatedLists,enableToggle:true,disabled:((recordId==null||recordId==""||recordId=="new")?true:false),toggleGroup:"taskBtnGroup",handler:TaskRelatedListBtnhandler,listeners:{toggle:{fn:function(d,e){if(e){isFocusOnRelatedList=true}else{isFocusOnRelatedList=false}}}}}]},{xtype:"tbfill"},{id:"LockRecord",baseCls:"bmc-btn-small",disabledCls:"bmc-btn-disabled",focusCls:"bmc-btn-focus",overCls:"bmc-btn-over",pressedCls:"bmc-btn-pressed",text:TaskConsolePage.Labels.LockRecord,tooltip:_ServerLabels.LockRecordToolTip,hidden:true,disabled:!_ServerVariables.ObjectMetadata.isUpdateable},{id:"UnlockRecord",baseCls:"bmc-btn-small",disabledCls:"bmc-btn-disabled",focusCls:"bmc-btn-focus",overCls:"bmc-btn-over",pressedCls:"bmc-btn-pressed",text:TaskConsolePage.Labels.UnlockRecord,tooltip:_ServerLabels.UnlockRecordToolTip,hidden:true,disabled:!_ServerVariables.ObjectMetadata.isUpdateable},{xtype:"tbspacer",width:5},{id:"LockRecordIcon",xtype:"label",hidden:true,cls:"d-icon-lock lock-color lock-icon",autoEl:{title:TaskConsolePage.Labels.LockedRecord}},{id:"LockRecordLbl",xtype:"label",text:TaskConsolePage.Labels.Locked,hidden:true,cls:"recordLockText"},{id:"UnlockRecordIcon",xtype:"label",hidden:true,cls:"d-icon-lock_open lock-icon",autoEl:{title:TaskConsolePage.Labels.UnlockedRecord}},{xtype:"tbspacer",width:0},{xtype:"tbseparator",id:"helpIconSeparator"},{xtype:"tbspacer",width:0},{xtype:"label",html:'<a href="#" onclick="OpenHelppage(\'Detail\');" title="'+_ServerLabels.Help+'" class="d-icon-question_circle help-icon"></a>'},{xtype:"tbspacer",width:10}]})}function LoadHandlerForAgentItem(){var b;CIExplorerBtnHandler=function(d,e){screenWidth=1200;screenHeight=650;var c="width="+screenWidth+",height="+screenHeight+",status,resizable,scrollbars=no,left="+screenLeft(screenWidth)+",top="+screenTop(screenHeight);b=window.open("/apex/CIExplorerLauncher?Module=Task__c&RecordSequence="+recordId+"&stdForm=true&isCalledFromConsole=true","TSCIExplorer",c);if(b.focus){b.focus()}};var a;knowledgeSearchBtnHandler=function(c,d){screenHeight=400;screenWidth=671;a=window.open("/apex/KnowledgeSearch?enableSelfClosing=false&calledFromForm=true&standardLayout=true&isCalledFromConsole=true&objectName=Tasks&search="+encodeURIComponent(desc)+"&KMtaskID="+recordId+"&isServiceCloudConsole="+isServiceCloudConsole+"&isRFConsoleDetailForm="+isRFConsoleDetailForm,"KnowledgeSearch","status = 1, height ="+screenHeight+", width ="+screenWidth+",left="+screenLeft(screenWidth)+",top="+screenTop(screenHeight)+", resizable = 1, scrollbars=no");if(a.focus){a.focus()}}}function getTaskAgentToolsBtnMenu(){var a=false;if(recordId==null||recordId==""){a=true}return Ext.create("Ext.menu.Menu",{id:"AgentToolsMenu",shadow:false,baseCls:"bmc-menu",items:AgentMenuItem})}function getDetailViewPanel(){var a=Ext.create("Ext.Panel",{id:"detailViewChildPanelId",cls:(isRFConsoleDetailForm=="true")?"detail-view-position-fixed":"",border:false,hidden:(recordId==""),width:"100%",anchor:"0 0",layout:{type:"anchor"},tbar:getDetailVeiwToolBar(),items:[Ext.create("Ext.Panel",{border:false,anchor:"0 0",width:"100%",contentEl:"DetailFormDiv"})]});waitMsgBar=new Ext.LoadMask(a,{floating:{shadow:false},msgCls:"d-loader-container",msg:'<ul class="d-loading"><li class="d-loading__stick d-loading__stick_1"></li><li class="d-loading__stick d-loading__stick_2"></li><li class="d-loading__stick d-loading__stick_3"></li><li class="d-loading__stick d-loading__stick_4"></li><li class="d-loading__stick d-loading__stick_5"></li><li class="d-loading__stick d-loading__stick_6"></li><li class="d-loading__stick d-loading__stick_7"></li><li class="d-loading__stick d-loading__stick_8"></li><li class="d-loading__stick d-loading__stick_9"></li><li class="d-loading__stick d-loading__stick_10"></li><li class="d-loading__stick d-loading__stick_11"></li><li class="d-loading__stick d-loading__stick_12"></li></ul><div>'+_ServerLabels.PleaseWaitMsg+"</div>"});return a}function LoadRecord(a){if(verifyChange()){var b=LoadRecordFunc;showCloseWarning(b,a)}else{LoadRecordFunc(a)}}function LoadRecordFunc(a){console.log("Loading record...");console.log(a);recordId=a;startWaitMsgBar();if(recordId==null||recordId==""){ServiceTargetStatus="";loadTaskDetail(null)}else{loadTaskDetail(a);isNeedToRefreshRelatedList=true}var b=document.getElementById("relatedListFrameId")}function showDiv(a){a.style.display="block";a.style.height="100%";a.style.width="100%";var c=/chrome/i.test(navigator.userAgent);if(c){var b=a.clientHeight+2;b=(b/a.clientHeight)*100;a.style.height=b+"%"}}function hideDiv(a){a.style.display="none";a.style.height="0px";a.style.width="0px"}function loadTaskRelatedList(d){isFocusOnForm=false;isFocusOnRelatedList=true;var c=document.getElementById("detailsFrameId");hideDiv(c);hideActivityFeed();hideRelatedCI();var a=document.getElementById("relatedListFrameId");a.src="/apex/ConsoleTaskRelatedList?id="+d+"&isdtp=vw&obj=Task__c";addOnLoadEvent(a,afterTaskRelatedListFrameLoad);showDiv(a);isNeedToRefreshRelatedList=false;var b=Ext.getCmp("detailViewChildPanelId");b.show()}function loadTaskDetail(d){isFocusOnForm=true;isFocusOnRelatedList=false;var a=document.getElementById("relatedListFrameId");hideDiv(a);var c=document.getElementById("detailsFrameId");if(d==null||d==""||isCloneRequest=="true"){isNewTaskForm=true;isNewRecordLock=true;if(isCloneRequest=="true"){isCloneRequest="false";c.src="/apex/ConsoleTaskDetail?oldTaskId="+d+"&formLayoutId="+formLayoutId;clickedOnce=true;handleChange()}else{c.src="/apex/ConsoleTaskDetail?clientId="+_ServerVariables.PageParams.clientid+"&ObjID="+_ServerVariables.PageParams.ObjID+"&ObjName="+_ServerVariables.PageParams.ObjName+"&formLayoutId="+formLayoutId+"&templateId="+templateId+"&isLayoutChanged="+isLayoutChanged}}else{isNewTaskForm=false;c.src="/apex/ConsoleTaskDetail?id="+d+"&formLayoutId="+formLayoutId+"&templateId="+templateId+"&isLayoutChanged="+isLayoutChanged}addOnLoadEvent(c,afterTaskDetailFrameLoad);if(isNewTaskForm){if(isRFConsoleDetailForm!=="true"){addOptionalToolbarItems()}Ext.getCmp("helpIconSeparator").hide();Ext.getCmp("detailViewToolbarId").doLayout()}else{addOptionalToolbarItems();Ext.getCmp("helpIconSeparator").show();Ext.getCmp("detailViewToolbarId").doLayout()}showDiv(c);var b=Ext.getCmp("detailViewChildPanelId");b.show();if(isActivityFeedEnabled==true&&isNewTaskForm!=true&&isCloneRequest!="true"&&isFocusOnForm==true){displayActivityFeed=true}if(isCISidebarEnabled==true&&isNewTaskForm!=true&&isCloneRequest!="true"&&isFocusOnForm==true){displayCISidebar=true}}function getTaskData(a){recordId=a.Id;taskName=a.Name;SRTaskName=taskName;recordState=a.state__c;broadcast=a.FKBroadcast__c;categoryId=a.FKCategory__c;status=a.Stage__c;clientId=a.FKClient__c;desc=a.taskDescription__c;if(desc!=null&&desc!=""&&desc.length>500){desc=desc.substring(0,500)}ServiceTargetStatus=a.ServiceTargetStatus;isRecordLock=a.isRecordLock}function removeTaskData(){recordId=null;taskName=TaskConsolePage.Labels.New;recordState="";broadcast="";categoryId="";status="";clientId=""}function afterTaskDetailFrameLoad(){if(isNewTaskForm){afterNewFormLoad()}else{afterDetailFormLoad()}if(isDeleted){disableDetailFormButtons()}isDeleted=false;resizeTaskDetailsFrameForIEEDGE()}function resizeTaskDetailsFrameForIEEDGE(){var a=document.getElementById("detailsFrameId");if(checkIsIEBrowser()||(/Edge\/\d./i.test(navigator.userAgent))){if(isRFConsoleDetailForm==="true"){a.style.position="fixed";a.style.height="92%"}else{a.style.position="absolute"}}}function afterTaskRelatedListFrameLoad(){stopWaitMsgBar()}function afterNewFormLoad(){removeTaskData();AttRefGeneratorId="";Ext.getCmp("saveId").setDisabled(false);Ext.getCmp("undoId").setDisabled(false);if(Ext.getCmp("viewActionHistoryId")!=undefined&&Ext.getCmp("viewActionHistoryId")!=null){Ext.getCmp("viewActionHistoryId").setDisabled(true)}disableActionMenuItems(true);disableAgentMenuItems(true);if(isServiceCloudConsole=="true"){sforce.console.setTabTitle(LabelNew)}if(isRFConsoleDetailForm!=="true"){Ext.getCmp("taskNameId").update(LabelNew);showHideToolbarItems(false);Ext.getCmp("taskStatusId").update(status);ChangeServiceTargetButtonState(ServiceTargetStatus);changeServiceTargetIcons(Ext.getCmp("servicetargets").getEl(),ServiceTargetStatus)}Ext.getCmp("taskFormBtnId").toggle(false);Ext.getCmp("taskReleatedListBtnId").toggle(false);Ext.getCmp("taskFormBtnId").setDisabled(true);Ext.getCmp("taskReleatedListBtnId").setDisabled(true);isNewTaskForm=false;stopWaitMsgBar()}function afterDetailFormLoad(){if(functionArray[0]!="undefined"&&functionArray[0]!=null&&functionArray[0]!="null"&&functionArray[0]!=""){var j=functionArray[0]();var h=recordId;if(isRFConsoleDetailForm&&isSaveForSingleConsole){window.parent.changeTabTitle(tabId,window.parent.SingleConsolePage.Labels.TaskRecordPrefix+j.Name);isSaveForSingleConsole=false;window.parent.updateDirtyFlag(tabId,false);if(h==null||h==""){window.parent.changeTabItemId(j.Id,tabId)}}if(h==null||h==""){enableCustomActions()}getTaskData(j);Ext.getCmp("saveId").setDisabled(false);Ext.getCmp("undoId").setDisabled(false);if(Ext.getCmp("viewActionHistoryId")!=undefined&&Ext.getCmp("viewActionHistoryId")!=null){Ext.getCmp("viewActionHistoryId").setDisabled(false)}if(isServiceCloudConsole=="true"){tabSuffix=TaskConsolePage.Labels.TaskRecordPrefix;sforce.console.setTabTitle(tabSuffix+j.Name);SconsoletabName=j.Name;sforce.console.getFocusedPrimaryTabId(addSConsoleTabComplete)}if(isRFConsoleDetailForm!=="true"){showHideToolbarItems(true);Ext.getCmp("taskNameId").update(TaskConsolePage.Labels.TaskRecordPrefix+j.Name)}var p=Ext.getCmp("taskStatusId");if(p){p.update(j.Stage__c)}disableActionMenuBtn(false);if(isFocusOnForm){Ext.getCmp("taskFormBtnId").toggle(true)}Ext.getCmp("taskFormBtnId").setDisabled(false);Ext.getCmp("taskReleatedListBtnId").setDisabled(false);disableAgentMenuBtn(false);var f=Ext.getCmp("knowledgeSearchButtonId");var l=Ext.getCmp("CiExplorerButtonId");var n=Ext.getCmp("closeButtonId");var a=Ext.getCmp("quickCloseButtonId");var i=Ext.getCmp("reopenButtonId");var g=Ext.getCmp("addNoteId");var e=Ext.getCmp("emailId");var k=Ext.getCmp("cloneButtonId");var m=Ext.getCmp("printId");var d=Ext.getCmp("printPDFId");var o=Ext.getCmp("newActionId");var c=Ext.getCmp("ServiceTargetsButtonId");var b=Ext.getCmp("Submitforapproval");if(recordState=="true"){if(_ServerVariables.ObjectMetadata.isUpdateable){Ext.getCmp("saveId").setDisabled(false);if(n!=undefined&&n!=null){n.setDisabled(false)}if(a!=undefined&&a!=null){a.setDisabled(false)}if(e!=undefined&&e!=null){e.setDisabled(false)}if(o!=undefined&&o!=null){o.setDisabled(false)}checkApprovalstatus();if(typeof(recordLock)!="undefined"&&recordLock!=null&&recordLock!="Off"){if(!isSAVE||(isSAVE&&initialRecordState=="true")){if(typeof(isRecordLock)!="undefined"&&isRecordLock!=null&&isRecordLock.indexOf("false")>-1){if(recordLock=="Explicit"){if(isRecordLock.indexOf("##")>-1){recordLockedIcons("")}else{recordUnlockedIcons()}}else{if(recordLock=="Implicit"){getRecordLockedValue("recordLock")}}}else{enableRecordReadModeMsg(isRecordLock)}}isSAVE=false}}else{Ext.getCmp("saveId").setDisabled(true);if(n!=undefined&&n!=null){n.setDisabled(true)}if(a!=undefined&&a!=null){a.setDisabled(true)}if(e!=undefined&&e!=null){e.setDisabled(true)}if(o!=undefined&&o!=null){o.setDisabled(true)}}if(f!=undefined&&f!=null){f.setDisabled(false)}if(g){if(_ServerVariables.ObjectMetadata.isUpdateable||_ServerVariables.ObjectMetadata.isCreateable){g.setDisabled(false)}else{g.setDisabled(true)}}if(i!=undefined&&i!=null){i.setDisabled(true)}}else{disableAllrecordLockIcons();if(n!=undefined&&n!=null){n.setDisabled(true)}if(a!=undefined&&a!=null){a.setDisabled(true)}if(g!=undefined&&g!=null){g.setDisabled(true)}if(e!=undefined&&e!=null){e.setDisabled(true)}if(f!=undefined&&f!=null){f.setDisabled(true)}if(o!=undefined&&o!=null){o.setDisabled(true)}if(b!=undefined&&b!=null){b.setDisabled(true)}if(_ServerVariables.ObjectMetadata.isUpdateable){if(i!=undefined&&i!=null){i.setDisabled(false)}}else{if(i!=undefined&&i!=null){i.setDisabled(true)}}}if(l!=undefined&&l!=null){l.setDisabled(false)}if(m!=undefined&&m!=null){m.setDisabled(false)}if(d!=undefined&&d!=null){d.setDisabled(false)}if(ChangeServiceTargetButtonState!=undefined&&ChangeServiceTargetButtonState!=null){ChangeServiceTargetButtonState(ServiceTargetStatus)}refreshTaskListTimeOut();refreshTaskRelatedListTimeOut();if(_ServerVariables.ObjectMetadata.isCreateable){if(k!=undefined&&k!=null){k.setDisabled(false)}}else{if(k!=undefined&&k!=null){k.setDisabled(true)}}}stopWaitMsgBar()}function ChangeServiceTargetButtonState(a){var c=Ext.getCmp("servicetargets");var b=Ext.getCmp("ServiceTargetsButtonId");if(typeof(b!="undefined")&&b!=null){if(a==""){b.setDisabled(true)}else{b.setDisabled(false)}}if(typeof(c!="undefined")&&c!=null){if(a==""){c.disable()}else{c.enable()}}}function refreshTaskListTimeOut(){if(isNeedToRefreshTaskList&&isServiceCloudConsole!="true"){isNeedToRefreshTaskList=false;if(isRFConsoleDetailForm=="true"&&typeof(window.parent)!="undefined"&&typeof(window.parent)!=undefined){setTimeout(function(){window.parent.refreshListView("Task__c")},2000)}else{setTimeout(function(){doRefresh()},2000)}}}function startWaitMsgBar(){if(waitMsgBar!=""){waitMsgBar.setVisible(true)}}function setIsNeedToRefreshRelatedList(a){isNeedToRefreshRelatedList=a}function setIsNeedToRefreshTaskList(a){isNeedToRefreshTaskList=a}function stopWaitMsgBar(){if(waitMsgBar!=""&&waitMsgBar.isVisible()){waitMsgBar.setVisible(false)}}function disableDetailFormButtons(){Ext.getCmp("saveId").setDisabled(true);Ext.getCmp("undoId").setDisabled(true);disableActionMenuBtn(true);Ext.getCmp("taskFormBtnId").setDisabled(true);Ext.getCmp("taskReleatedListBtnId").setDisabled(true);disableAgentMenuBtn(true)}function TaskPageinReadMode(){Ext.getCmp("saveId").setDisabled(true);if(Ext.getCmp("closeButtonId")!=undefined&&Ext.getCmp("closeButtonId")!=null){Ext.getCmp("closeButtonId").setDisabled(true)}if(Ext.getCmp("quickCloseButtonId")!=undefined&&Ext.getCmp("quickCloseButtonId")!=null){Ext.getCmp("quickCloseButtonId").setDisabled(true)}if(Ext.getCmp("reopenButtonId")!=undefined&&Ext.getCmp("reopenButtonId")!=null){Ext.getCmp("reopenButtonId").setDisabled(true)}if(Ext.getCmp("Submitforapproval")!=undefined&&Ext.getCmp("Submitforapproval")!=null){Ext.getCmp("Submitforapproval").setDisabled(true)}}function RTFEnabledPage(){if(isRTFEnabledTaskPage=="true"){return true}else{if(isServiceCloudConsole!="true"&&isRFConsoleDetailForm&&window.parent.MultiPageLayout&&window.parent.MultiPageLayout.isEnabledForTS){var a=getLayoutKey();if(isRTFEnabledTaskPage.indexOf(a+",")>-1){return true}else{return false}}else{return false}}}function getLayoutKey(){var a="";if(formLayoutId&&formLayoutId.indexOf(NONPRINT)>-1){var b=formLayoutId.split(NONPRINT);if(b.length>1){a=b[0];return a}}if(window.parent.MultiPageLayout&&window.parent.MultiPageLayout.defaultLayoutTS){a=window.parent.MultiPageLayout.defaultLayoutTS}return a}function afterSaveSucceed(){if(!isDeleted){previousFormLayoutId=formLayoutId;isNeedToRefreshRelatedList=true;isNeedToRefreshTaskList=true;addOptionalToolbarItems();afterTaskDetailFrameLoad()}else{isNeedToRefreshTaskList=true;refreshTaskListTimeOut()}if(isActivityFeedEnabled==true){displayActivityFeed=true}if(isCISidebarEnabled==true){displayCISidebar=true}clickedOnce=false;layoutTypeClickedOnce=false;isLayoutChanged=false;if(isServiceCloudConsole=="true"){sforce.console.setTabUnsavedChanges(false)}Ext.getCmp("helpIconSeparator").show();Ext.getCmp("detailViewToolbarId").doLayout()}function hideMenu(){var b=Ext.getCmp("mainMenu");if(b!="undefined"&&b!=null&&b!=""){Ext.getCmp("mainMenu").hide()}var a=Ext.getCmp("AgentToolsMenu");if(a!="undefined"&&a!=null&&a!=""){Ext.getCmp("AgentToolsMenu").hide()}var c=Ext.getCmp("pageLayoutMenuItems");if(typeof(c)!="undefined"&&c){Ext.getCmp("pageLayoutMenuItems").hide()}}function disableAgentMenuBtn(a){if(disableAgentBtn){Ext.getCmp("agentToolsBtnId").setDisabled(true)}else{Ext.getCmp("agentToolsBtnId").setDisabled(a)}}function disableActionMenuBtn(a){if(disableActionBtn){Ext.getCmp("actionButton").setDisabled(true)}else{Ext.getCmp("actionButton").setDisabled(a)}}function disableAgentMenuItems(a){var b=Ext.getCmp("ServiceTargetsButtonId");if(Ext.getCmp("knowledgeSearchButtonId")!=undefined&&Ext.getCmp("knowledgeSearchButtonId")!=null){Ext.getCmp("knowledgeSearchButtonId").setDisabled(a)}if(Ext.getCmp("CiExplorerButtonId")!=undefined&&Ext.getCmp("CiExplorerButtonId")!=null){Ext.getCmp("CiExplorerButtonId").setDisabled(a)}if(b){b.setDisabled(a)}}function disableActionMenuItems(a){if(Ext.getCmp("cloneButtonId")!=undefined&&Ext.getCmp("cloneButtonId")!=null){Ext.getCmp("cloneButtonId").setDisabled(a)}if(Ext.getCmp("closeButtonId")!=undefined&&Ext.getCmp("closeButtonId")!=null){Ext.getCmp("closeButtonId").setDisabled(a)}if(Ext.getCmp("quickCloseButtonId")!=undefined&&Ext.getCmp("quickCloseButtonId")!=null){Ext.getCmp("quickCloseButtonId").setDisabled(a)}if(Ext.getCmp("reopenButtonId")!=undefined&&Ext.getCmp("reopenButtonId")!=null){Ext.getCmp("reopenButtonId").setDisabled(a)}if(Ext.getCmp("addNoteId")!=undefined&&Ext.getCmp("addNoteId")!=null){Ext.getCmp("addNoteId").setDisabled(a)}if(Ext.getCmp("emailId")!=undefined&&Ext.getCmp("emailId")!=null){Ext.getCmp("emailId").setDisabled(a)}if(Ext.getCmp("printId")!=undefined&&Ext.getCmp("printId")!=null){Ext.getCmp("printId").setDisabled(a)}if(Ext.getCmp("printPDFId")!=undefined&&Ext.getCmp("printPDFId")!=null){Ext.getCmp("printPDFId").setDisabled(a)}if(Ext.getCmp("newActionId")!=undefined&&Ext.getCmp("newActionId")!=null){Ext.getCmp("newActionId").setDisabled(a)}if(Ext.getCmp("Submitforapproval")!=undefined&&Ext.getCmp("Submitforapproval")!=null){Ext.getCmp("Submitforapproval").setDisabled(a)}}function refreshRelatedLists(){isNeedToRefreshRelatedList=true;refreshTaskRelatedListTimeOut()}function refreshTaskRelatedListTimeOut(){if(isNeedToRefreshRelatedList){var a=isFocusOnFormTab();setTimeout(function(){var b=document.getElementById("relatedListFrameId");b.src="/apex/ConsoleTaskRelatedList?id="+recordId+"&isdtp=vw&obj=Task__c";isNeedToRefreshRelatedList=false;addOnLoadEvent(b,afterTaskRelatedListFrameLoad);if(isActivityFeedEnabled==true&&recordId){loadContentsInActivityFeed(a)}if(isCISidebarEnabled==true&&recordId){loadContentsInRelatedCIs(a)}},2000)}}function setTabUnsavedChanges(){if(isServiceCloudConsole=="true"){sforce.console.setTabUnsavedChanges(true)}}function changeServiceTargetIcons(b,a){b.replaceCls("serviceTargetsEmpty","serviceTargetsDisable");b.replaceCls("serviceTargetsEnable","serviceTargetsDisable");b.replaceCls("serviceTargetsWarning","serviceTargetsDisable");b.replaceCls("serviceTargetsMissed","serviceTargetsDisable");if(a==TaskConsolePage.Labels.ServiceTargetsOK){b.replaceCls("serviceTargetsDisable","serviceTargetsEnable")}else{if(a==TaskConsolePage.Labels.ServiceTargetsMissed){b.replaceCls("serviceTargetsDisable","serviceTargetsMissed")}else{if(a==TaskConsolePage.Labels.ServiceTargetsWarning){b.replaceCls("serviceTargetsDisable","serviceTargetsWarning")}}}if(isNewTaskForm){b.replaceCls("serviceTargetsDisable","serviceTargetsEmpty")}else{b.dom.title=TaskConsolePage.Labels.ServiceTargets}}function handleServiceTargets(){screenHeight=400;screenWidth=1087;var a="FKTask__c='"+recordId+"'";if(!ServiceTargetsBtnHandlerWindow||ServiceTargetsBtnHandlerWindow.closed){ServiceTargetsBtnHandlerWindow=window.open("/apex/SearchPage?popupId=TaskServiceTarget&isLookup=true&filterClause="+escape(a)+"&standardLayout=true&iscalledFromConsole=true&popupFor=ServiceTargets&popupHeader="+SRTaskName,"ServiceTarget","status = 1,height ="+screenHeight+", width ="+screenWidth+",left="+screenLeft(screenWidth)+",top="+screenTop(screenHeight)+", resizable = 0,scrollbars=no")}if(ServiceTargetsBtnHandlerWindow.focus){ServiceTargetsBtnHandlerWindow.focus()}}var ServiceTargetsBtnHandler=function(a,b){screenHeight=400;screenWidth=1087;var c="FKTask__c='"+recordId+"'";ServiceTargetsBtnHandlerWindow=window.open("/apex/SearchPage?popupId=TaskServiceTarget&isLookup=true&filterClause="+escape(c)+"&standardLayout=true&iscalledFromConsole=true&popupFor=ServiceTargets&popupHeader="+taskName,"ServiceTarget","status = 1,height ="+screenHeight+", width ="+screenWidth+",left="+screenLeft(screenWidth)+",top="+screenTop(screenHeight)+", resizable = 0,scrollbars=no");if(ServiceTargetsBtnHandlerWindow.focus){ServiceTargetsBtnHandlerWindow.focus()}};document.onkeydown=function(g){var c,a,d;d=0;if(isRFConsoleDetailForm=="true"){c=window.parent;d=window.parent.count}a=window.self;var f=document.getElementById("detailsFrameId");var b="";if(f.src==""){b="ListViewNewButton"}else{if((typeof(f)!="undefined"&&f!=null)&&f.src!=""){b="newId"}}if(!isRFHotkeysDisabled){handleShortcuts(g,c,a,d,isRFConsoleDetailForm,b)}};function addSConsoleTab(c,b){try{SconsoletabName=b;sforce.console.openPrimaryTab(null,c,true," ",addSConsoleTabComplete)}catch(a){}}function addSConsoleTabComplete(a){try{if(a.success==true){var c=new Date();c.setYear(c.getFullYear()+10);document.cookie=SconsoletabName+"="+a.id+";path=/;SameSite=None;Secure;expires="+c.toUTCString()}else{if(Ext.util.Cookies.get(SconsoletabName)!=null){sforce.console.focusPrimaryTabById(Ext.util.Cookies.get(SconsoletabName))}}}catch(b){}}function refreshTaskFormTimeOut(){if(isNeedToRefreshForm){var a=isFocusOnFormTab();setTimeout(function(){isNeedToRefreshForm=false;var b=document.getElementById("detailsFrameId");b.src="/apex/ConsoleTaskDetail?id="+recordId;if(isActivityFeedEnabled==true){loadContentsInActivityFeed(a)}if(isCISidebarEnabled==true&&recordId){loadContentsInRelatedCIs(a)}},2000)}}function enableCustomActions(){var b=Ext.getCmp("mainMenu").items;if(b!="undefined"&&b!=null&&b!=""){for(var d=0;d<b.length;d++){var a=b.items[d];if(a.id!="undefined"&&a.openIn!="undefined"&&typeof(a.openIn)!="undefined"){Ext.getCmp(a.id).setDisabled(false)}}}var c=Ext.getCmp("AgentToolsMenu").items;if(c!="undefined"&&c!=null&&c!=""){for(var d=0;d<c.length;d++){var a=c.items[d];if(a.id!="undefined"&&a.openIn!="undefined"&&typeof(a.openIn)!="undefined"){Ext.getCmp(a.id).setDisabled(false)}}}}function loadContentsInActivityFeed(a){if(isCalledFromActivityFeed!=true){activityFeedRefreshStarted();var b=document.getElementById("taskSmartViewSidebarFrameId");if(typeof b!="undefined"&&b!=null){b.src="/apex/DeepView?id="+recordId+"&showSidebarOnly=true&moduleName=Task__c"}}isCalledFromActivityFeed=false;if(a){enableActivityFeed()}}function loadContentsInRelatedCIs(a){if(isBaseElementAccessible==true&&isServicesAndCISliderEnabled==true){RelatedCIRefreshStarted();var b=document.getElementById("relatedCISmartViewSidebarFrameId");if(typeof b!="undefined"&&b!=null){b.src="/apex/CIAssetSlideIn?id="+recordId+"&objName=Task__c"}if(a){enableRelatedCI()}}}function showHideToolbarItems(a){Ext.getCmp("taskStatusId").setVisible(a);Ext.getCmp("taskStatusAfterSpace").setVisible(a);Ext.getCmp("taskStatusSeparator").setVisible(a);Ext.getCmp("servicetargets").setVisible(a);Ext.getCmp("servicetargetsSeparator").setVisible(a);Ext.getCmp("servicetargetsSpace").setVisible(a)}function addOptionalToolbarItems(){if(!isOptionalItemsAdded){var a=Ext.getCmp("detailViewToolbarId");var b=0;if(isRFConsoleDetailForm!=="true"){a.insert(++b,{xtype:"label",id:"taskNameId",text:LabelNew,cls:"recordNumber"});a.insert(++b,{xtype:"tbspacer",width:5});a.insert(++b,"-");a.insert(++b,{xtype:"tbspacer",width:5})}a.insert(++b,{xtype:"label",id:"taskStatusId",text:status,cls:"recordStage"});a.insert(++b,{xtype:"tbspacer",id:"taskStatusAfterSpace",width:5});a.insert(++b,{xtype:"tbseparator",id:"taskStatusSeparator"});a.insert(++b,{xtype:"label",autoEl:{tag:"label",width:"25px",title:(recordId==null||recordId==""||recordId=="new")?"":TaskConsolePage.Labels.ServiceTargets},cls:"serviceTargetsEmpty",border:false,id:"servicetargets",disabled:(ServiceTargetStatus==""),listeners:{disable:function(d){changeServiceTargetIcons(d.getEl(),ServiceTargetStatus)},enable:function(d){changeServiceTargetIcons(d.getEl(),ServiceTargetStatus)},render:function(d){d.getEl().on({click:function(c){if(ServiceTargetStatus!=""){handleServiceTargets()}},scope:d})}}});a.insert(++b,{xtype:"tbseparator",id:"servicetargetsSeparator",});a.insert(++b,{xtype:"tbspacer",id:"servicetargetsSpace",width:10});isOptionalItemsAdded=true}}function addOnLoadEvent(b,a){if(b.addEventListener){b.addEventListener("load",a)}else{if(b.attachEvent){b.attachEvent("onload",a)}}}function changeLayout(a,b){startWaitMsgBar();formLayoutId=a;if(b){templateId=b}isLayoutChanged=true;loadTaskDetail(recordId)};