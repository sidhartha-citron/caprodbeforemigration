function callFuncOnBlur(f,d,c,a,b){if(document.getElementById(b).value==""){document.getElementById(a).nextSibling.value="";document.getElementById(a).value="";return}c=c.toLowerCase();if((change)&&(document.getElementById(b).value!="")){change=false;setTaboutValueID(a);if(c=="fkstatus__c"||c==orgNamespace.toLowerCase()+"fkstatus__c"){showalldata(f,setSelected,escape("state__c=false and appliesToProblem__c=true and inactive__c = false"))}else{if(c=="fkclosed_by__c"||c==orgNamespace.toLowerCase()+"fkclosed_by__c"){showalldata(f,setSelected,escape("IsStaffUser__c=true"))}else{if(c=="fkcategory__c"||c==orgNamespace.toLowerCase()+"fkcategory__c"){showalldata(f,setSelected,escape("Inactive__c=false AND UnAvailableForProblems__c = false"))}else{showalldata(f,setSelected)}}}}}function setSelected(){setTaboutValue()}function setTaboutValue(){if(inputHTMLElement1!=null&&inputHTMLElement1!=""&&inputHTMLElement1!="undefined"){oldVal=inputHTMLElement1.nextSibling.value;inputHTMLElement1.nextSibling.value=inputHTMLElement1.value}}function setTaboutValueID(a){if(a!=null&&a!=""){inputHTMLElement1=document.getElementById(a)}}function detectChangeEvent(){change=true}function setPopUpValue(a,b){if(a!=null&&a!=""&&a!="undefined"){if(inputHTMLElement!=null&&inputHTMLElement!=""&&inputHTMLElement!="undefined"){inputHTMLElement.value=a;oldVal=inputHTMLElement.previousSibling.value;inputHTMLElement.previousSibling.value=a;inputHTMLElement.previousSibling.previousSibling.previousSibling.value=htmlDecode(b)}}}function setPopUpValueID(a){if(a!=null&&a!=""){inputHTMLElement=document.getElementById(a)}}function openTextEditorPopup(g,b,e,c,d,f){var h;if(g.parentNode.previousSibling.previousSibling!=null){var a=g.parentNode.previousSibling.previousSibling;if(Ext.isIE){if(g.parentNode.previousSibling.childNodes[0]==null){h=a.querySelector(".clsRelativePosition").getElementsByTagName("textarea")[0].id}else{h=g.parentNode.previousSibling.childNodes[0].getElementsByTagName("textarea")[0].id}}else{if(a.querySelector(".clsRelativePosition")!=null){h=a.querySelector(".clsRelativePosition").getElementsByTagName("textarea")[0].id}}showTextEditor(h,b,e,c,d,300,450)}if(f!=null&&f!="undefined"&&f){Ext.getCmp("formTextId").el.dom.setAttribute("readOnly",true);Ext.getCmp("formTextId").addClass("disabledTextEditor");Ext.getCmp("formTextId").blur()}}function openPopUpForLookupPopup(e,a,b,d,c){showLookupPopup(e,a,b,d,c,"Problem__c","problem");return false}function setFSFieldDetail(i,d,b,a,f,g,h){if(document.getElementById(f)!=null){var c=document.getElementById(f);var e=document.getElementById(g);if(i.toLowerCase().indexOf("closed_date_time__c")>-1){CloseProblemPage.ComponentVars.closedDateTimeEle=c.id;c.disabled=true;c.className="dateInputDisable"}else{if(i.toLowerCase().indexOf("problem_resolution__c")>-1){CloseProblemPage.ComponentVars.problemResolution=c.id;c.title=CloseProblemPage.Labels.tooltipCloseformResolution;c.setAttribute("onchange","enableCheckboxes()")}else{if(i.toLowerCase().indexOf("fkclosed_by__c")>-1){CloseProblemPage.ComponentVars.closedByUserName=e.id;closedById=e.id}else{if(i.toLowerCase().indexOf("fkstatus__c")>-1){CloseProblemPage.ComponentVars.statusIdEle=c.id;CloseProblemPage.ComponentVars.statusNameEle=e.id;e.title=CloseProblemPage.Labels.tooltipCloseformStatus}else{if(i.toLowerCase().indexOf("fkcategory__c")>-1){CloseProblemPage.ComponentVars.categoryIdEle=c.id;CloseProblemPage.ComponentVars.categoryNameEle=e.id;e.title=CloseProblemPage.Labels.tooltipCloseformCategory}else{if(i.indexOf("FKStaff__c")>-1){staffId=e.id}}}}}}}}function initData(){objClosedBy=document.getElementById(CloseProblemPage.ComponentVars.closedByUserName);objStatus=document.getElementById(CloseProblemPage.ComponentVars.statusNameEle);if(objClosedBy!=null){objClosedBy.value=strClosedByUserName}if(objStatus!=null){objStatus.value=strStatusName}if(CloseProblemPage.ComponentVars.problemResolution!=""){document.getElementById(CloseProblemPage.ComponentVars.problemResolution).focus()}disabledCheckboxes()}var isClosedByEmpty="False";function ClosedByEmpty(){if(CloseProblemPage.ComponentVars.closedByUserName!=""){isClosedByEmpty="False";var a=document.getElementById(CloseProblemPage.ComponentVars.closedByUserName).value;if(a!=null&&a!=""){isClosedByEmpty="False"}else{isClosedByEmpty="True"}}}Ext.onReady(function(){if(!CloseProblemPage.Labels.isUpdateable){Ext.MessageBox.show({msg:CloseProblemPage.Labels.insufficentPrivilegeMsg,buttons:Ext.MessageBox.OK})}Ext.QuickTips.init();createFilterFieldMap();function b(){window.parent.frames.SIIframeID.disableAll()}var c=function(d,e){ClosedByEmpty();if(isClosedByEmpty=="False"){save()}else{Ext.MessageBox.show({msg:CloseProblemPage.Labels.ClosedBYEmpty,buttons:Ext.MessageBox.OK});return}};var a=Ext.extend(Ext.Panel,{renderTo:"btnToolbar",defaults:{bodyStyle:"border:0px;padding:0px;margin:0px;zoom:0px;"}});new a({title:"",cls:"toolCloseCls",bodyStyle:"border:0px;padding:0px;margin:0px;zoom:0px;",tbar:[{scale:"medium",iconCls:"bmcSave",disabled:!CloseProblemPage.Labels.isUpdateable,handler:c}]});initData()});function changeDescCheckboxStatus(){var b=getElementsByValue("isStdDescription","input");var a=getElementsByValue("isStdResolution","input");if(a[0].checked&&!b[0].checked){b[0].checked=true}}function getElementsByValue(g,a,f){var b=new Array();if(a==null){a="*"}if(f==null){f=document}var e=f.getElementsByTagName(a);var c=new RegExp(g,"i");for(var d=0;d<(e.length);d++){if(c.test(e[d].value)){b.push(e[d])}}return b}function closeWindow(){closeIncident()}function disableSIMenues(){if(window.parent.frames.SIIframeID!=null&&window.parent.frames.SIIframeID!="undefined"){window.parent.frames.SIIframeID.disableAll()}}function SendValueToParent(b){window.parent.setPopUpVar(b);window.parent.location.href=window.parent.location.href;parent.window.closePopup()}function enableCheckboxes(){if(CloseProblemPage.ComponentVars.problemResolution!=""){var a=getElementsByValue("isStdResolution","input");if(document.getElementById(CloseProblemPage.ComponentVars.problemResolution).value==""){a[0].disabled=true;a[0].checked=false}else{a[0].disabled=false}}}function disabledCheckboxes(){if(CloseProblemPage.ComponentVars.problemResolution!=""){if(document.getElementById(CloseProblemPage.ComponentVars.problemResolution).value==""){var b=getElementsByValue("isStdResolution","input");b[0].disabled=true}}if(CloseProblemPage.ComponentVars.problemDescription!=""){if(document.getElementById(CloseProblemPage.ComponentVars.problemDescription).value==""){var a=getElementsByValue("isStdDescription","input");a[0].disabled=true}}}function validateAndCloseWindow(){if(msgvalue==""){if(errormsg!=null&&errormsg!=""){showError()}else{if((errormsg==null||errormsg=="")&&(calledFrom=="stdform")){window.opener.location.href="/"+getProblemID();window.close()}else{if(calledFrom=="rfconsole"){var a=window.dialogArguments;var c=window.location.hash=!!window.MSInputMethodContext;if(typeof(window.opener)!="undefined"&&window.opener!="undefined"){window.opener.startWaitMsgBar();window.opener.isNeedToRefreshProblemList=true;window.opener.refreshProblem()}else{if(a!=null&&(typeof(window.opener)=="undefined"||window.opener=="undefined")&&(Ext.isIE||c)){a.startWaitMsgBar();a.isNeedToRefreshProblemList=true;a.refreshProblem()}}window.close()}else{var b=getProblemID();SendValueToParent(b)}}}}}function refreshRelatedPortlets(){if(typeof(window.parent.parent.parent.refreshActionItemsPortlet)=="function"){window.parent.parent.parent.refreshActionItemsPortlet("Action Items","PRB")}var a=CloseProblemPage.ComponentVars.closeTasksId;var b=CloseProblemPage.ComponentVars.closeIncidentsId;if(a.checked&&typeof(window.parent.parent.parent.refreshActionItemsPortlet)=="function"){window.parent.parent.parent.refreshActionItemsPortlet("Action Items","TASK")}if(b.checked&&typeof(window.parent.parent.parent.refreshActionItemsPortlet)=="function"){window.parent.parent.parent.refreshActionItemsPortlet("Action Items","INC")}};