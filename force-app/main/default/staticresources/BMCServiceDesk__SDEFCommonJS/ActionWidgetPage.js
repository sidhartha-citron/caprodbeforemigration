var grid,listData=[];var pagelbl="";var urlPrefix=getPrefixforURL();function getPrefixforURL(){if(typeof isLightningExperience!="undefined"&&isLightningExperience){return"/one/one.app#/alohaRedirect/apex/"+nameSpace+"__"}else{return"/apex/"}}Ext.onReady(function(){Ext.QuickTips.init();showTable();FetchActionItemsDataJS(pagelbl)});function FetchActionItemsDataJS(a){var b=new Ext.data.Connection();b.request({url:"FetchActionItemsData",method:"GET",params:{pagelbl:a},callback:function(c,o,g){if(o){var d=Ext.DomQuery,m=g.responseXML,e=d.selectNode("listdata",m);if(e.firstChild!=null){var n=decodeURIComponent(e.firstChild.nodeValue);n=n.replace(/\'|\]|\[/g,"");var p=new Array(3);p=n.split(",");if(listData.length>0&&a!=""){if(a=="INC"){for(var f=0;f<3;f++){listData[0][f]=p[f]}}else{if(a=="TASK"){for(var f=0;f<3;f++){listData[1][f]=p[f]}}else{if(a=="BROAD"){for(var f=0;f<3;f++){listData[2][f]=p[f]}}else{if(a=="CR"){for(var f=0;f<3;f++){listData[3][f]=p[f]}}else{if(a=="PRB"){for(var f=0;f<3;f++){listData[4][f]=p[f]}}}}}}}else{listData=new Array(3);var l=0;for(var h=0;h<5;h++){listData[h]=new Array(3);for(var f=0;f<3;f++){listData[h][f]=p[l++]}}}}setDataJS(listData);return}}})}function callListPage(a){var b=false;if(stdDashboardId!=null&&stdDashboardId!="undefined"&&stdDashboardId!=""&&stdDashboardId.indexOf("01Z")!=-1){b=true}if(a==ObjLabelIncidents){if((b)&&(isConsoleEnabled=="false")&&(isRFConsoleEnabled=="false")){window.open("/"+IncidentPrefix)}else{if((isRFConsoleEnabled=="true")&&isIncidentRFC){window.open(urlPrefix+"RemedyforceConsole?objectName=Incident__c")}else{if(isConsoleEnabled=="true"){window.open(incidentConsole)}else{window.parent.addNewTab("IncidentsPage",labelIncidents,"NavigatorPage?title="+ObjLabelIncidents+"&target=SearchPage?popupId=Incident%26view=list%26qsShMine=true","true")}}}}else{if(a==ObjLabelTasks){if((b)&&(isConsoleEnabled=="false")&&(isRFConsoleEnabled=="false")){window.open("/"+TaskPrefix)}else{if((isRFConsoleEnabled=="true")&&isTaskRFC){window.open(urlPrefix+"RemedyforceConsole?objectName=Task__c")}else{if(isConsoleEnabled=="true"){window.open(taskConsole)}else{window.parent.addNewTab("TasksPage",labelTasks,"NavigatorPage?title="+ObjLabelTasks+"&target=SearchPage?popupId=Task%26view=list%26qsShMine=true","true")}}}}else{if(a==ObjLabelBroadcasts){if(b){window.open("/"+BroadcastPrefix)}else{if((isRFConsoleEnabled=="true")&&isBroadcastRFC){window.open(urlPrefix+"RemedyforceConsole?objectName=Broadcasts__c")}else{window.parent.addNewTab("BroadcastsPage",labelBroadcasts,"NavigatorPage?title="+ObjLabelBroadcasts+"&target=SearchPage?popupId=Broadcast%26view=list%26qsShMine=true","true")}}}else{if(a==ObjLabelChangeRequests){if((b)&&(isRFConsoleEnabled=="false")){window.open("/"+ChangePrefix)}else{if((isRFConsoleEnabled=="true")&&isChangeRFC){window.open(urlPrefix+"RemedyforceConsole?objectName=Change_Request__c")}else{window.parent.addNewTab("ChangeRequestPage",labelChangeRequests,"NavigatorPage?title="+ObjLabelChangeRequests+"&target=SearchPage?popupId=Change%26view=list%26qsShMine=true","true")}}}else{if(a==ObjLabelProblems){if((b)&&(isRFConsoleEnabled=="false")){window.open("/"+ProblemPrefix)}else{if((isRFConsoleEnabled=="true")&&isProblemRFC){window.open(urlPrefix+"RemedyforceConsole?objectName=Problem__c")}else{window.parent.addNewTab("ProblemPage",labelProblems,"NavigatorPage?title="+ObjLabelProblems+"&target=SearchPage?popupId=Problem%26view=list%26qsShMine=true","true")}}}}}}}}function setDataJS(a){store.loadData(a);Ext.getCmp("grid").getView().refresh();document.getElementById("IncidentAI").title=ObjLabelIncidents;document.getElementById("TaskAI").title=ObjLabelTasks;document.getElementById("BroadcastAI").title=ObjLabelBroadcasts;document.getElementById("ChangeAI").title=ObjLabelChangeRequests;document.getElementById("ProblemAI").title=ObjLabelProblems}function renderIcon(k,b,e,j,m,l){var a=e.data.Name;if(a.length>18){a=Ext.util.Format.ellipsis(a,18)}var g=e.data.Count;var f=a+" "+g;var d="";var h="";var c="";switch(e.data.Image){case"Incident.png":d=resPath+"/SDEFimages/Incident_16X16.png";var i=('<img src="'+d+'" class="clsImageStyle" >');h="incidentMargin";c="IncidentAI";break;case"Task.png":d=resPath+"/SDEFimages/Task_16X16.png";var i=('<img src="'+d+'" class="clsImageStyle" >');h="taskMargin";c="TaskAI";break;case"exclamation_icon.gif":d=resPath+"/SDEFimages/exclamation_icon.gif";var i=('<img src="'+d+'" class="clsImageStyle1" >');h="broadcastMargin";c="BroadcastAI";break;case"ChangeRequest.png":d=resPath+"/SDEFimages/BMC_Change_16.gif";var i=('<img src="'+d+'" class="clsImageStyle1" >');h="changeRequestMargin";c="ChangeAI";break;case"Problem.png":d=resPath+"/SDEFimages/BMC_Problem_16.gif";var i=('<img src="'+d+'" class="clsImageStyle1" >');h="problemMargin";c="ProblemAI";break}var f='<div id="'+c+'" class="titleclass">'+a+'</div><div class="'+h+'">'+g+"</div>";return i+'<div class="clsGridPanelAc">'+f+"</div>"}function showTable(){store=new Ext.data.ArrayStore({fields:["Image","Name","Count"],data:listData});grid=new Ext.grid.GridPanel({cls:"Widgetcls",renderTo:"actionContents",id:"grid",store:store,columns:[{renderer:renderIcon,dataIndex:"Name"}],stripeRows:false,layout:"fit",stateful:true,height:Ext.isIE7?140:Ext.isIE8?135:130,stateId:"grid",autoScroll:false,viewConfig:{forceFit:true},autoFitColumns:true,listeners:{rowClick:function(f,e,c){var d=f.store.getAt(e);var g=d.get("Name");callListPage(g)},render:function(a){a.getView().el.select(".x-grid3-header").setStyle("display","none");a.getView().el.select("x-panel-body x-panel-body-noheader").setStyle("display","none")}}})};