if(propCalculateUrgency.toUpperCase()=="TRUE"){propCalculateUrgency=true}else{propCalculateUrgency=false}for(var i=0;i<urgencyHierarchyArray.length;i++){urgencyArray[i]=new Array(2);for(var j=0;j<urgencyArray[i].length;j++){if(j==0){urgencyArray[i][j]=urgencyHierarchyArray[i]}else{urgencyArray[i][j]=urgencyApivaluesArray[i]}}}Ext.onReady(function(){var a=new Ext.Toolbar({id:"urgencyToolbar",height:30,width:569,border:true,items:[{xtype:"box",id:"btnMoveUp",autoEl:{tag:"img",src:SDEFStylesPath+"/SDEFbuttons/b_control_up_disable.png",title:labelUp,name:"btnMoveUp"},style:"cursor:default;padding-left:5px;",listeners:{render:function(f){f.getEl().on("load",function(){if(document.images.btnMoveUp.getAttribute("isBtnDisabled")==null){document.images.btnMoveUp.setAttribute("isBtnDisabled",true)}});f.getEl().on("click",function(){if(document.images.btnMoveUp.getAttribute("isBtnDisabled")==false||document.images.btnMoveUp.getAttribute("isBtnDisabled")=="false"){moveSelectedRow(e,-1)}})}}},{xtype:"box",id:"btnMoveDown",autoEl:{tag:"img",src:SDEFStylesPath+"/SDEFbuttons/b_control_down_disable.png",title:labelDown,name:"btnMoveDown"},style:"cursor:default;",listeners:{render:function(f){f.getEl().on("load",function(){if(document.images.btnMoveDown.getAttribute("isBtnDisabled")==null){document.images.btnMoveDown.setAttribute("isBtnDisabled",true)}});f.getEl().on("click",function(){if(document.images.btnMoveDown.getAttribute("isBtnDisabled")=="false"||document.images.btnMoveDown.getAttribute("isBtnDisabled")==false){moveSelectedRow(e,1)}})}}}]});store=new Ext.data.ArrayStore({fields:[{name:"urgency"}]});store.loadData(urgencyHierarchyArray);var e=new Ext.grid.GridPanel({store:urgencyHierarchyArray,columns:[{id:"urgency",width:567,header:labelUrgencyOrder}],stripeRows:false,sortable:false,enableHdMenu:false,width:569,height:110,stateful:true,stateId:"grid",id:"urgency_grid",border:false,sm:new Ext.grid.RowSelectionModel({singleSelect:true})});e.on("click",function(){var f=e.getSelectionModel().getSelected();if(!f){return}selectedIndex=e.getStore().indexOf(f);checkSelectedIndex()});var d=new Ext.form.Checkbox({id:"recalculateUrgencyChk",cls:"classForCheckbox",boxLabel:labelRecalculateUrgency,checked:propCalculateUrgency,handler:function(){propCalculateUrgency=this.getValue()}});var c=new Ext.Panel({id:"UrgencyPanel",border:false,height:300,bodyStyle:"margin-left: 15px;margin-top: 10px;width:90%;",items:[a,e,d],renderTo:"mainDiv"});var b=new Ext.Panel({id:"EmailConversationPanel",border:false,tbar:[{scale:"medium",iconCls:"saveCls",tooltipType:"title",tooltip:savelabel,id:"saveBtn",handler:savehandler}],autoWidth:true,renderTo:"tbDiv"})});function enableDisableMoveUp(a){var b=document.images.btnMoveUp;if(a){b.src=SDEFStylesPath+"/SDEFbuttons/b_control_up.png";b.style.cursor="pointer";b.setAttribute("isBtnDisabled",false)}else{b.src=SDEFStylesPath+"/SDEFbuttons/b_control_up_disable.png";b.style.cursor="default";b.setAttribute("isBtnDisabled",true)}}function enableDisableMoveDown(a){var b=document.images.btnMoveDown;if(a){b.src=SDEFStylesPath+"/SDEFbuttons/b_control_down.png";b.style.cursor="pointer";b.setAttribute("isBtnDisabled",false)}else{b.src=SDEFStylesPath+"/SDEFbuttons/b_control_down_disable.png";b.style.cursor="default";b.setAttribute("isBtnDisabled",true)}}function checkSelectedIndex(){if(selectedIndex==0){enableDisableMoveUp(false);enableDisableMoveDown(false)}else{if(selectedIndex==1){enableDisableMoveUp(false);enableDisableMoveDown(true)}else{if(selectedIndex==urgencyHierarchyArray.length-1){enableDisableMoveUp(true);enableDisableMoveDown(false)}else{enableDisableMoveUp(true);enableDisableMoveDown(true)}}}}function moveSelectedRow(c,e){var a=c.getSelectionModel().getSelected();if(!a){return}var b=c.getStore().indexOf(a);selectedIndex=b;if(e<0){var d=urgencyHierarchyArray[selectedIndex];urgencyHierarchyArray[selectedIndex]=urgencyHierarchyArray[selectedIndex-1];urgencyHierarchyArray[selectedIndex-1]=d;var d=urgencyArray[selectedIndex];urgencyArray[selectedIndex]=urgencyArray[selectedIndex-1];urgencyArray[selectedIndex-1]=d;selectedIndex--;checkSelectedIndex();b--;if(b<0){return}}else{var d=urgencyHierarchyArray[selectedIndex];urgencyHierarchyArray[selectedIndex]=urgencyHierarchyArray[selectedIndex+1];urgencyHierarchyArray[selectedIndex+1]=d;var d=urgencyArray[selectedIndex];urgencyArray[selectedIndex]=urgencyArray[selectedIndex+1];urgencyArray[selectedIndex+1]=d;selectedIndex++;checkSelectedIndex();b++;if(b>=c.getStore().getCount()){return}}c.getStore().remove(a);c.getStore().insert(b,a);c.getSelectionModel().selectRow(b,true)}function savehandler(){var a=null;for(var b=0;b<urgencyArray.length;b++){if(a==null){a=urgencyArray[b][1]+";"}else{if(b==urgencyArray.length-1){a+=urgencyArray[b][1]+","}else{a+=urgencyArray[b][1]+";"}}}a=a.substring(0,a.length-1);save(a,propCalculateUrgency)}function saveComplete(a){if(a=="success"){showMessage(sucessMsg)}else{showMessage(errorMsg)}}function showMessage(a){Ext.MessageBox.show({width:250,title:msgTitle,msg:a,buttons:Ext.MessageBox.OK})};