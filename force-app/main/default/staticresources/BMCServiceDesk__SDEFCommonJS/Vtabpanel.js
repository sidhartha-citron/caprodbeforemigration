Ext.ns("Ext.ux");Ext.ux.TabPanel=function(a){if(a.tabPosition=="left"||a.tabPosition=="right"){a.cls=a.cls||"";a.cls="ux-vertical-tabs "+a.cls;if(a.textAlign&&a.textAlign=="right"){a.cls="ux-vertical-tabs-alignright "+a.cls}a.cls=(a.tabPosition=="left"?"ux-vertical-tabs-left ":"ux-vertical-tabs-right ")+a.cls;a.intendedTabPosition=a.tabPosition;a.verticalTabs=true;a.tabPosition="top"}else{a.verticalTabs=false}Ext.ux.TabPanel.superclass.constructor.call(this,a)};Ext.extend(Ext.ux.TabPanel,Ext.TabPanel,{tabWidth:150,afterRender:function(){Ext.ux.TabPanel.superclass.afterRender.call(this);if(this.verticalTabs){this.header.setWidth(this.tabWidth);this.header.setHeight(this.height||this.container.getHeight())}},adjustBodyWidth:function(a){if(this.verticalTabs){if(Ext.isIE6){this.bwrap.setWidth(a)}return a}else{return Ext.ux.TabPanel.superclass.adjustBodyWidth.call(this,a)}},adjustBodyHeight:function(a){if(this.verticalTabs){this.header.setHeight(a+(this.tbar?this.tbar.getHeight():0))}return Ext.ux.TabPanel.superclass.adjustBodyHeight.call(this,a)},getFrameWidth:function(){return Ext.ux.TabPanel.superclass.getFrameWidth.call(this)+this.verticalTabs?this.tabWidth:0},getFrameHeight:function(){return Ext.ux.TabPanel.superclass.getFrameHeight.call(this)-(this.verticalTabs?this.header.getHeight():0)},autoScrollTabs:function(){if(!this.verticalTabs){Ext.ux.TabPanel.superclass.autoScrollTabs.call(this);return}this.pos=this.header;var h=this.items.length;var b=this.pos.dom.clientHeight;var f=this.stripWrap;var e=f.dom;var d=e.offsetHeight;var a=this.getHeightOfAllTabs()+this.getScrollPos();if(!this.enableTabScroll||h<1||d<20){return}if(a<=b){if(this.scrolling){e.scrollTop=0;this.pos.setWidth(this.pos.getWidth()-0);this.scrolling=false;this.pos.removeClass("x-tab-scrolling");this.scrollTop.hide();this.scrollBottom.hide();if(Ext.isAir){this.pos.dom.style.marginRight=""}}}else{if(!this.scrolling){var c=this.pos.getWidth();var g=c+0;this.pos.addClass("x-tab-scrolling");this.pos.setWidth(g);f.setWidth(c);if(Ext.isAir){this.pos.dom.style.marginRight="0px"}if(!this.scrollTop){this.createScrollers()}else{this.scrollTop.show();this.scrollBottom.show()}}this.scrolling=true;if(this.getScrollPos()>(a-b)){f.dom.scrollTop=a-b}else{this.scrollToTab(this.activeTab,false)}this.updateScrollButtons();this.updateScrollersPosition()}},createScrollers:function(){if(!this.verticalTabs){Ext.ux.TabPanel.superclass.createScrollers.call(this);return}this.pos.addClass("x-tab-scrolling-"+this.tabPosition);var a=this.stripWrap.dom.offsetWidth;var b=this.pos.insertFirst({cls:"x-tab-scroller-top"});b.setWidth(a);b.addClassOnOver("x-tab-scroller-top-over");this.topRepeater=new Ext.util.ClickRepeater(b,{interval:this.scrollRepeatInterval,handler:this.onScrollTop,scope:this});this.scrollTop=b;var c=this.pos.insertFirst({cls:"x-tab-scroller-bottom"});c.setWidth(a);c.addClassOnOver("x-tab-scroller-bottom-over");this.bottomRepeater=new Ext.util.ClickRepeater(c,{interval:this.scrollRepeatInterval,handler:this.onScrollBottom,scope:this});this.scrollBottom=c},updateScrollersPosition:function(){if(!this.verticalTabs){return}if(!this.scrollTop||!this.scrollBottom){createScrollers()}this.scrollTop.setX(this.pos.getX()+this.pos.getWidth()-0);this.scrollBottom.setX(this.pos.getX()+this.pos.getWidth()-0);this.scrollBottom.setY(this.pos.getY()+this.pos.getHeight()-0)},getHeightOfAllTabs:function(){return this.edge.getOffsetsTo(this.stripWrap)[1]},getScrollHeight:function(){return this.getHeightOfAllTabs()+this.getScrollPos()},getScrollPos:function(){if(!this.verticalTabs){return Ext.ux.TabPanel.superclass.getScrollPos.call(this)}return parseInt(this.stripWrap.dom.scrollTop,10)||0},getScrollArea:function(){if(!this.verticalTabs){return Ext.ux.TabPanel.superclass.getScrollArea.call(this)}return parseInt(this.stripWrap.dom.clientHeight,10)||0},updateScrollButtons:function(){if(!this.verticalTabs){Ext.ux.TabPanel.superclass.updateScrollButtons.call(this);return}var a=this.getScrollPos();this.scrollTop[a==0?"addClass":"removeClass"]("x-tab-scroller-top-disabled");this.scrollBottom[(a+this.getScrollArea())>=this.getScrollHeight()?"addClass":"removeClass"]("x-tab-scroller-bottom-disabled")},onScrollBottom:function(){var a=this.getScrollHeight()-this.getScrollArea();var c=this.getScrollPos();var b=Math.min(a,c+this.getScrollIncrement());if(b!=c){this.scrollTo(b,this.animScroll)}},onScrollTop:function(){var b=this.getScrollPos();var a=Math.max(0,b-this.getScrollIncrement());if(a!=b){this.scrollTo(a,this.animScroll)}},scrollTo:function(b,a){if(!this.verticalTabs){Ext.ux.TabPanel.superclass.scrollTo.call(this,b,a);return}this.stripWrap.scrollTo("top",b,a?this.getScrollAnim():false);if(!a){this.updateScrollButtons()}}});