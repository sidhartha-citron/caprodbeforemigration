function getSelectedValues(){selectedValuesTobeSaved="";var a=Object.getOwnPropertyNames(itemSel.getValue());for(var b in a){if(!isNaN(b)&&(typeof itemSel.getValue()[b]!="undefined")){selectedValuesTobeSaved+=itemSel.getValue()[b]+spchar}}return selectedValuesTobeSaved}function waitbox(a){if(parseInt(a)>0){setTimeout("waitMsg.hide()",a)}waitMsg=new Ext.Window({height:100,width:200,resizable:false,closable:false,header:false,frame:false,modal:true,shadow:false,baseCls:"waitboxCls",items:[{xtype:"panel",height:100,width:200,border:false,bodyStyle:"background-color:transparent;border:none;",html:'<div align="center"><img src="'+tabOutImg+'"/></div>'}]});waitMsg.show()}function txtSearch(){waitbox(0);var a=Ext.getCmp("txtSrch").value;selectedValuesTobeSaved=getSelectedValues();searchPermissionSet(selectedValuesTobeSaved,a)}function resetHandler(){waitbox(0);Ext.getCmp("txtSrch").reset();selectedValuesTobeSaved=getSelectedValues();resetSearch()}function reloadItemSelector(){setAvailableData();itemSel.bindStore(dataStore);var a=selectedValuesTobeSaved.split(spchar);itemSel.setValue(a);waitMsg.hide()}var isOk=false;var isError=false;function showMessage(a){if(a!=""){showErrorMessage(a);isError=true}else{if(!isOk){showErrorMessage(savedSuccessfullyLabel)}else{if(isOk&&!isError){closeWindow()}}}waitMsg.hide()}function showErrorMessage(a){alertMsg=Ext.Msg.show({msg:a,buttons:Ext.Msg.OK});return}Ext.require(["Ext.form.Panel","Ext.ux.form.MultiSelect","Ext.ux.form.ItemSelector"]);Ext.onReady(function(){var availablePermissionLbl=new Ext.form.Label({id:"availablePermissionLbl",text:availablePermissionLabel,cls:"clsInputBoldLabelTDI"});var selectedPermissionLbl=new Ext.form.Label({id:"selectedPermissionLbl",text:selectedPermissionLabel,cls:"clsInputBoldLabelTDI selectedLabel_Cls"});var labelPanel=new Ext.Panel({border:false,id:"labelPanel",border:false,layout:"table",anchor:"100%",layoutConfig:{columns:2,align:"stretch"},bodyStyle:"width: 100%;",items:[availablePermissionLbl,selectedPermissionLbl]});var searchText={scale:"medium",xtype:"textfield",width:148,tooltipType:"title",emptyText:labelSrch,id:"txtSrch",listeners:{specialkey:function(field,e){if(e.getKey()==e.ENTER){txtSearch()}}}};var searchBtn={scale:"medium",iconCls:"bmcSearch",tooltip:labelSrch,tooltipType:"title",id:"searchBtn",handler:txtSearch};var resetBtn={scale:"medium",iconCls:"bmcResetOn",tooltip:labelRefresh,tooltipType:"title",id:"accBtnResetId",handler:resetHandler};var toolBar=new Ext.Toolbar({cls:"toolSpCls toolbar_Cls",id:"searchToolbar",width:223,items:[searchText,searchBtn,resetBtn]});dataStore=Ext.create("Ext.data.ArrayStore",{fields:["value","text"],sortInfo:{field:"value",direction:"ASC"}});setAvailableData();setSelectedData();eval(hiddenSelectedStore);itemSel=new Ext.ux.form.ItemSelector({id:"permissionSet_itemSel",anchor:"100%",height:400,cls:"itemselector_bodyCls",labelCls:"itemselector_labelCls",fieldBodyCls:"",allowBlank:true,store:dataStore,displayField:"text",valueField:"value",value:selectedPermissionSetList,buttons:["add","remove"],msgTarget:"side"});var permissionSetBtn=new Ext.container.ButtonGroup({xtype:"buttongroup",columns:3,cls:"btnRow_Gray",renderTo:"button_Bar",items:[{text:Oklbl,cls:"bgBtnGrey",handler:function(){saveHandler();isOk=true}},{text:cancellbl,cls:"bgBtnGrey",handler:function(){closeWindow()}},{text:applylbl,cls:"bgBtnGrey",handler:function(){saveHandler()}}]});var isForm=Ext.widget("form",{bodyPadding:10,renderTo:"itemselector",bodyCls:"form_bodyCls",maxWidth:540,items:[labelPanel,toolBar,itemSel]})});function saveHandler(){waitbox(0);selectedValuesTobeSaved=getSelectedValues();save(selectedValuesTobeSaved);isError=false}function closeWindow(){window.parent.closePopupRF()}if(typeof Object.getOwnPropertyNames!=="function"){Object.getOwnPropertyNames=function(c){var b=[];if(typeof c==="object"&&c!==null){for(var a in c){if(c.hasOwnProperty(a)){b.push(a)}}}return b}};