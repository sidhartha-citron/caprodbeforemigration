Ext.onReady(function(){Ext.require(["Ext.grid.*","Ext.data.*","Ext.ux.CheckColumn"]);Ext.QuickTips.init();var f=Ext.create("Ext.grid.plugin.CellEditing",{clicksToEdit:1});var k=Ext.create("Ext.grid.plugin.CellEditing",{clicksToEdit:1});var o;var d=0;var m;var j=new Ext.FormPanel({id:"TileRearrangePanel",border:false,autoWidth:true,border:0,style:"padding:15px;",tbar:[{xtype:"tbspacer",width:4},{scale:"medium",iconCls:"addCls",tooltipType:"title",tooltip:SSTileAddNewTile,id:"newId",listeners:{},handler:function(){var x=Ext.getCmp("deleteId");if(x!=null&&x!=""&&x!="undefined"){x.setDisabled(false)}var t=Ext.getCmp("linkGrid");if(t!=null&&t!=""&&t!="undefined"){t.setDisabled(false)}linkStore.filterBy(function(r,y){return false});var v=objFieldStore.getCount();if(v+1>MaxTileCount){Ext.MessageBox.show({id:"commonmsgbox",width:250,msg:maxLimitExceeded,cls:"rf-msg-cls",buttons:Ext.MessageBox.OK})}else{var u=1;for(index=0;index<objFieldStore.data.length;index++){if(parseInt(objFieldStore.getAt(index).get("order"))>u){u=parseInt(objFieldStore.getAt(index).get("order"))}}var w=u+1;d++;var s=Ext.create("objFieldStoremodel",{visible:true,title:"",description:"",entitlement:"",order:w.toString(),key:"CT"+new Date().getTime()+""+d,IsCustomTile:"true",isNewTile:true});objFieldStore.insert(0,s);o=objFieldStore.getAt(0).get("key");var p=document.images.linkUp;var q=document.images.linkDown;p.src=resourcesfilesvar+"/SDEFbuttons/b_control_up_disable.png";q.src=resourcesfilesvar+"/SDEFbuttons/b_control_down_disable.png";p.disabled=true;q.disabled=true;Ext.getCmp("deleteId1").setDisabled(true);f.startEditByPosition({row:0,column:2})}}}," ",{scale:"medium",iconCls:"deleteCls",tooltipType:"title",tooltip:SSTileRemoveTile,disabled:true,id:"deleteId",listeners:{},handler:function(){var p=false;Ext.MessageBox.defaultButton=2;Ext.MessageBox.show({id:"successmsgbox",width:250,msg:ssTileOrderConfimMessageForDeletingTile,buttons:Ext.MessageBox.YESNO,buttonText:{yes:LabelYes,no:LabelNo},fn:function(q){if(q=="yes"){n()}}})}}],items:[{xtype:"panel",height:275,border:0,items:[{xtype:"label",id:"headerLabelId",text:ssTileOrderDisplayOptions,hidden:true,cls:"displayoptionsLabel"},{xtype:"radiogroup",id:"radioGroupId",hidden:true,width:400,layout:{align:"stretch",type:"vbox"},fieldLabel:"",items:[{xtype:"radiofield",id:"leftID",boxLabel:ssTileOrderLeftDisplayOption,value:isLeft,name:"radioButtons"},{xtype:"radiofield",id:"rightID",boxLabel:ssTileOrderRightDisplayOption,value:isRight,name:"radioButtons"}]},{xtype:"gridpanel",id:"tileGrid",height:209,sytle:"padding-top:2px",store:objFieldStore,columns:[{id:"key",cls:"columHeader",header:"Key",dataIndex:"key",menuDisabled:true,hidden:true},{xtype:"checkcolumn",header:ssTileOrderVisibleCol,cls:"columHeader",menuDisabled:true,dataIndex:"visible",listeners:{checkchange:function(v,p,u){selectedTileRow=p;Ext.getCmp("tileGrid").getView().getSelectionModel().select(p);var t=objFieldStore.getAt(p).get("IsCustomTile");if(t=="false"){o=objFieldStore.getAt(p).get("key");linkStore.filterBy(function(w,x){if(w.get("ParentID")==o){return true}else{return false}});var s=Ext.getCmp("linkGrid");s.setDisabled(true);Ext.getCmp("deleteId").setDisabled(true);if(u==false){objFieldStore.getAt(p).set("isDirectLinkEnable","disabled")}else{objFieldStore.getAt(p).set("isDirectLinkEnable","true")}}else{o=objFieldStore.getAt(p).get("key");linkStore.filterBy(function(w,x){if(w.get("ParentID")==o){return true}else{return false}});var s=Ext.getCmp("linkGrid");s.setDisabled(false);Ext.getCmp("deleteId").setDisabled(false)}linkStore.sort("order","ASC");if(u==false){objFieldStore.getAt(p).set("order","")}if(objFieldStore.getAt(p).get("key")=="CHATTER"){if(!chatterEnabled){objFieldStore.getAt(p).set("visible",false)}}var q=document.images.linkUp;var r=document.images.linkDown;q.src=resourcesfilesvar+"/SDEFbuttons/b_control_up_disable.png";r.src=resourcesfilesvar+"/SDEFbuttons/b_control_down_disable.png";q.disabled=true;r.disabled=true;Ext.getCmp("deleteId1").setDisabled(true)}}},{id:"title",header:ssTileOrderTitleCol,cls:"columHeader",menuDisabled:true,dataIndex:"title",flex:0.5,renderer:"htmlEncode",editor:new Ext.form.TextField({allowBlank:false,listeners:{change:function(q,r,p){storeTileLinkData(objFieldStore,r,"title",selectedTileRow)},blur:function(p){objFieldStore.getAt(selectedTileRow).commit()}}})},{id:"description",header:ssTileOrderDescriptionCol,cls:"columHeader",menuDisabled:true,dataIndex:"description",flex:1,renderer:function(q,p){q=Ext.util.Format.htmlEncode(q);p.tdAttr='title="'+q+'"';return q},editor:new Ext.form.TextField({allowBlank:true,listeners:{change:function(q,r,p){storeTileLinkData(objFieldStore,r,"description",selectedTileRow)},blur:function(p){objFieldStore.getAt(selectedTileRow).commit()}}})},{id:"entitlement",menuDisabled:true,header:entitlementHeader,cls:"columHeader",align:"center",dataIndex:"entitlement",hidden:hideEntitlementColumn,renderer:function(t,r,p){var q=p.get("key");var v=p.get("entitlement");var s=p.get("visible");var u=p.get("title");u=escape(u);if(v&&s){return'<img id="img_'+q+'" src="'+entitlementImg+'" class="entitlementImgCls" title="'+configureEntitlement+'" alt="'+configureEntitlement+'" onclick="openEntitlementPopup(\''+v+"','"+u+"');\"/>"}else{return}}},{header:ssTileOrderOrderCol,cls:"columHeader",id:"orderId",menuDisabled:true,dataIndex:"order",editor:new Ext.form.field.ComboBox({typeAhead:true,editable:false,triggerAction:"all",selectOnTab:true,store:[["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"],["11","11"],["12","12"],["13","13"],["14","14"],["15","15"],["16","16"],["17","17"],["18","18"],["19","19"],["20","20"],["21","21"]],lazyRender:true,listClass:"x-combo-list-small"})},{menuDisabled:true,header:ssTileDirectLinkCol,cls:"columHeader",align:"center",dataIndex:"isDirectLinkEnable",renderer:function(s,r,p){var q=p.get("key");var t=p.get("title");if(q=="CMTKT"||s=="disabled"){return'<img id="img_'+q+'" src="'+directLinkImgDisabled+'" title="'+directLinkTooltip+'" alt="'+directLinkTooltip+'" disabled/>'}else{if(s=="true"){return'<img id="img_'+q+'" src="'+directLinkImg+'" class="directLinkImgCls" title="'+directLinkTooltip+'" alt="'+directLinkTooltip+'" onclick="showDirectLink(\''+q+"','"+Ext.String.escape(t)+"')\"/>"}}return" "}}],plugins:[f],listeners:{beforeedit:function(p,q){if(objFieldStore.getAt(q.rowIdx).get("IsCustomTile")!="true"){if(q.colIdx==5){return true}else{return false}}},itemclick:function(x,r,w,t,u,v){var s=objFieldStore.getAt(t).get("IsCustomTile");selectedTileRow=t;if(s=="false"){o=objFieldStore.getAt(t).get("key");Ext.getCmp("deleteId").setDisabled(true);linkStore.filterBy(function(y,z){if(y.get("ParentID")==o){return true}else{return false}});Ext.getCmp("linkGrid").setDisabled(true)}else{Ext.getCmp("deleteId").setDisabled(false);o=objFieldStore.getAt(t).get("key");Ext.getCmp("linkGrid").setDisabled(false);var p=document.images.linkUp;var q=document.images.linkDown;p.src=resourcesfilesvar+"/SDEFbuttons/b_control_up_disable.png";q.src=resourcesfilesvar+"/SDEFbuttons/b_control_down_disable.png";p.disabled=true;q.disabled=true;Ext.getCmp("deleteId1").setDisabled(true);linkStore.filterBy(function(y,z){if(y.get("ParentID")==o){return true}else{return false}});linkStore.sort("order","ASC")}}}},{xtype:"panel",border:0,cls:"fotterNoteCls",items:[{xtype:"label",id:"fotterNote",text:ssTileOrderNoteLabel}]}]}]});helpPanel=new Ext.Panel({id:"TileSSOrderinghelpPanelID",width:"100%",border:0});var g="tile_ordering.htm";helpLabel=new Ext.form.Label({id:"helpLink",border:0,cls:"helpCls",html:'<div style=\'width: 100%\' ><a class="clsHelpAnchorStyle" href="#" title="'+AdminContextHelpTooltip+"\"onClick=\"if(isNewContextpage() && wikiUrl!='' ){window.open('"+wikiUrl+"',false,'width='+screen.width+',height='+screen.height+',resizable = 1,scrollbars=yes,status=1,top=0,left=0',false)}else{window.open('"+parent.getStdFormHelpPath()+"/"+g+"',false,'width='+screen.width+',height='+screen.height+',resizable = 1,scrollbars=no,status=1,top=0,left=0',false)}\"><span class=\"helpLinkCls\">"+AdminContextHelpText+'</span><img id="helpIcon" src="'+parent.getSDFStylesResPath()+'/SDEFicons/help_icon.png" alt="" class="helpIconCls"></img></a></div>'});tileGridLabel=new Ext.form.Label({id:"tileGridLabel",border:0,html:'<div><h2 style="margin-left:15px;margin-top:10px;color:#004376;font-weight: bold;font-family: tahoma,arial,verdana,sans-serif;">'+tileGridLabel+"</h2></div>"});helpPanel.add([helpLabel,tileGridLabel]);var k=Ext.create("Ext.grid.plugin.CellEditing",{clicksToEdit:1});var l=Ext.create("Ext.grid.Panel",{id:"linkGrid",stripeRows:true,border:true,autoWidth:true,store:linkStore,layout:{type:"hbox",align:"stretch"},height:250,columns:[{id:"linkname",header:ssTileOrderCustLinkNameCol,dataIndex:"linkname",flex:1,renderer:"htmlEncode",cls:"columHeader",editor:new Ext.form.TextField({allowBlank:false,listeners:{change:function(q,r,p){storeTileLinkData(linkStore,r,"linkname",m)},blur:function(p){linkStore.getAt(m).commit()}}})},{id:"linkURL",header:ssTileOrderCustLinkUrlCol,dataIndex:"linkURL",flex:1,cls:"columHeader",renderer:"htmlEncode",editor:new Ext.form.TextField({allowBlank:false,listeners:{change:function(q,r,p){storeTileLinkData(linkStore,r,"linkURL",m)},blur:function(p){linkStore.getAt(m).commit()}}})},{id:"linkDesc",header:ssTileOrderDescriptionCol,dataIndex:"linkDesc",flex:1,cls:"columHeader",renderer:"htmlEncode",editor:new Ext.form.TextField({allowBlank:true,listeners:{change:function(q,r,p){storeTileLinkData(linkStore,r,"linkDesc",m)},blur:function(p){linkStore.getAt(m).commit()}}})}],renderTo:quickLinksGrid,tbar:[{xtype:"tbspacer",width:3},{scale:"medium",iconCls:"addCls",tooltipType:"title",tooltip:SSTileAddNewLink,id:"newId1",listeners:{},handler:function(){var s=linkStore.getCount();if(s+1>MaxLinkCount){Ext.MessageBox.show({id:"commonmsgbox",width:250,msg:maxLinkLimitExceeded,cls:"rf-msg-cls",buttons:Ext.MessageBox.OK})}else{m=0;a();d++;var q=Ext.create("customLinks",{key:new Date().getTime()+""+d,linkname:"",linkURL:"",linkDesc:"",ParentID:o,order:1,isNewLink:true});linkStore.insert(0,q);if(linkStore.data.length>1){for(count=1;count<linkStore.data.length;count++){var p=parseInt(linkStore.getAt(count).get("order"));p=p+1;linkStore.getAt(count).set("order",p.toString())}}k.startEdit(0,0)}}}," ",{scale:"medium",iconCls:"deleteCls",tooltipType:"title",tooltip:SSTileRemoveLink,disabled:true,id:"deleteId1",handler:function(){var s=l.getView().getSelectionModel().getSelection()[0];var t=parseInt(s.get("order"));if(s){linkStore.remove(s);removeLinkStr=removeLinkStr+s.get("key")+",";if(linkStore.data.length>=1){for(count=0;count<linkStore.data.length;count++){var p=parseInt(linkStore.getAt(count).get("order"));if(p>t){p=p-1;linkStore.getAt(count).set("order",p.toString())}}}}var q=document.images.linkUp;var r=document.images.linkDown;q.src=resourcesfilesvar+"/SDEFbuttons/b_control_up_disable.png";r.src=resourcesfilesvar+"/SDEFbuttons/b_control_down_disable.png";q.disabled=true;r.disabled=true;Ext.getCmp("deleteId1").setDisabled(true)},listeners:{}}," ",{xtype:"box",id:"upBtn",autoEl:{tag:"img",src:""+resourcesfilesvar+"/SDEFbuttons/b_control_up_disable.png",title:iconup,name:"linkUp"},cls:"upBtn",listeners:{render:function(q){var p=document.images.linkUp;p.disabled=true;q.getEl().on("click",function(){if(Ext.getCmp("upBtn").disabled==false){i("up")}})}}},{xtype:"box",id:"downBtn",autoEl:{tag:"img",src:""+resourcesfilesvar+"/SDEFbuttons/b_control_down_disable.png",title:icondown,name:"linkDown"},cls:"downBtn",listeners:{render:function(q){var p=document.images.linkDown;p.disabled=true;q.getEl().on("click",function(){if(Ext.getCmp("downBtn").disabled==false){i("down")}})}}}],listeners:{itemclick:function(q,p,t,r,u,s){m=r;rowIndex=r;Ext.getCmp("deleteId1").setDisabled(false);a()}},plugins:[k]});Ext.getCmp("tileGrid").getView().getSelectionModel().select(0);var o=objFieldStore.getAt(0).get("key");linkStore.filterBy(function(p,q){if(p.get("ParentID")==o){return true}else{return false}});var h=objFieldStore.getAt(0).get("IsCustomTile");if(h=="false"){Ext.getCmp("linkGrid").setDisabled(true)}function i(w){var p;var v=linkStore.getCount();var s=m;var q=linkStore.getAt(s);var u;if(!q){return}if(w=="up"){if(s<=0){return}s--;p=parseInt(linkStore.getAt(s).get("order"));var r=p+1;linkStore.getAt(s).set("order",r.toString());u=linkStore.getAt(s);if(s<0){return}var t=l.getView().getSelectionModel().getSelection()[0];q.set("order",p.toString());if(q){linkStore.remove(q)}linkStore.insert(s,q);m--;a()}else{s++;if(s>=v){return}p=parseInt(linkStore.getAt(s).get("order"));var r=p-1;linkStore.getAt(s).set("order",r.toString());var t=l.getView().getSelectionModel().getSelection()[0];q.set("order",p.toString());if(q){linkStore.remove(q)}linkStore.insert(s,q);m++;a()}l.getSelectionModel().select(m)}function c(){if(Ext.getCmp("upBtn").disabled==false){var p=m;var r=linkStore.getAt(p);var q=linkStore.getAt(p-1);linkStore.insert(2,q);linkStore.insert(1,r);Ext.getCmp("linksGrid").getView().refresh();m--;var s=linkStore.data.length;if(m==0||s==1){Ext.getCmp("upBtn").setDisabled(true)}else{Ext.getCmp("upBtn").setDisabled(false)}if((m==(s-1))||(s==1)){Ext.getCmp("downBtn").setDisabled(true)}else{Ext.getCmp("downBtn").setDisabled(false)}}}function a(){var p=document.images.linkUp;var q=document.images.linkDown;var r=linkStore.getCount();if(m==0||r==1){p.disabled=true;p.src=resourcesfilesvar+"/SDEFbuttons/b_control_up_disable.png"}else{p.disabled=false;p.src=resourcesfilesvar+"/SDEFbuttons/b_control_up.png"}if((m==(r-1))||(r==1)||(r==0)){q.disabled=true;q.src=resourcesfilesvar+"/SDEFbuttons/b_control_down_disable.png"}else{q.disabled=false;q.src=resourcesfilesvar+"/SDEFbuttons/b_control_down.png"}}var e=new Ext.Panel({id:"mainPanel",tbar:b(),border:0,height:500,autoWidth:true,items:[helpPanel,j],renderTo:"mainDiv"});function b(){var p=new Ext.Toolbar({border:false,height:40,margins:"0 0 0 0",autoWidth:true,items:[{scale:"medium",iconCls:"saveCls",id:"save",tooltipType:"title",tooltip:saveLbl,id:"saveBtn",handler:savehandler}]});return p}window.getIsLeft=function(){return j.getForm().findField("leftID").getValue()};window.setIsLeft=function(p){return j.getForm().findField("leftID").setValue(p)};window.setIsRight=function(p){return j.getForm().findField("rightID").setValue(p)};setIsLeft(isLeft);setIsRight(isRight);function n(){var p=Ext.getCmp("tileGrid").getView().getSelectionModel().getSelection()[0];if(p){objFieldStore.remove(p)}for(var r=linkStore.data.length-1;r>=0;r--){if(linkStore.getAt(r).get("ParentID")==p.get("key")){linkStore.removeAt(r)}}removeLinkStr=removeLinkStr+p.get("key")+",";linkStore.filterBy(function(s,t){return false});var q=Ext.getCmp("linkGrid");q.setDisabled(true);Ext.getCmp("deleteId").setDisabled(true)}});var isLeft,isRight;var linkStore,comboStoreData,comboStore;function setupUI(){Ext.define("objFieldStoremodel",{extend:"Ext.data.Model",fields:[{name:"visible",type:"bool"},{name:"title"},{name:"description"},{name:"entitlement"},{name:"order",sortType:"asInt"},{name:"key"},{name:"IsCustomTile"},{name:"isDirectLinkEnable"},{name:"isNewTile",type:"bool"}]});objFieldStore=new Ext.data.ArrayStore({id:"objFieldStore",model:"objFieldStoremodel",proxy:{type:"ajax",reader:{type:"json",root:"items"}}});Ext.define("customLinks",{extend:"Ext.data.Model",fields:[{name:"key",type:"string"},{name:"linkname",type:"string"},{name:"linkURL",type:"string"},{name:"linkDesc",type:"string"},{name:"order",type:"string"},{name:"ParentID",type:"string"},{name:"isNewLink",type:"bool"},{name:"isDirectLinkEnable",type:"string"}]});linkStore=Ext.create("Ext.data.Store",{model:"customLinks",proxy:{type:"ajax",reader:{type:"json",root:"items"}}});objFieldStore.loadData(tileStoreData);objFieldStore.sort("order");linkStore.loadData(linkStoreData);linkStore.sort("order");if(tilePosition=="RIGHT"){isLeft=false;isRight=true}else{isRight=false;isLeft=true}comboStoreData="[";for(var a=0;a<objFieldStore.data.length;a++){comboStoreData=comboStoreData+'["'+(a+1)+'","'+(a+1)+'"],'}comboStoreData=comboStoreData.substring(0,comboStoreData.length-1)+"]";comboStore=new Ext.data.ArrayStore({id:"comboStore",fields:[{name:"id"},{name:"value"}]})}function showMessage(a){Ext.MessageBox.show({id:"commonmsgbox",width:250,title:errAlertTitle,msg:a,cls:"rf-msg-cls",buttons:Ext.MessageBox.OK});waitMsg.hide()}function showSuccessMessage(a){Ext.MessageBox.show({id:"successmsgbox",width:250,title:alertTitle,msg:a,cls:"rf-msg-cls",buttons:Ext.MessageBox.OK});waitMsg.hide()}function confirmBeforeSave(c,a,d,b){Ext.MessageBox.show({title:alertTitle,msg:c,buttons:Ext.Msg.YESNO,fn:function(e){if(e==="yes"){save(a,d,b)}else{objFieldStore.rejectChanges();objFieldStore.sort("order","ASC")}},icon:Ext.MessageBox.WARNING});waitMsg.hide()}function saveoncompletefun(storedata){linkgridstore=storedata;eval(storedata);linkStore.loadData(linkStoreData);linkStore.sort("order","ASC");Ext.getCmp("tileGrid").getView().getSelectionModel().select(selectedTileRow);var tileID=objFieldStore.getAt(selectedTileRow).get("key");linkStore.filterBy(function(record,id){if(record.get("ParentID")==tileID){return true}else{return false}});if((objFieldStore.getAt(selectedTileRow).get("IsCustomTile")!="true")){var link=Ext.getCmp("linkGrid");link.setDisabled(true);Ext.getCmp("deleteId").setDisabled(true)}else{var link=Ext.getCmp("linkGrid");link.setDisabled(false);Ext.getCmp("deleteId").setDisabled(false)}var linkUpBtn=document.images.linkUp;var linkDownBtn=document.images.linkDown;linkUpBtn.src=resourcesfilesvar+"/SDEFbuttons/b_control_up_disable.png";linkDownBtn.src=resourcesfilesvar+"/SDEFbuttons/b_control_down_disable.png";linkUpBtn.disabled=true;linkDownBtn.disabled=true;Ext.getCmp("deleteId1").setDisabled(true)}var finalSettingString="";function savehandler(){var b=false;b=validateURL();if(!b){return}else{var h=false;var a=false;finalSettingString="";var d=Ext.getCmp("tileGrid").store;var f;var j="";objFieldStore.commitChanges();objFieldStore.sort("order","ASC");var n=1;var m=false;var t=-1;for(index=0;index<objFieldStore.data.length;index++){var s=objFieldStore.getAt(index).get("order");if(s!=""&&s!="null"){if(s==t){m=true}t=s;if(s&&parseInt(s)!=n){objFieldStore.getAt(index).beginEdit();objFieldStore.getAt(index).set("order",n.toString());objFieldStore.getAt(index).endEdit(true,["order"])}n++}}for(f=0;f<objFieldStore.data.length;f++){if(finalSettingString==""||finalSettingString==null){finalSettingString=objFieldStore.getAt(f).get("key")+PE+objFieldStore.getAt(f).get("title")+PE+objFieldStore.getAt(f).get("description")+PE+objFieldStore.getAt(f).get("visible")+PE+objFieldStore.getAt(f).get("order")+PE+null+PE+null+PE+objFieldStore.getAt(f).get("IsCustomTile")+PE+objFieldStore.getAt(f).get("isNewTile")+EF}else{finalSettingString=finalSettingString+objFieldStore.getAt(f).get("key")+PE+objFieldStore.getAt(f).get("title")+PE+objFieldStore.getAt(f).get("description")+PE+objFieldStore.getAt(f).get("visible")+PE+objFieldStore.getAt(f).get("order")+PE+null+PE+null+PE+objFieldStore.getAt(f).get("IsCustomTile")+PE+objFieldStore.getAt(f).get("isNewTile")+EF}}linkStore.clearFilter();for(f=0;f<linkStore.data.length;f++){if(linkStore.getAt(f).get("linkname")!=""&&linkStore.getAt(f).get("linkURL")!=""){if(j==null||j==""){j=linkStore.getAt(f).get("ParentID")}else{j=j+","+linkStore.getAt(f).get("ParentID")}finalSettingString=finalSettingString+linkStore.getAt(f).get("key")+PE+linkStore.getAt(f).get("linkname")+PE+linkStore.getAt(f).get("linkDesc")+PE+true+PE+linkStore.getAt(f).get("order")+PE+linkStore.getAt(f).get("linkURL")+PE+linkStore.getAt(f).get("ParentID")+PE+true+PE+linkStore.getAt(f).get("isNewLink")+EF}}var p=false;for(f=0;f<objFieldStore.data.length;f++){var g=objFieldStore.getAt(f).get("key");var l=objFieldStore.getAt(f).get("visible");if(objFieldStore.getAt(f).get("IsCustomTile")=="true"&&j.indexOf(g)<0&&l==true){p=true;break}}waitbox(0);var r=false;var q=false;var e=getIsLeft();if(e==true){tilePosition="LEFT"}else{tilePosition="RIGHT"}objFieldStore.sort("order","ASC");var k=0,c=0;for(var o=0;o<objFieldStore.data.length;o++){var l=objFieldStore.getAt(o).get("visible");var n=objFieldStore.getAt(o).get("order");if(l==true){if((n=="")||(n==0)){r=true}}if(objFieldStore.getAt(o).get("title")==""){a=true;break}}if(m==true||r==true||p==true||h==true||a==true){if(r==true){showMessage(ssTileOrdervisibleTileWithoutOrder)}else{if(h==true){showMessage("Please enter required fields for Links")}else{if(p==true){showMessage(linkNumberValidation)}else{if(a==true){showMessage(ssTileOrderErrorMessageForTileRequiredFields)}else{if(m==true){confirmBeforeSave(SSTileOrderWarnMessageForRepeatingOrder,tilePosition,finalSettingString,removeLinkStr);return false}}}}}var g=objFieldStore.getAt(selectedTileRow).get("key");linkStore.filterBy(function(i,u){if(i.get("ParentID")==g){return true}else{return false}})}else{save(tilePosition,finalSettingString,removeLinkStr)}}}function waitbox(a){if(parseInt(a)>0){setTimeout("waitMsg.hide()",a)}waitMsg=new Ext.Window({height:100,width:200,resizable:false,closable:false,header:false,frame:false,modal:true,shadow:false,baseCls:"waitboxCls",items:[{xtype:"panel",height:100,width:200,border:false,bodyStyle:"background-color:transparent;border:none;",html:'<div align="center"><img src="'+tabOutImg+'"/></div>'}]});waitMsg.show()}function validateURL(){var c;var f=false;for(c=0;c<linkStore.data.length;c++){var b=linkStore.getAt(c);var a=b.get("linkURL");var e=b.get("linkname");if(e!=""&&a==""){var d=invalidURL;showMessage(d);return false}}return true}function storeTileLinkData(d,c,b,a){d.getAt(a).beginEdit();d.getAt(a).set(b,c);d.getAt(a).endEdit(true,[b])}function openEntitlementPopup(b,d){var c=document.getElementById("AdminSSTileOrder");c.classList.add("disabledDiv");var a=document.getElementById("EntitlementPopup");a.style.display="block";RemedyForceHTMLProcessor.setText(document.getElementById("headerLabel"),unescape(entitlementLabel+" ("+d+")"));scope.$apply(function(){scope.displaySpinner=true;var e={objectId:b,objectAPIName:"SSCustomTileAndLink__c"};scope.getSelectedAccounts(e)});getEntitlementData(b,d)}function showDirectLink(b,e){var d=ssTileDirectLinkCol+": "+e;var a=ssSiteURL+b.toLowerCase();var c=new Ext.Window({title:d,layout:{type:"vbox",align:"stretch"},cls:"winHeaderClass directLinkCls",width:500,autoHeight:true,modal:true,closable:true,resizable:false,items:[{xtype:"tbspacer",height:"7px"},{xtype:"label",cls:"directLinkCls",style:"padding:5px 7px;",text:tileDirectLinkInfoMessage},{xtype:"tbspacer",height:"7px"},{id:"tileDirectLink",xtype:"textfield",width:350,cls:"directLinkCls",height:"22px",style:"margin: 0 7px;",enableKeyEvents:true,readOnly:true,focusOnToFront:true,selectOnFocus:true,value:a},{xtype:"tbspacer",height:"10px"}],buttonAlign:"center",buttons:[{text:closeBtnLabel,cls:"directLinkCls",height:"22px",handler:function(){c.close()}}]}).show();Ext.getCmp("tileDirectLink").focus(true,200)};