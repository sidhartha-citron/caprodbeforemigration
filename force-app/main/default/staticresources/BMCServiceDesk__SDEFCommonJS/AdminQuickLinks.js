function replaceSpecialChars(){strvalue=strvalue.replace(/</g,"&lt;");strvalue=strvalue.replace(/>/g,"&gt;")}function enableDisableButtons(){if(document.getElementById(quicklink).checked&&isQLCreateable){Ext.getCmp("newId").setDisabled(false)}else{Ext.getCmp("deleteId").setDisabled(true);Ext.getCmp("upBtn").setDisabled(true);Ext.getCmp("downBtn").setDisabled(true);Ext.getCmp("newId").setDisabled(true)}}var removeHandler=function(c,d){var b=Ext.getCmp("faqCategoryGrid").store;var e=b.getAt(selectedRowIndex).get("quickLinkName");var a=b.getAt(selectedRowIndex).get("quickLinkURL");if((e==null||e=="")&&(a==null||a=="")){c="ok";removeQuickLinkHandler(c,d)}else{Ext.Msg.show({cls:"messagePopup",title:removeQuickLinkLabel,msg:quickLinksDeleteConfirmationLabel,buttons:Ext.Msg.OKCANCEL,fn:removeQuickLinkHandler,width:300,icon:Ext.MessageBox.WARNING,frame:false})}};var removeQuickLinkHandler=function(b,d){if(b=="ok"){var a=Ext.getCmp("faqCategoryGrid").getStore().getAt(selectedRowIndex);var c=a.get("quickLinkNumber");deleteQuickLink(c);waitbox(0);Ext.getCmp("faqCategoryGrid").render("faqCategory-grid");Ext.getCmp("faqCategoryGrid").getStore().remove(a);Ext.getCmp("deleteId").setDisabled(true);Ext.getCmp("upBtn").setDisabled(true);Ext.getCmp("downBtn").setDisabled(true)}else{if(b=="cancel"){return}}};var SaveBtnHandler=function(e,a){var j=Ext.getCmp("faqCategoryGrid").getStore().getModifiedRecords();var j=Ext.getCmp("faqCategoryGrid").getStore().getModifiedRecords();var i=Ext.getCmp("faqCategoryGrid").getStore().getTotalCount();var c=Ext.getCmp("faqCategoryGrid").getStore().getCount();var g;objList="";var h=Ext.getCmp("faqCategoryGrid").store;if((j==null||j=="")&&(c>i)){objList=objList+"undefined"+PE+"undefined"+PE+"undefined"+PE+"undefined"+PE+"undefined"+EF}else{var f;var d;for(g=0;g<h.data.length;g++){f=httpIntranetUrlCheck(h.getAt(g).get("quickLinkURL"));if(!f){var b=invalidQuickLinkURLLabel;showMessage(b);return}d=h.getAt(g).get("quickLinkName");if(d.length>50){var b=SSQuickLinkNameInvalidSizeLabel;showMessage(b);return}recName=h.getAt(g).get("quickLinkNumber");recURLOrder=g+1;recQuickLinkName=h.getAt(g).get("quickLinkName");recQuickLinkURL=h.getAt(g).get("quickLinkURL");recQuickLinkPermanent=h.getAt(g).get("quickLinkPermanent");objList=objList+recName+PE+recURLOrder+PE+recQuickLinkName+PE+recQuickLinkURL+PE+recQuickLinkPermanent+EF}}updateObjList(objList);Ext.getCmp("faqCategoryGrid").getStore().commitChanges();Ext.getCmp("faqCategoryGrid").render("faqCategory-grid");waitbox(0)};var ResetBtnHandler=function(a,b){reset()};Ext.ns("Ext.ux.grid");Ext.ux.grid.CheckColumn=function(a){Ext.apply(this,a);if(!this.id){this.id=Ext.id()}this.renderer=this.renderer.createDelegate(this)};Ext.ux.grid.CheckColumn.prototype={init:function(a){this.grid=a;this.grid.on("render",function(){var b=this.grid.getView();b.mainBody.on("mousedown",this.onMouseDown,this)},this)},onMouseDown:function(d,c){if(c.className&&c.className.indexOf("x-grid3-cc-"+this.id)!=-1){d.stopEvent();var b=this.grid.getView().findRowIndex(c);var a=this.grid.store.getAt(b);a.set(this.dataIndex,!a.data[this.dataIndex])}},renderer:function(b,c,a){c.css+=" x-grid3-check-col-td";return'<div class="x-grid3-check-col'+(b?"-on":"")+" x-grid3-cc-"+this.id+'">&#160;</div>'}};Ext.preg("checkcolumn",Ext.ux.grid.CheckColumn);Ext.grid.CheckColumn=Ext.ux.grid.CheckColumn;var SamplePanelQ=Ext.extend(Ext.Panel,{renderTo:"quickBtnToolbar",defaults:{bodyStyle:"border:0px;padding:0px;margin:0px;zoom:0px;"}});var SamplePanel=Ext.extend(Ext.Panel,{renderTo:"btnToolbar",defaults:{bodyStyle:"border:0px;padding:0px;margin:0px;zoom:0px;"}});function UpBtnHandler(){if(Ext.getCmp("upBtn").disabled==false){var a=selectedRowIndex;var c=grid.store.getAt(a);var b=grid.store.getAt(a-1);grid.stopEditing();store.insert(a-1,c);store.insert(a,b);grid.getView().refresh();selectedRowIndex--;var d=store.data.length;if(selectedRowIndex==0||d==1){Ext.getCmp("upBtn").setDisabled(true)}else{Ext.getCmp("upBtn").setDisabled(false)}if((selectedRowIndex==(d-1))||(d==1)){Ext.getCmp("downBtn").setDisabled(true)}else{Ext.getCmp("downBtn").setDisabled(false)}}}function DownBtnHandler(){if(Ext.getCmp("downBtn").disabled==false){var a=selectedRowIndex;var c=grid.store.getAt(a);var b=grid.store.getAt(a+1);grid.stopEditing();store.insert(a,b);store.insert(a+1,c);grid.getView().refresh();selectedRowIndex++;var d=store.data.length;if(selectedRowIndex==0||d==1){Ext.getCmp("upBtn").setDisabled(true)}else{Ext.getCmp("upBtn").setDisabled(false)}if((selectedRowIndex==(d-1))||(d==1)){Ext.getCmp("downBtn").setDisabled(true)}else{Ext.getCmp("downBtn").setDisabled(false)}}}function onReadyPanelFunction(){store=new Ext.data.SimpleStore({fields:[{name:"quickLinkNumber",type:"string"},{name:"URLOrder",type:"string"},{name:"quickLinkName",type:"string"},{name:"quickLinkURL",type:"string"},{name:"quickLinkPermanent",type:"boolean"}]});var c=new Ext.grid.CheckColumn({header:"Is Permanent ?",dataIndex:"quickLinkPermanent",id:"check",width:100});var b=Ext.form;var a=new Ext.grid.ColumnModel({defaults:{sortable:true},columns:[{id:"quickLinkName",header:NameLabel,dataIndex:"quickLinkName",height:100,width:200,editor:new b.TextField({allowBlank:true,listeners:{render:function(d){Ext.QuickTips.register({target:d.getEl(),text:UrlNameLabel});d.getEl().on("keydown",function(g,f){if(g.getKey()==13||g.getKey()==9){strvalue=f.value;replaceSpecialChars();f.value=strvalue}});d.getEl().on("change",function(g,h,f){strvalue=h.value;replaceSpecialChars();h.value=strvalue})}}})},{id:"quickLinkURL",header:URLLabel,height:100,width:600,dataIndex:"quickLinkURL",editor:new b.TextField({allowBlank:true,listeners:{render:function(d){Ext.QuickTips.register({target:d.getEl(),text:UrlLinkLabel})}}})}]});grid=new Ext.grid.EditorGridPanel({id:"faqCategoryGrid",store:store,cm:a,stripeRows:true,plugins:c,selModel:new Ext.grid.RowSelectionModel({singleSelect:true}),height:200,width:800,autoWidth:true,viewConfig:{forceFit:true,getEditorParent:function(){return this.mainWrap.dom}},listeners:{rowclick:function(g,h,i){selectedRowIndex=h;rowIndex=h;if(document.getElementById(quicklink).checked&&isQLDeletable){Ext.getCmp("deleteId").setDisabled(false)}var f=Ext.getCmp("faqCategoryGrid").store;var k=f.getAt(selectedRowIndex).get("quickLinkName");var d=f.getAt(selectedRowIndex).get("quickLinkURL");var j=store.data.length;if(selectedRowIndex==0||j==1){Ext.getCmp("upBtn").setDisabled(true)}else{if(document.getElementById(quicklink).checked){Ext.getCmp("upBtn").setDisabled(false)}}if((selectedRowIndex==(j-1))||(j==1)){Ext.getCmp("downBtn").setDisabled(true)}else{if(document.getElementById(quicklink).checked){Ext.getCmp("downBtn").setDisabled(false)}}if((k==null||k=="")&&(d==null||d=="")){Ext.getCmp("upBtn").setDisabled(true);Ext.getCmp("downBtn").setDisabled(true)}},afteredit:function(d){}}});grid.render("faqCategory-grid");Ext.QuickTips.init();new SamplePanelQ({title:"",cls:"toolSpCls",bodyStyle:"border:0px;padding:0px;margin:0px;zoom:0px;",tbar:[{scale:"medium",iconCls:"addCls",tooltipType:"title",tooltip:newLabel,id:"newId",listeners:{mouseover:function(){this.setIconClass("addCls")},mouseout:function(){this.setIconClass("addCls")}},handler:function(){var d=grid.getStore().getCount();var e=grid.getStore().recordType;var f=new e({category:"",description:""});grid.stopEditing();store.insert(d,f);grid.startEditing(d,0)}}," ",{scale:"medium",iconCls:"deleteCls",tooltipType:"title",tooltip:deleteLabel,disabled:true,id:"deleteId",listeners:{mouseover:function(){this.setIconClass("deleteCls")},mouseout:function(){this.setIconClass("deleteCls")}},handler:removeHandler}," ",{xtype:"box",id:"upBtn",disabled:true,autoEl:{tag:"img",src:""+resourcesfilesvar+"/SDEFbuttons/b_control_up.png",title:IconUpLabel,name:"linkUp"},style:"cursor:pointer;",listeners:{render:function(d){d.getEl().on("click",function(){UpBtnHandler()});d.getEl().on("mouseover",function(){document.images.linkUp.src=""+resourcesfilesvar+"/SDEFbuttons/b_control_up_mouseover.png"});d.getEl().on("mouseout",function(){document.images.linkUp.src=""+resourcesfilesvar+"/SDEFbuttons/b_control_up.png"})}}},{xtype:"box",id:"downBtn",disabled:true,autoEl:{tag:"img",src:""+resourcesfilesvar+"/SDEFbuttons/b_control_down.png",title:IconDownLabel,name:"linkDown"},style:"cursor:pointer;",listeners:{render:function(d){d.getEl().on("click",function(){DownBtnHandler()});d.getEl().on("mouseover",function(){document.images.linkDown.src=""+resourcesfilesvar+"/SDEFbuttons/b_control_down_mouseover.png"});d.getEl().on("mouseout",function(){document.images.linkDown.src=""+resourcesfilesvar+"/SDEFbuttons/b_control_down.png"})}}}]});Ext.QuickTips.init();if(document.getElementById(quicklink).checked&&isQLCreateable){Ext.getCmp("newId").setDisabled(false)}else{Ext.getCmp("newId").setDisabled(true)}new SamplePanel({title:"",cls:"toolSpCls",bodyStyle:"border:0px;padding:0px;margin:0px;zoom:0px;",tbar:[{scale:"medium",iconCls:"bmcSave",tooltipType:"title",tooltip:saveLabel,id:"saveId",listeners:{mouseover:function(){this.setIconClass("bmcSaveOn")},mouseout:function(){this.setIconClass("bmcSave")}},handler:SaveBtnHandler}," ","-"," ",{scale:"medium",iconCls:"bmcRefresh",tooltipType:"title",tooltip:undoDefaultSettingPageLabel,id:"undoId",listeners:{mouseover:function(){this.setIconClass("bmcRefresh")},mouseout:function(){this.setIconClass("bmcRefresh")}},handler:ResetBtnHandler}]})};