sforce.connection.sessionId=sessionid;switch(uiAction){case"incidentsForCategory":incidentsForCategory();break;case"incidentMatching":incidentMatching();break;case"managementProcess":managementProcess();break;case"createAndLink":createAndLink();break;case"selectAndLink":selectAndLink();break;case"categoryTree":categoryTree();break;case"viewAllActions":viewAllActions();break;case"serviceCloudConsole":openServiceConsoleCreateForm();break;case"quickClose":quickClose();break;case"close":closeRecord();break;case"OpenServiceTarget":OpenServiceTarget();break;case"createKA":createKA();break;case"ChangeSchedule":ChangeSchedule();break;case"cmdbExplorer":cmdbExplorer();break;case"SendEmail":SendEmail();break;case"reOpen":reOpen();break;case"responded":responded();break;case"LinkCI":LinkCI();break;case"addActions":addActions();break;case"KnowledgeSearch":KnowledgeSearch();break;case"addNote":addNote();break;case"SuggestedOwners":findSuggestedOwners();break;case"createNewIncident":createNewIncident();break;case"createNewTask":createNewTask();break;case"copy":copyRecord();break;case"new":newRecord();break;case"openManifest":openManifest();break;case"cmdbActions":cmdbActions();break;case"suggestedExpert":suggestedExpert();break;case"suggestedTemplate":suggestedTemplate();break;case"standardDescriptionResolution":standardDescriptionResolution();break;case"IncidentsForClient":incidentsForClient();break;case"showDeprecatedMsg":showDeprecatedMsg();break;default:break}function incidentsForCategory(){rfWindowResize(671,600);var a=RFPages.SearchPage+"?popupId=Incident&filterClause="+escape("FKCategory__c='"+recordId+"'")+"&isLookup=true&standardLayout=true&popupFor=incidentsforcategory&popupHeader=Select From Incidents";window.location.href=a}function incidentMatching(){rfWindowResize(1000,503);var a=RFPages.SearchAndLink+"?filterObjectId="+recordId+"&parentName=Matching&childName="+objectName+"&stdForm=true&standardLayout=true";window.location.href=a}function managementProcess(){rfWindowResize(1000,1000);var a="";switch(objectName){case"Change_Request__c":a=RFPages.ChangeProcMgmtPage;break;case"Release__c":a=RFPages.ReleaseProcMgmtPage;break;case"Problem__c":a=RFPages.ProblemProcMgmtPage;break;case"Incident__c":a=RFPages.IncProcMgmtPage;break}window.location.href=a}function createAndLink(){if(recordState=="1"){if(checkCreatable()!="true"){showErrorMessage(RFActionLabels.InsufficentCreatePrivilege)}else{if(window.opener&&typeof window.opener.consoleDetailElements!="undefined"){if(actionType=="LinkallCI"){window.location.href=RFPages.StdReleaseExtension+"?id="+recordId+"&action="+actionType+"&isCalledFromConsole=true&ishideStageProgression=true"}else{window.opener.createAndLinkRecords(actionType);window.close()}}else{if(checkCategoryInactive()=="true"){showErrorMessage(RFActionLabels.CategoryIdInactive)}else{var a=window.parent;a.location.href=getStandardLayoutPageForModule(objectName)}}}}else{showErrorMessage(getRecordIsClosedMessage(objectName))}}function getStandardLayoutPageForModule(b){switch(b){case"Incident__c":var a=RFPages.IncidentStdPage+"&Id="+recordId+"&action="+actionType;if(actionType&&actionType=="CreateIncidentTaskLink"){return a+"&incidentId="+recordId}else{return a+"&incId="+recordId}case"Broadcasts__c":return RFPages.StdBroadcastExtension+"&id="+recordId+"&action=CreateIncidentBroadcastLink&BroadcastsId="+recordId;case"Change_Request__c":return RFPages.StdChangeRequestExtensionPage+"&id="+recordId+"&action="+actionType+"&Change_Requestid="+recordId;case"Problem__c":var a=RFPages.StdProblemExtension+"&id="+recordId+"&Problemid="+recordId;if(actionType=="CreateProblemTaskLink"){return a+"&action=CreateTaskProblemLink"}else{if(actionType=="CreateProblemChangeLink"){return a+"&action=CreateChangeProblemLink&probId="+recordId}}case"Release__c":return RFPages.StdReleaseExtension+"?id="+recordId+"&action="+actionType+"&Releaseid="+recordId;default:return""}}function selectAndLink(){if(recordState=="1"){var d=false;var b=RFPages.SearchAndLink+"?filterObjectId="+recordId+"&parentName="+objectName+"&childName="+targetObjectName;if(filterId){b+="&filterId="+filterId}if(addlFilterId){b+="&addlFilterId="+addlFilterId}if(objectName=="Incident__c"&&targetObjectName=="BMC_BaseElement__c"){b+="&clientId="+clientId+"&accountId="+accountId+"&FKBusinessService__c="+businessService+"&baseId="+baseId}if(window.opener&&typeof window.opener.consoleDetailElements!="undefined"){rfWindowResize(1000,600);d=true;b+="&isCalledFromConsole="+d;window.location.href=b}else{b+="&isCalledFromConsole="+d;var c=1000;var a=600;window.open(b,null,"status=1, height="+a+", width="+c+", left="+stdScreenLeft(c)+", top="+stdScreenTop(a)+", resizable=0, scrollbars=no");window.parent.history.back()}}else{showErrorMessage(getRecordIsClosedMessage(objectName))}}function stdScreenLeft(a){return parseInt((screen.availWidth/2)-(a/2))}function stdScreenTop(a){return parseInt((screen.availHeight/2)-(a/2))}function categoryTree(){rfWindowResize(670,530);var a=RFPages.CategoryPage+"?recordId="+recordId+"&popupId="+InstanceName+"&objectName="+objectName+"&state="+recordState+"&stdForm=false&standardLayout=true";if(objectName=="Incident__c"){var b="false";if(incType==RFActionLabels.ServiceRequestLabel){b="true"}a+="&serviceRequest="+b}window.location.href=a}function viewAllActions(){var b;switch(objectName){case"Broadcasts__c":b="Broadcast";recordName=encodeURIComponent(recordName);break;case"Change_Request__c":b="Change Request";break;case"Incident__c":b="Incident";break;case"Problem__c":b="Problem";break;case"Release__c":b="Release";break;case"Task__c":b="Task";break}if(window.opener&&typeof window.opener.consoleDetailElements!="undefined"){setTimeout(function(){window.location.href=RFPages.ViewAllActions+"?recordState="+recordState+"&recordName="+recordName+"&objectName="+b+"&Objectid="+recordId+"&stdForm=true&standardLayout=true"},50)}else{var c=parseInt((screen.availWidth/2)-(900/2));var d=parseInt((screen.availHeight/2)-(750/2));var a="width=671,height=400,status,resizable,scrollbars=yes,left="+c+",top="+d;if(b!=""){window.open(RFPages.ViewAllActions+"?recordState="+recordState+"&recordName="+recordName+"&objectName="+b+"&Objectid="+recordId+"&stdForm=true&standardLayout=true","_blank",a)}window.parent.history.back()}}function openServiceConsoleCreateForm(){try{var a=function a(c){sforce.console.closeTab(c.id);try{var d=getPageURLForServiceConsole(objectName,false)+"&record_id=&isServiceCloudConsole=true&ran="+new Date().getTime();sforce.console.openPrimaryTab(null,d,true,"")}catch(f){window.top.location.href=getPageURLForServiceConsole(objectName,true)}};sforce.console.getEnclosingTabId(a)}catch(b){window.top.location.href=getPageURLForServiceConsole(objectName,true)}}function getPageURLForServiceConsole(b,a){switch(b){case"Incident__c":return(a)?RFPages.StandardNewIncidentPage:RFPages.IncidentConsolePage;case"Task__c":return(a)?RFPages.StandardNewTaskPage:RFPages.TaskConsole;case"Broadcasts__c":return(a)?RFPages.StandardNewBroadcastsPage:RFPages.BroadcastConsole;case"Change_Request__c":return(a)?RFPages.StandardNewChangeRequestPage:RFPages.ChangeConsole;case"Problem__c":return(a)?RFPages.StandardNewProblemPage:RFPages.ProblemConsole;case"Release__c":return(a)?RFPages.StandardNewReleasePage:RFPages.ReleaseConsole;default:return""}}function quickClose(){rfWindowResize(500,180);if(objectName=="Incident__c"){quickCloseIncident()}else{if(objectName=="Task__c"){quickCloseTask()}}}function quickCloseIncident(){if(recordState=="1"){var e=checkForUpdatePermission();if(e!="true"){var d=RFActionLabels.InsufficentPrivilegeToAccess;alert(d);window.close()}else{var a=sforce.apex.execute(CurrentNamespacePrefix.replace("__","")+".WebServiceMethodsUtility","checkIfTaskCanBeClosed",{id:recordId});var d="";if(a=="ApprovalPending"){d=RFActionLabels.PendingIncidentApproval;alert(d);window.close()}else{if(a=="LinkedTaskOpen"){d=RFActionLabels.DontCloseIncident;alert(d);window.close()}else{if(broadcastId!=""){var b=RFActionLabels.StdIncidentRelatedBroadcastsChanges;var c=confirm(b);if(c==true){window.opener.location.href=RFPages.IncidentStdPage+"&id="+recordId+"&action=quickCloseIncidentandBroadcast";window.close()}else{window.opener.location.href=RFPages.IncidentStdPage+"&id="+recordId+"&action=quickCloseIncident";window.close()}}else{window.opener.location.href=RFPages.IncidentStdPage+"&id="+recordId+"&action=quickClose";window.close()}}}}}else{alert(getRecordIsClosedMessage(objectName));window.close()}}function quickCloseTask(){if(recordState=="1"){var b=checkForUpdatePermission();if(b!="true"){var a=RFActionLabels.InsufficentPrivilegeToAccess;alert(a);window.close()}else{window.opener.location.href=RFPages.TaskStdExtensionPage+"&id="+recordId+"&action=QuickClose";window.close()}}else{alert(getRecordIsClosedMessage(objectName));window.close()}}function closeRecord(){if(objectName=="Incident__c"){closeIncident()}else{if(objectName=="Problem__c"){closeProblem()}else{closeForOtherModules()}}}function closeIncident(){rfWindowResize(671,500);if(recordState=="1"){var d=checkForUpdatePermission();if(d!="true"){var c=RFActionLabels.InsufficentPrivilegeToAccess;alert(c);window.close()}else{var a=RFPages.CloseIncidentPage+"?incidentId="+recordId+"&IncidentCat="+CategoryId+"&calledFrom=stdform";if(broadcastId!=""){var b=confirm(RFActionLabels.StdIncidentRelatedBroadcastsChanges);if(b==true){window.location.href=a+"&action=closeIncidentandBroadcast"}else{window.location.href=a+"&action=closeIncidentOnly"}}else{window.location.href=a}}}else{alert(getRecordIsClosedMessage(objectName));this.close()}}function closeProblem(){rfWindowResize(671,500);if(recordState=="1"){var c=checkForUpdatePermission();if(c!="true"){var b=RFActionLabels.InsufficentPrivilegeToAccess;alert(b);window.close()}else{var a=sforce.apex.execute(CurrentNamespacePrefix.replace("__","")+".WebServiceMethodsUtility","checkForUpdatePermissionOnRecord",{recId:recordId});if(a!="true"){var b=RFActionLabels.InsufficentPrivilegeToAccess;alert(b);window.close()}else{window.location.href=RFPages.CloseProblemPage+"?calledFrom=stdform&Id="+recordId+"&isLookup=true&standardLayout=true"}}}else{alert(getRecordIsClosedMessage(objectName));this.close()}}function closeForOtherModules(){rfWindowResize(671,500);if(recordState=="1"){var b=checkForUpdatePermission();if(b!="true"){var a=RFActionLabels.InsufficentPrivilegeToAccess;alert(a);window.close()}else{if(objectName=="Broadcasts__c"){window.location.href=RFPages.BroadcastClosePage+"?broadcastId="+recordId+"&CategoryId="+CategoryId+"&isLookup=true&calledFrom=stdform"}else{if(objectName=="Release__c"){window.location.href=RFPages.CloseRelease+"?calledFrom=stdform&releaseId="+recordId+"&isLookup=true"}else{if(objectName=="Change_Request__c"){window.location.href=RFPages.CloseChangePage+"?calledFrom=stdform&changeId="+recordId+"&isLookup=true"}else{if(objectName=="Task__c"){window.location.href=RFPages.CloseTask+"?taskId="+recordId+"&categoryId="+CategoryId+"&calledFrom=stdform&popupHeader=Close%20Incident"}}}}}}else{alert(getRecordIsClosedMessage(objectName));this.close()}}function OpenServiceTarget(){rfWindowResize(1087,400);var a;switch(objectName){case"Change_Request__c":a="FKChangeRequest__c";break;case"Incident__c":a="FKIncident__c";break;case"Problem__c":a="FKProblem__c";break;case"Task__c":a="FKTask__c";break}if(objectName!=""){window.location.href=RFPages.SearchPage+"?popupId="+popupId+"&filterClause="+escape(a+"='"+recordId+"'")+"&isLookup=true&standardLayout=true&popupFor="+targetObjectName+"&popupHeader="+recordName}}function createKA(){var b=false;try{if(window.opener&&typeof window.opener.consoleDetailElements!="undefined"&&typeof window.opener.consoleDetailElements!="unknown"){b=true}}catch(a){}rfWindowResize(475,300);if(objectName=="Incident__c"){window.location.href=RFPages.CreateKnowledgePage+"?incidentid="+recordId+"&isCalledFromConsole="+b}else{if(objectName=="Change_Request__c"){window.location.href=RFPages.CreateKnowledgePage+"?changeid="+recordId}else{if(objectName=="Problem__c"){window.location.href=RFPages.CreateKnowledgePage+"?problemid="+recordId+"&knownError="+knownError}}}}function ChangeSchedule(){rfWindowResize(1100,650);window.location.href=RFPages.ChangeSchedule+"?standardLayout=true"}function cmdbExplorer(){rfWindowResize(1100,700);var a=RFPages.CIExplorerLauncher+"?Module="+objectName+"&RecordSequence="+recordId+"&stdForm=true";if(objectName!="Task__c"){a+="&id="+recordId}window.location.href=a}function SendEmail(){rfWindowResize(690,656);var a=false;if(recordState=="1"){window.location.href=RFPages.ComposeEmailPage+"?recordId="+recordId+"&objectName="+objectName+"&enableSelfClosing=false&isNew=true&standardLayout=true&popupHeader="+recordName+"&isCalledFromConsole="+a}else{alert(getRecordIsClosedMessage(objectName));window.close()}}function reOpen(){rfWindowResize(500,180);if(objectName=="Incident__c"){reOpenIncident()}else{if(objectName=="Task__c"){reOpenTask()}else{if(objectName=="Broadcasts__c"){reOpenBroadcast()}else{if(objectName=="Problem__c"){reOpenProblem()}else{if(objectName=="Release__c"){reOpenRelease()}else{if(objectName=="Change_Request__c"){reOpenChangeRequest()}}}}}}}function reOpenChangeRequest(){if(recordState=="1"){var a=RFActionLabels.ChangeRequestAlreadyOpen;alert(a);window.close()}else{var b=checkForUpdatePermission();if(b!="true"){var a=RFActionLabels.InsufficentPrivilegeToAccess;alert(a);window.close()}else{window.opener.location.href=RFPages.StdChangeRequestExtensionPage+"&id="+recordId+"&action=Reopen";window.close()}}}function reOpenRelease(){if(recordState=="1"){var a=RFActionLabels.ReleaseAlreadyOpen;alert(a);window.close()}else{var b=checkForUpdatePermission();if(b!="true"){var a=RFActionLabels.InsufficentPrivilegeToAccess;alert(a);window.close()}else{window.opener.location.href=RFPages.StdReleaseExtension+"?id="+recordId+"&action=reopenRelease";window.close()}}}function reOpenProblem(){if(recordState=="1"){var b=RFActionLabels.ProblemOpen;alert(b);window.close()}else{var b=RFActionLabels.InsufficentPrivilegeToAccess;var c=checkForUpdatePermission();if(c!="true"){var b=RFActionLabels.InsufficentPrivilegeToAccess;alert(b);window.close()}else{var a=sforce.apex.execute(CurrentNamespacePrefix.replace("__","")+".WebServiceMethodsUtility","checkForUpdatePermissionOnRecord",{recId:recordId});if(a!="true"){alert(b);window.close()}else{window.opener.location.href=RFPages.StdProblemExtension+"&id="+recordId+"&action=Reopen";window.close()}}}}function reOpenBroadcast(){if(recordState=="1"){var a=RFActionLabels.BroadcastOpen;alert(a);window.close()}else{var b=checkForUpdatePermission();if(b!="true"){var a=RFActionLabels.InsufficentPrivilegeToAccess;alert(a);window.close()}else{window.opener.location.href=RFPages.StdBroadcastExtension+"&id="+recordId+"&action=Reopen";window.close()}}}function reOpenTask(){if(recordState=="1"){var a=RFActionLabels.TaskIsAlreadyOpen;alert(a);window.close()}else{var b=checkForUpdatePermission();if(b!="true"){var a=RFActionLabels.InsufficentPrivilegeToAccess;alert(a);window.close()}else{window.opener.location.href=RFPages.TaskStdExtensionPage+"&id="+recordId+"&action=reopenTask";window.close()}}}function reOpenIncident(){if(recordState=="1"){var c=RFActionLabels.IncidentIsAlreadyOpen;alert(c);window.close()}else{var d=checkForUpdatePermission();if(d!="true"){var c=RFActionLabels.InsufficentPrivilegeToAccess;alert(c);window.close()}else{if(broadcastId!=""){var a=RFActionLabels.StdIncidentRelatedBroadcastsChanges;var b=confirm(a);if(b==true){window.opener.location.href=RFPages.IncidentStdPage+"&id="+recordId+"&action=reOpenIncidentandBroadcast";window.close()}else{window.opener.location.href=RFPages.IncidentStdPage+"&id="+recordId+"&action=reOpenOnlyIncident";window.close()}}else{window.opener.location.href=RFPages.IncidentStdPage+"&id="+recordId+"&action=Reopen";window.close()}}}}function responded(){rfWindowResize(500,180);if(objectName=="Incident__c"){respondedIncident()}else{if(objectName=="Change_Request__c"){respondedChangeRequest()}}}function respondedIncident(){var b=checkForUpdatePermission();if(b!="true"){var a=RFActionLabels.InsufficentPrivilegeToAccess;alert(a);window.close()}else{if(recordState=="1"){window.opener.location.href=RFPages.IncidentStdPage+"&id="+recordId+"&action=Responded";window.close()}else{alert(getRecordIsClosedMessage(objectName));window.close()}}}function respondedChangeRequest(){if(recordState=="1"){window.opener.location.href=RFPages.StdChangeRequestExtensionPage+"&id="+recordId+"&action=Responded";window.close()}else{alert(getRecordIsClosedMessage(objectName));window.close()}}function LinkCI(){rfWindowResize(980,500);try{if(recordState=="1"){var c=checkForUpdatePermission();if(c!="true"){var b=RFActionLabels.InsufficentPrivilegeToAccess;alert(b);window.close()}else{window.location.href=RFPages.SearchConfigItem+"?IncidentID="+recordId+"&filterObjectId="+filterObjectId+"&accountId="+accountId}}else{alert(getRecordIsClosedMessage(objectName));window.close()}}catch(a){alert(a);window.close()}}function addActions(){var c;var f=checkForUpdatePermission();if(f!="true"){var b=RFActionLabels.InsufficentPrivilegeToAccess;alert(b);window.close()}else{switch(objectName){case"Broadcasts__c":c="appliesToBroadcasts__c%3Dtrue%20and%20system__c%3Dfalse";break;case"Change_Request__c":c="appliesToChange__c%3Dtrue%20and%20system__c%3Dfalse";break;case"Incident__c":c="appliesToIncident__c%3Dtrue%20and%20system__c%3Dfalse";break;case"Problem__c":c="appliesToProblem__c%3Dtrue%20and%20system__c%3Dfalse";break;case"Release__c":c="appliesToRelease__c%3Dtrue%20and%20system__c%3Dfalse";break;case"Task__c":c="appliesToTask__c%3Dtrue%20and%20system__c%3Dfalse";break}if(recordState=="1"){if(window.opener&&typeof window.opener.consoleDetailElements!="undefined"){rfWindowResize(671,400);setTimeout(function(){window.location.href=RFPages.SearchPage+"?popupId=Action&isLookup=true&objectType="+targetObjectName+"&isCalledFromConsole=true&enableSelfClosing=false&standardLayout=true&parentId="+recordId+"&filterClause="+c},50)}else{var d=parseInt((screen.availWidth/2)-(671/2));var e=parseInt((screen.availHeight/2)-(400/2));var a="width=671,height=400,status=1,resizable=0,scrollbars=no,left="+d+",top="+e;window.open(RFPages.SearchPage+"?popupId=Action&isLookup=true&objectType="+targetObjectName+"&isCalledFromConsole=false&enableSelfClosing=false&standardLayout=true&parentId="+recordId+"&filterClause="+c,"newAction",a);window.parent.history.back()}}else{alert(getRecordIsClosedMessage(objectName));window.close();window.parent.history.back()}}}function KnowledgeSearch(){rfWindowResize(670,400);if(recordState=="1"){if(description&&description.length>500){description=description.substring(0,500)}var a=RFPages.KnowledgeSearchPage+"?enableSelfClosing=false&calledFromForm=true&objectName="+objectName+"&standardLayout=true&search="+encodeURIComponent(description);if(recordId){switch(objectName){case"Problems":a+="&KMproblemID="+recordId;break;case"Broadcasts":a+="&KMbroadcastID="+recordId;break;case"Incidents":a+="&KMincidentID="+recordId;break;case"Tasks":a+="&KMtaskID="+recordId;break;default:a+=""}}window.location.href=a}else{var b;if(targetObjectName=="Release__c"){b=getRecordIsClosedMessage(targetObjectName)}else{b=getRecordIsClosedMessage(objectName)}alert(b);window.close()}}function addNote(){var a;var d=checkForUpdatePermission();if(d!="true"){var c=RFActionLabels.InsufficentPrivilegeToAccess;alert(c);window.close()}else{switch(objectName){case"Broadcasts__c":a=RFPages.stdlayoutbroadcastaddnotepage;break;case"Change_Request__c":a=RFPages.StdLayoutChangeRequestAddNotePage;break;case"Incident__c":a=RFPages.stdlayoutincidentaddnotepage;break;case"Problem__c":a=RFPages.stdlayoutproblemaddnotepage;break;case"Release__c":a=RFPages.stdlayoutreleaseaddnotepage;break;case"Task__c":a=RFPages.stdlayouttaskaddnotepage;break}if(recordState=="1"){if(window.opener&&typeof window.opener.consoleDetailElements!="undefined"){rfWindowResize(600,400);setTimeout(function(){window.location.href=a+"?id="+recordId+"&fromconsole=true"},50)}else{var b="width=600,height=400,status=1,resizable=0,scrollbars=no,left=350,top=350";window.open(a+"?id="+recordId+"&fromconsole=false","newNote",b);window.parent.history.back()}}else{alert(getRecordIsClosedMessage(objectName));window.close();window.parent.history.back()}}}function findSuggestedOwners(){rfWindowResize(670,500);if(recordState=="1"){var c=checkForUpdatePermission();if(c!="true"){var a=RFActionLabels.InsufficentPrivilegeToAccess;alert(a);window.close()}else{window.location.href=RFPages.SuggestionPage+"?suggestObjectName=Suggested_Owner_Mapping__c&parentObjectId="+recordId+"&parentObjectName="+objectName}}else{var b=getRecordIsClosedMessage(objectName);alert(b);window.close()}}function createNewIncident(){var a;windowFeatures="status = 1,fullscreen=yes, resizable = 1,scrollbars=no";if(recordId){if(recordState=="1"){if(window.opener&&typeof window.opener.consoleDetailElements!="undefined"){window.opener.parent.parent.addTab(null,null,"Incident__c",false,objectName,recordId,"Incident");window.close()}else{window.history.back()}}else{var b=getRecordIsClosedMessage(objectName);alert(b);if(window.opener&&typeof window.opener.consoleDetailElements!="undefined"){window.close()}else{window.history.back()}}}}function createNewTask(){recordId="";if(incidentId){recordId=incidentId;recordState=incidentState;objectName="Incident__c"}else{if(problemId){recordId=problemId;recordState=problemState;objectName="Problem__c"}else{if(releaseId){recordId=releaseId;recordState=releaseState;objectName="Release__c"}else{if(changerequestId){recordId=changerequestId;recordState=changerequestState;objectName="Change_Request__c"}}}}if(recordId){if(recordState=="1"){var d;var b=false;try{d=window.parent.location.href;if(d.indexOf("isRFConsoleDetailForm=true")!=-1){b=true}}catch(a){}window.parent.refreshRelatedLists();if(b){window.parent.parent.addTab(null,null,targetObjectName,false,objectName,recordId)}window.history.go(-1)}else{var c=getRecordIsClosedMessage(objectName);alert(c);window.history.go(-1)}}return false}function copyRecord(){if(objectName=="Incident__c"){var a=sforce.apex.execute(CurrentNamespacePrefix.replace("__","")+".WebServiceMethodsUtility","cloneServiceRequest",{incidentId:recordId});if(typeof(a[0])!="undefined"&&a[0].indexOf("ERROR:")<0){window.location.href="/"+a}else{var b=a[0].replace("ERROR:","");alert(b);window.history.back()}}}function newRecord(){window.parent.history.back();switch(objectName){case"Incident__c":window.open(RFPages.StandardNewIncidentPage,"_new");break;case"Broadcasts__c":window.open(RFPages.StandardNewBroadcastsPage,"_new");break;case"Change_Request__c":window.open(RFPages.StandardNewChangeRequestPage,"_new");break;case"Problem__c":window.open(RFPages.StandardNewProblemPage,"_new");break;case"Release__c":window.open(RFPages.StandardNewReleasePage,"_new");break;case"Task__c":window.open(RFPages.StandardNewTaskPage,"_new");break;default:break}this.close()}function openManifest(){rfWindowResize(900,750);window.location.href=RFPages.ReleaseManifest+"?id="+recordId+"&stdForm=true&status=1&objectName="+objectName}function cmdbActions(){var a=370;var b=410;var c=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;if(c){a=456;b=510}if(!ciID){a=350;b=115}rfWindowResize(a,b);if(recordState=="1"){window.location.href=RFPages.AcActionsStdLayout+"?reqContextId="+recordId+"&objectType="+objectName}else{if(reqDefn||reqDetail){objectName="Service_Request"}alert(getRecordIsClosedMessage(objectName));window.close()}}function suggestedExpert(){var a;rfWindowResize(671,400);switch(objectName){case"Broadcasts__c":a="Broadcast";break;case"Task__c":a="Task";break}if(recordState=="1"){window.location.href=RFPages.SearchPage+"?id="+recordId+"&popupId=SuggestedStaff&filterClause="+escape("FKUser__r.IsStaffUser__c=true")+"&isLookup=true&isSuggestExpert=true&standardLayout=true&standardLayoutCategory=true&objName="+a+"&popupFor=Assignto&popupHeader=Select From Staff&queueFor="+objectName+"&isQueurorUser=true&isActiveUser=true&categoryId="+CategoryId}else{alert(getRecordIsClosedMessage(objectName));window.close()}}function suggestedTemplate(){rfWindowResize(671,500);if(recordState=="1"){var c=checkForUpdatePermission();if(c!="true"){var b=RFActionLabels.InsufficentPrivilegeToAccess;alert(b);window.close()}else{if(!CategoryName&&(description=="true")){alert(RFActionLabels.category_and_or_description_for_template);window.close()}else{var a=sforce.apex.execute(CurrentNamespacePrefix.replace("__","")+".WebServiceMethodsUtility","checkIfTemplateApplicable",{objName:objectName});if(a!="true"){alert(RFActionLabels.cannot_apply_template);window.close()}else{window.location.href=RFPages.SuggestionPage+"?suggestObjectName=SYSTemplate__c&parentObjectId="+recordId+"&parentObjectName="+objectName}}}}else{alert(getRecordIsClosedMessage(objectName));window.close()}}function standardDescriptionResolution(){rfWindowResize(671,300);if(recordState=="1"){if(!CategoryId){alert(RFActionLabels.NoCategorySelected);this.close()}else{var a=RFPages.StdDescriptionResolutionPage+"?categoryName="+encodeURIComponent(CategoryName)+"&stdLayout=true&objId="+recordId+"&paramId="+CategoryId+"&isLookup=true&isSD=true";switch(objectName){case"Incident__c":window.location.href=a+"&popupId=incident&categoryview=incident";break;case"Broadcasts__c":window.location.href=a+"&popupId=broadcast&categoryview=broadcast";break;case"Problem__c":window.location.href=a+"&popupId=problem&categoryview=problem";break;case"Task__c":window.location.href=a+"&popupId=task&categoryview=task";break;default:break}}}else{alert(getRecordIsClosedMessage(objectName));this.close()}}function incidentsForClient(){rfWindowResize(671,600);window.location.href=RFPages.SearchPage+"?popupId=Incident&isLookup=true&standardLayout=true&popupFor=incidentsforclient&filterClause="+escape("FKClient__c='"+clientId+"'")}function showDeprecatedMsg(){alert(RFActionLabels.Deprecated);window.close();window.parent.history.back()}function checkCreatable(){if(actionType&&(actionType=="CreateIncidentChangeLink"||actionType=="CreateProblemChangeLink")){return sforce.apex.execute(CurrentNamespacePrefix.replace("__","")+".WebServiceMethodsUtility","checkForCreatePermission",{objName:targetObjectName})}else{return"true"}}function checkCategoryInactive(){if(actionType&&actionType=="CreateIncidentTaskLink"){return sforce.apex.execute(CurrentNamespacePrefix.replace("__","")+".WebServiceMethodsUtility","checkForInActiveCategory",{incidentId:recordId})}else{return"false"}}function checkForUpdatePermission(){var b="false";try{b=sforce.apex.execute(CurrentNamespacePrefix.replace("__","")+".WebServiceMethodsUtility","checkForUpdatePermission",{objName:objectName})}catch(a){b="false"}finally{return b}}function showErrorMessage(a){alert(a);if(window.opener&&typeof window.opener.consoleDetailElements!="undefined"){window.close()}else{window.history.back()}}function getRecordIsClosedMessage(b){var a="";switch(b){case"Change_Request__c":case"Change Requests":a=RFActionLabels.CRIsClosed;break;case"Incident__c":case"Incidents":a=RFActionLabels.IncidentIsClosed;break;case"Service_Request":a=RFActionLabels.SRIsClosed;break;case"Problem__c":case"Problems":a=RFActionLabels.ProblemIsClosed;break;case"Task__c":case"Tasks":a=RFActionLabels.TaskIsClosed;break;case"Release__c":a=RFActionLabels.ReleaseIsClosed;break;case"Broadcasts__c":case"Broadcasts":a=RFActionLabels.broadcastclosed;break;default:return""}return a}function rfWindowResize(b,a){if(window.innerWidth&&window.outerWidth){b=window.outerWidth-window.innerWidth+b}if(window.innerHeight&&window.outerHeight){a=window.outerHeight-window.innerHeight+a}window.resizeTo(b,a);var c=parseInt((screen.availWidth/2)-(b/2));var d=parseInt((screen.availHeight/2)-(a/2));window.moveTo(c,d)};