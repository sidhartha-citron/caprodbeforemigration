var currentSelectedObject="Incident";var popUpWindow,selQueueId;var OffId="Off";var IncMatchingLabel;var selectedProfileForChSch="";var CreateEditLayoutPanel;var multiSelectedValue=[];var DefaultLayoutLbl;var selectAllLayout;var multiLayoutValChanged;var enableLayoutChangeOnEdit;var EnableMultiLayoutCmp;var valueSentToaddNew;var defaultLayoutID;var executeActionFunction=false;var executeSelectAllEvent=true;function getGridHeight(){var b=140;var a=document.getElementById("layoutEditChk");if(a&&a.style.display!="none"){isAllowEditVisible=true;b=140}else{b=160}return b}function setActionGridSize(){var a=getGridHeight();if(actionGrid){actionGrid.setHeight(a)}if(agentGrid){agentGrid.setHeight(a)}}function AddRemoveChildHelper(){}function setAllLayoutSelectCheckbox(){var a=document.querySelectorAll('input[name="MultipleLayouts"]:checked');var c=document.querySelectorAll('input[name="MultipleLayouts"]');executeSelectAllEvent=false;if(a.length==c.length||a.length==layoutLimit){if(selectAllLayout.getValue()){executeSelectAllEvent=true}else{selectAllLayout.setValue(true)}}else{if(!selectAllLayout.getValue()){executeSelectAllEvent=true}else{selectAllLayout.setValue(false)}}if(a.length>layoutLimit){showMessage(maxLayoutAlertLabel);var b=document.querySelector('input[id="'+defaultLayoutID+'"][name="layoutInputdefault"]');if(b){b.checked=true}return false}return true}function toggleCheck(c){var e=document.getElementById(c);var b;if(c.indexOf("__Multi")>-1){b=document.querySelector('input[id="'+c.split("__Multi")[0]+'"][name="layoutInputdefault"]');if(!e.checked&&b.checked){e.checked=true;showMessage(DefaultLayoutRemoveAlert)}else{if(e.checked){if(!setAllLayoutSelectCheckbox()){e.checked=false}}else{if(!e.checked){if(selectAllLayout.getValue()){executeSelectAllEvent=false;selectAllLayout.setValue(false)}}}}}else{b=document.getElementById(c+"__Multi");var a=document.getElementsByName("layoutInputdefault");for(var d=0;d<a.length;d++){if(e!=a[d]&&a[d].id!=c){a[d].checked=false}else{if(a[d].id==c){e=a[d]}}}if(e.checked){b.checked=true;if(setAllLayoutSelectCheckbox()){defaultLayoutID=c}else{e.checked=false;b.checked=false}}}}AddRemoveChildHelper.removeAllElementsFromDiv=function(a){while(a.firstChild){a.removeChild(a.firstChild)}};Ext.onReady(function(){var y=false;if(!isForSSLayout){y=enableIncidentSRSegregation;if(y!=null){y=enableIncidentSRSegregation.checked}else{y=enableIncidentSRSegregationVal}}document.getElementById("editServiceRequestsDiv").style.display="none";Ext.MessageBox.buttonText.ok=okLbl;Ext.MessageBox.buttonText.yes=yesLbl;Ext.MessageBox.buttonText.no=noLbl;Ext.Loader.setConfig({enabled:true,paths:{"Ext.ux":"ext/js/ux"}});Ext.define("rightPanelModel",{extend:"Ext.data.Model",fields:[{name:"id",type:"string"},{name:"name",type:"string"}]});Ext.define("layoutPanelModel",{extend:"Ext.data.Model",fields:[{name:"id",type:"string"},{name:"name",type:"string"}]});viewStore=new Ext.data.ArrayStore({id:"ConsoleViewStore",fields:[{name:"value"},{name:"text"}],data:StandAloneViewStore});RFViewArrayStore=new Ext.data.ArrayStore({id:"RFConsoleViewStore",fields:[{name:"value"},{name:"text"}],data:RFViewStore});RFSegregationArrayStore=new Ext.data.ArrayStore({id:"RFConsoleViewStore",fields:[{name:"value"},{name:"text"}],data:RFSegregationViewStore});DefaultLayoutLbl=Ext.create("Ext.form.Label",{text:defaultLayout,cls:"BoltFontcls",style:"float:right !important",id:"DefaultLayoutId"});selectAllLayout=new Ext.form.Checkbox({id:"selectAllLayout",cls:"checkboxClass verticalTop selectAllCheckBox",labelAlign:"right",checked:false,handler:function(){if(executeSelectAllEvent){var O=selectAllLayout.getValue();var N=document.getElementsByName("MultipleLayouts");var K=document.querySelectorAll('input[name="MultipleLayouts"]:checked');if(!K){K=[]}var M=layoutLimit-K.length;for(var L=0;((M>0&&O)||!O)&&L<N.length;L++){if(!document.querySelector("input[id='"+N[L].value+"'][name$='layoutInputdefault']").checked){if(!N[L].checked&&O){M--}N[L].checked=O}}}executeSelectAllEvent=true}});var J=new Ext.data.ArrayStore({id:"ColoumnCountStoreId",fields:[{name:"value"},{name:"text"}],data:coloumCountStoreData});rightSideTabStore=Ext.create("Ext.data.Store",{id:"rightPanelTabStore",model:"rightPanelModel",data:plist});rightSideTabStoreForChngSch=Ext.create("Ext.data.Store",{id:"rightPanelTabStore",model:"rightPanelModel",data:profileDataForChngSch});layoutStore=Ext.create("Ext.data.Store",{id:"layoutStore",model:"layoutPanelModel",data:layoutJsonString});ActionIncident=Ext.create("Ext.data.Store",{model:"rightPanelModel",data:incidentActionsData});ActionTask=Ext.create("Ext.data.Store",{model:"rightPanelModel",data:taskActionsData});ActionChange=Ext.create("Ext.data.Store",{model:"rightPanelModel",data:changeActionsData});ActionProblem=Ext.create("Ext.data.Store",{model:"rightPanelModel",data:problemActionsData});ActionRelease=Ext.create("Ext.data.Store",{model:"rightPanelModel",data:releaseActionsData});ActionBroadcast=Ext.create("Ext.data.Store",{model:"rightPanelModel",data:broadcastActionsData});AgentIncident=Ext.create("Ext.data.Store",{model:"rightPanelModel",data:incidentAgentsData});if(AgentIncident!=null&&AgentIncident!=""&&AgentIncident!=undefined){IncMatchingLabel=AgentIncident.getById("25");if(IncMatchingLabel!=null&&IncMatchingLabel!=""&&IncMatchingLabel!=undefined){IncMatchingLabel=IncMatchingLabel.get("name")}}AgentTask=Ext.create("Ext.data.Store",{model:"rightPanelModel",data:taskAgentsData});AgentChange=Ext.create("Ext.data.Store",{model:"rightPanelModel",data:changeAgentsData});AgentProblem=Ext.create("Ext.data.Store",{model:"rightPanelModel",data:problemAgentsData});AgentRelease=Ext.create("Ext.data.Store",{model:"rightPanelModel",data:releaseAgentsData});AgentBroadcast=Ext.create("Ext.data.Store",{model:"rightPanelModel",data:broadcastAgentsData});ConsoleLabel=Ext.create("Ext.form.Label",{text:consoleLbl,renderTo:"StndAloneLbl"});ConsoleViewLabel=Ext.create("Ext.form.Label",{text:consoleViewLbl,hidden:isForSSLayout,renderTo:"RFCLbl"});consoleViewCombo=Ext.create("Ext.form.ComboBox",{store:viewStore,displayField:"text",valueField:"value",value:"Incident",width:192,editable:false,hidden:isForSSLayout,renderTo:"viewPickList",id:"dropDownView",listeners:{select:function(){if(isChangeFlag=="true"||isConsoleViewChange=="true"){var K;if(isChangeFlag=="true"){K=consoleWarningMessageOnProfileChange}else{K=consoleWarningMessageOnConsoleViewChange}var L=Ext.Msg.show({title:consoleLbl,msg:K,buttons:Ext.Msg.YESNO,icon:Ext.MessageBox.WARNING,fn:function(M){if(M=="yes"){isChangeFlag="false";isConsoleViewChange="false";OnConsoleViewChange()}else{consoleViewCombo.setValue(currentSelectedObject)}}});L.defaultButton=2;L.focus()}else{OnConsoleViewChange()}}}});coloumCountCombo=Ext.create("Ext.form.ComboBox",{store:J,displayField:"text",valueField:"value",value:isForSSLayout?ssColumnCount:incidentCount,editable:false,renderTo:isForSSLayout?"2colOr1colSelect":"coloumCount",width:190,id:"columnCountId",listeners:{select:function(){var K=Ext.Msg.confirm(confirmLbl,ConfirmColumnCountlbl,function(L){if(L=="yes"){if(isForSSLayout){ssColumnCount=coloumCountCombo.getValue();saveColoumnCount("SelfService",ssColumnCount)}else{saveColoumnCount(consoleViewCombo.getValue(),coloumCountCombo.getValue());setColoumnCount(consoleViewCombo.getValue(),coloumCountCombo.getValue())}}else{if(isForSSLayout){coloumCountCombo.setValue(ssColumnCount)}else{coloumCountCombo.setValue(incidentCount)}}});K.defaultButton=2;K.focus()}}});enableRFConsoleChk=new Ext.form.Checkbox({id:"RFConsoleView",cls:"checkboxClass verticalTop",boxLabel:enableConsoleLbl,renderTo:"viewAcessChk",labelAlign:"right",checked:false,hidden:isForSSLayout,handler:function(){consoleView=this.getValue();if(enableRFConsoleChk.checked==false){editServiceRequests.setDisabled(true);editServiceRequests.setValue(false)}else{editServiceRequests.setDisabled(false)}}});enableLayoutChangeOnEdit=new Ext.form.Checkbox({id:"RFLayoutChange",cls:"checkboxClass verticalTop",renderTo:"layoutEditChk",labelAlign:"right",checked:false});enableRFConsoleChk.on("focus",function(M,K,L){isChangeFlag="true"});var l="Explicit";var z="Implicit";var j=new Ext.data.ArrayStore({fields:["value","text"],data:[[OffId,OffValue],[z,ImplicitValue],[l,ExplicitValue]]});var a="15";var t="30";var I="60";var p="120";var u="240";var C="480";var e="720";var x="";if(lockdurationTime==""){x=Min15Value;lockdurationTime=a}else{if(lockdurationTime==a){x=Min15Value}else{if(lockdurationTime==t){x=Min30Value}else{if(lockdurationTime==I){x=Hour1Value}else{if(lockdurationTime==p){x=Hour2Value}else{if(lockdurationTime==u){x=Hour4Value}else{if(lockdurationTime==C){x=Hour8Value}else{if(lockdurationTime==e){x=Hour12Value}}}}}}}}var F=new Ext.data.ArrayStore({fields:["value","text"],data:[[a,Min15Value],[t,Min30Value],[I,Hour1Value],[p,Hour2Value],[u,Hour4Value],[C,Hour8Value],[e,Hour12Value]]});var H,r,D;if(!isForSSLayout){H=Ext.create("Ext.form.ComboBox",{id:"LockDurationCombo",store:F,displayField:"text",valueField:"value",value:x,typeAhead:false,mode:"local",selectOnFocus:true,renderTo:"lockDuration",editable:false,loading:true,width:120,hidden:recordLockValue==OffId,listeners:{select:function(M,K,L){lockdurationTime=M.getValue()}}});r=Ext.create("Ext.form.ComboBox",{store:j,displayField:"text",valueField:"value",value:recordLockValue,typeAhead:false,mode:"local",selectOnFocus:true,renderTo:"EnableRecordLocking",editable:false,loading:true,width:120,id:"recordLocking",listeners:{select:function(M,K,L){recordLockValue=M.getValue();if(recordLockValue==OffId){H.hide()}else{H.show()}}}});if(broadcastSettingValue!="TRUE_NOTCONFIGURABLE"){var f=new Ext.data.ArrayStore({fields:["value","text"],data:[["TRUE",Message_Scroll],["FALSE",Text_Scroll]]});D=Ext.create("Ext.form.ComboBox",{store:f,displayField:"text",valueField:"value",value:broadcastSettingValue,typeAhead:false,mode:"local",selectOnFocus:true,renderTo:"broadcastSettingsComboDiv",editable:false,loading:true,width:120,id:"broadcastSettingsCombo",listeners:{select:function(M,K,L){broadcastSettingValue=M.getValue();hideBrInterval(broadcastSettingValue)}}})}Ext.create("Ext.form.field.Number",{renderTo:"broadcastIntervalDiv",value:broadcastInterval,maxValue:99,minValue:2,maxLength:2,width:55,enforceMaxLength:true,allowBlank:false,id:"broadcastIntervalSpinner"});hideBrInterval(broadcastSettingValue)}var n=new Ext.form.Checkbox({id:"EnableMassUpdate",cls:"checkboxClass verticalTop",renderTo:"EnableMassUpdatePanel",labelAlign:"right",listeners:{focus:function(K){consoleValueChangedFlag=true},change:function(L,M,K){if(M!=K&&consoleValueChangedFlag){isConsoleViewChange="true"}consoleValueChangedFlag=false}}});EnableMultiLayoutCmp=new Ext.form.Checkbox({id:"EnableMultiLayout",cls:"checkboxClass verticalTop",renderTo:"EnableMultiLayoutPanel",labelAlign:"right",listeners:{change:function(N,O,L){if(O!=L&&consoleValueChangedFlag){isConsoleViewChange="true"}if(O&&executeActionFunction){executeActionFunction=false;updateConsoleLayoutDetail()}var K=document.getElementById("enableMultiLayoutLblInfo");if(typeof(K)!="undefined"){if(EnableMultiLayoutCmp.getValue()){K.style.display="block"}else{K.style.display="none"}}consoleValueChangedFlag=false;enableMultiLayout=O;if(Ext.getCmp("layoutGrdList")){var M=Ext.getCmp("layoutGrdList").down("headercontainer").getHideableColumns();for(i=0;i<M.length;i++){switch(M[i].id){case"name":continue;case"radio":M[i].hidden=enableMultiLayout;continue;default:M[i].hidden=!enableMultiLayout;continue}}Ext.getCmp("layoutGrdList").getView().refresh();setMultiLayoutSettings(enableMultiLayout);if(window.parent.profid){getSelectedLayouts(window.parent.profid,consoleSelected)}}setActionGridSize()}}});editServiceRequests=new Ext.form.Checkbox({id:"editServiceRequests",cls:"checkboxClass verticalTop",renderTo:"editServiceRequestsPanel",labelAlign:"right",handler:function(){editSR=this.getValue()}});editServiceRequestsLbl=Ext.create("Ext.form.Label",{text:editingServiceRequestslbl,renderTo:"editServiceRequestsLbl"});ChangeUpdateSettingCheckVal();var h=Ext.create("Ext.form.Label",{text:enableMassUpdateLabel,renderTo:"enableMassUpdateLbl"});var E=Ext.create("Ext.form.Label",{text:enableMultiLayoutLabel,renderTo:"enableMultiLayoutLbl"});var m=Ext.create("Ext.form.Label",{html:'&nbsp;&nbsp;<img src="'+resourcePath+'/SSDefaultTheme/SDEFicons/status-16-information.png" alt="'+enableMultiLayoutInfo+'" height="13" width="13" title="'+enableMultiLayoutInfo+'"></img>',renderTo:"enableMultiLayoutLblInfo"});if(!isForSSLayout){var A=Ext.create("Ext.form.Label",{html:'&nbsp;&nbsp;<img src="'+resourcePath+'/SSDefaultTheme/SDEFicons/status-16-information.png" alt="'+enableConsoleLayoutAccessValidationChkInfoLbl+'" height="13" width="13" title="'+enableConsoleLayoutAccessValidationChkInfoLbl+'"></img>',renderTo:"enableConsoleLayoutAccessValidationChkInfo"});var g=Ext.create("Ext.form.Label",{html:'&nbsp;&nbsp;<img src="'+resourcePath+'/SSDefaultTheme/SDEFicons/status-16-information.png" alt="'+hideRecordsWithCurrentUserAsClientTooltipInfoLbl+'" height="13" width="13" title="'+hideRecordsWithCurrentUserAsClientTooltipInfoLbl+'"></img>',renderTo:"restrictAccessWhenConsoleUserIsClientChkBxInfo"});if(broadcastSettingValue!="TRUE_NOTCONFIGURABLE"){var v=Ext.create("Ext.form.Label",{html:'&nbsp;&nbsp;<img src="'+resourcePath+'/SSDefaultTheme/SDEFicons/status-16-information.png" height="13" width="13"></img>',renderTo:"broadcastSettingsInfoDiv"});var c='	<div class="broadcastToolTip"> <div class="BoltFontcls">Broadcast Settings</div><div class="sectionHeader">'+Message_Scroll+'</div> <div><img src="'+resourcePathSDEFStyles+'/SDEFimages/msgscrollgif_console.gif" height="40px"/></div><div class="sectionHeader">'+Text_Scroll+'</div> <div><img src="'+resourcePathSDEFStyles+'/SDEFimages/textscrollgif_console.gif" height="40px"/></div></div>';var q=Ext.create("Ext.tip.ToolTip",{target:v.getEl(),html:c,minHeight:40,minWidth:600,width:600,style:"background-color: white;borderColor: #979797;borderStyle: solid",padding:8,shadow:"frame",bodyPadding:0,mouseOffset:[-200,18],autoHide:true,dismissDelay:0})}}profileGrid=Ext.create("Ext.grid.Panel",{id:"plist",renderTo:"right-tab-header",stripeRows:false,border:false,rowLines:false,hideHeaders:true,store:rightSideTabStore,height:isForSSLayout?554:400,width:280,cls:"gridPanelCls",forceFit:true,columns:[{id:"name",dataIndex:"name",renderer:k}],sortableColumns:false,listeners:{viewready:function(M){var K=M.view;M.mon(K,{uievent:function(R,O,N,P,Q,S){M.cellIndex=Q;M.recordIndex=P}});M.tip=Ext.create("Ext.tip.ToolTip",{target:K.el,delegate:".x-grid-cell",trackMouse:true,renderTo:Ext.getBody(),listeners:{beforeshow:function L(N){if(!Ext.isEmpty(M.cellIndex)&&M.cellIndex!==-1){header=M.headerCt.getGridColumns()[M.cellIndex];N.update(M.getStore().getAt(M.recordIndex).get(header.dataIndex))}}}})}}});profileGrid.on("cellclick",function(L,K,P,R,N,M,O){if(L.getGridColumns()[P].dataIndex=="name"){if(isChangeFlag=="true"){var Q=Ext.Msg.show({title:consoleLbl,msg:consoleWarningMessageOnProfileChange,buttons:Ext.Msg.YESNO,icon:Ext.MessageBox.WARNING,fn:function(S){if(S=="yes"){onProfileSelect(R.data.id,R.data.name);window.parent.profid=R.data.id;window.parent.profName=R.data.name}else{var T=profileGrid.store.findExact("id",pid);profileGrid.getSelectionModel().select(T);return}}});Q.defaultButton=2;Q.focus()}else{onProfileSelect(R.data.id,R.data.name);window.parent.profid=R.data.id;window.parent.profName=R.data.name}}});var w=Ext.create("Ext.form.Label",{html:"[ <a>"+createLbl+"</a> ]",cls:"linkCls",listeners:{element:"el",click:function(){if(isForSSLayout){parent.addNewTab(consoleSelected+"Layout",layout+": "+SSTicket,"AdminRFConsolelayout?Objectname="+consoleSelected)}else{if(EnableMultiLayoutCmp.getValue()==valueSentToaddNew||valueSentToaddNew==undefined){multiLayoutValChanged=false}else{multiLayoutValChanged=true}valueSentToaddNew=EnableMultiLayoutCmp.getValue();parent.addNewTab(consoleSelected+"Layout",layout+": "+consoleViewCombo.getRawValue(),"AdminRFConsolelayout?Objectname="+consoleSelected+"&MultiLayoutEnabled="+EnableMultiLayoutCmp.getValue(),"","",multiLayoutValChanged);valueSentToaddNew=EnableMultiLayoutCmp.getValue()}}}});if(isForSSLayout){currentSelectedObject="SelfService";consoleView=true;window.parent.SelectedConsoleChoice="SelfService"}var d=Ext.create("Ext.form.Label",{html:'[ <a title="'+refreshCustomLayoutlbl+'">'+refreshLbl+"</a> ]",cls:"linkCls",listeners:{element:"el",click:function(){reloadLayouts(currentSelectedObject)}}});var B=new Ext.panel.Panel({id:"linlLblPanel",border:false,cls:"leftAlign",items:[d,w]});var s=Ext.create("Ext.form.Label",{text:assinLayout,cls:"BoltFontcls"});var b=new Ext.panel.Panel({border:false,items:[selectAllLayout,s,DefaultLayoutLbl]});CreateEditLayoutPanel=new Ext.panel.Panel({id:"CreateLayoutPanel",cls:"marginTop5 autoHeight",border:false,layout:"column",items:[{width:isForSSLayout?"50%":"62%",border:false,items:[b]},{width:isForSSLayout?"50%":"38%",border:false,items:[B]}]});createLayoutPanel();layoutGridPanel.on("beforeitemclick",function(N,K,O,L,P,M){isChangeFlag="true"});var o=getGridHeight();actionGrid=Ext.create("Ext.grid.Panel",{id:"actionId",renderTo:!isForSSLayout?"actionId":"",stripeRows:true,border:false,forceFit:true,hidden:isForSSLayout,selModel:Ext.create("Ext.selection.CheckboxModel",{checkOnly:true,listeners:{selectionchange:function(M,L,K){isChangeFlag="true"}}}),store:ActionIncident,height:o,width:280,autoScroll:true,cls:"gridPanelCls",columns:[{cls:"columnCls",id:"Actions",width:280,text:actionslbl,menuDisabled:true,dataIndex:"name"}],sortableColumns:false});profileGrid1=Ext.create("Ext.grid.Panel",{id:"plist1",renderTo:"right-tab-header1",stripeRows:false,border:false,rowLines:false,forceFit:true,cls:"gridPanelCls",autoScroll:true,store:rightSideTabStoreForChngSch,height:400,width:450,selModel:Ext.create("Ext.selection.CheckboxModel",{checkOnly:true,listeners:{selectionchange:function(M,L,K){isChangeFlag="true"}}}),columns:[{cls:"columnCls ProfileHeaderCls",id:"ProfileName",flex:1,height:20,text:AllProfileLabel,dataIndex:"name",menuDisabled:true,}],sortableColumns:false,listeners:{viewready:function(M){var K=M.view;M.mon(K,{uievent:function(R,O,N,P,Q,S){M.cellIndex=Q;M.recordIndex=P}});M.tip=Ext.create("Ext.tip.ToolTip",{target:K.el,delegate:".x-grid-cell",trackMouse:true,renderTo:Ext.getBody(),listeners:{beforeshow:function L(N){if(!Ext.isEmpty(M.cellIndex)&&M.cellIndex!==-1){N.update(M.getStore().getAt(M.recordIndex).data.name)}}}})}}});agentGrid=Ext.create("Ext.grid.Panel",{id:"agentId",renderTo:!isForSSLayout?"agentToolsId":"",stripeRows:true,border:false,forceFit:true,viewConfig:{markDirty:false},hidden:isForSSLayout,selModel:Ext.create("Ext.selection.CheckboxModel",{checkOnly:true,listeners:{selectionchange:function(M,L,K){isChangeFlag="true"}}}),store:AgentIncident,height:o,width:280,autoScroll:true,cls:"gridPanelCls",columns:[{cls:"columnCls",id:"Agents",width:280,text:agentslbl,menuDisabled:true,dataIndex:"name"}],sortableColumns:false,listeners:{viewready:function(O,K){try{var M=Ext.grid.Panel.prototype.doLayout;var L=1;Ext.select(".x-grid-row-checker").each(function(P){P.dom.id="chbx-"+L++});M.apply(this,arguments)}catch(N){}}}});Ext.create("Ext.toolbar.Toolbar",{border:false,height:40,margins:"0 0 0 0",autoWidth:true,renderTo:"divTB",cls:"configureTrCls",items:[{scale:"medium",iconCls:"saveIcon",tooltipType:"title",tooltip:saveLbl,id:"saveBtn",handler:saveBtnHandler}]});function k(P,O,L,Q,N,M,K){if(Q==0){return"<b>"+P+"</b>"}else{return P}}if(isRFConsoleEnable){if(y){consoleViewCombo.bindStore(RFSegregationArrayStore);consoleViewCombo.setValue("Incident");getValue("Incident")}else{consoleViewCombo.bindStore(RFViewArrayStore);consoleViewCombo.setValue("Incident")}enableConsoleLbl=ConsoleViewAcesslbl+": "+consoleViewCombo.getRawValue();var G=document.getElementById("configureConsoleId");if(G!=null&&G!=undefined&&G!=""){G.style.visibility="visible"}if(enableConsoleDashboardPanel!=null&&enableConsoleDashboardPanel!=undefined&&enableConsoleDashboardPanel!=""){enableConsoleDashboardPanel.style.visibility="visible"}if(enableConsoleIncidentSRSegregationPanel!=null&&enableConsoleIncidentSRSegregationPanel!=undefined&&enableConsoleIncidentSRSegregationPanel!=""){enableConsoleIncidentSRSegregationPanel.style.visibility="visible"}document.getElementById("viewCnsoleLabel").appendChild(document.createTextNode(enableConsoleLbl));enableRFConsoleChk.setVisible(true);ConsoleLabel.setVisible(false);ConsoleViewLabel.setVisible(true)}else{ConsoleLabel.setVisible(true);ConsoleViewLabel.setVisible(false);AddRemoveChildHelper.removeAllElementsFromDiv(document.getElementById("viewCnsoleLabel"));enableRFConsoleChk.setVisible(false)}if(isForSSLayout){ConsoleViewLabel.setVisible(false);document.getElementById("viewCnsoleLabel").style.display="none";document.getElementById("enableMassUpdateLbl").style.display="none";if(enableTktLayoutChk==false){var G=document.getElementById("configureConsoleId");if(G!=null&&G!=undefined&&G!=""){G.style.visibility="hidden"}}enableRFConsoleChk.setVisible(false);n.setVisible(false)}setElementsDisabled(true);profileGrid.focus();Ext.define("Ext.override.dom.Element",{override:"Ext.dom.Element",focus:function(Q,P){var M=this,O,K;P=P||M.dom;K=(P.ownerDocument||DOC).body||DOC.body;try{if(Number(Q)){Ext.defer(M.focus,Q,M,[null,P])}else{if(P.offsetHeight>Ext.dom.Element.getViewHeight()){O=K.scrollTop}var L=P.id;if(L.indexOf("gridview")==-1){P.focus()}if(O!==undefined){K.scrollTop=O}}}catch(N){}return M}});if(!isForSSLayout){currentSelectedObject=consoleViewCombo.getValue()}window.scrollTo(0,0);if(window.parent!=null&&window.parent.parent!=null){window.parent.parent.scrollTo(0,0)}});var actionGrid,agentGrid,profileGrid;function AddCustomizeMenu(){if(consoleSelected.toLowerCase()=="sr"||consoleSelected.toLowerCase()=="incident"){parent.addNewTab("IncidentLayoutCM","Customize Menus: "+IncidentSRLbl,"AdminCustomizeMenu?Objectname=Incident")}else{parent.addNewTab(consoleSelected+"LayoutCM","Customize Menus: "+consoleViewCombo.getRawValue(),"AdminCustomizeMenu?Objectname="+consoleSelected)}}function AddCustomizeSmartSuggest(){parent.addNewTab("SmartSuggestion",smartSuggestionlbl+": "+RemedyForce_Consolelbl,"AdminSmartSuggestions?Objectname="+consoleSelected)}function AddSSCustomizeSmartSuggest(){parent.addNewTab("SSSmartSuggestion",smartSuggestionlbl+": "+Remedyforce_Self_Servicelbl,"AdminSSSmartSuggestions?Objectname="+consoleSelected)}function showHideConfigure(b){isChecked=document.getElementById(b).checked;var a=document.getElementById("configureConsoleId");if(!isChecked){a.style.visibility="hidden"}else{AddRemoveChildHelper.removeAllElementsFromDiv(document.getElementById("viewCnsoleLabel"));if(a!=null&&a!=undefined&&a!=""){a.style.visibility="visible"}consoleViewCombo.setValue("Incident");if(isForSSLayout){getValue("SelfService")}else{getValue("Incident")}layoutPanel.setVisible(true);setElementsDisabled(true);unSelectAllElements();isChangeFlag=false}}function RefreshAndSetSelected(c,b){pid=c;if(pid!=undefined&&pid!=""){var a=profileGrid.store.findExact("id",pid);profileGrid.getSelectionModel().select(a);actionGrid.getSelectionModel().deselectAll();agentGrid.getSelectionModel().deselectAll();setTimeout(function(){getSelectedActions(pid,consoleSelected)},1000)}isChangeFlag="false"}function ShowHideCheckBox(){var a=enableStandAloneCon;var c=enablerf.checked;if(isChangeFlag=="true"){var b=Ext.Msg.show({title:consoleLbl,msg:consoleWarningMessageOnProfileChange,buttons:Ext.Msg.YESNO,icon:Ext.MessageBox.WARNING,fn:function(d){if(d=="yes"){changePageUI(c,enableStandAloneCon);isChangeFlag="false"}else{if(c){enablerf.checked=false}else{enablerf.checked=true}}}});b.defaultButton=2;b.focus()}else{changePageUI(c,enableStandAloneCon)}}function changePageUI(a,h){disableChangeSchView();var j=false;if(!isForSSLayout){j=enableIncidentSRSegregation;if(j!=null){j=enableIncidentSRSegregation.checked}else{j=enableIncidentSRSegregationVal}}var g=document.getElementById("configureConsoleId");var f=document.getElementById("RecordLockDiv");var d=document.getElementById("RFConsoleTD");if(a){if(j){consoleViewCombo.bindStore(RFSegregationArrayStore);consoleViewCombo.setValue("Incident");reloadLayouts("Incident");currentSelectedObject=consoleViewCombo.getValue();if(currentSelectedObject=="SR"){document.getElementById("editServiceRequestsDiv").style.display="inline"}}else{consoleViewCombo.bindStore(RFViewArrayStore);consoleViewCombo.setValue("Incident");reloadLayouts("Incident");currentSelectedObject=consoleViewCombo.getValue();document.getElementById("editServiceRequestsDiv").style.display="none"}isRFConsoleEnable=true;enableRFConsoleChk.setVisible(true);if(h!=null&&h!=undefined&&h!=""){h.disabled=true;h.checked=false}var b=document.getElementById("consolePage:mainform:consoleSmartSuggestion");if(b!=null){b.style.visibility="visible"}if(g!=null&&g!=undefined&&g!=""){g.style.visibility="visible"}if(enableConsoleDashboardPanel!=null&&enableConsoleDashboardPanel!=undefined&&enableConsoleDashboardPanel!=""){enableConsoleDashboardPanel.style.visibility="visible"}if(enableConsoleIncidentSRSegregationPanel!=null&&enableConsoleIncidentSRSegregationPanel!=undefined&&enableConsoleIncidentSRSegregationPanel!=""){enableConsoleIncidentSRSegregationPanel.style.visibility="visible"}ConsoleLabel.setVisible(false);ConsoleViewLabel.setVisible(true);enableConsoleLbl=ConsoleViewAcesslbl+": "+consoleViewCombo.getRawValue();document.getElementById("viewCnsoleLabel").appendChild(document.createTextNode(enableConsoleLbl));getRecordUpdateSettingCheckVal(currentSelectedObject);ChangeUpdateSettingCheckVal();if(d!=null&&d!=undefined&&d!=""){d.style.display="block"}if(GeneralSettingsLabelEle!=null&&GeneralSettingsLabelEle!=undefined&&GeneralSettingsLabelEle!=""){GeneralSettingsLabelEle.style.visibility="visible"}if(IndividualViewLableEle!=null&&IndividualViewLableEle!=undefined&&IndividualViewLableEle!=""){IndividualViewLableEle.style.visibility="visible"}if(f!=null&&f!=undefined&&f!=""){f.style.visibility="visible"}if(profileGrid!=null&&profileGrid!=undefined&&profileGrid!=""){var c=profileGrid.getSelectionModel();if(c!=null&&c!=""&&c!=undefined){c.deselectAll()}}}else{isRFConsoleEnable=false;var b=document.getElementById("consolePage:mainform:consoleSmartSuggestion");if(b!=null){b.style.visibility="hidden"}AddRemoveChildHelper.removeAllElementsFromDiv(document.getElementById("viewCnsoleLabel"));document.getElementById("configureConsoleId").style.visibility="hidden";if(enableConsoleDashboardPanel!=null&&enableConsoleDashboardPanel!=undefined&&enableConsoleDashboardPanel!=""){enableConsoleDashboardPanel.style.visibility="hidden"}if(enableConsoleIncidentSRSegregationPanel!=null&&enableConsoleIncidentSRSegregationPanel!=undefined&&enableConsoleIncidentSRSegregationPanel!=""){enableConsoleIncidentSRSegregationPanel.style.visibility="hidden"}enableRFConsoleChk.setVisible(false);if(h!=null&&h!=undefined&&h!=""){h.disabled=false}consoleViewCombo.bindStore(viewStore);ConsoleLabel.setVisible(true);ConsoleViewLabel.setVisible(false);if(d!=null&&d!=undefined&&d!=""){d.style.display="none"}if(GeneralSettingsLabelEle!=null&&GeneralSettingsLabelEle!=undefined&&GeneralSettingsLabelEle!=""){GeneralSettingsLabelEle.style.visibility="hidden"}if(IndividualViewLableEle!=null&&IndividualViewLableEle!=undefined&&IndividualViewLableEle!=""){IndividualViewLableEle.style.visibility="hidden"}if(f!=null&&f!=undefined&&f!=""){f.style.visibility="hidden"}}setElementsDisabled(true);consoleViewCombo.setValue("Incident");getValue("Incident");layoutPanel.setVisible(true);unSelectAllElements();var e=document.getElementById("EnableMultiLayoutPanelDiv");if(consoleSelected=="Incident"&&typeof(enableIncidentSRSegregation)!="undefined"&&!enableIncidentSRSegregation.checked){if(EnableMultiLayoutCmp){EnableMultiLayoutCmp.setValue(false);pid=null;window.parent.profid="";window.parent.profName="";if(enableLayoutChangeOnEdit){enableLayoutChangeOnEdit.setValue(false)}}e.style.display="none"}else{if(consoleSelected=="Task"&&typeof(enableIncidentSRSegregation)!="undefined"&&enableIncidentSRSegregation.checked){e.style.display="block"}}}function getSelectedActions(c,b){var a;Visualforce.remoting.Manager.invokeAction(_RemotingActions.getSelectedActions,c,b,function(d,g){if(d!=null&&d!=""&&d.length>0){var f=d.split(",");var e;for(i=0;i<f.length;i++){if(f[i].length>2){e=agentGrid.store.findExact("id",f[i]);if(e!=null&&e!="-1"){agentGrid.getSelectionModel().select(e,true,true)}else{e=actionGrid.store.findExact("id",f[i]);if(e){actionGrid.getSelectionModel().select(e,true,true)}}}else{if(f[i]>20){e=agentGrid.store.findExact("id",f[i]);agentGrid.getSelectionModel().select(e,true,true)}else{e=actionGrid.store.findExact("id",f[i]);actionGrid.getSelectionModel().select(e,true,true)}}}}else{actionGrid.getSelectionModel().deselectAll();agentGrid.getSelectionModel().deselectAll()}isChangeFlag="false"},{escape:true})}function getSelectedViews(c,b){var a;Visualforce.remoting.Manager.invokeAction(_RemotingActions.getSelectedViews,c,b,function(d,e){if(d!=null&&d!=""){Ext.getCmp("RFConsoleView").setValue(d)}else{Ext.getCmp("RFConsoleView").setValue(false)}isChangeFlag="false"},{escape:true})}function getEditSR(a){Visualforce.remoting.Manager.invokeAction(_RemotingActions.getEditSR,a,function(b,c){var d=Ext.getCmp("editServiceRequests");if(b!=null&&b!=""){d.setValue(b)}else{d.setValue(false)}})}function getSelectedLayouts(c,b){enableMultiLayout=EnableMultiLayoutCmp.getValue();var a;multiSelectedValue=[];Visualforce.remoting.Manager.invokeAction(_RemotingActions.getSelectedLayout,c+"#"+b+"#"+enableMultiLayout,function(o,d){if(o!=null){o=o.split(nonPrint);var l=[];var l=document.querySelectorAll('input[name^="layoutInput"]');for(var h=0;h<l.length;h++){l[h].checked=false}var m=document.querySelectorAll('input[id="'+o[0]+'"]');if(c){for(var h=0;h<m.length;h++){m[h].checked=true}}selectedLayout=o[0];try{multiSelectedValue=o[3].split(",");if(multiSelectedValue.indexOf(selectedLayout)==-1){multiSelectedValue.push(selectedLayout)}}catch(k){multiSelectedValue[0]=selectedLayout}selQueueId=o[1];var n=document.getElementById(queueEle);if(n!=null){n.value=o[2]}if(enableMultiLayout&&c!=null){var j=o[4].toUpperCase()=="TRUE"?true:false;enableLayoutChangeOnEdit.setValue(j);var g=document.getElementsByName("MultipleLayouts");for(var h=0,f=g.length;h<f;h++){if(multiSelectedValue.indexOf(g[h].value)>-1){g[h].checked=true}else{g[h].checked=false}}setAllLayoutSelectCheckbox();defaultLayoutID=selectedLayout}}isChangeFlag="false"},{escape:true})}function activateLink(c){if(c){isExcludeFieldsEnabled=c.checked}var b="isActive";var a="isDisabled";if(!isExcludeFieldsEnabled){b="isDisabled";a="isActive"}document.getElementById("fieldSetEditLink").classList.add(b);document.getElementById("fieldSetEditLink").classList.remove(a)}function saveRecord(c,b,a,d){Visualforce.remoting.Manager.invokeAction(_RemotingActions.saveRecord,c,b,a,d,function(e,f){if(f.type==="exception"){showMessage(f.message)}else{showMessage(saveSuccess)}Ext.getCmp("saveBtn").setDisabled(false)},{escape:true})}function getValue(a){consoleSelected=a;if(consoleSelected.toLowerCase()=="incident"||consoleSelected.toLowerCase()=="inc"||consoleSelected.toLowerCase()=="sr"){if(consoleSelected.toLowerCase()=="incident"){coloumCountCombo.setValue(incidentCount)}else{if(consoleSelected.toLowerCase()=="sr"){coloumCountCombo.setValue(srCount)}}ChangeAgentLabel();AddRemoveFulfillOption();actionGrid.reconfigure(ActionIncident);agentGrid.reconfigure(AgentIncident)}else{if(consoleSelected.toLowerCase()=="task"){coloumCountCombo.setValue(taskCount);actionGrid.reconfigure(ActionTask);agentGrid.reconfigure(AgentTask)}else{if(consoleSelected.toLowerCase()=="problem"){coloumCountCombo.setValue(problemCount);actionGrid.reconfigure(ActionProblem);agentGrid.reconfigure(AgentProblem)}else{if(consoleSelected.toLowerCase()=="change"){coloumCountCombo.setValue(changeCount);actionGrid.reconfigure(ActionChange);agentGrid.reconfigure(AgentChange)}else{if(consoleSelected.toLowerCase()=="release"){coloumCountCombo.setValue(releaseCount);actionGrid.reconfigure(ActionRelease);agentGrid.reconfigure(AgentRelease)}else{if(consoleSelected.toLowerCase()=="broadcast"){coloumCountCombo.setValue(broadcastCount);actionGrid.reconfigure(ActionBroadcast);agentGrid.reconfigure(AgentBroadcast)}}}}}}}function fetchSelecteActionId(f,a){var d=[];var c="--";for(count=0;count<f.data.length;count++){if(actionGrid.getView().getSelectionModel().isSelected(count)){var e=f.getAt(count);var b=e.get("id");if(b.length>5){c+=","+b}else{d.push(b)}}}for(count=0;count<a.data.length;count++){if(agentGrid.getView().getSelectionModel().isSelected(count)){var e=a.getAt(count);var b=e.get("id");if(b.length>5){c+=","+b}else{d.push(b)}}}if(c!="--"){d.push(c)}return d}function saveBtnHandler(){var e;Ext.getCmp("saveBtn").setDisabled(true);var d;if(enableStandAloneCon!=null&&enableStandAloneCon!=undefined){d=enableStandAloneCon.checked}else{d=false}if(!isForSSLayout&&!d&&!enablerf.checked){saveConsoleSetting()}else{if(consoleSelected!="changeSch"&&consoleSelected!="ServiceOutage"){var a=[];if(consoleSelected=="Incident"||consoleSelected.toLowerCase()=="sr"){a=fetchSelecteActionId(ActionIncident,AgentIncident)}else{if(consoleSelected=="Task"){a=fetchSelecteActionId(ActionTask,AgentTask)}else{if(consoleSelected=="Change"){a=fetchSelecteActionId(ActionChange,AgentChange)}else{if(consoleSelected=="Release"){a=fetchSelecteActionId(ActionRelease,AgentRelease)}else{if(consoleSelected=="Problem"){a=fetchSelecteActionId(ActionProblem,AgentProblem)}else{if(consoleSelected=="Broadcast"){a=fetchSelecteActionId(ActionBroadcast,AgentBroadcast)}}}}}}columnCount=coloumCountCombo.getValue();setColoumnCount(consoleSelected,columnCount);pselect=profileGrid.getSelectionModel().getSelection();var f="";if(pselect[0]!=null){f=pselect[0].data.id}selectedLayout=fetchSelectedLayout();if(f&&!selectedLayout){showMessage(selectDefaultlayout);Ext.getCmp("saveBtn").setDisabled(false);return}var g="";if(multiSelectedValue.length>0){multiSelectedValue.splice(multiSelectedValue.indexOf(selectedLayout),1);g=multiSelectedValue.join()}if(f==null||f==""){f="";selectedLayout="";consoleView=false}enableUpdating=Ext.getCmp("EnableMassUpdate").getValue();enableMultiLayout=EnableMultiLayoutCmp.getValue();e=enableLayoutChangeOnEdit.getValue()}var k;if(isChecked){k="standalone"}else{k="rfenabled"}var c="";if(consoleSelected=="changeSch"||consoleSelected=="ServiceOutage"){if(profileGrid1.getSelectionModel().getCount()==rightSideTabStoreForChngSch.count()){selectedProfileForChSch="orgDefault"}else{if(profileGrid1.getSelectionModel().getCount()==0){selectedProfileForChSch="NoProfileSelected"}else{var j=profileGrid1.getSelectionModel().getSelection();for(var b in j){if(b!="remove"&&b!="indexOf"){selectedProfileForChSch+=","+j[b].data.id}}}}c=selectedProfileForChSch}else{c=f}var h=Ext.getCmp("broadcastIntervalSpinner");if(h){if(h.isValid()){broadcastInterval=h.getValue()}else{h.setValue(broadcastInterval)}}if(recordLockValue!=null&&recordLockValue!=""&&recordLockValue!=OffId){if(lockdurationTime!=null&&lockdurationTime!="undefined"&&lockdurationTime!=""){SaveLayouts(consoleSelected,c,selectedLayout,consoleView,selQueueId,enableUpdating,editSR,recordLockValue,enableMultiLayout,g,e,broadcastSettingValue,broadcastInterval,lockdurationTime)}}else{var l=document.getElementById("LockDurationCombo");if(l!=null&&l!=undefined&&l!=""){l.style.display="none"}SaveLayouts(consoleSelected,c,selectedLayout,consoleView,selQueueId,enableUpdating,editSR,recordLockValue,enableMultiLayout,g,e,broadcastSettingValue,broadcastInterval)}if(consoleSelected!="changeSch"&&consoleSelected!="ServiceOutage"){saveRecord(a,f,consoleSelected,columnCount)}isChangeFlag="false";isConsoleViewChange="false";selectedProfileForChSch=""}}function ChangeSchSaveMsg(){if(consoleSelected=="changeSch"||consoleSelected=="ServiceOutage"){showMessage(saveSuccess);Ext.getCmp("saveBtn").setDisabled(false)}}function setColoumnCount(a,b){if(isForSSLayout){ssColumnCount=b}else{if(a.toLowerCase()=="incident"){incidentCount=b}else{if(a.toLowerCase()=="task"){taskCount=b}else{if(a.toLowerCase()=="problem"){problemCount=b}else{if(a.toLowerCase()=="change"){changeCount=b}else{if(a.toLowerCase()=="release"){releaseCount=b}else{if(a.toLowerCase()=="broadcast"){broadcastCount=b}else{if(a.toLowerCase()=="sr"){srCount=b}}}}}}}}}function onCompleteSave(){showMessage(messageString);Ext.getCmp("saveBtn").setDisabled(false)}function onChangeColorPicker(){if(typeof(consoleHighlightsColorPickerRecord)!="undefined"){if(consoleHighlightsColorPickerRecord.value==""){consoleHighlightsColorPickerRecord.value="#0573b4"}}if(typeof(consoleHighlightsColorPickerAction)!="undefined"){if(consoleHighlightsColorPickerAction.value==""){consoleHighlightsColorPickerAction.value="#0573b4"}}}function showMessage(a){Ext.MessageBox.show({id:"commonmsgbox",title:consoleLbl,cls:"rf-msg-cls",minWidth:300,minHeight:100,msg:a,buttons:Ext.MessageBox.OK})}function fetchSelectedLayout(){var d="layoutInput";if(enableMultiLayout){multiSelectedValue=[];var a=document.getElementsByName("MultipleLayouts");for(var c=0,e=a.length;c<e;c++){if(a[c].checked&&multiSelectedValue.indexOf(a[c].value)==-1){multiSelectedValue.push(a[c].value)}}d="layoutInputdefault"}var f=document.getElementsByName(d);var b;for(var c=0,e=f.length;c<e;c++){if(f[c].checked){b=f[c].value;break}}return b}function setSelectedLayouts(d){var a="layoutInput";if(enableMultiLayout){a="layoutInputdefault";var b=document.getElementsByName("MultipleLayouts");for(var c=0,e=b.length;c<e;c++){if(multiSelectedValue.indexOf(b[c].value)>-1||b[c].value==d){b[c].checked=true}else{b[c].checked=false}}}defaultLayout=document.querySelector('input[id="'+d+'"][name="'+a+'"]');if(defaultLayout){defaultLayout.checked=true}setAllLayoutSelectCheckbox()}function setElementsDisabled(a){layoutGridPanel.setDisabled(a);actionGrid.setDisabled(a);agentGrid.setDisabled(a);enableRFConsoleChk.setDisabled(a);editServiceRequests.setDisabled(a);selectAllLayout.setDisabled(a);enableLayoutChangeOnEdit.setDisabled(a)}function setProfileDisabled(a){profileGrid.setDisabled(a)}function unSelectAllElements(){actionGrid.getSelectionModel().deselectAll();agentGrid.getSelectionModel().deselectAll();enableRFConsoleChk.setValue(false);editServiceRequests.setValue(false);document.getElementById("profileName").textContent="";layoutGridPanel.getView().refresh();isChangeFlag=false}function enableChangeSchView(){document.getElementById("right-tab-header1").style.display="inline";document.getElementById("right-tab-header").style.display="none";document.getElementById("coloumCountTR").style.display="none";document.getElementById("EnableMassUpdateTR").style.display="none";document.getElementById("EnableMultiLayoutTR").style.display="none";document.getElementById("EnableHighlightsTR").style.display="none";document.getElementById("EnableHighlightsActionsTR").style.display="none";document.getElementById("nestedTable").style.display="none";document.getElementById("customizeMenus").style.display="none";document.getElementById("profileName").style.display="none";document.getElementById("help").style.display="";currentSelectedObject=consoleViewCombo.getDisplayValue();profileGrid1.getSelectionModel().deselectAll();if(consoleViewCombo.getValue()=="ChangeSch"){document.getElementsByClassName("helpchangeSchlbl")[0].style.display="";document.getElementsByClassName("helpSOlbl")[0].style.display="none";consoleSelected="changeSch"}else{if(consoleViewCombo.getValue()=="ServiceOutage"){document.getElementsByClassName("helpchangeSchlbl")[0].style.display="none";document.getElementsByClassName("helpSOlbl")[0].style.display="";consoleSelected=consoleViewCombo.getValue()}}getSelectedProfilesbyModule(consoleSelected)}function disableChangeSchView(){document.getElementById("right-tab-header").style.display="inline";document.getElementById("right-tab-header1").style.display="none";document.getElementById("help").style.display="none";document.getElementById("coloumCountTR").style.display="";document.getElementById("EnableMassUpdateTR").style.display="";document.getElementById("EnableMultiLayoutTR").style.display="";document.getElementById("EnableHighlightsTR").style.display="";document.getElementById("EnableHighlightsActionsTR").style.display="";document.getElementById("nestedTable").style.display="";document.getElementById("customizeMenus").style.display="";document.getElementById("profileName").style.display=""}function OnConsoleViewChange(){if(consoleViewCombo.getValue()=="ChangeSch"||consoleViewCombo.getValue()=="ServiceOutage"){enableChangeSchView();return}else{if(consoleSelected=="changeSch"||consoleSelected=="ServiceOutage"){disableChangeSchView()}}if(consoleViewCombo.getValue()!="Incident"&&consoleViewCombo.getValue()!="Task"&&consoleViewCombo.getValue()!="Change"){enableMultiLayout=false;document.getElementById("EnableMultiLayoutTR").style.display="none";enableLayoutChangeOnEdit.setValue(false)}else{document.getElementById("EnableMultiLayoutTR").style.display=""}if(enableLayoutChangeOnEdit){enableLayoutChangeOnEdit.setValue(false)}pid=null;window.parent.profid="";window.parent.profName="";profileGrid.getSelectionModel().deselectAll(true);profileGrid.focus();setProfileDisabled(true);if(isRFConsoleEnable==true){enableConsoleLbl=ConsoleViewAcesslbl+": "+consoleViewCombo.getRawValue();AddRemoveChildHelper.removeAllElementsFromDiv(document.getElementById("viewCnsoleLabel"));document.getElementById("viewCnsoleLabel").appendChild(document.createTextNode(enableConsoleLbl));var d=document.getElementById("consolePage:mainform:consoleSmartSuggestion");if(consoleViewCombo.getValue()=="Incident"||consoleViewCombo.getValue()=="IN"||consoleViewCombo.getValue()=="INC"){if(d!=null){d.style.visibility="visible"}}else{if(d!=null){d.style.visibility="hidden"}}var c=document.getElementById("EnableHighlightsTR");var b=document.getElementById("EnableHighlightsActionsTR");if(c!=null&&typeof(c)!="undefined"&&b!=null&&typeof(b)!="undefined"){if(consoleViewCombo.getValue()=="Incident"||consoleViewCombo.getValue()=="IN"||consoleViewCombo.getValue()=="INC"||consoleViewCombo.getValue()=="SR"){c.style.display="";b.style.display=""}else{c.style.display="none";b.style.display="none"}}}else{AddRemoveChildHelper.removeAllElementsFromDiv(document.getElementById("viewCnsoleLabel"))}if(consoleViewCombo.getValue()!="SR"){document.getElementById("editServiceRequestsDiv").style.display="none"}else{document.getElementById("editServiceRequestsDiv").style.display="inline"}getValue(consoleViewCombo.getValue());document.getElementById("profileName").textContent="";Ext.getCmp("RFConsoleView").setValue(false);var a=document.getElementById(selectedLayout);if(a!=null&&a!=undefined){a.checked=false}setElementsDisabled(true);currentSelectedObject=consoleViewCombo.getValue();getRecordUpdateSettingCheckVal(currentSelectedObject);reloadLayouts(currentSelectedObject);window.parent.SelectedConsoleChoice=currentSelectedObject;CurrentObject=currentSelectedObject;if(window.parent.ConsoleTabLocalChangeFlag==true){RefrshActionAgentGrid(CurrentObject)}isChangeFlag="false"}function ChangeUpdateSettingCheckVal(){if(enableRecordUpdate!=null&&enableRecordUpdate!="undefined"){Ext.getCmp("EnableMassUpdate").setValue(enableRecordUpdate)}var a=enableIncidentSRSegregationVal;if(enableIncidentSRSegregation!=null){a=enableIncidentSRSegregation.checked}if(enableMultiLayout!=null&&enableMultiLayout!="undefined"){EnableMultiLayoutCmp.setValue(enableMultiLayout);if(!enableMultiLayout){executeActionFunction=true}}}function onProfileSelect(b,a){pid=b;actionGrid.getSelectionModel().deselectAll();agentGrid.getSelectionModel().deselectAll();document.getElementById("profileName").textContent=profilelbl+a;getSelectedActions(pid,consoleSelected);getSelectedViews(pid,consoleSelected);getSelectedLayouts(pid,consoleSelected);getEditSR(pid);setElementsDisabled(false);isChangeFlag="false"}function setPopUpVar(b,a){if(b!=null&&b!=""&&onCompleteFunction!=null){onCompleteFunction(b,a)}}function activateWindow(){activeAllWindowFlag=true}function openQueuePopup(a){selQueueId=a;assignIncidentTOQueue(a)}function closePopup(){if(popUpWindow!=null&&popUpWindow!=undefined){if(Ext.isIE8){popUpWindow.hide()}else{popUpWindow.close()}}}function changePopUpTitle(a){if(popUpWindow!=null&&popUpWindow!="undefined"){popUpWindow.setTitle(a)}}function openQueueOnlyPopUp(){objName=ORGNameSpace+"Incident__c";openPopup("SearchPage?popupId=Queue&isQueurorUser=true&isLookup=true&queueFor=Incident__c&isOnlyQueueList=true&filterClause="+escape("sobjectType='"+objName+"'"),openQueuePopup,580,475)}function openPopup(a,b){onCompleteFunction=openQueuePopup;popUpWindow=Ext.create("Ext.window.Window",{height:550,width:670,layout:"fit",modal:true,constrain:true,html:'<iframe frameborder="0" src ="/apex/'+a+'" style="width:100%;height:100%;border:none"/>'});popUpWindow.show()}function AddRemoveFulfillOption(){var a=ActionIncident.getById("14");if(a!=null&&typeof(a)!="undefined"&&a!=""){if(consoleSelected!=null&&typeof(consoleSelected)!="undefined"&&(consoleSelected.toLowerCase()=="sr"||(typeof(enableIncidentSRSegregation)!="undefined"&&enableIncidentSRSegregation!=null&&!enableIncidentSRSegregation.checked&&(consoleSelected.toLowerCase()=="incident"||consoleSelected.toLowerCase()=="inc")))){ActionIncident.filterBy(function(b){return b.get("id")!=""})}else{ActionIncident.filterBy(function(b){return b.get("id")!="14"})}}}function ChangeAgentLabel(){var a=AgentIncident.getById("25");if(a!=null&&a!=undefined&&a!=""){if(consoleSelected.toLowerCase()=="sr"){a.set("name",SRMatchingLabel)}else{a.set("name",IncMatchingLabel)}}}function getSelectedProfilesbyModule(b){if(b!=null&&b!=""&&(b=="ServiceOutage"||b=="changeSch")){var a;Visualforce.remoting.Manager.invokeAction(_RemotingActions.getSelectedProfilesbyModule,b,null,function(c,f){if(c!=null&&c!=""){if(c=="AllProfileSelected"){profileGrid1.getSelectionModel().selectAll(true)}else{var e=c.split(",");var g=e.length-1;var d;for(i=0;i<g;i++){d=profileGrid1.store.findExact("id",e[i]);if(d!=null&&d!="-1"){profileGrid1.getSelectionModel().select(d,true,true)}}}}else{profileGrid1.getSelectionModel().deselectAll()}isChangeFlag="false"},{escape:true})}}function closePopupRF(){if(popUpWindow!=null&&popUpWindow!=undefined){popUpWindow.close()}}function createLayoutPanel(){layoutGridPanel=Ext.create("Ext.grid.Panel",{id:"layoutGrdList",stripeRows:false,border:false,rowLines:true,hideHeaders:true,store:layoutStore,height:isForSSLayout?460:110,width:isForSSLayout?590:580,cls:"gridPanelCls",forceFit:true,disableSelection:true,columns:[{id:"checkbox",width:30,dataIndex:"value",menuDisabled:true,hidden:!enableMultiLayout,renderer:function(f,c,b,h,e,d,a){var g='<input type="Checkbox" onchange="toggleCheck(\''+b.data.id+'__Multi\')"  name="MultipleLayouts" id="'+b.data.id+'__Multi" value="'+b.data.id+'"';g=g+"/>";return g}},{id:"radio",width:30,dataIndex:"value",menuDisabled:true,hidden:enableMultiLayout,renderer:function(f,c,b,h,e,d,a){var g='<input type="Radio" name="layoutInput" id="'+b.data.id+'" value="'+b.data.id+'"';g=g+"/>";return g}},{id:"name",flex:2,dataIndex:"name",menuDisabled:true,},{id:"chk",flex:2,dataIndex:"value",menuDisabled:true,hidden:!enableMultiLayout,renderer:function(f,c,b,h,e,d,a){var g='<input type="Radio" name="layoutInputdefault" onchange="toggleCheck(\''+b.data.id+'\')" id="'+b.data.id+'" value="'+b.data.id+'"';g=g+"/>";return g}}],sortableColumns:false});layoutPanel=new Ext.panel.Panel({id:"layoutpanel",border:false,cls:"marginTop5",width:isForSSLayout?595:580,renderTo:"layoutTD",items:[CreateEditLayoutPanel,layoutGridPanel],listeners:{afterRender:function(){layoutGridPanel.setDisabled(true);selectAllLayout.setDisabled(true);enableLayoutChangeOnEdit.setDisabled(true)}}});setMultiLayoutSettings(enableMultiLayout)}function setMultiLayoutSettings(c){DefaultLayoutLbl.setVisible(c);selectAllLayout.setVisible(c);var b=document.getElementById("layoutEditLabel");var a=document.getElementById("layoutEditChk");b.style.display="none";a.style.display="none";if(c&&(consoleViewCombo.getValue()=="Incident"||consoleViewCombo.getValue()=="IN"||consoleViewCombo.getValue()=="Task"||consoleViewCombo.getValue()=="Change")){b.style.display="";a.style.display=""}}function hideMultiLayoutforIncSRSegregation(){var b=false;var c;if(enableIncidentSRSegregation){c=enableIncidentSRSegregation.checked}else{c=enableIncidentSRSegregationVal}if(!c&&consoleSelected=="Incident"){b=true}var a=document.getElementById("EnableMultiLayoutPanelDiv");if(a&&b){a.style.display="none";enableMultiLayout=false}else{a.style.display="block"}}function hideBrInterval(c){var d=document.getElementById("brIntervalScrollLabel");var b=document.getElementById("brIntervalSpinner");var a=document.getElementById("brIntervalSecondsLabel");if(c=="TRUE"||c=="TRUE_NOTCONFIGURABLE"){if(d){d.style.display=""}if(b){b.style.display=""}if(a){a.style.display=""}}else{if(d){d.style.display="none"}if(b){b.style.display="none"}if(a){a.style.display="none"}}}function showPrerequisiteWarning(b){var d="&lt;a target=&quot;_blank&quot; href=&quot;"+wikiUrlForEnhancedDomain+"&quot; style=&quot;color:blue&quot;&gt;";var a=OptimizedListViewWarningMsg1+"&lt;br/&gt;&lt;ul&gt;&lt;li style=&quot;list-style:inside !important;&quot;&gt;"+OptimizedListViewWarningMsg2+"&lt;/li&gt;&lt;li style=&quot;list-style:inside !important;&quot;&gt;"+OptimizedListViewWarningMsg3.replace("{0}",d)+ClickHere+"&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt;"+OptimizedListViewWarningMsg4;var e=false;if(b){e=b.checked}if(e){var c=Ext.Msg.show({title:consoleLbl,msg:Ext.util.Format.htmlDecode(a),buttons:Ext.Msg.YESNO,icon:Ext.MessageBox.WARNING,fn:function(f){if(f=="yes"){b.checked=true}else{b.checked=false}}});c.defaultButton=2;c.focus()}};