(this["webpackJsonponboarding-wizard"]=this["webpackJsonponboarding-wizard"]||[]).push([[0],Array(23).concat([function(e,t,s){},,,,,,,function(e,t,s){},,,,function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},,,,,,,,,,,function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},,function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},,function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},,function(e,t,s){},function(e,t,s){"use strict";s.r(t);var i=s(1),r=s.n(i),n=s(24),a=s.n(n),o=s(94),c=s(2),l=s(3),d=s(5),u=s(4),h=s(92),p=window.customLabels,b=(s(30),s(0)),j=function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(){return Object(c.a)(this,s),t.call(this)}return Object(l.a)(s,[{key:"render",value:function(){return Object(b.jsxs)("div",{className:"link-box",children:[Object(b.jsx)(h.a,{className:this.getCssClass("/"),to:"/",children:p.OBHome}),Object(b.jsxs)(h.a,{className:this.getCssClass("DefineTerritories"),to:"/DefineTerritories",children:["1. ",p.TerritoriesDefenition]}),Object(b.jsxs)(h.a,{className:this.getCssClass("WorkTypesAndSkills"),to:"/WorkTypesAndSkills",children:["2. ",p.WorkTypesAndSkills]}),Object(b.jsxs)(h.a,{className:this.getCssClass("ResourcesDefenition"),to:"/ResourcesDefenition",children:["3. ",p.ResourcesDefenition]}),Object(b.jsxs)(h.a,{className:this.getCssClass("SharingUsersTerritories"),to:"/SharingUsersTerritories",children:["4. ",p.SharingUsersTerritories]}),Object(b.jsxs)(h.a,{className:this.getCssClass("AppointmentBooking"),to:"/AppointmentBooking",children:["5. ",p.AppointmentBooking]}),Object(b.jsxs)(h.a,{className:this.getCssClass("SchedulingPolicies"),to:"/SchedulingPolicies",children:["6. ",p.SchedulingPolicies]})]})}},{key:"getCssClass",value:function(e){return"/"===e?"#/"===window.location.href.substr(window.location.href.length-2,2)?"menu-link obnav-active":"menu-link":window.location.href.indexOf(e)>-1?"menu-link obnav-active":"menu-link"}}]),s}(i.Component),v=(s(34),function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(){return Object(c.a)(this,s),t.call(this)}return Object(l.a)(s,[{key:"render",value:function(){return Object(b.jsx)("div",{className:"leftPanelBody",children:Object(b.jsx)(j,{})})}},{key:"renderProgression",value:function(){return Object(b.jsxs)("div",{className:"setupProgress",children:["Setup Progress",Object(b.jsx)("div",{className:"progressBar",children:Object(b.jsx)("div",{className:"actualProgress",children:"45%"})}),Object(b.jsxs)("div",{className:"progressTip",children:[Object(b.jsx)("b",{children:"Tip:"})," add 3 resources to gain 10%"]})]})}}]),s}(i.Component)),f=s(93),m=(s(35),window.customLabels),g=function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(c.a)(this,s),(e=t.call(this)).state={showMore:!1},e}return Object(l.a)(s,[{key:"render",value:function(){var e=this.props.icon?Object(b.jsx)("svg",{"aria-hidden":"true",style:this.props.icon.style,className:"slds-icon icon-on-header",children:Object(b.jsx)("use",{href:this.props.icon.url})}):null,t=Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{children:this.props.text}),Object(b.jsx)("p",{children:this.props.secondParagraph})]});return this.props.more&&!this.state.showMore?t=Object(b.jsxs)("p",{children:[this.props.text,Object(b.jsx)("span",{className:"show-more-less",onClick:this.__toggleMore.bind(this),children:m.ReadMore})]}):this.props.more&&this.state.showMore&&(t=Object(b.jsxs)("p",{children:[this.props.text,this.props.more,Object(b.jsx)("span",{className:"show-more-less",onClick:this.__toggleMore.bind(this),children:m.ReadLess})]})),Object(b.jsxs)("div",{className:"page-header",children:[Object(b.jsxs)("h1",{children:[e,this.props.title]}),t]})}},{key:"__toggleMore",value:function(){this.setState({showMore:!this.state.showMore})}}]),s}(i.Component);function O(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),i=1;i<t;i++)s[i-1]=arguments[i];var r=new Promise((function(t,i){var r=window.shouldEscapeResult.indexOf(e)>-1,n=[window.remoteActions[e]].concat(s).concat((function(s,r){e.includes("get")||(O.operations--,O.setComponenetSavingStatus&&O.setComponenetSavingStatus(!!O.operations)),r.status?t(s):i(r)})).concat({buffer:!1,escape:r});n=n.filter((function(e){return void 0!==e})),window.Visualforce.remoting.Manager.invokeAction.apply(window.Visualforce.remoting.Manager,n),e.includes("get")||(O.operations++,O.setComponenetSavingStatus&&O.setComponenetSavingStatus(!!O.operations))}));return r}O.operations=0;var y=O,x=window.icons,_=(s(36),function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(){return Object(c.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){var e="rules-select-help-tooltip";return this.props.tipPosition?"up"==this.props.tipPosition?e="rules-select-help-tooltip tooltip-up":"right"==this.props.tipPosition&&(e="rules-select-help-tooltip tooltip-right"):e="rules-select-help-tooltip tooltip-down",Object(b.jsxs)("span",{className:"is-relative",children:[Object(b.jsx)("span",{className:"rules-select-help",children:Object(b.jsx)("svg",{"aria-hidden":"true",className:"slds-icon tooltip-icon",children:Object(b.jsx)("use",{href:x.info})})}),Object(b.jsx)("span",{className:e,children:this.props.text})]})}}]),s}(i.Component)),k=(s(37),function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(c.a)(this,s),(e=t.call(this)).state={addingDisabled:!1},e}return Object(l.a)(s,[{key:"render",value:function(){var e=this,t=Object(b.jsx)("button",{className:"guided-setup-button guided-setup-button_neutral",onClick:this.__addNewTerritory.bind(this),children:m.NewTerritoryButton});return this.state.addingDisabled&&(t=Object(b.jsxs)("span",{className:"add-new-saving",children:[Object(b.jsx)("img",{src:x.spinner}),m.SavingTerritory]})),Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"add-new-territory",children:[Object(b.jsx)("input",{type:"text",disabled:this.state.addingDisabled,placeholder:m.addNewTerritoryPlaceholder,maxlength:"100",ref:function(t){e.territoryNameInput=t},onKeyDown:this.__handleKeyboardAdd.bind(this)}),t]}),Object(b.jsx)(_,{text:m.GuidedSetup_territories_add_tooltip})]})}},{key:"__addNewTerritory",value:function(){var e=this;if(!this.state.addingDisabled){var t=this.territoryNameInput.value;this.props.validate(t)&&(t?(this.setState({addingDisabled:!0}),y("addServiceTerritory",t).then((function(t){e.territoryNameInput.value="",e.props.onNewAdded(t)})).catch((function(e){console.error(e),e.message.indexOf("System")>-1&&e.message.indexOf("Class")>-1?alert(e.message.substring(e.message.indexOf("System"),e.message.indexOf("Class"))):alert(m.wentWrongContactSysAdmin)})).then((function(){e.setState({addingDisabled:!1})}))):alert(m.TerritoryNameCantBeBlank))}}},{key:"__handleKeyboardAdd",value:function(e){13===e.which&&this.__addNewTerritory()}}]),s}(i.Component)),S=function e(t){Object(c.a)(this,e),this.items=[],this.open=!1,this.parent=t.ParentTerritoryId,this.address=t.Address,this.id=t.Id,this.text=t.Name,this.operatingHours=t.OperatingHours,this.userdata=t};function N(e){var t=e.map((function(e){return new S(e)})),s=[],i={};for(var r in t.forEach((function(e){i[e.id]=e,i[e.id].items=[]})),i)if(i.hasOwnProperty(r)){var n=i[r];n.text=n.text.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;"),n.parent?i[n.parent].items.push(n):s.push(n)}return s.sort((function(e,t){return e.text.toLowerCase()>t.text.toLowerCase()?1:e.text.toLowerCase()<t.text.toLowerCase()?-1:0}))}function w(e){return(new DOMParser).parseFromString(e,"text/html").documentElement.textContent}function C(e){(function(e,t){if("undefined"!==typeof window.sforce&&window.sforce.console.isInConsole())return e&&e.preventDefault(),window.sforce.console.generateConsoleUrl(["/"+t],(function(e){e.success?window.sforce.console.openConsoleUrl(null,e.consoleUrl,!0):function(e){window.sforce.console.openPrimaryTab(null,"/"+e,!0)}(t)})),!0;return!1})(null,e)||window.open("../"+e,"_blank")}s(38);var T=function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(){return Object(c.a)(this,s),t.call(this)}return Object(l.a)(s,[{key:"render",value:function(){return Object(b.jsxs)("div",{className:"tree-container",children:[Object(b.jsx)(k,{onNewAdded:this.__addNewTerritory.bind(this),validate:this.__validateNewTerritory.bind(this)}),Object(b.jsx)("div",{id:"dhmlxTerritoriesTree"})]})}},{key:"encodeHTML",value:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}},{key:"componentWillReceiveProps",value:function(e){!this.props.territories&&e.territories&&(this.territories=e.territories,this.tree=new window.dhtmlXTreeView({parent:"dhmlxTerritoriesTree",dnd:!0,multiselect:!0,context_menu:!0,iconset:"font_awesome",items:N(e.territories)}),this.__attachTreeEvents(this.tree));var t=e.updatedTerritory&&e.updatedTerritory[0];t&&(this.tree.setItemText(t.Id,this.encodeHTML(t.Name)),this.tree.items[t.Id].pId=t.ParentTerritoryId,this.tree.items[t.Id].userdata=t)}},{key:"__validateNewTerritory",value:function(e){if(!e.replace(/\s/g,"").length)return alert(m.TerritoryNameCantBeBlank),!1;for(var t=0;t<this.territories.length;t++)if(this.territories[t].Name.toUpperCase()===e.toUpperCase())return alert(m.TerritoryNameExist),!1;return!0}},{key:"__attachTreeEvents",value:function(e){var t=this,s=this;e.attachEvent("onDrop",(function(t,i){var r,n=[(r=e.items[t],{ParentTerritoryId:r.pId||null,Id:r.id,Name:r.text,operatingHoursId:r.OperatingHours&&r.OperatingHours.Id})];y("updateServiceTerritories",JSON.stringify(n)).then((function(e){s.props.afterSave(e)})).catch((function(e){console.error(e)}))})),e.attachEvent("onClick",(function(s){return t.props.selectTerritoryHandler(e.items[s],t.tree),!0})),this.tree.attachEvent("onBeforeDrag",(function(e){return-1===e.indexOf("NOT_SOBJECT")}))}},{key:"__addNewTerritory",value:function(e){this.tree.addItem(e.Id,this.encodeHTML(e.Name)),this.tree.selectItem(e.Id),this.tree.items[e.Id].userdata=e,this.props.selectTerritoryHandler(this.tree.items[e.Id],this.tree),this.territories.push(e),this.props.afterSave([e])}}]),s}(i.Component),I=function(){function e(){Object(c.a)(this,e),this.synced=!1}return Object(l.a)(e,[{key:"get",value:function(){var e=this;return this.synced?new Promise((function(t){return t(e.operatingHours)})):new Promise((function(t,s){y("getOperatingHours").then((function(s){e.operatingHours=s,e.synced=!0,t(e.operatingHours)})).catch((function(t){e.synced=!1,console.error("Unable to get operating hours"),s(t)}))}))}},{key:"addNewOh",value:function(e){this.operatingHours&&this.operatingHours.push(e)}},{key:"getNow",value:function(){return this.operatingHours}}]),e}(),P=new I,R=window.timezoneList,A=window.mandatoryRules,L=(s(39),function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(e){var i;return Object(c.a)(this,s),(i=t.call(this,e)).state={operatingHours:[],defaultHours:e.selected},i}return Object(l.a)(s,[{key:"render",value:function(){var e=this;return Object(b.jsxs)("div",{className:"oh-form",children:[Object(b.jsxs)("div",{className:"ohs-label",children:[m.OperatingHoursLabel,Object(b.jsx)(_,{text:m.GuidedSetup_appt_booking_oh_tooltip})]}),Object(b.jsx)("div",{className:"ohs-input",children:Object(b.jsx)("select",{value:this.state.defaultHours,onChange:this.__onTerritoryChanged.bind(this),ref:function(t){e.selectedOperatingHours=t},children:this.__generateOptions()})})]})}},{key:"componentWillReceiveProps",value:function(e){this.setState(Object.assign({},this.state,{defaultHours:e.selected}))}},{key:"componentDidMount",value:function(){var e=this;P.get().then((function(t){e.setState({operatingHours:t,defaultHours:e.props.selected||t[0].Id}),!e.props.selected&&e.state.operatingHours.length>0&&e.props.onChange(e.state.operatingHours[0].Id)}))}},{key:"componentWillUpdate",value:function(e){JSON.stringify(this.props.addNewOh)!==JSON.stringify(e.addNewOh)&&(P.addNewOh(e.addNewOh),this.setState(Object.assign({},this.state,{operatingHours:P.getNow()})))}},{key:"__generateOptions",value:function(){var e=this,t=this.props.multiselect?[Object(b.jsx)("option",{value:"none",children:m.SelectOperatingHours})]:[];return this.state.operatingHours.sort((function(e,t){return e.Name.toUpperCase()<=t.Name.toUpperCase()?-1:1})).forEach((function(i){e.props.dontShowTz?t.push(Object(b.jsx)("option",{value:i.Id,children:i.Name})):t.push(Object(b.jsxs)("option",{value:i.Id,children:[i.Name," ",s.__findTzOptionLabel(i.TimeZone)]}))})),t}},{key:"__onTerritoryChanged",value:function(){this.props.onChange&&this.props.onChange(this.selectedOperatingHours.value)}}],[{key:"__findTzOptionLabel",value:function(e){for(var t=0;t<R.length;t++)if(R[t].value===e)return R[t].label.substring(0,11)}}]),s}(i.Component)),H=(s(40),s(7)),D=s.n(H),W=(s(51),function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(e){var i;return Object(c.a)(this,s),(i=t.call(this,e)).state={},i}return Object(l.a)(s,[{key:"render",value:function(){if(!this.props.show)return null;var e={height:this.props.height,"max-height":this.props.maxHeight,width:this.props.width},t={width:Number.parseInt(this.props.width)+30};return Object(b.jsxs)("div",{className:"lightbox-black",children:[Object(b.jsx)("div",{className:"lightbox-close-container",style:t,children:Object(b.jsx)("svg",{"aria-hidden":"true",className:"slds-icon lightbox-close-icon",onClick:this.__handleVisibility.bind(this),children:Object(b.jsx)("use",{href:x.close})})}),Object(b.jsx)("div",{className:"lightbox-container",style:e,children:this.props.children})]})}},{key:"__handleVisibility",value:function(){this.props.handleVisibility()}}]),s}(i.Component));s(52);function E(e){return e<10?"0"+e:24===e?"00":e}var M=function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(e){var i;return Object(c.a)(this,s),(i=t.call(this,e)).state={hours:e.hours||8,minutes:e.minutes||0,ampm:e.ampm?e.ampm:null},i}return Object(l.a)(s,[{key:"render",value:function(){for(var e=this,t=[],s=[],i=this.props.ampm?12:24,r=0;r<i;r++)t.push(Object(b.jsx)("option",{value:r,children:E(r)}));for(var n=0;n<60;n+=10)s.push(Object(b.jsx)("option",{value:n,children:E(n)}));var a=this.props.ampm?Object(b.jsx)("div",{className:"time-container-thingy minutes-select",children:Object(b.jsxs)("select",{value:this.state.ampm,onChange:this.__onTimeChanged.bind(this),ref:function(t){e.selectAmpm=t},children:[Object(b.jsx)("option",{value:"AM",children:"AM"}),Object(b.jsx)("option",{value:"PM",children:"PM"})]})}):null;return Object(b.jsxs)("span",{children:[Object(b.jsx)("div",{className:"time-container-thingy",children:Object(b.jsx)("select",{value:this.state.hours,onChange:this.__onTimeChanged.bind(this),ref:function(t){e.selectHours=t},children:t})}),":",Object(b.jsx)("div",{className:"time-container-thingy minutes-select",children:Object(b.jsx)("select",{value:this.state.minutes,onChange:this.__onTimeChanged.bind(this),ref:function(t){e.selectMinutes=t},children:s})}),a]})}},{key:"componentWillUpdate",value:function(e,t){JSON.stringify(t)!==JSON.stringify(this.state)&&this.props.onChange(t)}},{key:"__onTimeChanged",value:function(){this.setState({hours:this.selectHours.value,minutes:this.selectMinutes.value,ampm:this.selectAmpm?this.selectAmpm.value:null})}}]),s}(i.Component),U=(s(53),function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(e){var i;return Object(c.a)(this,s),(i=t.call(this,e)).isAmpm=window.isAMPM,i.state={name:"",isSaving:!1,timezone:"GMT",days:{Monday:!0,Tuesday:!0,Wednesday:!0,Thursday:!0,Friday:!0,Saturday:!1,Sunday:!1},slotSize:e.createSlots?1:0,from:{hours:7,minutes:0,ampm:i.isAmpm?"AM":null},to:{hours:11,minutes:0,ampm:i.isAmpm?"PM":null}},i.timeZoneListOptions=[],R.forEach((function(e){i.timeZoneListOptions.push(Object(b.jsx)("option",{value:e.value,children:e.label}))})),i}return Object(l.a)(s,[{key:"render",value:function(){var e=this,t=Object.keys(this.state.days).map((function(t){return Object(b.jsx)("span",{onClick:e.__toggleDay.bind(e,t),className:e.state.days[t]?"ohc-day-selected":"ohc-day-not-selected",children:m.Days[t]})})),s=this.state.isSaving?Object(b.jsxs)("div",{className:"ohc-saving-container",children:[Object(b.jsx)("img",{className:"ohc-saving-spinner",src:x.spinner}),m.OnboardingSaving]}):null,i=this.props.hideTimezone?Object(b.jsx)("div",{children:m.GuidedSetup_appt_booking_timezone_info}):Object(b.jsxs)("div",{children:[m.ObTimezone,Object(b.jsx)(_,{text:m.ObAppBookingTimezoneExplain,tipPosition:"right"}),Object(b.jsx)("div",{className:"time-container-thingy ohc-select-tz",children:Object(b.jsx)("select",{value:this.state.timezone,onChange:this.__tzChanged.bind(this),ref:function(t){return e.timezoneSelect=t},children:this.timeZoneListOptions})})]}),r=this.props.createSlots?null:Object(b.jsx)(_,{text:m.guidedsetup_operatinghours_days_tooltip});return Object(b.jsxs)("div",{className:"operating-hours-creator",children:[Object(b.jsx)("h1",{children:m.CreateNewOH}),Object(b.jsxs)("div",{id:"ohc-content",children:[this.__setIntroLabel(),Object(b.jsxs)("div",{children:[m.OnboardingOHPNameLabel,Object(b.jsx)("input",{type:"text",onChange:this.__onNameChanged.bind(this),ref:function(t){e.nameInput=t}})]}),Object(b.jsxs)("div",{id:"ohc-days",children:[Object(b.jsxs)("div",{className:"ohc-days-inner",children:[m.WorkingOn," ",t,r]}),Object(b.jsxs)("div",{children:[this.__createSlots(),Object(b.jsxs)("div",{className:"time-container",children:[m.OBFrom,Object(b.jsx)(M,{ampm:this.state.from.ampm,hours:this.state.from.hours,onChange:this.__timeFromChanged.bind(this)}),m.OBTo,Object(b.jsx)(M,{ampm:this.state.to.ampm,hours:this.state.to.hours,onChange:this.__timeToChanged.bind(this)})]})]})]}),i,s]}),Object(b.jsx)("button",{className:"ohc-button-location guided-setup-button guided-setup-button_brand",onClick:this.__saveOperatingHours.bind(this),children:m.Save})]})}},{key:"__toggleDay",value:function(e){var t=Object.assign({},this.state.days);t[e]=!t[e],this.setState(Object.assign({},this.state,{days:t}))}},{key:"__timeToChanged",value:function(e){this.setState(Object.assign({},this.state,{to:e}))}},{key:"__timeFromChanged",value:function(e){this.setState(Object.assign({},this.state,{from:e}))}},{key:"__onNameChanged",value:function(){this.setState(Object.assign({},this.state,{name:this.nameInput.value}))}},{key:"__tzChanged",value:function(){this.setState(Object.assign({},this.state,{timezone:this.timezoneSelect.value}))}},{key:"__saveOperatingHours",value:function(){var e=this;if(!this.state.isSaving)if(this.state.name){for(var t=P.getNow(),s=0;s<t.length;s++)if(t[s].Name===this.state.name)return void alert(m.AlreadyOHwithThatName);if(this.__areHoursValid()){var i=[],r=this.__convertAmpm(this.state.from),n=this.__convertAmpm(this.state.to);for(var a in this.state.days)this.state.days[a]&&i.push(a);if(0!==i.length){var o=[this.state.name,i,[Number.parseInt(r.hours),Number.parseInt(r.minutes),Number.parseInt(n.hours),Number.parseInt(n.minutes)],this.state.slotSize,this.state.timezone];Number.parseInt(r.hours)+Number.parseInt(this.state.slotSize)>Number.parseInt(n.hours)||Number.parseInt(r.hours)+Number.parseInt(this.state.slotSize)==Number.parseInt(n.hours)&&Number.parseInt(r.minutes)>=Number.parseInt(n.minutes)?alert(m.OHCreatorBadHours):(this.setState({isSaving:!0}),y.apply(void 0,["saveOperatingHours"].concat(o)).then((function(t){e.setState({isSaving:!1}),e.props.afterSave(t)})).catch((function(t){e.setState({isSaving:!1}),console.error(t)})))}else alert(m.NoDaysSelected)}else alert(m.HoursFieldsHofefing)}else alert(m.OhNameNotBlank)}},{key:"__areHoursValid",value:function(){var e=this.__convertAmpm(this.state.from),t=this.__convertAmpm(this.state.to);return!(e.hours>t.hours)&&!(e.hours==t.hours&&e.minutes>=t.minutes)}},{key:"__convertAmpm",value:function(e){var t={minutes:Number.parseInt(e.minutes),hours:Number.parseInt(e.hours),ampm:e.ampm};return e.ampm&&"PM"===e.ampm&&(t.hours+=12),t}},{key:"__setIntroLabel",value:function(){return this.props.createSlots?Object(b.jsx)("h2",{children:m.GuidedSetup_appt_booking_oh_lightbox_intro}):Object(b.jsx)("h2",{children:m.CreateNewOpHoursExplain})}},{key:"__createSlots",value:function(){if(!this.props.createSlots)return null;var e=[1,2,3,4,5,6,7,8,9,10,11,12].map((function(e){return Object(b.jsx)("option",{value:e,children:e})}));return Object(b.jsxs)("span",{children:[m.OHCreateSlots,Object(b.jsx)("div",{className:"time-container-thingy slots-creator-select",children:Object(b.jsx)("select",{value:this.state.slotSize,onChange:this.__slotsSizeChanged.bind(this),children:e})}),m.OHCreateSlotsHours]})}},{key:"__slotsSizeChanged",value:function(e){this.setState({slotSize:e.target.value})}}]),s}(i.Component)),F=U,B=function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(e){var i;if(Object(c.a)(this,s),(i=t.call(this,e)).state={territory:{Id:null,Name:null,OperatingHoursId:null,Address:{street:null,city:null,state:null,postalCode:null,country:null}},showWorkingHoursCreator:!1,addNewOh:null},e.territory&&e.territory.userdata)for(var r in e.territory.userdata)i.state.territory[r]=e.territory.userdata[r];return i.nameBeforeSave="",i.addressInputs={},i.__saveChanges=D()(i.__saveChanges,2e3),i}return Object(l.a)(s,[{key:"render",value:function(){var e=this;if(!this.props.territory)return Object(b.jsx)("div",{className:"territory-form",children:Object(b.jsx)("div",{className:"select-a-territory",children:m.NoTerritorySelectedText})});var t=null;return this.state.territory.Longitude&&this.state.territory.Latitude&&(t=Object(b.jsx)("a",{className:"open-external-link locate-in-gmap",href:"http://maps.google.com/?ll="+this.state.territory.Latitude+","+this.state.territory.Longitude,target:"_blank",children:m.LocateInGmap})),Object(b.jsxs)("div",{className:"territory-form form-arrow",children:[Object(b.jsxs)("div",{className:"territory-form-header",children:[Object(b.jsx)("h2",{className:"truncate",children:this.nameBeforeSave}),Object(b.jsx)("span",{className:"truncate",onClick:this.__openSObjectLink.bind(this,this.state.territory.Id),children:m.Open_Service_Territory_Record})]}),Object(b.jsxs)("div",{className:"form-row-container",children:[Object(b.jsx)("div",{className:"form-label",children:m.OpHoursName}),Object(b.jsx)("div",{className:"form-input",children:Object(b.jsx)("input",{maxlength:"100",type:"text",value:this.state.territory.Name,ref:function(t){e.territoryName=t},onChange:this.__territoryNameChanged.bind(this)})})]}),Object(b.jsx)(L,{multiselect:!1,addNewOh:this.state.addNewOh,selected:this.state.territory.OperatingHoursId,onChange:this.__operationHoursChanged.bind(this)}),Object(b.jsxs)("div",{className:"create-operating-hours",children:[Object(b.jsx)("div",{children:Object(b.jsx)("span",{className:"open-external-link",onClick:this.__openSObjectLink.bind(this,this.state.territory.OperatingHoursId),children:m.Open_Operating_Hours_Record})}),Object(b.jsx)("div",{onClick:this.__openWorkingHoursCreator.bind(this),children:m.CreateNewOH})]}),Object(b.jsx)(W,{show:this.state.showWorkingHoursCreator,height:"420",width:"680",handleVisibility:this.__closeWorkingHoursCreator.bind(this),children:Object(b.jsx)(F,{afterSave:this.__afterSaveOperatingHours.bind(this)})}),Object(b.jsxs)("div",{className:"territory-address-mafrid",children:[Object(b.jsx)("h2",{className:"form-territory-address",children:m.ObTerritoryAddress}),Object(b.jsx)(_,{text:m.Territory_Address_Header_tooltip}),t]}),Object(b.jsxs)("div",{className:"form-row-container",children:[Object(b.jsx)("div",{className:"form-label",children:m.ObAddress}),Object(b.jsx)("div",{className:"form-input",children:Object(b.jsx)("input",{type:"text",value:this.state.territory.Address.street,ref:function(t){e.addressInputs.street=t},onChange:this.__addressFieldChanged.bind(this,"street")})})]}),Object(b.jsxs)("div",{className:"form-row-container",children:[Object(b.jsx)("div",{className:"form-label",children:m.ObCity}),Object(b.jsx)("div",{className:"form-input",children:Object(b.jsx)("input",{type:"text",value:this.state.territory.Address.city,ref:function(t){e.addressInputs.city=t},onChange:this.__addressFieldChanged.bind(this,"city")})})]}),Object(b.jsxs)("div",{className:"form-row-container",children:[Object(b.jsx)("div",{className:"form-label",children:m.ObStateProvince}),Object(b.jsx)("div",{className:"form-input",children:Object(b.jsx)("input",{type:"text",value:this.state.territory.Address.state,ref:function(t){e.addressInputs.state=t},onChange:this.__addressFieldChanged.bind(this,"state")})})]}),Object(b.jsxs)("div",{className:"form-row-container",children:[Object(b.jsx)("div",{className:"form-label",children:m.ObZip}),Object(b.jsx)("div",{className:"form-input",children:Object(b.jsx)("input",{type:"text",value:this.state.territory.Address.postalCode,ref:function(t){e.addressInputs.postalCode=t},onChange:this.__addressFieldChanged.bind(this,"postalCode")})})]}),Object(b.jsxs)("div",{className:"form-row-container",children:[Object(b.jsx)("div",{className:"form-label",children:m.ObCountry}),Object(b.jsx)("div",{className:"form-input",children:Object(b.jsx)("input",{type:"text",value:this.state.territory.Address.country,ref:function(t){e.addressInputs.country=t},onChange:this.__addressFieldChanged.bind(this,"country")})})]})]})}},{key:"componentWillMount",value:function(){this.props&&this.props.territory&&this.props.territory.userdata&&(this.nameBeforeSave=this.props.territory.userdata.Name)}},{key:"componentWillReceiveProps",value:function(e){if(e.territory&&e.territory.userdata){this.nameBeforeSave=e.territory.userdata.Name;var t={territory:e.territory.userdata};t.territory.Address?(t.territory.Address.street=t.territory.Address.street||"",t.territory.Address.city=t.territory.Address.city||"",t.territory.Address.state=t.territory.Address.state||"",t.territory.Address.postalCode=t.territory.Address.postalCode||"",t.territory.Address.country=t.territory.Address.country||""):t.territory.Address={street:"",city:"",state:"",postalCode:"",country:""},this.setState(Object.assign({},this.state,t))}}},{key:"__addressFieldChanged",value:function(e){var t=Object.assign({},this.state.territory);t.Address[e]=this.addressInputs[e].value,this.setState(Object.assign({},this.state,{territory:t})),this.__saveChanges()}},{key:"__territoryNameChanged",value:function(){var e=Object.assign({},this.state.territory);e.Name=this.territoryName.value,this.setState(Object.assign({},this.state,{territory:e})),this.__saveChanges()}},{key:"__operationHoursChanged",value:function(e){var t=Object.assign({},this.state.territory);t.OperatingHoursId=e,this.setState(Object.assign({},this.state,{territory:t})),this.__saveChanges()}},{key:"__saveChanges",value:function(){var e=this;if(null!==this.state.territory.Name)if(""!==this.state.territory.Name){for(var t=0;t<this.props.territories.length;t++)if(this.props.territories[t].Name.toUpperCase()===this.state.territory.Name.toUpperCase()&&this.props.territories[t].Id!==this.state.territory.Id)return void alert(m.TerritoryNameExist);var s=Object.assign({},this.state.territory);delete s.OperatingHours,delete s.Longitude,delete s.Latitude,s.Address&&(Object.assign(s,s.Address),delete s.Address),y("updateServiceTerritories",JSON.stringify([s])).then((function(t){e.props.afterSave(t)})).catch((function(e){console.error(e)}))}else alert(m.TerritoryNameCantBeBlank)}},{key:"__openSObjectLink",value:function(e,t){t.preventDefault(),C(e)}},{key:"__openWorkingHoursCreator",value:function(){this.setState(Object.assign({},this.state,{showWorkingHoursCreator:!0}))}},{key:"__closeWorkingHoursCreator",value:function(){this.setState(Object.assign({},this.state,{showWorkingHoursCreator:!1}))}},{key:"__afterSaveOperatingHours",value:function(e){this.setState(Object.assign({},this.state,{showWorkingHoursCreator:!1,addNewOh:e})),this.props.afterOpAdded()}}]),s}(i.Component),z=(s(54),function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(e){var i;return Object(c.a)(this,s),(i=t.call(this,e)).state={selectedOperatingHours:s.__mutualTerritoriesHours(e.territories),territories:e.territories,showWorkingHoursCreator:!1,addNewOh:null},i}return Object(l.a)(s,[{key:"render",value:function(){var e=null;return"none"!==this.state.selectedOperatingHours&&(e=Object(b.jsx)("div",{children:Object(b.jsx)("a",{className:"open-external-link",href:"../"+this.state.selectedOperatingHours,target:"_blank",children:m.OpenInLayout})})),Object(b.jsxs)("div",{className:"bulk-ter-actions",children:[Object(b.jsx)("h2",{children:m.XSelectedTerritories.replace("$0",this.props.territories.length)}),Object(b.jsx)(L,{multiselect:!0,selected:this.state.selectedOperatingHours,onChange:this.__operationHoursChanged.bind(this),addNewOh:this.state.addNewOh}),Object(b.jsxs)("div",{className:"create-operating-hours",children:[e,Object(b.jsx)("div",{onClick:this.__openWorkingHoursCreator.bind(this),children:m.CreateNewOH})]}),Object(b.jsx)(W,{show:this.state.showWorkingHoursCreator,height:"420",width:"650",handleVisibility:this.__closeWorkingHoursCreator.bind(this),children:Object(b.jsx)(F,{afterSave:this.__afterSaveOperatingHours.bind(this)})})]})}},{key:"componentWillReceiveProps",value:function(e){this.setState({selectedOperatingHours:s.__mutualTerritoriesHours(e.territories),territories:e.territories,showWorkingHoursCreator:this.state.showWorkingHoursCreator,addNewOh:this.state.addNewOh})}},{key:"__operationHoursChanged",value:function(e){var t=this;if("none"!==e){var s=this.state.territories.map((function(t){return{Id:t.Id,OperatingHoursId:e}}));y("updateServiceTerritories",JSON.stringify(s)).then((function(e){t.props.afterSave(e)})).catch((function(e){console.error(e)}))}}},{key:"__openWorkingHoursCreator",value:function(){this.setState(Object.assign({},this.state,{showWorkingHoursCreator:!0}))}},{key:"__closeWorkingHoursCreator",value:function(){this.setState(Object.assign({},this.state,{showWorkingHoursCreator:!1}))}},{key:"__afterSaveOperatingHours",value:function(e){this.setState(Object.assign({},this.state,{showWorkingHoursCreator:!1,addNewOh:e}))}}],[{key:"__mutualTerritoriesHours",value:function(e){for(var t=e[0].OperatingHoursId,s=1;s<e.length;s++)if(t!==e[s].OperatingHoursId)return"none";return t}}]),s}(i.Component)),G=(s(55),function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(){return Object(c.a)(this,s),t.call(this)}return Object(l.a)(s,[{key:"render",value:function(){return this.props.show?Object(b.jsx)("div",{className:"ob-success-message",children:this.props.text}):null}}]),s}(i.Component)),J=function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(c.a)(this,s),(e=t.call(this)).state={selectedTerritory:null,lastSaved:null,territories:null,showOpSuccess:!1},e.icon={url:x.territory,style:{background:"#7e8be4"}},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this;y("getServiceTerritories").then((function(t){e.setState(Object.assign({},e.state,{territories:t}))})).catch((function(e){console.error(e)}))}},{key:"render",value:function(){var e=null;return e=Array.isArray(this.state.selectedTerritory)&&this.state.selectedTerritory.length>1?Object(b.jsx)(z,{territories:this.state.selectedTerritory,afterOpAdded:this.__showSuccess.bind(this),afterSave:this.__handleFormSaved.bind(this)}):Object(b.jsx)(B,{territory:this.state.selectedTerritory,afterSave:this.__handleFormSaved.bind(this),afterOpAdded:this.__showSuccess.bind(this),territories:this.state.territories}),Object(b.jsxs)("div",{children:[Object(b.jsx)(G,{show:this.state.showOpSuccess,text:m.OpSavedGood}),Object(b.jsx)(g,{title:m.TerritoriesDefenition,text:m.TerritoriesDefenitionExplanation,icon:this.icon,secondParagraph:m.GuidedSetup_terittories_second_paragraph}),Object(b.jsx)(T,{selectTerritoryHandler:this.__selectTerritory.bind(this),updatedTerritory:this.state.lastSaved,afterSave:this.__handleFormSaved.bind(this),territories:this.state.territories}),e]})}},{key:"__showSuccess",value:function(){var e=this;this.setState({showOpSuccess:!0}),window.setTimeout((function(){return e.setState({showOpSuccess:!1})}),3e3)}},{key:"__selectTerritory",value:function(e,t){var s=this;setTimeout((function(){var i=t.getSelectedId();if(i.length>1){var r=s.state.territories.filter((function(e){return i.indexOf(e.Id)>-1}));s.setState({selectedTerritory:r})}else{for(var n=0;n<s.state.territories.length;n++)if(s.state.territories[n].Id===e.id){e.userdata=s.state.territories[n];break}s.setState({selectedTerritory:e})}}),0)}},{key:"__handleFormSaved",value:function(e){for(var t=[],s=[],i=0;i<e.length;i++){for(var r=!1,n=0;n<this.state.territories.length;n++)this.state.territories[n].Id===e[i].Id&&(this.state.territories[n]=e[i],r=!0);r||t.push(e[i])}var a=t.concat(this.state.territories);if(Array.isArray(this.state.selectedTerritory))for(var o=0;o<this.state.selectedTerritory.length;o++)for(var c=0;c<a.length;c++)a[c].Id===this.state.selectedTerritory[o].Id&&s.push(a[c]);else if(this.state.selectedTerritory)for(var l=0;l<a.length;l++)if(this.state.selectedTerritory.Id===a[l].Id){s=a[l];break}this.setState(Object.assign({},this.state,{lastSaved:e},{territories:a,selectedTerritory:s}))}}]),s}(i.Component),V=new(function(){function e(){Object(c.a)(this,e),this.synced=!1}return Object(l.a)(e,[{key:"get",value:function(){var e=this;return this.synced?new Promise((function(t){return t(e.workTypes)})):new Promise((function(t,s){y("getWorkTypes").then((function(s){e.workTypes=s,e.synced=!0,t(e.workTypes)})).catch((function(t){e.synced=!1,console.error("Unable to get work types"),s(t)}))}))}}]),e}()),q=new(function(){function e(){Object(c.a)(this,e),this.synced=!1}return Object(l.a)(e,[{key:"get",value:function(){var e=this;return this.synced?new Promise((function(t){return t(e.skills)})):new Promise((function(t,s){y("getSkills").then((function(s){e.skills=s,e.synced=!0,t(e.skills)})).catch((function(t){e.synced=!1,console.error("Unable to get skills"),s(t)}))}))}}]),e}()),$=s(10),K=s.n($),X=(s(23),function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(c.a)(this,s),(e=t.call(this)).state={addingDisabled:!1},e}return Object(l.a)(s,[{key:"render",value:function(){var e=this,t=this.state.addingDisabled?"guided-setup-button guided-setup-button_neutral add-new-disabled":"guided-setup-button guided-setup-button_neutral";return Object(b.jsxs)("form",{className:"add-new",onSubmit:this.__addNewWorkType.bind(this),children:[Object(b.jsx)("input",{placeholder:m.addNewWorkTypePlaceholder,maxlength:"100",type:"text",ref:function(t){e.workTypeNameInput=t}}),Object(b.jsx)("button",{className:t,children:m.NewWorkTypeButton})]})}},{key:"__addNewWorkType",value:function(e){var t=this;if(e.preventDefault(),!this.state.addingDisabled){var s=this.workTypeNameInput.value;this.props.validate(s)&&(s?(this.setState({addingDisabled:!0}),y("addWorkType",s).then((function(e){console.log(e),t.workTypeNameInput.value="",t.props.onNewAdded(e)})).catch((function(e){console.error(e)})).then((function(){t.setState({addingDisabled:!1})}))):alert(m.WorkTypeNameCantBeBlank))}}}]),s}(i.Component)),Z=(s(57),i.Component,s(58),function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(){return Object(c.a)(this,s),t.call(this)}return Object(l.a)(s,[{key:"render",value:function(){var e=this.props.isSelected?"worktype-single worktype-selected truncate":"worktype-single truncate";return Object(b.jsx)("div",{className:e,onClick:this.__selectWorkType.bind(this,this.props.worktype),children:this.props.worktype.Name})}},{key:"__selectWorkType",value:function(e){this.props.onSelectedWorkType(e)}}]),s}(i.Component)),Q=(s(59),function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(c.a)(this,s),(e=t.call(this)).state={searchTerm:""},e.__doSearch=D()(e.__doSearch,500),e}return Object(l.a)(s,[{key:"__doSearch",value:function(){this.props.doSearch(this.state.searchTerm)}},{key:"__handleSearch",value:function(e){var t=this;this.setState({searchTerm:e.target.value},(function(){t.__doSearch()}))}},{key:"render",value:function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)("svg",{"aria-hidden":"true",className:"slds-icon search-icon",children:Object(b.jsx)("use",{href:x.search})}),Object(b.jsx)("input",{className:"searchInput",type:"search",placeholder:m.search_work_types,value:this.state.searchTerm,onChange:this.__handleSearch.bind(this)})]})}}]),s}(r.a.Component)),Y=(s(60),function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(c.a)(this,s),(e=t.call(this)).state={searchTerm:"",selectedId:null},e}return Object(l.a)(s,[{key:"componentWillReceiveProps",value:function(e){e.workTypes&&(this.allWorkTypes=e.workTypes)}},{key:"__renderWorkTypeItems",value:function(){var e=this,t=this.allWorkTypes;return this.state.searchTerm&&(t=K.a.filter(this.allWorkTypes,(function(t){return t.Name.toUpperCase().indexOf(e.state.searchTerm.toUpperCase())>-1}))),K.a.map(t,(function(t,s){return Object(b.jsx)(Z,{worktype:t,onSelectedWorkType:e.__setSelectedWorkType.bind(e),isSelected:e.state.selectedId==t.Id},s)}))}},{key:"__setSelectedWorkType",value:function(e){this.setState({selectedId:e.Id}),this.props.selectWorkType(e)}},{key:"__addNewWorkType",value:function(e){this.allWorkTypes.push(e),this.__setSelectedWorkType(e),this.props.afterSave([e])}},{key:"__validateNewWorkType",value:function(e){if(!e.replace(/\s/g,"").length)return alert(m.WorkTypeNameCantBeBlank),!1;for(var t=0;t<this.allWorkTypes.length;t++)if(this.allWorkTypes[t].Name.toLowerCase()===e.toLowerCase())return alert(m.TerritoryNameExist),!1;return!0}},{key:"__setSearchTerm",value:function(e){this.setState({searchTerm:e})}},{key:"render",value:function(){return Object(b.jsxs)("div",{className:"worktypes-container",children:[Object(b.jsx)(X,{onNewAdded:this.__addNewWorkType.bind(this),validate:this.__validateNewWorkType.bind(this)}),Object(b.jsx)(Q,{doSearch:this.__setSearchTerm.bind(this)}),Object(b.jsx)("div",{className:"worktype-list",children:this.__renderWorkTypeItems()})]})}}]),s}(i.Component)),ee=s(8),te=(s(61),function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(c.a)(this,s),(e=t.call(this)).sessionId=window.sessionId,e.soapEndPoint=window.soapEndPoint,e}return Object(l.a)(s,[{key:"componentWillReceiveProps",value:function(e){e&&(this.existingSkills=K.a.map(e.requiredSkills,(function(e){return e.Skill.MasterLabel})),this.skillsBox&&(this.skillsBox.removeAll(),this.existingSkills&&this.skillsBox.add(this.existingSkills),this.generateSkillSelector()))}},{key:"componentDidMount",value:function(){this.skillNames=K.a.reduce(this.props.skills,(function(e,t){return e[t.MasterLabel]=t.Id,e}),{}),this.existingSkills=K.a.map(this.props.requiredSkills,(function(e){return e.Skill.MasterLabel})),this.generateSkillSelector()}},{key:"generateSkillSelector",value:function(){var e=this;if(!this.skillsBox){this.skillsBox=new window.Taggle("skillsBox",{duplicateTagClass:"bounce",placeholder:m.EnterSkills,preserveCase:!0,tags:this.existingSkills,onBeforeTagAdd:function(t,s){if(-1===e.existingSkills.indexOf(s)&&!e.validSkill(s))return window.alert(m.SkillSpecialChars),!1;if(!K.a.has(e.skillNames,s)){if(!window.confirm(m.ConfirmCreateNewSkill))return!1;e.__addSkill(t,s)}},onTagAdd:function(t,s){e.existingSkills.indexOf(s)>-1||(t&&e.skillNames[s]||window.event&&window.event.target.className.indexOf("ui-menu-item")>-1&&e.skillNames[s])&&e.props.addRequiredSkill(e.skillNames[s])},onTagRemove:function(t,s){t&&e.props.removeRequiredSkill(K.a.find(e.props.requiredSkills,["SkillId",e.skillNames[s]]))}});var t=this.skillsBox.getContainer(),s=this.skillsBox.getInput();window.$(s).autocomplete({source:Object.keys(this.skillNames),appendTo:t,position:{at:"left bottom",of:t},delay:500,select:function(t,s){t.preventDefault(),1===t.which&&e.skillsBox.add(s.item.value)}}),window.$.ui.autocomplete.filter=function(e,t){var s=new RegExp("\\b"+window.$.ui.autocomplete.escapeRegex(t),"i");return window.$.grep(e,(function(e){return s.test(e.label||e.value||e)}))}}}},{key:"__addSkill",value:function(e,t){var s=this;if(e){var i=window.location.origin+"/services/Soap/u/38.0",r='<?xml version="1.0" encoding="utf-8"?>\n                        <SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="urn:sobject.partner.soap.sforce.com" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ns2="urn:partner.soap.sforce.com">\n                                <SOAP-ENV:Header>\n                                    <ns2:SessionHeader>\n                                        <ns2:sessionId>'.concat(this.sessionId,"</ns2:sessionId>\n                                    </ns2:SessionHeader>\n                                </SOAP-ENV:Header>\n                                <SOAP-ENV:Body>\n                                    <ns2:create>\n\n                                        <ns2:sObjects>\n                                            <ns1:type>Skill</ns1:type>\n                                            <ns1:MasterLabel>").concat(t,"</ns1:MasterLabel>\n                                            <ns1:DeveloperName>").concat(window.escape(t.split(" ").join("")).replace(/[_-]/g,""),"</ns1:DeveloperName>\n                                        </ns2:sObjects>\n\n                                    </ns2:create>\n                                </SOAP-ENV:Body>\n                        </SOAP-ENV:Envelope>");window.$.ajax({url:i,type:"POST",dataType:"xml",data:r,beforeSend:function(e){e.setRequestHeader("Content-Type","text/xml"),e.setRequestHeader("SOAPAction",'""')}}).then((function(e,i,r){"success"==i&&(s.skillNames[t]=window.$(r.responseText).find("id").text(),window.$(s.skillsBox.getInput()).autocomplete("option","source",Object.keys(s.skillNames)),s.props.addRequiredSkill(s.skillNames[t]))}),(function(t,s,i){e.stopPropagation(),alert(i)}))}}},{key:"validSkill",value:function(e){var t=e.split(" ").join("");return/^\w+$/.test(t)}},{key:"render",value:function(){return Object(b.jsx)("div",{className:"skills-container",children:Object(b.jsx)("div",{id:"skillsBox",className:"input textarea clearfix"})})}}]),s}(i.Component)),se=window.objectNames,ie=(s(62),function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(){var e,i;return Object(c.a)(this,s),(i=t.call(this)).tooltipTextDueDate=Object(b.jsx)("span",{children:m.DueDateOffsetTooltip}),i.tooltipTextName=Object(b.jsx)("span",{children:m.worktype_name_tooltip}),i.tooltipTextAutoCreate=Object(b.jsx)("span",{children:m.worktype_auto_create_tooltip}),i.tooltipTextSkillReq=Object(b.jsx)("span",{children:m.worktype_skill_req_tooltip}),i.state={workType:(e={Id:null,Name:null,Description:null},Object(ee.a)(e,se.WorkType.Due_Date_Offset__c,null),Object(ee.a)(e,"EstimatedDuration",null),Object(ee.a)(e,"DurationType",null),Object(ee.a)(e,"ShouldAutoCreateSvcAppt",null),Object(ee.a)(e,"SkillRequirements",null),e)},i.__saveChanges=D()(i.__saveChanges,2e3),i}return Object(l.a)(s,[{key:"componentWillMount",value:function(){this.props&&this.props.workType&&(this.nameBeforeSave=this.props.workType.Name)}},{key:"componentWillReceiveProps",value:function(e){if(e.workType){var t;this.nameBeforeSave=e.workType.Name;var s=(t={Id:e.workType.Id||"",Name:e.workType.Name||"",Description:e.workType.Description||""},Object(ee.a)(t,se.WorkType.Due_Date_Offset__c,e.workType[se.WorkType.Due_Date_Offset__c]),Object(ee.a)(t,"EstimatedDuration",e.workType.EstimatedDuration||""),Object(ee.a)(t,"DurationType",e.workType.DurationType||""),Object(ee.a)(t,"ShouldAutoCreateSvcAppt",e.workType.ShouldAutoCreateSvcAppt),Object(ee.a)(t,"SkillRequirements",e.workType.SkillRequirements),t);void 0==s[se.WorkType.Due_Date_Offset__c]&&(s[se.WorkType.Due_Date_Offset__c]=""),this.setState(Object.assign({},this.state,{workType:s}))}}},{key:"render",value:function(){var e=this;return this.props.workType?Object(b.jsxs)("div",{className:"side-form form-arrow",children:[Object(b.jsxs)("div",{className:"form-header",children:[Object(b.jsx)("h2",{className:"truncate",children:this.nameBeforeSave||this.state.workType.Name}),Object(b.jsx)("span",{className:"truncate",onClick:this.__openSObjectLink.bind(this,this.state.workType.Id),children:m.Open_WorkType_Record})]}),Object(b.jsxs)("div",{className:"form-row-container",children:[Object(b.jsxs)("div",{className:"form-label",children:[m.OpHoursName,Object(b.jsx)(_,{text:this.tooltipTextName})]}),Object(b.jsx)("div",{className:"form-input",children:Object(b.jsx)("input",{type:"text",maxlength:"100",value:this.state.workType.Name,ref:function(t){e.wt_Name=t},onChange:this.__wtFieldChanged.bind(this,"Name")})})]}),Object(b.jsxs)("div",{className:"form-row-container",children:[Object(b.jsx)("div",{className:"form-label",children:m.PolicyDescription}),Object(b.jsx)("div",{className:"form-input",children:Object(b.jsx)("textarea",{value:this.state.workType.Description,ref:function(t){e.wt_Description=t},onChange:this.__wtFieldChanged.bind(this,"Description")})})]}),Object(b.jsxs)("div",{className:"form-row-container",style:{marginBottom:"35px"},children:[Object(b.jsxs)("div",{className:"form-label",children:[m.DueDateOffset,Object(b.jsx)(_,{text:this.tooltipTextDueDate})]}),Object(b.jsxs)("div",{className:"form-input",children:[Object(b.jsx)("input",{type:"number",min:"0",value:this.state.workType[se.WorkType.Due_Date_Offset__c],ref:function(t){e["wt_"+se.WorkType.Due_Date_Offset__c]=t},onChange:this.__wtFieldChanged.bind(this,se.WorkType.Due_Date_Offset__c)}),Object(b.jsx)("div",{className:"due-date-calculated",children:this.__calcDueDateInDays(this.state.workType[se.WorkType.Due_Date_Offset__c])})]})]}),Object(b.jsxs)("div",{className:"form-row-container",children:[Object(b.jsx)("div",{className:"form-label",children:m.EstimatedDuration}),Object(b.jsx)("div",{className:"form-input",children:Object(b.jsx)("input",{type:"number",min:"0",value:this.state.workType.EstimatedDuration,ref:function(t){e.wt_EstimatedDuration=t},onChange:this.__wtFieldChanged.bind(this,"EstimatedDuration")})})]}),Object(b.jsxs)("div",{className:"form-row-container",children:[Object(b.jsx)("div",{className:"form-label",children:m.Duration_Type}),Object(b.jsx)("div",{className:"form-input form-select",children:Object(b.jsxs)("select",{value:this.state.workType.DurationType,ref:function(t){e.wt_DurationType=t},onChange:this.__wtFieldChanged.bind(this,"DurationType"),children:[Object(b.jsx)("option",{value:"Minutes",children:m.Minutes}),Object(b.jsx)("option",{value:"Hours",children:m.Hours})]})})]}),Object(b.jsxs)("div",{className:"form-row-container",children:[Object(b.jsxs)("div",{className:"form-label",children:[m.AutoCreateServiceAppointment,Object(b.jsx)(_,{text:this.tooltipTextAutoCreate})]}),Object(b.jsx)("div",{className:"form-input checkbox_toggle",children:Object(b.jsx)("input",{type:"checkbox",checked:this.state.workType.ShouldAutoCreateSvcAppt,ref:function(t){e.wt_ShouldAutoCreateSvcAppt=t},onChange:this.__wtCheckboxFieldChanged.bind(this,"ShouldAutoCreateSvcAppt")})})]}),Object(b.jsxs)("div",{className:"form-row-container",children:[Object(b.jsxs)("div",{className:"form-label",children:[m.Skill_Requirements,Object(b.jsx)(_,{text:this.tooltipTextSkillReq,tipPosition:"up"})]}),Object(b.jsx)(te,{skills:this.props.skills,requiredSkills:this.state.workType.SkillRequirements,addRequiredSkill:this.__addRequiredSkill.bind(this),removeRequiredSkill:this.__removeRequiredSkill.bind(this)})]})]}):Object(b.jsx)("div",{className:"side-form",children:Object(b.jsx)("div",{className:"select-a",children:m.NoWorkTypeSelectedText})})}},{key:"__wtFieldChanged",value:function(e){var t=Object.assign({},this.state.workType);t[e]=this["wt_"+e].value,e==se.WorkType.Due_Date_Offset__c&&""===this["wt_"+e].value&&(t[e]=null),this.setState(Object.assign({},this.state,{workType:t})),this.__saveChanges()}},{key:"__wtCheckboxFieldChanged",value:function(e){var t=Object.assign({},this.state.workType);t[e]=this["wt_"+e].checked,this.setState(Object.assign({},this.state,{workType:t})),this.__saveChanges()}},{key:"__addRequiredSkill",value:function(e){var t=this;e&&y("addRequiredSkill",this.state.workType.Id,e).then((function(e){t.props.afterSave(e)})).catch((function(e){console.error(e)}))}},{key:"__removeRequiredSkill",value:function(e){var t=this;e&&y("removeRequiredSkill",this.state.workType.Id,e.Id).then((function(e){t.props.afterSave(e)})).catch((function(e){console.error(e)}))}},{key:"__calcDueDateInDays",value:function(e){return e>=1440?Math.floor(e/60/24)+" "+m.DaysLabel:e>=60?(e/60%10==0?e/60:(e/60).toFixed(2))+" "+m.Hours:""}},{key:"__saveChanges",value:function(){var e=this;if(this.state.workType.Name){for(var t=0;t<this.props.workTypes.length;t++)if(this.props.workTypes[t].Name===this.state.workType.Name&&this.props.workTypes[t].Id!==this.state.workType.Id)return;console.info("saving.....");var s=Object.assign({},this.state.workType),i=Object.assign({},s.SkillRequirements);delete s.SkillRequirements,y("updateWorkType",JSON.stringify(s),JSON.stringify([i])).then((function(t){e.props.afterSave(t)})).catch((function(e){console.error(e)}))}}},{key:"__openSObjectLink",value:function(e,t){t.preventDefault(),C(e)}}]),s}(i.Component)),re=(s(63),function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(c.a)(this,s),(e=t.call(this)).state={selectedWorkType:null,lastSaved:null,workTypes:null,skills:null},e.icon={url:x.work_type,style:{background:"#5876a3"}},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this;V.get().then((function(t){e.setState(Object.assign({},{workTypes:t}))})),q.get().then((function(t){e.setState(Object.assign({},{skills:t}))}))}},{key:"render",value:function(){return Object(b.jsxs)("div",{className:"full-height",children:[Object(b.jsx)(g,{title:m.WorkTypesAndSkills,text:m.WorkTypesAndSkillsExplanation,icon:this.icon}),Object(b.jsx)(Y,{selectWorkType:this.__handleSelectWorkType.bind(this),afterSave:this.__handleFormSaved.bind(this),workTypes:this.state.workTypes}),Object(b.jsx)(ie,{workType:this.state.selectedWorkType,afterSave:this.__handleFormSaved.bind(this),workTypes:this.state.workTypes,skills:this.state.skills})]})}},{key:"__handleSelectWorkType",value:function(e){this.setState({selectedWorkType:e})}},{key:"__handleFormSaved",value:function(e){window.Array.isArray(e)||(e=[e]);for(var t=this.state.workTypes,s=0;s<t.length;s++)e[0].Id===t[s].Id&&(t[s]=e[0]);this.setState({lastSaved:e[0],workTypes:t,selectedWorkType:e[0]})}}],[{key:"generateIntroText",value:function(){return Object(b.jsx)("span",{children:Object(b.jsxs)("ul",{children:[Object(b.jsx)("li",{children:m.WorkTypesAndSkillsPoint1}),Object(b.jsx)("li",{children:m.WorkTypesAndSkillsPoint3}),Object(b.jsx)("li",{children:m.WorkTypesAndSkillsPoint2}),Object(b.jsx)("li",{children:m.WorkTypesAndSkillsPoint4}),Object(b.jsx)("li",{children:m.WorkTypesAndSkillsPoint5})]})})}}]),s}(i.Component)),ne=new(function(){function e(){Object(c.a)(this,e),this.synced=!1}return Object(l.a)(e,[{key:"get",value:function(){var e=this;return this.synced?new Promise((function(t){return t(e.policies)})):new Promise((function(t,s){y("getSchedulingPolicies").then((function(s){e.parseAllPoliciesObjects(s),e.synced=!0,t(e.policies)})).catch((function(t){e.synced=!1,console.error("Unable to get operating hours"),s(t)}))}))}},{key:"parseAllPoliciesObjects",value:function(e){e.goalsJunction=e.goalsJunction.map((function(e){return{Id:e.Id,SchedulingPolicy:e[se.SchedulingPolicyGoal.SchedulingPolicy],ServiceGoal:e[se.SchedulingPolicyGoal.Service_Goal],Weight:e[se.SchedulingPolicyGoal.Weight]}})),e.rulesJunction=e.rulesJunction.map((function(e){return{Id:e.Id,SchedulingPolicy:e[se.SchedulingPolicyWorkRule.SchedulingPolicy],WorkRule:e[se.SchedulingPolicyWorkRule.WorkRule]}})),e.policies=e.policies.map(this.parsePolicy).sort((function(e,t){return e.Name<=t.Name?-1:1})),this.policies=e}},{key:"getNow",value:function(){return this.policies}},{key:"upsertPolicy",value:function(e){for(var t=0;t<this.policies.policies.length;t++)if(this.policies.policies[t].Id===e.Id)return void(this.policies.policies[t]=e);this.policies.policies.push(e)}},{key:"parsePolicy",value:function(e){return{Id:e.Id,Name:w(e.Name),Description:w(e[se.SchedulingPolicy.Description])||"",Daily_Optimization__c:e[se.SchedulingPolicy.Daily_Optimization__c]||!1,Commit_Mode__c:e[se.SchedulingPolicy.Commit_Mode__c]||"AlwaysCommit",Fix_Overlaps__c:e[se.SchedulingPolicy.Fix_Overlaps__c]||!1}}},{key:"parseRulePolicyJunction",value:function(e){return{Id:e.Id,SchedulingPolicy:e[se.SchedulingPolicyWorkRule.SchedulingPolicy],WorkRule:e[se.SchedulingPolicyWorkRule.WorkRule]}}},{key:"parsePolicyObjective",value:function(e){return{Id:e.Id,SchedulingPolicy:e[se.SchedulingPolicyGoal.SchedulingPolicy],ServiceGoal:e[se.SchedulingPolicyGoal.Service_Goal],Weight:e[se.SchedulingPolicyGoal.Weight]}}},{key:"upsertPolicyObjectiveJunction",value:function(e){for(var t=this.parsePolicyObjective(e),s=this.policies.goalsJunction,i=0;i<s.length;i++)if(s[i].Id===t.Id)return void(s[i]=t);s.push(t)}},{key:"deletePolicyObjectiveJuction",value:function(e){for(var t=this.policies.goalsJunction,s=0;s<t.length;s++)if(t[s].Id===e)return void t.splice(s,1)}},{key:"updatePolicies",value:function(e,t){ne.policies[e]=t}}]),e}()),ae=ne,oe=(s(64),s(65),["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]),ce=function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(e){return Object(c.a)(this,s),t.call(this,e)}return Object(l.a)(s,[{key:"render",value:function(){var e=this;if(!this.props.slots)return null;var t=this.props.slots.map((function(t,s){return e.__renderDay(oe[s],t)}));return Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{id:"SlotsViewContainer",children:[Object(b.jsx)("div",{className:"slots-prev-exp",children:m.ExplainPreviewSlots}),t]}),Object(b.jsx)("div",{id:"TimezoneWarning",children:m.GuidedSetup_appt_booking_timezone_info})]})}},{key:"__renderDay",value:function(e,t){var i=t.map(s.formatTimeSlot);return 0===i.length&&(i=Object(b.jsx)("div",{className:"single-day-slot",children:m.OnboardingNoSlots})),Object(b.jsxs)("div",{className:"day-container-slots",children:[Object(b.jsx)("div",{className:"day-name-container-slots",children:m.Days[e]}),i]})}}],[{key:"formatTimeSlot",value:function(e){var t=e.startMinutes<9?"0"+e.startMinutes:e.startMinutes,s=e.endMinutes<9?"0"+e.endMinutes:e.endMinutes;if(window.isAMPM){var i=e.startHour,r=e.endHour;return i=0===e.startHour?"12:"+t+"AM":12===e.startHour?"12:"+t+"PM":e.startHour>12?(i-12).toString()+":"+t+"PM":i+":"+t+"AM",r=0===e.endHour?"12:"+s+"AM":12===e.endHour?"12:"+s+"PM":e.endHour>12?(r-12).toString()+":"+s+"PM":r+":"+s+"AM",Object(b.jsxs)("div",{className:"single-day-slot",children:[i," - ",r]})}return Object(b.jsxs)("div",{className:"single-day-slot",children:[e.startHour,":",t," - ",e.endHour,":",s]})}}]),s}(i.Component),le={},de=function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(c.a)(this,s),(e=t.call(this)).icon={url:x.appBooking,style:{background:"#3d96dd"}},e.state={addNewOh:null,selectedOperatingHours:window.abSerttings.defaultOperatingHoursForAb,selectedPolicy:window.abSerttings.defaultPolicyForAb,policies:[],showWorkingHoursCreator:!1,showPreview:null,showSuccess:!1},ae.get().then((function(t){e.setState({policies:t.policies}),e.__operationHoursChanged(window.abSerttings.defaultOperatingHoursForAb)})),e.moreText=Object(b.jsx)("div",{children:p.AppBookingMore1}),e}return Object(l.a)(s,[{key:"render",value:function(){var e=this.state.policies.map((function(e){return Object(b.jsx)("option",{value:e.Id,children:e.Name})}));return Object(b.jsxs)("div",{children:[Object(b.jsx)(G,{show:this.state.showSuccess,text:p.OpSavedGood}),Object(b.jsx)(g,{title:p.AppointmentBooking,text:p.AppointmentBookingExplanation,icon:this.icon,secondParagraph:this.moreText}),Object(b.jsxs)("div",{id:"AppointmentBookingForm",children:[Object(b.jsxs)("div",{className:"oh-form",children:[Object(b.jsxs)("div",{className:"ohs-label",children:[p.SchedulingPolicyName,Object(b.jsx)(_,{text:p.GuidedSetup_appt_booking_policy_tooltip})]}),Object(b.jsx)("div",{className:"ohs-input",children:Object(b.jsx)("select",{onChange:this.__schedulingPolicyChanged.bind(this),value:this.state.selectedPolicy,children:e})})]}),Object(b.jsx)(L,{multiselect:!1,addNewOh:this.state.addNewOh,selected:this.state.selectedOperatingHours,dontShowTz:!0,onChange:this.__operationHoursChanged.bind(this)}),Object(b.jsx)("div",{className:"create-new-oh-ab",onClick:this.__toggleWorkingHoursCreator.bind(this),children:p.CreateNewOH}),Object(b.jsx)(W,{show:this.state.showWorkingHoursCreator,height:"420",width:"680",handleVisibility:this.__toggleWorkingHoursCreator.bind(this),children:Object(b.jsx)(F,{hideTimezone:!0,createSlots:!0,afterSave:this.__afterSaveOperatingHours.bind(this)})})]}),Object(b.jsx)(ce,{slots:this.state.showPreview})]})}},{key:"__schedulingPolicyChanged",value:function(e){var t=this,s=e.target.value;this.setState({selectedPolicy:s}),y("updateAbSettings","policy",s).then((function(e){window.abSerttings.defaultPolicyForAb=s})).catch((function(e){console.error(e),t.setState({selectedOperatingHours:window.abSerttings.defaultPolicyForAb})}))}},{key:"__operationHoursChanged",value:function(e){var t=this;this.state.selectedOperatingHours!==e?(this.setState({selectedOperatingHours:e}),y("updateAbSettings","hours",e).then((function(s){window.abSerttings.defaultOperatingHoursForAb=e,le[e]?t.setState({showPreview:le[e],selectedOperatingHours:e}):y("getTimeSlots",e).then((function(s){var i={Monday:[],Tuesday:[],Wednesday:[],Thursday:[],Friday:[],Saturday:[],Sunday:[]};s.sort((function(e,t){return e.StartTime>t.StartTime?1:-1})).forEach((function(e){i[e.DayOfWeek].push({startHour:Math.floor(e.StartTime/1e3/60/60),startMinutes:Math.floor(e.StartTime/1e3/60%60),endHour:Math.floor(e.EndTime/1e3/60/60),endMinutes:Math.floor(e.EndTime/1e3/60%60)})})),le[e]=[i.Monday,i.Tuesday,i.Wednesday,i.Thursday,i.Friday,i.Saturday,i.Sunday],t.setState({showPreview:le[e]})}))})).catch((function(e){console.error(e),t.setState({selectedOperatingHours:window.abSerttings.defaultOperatingHoursForAb})}))):y("getTimeSlots",e).then((function(s){var i={Monday:[],Tuesday:[],Wednesday:[],Thursday:[],Friday:[],Saturday:[],Sunday:[]};s.sort((function(e,t){return e.StartTime>t.StartTime?1:-1})).forEach((function(e){i[e.DayOfWeek].push({startHour:Math.floor(e.StartTime/1e3/60/60),startMinutes:Math.floor(e.StartTime/1e3/60%60),endHour:Math.floor(e.EndTime/1e3/60/60),endMinutes:Math.floor(e.EndTime/1e3/60%60)})})),le[e]=[i.Monday,i.Tuesday,i.Wednesday,i.Thursday,i.Friday,i.Saturday,i.Sunday],t.setState({showPreview:le[e]})}))}},{key:"__toggleWorkingHoursCreator",value:function(){this.setState({showWorkingHoursCreator:!this.state.showWorkingHoursCreator})}},{key:"__afterSaveOperatingHours",value:function(e){var t=this;this.setState({showWorkingHoursCreator:!1,addNewOh:e,showSuccess:!0}),window.setTimeout((function(){t.setState({showSuccess:!1})}),3500)}}]),s}(i.Component),ue=s(14),he=s.n(ue),pe=s(17),be=s(13),je=(s(67),s(12)),ve=(s(68),function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(e){var i;return Object(c.a)(this,s),(i=t.call(this,e)).state={value:i.props.value,oldValue:i.props.value},i.saveValueDebounced=D()(i.saveValueDebounced,5).bind(Object(je.a)(i)),i}return Object(l.a)(s,[{key:"render",value:function(){return"IsActive"===this.props.type?Object(b.jsx)("input",{type:"checkbox",onChange:this.valueChanged.bind(this),checked:this.state.value}):Object(b.jsx)("input",{className:"rd-inline-edit",onChange:this.valueChanged.bind(this),onBlur:this.checkIfEmpty.bind(this),type:"text",value:this.state.value})}},{key:"componentWillReceiveProps",value:function(e){this.props.value===e.value&&this.setState({value:e.value}),this.setState({value:e.value})}},{key:"valueChanged",value:function(e){if("IsActive"===this.props.type)return this.setState({value:e.target.checked}),void this.saveValueDebounced(e.target.checked);this.setState({value:e.target.value,oldValue:this.state.value}),this.saveValueDebounced(e.target.value)}},{key:"saveValueDebounced",value:function(e){"resourceName"===this.props.type&&""===e||this.props.onSave(e,this.props.type,this.props.resourceId)}},{key:"checkIfEmpty",value:function(){"resourceName"===this.props.type&&""===this.state.value&&this.setState({value:this.state.oldValue})}}]),s}(i.Component)),fe=(s(69),function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(e){var i;return Object(c.a)(this,s),(i=t.call(this,e)).state={saving:{mobile:!1,fsl:!1}},i}return Object(l.a)(s,[{key:"render",value:function(){return Object(b.jsxs)("div",{children:[this.generateFslLicense(),this.generateMobileLicense()]})}},{key:"generateFslLicense",value:function(){var e="slds-icon licenseIcon ".concat(this.props.fsl?"fslLicense":"");return this.state.saving.fsl?Object(b.jsx)("img",{src:x.spinner,className:"lt-saving-icon lt-saving-fsl"}):Object(b.jsx)("span",{title:this.props.fsl?m.RemoveFslLicenseAlt:m.AddFslLicenseAlt,children:Object(b.jsx)("svg",{"aria-hidden":"true",onClick:this.licenseChanged.bind(this,"fsl",!this.props.fsl),className:e,children:Object(b.jsx)("use",{href:x.fslLicense})})})}},{key:"generateMobileLicense",value:function(){var e="slds-icon licenseIcon fslMobile ".concat(this.props.mobile?"mobileLicenseOn":"");return this.state.saving.mobile?Object(b.jsx)("img",{src:x.spinner,className:"lt-saving-icon"}):Object(b.jsx)("span",{title:this.props.mobile?m.RemoveMobileLicenseAlt:m.AddMobileLicenseAlt,children:Object(b.jsx)("svg",{"aria-hidden":"true",onClick:this.licenseChanged.bind(this,"mobile",!this.props.mobile),className:e,children:Object(b.jsx)("use",{href:x.mobileLicense})})})}},{key:"licenseChanged",value:function(e,t){var s=this;if(!this.state.saving[e]){var i=Object.assign({},this.state);i.saving[e]=!0,this.setState(i),this.props.onChange(e,t,(function(){var t=Object.assign({},s.state);t.saving[e]=!1,s.setState(t)}))}}}]),s}(i.Component)),me=function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(c.a)(this,s),(e=t.call(this)).state={sortBy:"Name",order:1,selectedRows:{},toggleAll:!1},e}return Object(l.a)(s,[{key:"render",value:function(){var e=this,t=this.props.users.sort(this.sortRows.bind(this)).filter(this.isRowVisible.bind(this)).map((function(t){var s=e.state.selectedRows[e.props.resources[t.Id].Id]?"rd-table-row rd-table-selected":"rd-table-row";return Object(b.jsxs)("div",{className:s,children:[Object(b.jsx)("div",{className:"rd-table-cell rd-table-cell-selected",children:Object(b.jsx)("input",{type:"checkbox",checked:e.state.selectedRows[e.props.resources[t.Id].Id],onClick:e.onRowClicked.bind(e,e.props.resources[t.Id].Id)})}),Object(b.jsx)("div",{className:"rd-table-cell",children:e.generateResourceCellContent(t.Id)}),Object(b.jsxs)("div",{className:"rd-table-cell rd-table-cell-user",children:[t.Name,Object(b.jsx)("span",{title:m.Open_User_Record,onClick:e.__openSObjectLink.bind(e,t.Id),children:Object(b.jsx)("svg",{"aria-hidden":"true",className:"slds-icon",children:Object(b.jsx)("use",{href:x.open})})})]}),Object(b.jsx)("div",{className:"rd-table-cell",children:e.props.resources[t.Id]?Object(b.jsx)(ve,{value:e.props.resources[t.Id].GanttLabel,type:"GanttLabel",resourceId:e.props.resources[t.Id].Id,onSave:e.inlineValueChanged.bind(e)}):""}),Object(b.jsx)("div",{className:"rd-table-cell",children:e.generateTerritoryCellContent(t.Id)}),Object(b.jsx)("div",{className:"rd-table-cell rd-table-cell-small",children:Object(b.jsx)(ve,{value:e.props.resources[t.Id].IsActive,type:"IsActive",resourceId:e.props.resources[t.Id].Id,onSave:e.inlineValueChanged.bind(e)})}),Object(b.jsx)("div",{className:"rd-table-cell rd-table-cell-small rd-resource-licenses",children:Object(b.jsx)(fe,{fsl:e.getUserFslLicense(t.Id),mobile:e.getUserMobileLicense(t.Id),onChange:e.licenseChanged.bind(e,t.Id)})})]})}));return Object(b.jsx)("div",{id:"rd-the-table",children:Object(b.jsxs)("div",{className:"rd-user-table",children:[Object(b.jsxs)("div",{className:"rd-table-head",children:[Object(b.jsx)("div",{className:"rd-table-head-cell rd-table-head-selected",children:Object(b.jsx)("input",{type:"checkbox",checked:this.state.toggleAll,onClick:this.toggleAllRows.bind(this)})}),Object(b.jsx)("div",{className:"rd-table-head-cell",onClick:this.setSortAndOrder.bind(this,"Name"),children:this.styleColumn(m.TableResourceName,"Name")}),Object(b.jsx)("div",{className:"rd-table-head-cell rd-table-head-user",onClick:this.setSortAndOrder.bind(this,"user"),children:this.styleColumn(m.TableUsername,"user")}),Object(b.jsx)("div",{className:"rd-table-head-cell",onClick:this.setSortAndOrder.bind(this,"GanttLabel"),children:this.styleColumn(m.TableGanttLabel,"GanttLabel")}),Object(b.jsx)("div",{className:"rd-table-head-cell",onClick:this.setSortAndOrder.bind(this,"ServiceTerritory"),children:this.styleColumn(m.TableTerritory,"ServiceTerritory")}),Object(b.jsx)("div",{className:"rd-table-head-cell rd-table-head-cell-small",onClick:this.setSortAndOrder.bind(this,"IsActive"),children:this.styleColumn(m.TableActive,"IsActive")}),Object(b.jsx)("div",{className:"rd-table-head-cell rd-table-head-cell-small",onClick:this.setSortAndOrder.bind(this,"licenses"),children:this.styleColumn(m.TableLicenses,"licenses")})]}),Object(b.jsx)("div",{className:"rd-table-body",children:t})]})})}},{key:"styleColumn",value:function(e,t){if(t===this.state.sortBy){var s=1===this.state.order?Object(b.jsx)("svg",{"aria-hidden":"true",className:"slds-icon",children:Object(b.jsx)("use",{href:x.arrowup})}):Object(b.jsx)("svg",{"aria-hidden":"true",className:"slds-icon",children:Object(b.jsx)("use",{href:x.arrowdown})});return Object(b.jsxs)("b",{children:[e,s]})}return e}},{key:"generateResourceCellContent",value:function(e){return void 0===this.props.resources[e]?"":Object(b.jsxs)("span",{children:[Object(b.jsx)(ve,{value:this.props.resources[e].Name,type:"resourceName",resourceId:this.props.resources[e].Id,onSave:this.inlineValueChanged.bind(this)}),Object(b.jsx)("span",{title:m.Open_Service_Resource_Record,onClick:this.__openSObjectLink.bind(this,this.props.resources[e].Id),children:Object(b.jsx)("svg",{"aria-hidden":"true",className:"slds-icon",children:Object(b.jsx)("use",{href:x.open})})})]})}},{key:"generateTerritoryCellContent",value:function(e){return this.props.resources[e]&&this.props.territoryMembers[this.props.resources[e].Id]?Object(b.jsxs)("span",{children:[this.props.territoryMembers[this.props.resources[e].Id].name,Object(b.jsx)("span",{title:m.Open_Service_Territory_Record,onClick:this.__openSObjectLink.bind(this,this.props.territoryMembers[this.props.resources[e].Id].id),children:Object(b.jsx)("svg",{"aria-hidden":"true",className:"slds-icon",children:Object(b.jsx)("use",{href:x.open})})})]}):""}},{key:"isRowVisible",value:function(e){return!!e.IsActive&&(!!this.props.resources[e.Id]&&(!this.props.search||!(!this.props.search||!(this.props.resources[e.Id].Name.toUpperCase().indexOf(this.props.search.toUpperCase())>-1||this.props.resources[e.Id].GanttLabel.toUpperCase().indexOf(this.props.search.toUpperCase())>-1||e.Name&&e.Name.toUpperCase().indexOf(this.props.search.toUpperCase())>-1))))}},{key:"getUserFslLicense",value:function(e){var t=this.props.licenseTypes.FieldServiceSchedulingPsl;return this.props.assignedLicenses[e]&&this.props.assignedLicenses[e][t]?this.props.assignedLicenses[e][t]:null}},{key:"getUserMobileLicense",value:function(e){var t=this.props.licenseTypes.FieldServiceMobilePsl;return this.props.assignedLicenses[e]&&this.props.assignedLicenses[e][t]?this.props.assignedLicenses[e][t]:null}},{key:"checkIfUsersHaveResource",value:function(e,t){return this.props.resources[e.Id]&&this.props.resources[t.Id]?3:!this.props.resources[e.Id]&&this.props.resources[t.Id]?2:this.props.resources[e.Id]&&!this.props.resources[t.Id]?1:this.props.resources[e.Id]||this.props.resources[t.Id]?void 0:0}},{key:"setSortAndOrder",value:function(e){this.state.sortBy===e?this.setState({order:-1*this.state.order}):this.setState({sortBy:e,order:1})}},{key:"getLicenseScoreForSort",value:function(e){return this.props.assignedLicenses[e.Id]?2===Object.keys(this.props.assignedLicenses[e.Id]).length?3:this.props.assignedLicenses[e.Id][this.props.licenseTypes.FieldServiceSchedulingPsl]?2:this.props.assignedLicenses[e.Id][this.props.licenseTypes.FieldServiceMobilePsl]?1:0===Object.keys(this.props.assignedLicenses[e.Id]).length?0:void 0:-1}},{key:"getResourceFieldForSort",value:function(e){return this.props.resources[e.Id][this.state.sortBy]}},{key:"sortRows",value:function(e,t){if("ServiceTerritory"===this.state.sortBy){var s=this.props.resources[e.Id]&&this.props.territoryMembers[this.props.resources[e.Id].Id]?this.props.territoryMembers[this.props.resources[e.Id].Id].name:"",i=this.props.resources[t.Id]&&this.props.territoryMembers[this.props.resources[t.Id].Id]?this.props.territoryMembers[this.props.resources[t.Id].Id].name:"";return""===s&&""===i?0:""===s&&""!==i?-1*this.state.order:""!==s&&""===i||s.toUpperCase()>i.toUpperCase()?this.state.order:s.toUpperCase()<i.toUpperCase()?-1*this.state.order:0}if("user"===this.state.sortBy)return e.Name.toUpperCase()>=t.Name.toUpperCase()?this.state.order:-1*this.state.order;if("licenses"===this.state.sortBy){var r=this.getLicenseScoreForSort(e),n=this.getLicenseScoreForSort(t);return r>n?this.state.order:r<n?-1*this.state.order:0}var a=this.checkIfUsersHaveResource(e,t);if(0===a)return 0;if(1===a)return this.state.order;if(2===a)return-1*this.state.order;if(3===a){var o=this.getResourceFieldForSort(e),c=this.getResourceFieldForSort(t);return"string"===typeof o?o.toUpperCase()>c.toUpperCase()?this.state.order:o.toUpperCase()<c.toUpperCase()?-1*this.state.order:0:o>c?this.state.order:o<c?-1*this.state.order:0}}},{key:"inlineValueChanged",value:function(e,t,s){this.props.saveResource(e,t,s)}},{key:"licenseChanged",value:function(e,t,s,i){this.props.licenseChanged(e,t,s,i)}},{key:"onRowClicked",value:function(e){var t=Object.assign({},this.state.selectedRows),s=[];t[e]=!t[e]||!t[e],Object.keys(t).forEach((function(e){return t[e]?s.push(e):null})),this.props.onRowSelected(s),this.setState({selectedRows:t})}},{key:"toggleAllRows",value:function(){var e=this,t=Object.assign({},this.state.selectedRows),s=!this.state.toggleAll;this.props.users.filter(this.isRowVisible.bind(this)).forEach((function(i){t[e.props.resources[i.Id].Id]=s})),this.props.onRowSelected(s?Object.keys(t):[]),this.setState({selectedRows:t,toggleAll:s})}},{key:"__openSObjectLink",value:function(e,t){t.preventDefault(),C(e)}}]),s}(i.Component),ge=(s(70),function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(e){var i;return Object(c.a)(this,s),(i=t.call(this,e)).searchTermChangedDebounced=D()(e.onChange,100),i}return Object(l.a)(s,[{key:"render",value:function(){return Object(b.jsxs)("div",{id:"rd-search-bar",children:[Object(b.jsx)("input",{type:"text",placeholder:m.OBSearchResources,onChange:this.searchTermChanged.bind(this)}),Object(b.jsx)("svg",{"aria-hidden":"true",className:"slds-icon",children:Object(b.jsx)("use",{href:x.search})})]})}},{key:"searchTermChanged",value:function(e){this.searchTermChangedDebounced(e.target.value)}}]),s}(i.Component)),Oe=(s(71),function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(){return Object(c.a)(this,s),t.call(this)}return Object(l.a)(s,[{key:"render",value:function(){return Object(b.jsxs)("div",{className:"licenses-container",children:[Object(b.jsxs)("div",{id:"rd-remaining-licenses",children:[m.LicenseRemaining,this.generateFslCounter(),this.generateMoibileCounter()]}),Object(b.jsx)("span",{className:"license-tooltip-cont",children:Object(b.jsx)(_,{text:m.Licenses_in_use_tooltip})})]})}},{key:"generateFslCounter",value:function(){if(this.props.counters&&this.props.counters.FieldServiceSchedulingPsl)return Object(b.jsxs)("div",{className:"rd-remaining",children:[Object(b.jsx)("svg",{"aria-hidden":"true",className:"slds-icon",children:Object(b.jsx)("use",{href:x.fslLicense})}),this.props.counters.FieldServiceSchedulingPsl.used,"/",this.props.counters.FieldServiceSchedulingPsl.total]})}},{key:"generateMoibileCounter",value:function(){if(this.props.counters&&this.props.counters.FieldServiceMobilePsl)return Object(b.jsxs)("div",{className:"rd-remaining",children:[Object(b.jsx)("svg",{"aria-hidden":"true",className:"slds-icon rd-mobile",children:Object(b.jsx)("use",{href:x.mobileLicense})}),this.props.counters.FieldServiceMobilePsl.used,"/",this.props.counters.FieldServiceMobilePsl.total]})}}]),s}(i.Component)),ye=(s(72),function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(){var e;Object(c.a)(this,s),e=t.call(this);var i=m.OBNewResourcePoint4.split("$0");return e.tooltipText=Object(b.jsxs)("div",{children:[m.OBNewResourcePoint1,Object(b.jsxs)("ul",{className:"rd-comments-ul",children:[Object(b.jsx)("li",{children:m.OBNewResourcePoint2}),Object(b.jsx)("li",{children:m.OBNewResourcePoint3}),Object(b.jsxs)("li",{children:[i[0],Object(b.jsx)("br",{}),i[1]]})]})]}),e.state={saving:!1,user:null,resourceName:null,territory:null,ganttLabel:null,territories:[],licenses:{fsl:!0,mobile:!1}},e.inputs={},e}return Object(l.a)(s,[{key:"render",value:function(){var e=this,t=this.state.saving?Object(b.jsxs)("div",{className:"rd-add-saving-new-res",children:[Object(b.jsx)("img",{src:x.spinner})," ",m.OnboardingSaving]}):Object(b.jsx)("button",{className:"guided-setup-button guided-setup-button_neutral",onClick:this.addNewResource.bind(this),children:m.NewWorkTypeButton});return Object(b.jsxs)("div",{id:"rd-add-new-resource",children:[Object(b.jsxs)("h1",{children:[m.NewREsources," ",Object(b.jsx)(_,{text:this.tooltipText,tipPosition:"right"})]}),Object(b.jsx)("div",{className:"rd-new-resource-cell",children:this.generateUserOptions()}),Object(b.jsx)("div",{className:"rd-new-resource-cell",children:Object(b.jsx)("input",{type:"text",value:this.state.resourceName,placeholder:m.ObResourceName,ref:function(t){return e.inputs.resourceName=t},onChange:this.valueChanged.bind(this,"resourceName")})}),Object(b.jsx)("div",{className:"rd-new-resource-cell",children:Object(b.jsx)("input",{type:"text",value:this.state.ganttLabel,placeholder:m.ObGanttLabel,ref:function(t){return e.inputs.ganttLabel=t},onChange:this.valueChanged.bind(this,"ganttLabel")})}),Object(b.jsx)("div",{className:"rd-new-resource-cell",children:this.generateTerritoriesOptions()}),Object(b.jsx)("div",{className:"rd-new-resource-cell rd-new-resource-cell-small",children:Object(b.jsx)(fe,{fsl:this.state.licenses.fsl,mobile:this.state.licenses.mobile,onChange:this.licenseChanged.bind(this)})}),Object(b.jsx)("div",{className:"rd-new-resource-cell rd-new-resource-cell-small",children:t})]})}},{key:"generateUserOptions",value:function(){var e=this,t=[Object(b.jsx)("option",{value:"",children:m.ObSelectUser})];return this.props.users.forEach((function(s){s.IsActive&&!e.props.resources[s.Id]&&t.push(Object(b.jsx)("option",{value:s.Id,children:s.Name}))})),Object(b.jsx)("select",{onChange:this.userChanged.bind(this),value:this.state.user,ref:function(t){return e.inputs.user=t},children:t})}},{key:"generateTerritoriesOptions",value:function(){var e=this,t=[Object(b.jsx)("option",{value:"",children:m.ObSelectTerritory})];return 0===this.props.territories.length?Object(b.jsx)("select",{onChange:this.valueChanged.bind(this,"territory"),value:this.state.territory,children:t}):(this.props.territories.filter((function(e){return e.IsActive})).forEach((function(e){return t.push(Object(b.jsx)("option",{value:e.Id,children:e.Name}))})),Object(b.jsx)("select",{onChange:this.valueChanged.bind(this,"territory"),value:this.state.territory,ref:function(t){return e.inputs.territory=t},children:t}))}},{key:"userChanged",value:function(e){this.state.resourceName||""===e.target.value?this.setState({user:e.target.value}):this.setState({user:e.target.value,resourceName:this.props.users.find((function(t){return t.Id===e.target.value})).Name})}},{key:"licenseChanged",value:function(e,t,s){var i=Object.assign({},this.state.licenses);i[e]=t,this.setState({licenses:i}),s()}},{key:"valueChanged",value:function(e,t){var s={};s[e]=t.target.value,this.setState(s)}},{key:"addNewResource",value:function(){var e=this;if(!this.state.saving)if(this.state.resourceName)if(this.state.user)if(this.state.territory)if(this.state.licenses.fsl||this.state.licenses.mobile){var t={resourceName:this.state.resourceName,user:this.state.user,territory:this.state.territory,ganttLabel:this.state.ganttLabel};this.setState({saving:!0}),this.props.onAdded(t,this.state.licenses,(function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(t)e.setState({saving:!1});else for(var s in e.setState({saving:!1,user:null,resourceName:null,territory:null,ganttLabel:null,licenses:{fsl:!0,mobile:!1}}),e.inputs)e.inputs[s].value=""}))}else window.alert(m.ResourceMustHaveLicenses);else alert(m.MustSelectServiceTerritory);else alert(m.MustEnterUser);else alert(m.MustEnterResourceName)}}]),s}(i.Component)),xe=(s(73),s(74),function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(e){var i;return Object(c.a)(this,s),(i=t.call(this,e)).state={filter:"",saving:!1,showEditLightbox:!1,skills:[],action:"add",form:{skills:{}}},y("getSkills").then((function(e){i.setState({skills:e})})),i.tooltipTexts={add:m.SkillsAddedTooltip,overide:m.SkillsAddedNotRemoved,remove:m.SkillsRemovedTooltip},i}return Object(l.a)(s,[{key:"render",value:function(){var e=this;if(this.props.selectedIds.length>0){var t=null;return this.state.saving&&(t=Object(b.jsxs)("div",{className:"rba-saving",children:[Object(b.jsx)("img",{src:x.spinner}),m.Save_Skills]})),Object(b.jsxs)("span",{children:[Object(b.jsx)("span",{id:"rba-bulk",className:"guided-setup-button guided-setup-button_brand",onClick:this.__toggleLightbox.bind(this),children:m.UpdateXResources.replace("$0",this.props.selectedIds.length)}),Object(b.jsxs)(W,{show:this.state.showEditLightbox,height:"425",width:"850",handleVisibility:this.__toggleLightbox.bind(this),children:[Object(b.jsxs)("div",{className:"rba-skills-container",children:[Object(b.jsxs)("h1",{children:[Object(b.jsxs)("select",{value:this.state.action,onChange:this.__actionChanged.bind(this),children:[Object(b.jsx)("option",{value:"add",children:m.AddSkillsOb}),Object(b.jsx)("option",{value:"remove",children:m.RemoveSkillsOb}),Object(b.jsx)("option",{value:"overide",children:m.OverideSkillsOb})]}),m.AddResourceSkillss,Object(b.jsx)(_,{text:this.tooltipTexts[this.state.action]})]}),Object(b.jsx)("input",{type:"search",placeholder:m.Search_Skills,value:this.state.filter,onChange:function(t){return e.setState({filter:t.target.value})}}),Object(b.jsx)("div",{className:"rba-skills",children:this.__generateSkills()})]}),t,Object(b.jsx)("div",{id:"rba-button",className:"guided-setup-button guided-setup-button_brand",onClick:this.__updateResources.bind(this),children:m.UpdateResources})]})]})}return null}},{key:"__actionChanged",value:function(e){this.setState({action:e.target.value})}},{key:"__toggleLightbox",value:function(){var e=this;this.state.showEditLightbox||1!==this.props.selectedIds.length||y("getResourceData",this.props.selectedIds[0]).then((function(t){var s=Object.assign({},e.state.form);s.skills={},t.skills.forEach((function(e){s.skills[e.SkillId]=!0})),e.setState({action:"overide",form:s})})),this.setState({filter:"",action:"add",saving:!1,form:{skills:{}},showEditLightbox:!this.state.showEditLightbox})}},{key:"__generateSkills",value:function(){var e=this;return this.state.skills.filter((function(t){return""===!e.state.filter||t.MasterLabel.toUpperCase().indexOf(e.state.filter.toUpperCase())>-1})).map((function(t){return Object(b.jsxs)("div",{className:"rba-skill-container",children:[Object(b.jsx)("input",{type:"checkbox",id:"sk_"+t.Id,checked:e.state.form.skills[t.Id],onClick:e.__skillChanged.bind(e,t.Id)}),Object(b.jsx)("label",{className:"rba-skill-name",htmlFor:"sk_"+t.Id,children:t.MasterLabel})]})}))}},{key:"__skillChanged",value:function(e,t){var s=Object.assign({},this.state.form);s.skills[e]=t.target.checked,this.setState({form:s})}},{key:"__updateResources",value:function(){var e=this;if(!this.state.saving&&("add"==this.state.action||window.confirm(m.DestructiveActionConfirm))){var t=[];for(var s in this.state.form.skills)this.state.form.skills[s]&&t.push(s);this.setState({saving:!0}),y("updateSkills",this.props.selectedIds,t,this.state.action).then((function(t){e.setState({showEditLightbox:!1,saving:!1})})).catch((function(t){e.setState({showEditLightbox:!1,saving:!1}),console.error(t),window.alert(t.message)}))}}}]),s}(i.Component)),_e=function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(){var e,i;Object(c.a)(this,s),(i=t.call(this)).state=(e={searchText:"",selectedResourcesIds:[],resources:{},users:[],licenseTypes:{},assignedLicenses:{},permissionSets:{},territories:[],territoryMembers:{}},Object(ee.a)(e,"selectedResourcesIds",[]),Object(ee.a)(e,"licensesCounters",{FieldServiceMobilePsl:{total:0,used:0},FieldServiceSchedulingPsl:{total:0,used:0}}),e),i.icon={url:x.resources,style:{background:"#ef6e64"}};var r=m.ResourcesDefenitionExplanation2.split("$0");return i.secondParagraph=Object(b.jsxs)("div",{children:[r[0]," ",Object(b.jsxs)("svg",{"aria-hidden":"true",className:"slds-icon open-icon",children:[" ",Object(b.jsx)("use",{href:x.open})," "]})," ",r[1]]}),i.saveResource=D()(i.saveResource,2e3),i.getResourcesAndUsers(),y("getServiceTerritories").then((function(e){var t=e.sort((function(e,t){return e.Name<=t.Name?1:-1}));i.setState({territories:t})})).catch((function(e){console.error(e)})),i}return Object(l.a)(s,[{key:"render",value:function(){return Object(b.jsxs)("div",{id:"rd-container",children:[Object(b.jsx)(g,{title:m.ResourcesDefenition,text:m.ResourcesDefenitionExplanation,icon:this.icon,secondParagraph:this.secondParagraph}),Object(b.jsx)(ye,{resources:this.state.resources,users:this.state.users,licenseTypes:this.state.licenseTypes,assignedLicenses:this.state.assignedLicenses,onAdded:this.__onResourceCreated.bind(this),territories:this.state.territories}),Object(b.jsx)(ge,{onChange:this.__searchTermChanged.bind(this)}),Object(b.jsx)(xe,{selectedIds:this.state.selectedResourcesIds}),Object(b.jsx)(Oe,{counters:this.state.licensesCounters}),Object(b.jsx)(me,{search:this.state.searchText,resources:this.state.resources,users:this.state.users,licenseTypes:this.state.licenseTypes,assignedLicenses:this.state.assignedLicenses,territories:this.state.territories,territoryMembers:this.state.territoryMembers,saveResource:this.saveResource.bind(this),licenseChanged:this.licenseChanged.bind(this),onRowSelected:this.selectedRowsUpdated.bind(this)})]})}},{key:"selectedRowsUpdated",value:function(e){this.setState({selectedResourcesIds:e})}},{key:"__onResourceCreated",value:function(e,t,i){var r=this,n=[];if(t.fsl&&n.push.apply(n,Object(be.a)(this.state.permissionSets.fsl)),t.mobile&&n.push.apply(n,Object(be.a)(this.state.permissionSets.mobile)),t.mobile){if(this.state.licensesCounters.FieldServiceMobilePsl.used===this.state.licensesCounters.FieldServiceMobilePsl.total)return alert(m.OutOfMobileLicenses),void i(!0)}else if(t.fsl&&this.state.licensesCounters.FieldServiceSchedulingPsl.used===this.state.licensesCounters.FieldServiceSchedulingPsl.total)return alert(m.OutOfFslLicenses),void i(!0);y("createPermissionSets",e.user,n).then((function(t){t.permissions?y("createNewResource",e).then((function(t){var n=Object.assign({},r.state.resources),a=Object.assign({},r.state.territoryMembers),o=Object.assign({},r.state.assignedLicenses),c={};t.assignedLicenses.forEach((function(e){o[e.AssigneeId]=o[e.AssigneeId]||{},o[e.AssigneeId][e.PermissionSetLicenseId]=e.Id})),n[e.user]=s.parseResource(t.resource),a[t.stm.ServiceResourceId]={name:t.stm.ServiceTerritory.Name||"",id:t.stm.ServiceTerritory.Id||null},t.licenseCounter.forEach((function(e){return c[e.DeveloperName]={total:e.TotalLicenses,used:e.UsedLicenses}})),r.setState({resources:n,territoryMembers:a,assignedLicenses:o,licensesCounters:c}),i()})).catch((function(e){console.error(e),alert(e.message),i(!0)})):i(!0)})).catch((function(e){console.error(e),alert(e.message),i(!0)}))}},{key:"__searchTermChanged",value:function(e){this.setState({searchText:e})}},{key:"getResourcesAndUsers",value:function(){var e=this;y("getResourcesAndUsers").then((function(t){var i={},r={},n={},a={},o={},c={mobile:[],fsl:[]};t.licenseCounter.forEach((function(e){return o[e.DeveloperName]={total:e.TotalLicenses,used:e.UsedLicenses}})),e.setState({assignedLicenses:n,licensesCounters:o}),t.territoryMembers.forEach((function(e){return a[e.ServiceResourceId]={name:e.ServiceTerritory.Name||"",id:e.ServiceTerritory.Id||null}})),t.licenseTypes.forEach((function(e){r[e.DeveloperName]=e.Id})),t.assignedLicenses.forEach((function(e){n[e.AssigneeId]=n[e.AssigneeId]||{},n[e.AssigneeId][e.PermissionSetLicenseId]=e.Id})),t.permissionSets.forEach((function(e){"FSL_Mobile_License"===e.Name?c.mobile.push(e.Id):c.fsl.push(e.Id)})),t.resources.forEach((function(e){i[e.RelatedRecordId]=s.parseResource(e)})),e.setState({resources:i,users:t.users,licenseTypes:r,territoryMembers:a,assignedLicenses:n,permissionSets:c,licensesCounters:o})}))}},{key:"saveResource",value:function(e,t,i){var r=this,n=t;switch(t){case"resourceName":n="Name";break;case"GanttLabel":n=se.ServiceResource.GanttLabel}var a={Id:i};a[n]=e,y("updateResource",i,JSON.stringify(a)).then((function(e){var t=Object.assign({},r.state.resources),i=s.parseResource(e);t[i.RelatedRecordId]=i,r.setState({resources:t})}))}},{key:"changeResourceActive",value:function(e,t){return y("changeResourceActive",e,t)}},{key:"changeResourceIncludeInOptimization",value:function(e,t){return y("changeOptimizationCapablity",e,t)}},{key:"licenseChanged",value:function(){var e=Object(pe.a)(he.a.mark((function e(t,s,i,r){var n,a,o,c=this;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!1,a={fsl:this.state.licenseTypes.FieldServiceSchedulingPsl,mobile:this.state.licenseTypes.FieldServiceMobilePsl},!(i&&this.state.assignedLicenses[t]&&0===Object.keys(this.state.assignedLicenses[t]).length||void 0===this.state.assignedLicenses[t])){e.next=5;break}n=!0,e.next=12;break;case 5:if(!this.state.assignedLicenses[t]||1!==Object.keys(this.state.assignedLicenses[t]).length||i){e.next=12;break}return e.next=8,this.changeResourceActive(t,!1);case 8:e.sent,(o=Object.assign({},this.state.resources))[t].IsActive=!1,this.setState({resources:o});case 12:if(i){e.next=20;break}if("mobile"===s){e.next=17;break}return e.next=16,this.changeResourceIncludeInOptimization(t,!1);case 16:e.sent;case 17:y("removePermissionSets",t,"mobile"===s).then((function(e){var i=Object.assign({},c.state.assignedLicenses);delete i[t][a[s]];var n={};e.forEach((function(e){return n[e.DeveloperName]={total:e.TotalLicenses,used:e.UsedLicenses}})),c.setState({assignedLicenses:i,licensesCounters:n}),r()})),e.next=33;break;case 20:if(!i){e.next=33;break}if("mobile"!==s){e.next=28;break}if(this.state.licensesCounters.FieldServiceMobilePsl.used!==this.state.licensesCounters.FieldServiceMobilePsl.total){e.next=26;break}return alert(m.OutOfMobileLicenses),r(),e.abrupt("return");case 26:e.next=32;break;case 28:if(this.state.licensesCounters.FieldServiceSchedulingPsl.used!==this.state.licensesCounters.FieldServiceSchedulingPsl.total){e.next=32;break}return alert(m.OutOfFslLicenses),r(),e.abrupt("return");case 32:y("addPermissionSets",t,this.state.permissionSets[s]).then(function(){var e=Object(pe.a)(he.a.mark((function e(i){var a,o,l,d;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Object.assign({},c.state.assignedLicenses),o=i.licenseCounter,l={},i.permissions.forEach((function(e){a[e.AssigneeId]=a[e.AssigneeId]||{},a[e.AssigneeId][e.PermissionSetLicenseId]=e.Id})),o.forEach((function(e){return l[e.DeveloperName]={total:e.TotalLicenses,used:e.UsedLicenses}})),!n){e.next=11;break}return e.next=7,c.changeResourceActive(t,!0);case 7:e.sent,(d=Object.assign({},c.state.resources))[t].IsActive=!0,c.setState({resources:d});case 11:if("mobile"===s){e.next=15;break}return e.next=14,c.changeResourceIncludeInOptimization(t,!0);case 14:e.sent;case 15:c.setState({assignedLicenses:a,licensesCounters:l}),r();case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){window.alert(e.message),r()}));case 33:case"end":return e.stop()}}),e,this)})));return function(t,s,i,r){return e.apply(this,arguments)}}()}],[{key:"parseResource",value:function(e){var t=Object.assign({},e);return t.GanttLabel=e[se.ServiceResource.GanttLabel]||"",t.Name=e.Name||"",delete t[se.ServiceResource.GanttLabel],t}}]),s}(i.Component),ke=_e,Se=(s(75),function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(e){return Object(c.a)(this,s),t.call(this,e)}return Object(l.a)(s,[{key:"render",value:function(){var e=this,t=[];return this.props.policies.forEach((function(s){var i=e.props.selectedId===s.Id?"policy-li policy-selected":"policy-li";t.push(Object(b.jsxs)("div",{className:i,onClick:e.__policySelected.bind(e,s.Id),children:[Object(b.jsx)("h1",{className:"truncate",children:s.Name}),Object(b.jsx)("svg",{onClick:e.__clonePolicy.bind(e,s.Id),"aria-hidden":"true",className:"slds-icon icon-on-header",children:Object(b.jsx)("use",{href:x.clone})})]}))})),Object(b.jsx)("div",{id:"PoliciesList",children:t})}},{key:"__policySelected",value:function(e){this.props.onSelected&&this.props.onSelected(e)}},{key:"__clonePolicy",value:function(e,t){t.stopPropagation(),window.confirm(m.ConfirmPolicyClone)&&this.props.onClone&&this.props.onClone(e)}}]),s}(i.Component)),Ne=(s(76),function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(e){var i;Object(c.a)(this,s),(i=t.call(this,e)).state={nameBeforeSave:e.selected&&e.selected.Name||null,policy:e.selected||null,isUseEdge:window.inday_useEdge},i.inputs={},i.commitModeTooltipText=Object(b.jsxs)("div",{children:[m.guidedsetup_commit_mode_tooltip_a,Object(b.jsxs)("ul",{className:"rd-comments-ul",children:[Object(b.jsx)("li",{children:m.guidedsetup_commit_mode_tooltip_b}),Object(b.jsx)("li",{children:m.guidedsetup_commit_mode_tooltip_c})]}),m.guidedsetup_commit_mode_tooltip_d]});var r=i.state.isUseEdge?"":m.guidedsetup_inday_tooltip_disabled;return i.indayTooltipText=Object(b.jsxs)("div",{children:[Object(b.jsx)("span",{className:"inday-disabled",children:r}),m.guidedsetup_inday_tooltip]}),i}return Object(l.a)(s,[{key:"render",value:function(){return Object(b.jsxs)("div",{children:[Object(b.jsxs)("h1",{className:"g_obh_form_title",children:[this.state.nameBeforeSave,Object(b.jsx)("span",{className:"policy-link-layout",onClick:this.__openSObjectLink.bind(this,this.state.policy.Id),children:m.Open_Scheduling_Policy_Record})]}),Object(b.jsxs)("div",{className:"form-row-container",children:[Object(b.jsxs)("div",{className:"form-label",children:[m.PolicyName,Object(b.jsx)(_,{text:m.SchedulingPolicy_form_name_tooltip})]}),Object(b.jsx)("div",{className:"form-input",children:Object(b.jsx)("input",{maxlength:"100",type:"text",value:this.state.policy.Name,onBlur:this.__nameOnBlur.bind(this),onChange:this.__fieldChanged.bind(this,"Name",!1)})})]}),Object(b.jsxs)("div",{className:"form-row-container",children:[Object(b.jsx)("div",{className:"form-label",children:m.PolicyDescription}),Object(b.jsx)("div",{className:"form-input",children:Object(b.jsx)("textarea",{value:this.state.policy.Description,onChange:this.__fieldChanged.bind(this,"Description",!1)})})]}),Object(b.jsxs)("div",{className:"form-row-container",children:[Object(b.jsxs)("div",{className:"form-label",children:[m.In_Day,Object(b.jsx)(_,{text:this.indayTooltipText})]}),Object(b.jsx)("div",{className:"form-input checkbox_toggle",children:Object(b.jsx)("input",{type:"checkbox",disabled:!this.state.isUseEdge,checked:this.state.policy.Daily_Optimization__c,onChange:this.__fieldChanged.bind(this,"Daily_Optimization__c",!0)})})]}),Object(b.jsxs)("div",{className:"form-row-container",children:[Object(b.jsxs)("div",{className:"form-label",children:[m.Commit_mode,Object(b.jsx)(_,{text:this.commitModeTooltipText})]}),Object(b.jsx)("div",{className:"form-input form-select",children:Object(b.jsxs)("select",{value:this.state.policy.Commit_Mode__c,onChange:this.__fieldChanged.bind(this,"Commit_Mode__c",!1),children:[Object(b.jsx)("option",{value:"AlwaysCommit",children:"Always Commit"}),Object(b.jsx)("option",{value:"Rollback",children:"Rollback"})]})})]}),Object(b.jsxs)("div",{className:"form-row-container",children:[Object(b.jsxs)("div",{className:"form-label",children:[m.FixOverlaps,Object(b.jsx)(_,{text:m.guidedsetup_fixoverlaps_tooltip})]}),Object(b.jsx)("div",{className:"form-input checkbox_toggle",children:Object(b.jsx)("input",{type:"checkbox",checked:this.state.policy.Fix_Overlaps__c,onChange:this.__fieldChanged.bind(this,"Fix_Overlaps__c",!0)})})]})]})}},{key:"componentWillReceiveProps",value:function(e){(this.state.policy.Description===e.selected.Description&&this.state.policy.Name===e.selected.Name||this.state.policy.Id!==e.selected.Id)&&this.setState({nameBeforeSave:e.selected.Name,policy:e.selected})}},{key:"__nameOnBlur",value:function(){var e=Object.assign({},this.state.policy);this.setState({policy:e})}},{key:"__fieldChanged",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2?arguments[2]:void 0,i=Object.assign({},this.state.policy);i[e]=t?s.target.checked:s.target.value,this.setState({policy:i}),this.props.formSavedCallback(i.Id,i.Name,i.Description,i.Daily_Optimization__c,i.Commit_Mode__c,i.Fix_Overlaps__c)}},{key:"__openSObjectLink",value:function(e,t){t.preventDefault(),C(e)}}]),s}(i.Component)),we=Ne,Ce=(s(77),function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(){return Object(c.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){return Object(b.jsxs)("div",{className:"lightbox-rules-explain",children:[Object(b.jsx)("h1",{children:m.RulesTypes}),Object(b.jsxs)("ul",{children:[this.formatRule(m.RuleExp1),this.formatRule(m.RuleExp2),this.formatRule(m.RuleExp3),this.formatRule(m.RuleExp4),this.formatRule(m.RuleExp5),this.formatRule(m.RuleExp7),this.formatRule(m.RuleExp8),this.formatRule(m.RuleExp9),this.formatRule(m.RuleExp10),this.formatRule(m.RuleExp11),this.formatRule(m.RuleExp12),this.formatRule(m.RuleExp13)]})]})}},{key:"formatRule",value:function(e){return Object(b.jsxs)("li",{children:[Object(b.jsx)("b",{children:e.substr(0,e.indexOf("-")-1)})," ",e.substr(e.indexOf("-")-1)]})}}]),s}(i.Component)),Te=function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(e){var i;Object(c.a)(this,s),(i=t.call(this,e)).inputs={};var r=i.__filterSelectedRules(e.policyId,e.rules,e.rulesJunction,!0),n=i.__filterSelectedRules(e.policyId,e.rules,e.rulesJunction,!1);return i.state={showRulesExplanationLightbox:!1,saving:!1,selectedRules:r,unselectedRules:n},i.tooltipText=Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{children:m.RulesPreselectedTooltip}),Object(b.jsx)("br",{}),Object(b.jsx)("div",{children:m.RulesPreselectedTooltip2}),Object(b.jsx)("br",{}),Object(b.jsx)("div",{children:m.RulesPreselectedTooltip3})]}),i}return Object(l.a)(s,[{key:"render",value:function(){var e=this,t=null;return t=this.state.saving?Object(b.jsx)("div",{className:"rules-buttons-container",children:Object(b.jsx)("img",{src:x.spinner})}):Object(b.jsxs)("div",{className:"rules-buttons-container",children:[Object(b.jsx)("div",{className:"rules-move-button",onClick:this.__addRules.bind(this),children:">"}),Object(b.jsx)("div",{className:"rules-move-button",onClick:this.__removeRules.bind(this),children:"<"})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{className:"rules-h2",children:m.RulesSelection}),Object(b.jsxs)("p",{className:"rules-p",children:[m.RulesExplainOb," ",Object(b.jsx)("br",{})," ",m.RulesExplainObCont," ",Object(b.jsx)("b",{className:"label-link",onClick:this.__toggleRulesExplanationLightbox.bind(this),children:m.RulesExplainMore})," ",Object(b.jsx)("br",{}),m.RulesExplainObCont2]}),Object(b.jsx)(W,{show:this.state.showRulesExplanationLightbox,height:"420",width:"650",handleVisibility:this.__toggleRulesExplanationLightbox.bind(this),children:Object(b.jsx)(Ce,{})}),Object(b.jsxs)("div",{id:"RulesSelectionContainer",children:[Object(b.jsxs)("div",{className:"rules-select-container",children:[Object(b.jsx)("div",{className:"rules-select-header",children:m.AvailableRules}),Object(b.jsx)("select",{multiple:!0,className:"rules-selector-select",ref:function(t){e.inputs.unselectedRulesSelect=t},children:this.__generateRulesOptions(this.state.unselectedRules)})]}),t,Object(b.jsxs)("div",{className:"rules-select-container",children:[Object(b.jsxs)("div",{className:"rules-select-header",children:[m.SelectedRules,Object(b.jsx)(_,{text:this.tooltipText,tipPosition:"up"})]}),Object(b.jsx)("select",{multiple:!0,className:"rules-selector-select",ref:function(t){e.inputs.selectedRulesSelect=t},children:this.__generateRulesOptions(this.state.selectedRules,!0)}),this.__doesHaveAvailabilityRule()?null:Object(b.jsx)("div",{className:"ob-noars",children:m.NoAvabRule})]})]})]})}},{key:"componentWillReceiveProps",value:function(e){if(this.props!==e.policyId&&e.policyId&&e.rules&&e.rulesJunction){var t=e.policyId,s=e.rules,i=e.rulesJunction,r=this.__filterSelectedRules(t,s,i,!0),n=this.__filterSelectedRules(t,s,i,!1);this.setState({selectedRules:r,unselectedRules:n})}}},{key:"__addRules",value:function(){var e=this;if(this.inputs.unselectedRulesSelect.selectedOptions.length>0&&!this.state.saving){for(var t=[],s=this.inputs.unselectedRulesSelect.selectedOptions,i=0;i<s.length;i++){var r={Id:null};r[se.SchedulingPolicyWorkRule.SchedulingPolicy]=this.props.policyId,r[se.SchedulingPolicyWorkRule.WorkRule]=s[i].value,t.push(r)}this.setState({saving:!0}),this.props.onAdded(t,"add",(function(){for(var t=e.inputs.unselectedRulesSelect.options,s=0;s<t.length;s++)t[s].selected=!1;e.setState({saving:!1})}))}}},{key:"__removeRules",value:function(){var e=this;if(this.inputs.selectedRulesSelect.selectedOptions.length>0&&!this.state.saving){for(var t=[],s=this.inputs.selectedRulesSelect.selectedOptions,i=0;i<s.length;i++)t.push(s[i].value);this.setState({saving:!0}),this.props.onRemoved(t,"remove",(function(){for(var t=e.inputs.selectedRulesSelect.options,s=0;s<t.length;s++)t[s].selected=!1;e.setState({saving:!1})}))}}},{key:"__filterSelectedRules",value:function(e,t,s,i){return t.filter((function(t){return i?!!s.find((function(s){return s.SchedulingPolicy===e&&s.WorkRule===t.Id})):!s.find((function(s){return s.SchedulingPolicy===e&&s.WorkRule===t.Id}))}))}},{key:"__generateRulesOptions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.sort((function(e,t){return e.Name<=t.Name?-1:1})).map((function(e){return!t||e.Id!==A.earlyStart&&e.Id!==A.dueDate?Object(b.jsx)("option",{value:e.Id,title:e.RecordType.Name.substr(16,e.RecordType.Name.length),children:e.Name}):Object(b.jsx)("option",{value:e.Id,disabled:!0,title:e.RecordType.Name.substr(16,e.RecordType.Name.length),children:e.Name})}))}},{key:"__toggleRulesExplanationLightbox",value:function(){this.setState({showRulesExplanationLightbox:!this.state.showRulesExplanationLightbox})}},{key:"__doesHaveAvailabilityRule",value:function(){var e=!1;return this.state.selectedRules.forEach((function(t){"Gap_Rule_Service"===t.RecordType.DeveloperName&&(e=!0)})),e}}]),s}(i.Component),Ie=(s(78),100),Pe=function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(e){var i;return Object(c.a)(this,s),(i=t.call(this,e)).sliders={},i.sliderElements=i.__createSlidersElements(e.objectives),i.__setAvailableGoals(e.objectives,e.goalsJunction,e.policyId),i.numberOfActiveObjective=0,i}return Object(l.a)(s,[{key:"render",value:function(){return Object(b.jsxs)("div",{id:"ObjectiveEditorContainer",children:[Object(b.jsx)("h2",{className:"objectives-h2",children:m.OBObjectives}),Object(b.jsx)("p",{className:"objectives-p",children:m.ObjectiveEditorTextIntro}),Object(b.jsx)("div",{className:"objective-sliders-container",children:this.sliderElements}),Object(b.jsx)("div",{id:"pie-chart-container",children:Object(b.jsx)("div",{id:"objectives-pie"})})]})}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.__setAvailableGoals(e.objectives,e.goalsJunction,e.policyId),e.objectives.forEach((function(e){t.sliders[e.Id].setValue(t.objectiveWeights[e.Id])})),this.__updatePie(e.objectives)}},{key:"componentDidMount",value:function(){var e=this;this.props.objectives.forEach((function(t){e.sliders[t.Id]=new window.dhtmlXSlider({parent:"obj_"+t.Id,size:340,step:1,min:0,max:100,value:e.objectiveWeights[t.Id]}),e.sliders[t.Id].linkTo("sld_value_"+t.Id),e.sliders[t.Id].attachEvent("onSlideEnd",(function(i){var r=s.normalize(i,e.maxWeightNotNormalized,Ie);e.__handleValueChanged(r,t.Id)}))})),this.__createPie(this.props.objectives)}},{key:"__createSlidersElements",value:function(e){return e.map((function(e){return Object(b.jsxs)("div",{className:"slider-container",children:[Object(b.jsxs)("div",{children:[e.Name,Object(b.jsx)("span",{className:"slider-value",id:"sld_value_"+e.Id})]}),Object(b.jsx)("div",{id:"obj_"+e.Id}),Object(b.jsx)("span",{className:"slider-val",children:"0"}),Object(b.jsx)("span",{className:"slider-val slider-val-max",children:Ie})]})}))}},{key:"__setAvailableGoals",value:function(e,t,s){var i=this;this.objectiveWeights={},e.forEach((function(e){i.objectiveWeights[e.Id]=0,t.forEach((function(t){s===t.SchedulingPolicy&&e.Id===t.ServiceGoal&&(i.objectiveWeights[e.Id]=t.Weight)}))})),this.numberOfActiveObjective=Object.keys(this.objectiveWeights).length,this.__normalizeWeights()}},{key:"__normalizeWeights",value:function(){for(var e in this.maxWeightNotNormalized=0,this.objectiveWeights)this.objectiveWeights[e]>this.maxWeightNotNormalized&&(this.maxWeightNotNormalized=this.objectiveWeights[e]);for(var t in 0===this.maxWeightNotNormalized&&(this.maxWeightNotNormalized=Ie),this.objectiveWeights)this.objectiveWeights[t]=s.normalize(this.objectiveWeights[t],Ie,this.maxWeightNotNormalized)}},{key:"__handleValueChanged",value:function(e,t){var s=this,i=null;if(this.props.goalsJunction.forEach((function(e){s.props.policyId!==e.SchedulingPolicy||t!==e.ServiceGoal||i||(i=e)})),0===e)this.props.onSave("delete",i.Id);else{var r={Id:i&&i.Id||null};r[se.SchedulingPolicyGoal.SchedulingPolicy]=this.props.policyId,r[se.SchedulingPolicyGoal.Service_Goal]=t,r[se.SchedulingPolicyGoal.Weight]=e,this.props.onSave("upsert",r)}}},{key:"__createPie",value:function(e){this.__preparePieData(e),this.objectivesPie=new window.dhtmlXChart({view:"pie",container:"objectives-pie",value:"#weight#",color:"#color#",pieInnerText:"#weight#",labelLines:!0,shadow:0,label:function(e){return'<div class="oe-graph-label" title="'.concat(e.label,'">').concat(e.label,"</div>")}}),this.objectivesPie.parse(this.pieData,"json")}},{key:"__preparePieData",value:function(e){var t=this,s={},i=["#fe8f61","#db6d7a","#88c551","#34bbe7","#ffc35f","#e46fbe","#fa975c","#b7c3cd","#20ca9f","#5a9cdc","#f6675b","#e25c80"],r=0,n=0;for(var a in this.objectiveWeights)n+=this.objectiveWeights[a];this.pieData=[],e.forEach((function(e){s[e.Id]=i[r++],r===i.length&&(r=0),0!==t.objectiveWeights[e.Id]&&t.pieData.push({id:e.Id,weight:(t.objectiveWeights[e.Id]/n*100).toFixed(2)+"%",label:e.Name,color:s[e.Id]})}))}},{key:"__updatePie",value:function(e){this.objectivesPie.clearAll(),this.__preparePieData(e),this.objectivesPie.parse(this.pieData,"json")}}],[{key:"normalize",value:function(e,t,s){return s<=Ie?e:t/s*(e-s)+t}}]),s}(i.Component),Re=(s(79),s(80),function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(e){var i;return Object(c.a)(this,s),(i=t.call(this,e)).saving=!1,i}return Object(l.a)(s,[{key:"render",value:function(){var e=this;return Object(b.jsxs)("div",{id:"AddNewPolicy",className:"form-input",children:[Object(b.jsx)("input",{type:"text",maxlength:"100",placeholder:m.PolicyNamePlaceHolder,ref:function(t){return e.policyNameInput=t},onKeyDown:this.__handleKeyboardAdd.bind(this)}),Object(b.jsx)("button",{className:"truncate ob-button guided-setup-button guided-setup-button_neutral",title:m.NewTerritoryButton,onClick:this.__addNewPolicy.bind(this),children:m.NewTerritoryButton})]})}},{key:"__addNewPolicy",value:function(){var e=this;if(!this.saving){var t=this.policyNameInput.value;t&&t.replace(/\s/g,"").length?(this.saving=!0,this.policyNameInput.value="",this.props.onNewPolicy(t,(function(){e.saving=!1}))):alert(m.PolicyNameBlank)}}},{key:"__handleKeyboardAdd",value:function(e){13===e.which&&this.__addNewPolicy()}}]),s}(i.Component)),Ae=function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(c.a)(this,s),(e=t.call(this)).icon={url:x.policy,style:{background:"#d15c96"}},e.__generatePageHeader(),e.state={selected:null,sobjects:{}},ae.get().then(e.__setSobjectsOnState.bind(Object(je.a)(e))),e.__handleFormSaved=D()(e.__handleFormSaved,2e3),e}return Object(l.a)(s,[{key:"render",value:function(){return 0===Object.keys(this.state.sobjects).length?Object(b.jsx)("div",{children:this.pageHeader}):Object.keys(this.state.sobjects).length>0&&null===this.state.selected?Object(b.jsxs)("div",{children:[this.pageHeader,Object(b.jsxs)("div",{id:"PoliciesManagementList",children:[Object(b.jsx)(Re,{onNewPolicy:this.__handleNewPolicyAdded.bind(this)}),this.__generagePoliciesList()]}),Object(b.jsx)("div",{id:"PolicyForm",children:Object(b.jsx)("div",{className:"no-policy-selected",children:m.SelectPolicyFromTheLeft})})]}):Object(b.jsxs)("div",{children:[this.pageHeader,Object(b.jsxs)("div",{id:"PoliciesManagementList",children:[Object(b.jsx)(Re,{onNewPolicy:this.__handleNewPolicyAdded.bind(this)}),this.__generagePoliciesList()]}),Object(b.jsxs)("div",{id:"PolicyForm",children:[Object(b.jsx)(we,{selected:this.state.selected,formSavedCallback:this.__handleFormSaved.bind(this)}),Object(b.jsx)(Te,{policyId:this.state.selected.Id,rules:this.state.sobjects.rules,onAdded:this.__handlePolicyRulesChanged.bind(this),onRemoved:this.__handlePolicyRulesChanged.bind(this),rulesJunction:this.state.sobjects.rulesJunction}),Object(b.jsx)(Pe,{policyId:this.state.selected.Id,objectives:this.state.sobjects.goals,goalsJunction:this.state.sobjects.goalsJunction,onSave:this.__handleObjectiveChange.bind(this)})]})]})}},{key:"__reselectPolicyAfterFetching",value:function(){if(this.state.selected)for(var e=this.state.sobjects.policies,t=this.state.selected.Id,s=0;s<e.length;s++)if(e[s].Id===t){this.setState({selected:e[s]});break}}},{key:"__handlePolicySelected",value:function(e){if(!this.state.selected||e!==this.state.selected.Id)for(var t=this.state.sobjects.policies,s=0;s<t.length;s++)if(t[s].Id===e){this.setState({selected:t[s]});break}}},{key:"__handleNewPolicyAdded",value:function(e,t){var s=this;y("addPolicy",e).then((function(e){ae.parseAllPoliciesObjects(e),s.__setSobjectsOnState(ae.getNow()),s.__reselectPolicyAfterFetching(),t()}))}},{key:"__clonePolicy",value:function(e){var t=this;y("clonePolicy",e).then((function(e){ae.parseAllPoliciesObjects(e),t.__setSobjectsOnState(ae.getNow()),t.__reselectPolicyAfterFetching()}))}},{key:"__handleFormSaved",value:function(e,t,s,i,r,n){var a=this;y("upsertPolicy",e,t,s,i,r,n).then((function(e){var t=ae.parsePolicy(e);ae.upsertPolicy(t),a.setState({sobjects:ae.getNow(),selected:t})}))}},{key:"__handlePolicyRulesChanged",value:function(e,t,s){var i=this,r="add"===t?"addNewWorkRulePolicyJunction":"removeRulesFromPolicy";if("remove"===t){var n=[];e.forEach((function(e){var t=i.state.sobjects.rulesJunction.filter((function(t){return t.SchedulingPolicy===i.state.selected.Id&&t.WorkRule===e}));n.push.apply(n,Object(be.a)(t))})),e=n.map((function(e){return e.Id}))}y(r,e).then((function(e){var t=e.map(ae.parseRulePolicyJunction),r=Object.assign({},i.state.sobjects,{rulesJunction:t});ae.updatePolicies("rulesJunction",t),i.setState({sobjects:r}),s()}))}},{key:"__handleObjectiveChange",value:function(e,t){var s=this;"delete"===e&&y("removeObjectiveFromPolicy",t).then((function(e){e&&(ae.deletePolicyObjectiveJuction(t),s.setState({sobjects:ae.getNow()}))})),"upsert"===e&&y("upsertObjectiveToPolicy",t).then((function(e){ae.upsertPolicyObjectiveJunction(e[0]),s.setState({sobjects:ae.getNow()})}))}},{key:"__generatePageHeader",value:function(){this.pageHeader=Object(b.jsx)(g,{icon:this.icon,title:m.SchedulingPolicies,text:m.SchedulingPolicyOBInto,more:s.generateIntroText()})}},{key:"__generagePoliciesList",value:function(){return Object(b.jsx)(Se,{selectedId:this.state.selected&&this.state.selected.Id,policies:this.state.sobjects.policies,onClone:this.__clonePolicy.bind(this),onSelected:this.__handlePolicySelected.bind(this)})}},{key:"__setSobjectsOnState",value:function(e){this.setState({sobjects:{goals:e.goals,goalsJunction:e.goalsJunction,policies:e.policies,rulesJunction:e.rulesJunction,rules:e.rules}})}}],[{key:"generateIntroText",value:function(){return Object(b.jsxs)("span",{children:[Object(b.jsx)("br",{}),m.SchedulingPolicyOBInto2,Object(b.jsxs)("ul",{children:[Object(b.jsx)("li",{children:m.SchedulingPolicyOBPoint1}),Object(b.jsx)("li",{children:m.SchedulingPolicyOBPoint2})]}),m.SchedulingPolicyOBEnding]})}}]),s}(i.Component),Le=(s(81),s(82),function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(e){var i;return Object(c.a)(this,s),(i=t.call(this,e)).state={saving:!1},i}return Object(l.a)(s,[{key:"render",value:function(){return Object(b.jsxs)("div",{children:[this.generateDispatcherLicense(),this.generateAgentLicense()]})}},{key:"generateDispatcherLicense",value:function(){if(this.state.saving)return Object(b.jsx)("img",{src:x.spinner,className:"lt-saving-icon lt-saving-fsl"});var e=this.doesHaveLicense("FieldServiceDispatcherPsl"),t="slds-icon ad-licenseIcon ".concat(e?"dispatcherLicense":"");return Object(b.jsx)("span",{title:e?m.RemoveDisLicnse:m.AddDisLicnse,children:Object(b.jsx)("svg",{"aria-hidden":"true",onClick:this.licenseChanged.bind(this,"dispatcher",!e),className:t,children:Object(b.jsx)("use",{href:x.dispatcherLicense})})})}},{key:"generateAgentLicense",value:function(){if(this.state.saving)return null;var e=this.props.hasAgentPermissions,t="slds-icon ad-licenseIcon ".concat(e?"agentLicense":"");return Object(b.jsx)("span",{title:e?m.RemoveAgentLicnse:m.AddAgentLicnse,children:Object(b.jsx)("svg",{"aria-hidden":"true",onClick:this.licenseChanged.bind(this,"agent",!e),className:t,children:Object(b.jsx)("use",{href:x.agentLicense})})})}},{key:"licenseChanged",value:function(e,t){var s=this;if(!this.props.hasAgentPermissions||!this.doesHaveLicense("FieldServiceDispatcherPsl")){if("dispatcher"===e&&this.props.hasAgentPermissions)return void alert(m.LicenseConflictDispatcher);if("agent"===e&&this.doesHaveLicense("FieldServiceDispatcherPsl"))return void alert(m.LicenseConflictAgent)}this.setState({saving:!0}),this.props.handleChange(e,t,(function(){s.setState({saving:!1})}))}},{key:"doesHaveLicense",value:function(e){if(!this.props.licenses)return!1;for(var t=0;t<this.props.licenses.length;t++)if(this.props.licenses[t].PermissionSetLicenseId===this.props.licensesIds[e])return!0;return!1}}]),s}(i.Component)),He=function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(c.a)(this,s),(e=t.call(this)).state={asc:-1},e}return Object(l.a)(s,[{key:"render",value:function(){var e=this,t=-1===this.state.asc?Object(b.jsx)("svg",{"aria-hidden":"true",className:"slds-icon cut-arrow",children:Object(b.jsx)("use",{href:x.arrowdown})}):Object(b.jsx)("svg",{"aria-hidden":"true",className:"slds-icon cut-arrow",children:Object(b.jsx)("use",{href:x.arrowup})});return Object(b.jsxs)("div",{id:"utt-table-container",children:[Object(b.jsxs)("div",{className:"utt-table-head",children:[Object(b.jsxs)("div",{className:"utt-table-head-cell",onClick:function(t){return e.setState({asc:-1*e.state.asc})},children:[m.UTuser," ",t]}),Object(b.jsx)("div",{className:"utt-table-head-cell utt-territories-cell",children:m.UTterr}),Object(b.jsx)("div",{className:"utt-table-head-cell utt-territories-cell-license",children:m.UTLicense})]}),this.__generateAllRows()]})}},{key:"__generateAllRows",value:function(){var e=this,t=Object.keys(this.props.userTerritories).filter((function(t){return e.__filterRow(e.props.userTerritories[t])})).sort((function(t,s){return e.props.userTerritories[t][0].territoryName.toUpperCase()>e.props.userTerritories[s][0].territoryName.toUpperCase()?-1*e.state.asc:e.state.asc})),s=this.props.licensesIds.FieldServiceDispatcherPsl,i=function(i){var r=e.props.assignedLicenses[i];(r[0].PermissionSetLicenseId===s||r[1]&&r[1].PermissionSetLicenseId===s)&&-1===t.findIndex((function(e){return e===i}))&&t.push(i)};for(var r in this.props.assignedLicenses)i(r);return t.map((function(t){var s=e.props.users.find((function(e){return e.Id===t})),i=[{Id:null,territoryId:"",territoryName:"",userId:t,active:s.IsActive,userName:s.Name}];return e.__generateRow(e.props.userTerritories[t]||i,s.IsActive)}))}},{key:"__generateRow",value:function(e){var t=e.map((function(e){return e.territoryName})).join(", ");return Object(b.jsxs)("div",{className:"utt-table-row",children:[Object(b.jsxs)("div",{className:"utt-table-cell",children:[e[0].userName,Object(b.jsx)("a",{title:m.Open_User_Record,onClick:this.__openSObjectLink.bind(this,e[0].userId),children:Object(b.jsx)("svg",{"aria-hidden":"true",className:"slds-icon",children:Object(b.jsx)("use",{href:x.open})})})]}),Object(b.jsxs)("div",{className:"utt-table-cell utt-territories-cell",title:t,children:[Object(b.jsx)("div",{className:"utt-territory-names-table",children:t}),Object(b.jsx)("span",{onClick:this.__editClicked.bind(this,e[0].userId),children:m.UTEdit})]}),Object(b.jsx)("div",{className:"utt-table-cell utt-territories-cell-license",children:Object(b.jsx)(Le,{hasAgentPermissions:this.props.agentPermissions[e[0].userId],licenses:this.props.assignedLicenses[e[0].userId],licensesIds:this.props.licensesIds,handleChange:this.__licenseChanged.bind(this,e[0].userId)})})]})}},{key:"__licenseChanged",value:function(e,t,s,i){var r=s?"add":"remove",n="dispatcher"===t;this.props.handleLicenseChanged(e,r,n,i)}},{key:"__filterRow",value:function(e){return e[0].userName.toUpperCase().indexOf(this.props.filter.toUpperCase())>-1}},{key:"__editClicked",value:function(e){this.props.editClicked(e)}},{key:"__openSObjectLink",value:function(e,t){t.preventDefault(),C(e)}}]),s}(i.Component),De=(s(83),function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(c.a)(this,s),(e=t.call(this)).state={isNew:!1,userTerritories:{},saving:!1,lightboxUser:null,filter:"",filterTerritories:"",showAddLightbox:!1,territories:[],selectedTerritories:{},assignedLicenses:{},agentPermissions:{},licensesIds:{},counters:{FieldServiceDispatcherPsl:{total:0,used:0}}},e.icon={url:x.socialshare,style:{background:"#21a972"}},e.maintext=Object(b.jsxs)("div",{children:[m.SharingUsersTerritoriesExplanation,Object(b.jsxs)("ul",{children:[Object(b.jsx)("li",{children:m.SharringMore1}),Object(b.jsx)("li",{children:m.SharringMore2})]})]}),e.moreText=Object(b.jsx)("div",{children:m.SharringMore3}),e.getSUTdata(),e}return Object(l.a)(s,[{key:"render",value:function(){var e=this;return Object(b.jsxs)("div",{id:"sharing-users-territORIs",children:[Object(b.jsx)(g,{title:m.SharingUsersTerritories,text:this.maintext,icon:this.icon,more:this.moreText}),Object(b.jsxs)("div",{className:"sut-search",children:[Object(b.jsx)("input",{type:"search",placeholder:m.SearchUsersOb,value:this.state.filter,onChange:function(t){return e.setState({filter:t.target.value})}}),Object(b.jsx)("span",{className:"sut-add guided-setup-button guided-setup-button_neutral",onClick:this.__addNewButton.bind(this),children:m.UTAddNew}),Object(b.jsxs)("div",{className:"sut-licenses",title:m.RemainingDispatcherLicenses,children:[Object(b.jsx)("svg",{"aria-hidden":"true",className:"slds-icon dispatcher-counter",children:Object(b.jsx)("use",{href:x.dispatcherLicense})}),m.UTDispatchers," ",this.state.counters.FieldServiceDispatcherPsl.used,"\\",this.state.counters.FieldServiceDispatcherPsl.total]})]}),Object(b.jsx)(W,{show:this.state.showAddLightbox,maxHeight:"450",width:"680",handleVisibility:this.__toggleAddNew.bind(this),children:this.__renderLightboxContent()}),Object(b.jsx)(He,{userTerritories:this.state.userTerritories,filter:this.state.filter,editClicked:this.__toggleAddNew.bind(this),assignedLicenses:this.state.assignedLicenses,licensesIds:this.state.licensesIds,agentPermissions:this.state.agentPermissions,users:this.state.users,handleLicenseChanged:this.handleLicenseChanged.bind(this)})]})}},{key:"__renderLightboxContent",value:function(){var e=this,t=null;return this.state.saving&&(t=Object(b.jsxs)("div",{className:"sut-saving",children:[Object(b.jsx)("img",{src:x.spinner}),m.SavingUserTerritories]})),this.state.showAddLightbox?Object(b.jsxs)("div",{className:"sut-territories-container",children:[Object(b.jsxs)("div",{children:[this.__generateLightboxTitle(),Object(b.jsx)("input",{type:"search",placeholder:m.SearchTerrriris,onChange:function(t){return e.setState({filterTerritories:t.target.value})}}),this.__generateLightboxIntro()]}),Object(b.jsx)("div",{id:"sut-ter-checkbox",children:this.__generateTerritoriesCheckbox(this.state.lightboxUser)}),t,Object(b.jsx)("div",{id:"cut-button",className:"guided-setup-button guided-setup-button_brand",onClick:this.__createUserTerritories.bind(this),children:m.CreateUserTerritories})]}):null}},{key:"__generateLightboxTitle",value:function(){var e=this;if(this.state.isNew){var t=this.state.users.filter((function(t){return!e.state.userTerritories[t.Id]||0===e.state.userTerritories[t.Id].length})).sort((function(e,t){return e.Name.toUpperCase()>t.Name.toUpperCase()?1:-1})).map((function(e){return Object(b.jsx)("option",{value:e.Id,children:e.Name})}));return t.unshift(Object(b.jsx)("option",{value:null,children:m.CUTSelectUser})),Object(b.jsxs)("h1",{children:[m.AssignTerritoriesFor,Object(b.jsx)("select",{id:"sut-select",value:this.state.lightboxUser,onChange:function(t){return e.setState({lightboxUser:t.target.value})},children:t})]})}return Object(b.jsxs)("h1",{children:[m.AssignTerritoriesFor," ",this.state.userTerritories[this.state.lightboxUser][0].userName]})}},{key:"__generateLightboxIntro",value:function(){return Object(b.jsxs)("h2",{children:[m.Assign_Territories_Dispatcher_intro1,Object(b.jsx)("br",{}),Object(b.jsx)("a",{href:"https://help.salesforce.com/articleView?id=fs_sharing.htm",target:"_blank",children:m.Assign_Territories_Dispatcher_intro2})]})}},{key:"__createUserTerritories",value:function(){var e=this;if(this.state.lightboxUser){if(this.state.isNew){var t=!1;for(var s in this.state.selectedTerritories)if(this.state.selectedTerritories[s]){t=!0;break}if(!t)return void alert(m.Nocurrentterr47)}var i=[];for(var r in this.state.selectedTerritories)this.state.selectedTerritories[r]&&i.push(r);this.setState({saving:!0}),y("updateUserTerritories",this.state.lightboxUser,i).then((function(t){var s=e.state.lightboxUser,i=Object.assign({},e.state.userTerritories),r=[];t.forEach((function(t){r.push(e.parseUserTerritory(t))})),r.length>0?i[s]=r:delete i[s],e.setState({userTerritories:i,saving:!1,lightboxUser:null,showAddLightbox:!1})})).catch((function(t){console.error(t),e.setState({saving:!1})}))}else alert(m.NoUSelected)}},{key:"__addNewButton",value:function(){this.__toggleAddNew()}},{key:"__toggleAddNew",value:function(e){var t={};e&&this.state.userTerritories[e]&&this.state.userTerritories[e].forEach((function(e){return t[e.territoryId]=!0})),this.setState({isNew:!e,filterTerritories:"",showAddLightbox:!this.state.showAddLightbox,selectedTerritories:t,lightboxUser:e})}},{key:"__generateTerritoriesCheckbox",value:function(){var e=this;return this.state.territories.filter((function(t){return t.Name.toUpperCase().indexOf(e.state.filterTerritories.toUpperCase())>-1})).sort((function(e,t){return e.Name.toUpperCase()>t.Name.toUpperCase()?1:-1})).map((function(t){return Object(b.jsxs)("span",{className:"sut-ter-lab-cont",children:[Object(b.jsx)("input",{id:"territory_"+t.Id,type:"checkbox",checked:e.state.selectedTerritories[t.Id],onClick:e.checkTerritoryInLightbox.bind(e,t.Id)}),Object(b.jsx)("label",{htmlFor:"territory_"+t.Id,children:t.Name})]})}))}},{key:"checkTerritoryInLightbox",value:function(e,t){var s=Object.assign({},this.state.selectedTerritories);s[e]=t.target.checked,this.setState({selectedTerritories:s})}},{key:"checkIfTerritorySelected",value:function(e,t){if(!this.state.userTerritories[e])return!1;for(var s=this.state.userTerritories[e],i=0;i<s.length;i++)if(s[i].territoryId===t)return!0;return!1}},{key:"getSUTdata",value:function(){var e=this;y("getSUTdata").then((function(t){var s={},i={},r={},n={},a={};t.licensesIds.forEach((function(e){r[e.DeveloperName]=e.Id})),t.assignedPermissionSet.forEach((function(e){n[e.AssigneeId]=!0})),t.assignedLicenses.forEach((function(e){i[e.AssigneeId]=i[e.AssigneeId]||[],i[e.AssigneeId].push(e)})),t.licensesCounter.forEach((function(e){s[e.DeveloperName]={total:e.TotalLicenses,used:e.UsedLicenses}})),t.userTerritories.forEach((function(t){var s=e.parseUserTerritory(t);a[s.userId]=a[s.userId]||[],a[s.userId].push(s)})),e.setState({assignedLicenses:i,licensesIds:r,userTerritories:a,counters:s,agentPermissions:n,users:t.users,territories:t.territories})}))}},{key:"parseUserTerritory",value:function(e){return{Id:e.Id,territoryId:e[se.UserTerritories.ServiceTerritory],territoryName:e[se.UserTerritories.TerritoryName],userId:e[se.UserTerritories.User.replace("__c","__r")].Id,userName:e[se.UserTerritories.User.replace("__c","__r")].Name}}},{key:"handleLicenseChanged",value:function(e,t,s,i){var r=this;y("removeAgentDispatcherPermissionSets",e,t,s).then((function(n){"add"===t||"remove"===t&&!s?r.__handleReplyWhenLicenseChanged(e,i,n):s&&"remove"===t&&y("removeDispatcherLicense",e).then((function(t){r.__handleReplyWhenLicenseChanged(e,i,t)}))})).catch((function(e){window.alert(e.message),i()}))}},{key:"__handleReplyWhenLicenseChanged",value:function(e,t,s){var i={},r=Object.assign({},this.state.assignedLicenses),n=Object.assign({},this.state.agentPermissions);r[e]=[],s.assignedLicenses.forEach((function(e){r[e.AssigneeId].push(e)})),s.licensesCounter.forEach((function(e){i[e.DeveloperName]={total:e.TotalLicenses,used:e.UsedLicenses}})),0===s.assignedPermissionSet.length?n[e]=!1:s.assignedPermissionSet.forEach((function(e){n[e.AssigneeId]=!0}));var a=[];for(var o in r)0===r[o].length&&a.push(o);a.forEach((function(e){return delete r[e]})),t(),this.setState({assignedLicenses:r,agentPermissions:n,counters:i})}}]),s}(i.Component)),We=(s(84),function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(e){var i;return Object(c.a)(this,s),(i=t.call(this,e)).count=0,i.initCountAnimation(e.count),i}return Object(l.a)(s,[{key:"render",value:function(){var e=this,t=Object(b.jsxs)("div",{className:"object-counter-container",children:[Object(b.jsx)("svg",{"aria-hidden":"true",style:this.props.icon.style,className:"slds-icon",children:Object(b.jsx)("use",{href:this.props.icon.url})}),Object(b.jsx)("div",{className:"number-counter",ref:function(t){return e.counterElement=t}}),Object(b.jsx)("div",{className:"counter-object-name",children:this.props.name})]});return this.props.link?Object(b.jsx)(h.a,{to:this.props.link,children:t}):t}},{key:"initCountAnimation",value:function(e){var t=this,s=e<100?1:5,i=e<100?10:2;this.intervalId=setInterval((function(){if(t.count<e){if(!t.counterElement)return void clearInterval(t.intervalId);t.counterElement.innerText=t.count+=s,t.count>e&&(t.count=e,t.counterElement.innerText=t.count)}else 0===e&&t.counterElement?t.counterElement.innerText=0:clearInterval(t.intervalId)}),i)}}]),s}(i.Component)),Ee=(s(85),function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(c.a)(this,s),(e=t.call(this)).state={counters:null},y("getObjectsCount").then((function(t){e.setState({counters:t})})).catch((function(e){console.error(e)})),e.icons={policies:{url:x.policy,style:{fill:"#d15c96"}},territories:{url:x.territory,style:{fill:"#7e8be4"}},workTypes:{url:x.work_type,style:{fill:"#5876a3"}},objectives:{url:x.objectives,style:{fill:"#56aadf"}},operatingHours:{url:x.operatingHours,style:{fill:"#6b9de2"}},resources:{url:x.resources,style:{fill:"#ef6e64"}},rules:{url:x.rules,style:{fill:"#45c073"}}},e.links={policies:"/SchedulingPolicies",territories:"/DefineTerritories",workTypes:"/WorkTypesAndSkills",objectives:"/SchedulingPolicies",operatingHours:null,resources:"/ResourcesDefenition",rules:"/SchedulingPolicies"},e}return Object(l.a)(s,[{key:"render",value:function(){var e=m.GuidedSetup_Welcome_walkthrough_partC.split("$0");return Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"welcome-conaynet",children:[Object(b.jsx)("h1",{children:m.WelcomeOb}),Object(b.jsx)("div",{children:m.GuidedSetup_Welcome_walkthrough_partA}),Object(b.jsx)("br",{}),Object(b.jsx)("div",{children:m.GuidedSetup_Welcome_walkthrough_partB}),Object(b.jsx)("br",{}),Object(b.jsxs)("div",{children:[Object(b.jsx)("span",{children:e[0]}),Object(b.jsx)("a",{className:"setup-link",href:"https://help.salesforce.com/articleView?id=fs_set_up.htm",target:"_blank",children:m.GuidedSetup_Setup_link}),Object(b.jsx)("span",{children:e[1]})]})]}),Object(b.jsx)("div",{className:"counters-container",children:this.__generateCounters()})]})}},{key:"__generateCounters",value:function(){if(!this.state.counters)return null;var e=[];for(var t in this.state.counters)e.push(Object(b.jsx)(We,{name:m.objectNames[t],count:this.state.counters[t],icon:this.icons[t],link:this.links[t]}));return e}}]),s}(i.Component)),Me=(s(86),function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(){return Object(c.a)(this,s),t.call(this)}return Object(l.a)(s,[{key:"render",value:function(){return Object(b.jsx)("div",{id:"ob-toast",ref:function(e){window.toastElement=e,s.toastElement=e},children:this.props.text})}}]),s}(i.Component)),Ue=(s(87),function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(c.a)(this,s),(e=t.call(this)).state={saving:!1},y.setComponenetSavingStatus=function(e){Me.toastElement.style.display=e?"inline-block":"none"},e}return Object(l.a)(s,[{key:"render",value:function(){return Object(b.jsxs)("div",{className:"workCanvasContainer",children:[Object(b.jsx)(Me,{text:m.OnboardingSaving}),Object(b.jsx)(f.a,{path:"/",exact:!0,component:Ee}),Object(b.jsx)(f.a,{path:"/DefineTerritories",component:J}),Object(b.jsx)(f.a,{path:"/WorkTypesAndSkills",component:re}),Object(b.jsx)(f.a,{path:"/AppointmentBooking",component:de}),Object(b.jsx)(f.a,{path:"/ResourcesDefenition",component:ke}),Object(b.jsx)(f.a,{path:"/SchedulingPolicies",component:Ae}),Object(b.jsx)(f.a,{path:"/SharingUsersTerritories",component:De})]})}}]),s}(i.Component)),Fe=function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(){return Object(c.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)(v,{}),Object(b.jsx)(Ue,{})]})}}]),s}(i.Component),Be=Fe;s(89);a.a.render(Object(b.jsx)(o.a,{children:Object(b.jsx)(Be,{})}),document.getElementById("OnboardingRoot"))}]),[[90,1,2]]]);
//# sourceMappingURL=main.e1fae4ab.chunk.js.map