<!--
 - Created by timothychiang on 2020-03-21.
 -->

<!-- Cpq 2 Existing Services -->
<template>
	<div if:true={isLoading}>
		<lightning-spinner alternative-text={spinnerMessage}></lightning-spinner>
	</div>

	<lightning-card title="">
		<lightning-button label="Back"
						  slot="actions"
						  onclick={handleCloseExistingServices}></lightning-button>
		<lightning-button label="Allocation Report"
						  slot="actions"
						  onclick={handleReportOpen}></lightning-button>
		<div class="slds-p-horizontal_small">
			<span class="slds-text-heading_large slds-truncate">
				Existing Services - {headerTitle}
			</span>
			<br/><br/>
			<lightning-datatable
				key-field="id"
				hide-checkbox-column
				data={data}
				columns={columns}
				default-sort-direction={defaultSortDirection}
				sorted-direction={sortDirection}
				sorted-by={sortedBy}
				onsort={onHandleSort}>
			</lightning-datatable>
			<div class="slds-grid slds-gutters">
				<div class="slds-col slds-size_9-of-12">
				</div>
				<div class="slds-col slds-size_1-of-12">
					<span class="slds-form-element__label">Weekly RR</span><br/>
					<lightning-formatted-number
						value={totalWeeklyAmount}
						format-style="currency"
						currency-code={isoCode}
					></lightning-formatted-number>
				</div>
				<div class="slds-col slds-size_1-of-12">
					<span class="slds-form-element__label">Monthly RR</span><br/>
					<lightning-formatted-number
						value={totalMonthlyAmount}
						format-style="currency"
						currency-code={isoCode}
					></lightning-formatted-number>
				</div>
				<div class="slds-col slds-size_1-of-12">
					<span class="slds-form-element__label">Annual RR</span><br/>
					<lightning-formatted-number
						value={totalAnnualAmount}
						format-style="currency"
						currency-code={isoCode}
					></lightning-formatted-number>
				</div>
			</div>
		</div>
	</lightning-card>
</template>